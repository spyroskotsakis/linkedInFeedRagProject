# Browser interactions | Selenium

**URL:** https://www.selenium.dev/documentation/webdriver/interactions/_print
**Word Count:** 17006
**Links Count:** 307
**Scraped:** 2025-07-17 06:15:56
**Status:** completed

---

This is the multi-page printable view of this section. Click here to print.

[Return to the regular view of this page](https://www.selenium.dev/documentation/webdriver/interactions/).

# Browser interactions

  * 1: Browser navigation   * 2: JavaScript alerts, prompts and confirmations   * 3: Working with cookies   * 4: Working with IFrames and frames   * 5: Print Page   * 6: Working with windows and tabs   * 7: Virtual Authenticator

## Get browser information

### Get title

You can read the current page title from the browser:

[Move Code](https://www.selenium.dev/documentation/about/contributing/#moving-examples)

  * Java   * Python   * CSharp   * Ruby   * JavaScript   * Kotlin

                    String title = driver.getTitle();

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/java/src/test/java/dev/selenium/interactions/InteractionsTest.java#L15)

##### examples/java/src/test/java/dev/selenium/interactions/InteractionsTest.java

Copy  Close               package dev.selenium.interactions;          import dev.selenium.BaseChromeTest;     import org.junit.jupiter.api.Assertions;     import org.junit.jupiter.api.Test;     import org.openqa.selenium.Cookie;     import java.util.Set;          public class InteractionsTest extends BaseChromeTest {       @Test       public void getTitle() {         try {           driver.get("https://www.selenium.dev/");           // get title           String title = driver.getTitle();           Assertions.assertEquals(title, "Selenium");         } finally {           driver.quit();         }       }       @Test       public void getCurrentUrl() {         try {           driver.get("https://www.selenium.dev/");           // get current url           String url = driver.getCurrentUrl();           Assertions.assertEquals(url, "https://www.selenium.dev/");         } finally {           driver.quit();         }       }     }               title = driver.title

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/python/tests/interactions/test_interactions.py#L7)

##### examples/python/tests/interactions/test\_interactions.py

Copy  Close               from selenium import webdriver          driver = webdriver.Chrome()          driver.get("https://www.selenium.dev")          title = driver.title     assert title == "Selenium"          url = driver.current_url     assert url == "https://www.selenium.dev/"          driver.quit()                                String title = driver.Title;

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/dotnet/SeleniumDocs/Interactions/InteractionsTest.cs#L37)

##### examples/dotnet/SeleniumDocs/Interactions/InteractionsTest.cs

Copy  Close               // Licensed to the Software Freedom Conservancy (SFC) under one     // or more contributor license agreements.  See the NOTICE file     // distributed with this work for additional information     // regarding copyright ownership.  The SFC licenses this file     // to you under the Apache License, Version 2.0 (the     // "License"); you may not use this file except in compliance     // with the License.  You may obtain a copy of the License at     //     //   http://www.apache.org/licenses/LICENSE-2.0     //     // Unless required by applicable law or agreed to in writing,     // software distributed under the License is distributed on an     // "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY     // KIND, either express or implied.  See the License for the     // specific language governing permissions and limitations     // under the License.               using System;     using Microsoft.VisualStudio.TestTools.UnitTesting;     using OpenQA.Selenium;     using OpenQA.Selenium.Chrome;     namespace SeleniumDocumentation.SeleniumInteractions     {         [TestClass]         public class InteractionsTest         {             [TestMethod]             public void TestInteractions()             {                 WebDriver driver = new ChromeDriver();                 driver.Manage().Timeouts().ImplicitWait = TimeSpan.FromMilliseconds(500);                      // Navigate to Url                 driver.Url="https://www.selenium.dev/";                 //GetTitle                 String title = driver.Title;                 Assert.AreEqual(title, "Selenium");                      //GetCurrentURL                 String url = driver.Url;                 Assert.AreEqual(url, "https://www.selenium.dev/");                      //quitting driver                 driver.Quit(); //close all windows             }         }     }                 it 'gets the current title' do

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/ruby/spec/interactions/browser_spec.rb#L8)

##### examples/ruby/spec/interactions/browser\_spec.rb

Copy  Close               # frozen_string_literal: true          require 'spec_helper'          RSpec.describe 'Browser' do       let(:driver) { start_session }            it 'gets the current title' do         driver.navigate.to 'https://www.selenium.dev/'         current_title = driver.title         expect(current_title).to eq 'Selenium'       end            it 'gets the current url' do         driver.navigate.to 'https://www.selenium.dev/'         current_url = driver.current_url         expect(current_url).to eq 'https://www.selenium.dev/'       end     end                        let title = await driver.getTitle();

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/javascript/test/interactions/interactionsIndex.spec.js#L20)

##### examples/javascript/test/interactions/interactionsIndex.spec.js

Copy  Close               const {Builder } = require('selenium-webdriver');     const assert = require("node:assert");          describe('Interactions', function () {       let driver;            before(async function () {         driver = new Builder()           .forBrowser('chrome')           .build();       });            after(async () => await driver.quit());            it('Should be able to get title and current url', async function () {         const url = 'https://www.selenium.dev/';         await driver.get(url);              //Get Current title         let title = await driver.getTitle();         assert.equal(title, "Selenium");              //Get Current url         let currentUrl = await driver.getCurrentUrl();         assert.equal(currentUrl, url);       });     });               driver.title

### Get current URL

You can read the current URL from the browser’s address bar using:

[Move Code](https://www.selenium.dev/documentation/about/contributing/#moving-examples)

  * Java   * Python   * CSharp   * Ruby   * JavaScript   * Kotlin

                    String url = driver.getCurrentUrl();

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/java/src/test/java/dev/selenium/interactions/InteractionsTest.java#L26)

##### examples/java/src/test/java/dev/selenium/interactions/InteractionsTest.java

Copy  Close               package dev.selenium.interactions;          import dev.selenium.BaseChromeTest;     import org.junit.jupiter.api.Assertions;     import org.junit.jupiter.api.Test;     import org.openqa.selenium.Cookie;     import java.util.Set;          public class InteractionsTest extends BaseChromeTest {       @Test       public void getTitle() {         try {           driver.get("https://www.selenium.dev/");           // get title           String title = driver.getTitle();           Assertions.assertEquals(title, "Selenium");         } finally {           driver.quit();         }       }       @Test       public void getCurrentUrl() {         try {           driver.get("https://www.selenium.dev/");           // get current url           String url = driver.getCurrentUrl();           Assertions.assertEquals(url, "https://www.selenium.dev/");         } finally {           driver.quit();         }       }     }               url = driver.current_url

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/python/tests/interactions/test_interactions.py#L10)

##### examples/python/tests/interactions/test\_interactions.py

Copy  Close               from selenium import webdriver          driver = webdriver.Chrome()          driver.get("https://www.selenium.dev")          title = driver.title     assert title == "Selenium"          url = driver.current_url     assert url == "https://www.selenium.dev/"          driver.quit()                                String url = driver.Url;

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/dotnet/SeleniumDocs/Interactions/InteractionsTest.cs#L41)

##### examples/dotnet/SeleniumDocs/Interactions/InteractionsTest.cs

Copy  Close               // Licensed to the Software Freedom Conservancy (SFC) under one     // or more contributor license agreements.  See the NOTICE file     // distributed with this work for additional information     // regarding copyright ownership.  The SFC licenses this file     // to you under the Apache License, Version 2.0 (the     // "License"); you may not use this file except in compliance     // with the License.  You may obtain a copy of the License at     //     //   http://www.apache.org/licenses/LICENSE-2.0     //     // Unless required by applicable law or agreed to in writing,     // software distributed under the License is distributed on an     // "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY     // KIND, either express or implied.  See the License for the     // specific language governing permissions and limitations     // under the License.               using System;     using Microsoft.VisualStudio.TestTools.UnitTesting;     using OpenQA.Selenium;     using OpenQA.Selenium.Chrome;     namespace SeleniumDocumentation.SeleniumInteractions     {         [TestClass]         public class InteractionsTest         {             [TestMethod]             public void TestInteractions()             {                 WebDriver driver = new ChromeDriver();                 driver.Manage().Timeouts().ImplicitWait = TimeSpan.FromMilliseconds(500);                      // Navigate to Url                 driver.Url="https://www.selenium.dev/";                 //GetTitle                 String title = driver.Title;                 Assert.AreEqual(title, "Selenium");                      //GetCurrentURL                 String url = driver.Url;                 Assert.AreEqual(url, "https://www.selenium.dev/");                      //quitting driver                 driver.Quit(); //close all windows             }         }     }                 it 'gets the current url' do

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/ruby/spec/interactions/browser_spec.rb#L14)

##### examples/ruby/spec/interactions/browser\_spec.rb

Copy  Close               # frozen_string_literal: true          require 'spec_helper'          RSpec.describe 'Browser' do       let(:driver) { start_session }            it 'gets the current title' do         driver.navigate.to 'https://www.selenium.dev/'         current_title = driver.title         expect(current_title).to eq 'Selenium'       end            it 'gets the current url' do         driver.navigate.to 'https://www.selenium.dev/'         current_url = driver.current_url         expect(current_url).to eq 'https://www.selenium.dev/'       end     end                        let currentUrl = await driver.getCurrentUrl();

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/javascript/test/interactions/interactionsIndex.spec.js#L24)

##### examples/javascript/test/interactions/interactionsIndex.spec.js

Copy  Close               const {Builder } = require('selenium-webdriver');     const assert = require("node:assert");          describe('Interactions', function () {       let driver;            before(async function () {         driver = new Builder()           .forBrowser('chrome')           .build();       });            after(async () => await driver.quit());            it('Should be able to get title and current url', async function () {         const url = 'https://www.selenium.dev/';         await driver.get(url);              //Get Current title         let title = await driver.getTitle();         assert.equal(title, "Selenium");              //Get Current url         let currentUrl = await driver.getCurrentUrl();         assert.equal(currentUrl, url);       });     });               driver.currentUrl

# 1 - Browser navigation

## Navigate to

The first thing you will want to do after launching a browser is to open your website. This can be achieved in a single line:

  * Java   * Python   * CSharp   * Ruby   * JavaScript   * Kotlin

                      //Convenient             driver.get("https://selenium.dev");                              //Longer way             driver.navigate().to("https://selenium.dev");

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/java/src/test/java/dev/selenium/interactions/NavigationTest.java#L14-L18)

##### examples/java/src/test/java/dev/selenium/interactions/NavigationTest.java

Copy  Close               package dev.selenium.interactions;          import org.junit.jupiter.api.Test;     import org.openqa.selenium.WebDriver;     import org.openqa.selenium.chrome.ChromeDriver;     import static org.junit.jupiter.api.Assertions.assertEquals;          public class NavigationTest {         @Test         public void navigateBrowser() {                          WebDriver driver = new ChromeDriver();                        //Convenient             driver.get("https://selenium.dev");                              //Longer way             driver.navigate().to("https://selenium.dev");             String title = driver.getTitle();             assertEquals(title, "Selenium");                          //Back             driver.navigate().back();             title = driver.getTitle();             assertEquals(title, "Selenium");                          //Forward             driver.navigate().forward();             title = driver.getTitle();             assertEquals(title, "Selenium");                  //Refresh             driver.navigate().refresh();             title = driver.getTitle();             assertEquals(title, "Selenium");                  driver.quit();         }     }                    driver.get("https://www.selenium.dev/selenium/web/index.html")

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/python/tests/interactions/test_navigation.py#L6)

##### examples/python/tests/interactions/test\_navigation.py

Copy  Close               from selenium import webdriver          driver = webdriver.Chrome()          driver.get("https://www.selenium.dev")     driver.get("https://www.selenium.dev/selenium/web/index.html")          title = driver.title     assert title == "Index of Available Pages"          driver.back()     title = driver.title     assert title == "Selenium"          driver.forward()     title = driver.title     assert title == "Index of Available Pages"          driver.refresh()     title = driver.title     assert title == "Index of Available Pages"          driver.quit()                                //Convenient                 driver.Url = "https://selenium.dev";                 //Longer                 driver.Navigate().GoToUrl("https://selenium.dev");

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/dotnet/SeleniumDocs/Interactions/NavigationTest.cs#L17-L20)

##### examples/dotnet/SeleniumDocs/Interactions/NavigationTest.cs

Copy  Close               using System;     using Microsoft.VisualStudio.TestTools.UnitTesting;     using OpenQA.Selenium;     using OpenQA.Selenium.Chrome;          namespace SeleniumDocumentation.SeleniumInteractions     {         [TestClass]         public class NavigationTest         {             [TestMethod]             public void TestNavigationCommands()             {                 IWebDriver driver = new ChromeDriver();                 driver.Manage().Timeouts().ImplicitWait = TimeSpan.FromMilliseconds(500);                      //Convenient                 driver.Url = "https://selenium.dev";                 //Longer                 driver.Navigate().GoToUrl("https://selenium.dev");                 var title = driver.Title;                 Assert.AreEqual("Selenium", title);                      //Back                 driver.Navigate().Back();                 title = driver.Title;                 Assert.AreEqual("Selenium", title);                      //Forward                 driver.Navigate().Forward();                 title = driver.Title;                 Assert.AreEqual("Selenium", title);                      //Refresh                 driver.Navigate().Refresh();                 title = driver.Title;                 Assert.AreEqual("Selenium", title);                      //Quit the browser                 driver.Quit();             }         }     }                      it 'navigates to a page' do         driver.navigate.to 'https://www.selenium.dev/'

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/ruby/spec/interactions/navigation_spec.rb#L7-L9)

##### examples/ruby/spec/interactions/navigation\_spec.rb

Copy  Close               # frozen_string_literal: true          require 'spec_helper'          RSpec.describe 'Browser' do       let(:driver) { start_session }            it 'navigates to a page' do         driver.navigate.to 'https://www.selenium.dev/'         driver.get 'https://www.selenium.dev/'         expect(driver.current_url).to eq 'https://www.selenium.dev/'       end            it 'navigates back' do         driver.navigate.to 'https://www.selenium.dev/'         driver.navigate.to 'https://www.selenium.dev/selenium/web/inputs.html'         driver.navigate.back         expect(driver.current_url).to eq 'https://www.selenium.dev/'       end            it 'navigates forward' do         driver.navigate.to 'https://www.selenium.dev/'         driver.navigate.to 'https://www.selenium.dev/selenium/web/inputs.html'         driver.navigate.back         driver.navigate.forward         expect(driver.current_url).to eq 'https://www.selenium.dev/selenium/web/inputs.html'       end            it 'refreshes the page' do         driver.navigate.to 'https://www.selenium.dev/'         driver.navigate.refresh         expect(driver.current_url).to eq 'https://www.selenium.dev/'       end     end                        //Convenient           await driver.get('https://www.selenium.dev');                  //Longer way           await driver.navigate().to("https://www.selenium.dev/selenium/web/index.html");

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/javascript/test/interactions/navigation.spec.js#L16-L20)

##### examples/javascript/test/interactions/navigation.spec.js

Copy  Close               const {Builder } = require('selenium-webdriver');       const assert = require("node:assert");              describe('Interactions - Navigation', function () {         let driver;                before(async function () {           driver = new Builder()             .forBrowser('chrome')             .build();         });                after(async () => await driver.quit());                it('Browser navigation test', async function () {           //Convenient           await driver.get('https://www.selenium.dev');                  //Longer way           await driver.navigate().to("https://www.selenium.dev/selenium/web/index.html");           let title = await driver.getTitle();           assert.equal(title, "Index of Available Pages");                  //Back           await driver.navigate().back();           title = await driver.getTitle();           assert.equal(title, "Selenium");                  //Forward           await driver.navigate().forward();           title = await driver.getTitle();           assert.equal(title, "Index of Available Pages");                  //Refresh           await driver.navigate().refresh();           title = await driver.getTitle();           assert.equal(title, "Index of Available Pages");         });       });               //Convenient     driver.get("https://selenium.dev")          //Longer way     driver.navigate().to("https://selenium.dev")       

## Back

Pressing the browser’s back button:

  * Java   * Python   * CSharp   * Ruby   * JavaScript   * Kotlin

                      //Back             driver.navigate().back();

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/java/src/test/java/dev/selenium/interactions/NavigationTest.java#L22-L23)

##### examples/java/src/test/java/dev/selenium/interactions/NavigationTest.java

Copy  Close               package dev.selenium.interactions;          import org.junit.jupiter.api.Test;     import org.openqa.selenium.WebDriver;     import org.openqa.selenium.chrome.ChromeDriver;     import static org.junit.jupiter.api.Assertions.assertEquals;          public class NavigationTest {         @Test         public void navigateBrowser() {                          WebDriver driver = new ChromeDriver();                        //Convenient             driver.get("https://selenium.dev");                              //Longer way             driver.navigate().to("https://selenium.dev");             String title = driver.getTitle();             assertEquals(title, "Selenium");                          //Back             driver.navigate().back();             title = driver.getTitle();             assertEquals(title, "Selenium");                          //Forward             driver.navigate().forward();             title = driver.getTitle();             assertEquals(title, "Selenium");                  //Refresh             driver.navigate().refresh();             title = driver.getTitle();             assertEquals(title, "Selenium");                  driver.quit();         }     }                    driver.back()

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/python/tests/interactions/test_navigation.py#L11)

##### examples/python/tests/interactions/test\_navigation.py

Copy  Close               from selenium import webdriver          driver = webdriver.Chrome()          driver.get("https://www.selenium.dev")     driver.get("https://www.selenium.dev/selenium/web/index.html")          title = driver.title     assert title == "Index of Available Pages"          driver.back()     title = driver.title     assert title == "Selenium"          driver.forward()     title = driver.title     assert title == "Index of Available Pages"          driver.refresh()     title = driver.title     assert title == "Index of Available Pages"          driver.quit()                                //Back                  driver.Navigate().Back();

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/dotnet/SeleniumDocs/Interactions/NavigationTest.cs#L24-L25)

##### examples/dotnet/SeleniumDocs/Interactions/NavigationTest.cs

Copy  Close               using System;      using Microsoft.VisualStudio.TestTools.UnitTesting;      using OpenQA.Selenium;      using OpenQA.Selenium.Chrome;            namespace SeleniumDocumentation.SeleniumInteractions      {          [TestClass]          public class NavigationTest          {              [TestMethod]              public void TestNavigationCommands()              {                  IWebDriver driver = new ChromeDriver();                  driver.Manage().Timeouts().ImplicitWait = TimeSpan.FromMilliseconds(500);                        //Convenient                  driver.Url = "https://selenium.dev";                  //Longer                  driver.Navigate().GoToUrl("https://selenium.dev");                  var title = driver.Title;                  Assert.AreEqual("Selenium", title);                        //Back                  driver.Navigate().Back();                  title = driver.Title;                  Assert.AreEqual("Selenium", title);                        //Forward                  driver.Navigate().Forward();                  title = driver.Title;                  Assert.AreEqual("Selenium", title);                        //Refresh                  driver.Navigate().Refresh();                  title = driver.Title;                  Assert.AreEqual("Selenium", title);                        //Quit the browser                  driver.Quit();              }          }      }                         driver.navigate.to 'https://www.selenium.dev/'

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/ruby/spec/interactions/navigation_spec.rb#L15)

##### examples/ruby/spec/interactions/navigation\_spec.rb

Copy  Close               # frozen_string_literal: true          require 'spec_helper'          RSpec.describe 'Browser' do       let(:driver) { start_session }            it 'navigates to a page' do         driver.navigate.to 'https://www.selenium.dev/'         driver.get 'https://www.selenium.dev/'         expect(driver.current_url).to eq 'https://www.selenium.dev/'       end            it 'navigates back' do         driver.navigate.to 'https://www.selenium.dev/'         driver.navigate.to 'https://www.selenium.dev/selenium/web/inputs.html'         driver.navigate.back         expect(driver.current_url).to eq 'https://www.selenium.dev/'       end            it 'navigates forward' do         driver.navigate.to 'https://www.selenium.dev/'         driver.navigate.to 'https://www.selenium.dev/selenium/web/inputs.html'         driver.navigate.back         driver.navigate.forward         expect(driver.current_url).to eq 'https://www.selenium.dev/selenium/web/inputs.html'       end            it 'refreshes the page' do         driver.navigate.to 'https://www.selenium.dev/'         driver.navigate.refresh         expect(driver.current_url).to eq 'https://www.selenium.dev/'       end     end                        //Back           await driver.navigate().back();

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/javascript/test/interactions/navigation.spec.js#L24-L25)

##### examples/javascript/test/interactions/navigation.spec.js

Copy  Close               const {Builder } = require('selenium-webdriver');       const assert = require("node:assert");              describe('Interactions - Navigation', function () {         let driver;                before(async function () {           driver = new Builder()             .forBrowser('chrome')             .build();         });                after(async () => await driver.quit());                it('Browser navigation test', async function () {           //Convenient           await driver.get('https://www.selenium.dev');                  //Longer way           await driver.navigate().to("https://www.selenium.dev/selenium/web/index.html");           let title = await driver.getTitle();           assert.equal(title, "Index of Available Pages");                  //Back           await driver.navigate().back();           title = await driver.getTitle();           assert.equal(title, "Selenium");                  //Forward           await driver.navigate().forward();           title = await driver.getTitle();           assert.equal(title, "Index of Available Pages");                  //Refresh           await driver.navigate().refresh();           title = await driver.getTitle();           assert.equal(title, "Index of Available Pages");         });       });               driver.navigate().back() 

## Forward

Pressing the browser’s forward button:

  * Java   * Python   * CSharp   * Ruby   * JavaScript   * Kotlin

                      //Forward             driver.navigate().forward();

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/java/src/test/java/dev/selenium/interactions/NavigationTest.java#L27-L28)

##### examples/java/src/test/java/dev/selenium/interactions/NavigationTest.java

Copy  Close               package dev.selenium.interactions;          import org.junit.jupiter.api.Test;     import org.openqa.selenium.WebDriver;     import org.openqa.selenium.chrome.ChromeDriver;     import static org.junit.jupiter.api.Assertions.assertEquals;          public class NavigationTest {         @Test         public void navigateBrowser() {                          WebDriver driver = new ChromeDriver();                        //Convenient             driver.get("https://selenium.dev");                              //Longer way             driver.navigate().to("https://selenium.dev");             String title = driver.getTitle();             assertEquals(title, "Selenium");                          //Back             driver.navigate().back();             title = driver.getTitle();             assertEquals(title, "Selenium");                          //Forward             driver.navigate().forward();             title = driver.getTitle();             assertEquals(title, "Selenium");                  //Refresh             driver.navigate().refresh();             title = driver.getTitle();             assertEquals(title, "Selenium");                  driver.quit();         }     }                    driver.forward()

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/python/tests/interactions/test_navigation.py#L15)

##### examples/python/tests/interactions/test\_navigation.py

Copy  Close               from selenium import webdriver          driver = webdriver.Chrome()          driver.get("https://www.selenium.dev")     driver.get("https://www.selenium.dev/selenium/web/index.html")          title = driver.title     assert title == "Index of Available Pages"          driver.back()     title = driver.title     assert title == "Selenium"          driver.forward()     title = driver.title     assert title == "Index of Available Pages"          driver.refresh()     title = driver.title     assert title == "Index of Available Pages"          driver.quit()                                //Forward                  driver.Navigate().Forward();

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/dotnet/SeleniumDocs/Interactions/NavigationTest.cs#L29-L30)

##### examples/dotnet/SeleniumDocs/Interactions/NavigationTest.cs

Copy  Close               using System;      using Microsoft.VisualStudio.TestTools.UnitTesting;      using OpenQA.Selenium;      using OpenQA.Selenium.Chrome;            namespace SeleniumDocumentation.SeleniumInteractions      {          [TestClass]          public class NavigationTest          {              [TestMethod]              public void TestNavigationCommands()              {                  IWebDriver driver = new ChromeDriver();                  driver.Manage().Timeouts().ImplicitWait = TimeSpan.FromMilliseconds(500);                        //Convenient                  driver.Url = "https://selenium.dev";                  //Longer                  driver.Navigate().GoToUrl("https://selenium.dev");                  var title = driver.Title;                  Assert.AreEqual("Selenium", title);                        //Back                  driver.Navigate().Back();                  title = driver.Title;                  Assert.AreEqual("Selenium", title);                        //Forward                  driver.Navigate().Forward();                  title = driver.Title;                  Assert.AreEqual("Selenium", title);                        //Refresh                  driver.Navigate().Refresh();                  title = driver.Title;                  Assert.AreEqual("Selenium", title);                        //Quit the browser                  driver.Quit();              }          }      }                         driver.navigate.to 'https://www.selenium.dev/selenium/web/inputs.html'

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/ruby/spec/interactions/navigation_spec.rb#L23)

##### examples/ruby/spec/interactions/navigation\_spec.rb

Copy  Close               # frozen_string_literal: true          require 'spec_helper'          RSpec.describe 'Browser' do       let(:driver) { start_session }            it 'navigates to a page' do         driver.navigate.to 'https://www.selenium.dev/'         driver.get 'https://www.selenium.dev/'         expect(driver.current_url).to eq 'https://www.selenium.dev/'       end            it 'navigates back' do         driver.navigate.to 'https://www.selenium.dev/'         driver.navigate.to 'https://www.selenium.dev/selenium/web/inputs.html'         driver.navigate.back         expect(driver.current_url).to eq 'https://www.selenium.dev/'       end            it 'navigates forward' do         driver.navigate.to 'https://www.selenium.dev/'         driver.navigate.to 'https://www.selenium.dev/selenium/web/inputs.html'         driver.navigate.back         driver.navigate.forward         expect(driver.current_url).to eq 'https://www.selenium.dev/selenium/web/inputs.html'       end            it 'refreshes the page' do         driver.navigate.to 'https://www.selenium.dev/'         driver.navigate.refresh         expect(driver.current_url).to eq 'https://www.selenium.dev/'       end     end                        //Forward         await driver.navigate().forward();

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/javascript/test/interactions/navigation.spec.js#L29-L30)

##### examples/javascript/test/interactions/navigation.spec.js

Copy  Close               const {Builder } = require('selenium-webdriver');     const assert = require("node:assert");          describe('Interactions - Navigation', function () {       let driver;            before(async function () {         driver = new Builder()           .forBrowser('chrome')           .build();       });            after(async () => await driver.quit());            it('Browser navigation test', async function () {         //Convenient         await driver.get('https://www.selenium.dev');              //Longer way         await driver.navigate().to("https://www.selenium.dev/selenium/web/index.html");         let title = await driver.getTitle();         assert.equal(title, "Index of Available Pages");              //Back         await driver.navigate().back();         title = await driver.getTitle();         assert.equal(title, "Selenium");              //Forward         await driver.navigate().forward();         title = await driver.getTitle();         assert.equal(title, "Index of Available Pages");              //Refresh         await driver.navigate().refresh();         title = await driver.getTitle();         assert.equal(title, "Index of Available Pages");       });     });               driver.navigate().forward()

## Refresh

Refresh the current page:

  * Java   * Python   * CSharp   * Ruby   * JavaScript   * Kotlin

                      //Refresh             driver.navigate().refresh();

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/java/src/test/java/dev/selenium/interactions/NavigationTest.java#L32-L33)

##### examples/java/src/test/java/dev/selenium/interactions/NavigationTest.java

Copy  Close               package dev.selenium.interactions;          import org.junit.jupiter.api.Test;     import org.openqa.selenium.WebDriver;     import org.openqa.selenium.chrome.ChromeDriver;     import static org.junit.jupiter.api.Assertions.assertEquals;          public class NavigationTest {         @Test         public void navigateBrowser() {                          WebDriver driver = new ChromeDriver();                        //Convenient             driver.get("https://selenium.dev");                              //Longer way             driver.navigate().to("https://selenium.dev");             String title = driver.getTitle();             assertEquals(title, "Selenium");                          //Back             driver.navigate().back();             title = driver.getTitle();             assertEquals(title, "Selenium");                          //Forward             driver.navigate().forward();             title = driver.getTitle();             assertEquals(title, "Selenium");                  //Refresh             driver.navigate().refresh();             title = driver.getTitle();             assertEquals(title, "Selenium");                  driver.quit();         }     }                    driver.refresh()

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/python/tests/interactions/test_navigation.py#L19)

##### examples/python/tests/interactions/test\_navigation.py

Copy  Close               from selenium import webdriver          driver = webdriver.Chrome()          driver.get("https://www.selenium.dev")     driver.get("https://www.selenium.dev/selenium/web/index.html")          title = driver.title     assert title == "Index of Available Pages"          driver.back()     title = driver.title     assert title == "Selenium"          driver.forward()     title = driver.title     assert title == "Index of Available Pages"          driver.refresh()     title = driver.title     assert title == "Index of Available Pages"          driver.quit()                                //Refresh                  driver.Navigate().Refresh();

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/dotnet/SeleniumDocs/Interactions/NavigationTest.cs#L34-L35)

##### examples/dotnet/SeleniumDocs/Interactions/NavigationTest.cs

Copy  Close               using System;      using Microsoft.VisualStudio.TestTools.UnitTesting;      using OpenQA.Selenium;      using OpenQA.Selenium.Chrome;            namespace SeleniumDocumentation.SeleniumInteractions      {          [TestClass]          public class NavigationTest          {              [TestMethod]              public void TestNavigationCommands()              {                  IWebDriver driver = new ChromeDriver();                  driver.Manage().Timeouts().ImplicitWait = TimeSpan.FromMilliseconds(500);                        //Convenient                  driver.Url = "https://selenium.dev";                  //Longer                  driver.Navigate().GoToUrl("https://selenium.dev");                  var title = driver.Title;                  Assert.AreEqual("Selenium", title);                        //Back                  driver.Navigate().Back();                  title = driver.Title;                  Assert.AreEqual("Selenium", title);                        //Forward                  driver.Navigate().Forward();                  title = driver.Title;                  Assert.AreEqual("Selenium", title);                        //Refresh                  driver.Navigate().Refresh();                  title = driver.Title;                  Assert.AreEqual("Selenium", title);                        //Quit the browser                  driver.Quit();              }          }      }                       it 'refreshes the page' do

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/ruby/spec/interactions/navigation_spec.rb#L29)

##### examples/ruby/spec/interactions/navigation\_spec.rb

Copy  Close               # frozen_string_literal: true          require 'spec_helper'          RSpec.describe 'Browser' do       let(:driver) { start_session }            it 'navigates to a page' do         driver.navigate.to 'https://www.selenium.dev/'         driver.get 'https://www.selenium.dev/'         expect(driver.current_url).to eq 'https://www.selenium.dev/'       end            it 'navigates back' do         driver.navigate.to 'https://www.selenium.dev/'         driver.navigate.to 'https://www.selenium.dev/selenium/web/inputs.html'         driver.navigate.back         expect(driver.current_url).to eq 'https://www.selenium.dev/'       end            it 'navigates forward' do         driver.navigate.to 'https://www.selenium.dev/'         driver.navigate.to 'https://www.selenium.dev/selenium/web/inputs.html'         driver.navigate.back         driver.navigate.forward         expect(driver.current_url).to eq 'https://www.selenium.dev/selenium/web/inputs.html'       end            it 'refreshes the page' do         driver.navigate.to 'https://www.selenium.dev/'         driver.navigate.refresh         expect(driver.current_url).to eq 'https://www.selenium.dev/'       end     end                        //Refresh         await driver.navigate().refresh();

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/javascript/test/interactions/navigation.spec.js#L34-L35)

##### examples/javascript/test/interactions/navigation.spec.js

Copy  Close               const {Builder } = require('selenium-webdriver');     const assert = require("node:assert");          describe('Interactions - Navigation', function () {       let driver;            before(async function () {         driver = new Builder()           .forBrowser('chrome')           .build();       });            after(async () => await driver.quit());            it('Browser navigation test', async function () {         //Convenient         await driver.get('https://www.selenium.dev');              //Longer way         await driver.navigate().to("https://www.selenium.dev/selenium/web/index.html");         let title = await driver.getTitle();         assert.equal(title, "Index of Available Pages");              //Back         await driver.navigate().back();         title = await driver.getTitle();         assert.equal(title, "Selenium");              //Forward         await driver.navigate().forward();         title = await driver.getTitle();         assert.equal(title, "Index of Available Pages");              //Refresh         await driver.navigate().refresh();         title = await driver.getTitle();         assert.equal(title, "Index of Available Pages");       });     });               driver.navigate().refresh()

# 2 - JavaScript alerts, prompts and confirmations

WebDriver provides an API for working with the three types of native popup messages offered by JavaScript. These popups are styled by the browser and offer limited customisation.

## Alerts

The simplest of these is referred to as an alert, which shows a custom message, and a single button which dismisses the alert, labelled in most browsers as OK. It can also be dismissed in most browsers by pressing the close button, but this will always do the same thing as the OK button. See an example alert.

WebDriver can get the text from the popup and accept or dismiss these alerts.

  * Java   * Python   * CSharp   * Ruby   * JavaScript   * Kotlin

                      wait.until(ExpectedConditions.alertIsPresent());                  Alert alert = driver.switchTo().alert();             assertEquals("Sample Alert", alert.getText());             alert.accept();

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/java/src/test/java/dev/selenium/interactions/AlertsTest.java#L45-L49)

##### examples/java/src/test/java/dev/selenium/interactions/AlertsTest.java

Copy  Close               // Licensed to the Software Freedom Conservancy (SFC) under one     // or more contributor license agreements.  See the NOTICE file     // distributed with this work for additional information     // regarding copyright ownership.  The SFC licenses this file     // to you under the Apache License, Version 2.0 (the     // "License"); you may not use this file except in compliance     // with the License.  You may obtain a copy of the License at     //     //   http://www.apache.org/licenses/LICENSE-2.0     //     // Unless required by applicable law or agreed to in writing,     // software distributed under the License is distributed on an     // "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY     // KIND, either express or implied.  See the License for the     // specific language governing permissions and limitations     // under the License.          import dev.selenium.BaseTest;     import org.junit.jupiter.api.Test;     import org.openqa.selenium.*;     import org.openqa.selenium.chrome.ChromeDriver;     import org.openqa.selenium.chrome.ChromeOptions;     import org.openqa.selenium.support.ui.ExpectedConditions;     import org.openqa.selenium.support.ui.WebDriverWait;          import java.time.Duration;          import static org.junit.jupiter.api.Assertions.assertEquals;          public class AlertsTest extends BaseTest {              @Test         public void testForAlerts() {                  ChromeOptions chromeOptions = getDefaultChromeOptions();             chromeOptions.addArguments("disable-search-engine-choice-screen");             WebDriver driver = new ChromeDriver(chromeOptions);                  driver.manage().timeouts().implicitlyWait(Duration.ofMillis(500));             driver.get("https://www.selenium.dev/documentation/webdriver/interactions/alerts/");                  JavascriptExecutor js = (JavascriptExecutor) driver;             js.executeScript("alert('Sample Alert');");             WebDriverWait wait = new WebDriverWait(driver, Duration.ofSeconds(30));             wait.until(ExpectedConditions.alertIsPresent());                  Alert alert = driver.switchTo().alert();             assertEquals("Sample Alert", alert.getText());             alert.accept();                  js.executeScript("confirm('Are you sure?');");             wait = new WebDriverWait(driver, Duration.ofSeconds(30));             wait.until(ExpectedConditions.alertIsPresent());                  alert = driver.switchTo().alert();             assertEquals("Are you sure?", alert.getText());             alert.dismiss();                  js.executeScript("prompt('What is your name?');");             wait = new WebDriverWait(driver, Duration.ofSeconds(30));             wait.until(ExpectedConditions.alertIsPresent());             alert = driver.switchTo().alert();             assertEquals("What is your name?", alert.getText());             alert.sendKeys("Selenium");             alert.accept();             driver.quit();         }     }                        element = driver.find_element(By.LINK_TEXT, "See an example alert")         element.click()              wait = WebDriverWait(driver, timeout=2)         alert = wait.until(lambda d : d.switch_to.alert)         text = alert.text         alert.accept()

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/python/tests/interactions/test_alerts.py#L12-L18)

##### examples/python/tests/interactions/test\_alerts.py

Copy  Close               from selenium import webdriver     from selenium.webdriver.common.by import By     from selenium.webdriver.support.ui import WebDriverWait          global url     url = "https://www.selenium.dev/documentation/webdriver/interactions/alerts/"               def test_alert_popup():         driver = webdriver.Chrome()         driver.get(url)         element = driver.find_element(By.LINK_TEXT, "See an example alert")         element.click()              wait = WebDriverWait(driver, timeout=2)         alert = wait.until(lambda d : d.switch_to.alert)         text = alert.text         alert.accept()         assert text == "Sample alert"              driver.quit()          def test_confirm_popup():         driver = webdriver.Chrome()         driver.get(url)         element = driver.find_element(By.LINK_TEXT, "See a sample confirm")         driver.execute_script("arguments[0].click();", element)              wait = WebDriverWait(driver, timeout=2)         alert = wait.until(lambda d : d.switch_to.alert)         text = alert.text         alert.dismiss()         assert text == "Are you sure?"              driver.quit()          def test_prompt_popup():         driver = webdriver.Chrome()         driver.get(url)         element = driver.find_element(By.LINK_TEXT, "See a sample prompt")         driver.execute_script("arguments[0].click();", element)              wait = WebDriverWait(driver, timeout=2)         alert = wait.until(lambda d : d.switch_to.alert)         alert.send_keys("Selenium")         text = alert.text         alert.accept()         assert text == "What is your tool of choice?"                  driver.quit()               //Click the link to activate the alert     driver.FindElement(By.LinkText("See an example alert")).Click();          //Wait for the alert to be displayed and store it in a variable     IAlert alert = wait.Until(ExpectedConditions.AlertIsPresent());          //Store the alert text in a variable     string text = alert.Text;          //Press the OK button     alert.Accept();                          # Store the alert reference in a variable         alert = driver.switch_to.alert              # Get the text of the alert         alert.text              # Press on Cancel button         alert.dismiss

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/ruby/spec/interactions/alerts_spec.rb#L15-L22)

##### examples/ruby/spec/interactions/alerts\_spec.rb

Copy  Close               # frozen_string_literal: true          require 'spec_helper'          RSpec.describe 'Alerts' do       let(:driver) { start_session }            before do         driver.navigate.to 'https://selenium.dev'       end            it 'interacts with an alert' do         driver.execute_script 'alert("Hello, World!")'              # Store the alert reference in a variable         alert = driver.switch_to.alert              # Get the text of the alert         alert.text              # Press on Cancel button         alert.dismiss       end            it 'interacts with a confirm' do         driver.execute_script 'confirm("Are you sure?")'              # Store the alert reference in a variable         alert = driver.switch_to.alert              # Get the text of the alert         alert.text              # Press on Cancel button         alert.dismiss       end            it 'interacts with a prompt' do         driver.execute_script 'prompt("What is your name?")'              # Store the alert reference in a variable         alert = driver.switch_to.alert              # Type a message         alert.send_keys('selenium')              # Press on Ok button         alert.accept       end     end                            let alert = await driver.switchTo().alert();             let alertText = await alert.getText();             await alert.accept();

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/javascript/test/interactions/alert.spec.js#L19-L21)

##### examples/javascript/test/interactions/alert.spec.js

Copy  Close               const { By, Builder, until } = require('selenium-webdriver');     const assert = require("node:assert");               describe('Interactions - Alerts', function () {         let driver;              before(async function () {             driver = await new Builder().forBrowser('chrome').build();         });              after(async () => await driver.quit());              it('Should be able to getText from alert and accept', async function () {             await driver.get('https://www.selenium.dev/selenium/web/alerts.html');             await driver.findElement(By.id("alert")).click();             await driver.wait(until.alertIsPresent());             let alert = await driver.switchTo().alert();             let alertText = await alert.getText();             await alert.accept();             // Verify             assert.equal(alertText, "cheese");         });              it('Should be able to getText from alert and dismiss', async function () {             await driver.get('https://www.selenium.dev/selenium/web/alerts.html');             await driver.findElement(By.id("confirm")).click();             await driver.wait(until.alertIsPresent());             let alert = await driver.switchTo().alert();             let alertText = await alert.getText();             await alert.dismiss();             // Verify             assert.equal(alertText, "Are you sure?");         });              it('Should be able to enter text in alert prompt', async function () {             let text = 'Selenium';             await driver.get('https://www.selenium.dev/selenium/web/alerts.html');             await driver.findElement(By.id("prompt")).click();             await driver.wait(until.alertIsPresent());             let alert = await driver.switchTo().alert();             //Type your message             await alert.sendKeys(text);             await alert.accept();                  let enteredText = await driver.findElement(By.id('text'));             assert.equal(await enteredText.getText(), text);         });     });               //Click the link to activate the alert     driver.findElement(By.linkText("See an example alert")).click()          //Wait for the alert to be displayed and store it in a variable     val alert = wait.until(ExpectedConditions.alertIsPresent())          //Store the alert text in a variable     val text = alert.getText()          //Press the OK button     alert.accept()       

## Confirm

A confirm box is similar to an alert, except the user can also choose to cancel the message. See a sample confirm.

This example also shows a different approach to storing an alert:

  * Java   * Python   * CSharp   * Ruby   * JavaScript   * Kotlin

                      alert = driver.switchTo().alert();             assertEquals("Are you sure?", alert.getText());             alert.dismiss();

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/java/src/test/java/dev/selenium/interactions/AlertsTest.java#L55-L57)

##### examples/java/src/test/java/dev/selenium/interactions/AlertsTest.java

Copy  Close               // Licensed to the Software Freedom Conservancy (SFC) under one     // or more contributor license agreements.  See the NOTICE file     // distributed with this work for additional information     // regarding copyright ownership.  The SFC licenses this file     // to you under the Apache License, Version 2.0 (the     // "License"); you may not use this file except in compliance     // with the License.  You may obtain a copy of the License at     //     //   http://www.apache.org/licenses/LICENSE-2.0     //     // Unless required by applicable law or agreed to in writing,     // software distributed under the License is distributed on an     // "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY     // KIND, either express or implied.  See the License for the     // specific language governing permissions and limitations     // under the License.          import dev.selenium.BaseTest;     import org.junit.jupiter.api.Test;     import org.openqa.selenium.*;     import org.openqa.selenium.chrome.ChromeDriver;     import org.openqa.selenium.chrome.ChromeOptions;     import org.openqa.selenium.support.ui.ExpectedConditions;     import org.openqa.selenium.support.ui.WebDriverWait;          import java.time.Duration;          import static org.junit.jupiter.api.Assertions.assertEquals;          public class AlertsTest extends BaseTest {              @Test         public void testForAlerts() {                  ChromeOptions chromeOptions = getDefaultChromeOptions();             chromeOptions.addArguments("disable-search-engine-choice-screen");             WebDriver driver = new ChromeDriver(chromeOptions);                  driver.manage().timeouts().implicitlyWait(Duration.ofMillis(500));             driver.get("https://www.selenium.dev/documentation/webdriver/interactions/alerts/");                  JavascriptExecutor js = (JavascriptExecutor) driver;             js.executeScript("alert('Sample Alert');");             WebDriverWait wait = new WebDriverWait(driver, Duration.ofSeconds(30));             wait.until(ExpectedConditions.alertIsPresent());                  Alert alert = driver.switchTo().alert();             assertEquals("Sample Alert", alert.getText());             alert.accept();                  js.executeScript("confirm('Are you sure?');");             wait = new WebDriverWait(driver, Duration.ofSeconds(30));             wait.until(ExpectedConditions.alertIsPresent());                  alert = driver.switchTo().alert();             assertEquals("Are you sure?", alert.getText());             alert.dismiss();                  js.executeScript("prompt('What is your name?');");             wait = new WebDriverWait(driver, Duration.ofSeconds(30));             wait.until(ExpectedConditions.alertIsPresent());             alert = driver.switchTo().alert();             assertEquals("What is your name?", alert.getText());             alert.sendKeys("Selenium");             alert.accept();             driver.quit();         }     }                        element = driver.find_element(By.LINK_TEXT, "See a sample confirm")         driver.execute_script("arguments[0].click();", element)              wait = WebDriverWait(driver, timeout=2)         alert = wait.until(lambda d : d.switch_to.alert)         text = alert.text         alert.dismiss()

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/python/tests/interactions/test_alerts.py#L26-L32)

##### examples/python/tests/interactions/test\_alerts.py

Copy  Close               from selenium import webdriver     from selenium.webdriver.common.by import By     from selenium.webdriver.support.ui import WebDriverWait          global url     url = "https://www.selenium.dev/documentation/webdriver/interactions/alerts/"               def test_alert_popup():         driver = webdriver.Chrome()         driver.get(url)         element = driver.find_element(By.LINK_TEXT, "See an example alert")         element.click()              wait = WebDriverWait(driver, timeout=2)         alert = wait.until(lambda d : d.switch_to.alert)         text = alert.text         alert.accept()         assert text == "Sample alert"              driver.quit()          def test_confirm_popup():         driver = webdriver.Chrome()         driver.get(url)         element = driver.find_element(By.LINK_TEXT, "See a sample confirm")         driver.execute_script("arguments[0].click();", element)              wait = WebDriverWait(driver, timeout=2)         alert = wait.until(lambda d : d.switch_to.alert)         text = alert.text         alert.dismiss()         assert text == "Are you sure?"              driver.quit()          def test_prompt_popup():         driver = webdriver.Chrome()         driver.get(url)         element = driver.find_element(By.LINK_TEXT, "See a sample prompt")         driver.execute_script("arguments[0].click();", element)              wait = WebDriverWait(driver, timeout=2)         alert = wait.until(lambda d : d.switch_to.alert)         alert.send_keys("Selenium")         text = alert.text         alert.accept()         assert text == "What is your tool of choice?"                  driver.quit()               //Click the link to activate the alert     driver.FindElement(By.LinkText("See a sample confirm")).Click();          //Wait for the alert to be displayed     wait.Until(ExpectedConditions.AlertIsPresent());          //Store the alert in a variable     IAlert alert = driver.SwitchTo().Alert();          //Store the alert in a variable for reuse     string text = alert.Text;          //Press the Cancel button     alert.Dismiss();                          # Store the alert reference in a variable         alert = driver.switch_to.alert              # Get the text of the alert         alert.text              # Press on Cancel button         alert.dismiss

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/ruby/spec/interactions/alerts_spec.rb#L28-L35)

##### examples/ruby/spec/interactions/alerts\_spec.rb

Copy  Close               # frozen_string_literal: true          require 'spec_helper'          RSpec.describe 'Alerts' do       let(:driver) { start_session }            before do         driver.navigate.to 'https://selenium.dev'       end            it 'interacts with an alert' do         driver.execute_script 'alert("Hello, World!")'              # Store the alert reference in a variable         alert = driver.switch_to.alert              # Get the text of the alert         alert.text              # Press on Cancel button         alert.dismiss       end            it 'interacts with a confirm' do         driver.execute_script 'confirm("Are you sure?")'              # Store the alert reference in a variable         alert = driver.switch_to.alert              # Get the text of the alert         alert.text              # Press on Cancel button         alert.dismiss       end            it 'interacts with a prompt' do         driver.execute_script 'prompt("What is your name?")'              # Store the alert reference in a variable         alert = driver.switch_to.alert              # Type a message         alert.send_keys('selenium')              # Press on Ok button         alert.accept       end     end                            let alert = await driver.switchTo().alert();             let alertText = await alert.getText();             await alert.dismiss();

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/javascript/test/interactions/alert.spec.js#L30-L32)

##### examples/javascript/test/interactions/alert.spec.js

Copy  Close               const { By, Builder, until } = require('selenium-webdriver');     const assert = require("node:assert");               describe('Interactions - Alerts', function () {         let driver;              before(async function () {             driver = await new Builder().forBrowser('chrome').build();         });              after(async () => await driver.quit());              it('Should be able to getText from alert and accept', async function () {             await driver.get('https://www.selenium.dev/selenium/web/alerts.html');             await driver.findElement(By.id("alert")).click();             await driver.wait(until.alertIsPresent());             let alert = await driver.switchTo().alert();             let alertText = await alert.getText();             await alert.accept();             // Verify             assert.equal(alertText, "cheese");         });              it('Should be able to getText from alert and dismiss', async function () {             await driver.get('https://www.selenium.dev/selenium/web/alerts.html');             await driver.findElement(By.id("confirm")).click();             await driver.wait(until.alertIsPresent());             let alert = await driver.switchTo().alert();             let alertText = await alert.getText();             await alert.dismiss();             // Verify             assert.equal(alertText, "Are you sure?");         });              it('Should be able to enter text in alert prompt', async function () {             let text = 'Selenium';             await driver.get('https://www.selenium.dev/selenium/web/alerts.html');             await driver.findElement(By.id("prompt")).click();             await driver.wait(until.alertIsPresent());             let alert = await driver.switchTo().alert();             //Type your message             await alert.sendKeys(text);             await alert.accept();                  let enteredText = await driver.findElement(By.id('text'));             assert.equal(await enteredText.getText(), text);         });     });               //Click the link to activate the alert     driver.findElement(By.linkText("See a sample confirm")).click()          //Wait for the alert to be displayed     wait.until(ExpectedConditions.alertIsPresent())          //Store the alert in a variable     val alert = driver.switchTo().alert()          //Store the alert in a variable for reuse     val text = alert.text          //Press the Cancel button     alert.dismiss()       

## Prompt

Prompts are similar to confirm boxes, except they also include a text input. Similar to working with form elements, you can use WebDriver’s send keys to fill in a response. This will completely replace the placeholder text. Pressing the cancel button will not submit any text. See a sample prompt.

  * Java   * Python   * CSharp   * Ruby   * JavaScript   * Kotlin

                      alert = driver.switchTo().alert();             assertEquals("What is your name?", alert.getText());             alert.sendKeys("Selenium");             alert.accept();

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/java/src/test/java/dev/selenium/interactions/AlertsTest.java#L62-L65)

##### examples/java/src/test/java/dev/selenium/interactions/AlertsTest.java

Copy  Close               // Licensed to the Software Freedom Conservancy (SFC) under one     // or more contributor license agreements.  See the NOTICE file     // distributed with this work for additional information     // regarding copyright ownership.  The SFC licenses this file     // to you under the Apache License, Version 2.0 (the     // "License"); you may not use this file except in compliance     // with the License.  You may obtain a copy of the License at     //     //   http://www.apache.org/licenses/LICENSE-2.0     //     // Unless required by applicable law or agreed to in writing,     // software distributed under the License is distributed on an     // "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY     // KIND, either express or implied.  See the License for the     // specific language governing permissions and limitations     // under the License.          import dev.selenium.BaseTest;     import org.junit.jupiter.api.Test;     import org.openqa.selenium.*;     import org.openqa.selenium.chrome.ChromeDriver;     import org.openqa.selenium.chrome.ChromeOptions;     import org.openqa.selenium.support.ui.ExpectedConditions;     import org.openqa.selenium.support.ui.WebDriverWait;          import java.time.Duration;          import static org.junit.jupiter.api.Assertions.assertEquals;          public class AlertsTest extends BaseTest {              @Test         public void testForAlerts() {                  ChromeOptions chromeOptions = getDefaultChromeOptions();             chromeOptions.addArguments("disable-search-engine-choice-screen");             WebDriver driver = new ChromeDriver(chromeOptions);                  driver.manage().timeouts().implicitlyWait(Duration.ofMillis(500));             driver.get("https://www.selenium.dev/documentation/webdriver/interactions/alerts/");                  JavascriptExecutor js = (JavascriptExecutor) driver;             js.executeScript("alert('Sample Alert');");             WebDriverWait wait = new WebDriverWait(driver, Duration.ofSeconds(30));             wait.until(ExpectedConditions.alertIsPresent());                  Alert alert = driver.switchTo().alert();             assertEquals("Sample Alert", alert.getText());             alert.accept();                  js.executeScript("confirm('Are you sure?');");             wait = new WebDriverWait(driver, Duration.ofSeconds(30));             wait.until(ExpectedConditions.alertIsPresent());                  alert = driver.switchTo().alert();             assertEquals("Are you sure?", alert.getText());             alert.dismiss();                  js.executeScript("prompt('What is your name?');");             wait = new WebDriverWait(driver, Duration.ofSeconds(30));             wait.until(ExpectedConditions.alertIsPresent());             alert = driver.switchTo().alert();             assertEquals("What is your name?", alert.getText());             alert.sendKeys("Selenium");             alert.accept();             driver.quit();         }     }                        element = driver.find_element(By.LINK_TEXT, "See a sample prompt")         driver.execute_script("arguments[0].click();", element)              wait = WebDriverWait(driver, timeout=2)         alert = wait.until(lambda d : d.switch_to.alert)         alert.send_keys("Selenium")         text = alert.text         alert.accept()

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/python/tests/interactions/test_alerts.py#L40-L47)

##### examples/python/tests/interactions/test\_alerts.py

Copy  Close               from selenium import webdriver     from selenium.webdriver.common.by import By     from selenium.webdriver.support.ui import WebDriverWait          global url     url = "https://www.selenium.dev/documentation/webdriver/interactions/alerts/"               def test_alert_popup():         driver = webdriver.Chrome()         driver.get(url)         element = driver.find_element(By.LINK_TEXT, "See an example alert")         element.click()              wait = WebDriverWait(driver, timeout=2)         alert = wait.until(lambda d : d.switch_to.alert)         text = alert.text         alert.accept()         assert text == "Sample alert"              driver.quit()          def test_confirm_popup():         driver = webdriver.Chrome()         driver.get(url)         element = driver.find_element(By.LINK_TEXT, "See a sample confirm")         driver.execute_script("arguments[0].click();", element)              wait = WebDriverWait(driver, timeout=2)         alert = wait.until(lambda d : d.switch_to.alert)         text = alert.text         alert.dismiss()         assert text == "Are you sure?"              driver.quit()          def test_prompt_popup():         driver = webdriver.Chrome()         driver.get(url)         element = driver.find_element(By.LINK_TEXT, "See a sample prompt")         driver.execute_script("arguments[0].click();", element)              wait = WebDriverWait(driver, timeout=2)         alert = wait.until(lambda d : d.switch_to.alert)         alert.send_keys("Selenium")         text = alert.text         alert.accept()         assert text == "What is your tool of choice?"                  driver.quit()               //Click the link to activate the alert     driver.FindElement(By.LinkText("See a sample prompt")).Click();          //Wait for the alert to be displayed and store it in a variable     IAlert alert = wait.Until(ExpectedConditions.AlertIsPresent());          //Type your message     alert.SendKeys("Selenium");          //Press the OK button     alert.Accept();                          # Store the alert reference in a variable         alert = driver.switch_to.alert              # Type a message         alert.send_keys('selenium')              # Press on Ok button         alert.accept

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/ruby/spec/interactions/alerts_spec.rb#L41-L48)

##### examples/ruby/spec/interactions/alerts\_spec.rb

Copy  Close               # frozen_string_literal: true          require 'spec_helper'          RSpec.describe 'Alerts' do       let(:driver) { start_session }            before do         driver.navigate.to 'https://selenium.dev'       end            it 'interacts with an alert' do         driver.execute_script 'alert("Hello, World!")'              # Store the alert reference in a variable         alert = driver.switch_to.alert              # Get the text of the alert         alert.text              # Press on Cancel button         alert.dismiss       end            it 'interacts with a confirm' do         driver.execute_script 'confirm("Are you sure?")'              # Store the alert reference in a variable         alert = driver.switch_to.alert              # Get the text of the alert         alert.text              # Press on Cancel button         alert.dismiss       end            it 'interacts with a prompt' do         driver.execute_script 'prompt("What is your name?")'              # Store the alert reference in a variable         alert = driver.switch_to.alert              # Type a message         alert.send_keys('selenium')              # Press on Ok button         alert.accept       end     end                            let alert = await driver.switchTo().alert();             //Type your message             await alert.sendKeys(text);             await alert.accept();

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/javascript/test/interactions/alert.spec.js#L42-L45)

##### examples/javascript/test/interactions/alert.spec.js

Copy  Close               const { By, Builder, until } = require('selenium-webdriver');     const assert = require("node:assert");               describe('Interactions - Alerts', function () {         let driver;              before(async function () {             driver = await new Builder().forBrowser('chrome').build();         });              after(async () => await driver.quit());              it('Should be able to getText from alert and accept', async function () {             await driver.get('https://www.selenium.dev/selenium/web/alerts.html');             await driver.findElement(By.id("alert")).click();             await driver.wait(until.alertIsPresent());             let alert = await driver.switchTo().alert();             let alertText = await alert.getText();             await alert.accept();             // Verify             assert.equal(alertText, "cheese");         });              it('Should be able to getText from alert and dismiss', async function () {             await driver.get('https://www.selenium.dev/selenium/web/alerts.html');             await driver.findElement(By.id("confirm")).click();             await driver.wait(until.alertIsPresent());             let alert = await driver.switchTo().alert();             let alertText = await alert.getText();             await alert.dismiss();             // Verify             assert.equal(alertText, "Are you sure?");         });              it('Should be able to enter text in alert prompt', async function () {             let text = 'Selenium';             await driver.get('https://www.selenium.dev/selenium/web/alerts.html');             await driver.findElement(By.id("prompt")).click();             await driver.wait(until.alertIsPresent());             let alert = await driver.switchTo().alert();             //Type your message             await alert.sendKeys(text);             await alert.accept();                  let enteredText = await driver.findElement(By.id('text'));             assert.equal(await enteredText.getText(), text);         });     });               //Click the link to activate the alert     driver.findElement(By.linkText("See a sample prompt")).click()          //Wait for the alert to be displayed and store it in a variable     val alert = wait.until(ExpectedConditions.alertIsPresent())          //Type your message     alert.sendKeys("Selenium")          //Press the OK button     alert.accept()       

# 3 - Working with cookies

A cookie is a small piece of data that is sent from a website and stored in your computer. Cookies are mostly used to recognise the user and load the stored information.

WebDriver API provides a way to interact with cookies with built-in methods:

## Add Cookie

It is used to add a cookie to the current browsing context. Add Cookie only accepts a set of defined serializable JSON object. [Here ](https://www.w3.org/TR/webdriver1/#cookies)is the link to the list of accepted JSON key values

First of all, you need to be on the domain that the cookie will be valid for. If you are trying to preset cookies before you start interacting with a site and your homepage is large / takes a while to load an alternative is to find a smaller page on the site \(typically the 404 page is small, e.g. <http://example.com/some404page>\)

[Move Code](https://www.selenium.dev/documentation/about/contributing/#moving-examples)

  * Java   * Python   * CSharp   * Ruby   * JavaScript   * Kotlin

              	      driver.get("https://www.selenium.dev/selenium/web/blank.html");     	      // Add cookie into current browser context     	      driver.manage().addCookie(new Cookie("key", "value"));

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/java/src/test/java/dev/selenium/interactions/CookiesTest.java#L30-L32)

##### examples/java/src/test/java/dev/selenium/interactions/CookiesTest.java

Copy  Close               // Licensed to the Software Freedom Conservancy (SFC) under one     // or more contributor license agreements.  See the NOTICE file     // distributed with this work for additional information     // regarding copyright ownership.  The SFC licenses this file     // to you under the Apache License, Version 2.0 (the     // "License"); you may not use this file except in compliance     // with the License.  You may obtain a copy of the License at     //     //   http://www.apache.org/licenses/LICENSE-2.0     //     // Unless required by applicable law or agreed to in writing,     // software distributed under the License is distributed on an     // "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY     // KIND, either express or implied.  See the License for the     // specific language governing permissions and limitations     // under the License.          import org.junit.jupiter.api.Test;     import org.junit.jupiter.api.Assertions;     import org.openqa.selenium.Cookie;     import org.openqa.selenium.WebDriver;     import org.openqa.selenium.chrome.ChromeDriver;     import java.util.Set;          public class CookiesTest {          	WebDriver driver = new ChromeDriver();     	@Test     	  public void addCookie() {     	      driver.get("https://www.selenium.dev/selenium/web/blank.html");     	      // Add cookie into current browser context     	      driver.manage().addCookie(new Cookie("key", "value"));     	      driver.quit();     	}     	    @Test     	    public void getNamedCookie() {     	          	        driver.get("https://www.selenium.dev/selenium/web/blank.html");     	        // Add cookie into current browser context     	        driver.manage().addCookie(new Cookie("foo", "bar"));     	        // Get cookie details with named cookie 'foo'     	        Cookie cookie = driver.manage().getCookieNamed("foo");     	        Assertions.assertEquals(cookie.getValue(), "bar");     	          	        driver.quit();     	      }     	            	    @Test     	    public void getAllCookies() {     	           	        driver.get("https://www.selenium.dev/selenium/web/blank.html");     	        // Add cookies into current browser context     	        driver.manage().addCookie(new Cookie("test1", "cookie1"));     	        driver.manage().addCookie(new Cookie("test2", "cookie2"));     	        // Get cookies     	        Set<Cookie> cookies = driver.manage().getCookies();     	         for (Cookie cookie : cookies) {     	            if (cookie.getName().equals("test1")) {     	                Assertions.assertEquals(cookie.getValue(), "cookie1");     	            }          	            if (cookie.getName().equals("test2")) {     	                Assertions.assertEquals(cookie.getValue(), "cookie2");     	            }     	         }     	         driver.quit();     	      }     	             	    @Test     	    public void deleteCookieNamed() {     	          	        driver.get("https://www.selenium.dev/selenium/web/blank.html");     	        driver.manage().addCookie(new Cookie("test1", "cookie1"));     	        // delete cookie named     	        driver.manage().deleteCookieNamed("test1");     	        driver.quit();     	    }          	    @Test     	    public void deleteCookieObject() {     	          	        driver.get("https://www.selenium.dev/selenium/web/blank.html");     	        Cookie cookie = new Cookie("test2", "cookie2");     	        driver.manage().addCookie(cookie);     	        /*     	        Selenium Java bindings also provides a way to delete     	        cookie by passing cookie object of current browsing context     	        */     	        driver.manage().deleteCookie(cookie);     	           	        driver.quit();     	      }     	            	    @Test     	    public void deleteAllCookies() {     	          	        driver.get("https://www.selenium.dev/selenium/web/blank.html");     	        // Add cookies into current browser context     	        driver.manage().addCookie(new Cookie("test1", "cookie1"));     	        driver.manage().addCookie(new Cookie("test2", "cookie2"));     	        // Delete All cookies     	        driver.manage().deleteAllCookies();     	          	        driver.quit();     	      }          		  @Test     		  public void sameSiteCookie() {     		    driver.get("http://www.example.com");               	    Cookie cookie = new Cookie.Builder("key", "value").sameSite("Strict").build();                 Cookie cookie1 = new Cookie.Builder("key", "value").sameSite("Lax").build();                      driver.manage().addCookie(cookie);                 driver.manage().addCookie(cookie1);                      System.out.println(cookie.getSameSite());                 System.out.println(cookie1.getSameSite());          			driver.quit();     		  }     }                        driver = webdriver.Chrome()         driver.get("http://www.example.com")              # Adds the cookie into current browser context         driver.add_cookie({"name": "key", "value": "value"})

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/python/tests/interactions/test_cookies.py#L5-L9)

##### examples/python/tests/interactions/test\_cookies.py

Copy  Close               from selenium import webdriver               def test_add_cookie():         driver = webdriver.Chrome()         driver.get("http://www.example.com")              # Adds the cookie into current browser context         driver.add_cookie({"name": "key", "value": "value"})               def test_get_named_cookie():         driver = webdriver.Chrome()         driver.get("http://www.example.com")              # Adds the cookie into current browser context         driver.add_cookie({"name": "foo", "value": "bar"})              # Get cookie details with named cookie 'foo'         print(driver.get_cookie("foo"))               def test_get_all_cookies():         driver = webdriver.Chrome()              driver.get("http://www.example.com")              driver.add_cookie({"name": "test1", "value": "cookie1"})         driver.add_cookie({"name": "test2", "value": "cookie2"})              # Get all available cookies         print(driver.get_cookies())          def test_delete_cookie():         driver = webdriver.Chrome()              driver.get("http://www.example.com")              driver.add_cookie({"name": "test1", "value": "cookie1"})         driver.add_cookie({"name": "test2", "value": "cookie2"})              # Delete cookie with name 'test1'         driver.delete_cookie("test1")               def test_delete_all_cookies():         driver = webdriver.Chrome()              driver.get("http://www.example.com")              driver.add_cookie({"name": "test1", "value": "cookie1"})         driver.add_cookie({"name": "test2", "value": "cookie2"})              # Delete all cookies         driver.delete_all_cookies()               def test_same_side_cookie_attr():         driver = webdriver.Chrome()              driver.get("http://www.example.com")              # Adds the cookie into current browser context with sameSite 'Strict' (or) 'Lax'         driver.add_cookie({"name": "foo", "value": "value", "sameSite": "Strict"})         driver.add_cookie({"name": "foo1", "value": "value", "sameSite": "Lax"})              cookie1 = driver.get_cookie("foo")         cookie2 = driver.get_cookie("foo1")              print(cookie1)         print(cookie2)                             driver.Url="https://www.selenium.dev/selenium/web/blank.html";              // Add cookie into current browser context              driver.Manage().Cookies.AddCookie(new Cookie("key", "value"));

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/dotnet/SeleniumDocs/Interactions/CookiesTest.cs#L32-L34)

##### examples/dotnet/SeleniumDocs/Interactions/CookiesTest.cs

Copy  Close               // Licensed to the Software Freedom Conservancy (SFC) under one     // or more contributor license agreements.  See the NOTICE file     // distributed with this work for additional information     // regarding copyright ownership.  The SFC licenses this file     // to you under the Apache License, Version 2.0 (the     // "License"); you may not use this file except in compliance     // with the License.  You may obtain a copy of the License at     //     //   http://www.apache.org/licenses/LICENSE-2.0     //     // Unless required by applicable law or agreed to in writing,     // software distributed under the License is distributed on an     // "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY     // KIND, either express or implied.  See the License for the     // specific language governing permissions and limitations     // under the License.          using System;     using Microsoft.VisualStudio.TestTools.UnitTesting;     using OpenQA.Selenium;     using OpenQA.Selenium.Chrome;          namespace SeleniumDocs.Interactions{          [TestClass]     public class CookiesTest{                   WebDriver driver = new ChromeDriver();               [TestMethod]           public void addCookie(){              driver.Url="https://www.selenium.dev/selenium/web/blank.html";              // Add cookie into current browser context              driver.Manage().Cookies.AddCookie(new Cookie("key", "value"));              driver.Quit();          }                    [TestMethod]          public void getNamedCookie(){                driver.Url = "https://www.selenium.dev/selenium/web/blank.html";              // Add cookie into current browser context              driver.Manage().Cookies.AddCookie(new Cookie("foo", "bar"));              // Get cookie details with named cookie 'foo'              Cookie cookie = driver.Manage().Cookies.GetCookieNamed("foo");              Assert.AreEqual(cookie.Value, "bar");              driver.Quit();          }               [TestMethod]          public void getAllCookies(){              driver.Url = "https://www.selenium.dev/selenium/web/blank.html";              // Add cookies into current browser context              driver.Manage().Cookies.AddCookie(new Cookie("test1", "cookie1"));              driver.Manage().Cookies.AddCookie(new Cookie("test2", "cookie2"));              // Get cookies              var cookies = driver.Manage().Cookies.AllCookies;              foreach (var cookie in cookies){                  if (cookie.Name.Equals("test1")){                      Assert.AreEqual("cookie1", cookie.Value);                  }                  if (cookie.Name.Equals("test2")){                      Assert.AreEqual("cookie2", cookie.Value);                  }              }              driver.Quit();          }                    [TestMethod]          public void deleteCookieNamed(){              driver.Url = "https://www.selenium.dev/selenium/web/blank.html";              driver.Manage().Cookies.AddCookie(new Cookie("test1", "cookie1"));              // delete cookie named              driver.Manage().Cookies.DeleteCookieNamed("test1");              driver.Quit();          }               [TestMethod]          public void deleteCookieObject(){              driver.Url = "https://www.selenium.dev/selenium/web/blank.html";              Cookie cookie = new Cookie("test2", "cookie2");              driver.Manage().Cookies.AddCookie(cookie);              /*           Selenium CSharp bindings also provides a way to delete           cookie by passing cookie object of current browsing context           */              driver.Manage().Cookies.DeleteCookie(cookie);              driver.Quit();          }                    [TestMethod]          public void deleteAllCookies(){              driver.Url = "https://www.selenium.dev/selenium/web/blank.html";              // Add cookies into current browser context              driver.Manage().Cookies.AddCookie(new Cookie("test1", "cookie1"));              driver.Manage().Cookies.AddCookie(new Cookie("test2", "cookie2"));              // Delete All cookies              driver.Manage().Cookies.DeleteAllCookies();              driver.Quit();          }         }     }                   driver.navigate.to 'https://www.selenium.dev/selenium/web/blank.html'         # Add cookie into current browser context         driver.manage.add_cookie(name: 'key', value: 'value')

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/ruby/spec/interactions/cookies_spec.rb#L9-L11)

##### examples/ruby/spec/interactions/cookies\_spec.rb

Copy  Close               # frozen_string_literal: true          require 'spec_helper'          RSpec.describe 'Cookies' do       let(:driver) { start_session }            it 'adds a cookie' do         driver.navigate.to 'https://www.selenium.dev/selenium/web/blank.html'         # Add cookie into current browser context         driver.manage.add_cookie(name: 'key', value: 'value')         # Verify cookie was added         expect(driver.manage.cookie_named('key')[:value]).to eq('value')       end            it 'gets a named cookie' do         driver.navigate.to 'https://www.selenium.dev/selenium/web/blank.html'         # Add cookie into current browser context         driver.manage.add_cookie(name: 'foo', value: 'bar')         # Get cookie details with named cookie 'foo'         cookie = driver.manage.cookie_named('foo')         expect(cookie[:value]).to eq('bar')       end            it 'gets all cookies' do         driver.navigate.to 'https://www.selenium.dev/selenium/web/blank.html'         # Add cookies into current browser context         driver.manage.add_cookie(name: 'test1', value: 'cookie1')         driver.manage.add_cookie(name: 'test2', value: 'cookie2')         # Get cookies         cookies = driver.manage.all_cookies         # Verify both cookies exist with correct values         test1_cookie = cookies.find { |c| c[:name] == 'test1' }         test2_cookie = cookies.find { |c| c[:name] == 'test2' }         expect(test1_cookie[:value]).to eq('cookie1')         expect(test2_cookie[:value]).to eq('cookie2')       end            it 'deletes a cookie by name' do         driver.navigate.to 'https://www.selenium.dev/selenium/web/blank.html'         driver.manage.add_cookie(name: 'test1', value: 'cookie1')         # Delete cookie named         driver.manage.delete_cookie('test1')         # Verify cookie is deleted         expect { driver.manage.cookie_named('test1') }.to raise_error(Selenium::WebDriver::Error::NoSuchCookieError)       end            it 'deletes all cookies' do         driver.navigate.to 'https://www.selenium.dev/selenium/web/blank.html'         # Add cookies into current browser context         driver.manage.add_cookie(name: 'test1', value: 'cookie1')         driver.manage.add_cookie(name: 'test2', value: 'cookie2')         # Delete All cookies         driver.manage.delete_all_cookies         # Verify all cookies are deleted         expect(driver.manage.all_cookies.size).to eq(0)       end     end                        await driver.get('https://www.selenium.dev/selenium/web/blank.html');

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk//examples/javascript/test/interactions/cookies.spec.js#L18)

##### /examples/javascript/test/interactions/cookies.spec.js

Copy  Close               const {Browser, Builder} = require("selenium-webdriver");     const assert = require('assert')               describe('Cookies', function() {       let driver;            before(async function() {         driver = new Builder()           .forBrowser(Browser.CHROME)           .build();       });            after(async () => await driver.quit());            it('Create a cookie', async function() {         await driver.get('https://www.selenium.dev/selenium/web/blank.html');              // set a cookie on the current domain         await driver.manage().addCookie({ name: 'key', value: 'value' });       });            it('Create cookies with sameSite', async function() {         await driver.get('https://www.selenium.dev/selenium/web/blank.html');              // set a cookie on the current domain with sameSite 'Strict' (or) 'Lax'         await driver.manage().addCookie({ name: 'key', value: 'value', sameSite: 'Strict' });         await driver.manage().addCookie({ name: 'key', value: 'value', sameSite: 'Lax' });       });            it('Read cookie', async function() {         await driver.get('https://www.selenium.dev/selenium/web/blank.html');              // set a cookie on the current domain         await driver.manage().addCookie({ name: 'foo', value: 'bar' });              // Get cookie details with named cookie 'foo'         await driver.manage().getCookie('foo').then(function(cookie) {           assert.equal(cookie.value, 'bar');         });       });            it('Read all cookies', async function() {         await driver.get('https://www.selenium.dev/selenium/web/blank.html');              // Add few cookies         await driver.manage().addCookie({ name: 'test1', value: 'cookie1' });         await driver.manage().addCookie({ name: 'test2', value: 'cookie2' });              // Get all Available cookies         await driver.manage().getCookies().then(function(cookies) {           assert.equal(cookies.filter(cookie => cookie.name.startsWith('test')).length, 2);         });       });            it('Delete a cookie', async function() {         await driver.get('https://www.selenium.dev/selenium/web/blank.html');              // Add few cookies         await driver.manage().addCookie({ name: 'test1', value: 'cookie1' });         await driver.manage().addCookie({ name: 'test2', value: 'cookie2' });              // Delete a cookie with name 'test1'         await driver.manage().deleteCookie('test1');              // Get all Available cookies         await driver.manage().getCookies().then(function(cookies) {           assert.equal(cookies.filter(cookie => cookie.name.startsWith('test')).length, 1);         });       });            it('Delete all cookies', async function() {         await driver.get('https://www.selenium.dev/selenium/web/blank.html');              // Add few cookies         await driver.manage().addCookie({ name: 'test1', value: 'cookie1' });         await driver.manage().addCookie({ name: 'test2', value: 'cookie2' });              // Delete all cookies         await driver.manage().deleteAllCookies();       });     });                    import org.openqa.selenium.Cookie     import org.openqa.selenium.chrome.ChromeDriver          fun main() {         val driver = ChromeDriver()         try {             driver.get("https://example.com")                  // Adds the cookie into current browser context             driver.manage().addCookie(Cookie("key", "value"))         } finally {             driver.quit()         }     }       

## Get Named Cookie

It returns the serialized cookie data matching with the cookie name among all associated cookies.

[Move Code](https://www.selenium.dev/documentation/about/contributing/#moving-examples)

  * Java   * Python   * CSharp   * Ruby   * JavaScript   * Kotlin

              	        driver.get("https://www.selenium.dev/selenium/web/blank.html");     	        // Add cookie into current browser context     	        driver.manage().addCookie(new Cookie("foo", "bar"));     	        // Get cookie details with named cookie 'foo'     	        Cookie cookie = driver.manage().getCookieNamed("foo");

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/java/src/test/java/dev/selenium/interactions/CookiesTest.java#L38-L42)

##### examples/java/src/test/java/dev/selenium/interactions/CookiesTest.java

Copy  Close               // Licensed to the Software Freedom Conservancy (SFC) under one     // or more contributor license agreements.  See the NOTICE file     // distributed with this work for additional information     // regarding copyright ownership.  The SFC licenses this file     // to you under the Apache License, Version 2.0 (the     // "License"); you may not use this file except in compliance     // with the License.  You may obtain a copy of the License at     //     //   http://www.apache.org/licenses/LICENSE-2.0     //     // Unless required by applicable law or agreed to in writing,     // software distributed under the License is distributed on an     // "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY     // KIND, either express or implied.  See the License for the     // specific language governing permissions and limitations     // under the License.          import org.junit.jupiter.api.Test;     import org.junit.jupiter.api.Assertions;     import org.openqa.selenium.Cookie;     import org.openqa.selenium.WebDriver;     import org.openqa.selenium.chrome.ChromeDriver;     import java.util.Set;          public class CookiesTest {          	WebDriver driver = new ChromeDriver();     	@Test     	  public void addCookie() {     	      driver.get("https://www.selenium.dev/selenium/web/blank.html");     	      // Add cookie into current browser context     	      driver.manage().addCookie(new Cookie("key", "value"));     	      driver.quit();     	}     	    @Test     	    public void getNamedCookie() {     	          	        driver.get("https://www.selenium.dev/selenium/web/blank.html");     	        // Add cookie into current browser context     	        driver.manage().addCookie(new Cookie("foo", "bar"));     	        // Get cookie details with named cookie 'foo'     	        Cookie cookie = driver.manage().getCookieNamed("foo");     	        Assertions.assertEquals(cookie.getValue(), "bar");     	          	        driver.quit();     	      }     	            	    @Test     	    public void getAllCookies() {     	           	        driver.get("https://www.selenium.dev/selenium/web/blank.html");     	        // Add cookies into current browser context     	        driver.manage().addCookie(new Cookie("test1", "cookie1"));     	        driver.manage().addCookie(new Cookie("test2", "cookie2"));     	        // Get cookies     	        Set<Cookie> cookies = driver.manage().getCookies();     	         for (Cookie cookie : cookies) {     	            if (cookie.getName().equals("test1")) {     	                Assertions.assertEquals(cookie.getValue(), "cookie1");     	            }          	            if (cookie.getName().equals("test2")) {     	                Assertions.assertEquals(cookie.getValue(), "cookie2");     	            }     	         }     	         driver.quit();     	      }     	             	    @Test     	    public void deleteCookieNamed() {     	          	        driver.get("https://www.selenium.dev/selenium/web/blank.html");     	        driver.manage().addCookie(new Cookie("test1", "cookie1"));     	        // delete cookie named     	        driver.manage().deleteCookieNamed("test1");     	        driver.quit();     	    }          	    @Test     	    public void deleteCookieObject() {     	          	        driver.get("https://www.selenium.dev/selenium/web/blank.html");     	        Cookie cookie = new Cookie("test2", "cookie2");     	        driver.manage().addCookie(cookie);     	        /*     	        Selenium Java bindings also provides a way to delete     	        cookie by passing cookie object of current browsing context     	        */     	        driver.manage().deleteCookie(cookie);     	           	        driver.quit();     	      }     	            	    @Test     	    public void deleteAllCookies() {     	          	        driver.get("https://www.selenium.dev/selenium/web/blank.html");     	        // Add cookies into current browser context     	        driver.manage().addCookie(new Cookie("test1", "cookie1"));     	        driver.manage().addCookie(new Cookie("test2", "cookie2"));     	        // Delete All cookies     	        driver.manage().deleteAllCookies();     	          	        driver.quit();     	      }          		  @Test     		  public void sameSiteCookie() {     		    driver.get("http://www.example.com");               	    Cookie cookie = new Cookie.Builder("key", "value").sameSite("Strict").build();                 Cookie cookie1 = new Cookie.Builder("key", "value").sameSite("Lax").build();                      driver.manage().addCookie(cookie);                 driver.manage().addCookie(cookie1);                      System.out.println(cookie.getSameSite());                 System.out.println(cookie1.getSameSite());          			driver.quit();     		  }     }                        driver = webdriver.Chrome()         driver.get("http://www.example.com")              # Adds the cookie into current browser context         driver.add_cookie({"name": "foo", "value": "bar"})              # Get cookie details with named cookie 'foo'         print(driver.get_cookie("foo"))

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/python/tests/interactions/test_cookies.py#L13-L20)

##### examples/python/tests/interactions/test\_cookies.py

Copy  Close               from selenium import webdriver               def test_add_cookie():         driver = webdriver.Chrome()         driver.get("http://www.example.com")              # Adds the cookie into current browser context         driver.add_cookie({"name": "key", "value": "value"})               def test_get_named_cookie():         driver = webdriver.Chrome()         driver.get("http://www.example.com")              # Adds the cookie into current browser context         driver.add_cookie({"name": "foo", "value": "bar"})              # Get cookie details with named cookie 'foo'         print(driver.get_cookie("foo"))               def test_get_all_cookies():         driver = webdriver.Chrome()              driver.get("http://www.example.com")              driver.add_cookie({"name": "test1", "value": "cookie1"})         driver.add_cookie({"name": "test2", "value": "cookie2"})              # Get all available cookies         print(driver.get_cookies())          def test_delete_cookie():         driver = webdriver.Chrome()              driver.get("http://www.example.com")              driver.add_cookie({"name": "test1", "value": "cookie1"})         driver.add_cookie({"name": "test2", "value": "cookie2"})              # Delete cookie with name 'test1'         driver.delete_cookie("test1")               def test_delete_all_cookies():         driver = webdriver.Chrome()              driver.get("http://www.example.com")              driver.add_cookie({"name": "test1", "value": "cookie1"})         driver.add_cookie({"name": "test2", "value": "cookie2"})              # Delete all cookies         driver.delete_all_cookies()               def test_same_side_cookie_attr():         driver = webdriver.Chrome()              driver.get("http://www.example.com")              # Adds the cookie into current browser context with sameSite 'Strict' (or) 'Lax'         driver.add_cookie({"name": "foo", "value": "value", "sameSite": "Strict"})         driver.add_cookie({"name": "foo1", "value": "value", "sameSite": "Lax"})              cookie1 = driver.get_cookie("foo")         cookie2 = driver.get_cookie("foo1")              print(cookie1)         print(cookie2)                             driver.Url = "https://www.selenium.dev/selenium/web/blank.html";              // Add cookie into current browser context              driver.Manage().Cookies.AddCookie(new Cookie("foo", "bar"));              // Get cookie details with named cookie 'foo'              Cookie cookie = driver.Manage().Cookies.GetCookieNamed("foo");

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/dotnet/SeleniumDocs/Interactions/CookiesTest.cs#L40-L44)

##### examples/dotnet/SeleniumDocs/Interactions/CookiesTest.cs

Copy  Close               // Licensed to the Software Freedom Conservancy (SFC) under one     // or more contributor license agreements.  See the NOTICE file     // distributed with this work for additional information     // regarding copyright ownership.  The SFC licenses this file     // to you under the Apache License, Version 2.0 (the     // "License"); you may not use this file except in compliance     // with the License.  You may obtain a copy of the License at     //     //   http://www.apache.org/licenses/LICENSE-2.0     //     // Unless required by applicable law or agreed to in writing,     // software distributed under the License is distributed on an     // "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY     // KIND, either express or implied.  See the License for the     // specific language governing permissions and limitations     // under the License.          using System;     using Microsoft.VisualStudio.TestTools.UnitTesting;     using OpenQA.Selenium;     using OpenQA.Selenium.Chrome;          namespace SeleniumDocs.Interactions{          [TestClass]     public class CookiesTest{                   WebDriver driver = new ChromeDriver();               [TestMethod]           public void addCookie(){              driver.Url="https://www.selenium.dev/selenium/web/blank.html";              // Add cookie into current browser context              driver.Manage().Cookies.AddCookie(new Cookie("key", "value"));              driver.Quit();          }                    [TestMethod]          public void getNamedCookie(){                driver.Url = "https://www.selenium.dev/selenium/web/blank.html";              // Add cookie into current browser context              driver.Manage().Cookies.AddCookie(new Cookie("foo", "bar"));              // Get cookie details with named cookie 'foo'              Cookie cookie = driver.Manage().Cookies.GetCookieNamed("foo");              Assert.AreEqual(cookie.Value, "bar");              driver.Quit();          }               [TestMethod]          public void getAllCookies(){              driver.Url = "https://www.selenium.dev/selenium/web/blank.html";              // Add cookies into current browser context              driver.Manage().Cookies.AddCookie(new Cookie("test1", "cookie1"));              driver.Manage().Cookies.AddCookie(new Cookie("test2", "cookie2"));              // Get cookies              var cookies = driver.Manage().Cookies.AllCookies;              foreach (var cookie in cookies){                  if (cookie.Name.Equals("test1")){                      Assert.AreEqual("cookie1", cookie.Value);                  }                  if (cookie.Name.Equals("test2")){                      Assert.AreEqual("cookie2", cookie.Value);                  }              }              driver.Quit();          }                    [TestMethod]          public void deleteCookieNamed(){              driver.Url = "https://www.selenium.dev/selenium/web/blank.html";              driver.Manage().Cookies.AddCookie(new Cookie("test1", "cookie1"));              // delete cookie named              driver.Manage().Cookies.DeleteCookieNamed("test1");              driver.Quit();          }               [TestMethod]          public void deleteCookieObject(){              driver.Url = "https://www.selenium.dev/selenium/web/blank.html";              Cookie cookie = new Cookie("test2", "cookie2");              driver.Manage().Cookies.AddCookie(cookie);              /*           Selenium CSharp bindings also provides a way to delete           cookie by passing cookie object of current browsing context           */              driver.Manage().Cookies.DeleteCookie(cookie);              driver.Quit();          }                    [TestMethod]          public void deleteAllCookies(){              driver.Url = "https://www.selenium.dev/selenium/web/blank.html";              // Add cookies into current browser context              driver.Manage().Cookies.AddCookie(new Cookie("test1", "cookie1"));              driver.Manage().Cookies.AddCookie(new Cookie("test2", "cookie2"));              // Delete All cookies              driver.Manage().Cookies.DeleteAllCookies();              driver.Quit();          }         }     }                   driver.navigate.to 'https://www.selenium.dev/selenium/web/blank.html'         # Add cookie into current browser context         driver.manage.add_cookie(name: 'foo', value: 'bar')         # Get cookie details with named cookie 'foo'         cookie = driver.manage.cookie_named('foo')

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/ruby/spec/interactions/cookies_spec.rb#L17-L21)

##### examples/ruby/spec/interactions/cookies\_spec.rb

Copy  Close               # frozen_string_literal: true          require 'spec_helper'          RSpec.describe 'Cookies' do       let(:driver) { start_session }            it 'adds a cookie' do         driver.navigate.to 'https://www.selenium.dev/selenium/web/blank.html'         # Add cookie into current browser context         driver.manage.add_cookie(name: 'key', value: 'value')         # Verify cookie was added         expect(driver.manage.cookie_named('key')[:value]).to eq('value')       end            it 'gets a named cookie' do         driver.navigate.to 'https://www.selenium.dev/selenium/web/blank.html'         # Add cookie into current browser context         driver.manage.add_cookie(name: 'foo', value: 'bar')         # Get cookie details with named cookie 'foo'         cookie = driver.manage.cookie_named('foo')         expect(cookie[:value]).to eq('bar')       end            it 'gets all cookies' do         driver.navigate.to 'https://www.selenium.dev/selenium/web/blank.html'         # Add cookies into current browser context         driver.manage.add_cookie(name: 'test1', value: 'cookie1')         driver.manage.add_cookie(name: 'test2', value: 'cookie2')         # Get cookies         cookies = driver.manage.all_cookies         # Verify both cookies exist with correct values         test1_cookie = cookies.find { |c| c[:name] == 'test1' }         test2_cookie = cookies.find { |c| c[:name] == 'test2' }         expect(test1_cookie[:value]).to eq('cookie1')         expect(test2_cookie[:value]).to eq('cookie2')       end            it 'deletes a cookie by name' do         driver.navigate.to 'https://www.selenium.dev/selenium/web/blank.html'         driver.manage.add_cookie(name: 'test1', value: 'cookie1')         # Delete cookie named         driver.manage.delete_cookie('test1')         # Verify cookie is deleted         expect { driver.manage.cookie_named('test1') }.to raise_error(Selenium::WebDriver::Error::NoSuchCookieError)       end            it 'deletes all cookies' do         driver.navigate.to 'https://www.selenium.dev/selenium/web/blank.html'         # Add cookies into current browser context         driver.manage.add_cookie(name: 'test1', value: 'cookie1')         driver.manage.add_cookie(name: 'test2', value: 'cookie2')         # Delete All cookies         driver.manage.delete_all_cookies         # Verify all cookies are deleted         expect(driver.manage.all_cookies.size).to eq(0)       end     end                        // set a cookie on the current domain         await driver.manage().addCookie({ name: 'foo', value: 'bar' });              // Get cookie details with named cookie 'foo'     

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk//examples/javascript/test/interactions/cookies.spec.js#L35-L38)

##### /examples/javascript/test/interactions/cookies.spec.js

Copy  Close               const {Browser, Builder} = require("selenium-webdriver");     const assert = require('assert')               describe('Cookies', function() {       let driver;            before(async function() {         driver = new Builder()           .forBrowser(Browser.CHROME)           .build();       });            after(async () => await driver.quit());            it('Create a cookie', async function() {         await driver.get('https://www.selenium.dev/selenium/web/blank.html');              // set a cookie on the current domain         await driver.manage().addCookie({ name: 'key', value: 'value' });       });            it('Create cookies with sameSite', async function() {         await driver.get('https://www.selenium.dev/selenium/web/blank.html');              // set a cookie on the current domain with sameSite 'Strict' (or) 'Lax'         await driver.manage().addCookie({ name: 'key', value: 'value', sameSite: 'Strict' });         await driver.manage().addCookie({ name: 'key', value: 'value', sameSite: 'Lax' });       });            it('Read cookie', async function() {         await driver.get('https://www.selenium.dev/selenium/web/blank.html');              // set a cookie on the current domain         await driver.manage().addCookie({ name: 'foo', value: 'bar' });              // Get cookie details with named cookie 'foo'         await driver.manage().getCookie('foo').then(function(cookie) {           assert.equal(cookie.value, 'bar');         });       });            it('Read all cookies', async function() {         await driver.get('https://www.selenium.dev/selenium/web/blank.html');              // Add few cookies         await driver.manage().addCookie({ name: 'test1', value: 'cookie1' });         await driver.manage().addCookie({ name: 'test2', value: 'cookie2' });              // Get all Available cookies         await driver.manage().getCookies().then(function(cookies) {           assert.equal(cookies.filter(cookie => cookie.name.startsWith('test')).length, 2);         });       });            it('Delete a cookie', async function() {         await driver.get('https://www.selenium.dev/selenium/web/blank.html');              // Add few cookies         await driver.manage().addCookie({ name: 'test1', value: 'cookie1' });         await driver.manage().addCookie({ name: 'test2', value: 'cookie2' });              // Delete a cookie with name 'test1'         await driver.manage().deleteCookie('test1');              // Get all Available cookies         await driver.manage().getCookies().then(function(cookies) {           assert.equal(cookies.filter(cookie => cookie.name.startsWith('test')).length, 1);         });       });            it('Delete all cookies', async function() {         await driver.get('https://www.selenium.dev/selenium/web/blank.html');              // Add few cookies         await driver.manage().addCookie({ name: 'test1', value: 'cookie1' });         await driver.manage().addCookie({ name: 'test2', value: 'cookie2' });              // Delete all cookies         await driver.manage().deleteAllCookies();       });     });                    import org.openqa.selenium.Cookie     import org.openqa.selenium.chrome.ChromeDriver          fun main() {         val driver = ChromeDriver()         try {             driver.get("https://example.com")             driver.manage().addCookie(Cookie("foo", "bar"))                  // Get cookie details with named cookie 'foo'             val cookie = driver.manage().getCookieNamed("foo")             println(cookie)         } finally {             driver.quit()         }     }         

## Get All Cookies

It returns a ‘successful serialized cookie data’ for current browsing context. If browser is no longer available it returns error.

[Move Code](https://www.selenium.dev/documentation/about/contributing/#moving-examples)

  * Java   * Python   * CSharp   * Ruby   * JavaScript   * Kotlin

              	        driver.get("https://www.selenium.dev/selenium/web/blank.html");     	        // Add cookies into current browser context     	        driver.manage().addCookie(new Cookie("test1", "cookie1"));     	        driver.manage().addCookie(new Cookie("test2", "cookie2"));     	        // Get cookies     	        Set<Cookie> cookies = driver.manage().getCookies();     	         for (Cookie cookie : cookies) {     	            if (cookie.getName().equals("test1")) {     	                Assertions.assertEquals(cookie.getValue(), "cookie1");     	            }          	            if (cookie.getName().equals("test2")) {     	                Assertions.assertEquals(cookie.getValue(), "cookie2");     	            }     	         }

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/java/src/test/java/dev/selenium/interactions/CookiesTest.java#L52-L66)

##### examples/java/src/test/java/dev/selenium/interactions/CookiesTest.java

Copy  Close               // Licensed to the Software Freedom Conservancy (SFC) under one     // or more contributor license agreements.  See the NOTICE file     // distributed with this work for additional information     // regarding copyright ownership.  The SFC licenses this file     // to you under the Apache License, Version 2.0 (the     // "License"); you may not use this file except in compliance     // with the License.  You may obtain a copy of the License at     //     //   http://www.apache.org/licenses/LICENSE-2.0     //     // Unless required by applicable law or agreed to in writing,     // software distributed under the License is distributed on an     // "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY     // KIND, either express or implied.  See the License for the     // specific language governing permissions and limitations     // under the License.          import org.junit.jupiter.api.Test;     import org.junit.jupiter.api.Assertions;     import org.openqa.selenium.Cookie;     import org.openqa.selenium.WebDriver;     import org.openqa.selenium.chrome.ChromeDriver;     import java.util.Set;          public class CookiesTest {          	WebDriver driver = new ChromeDriver();     	@Test     	  public void addCookie() {     	      driver.get("https://www.selenium.dev/selenium/web/blank.html");     	      // Add cookie into current browser context     	      driver.manage().addCookie(new Cookie("key", "value"));     	      driver.quit();     	}     	    @Test     	    public void getNamedCookie() {     	          	        driver.get("https://www.selenium.dev/selenium/web/blank.html");     	        // Add cookie into current browser context     	        driver.manage().addCookie(new Cookie("foo", "bar"));     	        // Get cookie details with named cookie 'foo'     	        Cookie cookie = driver.manage().getCookieNamed("foo");     	        Assertions.assertEquals(cookie.getValue(), "bar");     	          	        driver.quit();     	      }     	            	    @Test     	    public void getAllCookies() {     	           	        driver.get("https://www.selenium.dev/selenium/web/blank.html");     	        // Add cookies into current browser context     	        driver.manage().addCookie(new Cookie("test1", "cookie1"));     	        driver.manage().addCookie(new Cookie("test2", "cookie2"));     	        // Get cookies     	        Set<Cookie> cookies = driver.manage().getCookies();     	         for (Cookie cookie : cookies) {     	            if (cookie.getName().equals("test1")) {     	                Assertions.assertEquals(cookie.getValue(), "cookie1");     	            }          	            if (cookie.getName().equals("test2")) {     	                Assertions.assertEquals(cookie.getValue(), "cookie2");     	            }     	         }     	         driver.quit();     	      }     	             	    @Test     	    public void deleteCookieNamed() {     	          	        driver.get("https://www.selenium.dev/selenium/web/blank.html");     	        driver.manage().addCookie(new Cookie("test1", "cookie1"));     	        // delete cookie named     	        driver.manage().deleteCookieNamed("test1");     	        driver.quit();     	    }          	    @Test     	    public void deleteCookieObject() {     	          	        driver.get("https://www.selenium.dev/selenium/web/blank.html");     	        Cookie cookie = new Cookie("test2", "cookie2");     	        driver.manage().addCookie(cookie);     	        /*     	        Selenium Java bindings also provides a way to delete     	        cookie by passing cookie object of current browsing context     	        */     	        driver.manage().deleteCookie(cookie);     	           	        driver.quit();     	      }     	            	    @Test     	    public void deleteAllCookies() {     	          	        driver.get("https://www.selenium.dev/selenium/web/blank.html");     	        // Add cookies into current browser context     	        driver.manage().addCookie(new Cookie("test1", "cookie1"));     	        driver.manage().addCookie(new Cookie("test2", "cookie2"));     	        // Delete All cookies     	        driver.manage().deleteAllCookies();     	          	        driver.quit();     	      }          		  @Test     		  public void sameSiteCookie() {     		    driver.get("http://www.example.com");               	    Cookie cookie = new Cookie.Builder("key", "value").sameSite("Strict").build();                 Cookie cookie1 = new Cookie.Builder("key", "value").sameSite("Lax").build();                      driver.manage().addCookie(cookie);                 driver.manage().addCookie(cookie1);                      System.out.println(cookie.getSameSite());                 System.out.println(cookie1.getSameSite());          			driver.quit();     		  }     }                        driver = webdriver.Chrome()              driver.get("http://www.example.com")              driver.add_cookie({"name": "test1", "value": "cookie1"})         driver.add_cookie({"name": "test2", "value": "cookie2"})              # Get all available cookies         print(driver.get_cookies())

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/python/tests/interactions/test_cookies.py#L24-L32)

##### examples/python/tests/interactions/test\_cookies.py

Copy  Close               from selenium import webdriver               def test_add_cookie():         driver = webdriver.Chrome()         driver.get("http://www.example.com")              # Adds the cookie into current browser context         driver.add_cookie({"name": "key", "value": "value"})               def test_get_named_cookie():         driver = webdriver.Chrome()         driver.get("http://www.example.com")              # Adds the cookie into current browser context         driver.add_cookie({"name": "foo", "value": "bar"})              # Get cookie details with named cookie 'foo'         print(driver.get_cookie("foo"))               def test_get_all_cookies():         driver = webdriver.Chrome()              driver.get("http://www.example.com")              driver.add_cookie({"name": "test1", "value": "cookie1"})         driver.add_cookie({"name": "test2", "value": "cookie2"})              # Get all available cookies         print(driver.get_cookies())          def test_delete_cookie():         driver = webdriver.Chrome()              driver.get("http://www.example.com")              driver.add_cookie({"name": "test1", "value": "cookie1"})         driver.add_cookie({"name": "test2", "value": "cookie2"})              # Delete cookie with name 'test1'         driver.delete_cookie("test1")               def test_delete_all_cookies():         driver = webdriver.Chrome()              driver.get("http://www.example.com")              driver.add_cookie({"name": "test1", "value": "cookie1"})         driver.add_cookie({"name": "test2", "value": "cookie2"})              # Delete all cookies         driver.delete_all_cookies()               def test_same_side_cookie_attr():         driver = webdriver.Chrome()              driver.get("http://www.example.com")              # Adds the cookie into current browser context with sameSite 'Strict' (or) 'Lax'         driver.add_cookie({"name": "foo", "value": "value", "sameSite": "Strict"})         driver.add_cookie({"name": "foo1", "value": "value", "sameSite": "Lax"})              cookie1 = driver.get_cookie("foo")         cookie2 = driver.get_cookie("foo1")              print(cookie1)         print(cookie2)                             driver.Url = "https://www.selenium.dev/selenium/web/blank.html";              // Add cookies into current browser context              driver.Manage().Cookies.AddCookie(new Cookie("test1", "cookie1"));              driver.Manage().Cookies.AddCookie(new Cookie("test2", "cookie2"));              // Get cookies              var cookies = driver.Manage().Cookies.AllCookies;              foreach (var cookie in cookies){                  if (cookie.Name.Equals("test1")){                      Assert.AreEqual("cookie1", cookie.Value);                  }                  if (cookie.Name.Equals("test2")){                      Assert.AreEqual("cookie2", cookie.Value);                  }              }

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/dotnet/SeleniumDocs/Interactions/CookiesTest.cs#L51-L64)

##### examples/dotnet/SeleniumDocs/Interactions/CookiesTest.cs

Copy  Close               // Licensed to the Software Freedom Conservancy (SFC) under one     // or more contributor license agreements.  See the NOTICE file     // distributed with this work for additional information     // regarding copyright ownership.  The SFC licenses this file     // to you under the Apache License, Version 2.0 (the     // "License"); you may not use this file except in compliance     // with the License.  You may obtain a copy of the License at     //     //   http://www.apache.org/licenses/LICENSE-2.0     //     // Unless required by applicable law or agreed to in writing,     // software distributed under the License is distributed on an     // "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY     // KIND, either express or implied.  See the License for the     // specific language governing permissions and limitations     // under the License.          using System;     using Microsoft.VisualStudio.TestTools.UnitTesting;     using OpenQA.Selenium;     using OpenQA.Selenium.Chrome;          namespace SeleniumDocs.Interactions{          [TestClass]     public class CookiesTest{                   WebDriver driver = new ChromeDriver();               [TestMethod]           public void addCookie(){              driver.Url="https://www.selenium.dev/selenium/web/blank.html";              // Add cookie into current browser context              driver.Manage().Cookies.AddCookie(new Cookie("key", "value"));              driver.Quit();          }                    [TestMethod]          public void getNamedCookie(){                driver.Url = "https://www.selenium.dev/selenium/web/blank.html";              // Add cookie into current browser context              driver.Manage().Cookies.AddCookie(new Cookie("foo", "bar"));              // Get cookie details with named cookie 'foo'              Cookie cookie = driver.Manage().Cookies.GetCookieNamed("foo");              Assert.AreEqual(cookie.Value, "bar");              driver.Quit();          }               [TestMethod]          public void getAllCookies(){              driver.Url = "https://www.selenium.dev/selenium/web/blank.html";              // Add cookies into current browser context              driver.Manage().Cookies.AddCookie(new Cookie("test1", "cookie1"));              driver.Manage().Cookies.AddCookie(new Cookie("test2", "cookie2"));              // Get cookies              var cookies = driver.Manage().Cookies.AllCookies;              foreach (var cookie in cookies){                  if (cookie.Name.Equals("test1")){                      Assert.AreEqual("cookie1", cookie.Value);                  }                  if (cookie.Name.Equals("test2")){                      Assert.AreEqual("cookie2", cookie.Value);                  }              }              driver.Quit();          }                    [TestMethod]          public void deleteCookieNamed(){              driver.Url = "https://www.selenium.dev/selenium/web/blank.html";              driver.Manage().Cookies.AddCookie(new Cookie("test1", "cookie1"));              // delete cookie named              driver.Manage().Cookies.DeleteCookieNamed("test1");              driver.Quit();          }               [TestMethod]          public void deleteCookieObject(){              driver.Url = "https://www.selenium.dev/selenium/web/blank.html";              Cookie cookie = new Cookie("test2", "cookie2");              driver.Manage().Cookies.AddCookie(cookie);              /*           Selenium CSharp bindings also provides a way to delete           cookie by passing cookie object of current browsing context           */              driver.Manage().Cookies.DeleteCookie(cookie);              driver.Quit();          }                    [TestMethod]          public void deleteAllCookies(){              driver.Url = "https://www.selenium.dev/selenium/web/blank.html";              // Add cookies into current browser context              driver.Manage().Cookies.AddCookie(new Cookie("test1", "cookie1"));              driver.Manage().Cookies.AddCookie(new Cookie("test2", "cookie2"));              // Delete All cookies              driver.Manage().Cookies.DeleteAllCookies();              driver.Quit();          }         }     }                   driver.navigate.to 'https://www.selenium.dev/selenium/web/blank.html'         # Add cookies into current browser context         driver.manage.add_cookie(name: 'test1', value: 'cookie1')         driver.manage.add_cookie(name: 'test2', value: 'cookie2')         # Get cookies         cookies = driver.manage.all_cookies

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/ruby/spec/interactions/cookies_spec.rb#L26-L31)

##### examples/ruby/spec/interactions/cookies\_spec.rb

Copy  Close               # frozen_string_literal: true          require 'spec_helper'          RSpec.describe 'Cookies' do       let(:driver) { start_session }            it 'adds a cookie' do         driver.navigate.to 'https://www.selenium.dev/selenium/web/blank.html'         # Add cookie into current browser context         driver.manage.add_cookie(name: 'key', value: 'value')         # Verify cookie was added         expect(driver.manage.cookie_named('key')[:value]).to eq('value')       end            it 'gets a named cookie' do         driver.navigate.to 'https://www.selenium.dev/selenium/web/blank.html'         # Add cookie into current browser context         driver.manage.add_cookie(name: 'foo', value: 'bar')         # Get cookie details with named cookie 'foo'         cookie = driver.manage.cookie_named('foo')         expect(cookie[:value]).to eq('bar')       end            it 'gets all cookies' do         driver.navigate.to 'https://www.selenium.dev/selenium/web/blank.html'         # Add cookies into current browser context         driver.manage.add_cookie(name: 'test1', value: 'cookie1')         driver.manage.add_cookie(name: 'test2', value: 'cookie2')         # Get cookies         cookies = driver.manage.all_cookies         # Verify both cookies exist with correct values         test1_cookie = cookies.find { |c| c[:name] == 'test1' }         test2_cookie = cookies.find { |c| c[:name] == 'test2' }         expect(test1_cookie[:value]).to eq('cookie1')         expect(test2_cookie[:value]).to eq('cookie2')       end            it 'deletes a cookie by name' do         driver.navigate.to 'https://www.selenium.dev/selenium/web/blank.html'         driver.manage.add_cookie(name: 'test1', value: 'cookie1')         # Delete cookie named         driver.manage.delete_cookie('test1')         # Verify cookie is deleted         expect { driver.manage.cookie_named('test1') }.to raise_error(Selenium::WebDriver::Error::NoSuchCookieError)       end            it 'deletes all cookies' do         driver.navigate.to 'https://www.selenium.dev/selenium/web/blank.html'         # Add cookies into current browser context         driver.manage.add_cookie(name: 'test1', value: 'cookie1')         driver.manage.add_cookie(name: 'test2', value: 'cookie2')         # Delete All cookies         driver.manage.delete_all_cookies         # Verify all cookies are deleted         expect(driver.manage.all_cookies.size).to eq(0)       end     end                        await driver.manage().addCookie({ name: 'test2', value: 'cookie2' });              // Get all Available cookies     

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk//examples/javascript/test/interactions/cookies.spec.js#L49-L51)

##### /examples/javascript/test/interactions/cookies.spec.js

Copy  Close               const {Browser, Builder} = require("selenium-webdriver");     const assert = require('assert')               describe('Cookies', function() {       let driver;            before(async function() {         driver = new Builder()           .forBrowser(Browser.CHROME)           .build();       });            after(async () => await driver.quit());            it('Create a cookie', async function() {         await driver.get('https://www.selenium.dev/selenium/web/blank.html');              // set a cookie on the current domain         await driver.manage().addCookie({ name: 'key', value: 'value' });       });            it('Create cookies with sameSite', async function() {         await driver.get('https://www.selenium.dev/selenium/web/blank.html');              // set a cookie on the current domain with sameSite 'Strict' (or) 'Lax'         await driver.manage().addCookie({ name: 'key', value: 'value', sameSite: 'Strict' });         await driver.manage().addCookie({ name: 'key', value: 'value', sameSite: 'Lax' });       });            it('Read cookie', async function() {         await driver.get('https://www.selenium.dev/selenium/web/blank.html');              // set a cookie on the current domain         await driver.manage().addCookie({ name: 'foo', value: 'bar' });              // Get cookie details with named cookie 'foo'         await driver.manage().getCookie('foo').then(function(cookie) {           assert.equal(cookie.value, 'bar');         });       });            it('Read all cookies', async function() {         await driver.get('https://www.selenium.dev/selenium/web/blank.html');              // Add few cookies         await driver.manage().addCookie({ name: 'test1', value: 'cookie1' });         await driver.manage().addCookie({ name: 'test2', value: 'cookie2' });              // Get all Available cookies         await driver.manage().getCookies().then(function(cookies) {           assert.equal(cookies.filter(cookie => cookie.name.startsWith('test')).length, 2);         });       });            it('Delete a cookie', async function() {         await driver.get('https://www.selenium.dev/selenium/web/blank.html');              // Add few cookies         await driver.manage().addCookie({ name: 'test1', value: 'cookie1' });         await driver.manage().addCookie({ name: 'test2', value: 'cookie2' });              // Delete a cookie with name 'test1'         await driver.manage().deleteCookie('test1');              // Get all Available cookies         await driver.manage().getCookies().then(function(cookies) {           assert.equal(cookies.filter(cookie => cookie.name.startsWith('test')).length, 1);         });       });            it('Delete all cookies', async function() {         await driver.get('https://www.selenium.dev/selenium/web/blank.html');              // Add few cookies         await driver.manage().addCookie({ name: 'test1', value: 'cookie1' });         await driver.manage().addCookie({ name: 'test2', value: 'cookie2' });              // Delete all cookies         await driver.manage().deleteAllCookies();       });     });                    import org.openqa.selenium.Cookie     import org.openqa.selenium.chrome.ChromeDriver          fun main() {         val driver = ChromeDriver()         try {             driver.get("https://example.com")             driver.manage().addCookie(Cookie("test1", "cookie1"))             driver.manage().addCookie(Cookie("test2", "cookie2"))                  // Get All available cookies             val cookies = driver.manage().cookies             println(cookies)         } finally {             driver.quit()         }     }         

## Delete Cookie

It deletes the cookie data matching with the provided cookie name.

[Move Code](https://www.selenium.dev/documentation/about/contributing/#moving-examples)

  * Java   * Python   * CSharp   * Ruby   * JavaScript   * Kotlin

              	        driver.get("https://www.selenium.dev/selenium/web/blank.html");     	        driver.manage().addCookie(new Cookie("test1", "cookie1"));     	        // delete cookie named     	        driver.manage().deleteCookieNamed("test1");

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/java/src/test/java/dev/selenium/interactions/CookiesTest.java#L74-L77)

##### examples/java/src/test/java/dev/selenium/interactions/CookiesTest.java

Copy  Close               // Licensed to the Software Freedom Conservancy (SFC) under one     // or more contributor license agreements.  See the NOTICE file     // distributed with this work for additional information     // regarding copyright ownership.  The SFC licenses this file     // to you under the Apache License, Version 2.0 (the     // "License"); you may not use this file except in compliance     // with the License.  You may obtain a copy of the License at     //     //   http://www.apache.org/licenses/LICENSE-2.0     //     // Unless required by applicable law or agreed to in writing,     // software distributed under the License is distributed on an     // "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY     // KIND, either express or implied.  See the License for the     // specific language governing permissions and limitations     // under the License.          import org.junit.jupiter.api.Test;     import org.junit.jupiter.api.Assertions;     import org.openqa.selenium.Cookie;     import org.openqa.selenium.WebDriver;     import org.openqa.selenium.chrome.ChromeDriver;     import java.util.Set;          public class CookiesTest {          	WebDriver driver = new ChromeDriver();     	@Test     	  public void addCookie() {     	      driver.get("https://www.selenium.dev/selenium/web/blank.html");     	      // Add cookie into current browser context     	      driver.manage().addCookie(new Cookie("key", "value"));     	      driver.quit();     	}     	    @Test     	    public void getNamedCookie() {     	          	        driver.get("https://www.selenium.dev/selenium/web/blank.html");     	        // Add cookie into current browser context     	        driver.manage().addCookie(new Cookie("foo", "bar"));     	        // Get cookie details with named cookie 'foo'     	        Cookie cookie = driver.manage().getCookieNamed("foo");     	        Assertions.assertEquals(cookie.getValue(), "bar");     	          	        driver.quit();     	      }     	            	    @Test     	    public void getAllCookies() {     	           	        driver.get("https://www.selenium.dev/selenium/web/blank.html");     	        // Add cookies into current browser context     	        driver.manage().addCookie(new Cookie("test1", "cookie1"));     	        driver.manage().addCookie(new Cookie("test2", "cookie2"));     	        // Get cookies     	        Set<Cookie> cookies = driver.manage().getCookies();     	         for (Cookie cookie : cookies) {     	            if (cookie.getName().equals("test1")) {     	                Assertions.assertEquals(cookie.getValue(), "cookie1");     	            }          	            if (cookie.getName().equals("test2")) {     	                Assertions.assertEquals(cookie.getValue(), "cookie2");     	            }     	         }     	         driver.quit();     	      }     	             	    @Test     	    public void deleteCookieNamed() {     	          	        driver.get("https://www.selenium.dev/selenium/web/blank.html");     	        driver.manage().addCookie(new Cookie("test1", "cookie1"));     	        // delete cookie named     	        driver.manage().deleteCookieNamed("test1");     	        driver.quit();     	    }          	    @Test     	    public void deleteCookieObject() {     	          	        driver.get("https://www.selenium.dev/selenium/web/blank.html");     	        Cookie cookie = new Cookie("test2", "cookie2");     	        driver.manage().addCookie(cookie);     	        /*     	        Selenium Java bindings also provides a way to delete     	        cookie by passing cookie object of current browsing context     	        */     	        driver.manage().deleteCookie(cookie);     	           	        driver.quit();     	      }     	            	    @Test     	    public void deleteAllCookies() {     	          	        driver.get("https://www.selenium.dev/selenium/web/blank.html");     	        // Add cookies into current browser context     	        driver.manage().addCookie(new Cookie("test1", "cookie1"));     	        driver.manage().addCookie(new Cookie("test2", "cookie2"));     	        // Delete All cookies     	        driver.manage().deleteAllCookies();     	          	        driver.quit();     	      }          		  @Test     		  public void sameSiteCookie() {     		    driver.get("http://www.example.com");               	    Cookie cookie = new Cookie.Builder("key", "value").sameSite("Strict").build();                 Cookie cookie1 = new Cookie.Builder("key", "value").sameSite("Lax").build();                      driver.manage().addCookie(cookie);                 driver.manage().addCookie(cookie1);                      System.out.println(cookie.getSameSite());                 System.out.println(cookie1.getSameSite());          			driver.quit();     		  }     }                        driver = webdriver.Chrome()              driver.get("http://www.example.com")              driver.add_cookie({"name": "test1", "value": "cookie1"})         driver.add_cookie({"name": "test2", "value": "cookie2"})              # Delete cookie with name 'test1'         driver.delete_cookie("test1")

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/python/tests/interactions/test_cookies.py#L35-L43)

##### examples/python/tests/interactions/test\_cookies.py

Copy  Close               from selenium import webdriver               def test_add_cookie():         driver = webdriver.Chrome()         driver.get("http://www.example.com")              # Adds the cookie into current browser context         driver.add_cookie({"name": "key", "value": "value"})               def test_get_named_cookie():         driver = webdriver.Chrome()         driver.get("http://www.example.com")              # Adds the cookie into current browser context         driver.add_cookie({"name": "foo", "value": "bar"})              # Get cookie details with named cookie 'foo'         print(driver.get_cookie("foo"))               def test_get_all_cookies():         driver = webdriver.Chrome()              driver.get("http://www.example.com")              driver.add_cookie({"name": "test1", "value": "cookie1"})         driver.add_cookie({"name": "test2", "value": "cookie2"})              # Get all available cookies         print(driver.get_cookies())          def test_delete_cookie():         driver = webdriver.Chrome()              driver.get("http://www.example.com")              driver.add_cookie({"name": "test1", "value": "cookie1"})         driver.add_cookie({"name": "test2", "value": "cookie2"})              # Delete cookie with name 'test1'         driver.delete_cookie("test1")               def test_delete_all_cookies():         driver = webdriver.Chrome()              driver.get("http://www.example.com")              driver.add_cookie({"name": "test1", "value": "cookie1"})         driver.add_cookie({"name": "test2", "value": "cookie2"})              # Delete all cookies         driver.delete_all_cookies()               def test_same_side_cookie_attr():         driver = webdriver.Chrome()              driver.get("http://www.example.com")              # Adds the cookie into current browser context with sameSite 'Strict' (or) 'Lax'         driver.add_cookie({"name": "foo", "value": "value", "sameSite": "Strict"})         driver.add_cookie({"name": "foo1", "value": "value", "sameSite": "Lax"})              cookie1 = driver.get_cookie("foo")         cookie2 = driver.get_cookie("foo1")              print(cookie1)         print(cookie2)                             driver.Url = "https://www.selenium.dev/selenium/web/blank.html";              driver.Manage().Cookies.AddCookie(new Cookie("test1", "cookie1"));              // delete cookie named              driver.Manage().Cookies.DeleteCookieNamed("test1");

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/dotnet/SeleniumDocs/Interactions/CookiesTest.cs#L70-L73)

##### examples/dotnet/SeleniumDocs/Interactions/CookiesTest.cs

Copy  Close               // Licensed to the Software Freedom Conservancy (SFC) under one     // or more contributor license agreements.  See the NOTICE file     // distributed with this work for additional information     // regarding copyright ownership.  The SFC licenses this file     // to you under the Apache License, Version 2.0 (the     // "License"); you may not use this file except in compliance     // with the License.  You may obtain a copy of the License at     //     //   http://www.apache.org/licenses/LICENSE-2.0     //     // Unless required by applicable law or agreed to in writing,     // software distributed under the License is distributed on an     // "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY     // KIND, either express or implied.  See the License for the     // specific language governing permissions and limitations     // under the License.          using System;     using Microsoft.VisualStudio.TestTools.UnitTesting;     using OpenQA.Selenium;     using OpenQA.Selenium.Chrome;          namespace SeleniumDocs.Interactions{          [TestClass]     public class CookiesTest{                   WebDriver driver = new ChromeDriver();               [TestMethod]           public void addCookie(){              driver.Url="https://www.selenium.dev/selenium/web/blank.html";              // Add cookie into current browser context              driver.Manage().Cookies.AddCookie(new Cookie("key", "value"));              driver.Quit();          }                    [TestMethod]          public void getNamedCookie(){                driver.Url = "https://www.selenium.dev/selenium/web/blank.html";              // Add cookie into current browser context              driver.Manage().Cookies.AddCookie(new Cookie("foo", "bar"));              // Get cookie details with named cookie 'foo'              Cookie cookie = driver.Manage().Cookies.GetCookieNamed("foo");              Assert.AreEqual(cookie.Value, "bar");              driver.Quit();          }               [TestMethod]          public void getAllCookies(){              driver.Url = "https://www.selenium.dev/selenium/web/blank.html";              // Add cookies into current browser context              driver.Manage().Cookies.AddCookie(new Cookie("test1", "cookie1"));              driver.Manage().Cookies.AddCookie(new Cookie("test2", "cookie2"));              // Get cookies              var cookies = driver.Manage().Cookies.AllCookies;              foreach (var cookie in cookies){                  if (cookie.Name.Equals("test1")){                      Assert.AreEqual("cookie1", cookie.Value);                  }                  if (cookie.Name.Equals("test2")){                      Assert.AreEqual("cookie2", cookie.Value);                  }              }              driver.Quit();          }                    [TestMethod]          public void deleteCookieNamed(){              driver.Url = "https://www.selenium.dev/selenium/web/blank.html";              driver.Manage().Cookies.AddCookie(new Cookie("test1", "cookie1"));              // delete cookie named              driver.Manage().Cookies.DeleteCookieNamed("test1");              driver.Quit();          }               [TestMethod]          public void deleteCookieObject(){              driver.Url = "https://www.selenium.dev/selenium/web/blank.html";              Cookie cookie = new Cookie("test2", "cookie2");              driver.Manage().Cookies.AddCookie(cookie);              /*           Selenium CSharp bindings also provides a way to delete           cookie by passing cookie object of current browsing context           */              driver.Manage().Cookies.DeleteCookie(cookie);              driver.Quit();          }                    [TestMethod]          public void deleteAllCookies(){              driver.Url = "https://www.selenium.dev/selenium/web/blank.html";              // Add cookies into current browser context              driver.Manage().Cookies.AddCookie(new Cookie("test1", "cookie1"));              driver.Manage().Cookies.AddCookie(new Cookie("test2", "cookie2"));              // Delete All cookies              driver.Manage().Cookies.DeleteAllCookies();              driver.Quit();          }         }     }                   driver.navigate.to 'https://www.selenium.dev/selenium/web/blank.html'         driver.manage.add_cookie(name: 'test1', value: 'cookie1')         # Delete cookie named         driver.manage.delete_cookie('test1')

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/ruby/spec/interactions/cookies_spec.rb#L40-L43)

##### examples/ruby/spec/interactions/cookies\_spec.rb

Copy  Close               # frozen_string_literal: true          require 'spec_helper'          RSpec.describe 'Cookies' do       let(:driver) { start_session }            it 'adds a cookie' do         driver.navigate.to 'https://www.selenium.dev/selenium/web/blank.html'         # Add cookie into current browser context         driver.manage.add_cookie(name: 'key', value: 'value')         # Verify cookie was added         expect(driver.manage.cookie_named('key')[:value]).to eq('value')       end            it 'gets a named cookie' do         driver.navigate.to 'https://www.selenium.dev/selenium/web/blank.html'         # Add cookie into current browser context         driver.manage.add_cookie(name: 'foo', value: 'bar')         # Get cookie details with named cookie 'foo'         cookie = driver.manage.cookie_named('foo')         expect(cookie[:value]).to eq('bar')       end            it 'gets all cookies' do         driver.navigate.to 'https://www.selenium.dev/selenium/web/blank.html'         # Add cookies into current browser context         driver.manage.add_cookie(name: 'test1', value: 'cookie1')         driver.manage.add_cookie(name: 'test2', value: 'cookie2')         # Get cookies         cookies = driver.manage.all_cookies         # Verify both cookies exist with correct values         test1_cookie = cookies.find { |c| c[:name] == 'test1' }         test2_cookie = cookies.find { |c| c[:name] == 'test2' }         expect(test1_cookie[:value]).to eq('cookie1')         expect(test2_cookie[:value]).to eq('cookie2')       end            it 'deletes a cookie by name' do         driver.navigate.to 'https://www.selenium.dev/selenium/web/blank.html'         driver.manage.add_cookie(name: 'test1', value: 'cookie1')         # Delete cookie named         driver.manage.delete_cookie('test1')         # Verify cookie is deleted         expect { driver.manage.cookie_named('test1') }.to raise_error(Selenium::WebDriver::Error::NoSuchCookieError)       end            it 'deletes all cookies' do         driver.navigate.to 'https://www.selenium.dev/selenium/web/blank.html'         # Add cookies into current browser context         driver.manage.add_cookie(name: 'test1', value: 'cookie1')         driver.manage.add_cookie(name: 'test2', value: 'cookie2')         # Delete All cookies         driver.manage.delete_all_cookies         # Verify all cookies are deleted         expect(driver.manage.all_cookies.size).to eq(0)       end     end                        await driver.manage().addCookie({ name: 'test1', value: 'cookie1' });         await driver.manage().addCookie({ name: 'test2', value: 'cookie2' });

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk//examples/javascript/test/interactions/cookies.spec.js#L61-L62)

##### /examples/javascript/test/interactions/cookies.spec.js

Copy  Close               const {Browser, Builder} = require("selenium-webdriver");     const assert = require('assert')               describe('Cookies', function() {       let driver;            before(async function() {         driver = new Builder()           .forBrowser(Browser.CHROME)           .build();       });            after(async () => await driver.quit());            it('Create a cookie', async function() {         await driver.get('https://www.selenium.dev/selenium/web/blank.html');              // set a cookie on the current domain         await driver.manage().addCookie({ name: 'key', value: 'value' });       });            it('Create cookies with sameSite', async function() {         await driver.get('https://www.selenium.dev/selenium/web/blank.html');              // set a cookie on the current domain with sameSite 'Strict' (or) 'Lax'         await driver.manage().addCookie({ name: 'key', value: 'value', sameSite: 'Strict' });         await driver.manage().addCookie({ name: 'key', value: 'value', sameSite: 'Lax' });       });            it('Read cookie', async function() {         await driver.get('https://www.selenium.dev/selenium/web/blank.html');              // set a cookie on the current domain         await driver.manage().addCookie({ name: 'foo', value: 'bar' });              // Get cookie details with named cookie 'foo'         await driver.manage().getCookie('foo').then(function(cookie) {           assert.equal(cookie.value, 'bar');         });       });            it('Read all cookies', async function() {         await driver.get('https://www.selenium.dev/selenium/web/blank.html');              // Add few cookies         await driver.manage().addCookie({ name: 'test1', value: 'cookie1' });         await driver.manage().addCookie({ name: 'test2', value: 'cookie2' });              // Get all Available cookies         await driver.manage().getCookies().then(function(cookies) {           assert.equal(cookies.filter(cookie => cookie.name.startsWith('test')).length, 2);         });       });            it('Delete a cookie', async function() {         await driver.get('https://www.selenium.dev/selenium/web/blank.html');              // Add few cookies         await driver.manage().addCookie({ name: 'test1', value: 'cookie1' });         await driver.manage().addCookie({ name: 'test2', value: 'cookie2' });              // Delete a cookie with name 'test1'         await driver.manage().deleteCookie('test1');              // Get all Available cookies         await driver.manage().getCookies().then(function(cookies) {           assert.equal(cookies.filter(cookie => cookie.name.startsWith('test')).length, 1);         });       });            it('Delete all cookies', async function() {         await driver.get('https://www.selenium.dev/selenium/web/blank.html');              // Add few cookies         await driver.manage().addCookie({ name: 'test1', value: 'cookie1' });         await driver.manage().addCookie({ name: 'test2', value: 'cookie2' });              // Delete all cookies         await driver.manage().deleteAllCookies();       });     });                    import org.openqa.selenium.Cookie     import org.openqa.selenium.chrome.ChromeDriver          fun main() {         val driver = ChromeDriver()         try {             driver.get("https://example.com")             driver.manage().addCookie(Cookie("test1", "cookie1"))             val cookie1 = Cookie("test2", "cookie2")             driver.manage().addCookie(cookie1)                  // delete a cookie with name 'test1'             driver.manage().deleteCookieNamed("test1")                          // delete cookie by passing cookie object of current browsing context.             driver.manage().deleteCookie(cookie1)         } finally {             driver.quit()         }     }         

## Delete All Cookies

It deletes all the cookies of the current browsing context.

[Move Code](https://www.selenium.dev/documentation/about/contributing/#moving-examples)

  * Java   * Python   * CSharp   * Ruby   * JavaScript   * Kotlin

              	        driver.get("https://www.selenium.dev/selenium/web/blank.html");     	        // Add cookies into current browser context     	        driver.manage().addCookie(new Cookie("test1", "cookie1"));     	        driver.manage().addCookie(new Cookie("test2", "cookie2"));     	        // Delete All cookies     	        driver.manage().deleteAllCookies();

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/java/src/test/java/dev/selenium/interactions/CookiesTest.java#L100-L105)

##### examples/java/src/test/java/dev/selenium/interactions/CookiesTest.java

Copy  Close               // Licensed to the Software Freedom Conservancy (SFC) under one     // or more contributor license agreements.  See the NOTICE file     // distributed with this work for additional information     // regarding copyright ownership.  The SFC licenses this file     // to you under the Apache License, Version 2.0 (the     // "License"); you may not use this file except in compliance     // with the License.  You may obtain a copy of the License at     //     //   http://www.apache.org/licenses/LICENSE-2.0     //     // Unless required by applicable law or agreed to in writing,     // software distributed under the License is distributed on an     // "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY     // KIND, either express or implied.  See the License for the     // specific language governing permissions and limitations     // under the License.          import org.junit.jupiter.api.Test;     import org.junit.jupiter.api.Assertions;     import org.openqa.selenium.Cookie;     import org.openqa.selenium.WebDriver;     import org.openqa.selenium.chrome.ChromeDriver;     import java.util.Set;          public class CookiesTest {          	WebDriver driver = new ChromeDriver();     	@Test     	  public void addCookie() {     	      driver.get("https://www.selenium.dev/selenium/web/blank.html");     	      // Add cookie into current browser context     	      driver.manage().addCookie(new Cookie("key", "value"));     	      driver.quit();     	}     	    @Test     	    public void getNamedCookie() {     	          	        driver.get("https://www.selenium.dev/selenium/web/blank.html");     	        // Add cookie into current browser context     	        driver.manage().addCookie(new Cookie("foo", "bar"));     	        // Get cookie details with named cookie 'foo'     	        Cookie cookie = driver.manage().getCookieNamed("foo");     	        Assertions.assertEquals(cookie.getValue(), "bar");     	          	        driver.quit();     	      }     	            	    @Test     	    public void getAllCookies() {     	           	        driver.get("https://www.selenium.dev/selenium/web/blank.html");     	        // Add cookies into current browser context     	        driver.manage().addCookie(new Cookie("test1", "cookie1"));     	        driver.manage().addCookie(new Cookie("test2", "cookie2"));     	        // Get cookies     	        Set<Cookie> cookies = driver.manage().getCookies();     	         for (Cookie cookie : cookies) {     	            if (cookie.getName().equals("test1")) {     	                Assertions.assertEquals(cookie.getValue(), "cookie1");     	            }          	            if (cookie.getName().equals("test2")) {     	                Assertions.assertEquals(cookie.getValue(), "cookie2");     	            }     	         }     	         driver.quit();     	      }     	             	    @Test     	    public void deleteCookieNamed() {     	          	        driver.get("https://www.selenium.dev/selenium/web/blank.html");     	        driver.manage().addCookie(new Cookie("test1", "cookie1"));     	        // delete cookie named     	        driver.manage().deleteCookieNamed("test1");     	        driver.quit();     	    }          	    @Test     	    public void deleteCookieObject() {     	          	        driver.get("https://www.selenium.dev/selenium/web/blank.html");     	        Cookie cookie = new Cookie("test2", "cookie2");     	        driver.manage().addCookie(cookie);     	        /*     	        Selenium Java bindings also provides a way to delete     	        cookie by passing cookie object of current browsing context     	        */     	        driver.manage().deleteCookie(cookie);     	           	        driver.quit();     	      }     	            	    @Test     	    public void deleteAllCookies() {     	          	        driver.get("https://www.selenium.dev/selenium/web/blank.html");     	        // Add cookies into current browser context     	        driver.manage().addCookie(new Cookie("test1", "cookie1"));     	        driver.manage().addCookie(new Cookie("test2", "cookie2"));     	        // Delete All cookies     	        driver.manage().deleteAllCookies();     	          	        driver.quit();     	      }          		  @Test     		  public void sameSiteCookie() {     		    driver.get("http://www.example.com");               	    Cookie cookie = new Cookie.Builder("key", "value").sameSite("Strict").build();                 Cookie cookie1 = new Cookie.Builder("key", "value").sameSite("Lax").build();                      driver.manage().addCookie(cookie);                 driver.manage().addCookie(cookie1);                      System.out.println(cookie.getSameSite());                 System.out.println(cookie1.getSameSite());          			driver.quit();     		  }     }                        driver = webdriver.Chrome()              driver.get("http://www.example.com")              driver.add_cookie({"name": "test1", "value": "cookie1"})         driver.add_cookie({"name": "test2", "value": "cookie2"})              # Delete all cookies         driver.delete_all_cookies()

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/python/tests/interactions/test_cookies.py#L47-L55)

##### examples/python/tests/interactions/test\_cookies.py

Copy  Close               from selenium import webdriver               def test_add_cookie():         driver = webdriver.Chrome()         driver.get("http://www.example.com")              # Adds the cookie into current browser context         driver.add_cookie({"name": "key", "value": "value"})               def test_get_named_cookie():         driver = webdriver.Chrome()         driver.get("http://www.example.com")              # Adds the cookie into current browser context         driver.add_cookie({"name": "foo", "value": "bar"})              # Get cookie details with named cookie 'foo'         print(driver.get_cookie("foo"))               def test_get_all_cookies():         driver = webdriver.Chrome()              driver.get("http://www.example.com")              driver.add_cookie({"name": "test1", "value": "cookie1"})         driver.add_cookie({"name": "test2", "value": "cookie2"})              # Get all available cookies         print(driver.get_cookies())          def test_delete_cookie():         driver = webdriver.Chrome()              driver.get("http://www.example.com")              driver.add_cookie({"name": "test1", "value": "cookie1"})         driver.add_cookie({"name": "test2", "value": "cookie2"})              # Delete cookie with name 'test1'         driver.delete_cookie("test1")               def test_delete_all_cookies():         driver = webdriver.Chrome()              driver.get("http://www.example.com")              driver.add_cookie({"name": "test1", "value": "cookie1"})         driver.add_cookie({"name": "test2", "value": "cookie2"})              # Delete all cookies         driver.delete_all_cookies()               def test_same_side_cookie_attr():         driver = webdriver.Chrome()              driver.get("http://www.example.com")              # Adds the cookie into current browser context with sameSite 'Strict' (or) 'Lax'         driver.add_cookie({"name": "foo", "value": "value", "sameSite": "Strict"})         driver.add_cookie({"name": "foo1", "value": "value", "sameSite": "Lax"})              cookie1 = driver.get_cookie("foo")         cookie2 = driver.get_cookie("foo1")              print(cookie1)         print(cookie2)                             driver.Url = "https://www.selenium.dev/selenium/web/blank.html";              // Add cookies into current browser context              driver.Manage().Cookies.AddCookie(new Cookie("test1", "cookie1"));              driver.Manage().Cookies.AddCookie(new Cookie("test2", "cookie2"));              // Delete All cookies              driver.Manage().Cookies.DeleteAllCookies();

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/dotnet/SeleniumDocs/Interactions/CookiesTest.cs#L92-L97)

##### examples/dotnet/SeleniumDocs/Interactions/CookiesTest.cs

Copy  Close               // Licensed to the Software Freedom Conservancy (SFC) under one     // or more contributor license agreements.  See the NOTICE file     // distributed with this work for additional information     // regarding copyright ownership.  The SFC licenses this file     // to you under the Apache License, Version 2.0 (the     // "License"); you may not use this file except in compliance     // with the License.  You may obtain a copy of the License at     //     //   http://www.apache.org/licenses/LICENSE-2.0     //     // Unless required by applicable law or agreed to in writing,     // software distributed under the License is distributed on an     // "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY     // KIND, either express or implied.  See the License for the     // specific language governing permissions and limitations     // under the License.          using System;     using Microsoft.VisualStudio.TestTools.UnitTesting;     using OpenQA.Selenium;     using OpenQA.Selenium.Chrome;          namespace SeleniumDocs.Interactions{          [TestClass]     public class CookiesTest{                   WebDriver driver = new ChromeDriver();               [TestMethod]           public void addCookie(){              driver.Url="https://www.selenium.dev/selenium/web/blank.html";              // Add cookie into current browser context              driver.Manage().Cookies.AddCookie(new Cookie("key", "value"));              driver.Quit();          }                    [TestMethod]          public void getNamedCookie(){                driver.Url = "https://www.selenium.dev/selenium/web/blank.html";              // Add cookie into current browser context              driver.Manage().Cookies.AddCookie(new Cookie("foo", "bar"));              // Get cookie details with named cookie 'foo'              Cookie cookie = driver.Manage().Cookies.GetCookieNamed("foo");              Assert.AreEqual(cookie.Value, "bar");              driver.Quit();          }               [TestMethod]          public void getAllCookies(){              driver.Url = "https://www.selenium.dev/selenium/web/blank.html";              // Add cookies into current browser context              driver.Manage().Cookies.AddCookie(new Cookie("test1", "cookie1"));              driver.Manage().Cookies.AddCookie(new Cookie("test2", "cookie2"));              // Get cookies              var cookies = driver.Manage().Cookies.AllCookies;              foreach (var cookie in cookies){                  if (cookie.Name.Equals("test1")){                      Assert.AreEqual("cookie1", cookie.Value);                  }                  if (cookie.Name.Equals("test2")){                      Assert.AreEqual("cookie2", cookie.Value);                  }              }              driver.Quit();          }                    [TestMethod]          public void deleteCookieNamed(){              driver.Url = "https://www.selenium.dev/selenium/web/blank.html";              driver.Manage().Cookies.AddCookie(new Cookie("test1", "cookie1"));              // delete cookie named              driver.Manage().Cookies.DeleteCookieNamed("test1");              driver.Quit();          }               [TestMethod]          public void deleteCookieObject(){              driver.Url = "https://www.selenium.dev/selenium/web/blank.html";              Cookie cookie = new Cookie("test2", "cookie2");              driver.Manage().Cookies.AddCookie(cookie);              /*           Selenium CSharp bindings also provides a way to delete           cookie by passing cookie object of current browsing context           */              driver.Manage().Cookies.DeleteCookie(cookie);              driver.Quit();          }                    [TestMethod]          public void deleteAllCookies(){              driver.Url = "https://www.selenium.dev/selenium/web/blank.html";              // Add cookies into current browser context              driver.Manage().Cookies.AddCookie(new Cookie("test1", "cookie1"));              driver.Manage().Cookies.AddCookie(new Cookie("test2", "cookie2"));              // Delete All cookies              driver.Manage().Cookies.DeleteAllCookies();              driver.Quit();          }         }     }                   driver.navigate.to 'https://www.selenium.dev/selenium/web/blank.html'         # Add cookies into current browser context         driver.manage.add_cookie(name: 'test1', value: 'cookie1')         driver.manage.add_cookie(name: 'test2', value: 'cookie2')         # Delete All cookies         driver.manage.delete_all_cookies

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/ruby/spec/interactions/cookies_spec.rb#L49-L54)

##### examples/ruby/spec/interactions/cookies\_spec.rb

Copy  Close               # frozen_string_literal: true          require 'spec_helper'          RSpec.describe 'Cookies' do       let(:driver) { start_session }            it 'adds a cookie' do         driver.navigate.to 'https://www.selenium.dev/selenium/web/blank.html'         # Add cookie into current browser context         driver.manage.add_cookie(name: 'key', value: 'value')         # Verify cookie was added         expect(driver.manage.cookie_named('key')[:value]).to eq('value')       end            it 'gets a named cookie' do         driver.navigate.to 'https://www.selenium.dev/selenium/web/blank.html'         # Add cookie into current browser context         driver.manage.add_cookie(name: 'foo', value: 'bar')         # Get cookie details with named cookie 'foo'         cookie = driver.manage.cookie_named('foo')         expect(cookie[:value]).to eq('bar')       end            it 'gets all cookies' do         driver.navigate.to 'https://www.selenium.dev/selenium/web/blank.html'         # Add cookies into current browser context         driver.manage.add_cookie(name: 'test1', value: 'cookie1')         driver.manage.add_cookie(name: 'test2', value: 'cookie2')         # Get cookies         cookies = driver.manage.all_cookies         # Verify both cookies exist with correct values         test1_cookie = cookies.find { |c| c[:name] == 'test1' }         test2_cookie = cookies.find { |c| c[:name] == 'test2' }         expect(test1_cookie[:value]).to eq('cookie1')         expect(test2_cookie[:value]).to eq('cookie2')       end            it 'deletes a cookie by name' do         driver.navigate.to 'https://www.selenium.dev/selenium/web/blank.html'         driver.manage.add_cookie(name: 'test1', value: 'cookie1')         # Delete cookie named         driver.manage.delete_cookie('test1')         # Verify cookie is deleted         expect { driver.manage.cookie_named('test1') }.to raise_error(Selenium::WebDriver::Error::NoSuchCookieError)       end            it 'deletes all cookies' do         driver.navigate.to 'https://www.selenium.dev/selenium/web/blank.html'         # Add cookies into current browser context         driver.manage.add_cookie(name: 'test1', value: 'cookie1')         driver.manage.add_cookie(name: 'test2', value: 'cookie2')         # Delete All cookies         driver.manage.delete_all_cookies         # Verify all cookies are deleted         expect(driver.manage.all_cookies.size).to eq(0)       end     end                        await driver.manage().addCookie({ name: 'test1', value: 'cookie1' });         await driver.manage().addCookie({ name: 'test2', value: 'cookie2' });

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk//examples/javascript/test/interactions/cookies.spec.js#L77-L78)

##### /examples/javascript/test/interactions/cookies.spec.js

Copy  Close               const {Browser, Builder} = require("selenium-webdriver");     const assert = require('assert')               describe('Cookies', function() {       let driver;            before(async function() {         driver = new Builder()           .forBrowser(Browser.CHROME)           .build();       });            after(async () => await driver.quit());            it('Create a cookie', async function() {         await driver.get('https://www.selenium.dev/selenium/web/blank.html');              // set a cookie on the current domain         await driver.manage().addCookie({ name: 'key', value: 'value' });       });            it('Create cookies with sameSite', async function() {         await driver.get('https://www.selenium.dev/selenium/web/blank.html');              // set a cookie on the current domain with sameSite 'Strict' (or) 'Lax'         await driver.manage().addCookie({ name: 'key', value: 'value', sameSite: 'Strict' });         await driver.manage().addCookie({ name: 'key', value: 'value', sameSite: 'Lax' });       });            it('Read cookie', async function() {         await driver.get('https://www.selenium.dev/selenium/web/blank.html');              // set a cookie on the current domain         await driver.manage().addCookie({ name: 'foo', value: 'bar' });              // Get cookie details with named cookie 'foo'         await driver.manage().getCookie('foo').then(function(cookie) {           assert.equal(cookie.value, 'bar');         });       });            it('Read all cookies', async function() {         await driver.get('https://www.selenium.dev/selenium/web/blank.html');              // Add few cookies         await driver.manage().addCookie({ name: 'test1', value: 'cookie1' });         await driver.manage().addCookie({ name: 'test2', value: 'cookie2' });              // Get all Available cookies         await driver.manage().getCookies().then(function(cookies) {           assert.equal(cookies.filter(cookie => cookie.name.startsWith('test')).length, 2);         });       });            it('Delete a cookie', async function() {         await driver.get('https://www.selenium.dev/selenium/web/blank.html');              // Add few cookies         await driver.manage().addCookie({ name: 'test1', value: 'cookie1' });         await driver.manage().addCookie({ name: 'test2', value: 'cookie2' });              // Delete a cookie with name 'test1'         await driver.manage().deleteCookie('test1');              // Get all Available cookies         await driver.manage().getCookies().then(function(cookies) {           assert.equal(cookies.filter(cookie => cookie.name.startsWith('test')).length, 1);         });       });            it('Delete all cookies', async function() {         await driver.get('https://www.selenium.dev/selenium/web/blank.html');              // Add few cookies         await driver.manage().addCookie({ name: 'test1', value: 'cookie1' });         await driver.manage().addCookie({ name: 'test2', value: 'cookie2' });              // Delete all cookies         await driver.manage().deleteAllCookies();       });     });                    import org.openqa.selenium.Cookie     import org.openqa.selenium.chrome.ChromeDriver          fun main() {         val driver = ChromeDriver()         try {             driver.get("https://example.com")             driver.manage().addCookie(Cookie("test1", "cookie1"))             driver.manage().addCookie(Cookie("test2", "cookie2"))                  // deletes all cookies             driver.manage().deleteAllCookies()         } finally {             driver.quit()         }     }         

## Same-Site Cookie Attribute

It allows a user to instruct browsers to control whether cookies are sent along with the request initiated by third party sites. It is introduced to prevent CSRF \(Cross-Site Request Forgery\) attacks.

Same-Site cookie attribute accepts two parameters as instructions

## Strict:

When the sameSite attribute is set as **Strict** , the cookie will not be sent along with requests initiated by third party websites.

## Lax:

When you set a cookie sameSite attribute to **Lax** , the cookie will be sent along with the GET request initiated by third party website.

**Note** : **As of now this feature is landed in chrome\(80+version\), Firefox\(79+version\) and works with Selenium 4 and later versions.**

[ Move Code](https://www.selenium.dev/documentation/about/contributing/#moving-examples)

  * Java   * Python   * CSharp   * Ruby   * JavaScript   * Kotlin

              		    driver.get("http://www.example.com");               	    Cookie cookie = new Cookie.Builder("key", "value").sameSite("Strict").build();                 Cookie cookie1 = new Cookie.Builder("key", "value").sameSite("Lax").build();                      driver.manage().addCookie(cookie);                 driver.manage().addCookie(cookie1);                      System.out.println(cookie.getSameSite());                 System.out.println(cookie1.getSameSite());

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/java/src/test/java/dev/selenium/interactions/CookiesTest.java#L112-L121)

##### examples/java/src/test/java/dev/selenium/interactions/CookiesTest.java

Copy  Close               // Licensed to the Software Freedom Conservancy (SFC) under one     // or more contributor license agreements.  See the NOTICE file     // distributed with this work for additional information     // regarding copyright ownership.  The SFC licenses this file     // to you under the Apache License, Version 2.0 (the     // "License"); you may not use this file except in compliance     // with the License.  You may obtain a copy of the License at     //     //   http://www.apache.org/licenses/LICENSE-2.0     //     // Unless required by applicable law or agreed to in writing,     // software distributed under the License is distributed on an     // "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY     // KIND, either express or implied.  See the License for the     // specific language governing permissions and limitations     // under the License.          import org.junit.jupiter.api.Test;     import org.junit.jupiter.api.Assertions;     import org.openqa.selenium.Cookie;     import org.openqa.selenium.WebDriver;     import org.openqa.selenium.chrome.ChromeDriver;     import java.util.Set;          public class CookiesTest {          	WebDriver driver = new ChromeDriver();     	@Test     	  public void addCookie() {     	      driver.get("https://www.selenium.dev/selenium/web/blank.html");     	      // Add cookie into current browser context     	      driver.manage().addCookie(new Cookie("key", "value"));     	      driver.quit();     	}     	    @Test     	    public void getNamedCookie() {     	          	        driver.get("https://www.selenium.dev/selenium/web/blank.html");     	        // Add cookie into current browser context     	        driver.manage().addCookie(new Cookie("foo", "bar"));     	        // Get cookie details with named cookie 'foo'     	        Cookie cookie = driver.manage().getCookieNamed("foo");     	        Assertions.assertEquals(cookie.getValue(), "bar");     	          	        driver.quit();     	      }     	            	    @Test     	    public void getAllCookies() {     	           	        driver.get("https://www.selenium.dev/selenium/web/blank.html");     	        // Add cookies into current browser context     	        driver.manage().addCookie(new Cookie("test1", "cookie1"));     	        driver.manage().addCookie(new Cookie("test2", "cookie2"));     	        // Get cookies     	        Set<Cookie> cookies = driver.manage().getCookies();     	         for (Cookie cookie : cookies) {     	            if (cookie.getName().equals("test1")) {     	                Assertions.assertEquals(cookie.getValue(), "cookie1");     	            }          	            if (cookie.getName().equals("test2")) {     	                Assertions.assertEquals(cookie.getValue(), "cookie2");     	            }     	         }     	         driver.quit();     	      }     	             	    @Test     	    public void deleteCookieNamed() {     	          	        driver.get("https://www.selenium.dev/selenium/web/blank.html");     	        driver.manage().addCookie(new Cookie("test1", "cookie1"));     	        // delete cookie named     	        driver.manage().deleteCookieNamed("test1");     	        driver.quit();     	    }          	    @Test     	    public void deleteCookieObject() {     	          	        driver.get("https://www.selenium.dev/selenium/web/blank.html");     	        Cookie cookie = new Cookie("test2", "cookie2");     	        driver.manage().addCookie(cookie);     	        /*     	        Selenium Java bindings also provides a way to delete     	        cookie by passing cookie object of current browsing context     	        */     	        driver.manage().deleteCookie(cookie);     	           	        driver.quit();     	      }     	            	    @Test     	    public void deleteAllCookies() {     	          	        driver.get("https://www.selenium.dev/selenium/web/blank.html");     	        // Add cookies into current browser context     	        driver.manage().addCookie(new Cookie("test1", "cookie1"));     	        driver.manage().addCookie(new Cookie("test2", "cookie2"));     	        // Delete All cookies     	        driver.manage().deleteAllCookies();     	          	        driver.quit();     	      }          		  @Test     		  public void sameSiteCookie() {     		    driver.get("http://www.example.com");               	    Cookie cookie = new Cookie.Builder("key", "value").sameSite("Strict").build();                 Cookie cookie1 = new Cookie.Builder("key", "value").sameSite("Lax").build();                      driver.manage().addCookie(cookie);                 driver.manage().addCookie(cookie1);                      System.out.println(cookie.getSameSite());                 System.out.println(cookie1.getSameSite());          			driver.quit();     		  }     }                        driver = webdriver.Chrome()              driver.get("http://www.example.com")              # Adds the cookie into current browser context with sameSite 'Strict' (or) 'Lax'         driver.add_cookie({"name": "foo", "value": "value", "sameSite": "Strict"})         driver.add_cookie({"name": "foo1", "value": "value", "sameSite": "Lax"})              cookie1 = driver.get_cookie("foo")         cookie2 = driver.get_cookie("foo1")              print(cookie1)         print(cookie2)

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/python/tests/interactions/test_cookies.py#L59-L71)

##### examples/python/tests/interactions/test\_cookies.py

Copy  Close               from selenium import webdriver               def test_add_cookie():         driver = webdriver.Chrome()         driver.get("http://www.example.com")              # Adds the cookie into current browser context         driver.add_cookie({"name": "key", "value": "value"})               def test_get_named_cookie():         driver = webdriver.Chrome()         driver.get("http://www.example.com")              # Adds the cookie into current browser context         driver.add_cookie({"name": "foo", "value": "bar"})              # Get cookie details with named cookie 'foo'         print(driver.get_cookie("foo"))               def test_get_all_cookies():         driver = webdriver.Chrome()              driver.get("http://www.example.com")              driver.add_cookie({"name": "test1", "value": "cookie1"})         driver.add_cookie({"name": "test2", "value": "cookie2"})              # Get all available cookies         print(driver.get_cookies())          def test_delete_cookie():         driver = webdriver.Chrome()              driver.get("http://www.example.com")              driver.add_cookie({"name": "test1", "value": "cookie1"})         driver.add_cookie({"name": "test2", "value": "cookie2"})              # Delete cookie with name 'test1'         driver.delete_cookie("test1")               def test_delete_all_cookies():         driver = webdriver.Chrome()              driver.get("http://www.example.com")              driver.add_cookie({"name": "test1", "value": "cookie1"})         driver.add_cookie({"name": "test2", "value": "cookie2"})              # Delete all cookies         driver.delete_all_cookies()               def test_same_side_cookie_attr():         driver = webdriver.Chrome()              driver.get("http://www.example.com")              # Adds the cookie into current browser context with sameSite 'Strict' (or) 'Lax'         driver.add_cookie({"name": "foo", "value": "value", "sameSite": "Strict"})         driver.add_cookie({"name": "foo1", "value": "value", "sameSite": "Lax"})              cookie1 = driver.get_cookie("foo")         cookie2 = driver.get_cookie("foo1")              print(cookie1)         print(cookie2)                    using OpenQA.Selenium;     using OpenQA.Selenium.Chrome;          namespace SameSiteCookie {       class SameSiteCookie {         static void Main(string[] args) {           IWebDriver driver = new ChromeDriver();           try {             driver.Navigate().GoToUrl("http://www.example.com");                  var cookie1Dictionary = new System.Collections.Generic.Dictionary<string, object>() {               { "name", "test1" }, { "value", "cookie1" }, { "sameSite", "Strict" } };             var cookie1 = Cookie.FromDictionary(cookie1Dictionary);                  var cookie2Dictionary = new System.Collections.Generic.Dictionary<string, object>() {               { "name", "test2" }, { "value", "cookie2" }, { "sameSite", "Lax" } };             var cookie2 = Cookie.FromDictionary(cookie2Dictionary);                  driver.Manage().Cookies.AddCookie(cookie1);             driver.Manage().Cookies.AddCookie(cookie2);                  System.Console.WriteLine(cookie1.SameSite);             System.Console.WriteLine(cookie2.SameSite);           } finally {             driver.Quit();           }         }       }     }                      require 'selenium-webdriver'     driver = Selenium::WebDriver.for :chrome          begin       driver.get 'https://www.example.com'       # Adds the cookie into current browser context with sameSite 'Strict' (or) 'Lax'       driver.manage.add_cookie(name: "foo", value: "bar", same_site: "Strict")       driver.manage.add_cookie(name: "foo1", value: "bar", same_site: "Lax")       puts driver.manage.cookie_named('foo')       puts driver.manage.cookie_named('foo1')     ensure       driver.quit     end                        it('Create cookies with sameSite', async function() {         await driver.get('https://www.selenium.dev/selenium/web/blank.html');     

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk//examples/javascript/test/interactions/cookies.spec.js#L24-L26)

##### /examples/javascript/test/interactions/cookies.spec.js

Copy  Close               const {Browser, Builder} = require("selenium-webdriver");     const assert = require('assert')               describe('Cookies', function() {       let driver;            before(async function() {         driver = new Builder()           .forBrowser(Browser.CHROME)           .build();       });            after(async () => await driver.quit());            it('Create a cookie', async function() {         await driver.get('https://www.selenium.dev/selenium/web/blank.html');              // set a cookie on the current domain         await driver.manage().addCookie({ name: 'key', value: 'value' });       });            it('Create cookies with sameSite', async function() {         await driver.get('https://www.selenium.dev/selenium/web/blank.html');              // set a cookie on the current domain with sameSite 'Strict' (or) 'Lax'         await driver.manage().addCookie({ name: 'key', value: 'value', sameSite: 'Strict' });         await driver.manage().addCookie({ name: 'key', value: 'value', sameSite: 'Lax' });       });            it('Read cookie', async function() {         await driver.get('https://www.selenium.dev/selenium/web/blank.html');              // set a cookie on the current domain         await driver.manage().addCookie({ name: 'foo', value: 'bar' });              // Get cookie details with named cookie 'foo'         await driver.manage().getCookie('foo').then(function(cookie) {           assert.equal(cookie.value, 'bar');         });       });            it('Read all cookies', async function() {         await driver.get('https://www.selenium.dev/selenium/web/blank.html');              // Add few cookies         await driver.manage().addCookie({ name: 'test1', value: 'cookie1' });         await driver.manage().addCookie({ name: 'test2', value: 'cookie2' });              // Get all Available cookies         await driver.manage().getCookies().then(function(cookies) {           assert.equal(cookies.filter(cookie => cookie.name.startsWith('test')).length, 2);         });       });            it('Delete a cookie', async function() {         await driver.get('https://www.selenium.dev/selenium/web/blank.html');              // Add few cookies         await driver.manage().addCookie({ name: 'test1', value: 'cookie1' });         await driver.manage().addCookie({ name: 'test2', value: 'cookie2' });              // Delete a cookie with name 'test1'         await driver.manage().deleteCookie('test1');              // Get all Available cookies         await driver.manage().getCookies().then(function(cookies) {           assert.equal(cookies.filter(cookie => cookie.name.startsWith('test')).length, 1);         });       });            it('Delete all cookies', async function() {         await driver.get('https://www.selenium.dev/selenium/web/blank.html');              // Add few cookies         await driver.manage().addCookie({ name: 'test1', value: 'cookie1' });         await driver.manage().addCookie({ name: 'test2', value: 'cookie2' });              // Delete all cookies         await driver.manage().deleteAllCookies();       });     });                    import org.openqa.selenium.Cookie     import org.openqa.selenium.chrome.ChromeDriver          fun main() {         val driver = ChromeDriver()         try {             driver.get("http://www.example.com")             val cookie = Cookie.Builder("key", "value").sameSite("Strict").build()             val cookie1 = Cookie.Builder("key", "value").sameSite("Lax").build()             driver.manage().addCookie(cookie)             driver.manage().addCookie(cookie1)             println(cookie.getSameSite())             println(cookie1.getSameSite())         } finally {             driver.quit()         }     }       

# 4 - Working with IFrames and frames

Frames are a now deprecated means of building a site layout from multiple documents on the same domain. You are unlikely to work with them unless you are working with an pre HTML5 webapp. Iframes allow the insertion of a document from an entirely different domain, and are still commonly used.

If you need to work with frames or iframes, WebDriver allows you to work with them in the same way. Consider a button within an iframe. If we inspect the element using the browser development tools, we might see the following:               <div id="modal">       <iframe id="buttonframe" name="myframe"  src="https://seleniumhq.github.io">        <button>Click here</button>      </iframe>     </div>     

If it was not for the iframe we would expect to click on the button using something like:

[Move Code](https://www.selenium.dev/documentation/about/contributing/#moving-examples)

  * Java   * Python   * CSharp   * Ruby   * JavaScript   * Kotlin

              //This won't work     driver.findElement(By.tagName("button")).click();                          # This Wont work     driver.find_element(By.TAG_NAME, 'button').click()                      //This won't work     driver.FindElement(By.TagName("button")).Click();                          # This won't work     driver.find_element(:tag_name,'button').click                      // This won't work     await driver.findElement(By.css('button')).click();                           //This won't work     driver.findElement(By.tagName("button")).click()       

However, if there are no buttons outside of the iframe, you might instead get a _no such element_ error. This happens because Selenium is only aware of the elements in the top level document. To interact with the button, we will need to first switch to the frame, in a similar way to how we switch windows. WebDriver offers three ways of switching to a frame. Following example code shows how we can do that, using a live web example.

## Using a WebElement

Switching using a WebElement is the most flexible option. You can find the frame using your preferred selector and switch to it.

[Move Code](https://www.selenium.dev/documentation/about/contributing/#moving-examples)

  * Java   * Python   * CSharp   * Ruby   * JavaScript   * Kotlin

                       //switch To IFrame using Web Element              WebElement iframe = driver.findElement(By.id("iframe1"));              //Switch to the frame              driver.switchTo().frame(iframe);              assertEquals(true, driver.getPageSource().contains("We Leave From Here"));              //Now we can type text into email field              WebElement emailE = driver.findElement(By.id("email"));              emailE.sendKeys("admin@selenium.dev");              emailE.clear();

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/java/src/test/java/dev/selenium/interactions/FramesTest.java#L38-L46)

##### examples/java/src/test/java/dev/selenium/interactions/FramesTest.java

Copy  Close               // Licensed to the Software Freedom Conservancy (SFC) under one     // or more contributor license agreements.  See the NOTICE file     // distributed with this work for additional information     // regarding copyright ownership.  The SFC licenses this file     // to you under the Apache License, Version 2.0 (the     // "License"); you may not use this file except in compliance     // with the License.  You may obtain a copy of the License at     //     //   http://www.apache.org/licenses/LICENSE-2.0     //     // Unless required by applicable law or agreed to in writing,     // software distributed under the License is distributed on an     // "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY     // KIND, either express or implied.  See the License for the     // specific language governing permissions and limitations     // under the License.          package dev.selenium.interactions;          import org.junit.jupiter.api.Test;     import org.openqa.selenium.*;     import org.openqa.selenium.chrome.ChromeDriver;     import java.time.Duration;     import static org.junit.jupiter.api.Assertions.assertEquals;          public class FramesTest{              @Test         public void informationWithElements() {         	         	 WebDriver driver = new ChromeDriver();              driver.manage().timeouts().implicitlyWait(Duration.ofMillis(500));                           // Navigate to Url              driver.get("https://www.selenium.dev/selenium/web/iframes.html");                                         //switch To IFrame using Web Element              WebElement iframe = driver.findElement(By.id("iframe1"));              //Switch to the frame              driver.switchTo().frame(iframe);              assertEquals(true, driver.getPageSource().contains("We Leave From Here"));              //Now we can type text into email field              WebElement emailE = driver.findElement(By.id("email"));              emailE.sendKeys("admin@selenium.dev");              emailE.clear();              driver.switchTo().defaultContent();                                        //switch To IFrame using name or id              WebElement iframe1=driver.findElement(By.name("iframe1-name"));              //Switch to the frame              driver.switchTo().frame(iframe1);              assertEquals(true, driver.getPageSource().contains("We Leave From Here"));              WebElement email = driver.findElement(By.id("email"));              //Now we can type text into email field              email.sendKeys("admin@selenium.dev");              email.clear();              driver.switchTo().defaultContent();                                      //switch To IFrame using index              driver.switchTo().frame(0);              assertEquals(true, driver.getPageSource().contains("We Leave From Here"));                            //leave frame              driver.switchTo().defaultContent();              assertEquals(true, driver.getPageSource().contains("This page has iframes"));                            //quit the browser              driver.quit();         }          }                    # --- Switch to iframe using WebElement ---     iframe = driver.find_element(By.ID, "iframe1")     driver.switch_to.frame(iframe)     assert "We Leave From Here" in driver.page_source          email_element = driver.find_element(By.ID, "email")     email_element.send_keys("admin@selenium.dev")     email_element.clear()     driver.switch_to.default_content()

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/python/tests/interactions/test_frames.py#L24-L32)

##### examples/python/tests/interactions/test\_frames.py

Copy  Close               # Licensed to the Software Freedom Conservancy (SFC) under one     # or more contributor license agreements.  See the NOTICE file     # distributed with this work for additional information     # regarding copyright ownership.  The SFC licenses this file     # to you under the Apache License, Version 2.0 (the     # "License"); you may not use this file except in compliance     # with the License.  You may obtain a copy of the License at     #     #   http://www.apache.org/licenses/LICENSE-2.0     # Unless required by applicable law or agreed to in writing,     # software distributed under the License is distributed on an     # "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY     # KIND, either express or implied.  See the License for the     # specific language governing permissions and limitations     # under the License.          from selenium import webdriver     from selenium.webdriver.common.by import By          #set chrome and launch web page     driver = webdriver.Chrome()     driver.get("https://www.selenium.dev/selenium/web/iframes.html")          # --- Switch to iframe using WebElement ---     iframe = driver.find_element(By.ID, "iframe1")     driver.switch_to.frame(iframe)     assert "We Leave From Here" in driver.page_source          email_element = driver.find_element(By.ID, "email")     email_element.send_keys("admin@selenium.dev")     email_element.clear()     driver.switch_to.default_content()          # --- Switch to iframe using name or ID ---     iframe1=driver.find_element(By.NAME, "iframe1-name")  # (This line doesn't switch, just locates)     driver.switch_to.frame(iframe1)     assert "We Leave From Here" in driver.page_source          email = driver.find_element(By.ID, "email")     email.send_keys("admin@selenium.dev")     email.clear()     driver.switch_to.default_content()          # --- Switch to iframe using index ---     driver.switch_to.frame(0)     assert "We Leave From Here" in driver.page_source          # --- Final page content check ---     driver.switch_to.default_content()     assert "This page has iframes" in driver.page_source          #quit the driver     driver.quit()          #demo code for conference                                //switch To IFrame using Web Element                 IWebElement iframe = driver.FindElement(By.Id("iframe1"));                 //Switch to the frame                 driver.SwitchTo().Frame(iframe);                 Assert.AreEqual(true, driver.PageSource.Contains("We Leave From Here"));                 //Now we can type text into email field                 IWebElement emailE = driver.FindElement(By.Id("email"));                 emailE.SendKeys("admin@selenium.dev");                 emailE.Clear();

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/dotnet/SeleniumDocs/Interactions/FramesTest.cs#L38-L46)

##### examples/dotnet/SeleniumDocs/Interactions/FramesTest.cs

Copy  Close               // Licensed to the Software Freedom Conservancy (SFC) under one     // or more contributor license agreements.  See the NOTICE file     // distributed with this work for additional information     // regarding copyright ownership.  The SFC licenses this file     // to you under the Apache License, Version 2.0 (the     // "License"); you may not use this file except in compliance     // with the License.  You may obtain a copy of the License at     //     //   http://www.apache.org/licenses/LICENSE-2.0     //     // Unless required by applicable law or agreed to in writing,     // software distributed under the License is distributed on an     // "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY     // KIND, either express or implied.  See the License for the     // specific language governing permissions and limitations     // under the License.               using System;     using Microsoft.VisualStudio.TestTools.UnitTesting;     using OpenQA.Selenium;     using OpenQA.Selenium.Chrome;     using System.Collections.Generic;          namespace SeleniumDocs.Interactions     {       [TestClass]         public class FramesTest         {             [TestMethod]             public void TestFrames()             {                 WebDriver driver = new ChromeDriver();                 driver.Manage().Timeouts().ImplicitWait = TimeSpan.FromMilliseconds(500);                      // Navigate to Url                 driver.Url= "https://www.selenium.dev/selenium/web/iframes.html";                 //switch To IFrame using Web Element                 IWebElement iframe = driver.FindElement(By.Id("iframe1"));                 //Switch to the frame                 driver.SwitchTo().Frame(iframe);                 Assert.AreEqual(true, driver.PageSource.Contains("We Leave From Here"));                 //Now we can type text into email field                 IWebElement emailE = driver.FindElement(By.Id("email"));                 emailE.SendKeys("admin@selenium.dev");                 emailE.Clear();                 driver.SwitchTo().DefaultContent();                           //switch To IFrame using name or id                 IWebElement iframe1=driver.FindElement(By.Name("iframe1-name"));                 //Switch to the frame                 driver.SwitchTo().Frame(iframe1);                 Assert.AreEqual(true, driver.PageSource.Contains("We Leave From Here"));                 IWebElement email = driver.FindElement(By.Id("email"));                 //Now we can type text into email field                 email.SendKeys("admin@selenium.dev");                 email.Clear();                 driver.SwitchTo().DefaultContent();                           //switch To IFrame using index                 driver.SwitchTo().Frame(0);                 Assert.AreEqual(true, driver.PageSource.Contains("We Leave From Here"));                      //leave frame                 driver.SwitchTo().DefaultContent();                 Assert.AreEqual(true, driver.PageSource.Contains("This page has iframes"));                      //quit the browser                 driver.Quit();             }         }     }                   iframe = driver.find_element(:id, 'iframe1')         driver.switch_to.frame(iframe)         expect(driver.page_source).to include('We Leave From Here')              email_element = driver.find_element(:id, 'email')         email_element.send_keys('admin@selenium.dev')         email_element.clear         driver.switch_to.default_content

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/ruby/spec/interactions/frames_spec.rb#L26-L33)

##### examples/ruby/spec/interactions/frames\_spec.rb

Copy  Close               # Licensed to the Software Freedom Conservancy (SFC) under one     # or more contributor license agreements.  See the NOTICE file     # distributed with this work for additional information     # regarding copyright ownership.  The SFC licenses this file     # to you under the Apache License, Version 2.0 (the     # "License"); you may not use this file except in compliance     # with the License.  You may obtain a copy of the License at     #     #   http://www.apache.org/licenses/LICENSE-2.0     # Unless required by applicable law or agreed to in writing,     # software distributed under the License is distributed on an     # "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY     # KIND, either express or implied.  See the License for the     # specific language governing permissions and limitations     # under the License.     # frozen_string_literal: true          require 'spec_helper'          RSpec.describe 'Frames' do       let(:driver) { start_session }            it 'performs iframe switching operations' do         driver.navigate.to 'https://www.selenium.dev/selenium/web/iframes.html'         # --- Switch to iframe using WebElement ---         iframe = driver.find_element(:id, 'iframe1')         driver.switch_to.frame(iframe)         expect(driver.page_source).to include('We Leave From Here')              email_element = driver.find_element(:id, 'email')         email_element.send_keys('admin@selenium.dev')         email_element.clear         driver.switch_to.default_content              # --- Switch to iframe using name or ID ---         iframe1 = driver.find_element(:name, 'iframe1-name')         driver.switch_to.frame(iframe1)         expect(driver.page_source).to include('We Leave From Here')              email = driver.find_element(:id, 'email')         email.send_keys('admin@selenium.dev')         email.clear         driver.switch_to.default_content              # --- Switch to iframe using index ---         driver.switch_to.frame(0)         expect(driver.page_source).to include('We Leave From Here')         # --- Final page content check ---         driver.switch_to.default_content         expect(driver.page_source).to include('This page has iframes')       end     end                    // Store the web element     const iframe = driver.findElement(By.css('#modal > iframe'));          // Switch to the frame     await driver.switchTo().frame(iframe);          // Now we can click the button     await driver.findElement(By.css('button')).click();                           //Store the web element     val iframe = driver.findElement(By.cssSelector("#modal>iframe"))          //Switch to the frame     driver.switchTo().frame(iframe)          //Now we can click the button     driver.findElement(By.tagName("button")).click()       

## Using a name or ID

If your frame or iframe has an id or name attribute, this can be used instead. If the name or ID is not unique on the page, then the first one found will be switched to.

[Move Code](https://www.selenium.dev/documentation/about/contributing/#moving-examples)

  * Java   * Python   * CSharp   * Ruby   * JavaScript   * Kotlin

                       //switch To IFrame using name or id              WebElement iframe1=driver.findElement(By.name("iframe1-name"));              //Switch to the frame              driver.switchTo().frame(iframe1);              assertEquals(true, driver.getPageSource().contains("We Leave From Here"));              WebElement email = driver.findElement(By.id("email"));              //Now we can type text into email field              email.sendKeys("admin@selenium.dev");              email.clear();

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/java/src/test/java/dev/selenium/interactions/FramesTest.java#L50-L58)

##### examples/java/src/test/java/dev/selenium/interactions/FramesTest.java

Copy  Close               // Licensed to the Software Freedom Conservancy (SFC) under one     // or more contributor license agreements.  See the NOTICE file     // distributed with this work for additional information     // regarding copyright ownership.  The SFC licenses this file     // to you under the Apache License, Version 2.0 (the     // "License"); you may not use this file except in compliance     // with the License.  You may obtain a copy of the License at     //     //   http://www.apache.org/licenses/LICENSE-2.0     //     // Unless required by applicable law or agreed to in writing,     // software distributed under the License is distributed on an     // "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY     // KIND, either express or implied.  See the License for the     // specific language governing permissions and limitations     // under the License.          package dev.selenium.interactions;          import org.junit.jupiter.api.Test;     import org.openqa.selenium.*;     import org.openqa.selenium.chrome.ChromeDriver;     import java.time.Duration;     import static org.junit.jupiter.api.Assertions.assertEquals;          public class FramesTest{              @Test         public void informationWithElements() {         	         	 WebDriver driver = new ChromeDriver();              driver.manage().timeouts().implicitlyWait(Duration.ofMillis(500));                           // Navigate to Url              driver.get("https://www.selenium.dev/selenium/web/iframes.html");                                         //switch To IFrame using Web Element              WebElement iframe = driver.findElement(By.id("iframe1"));              //Switch to the frame              driver.switchTo().frame(iframe);              assertEquals(true, driver.getPageSource().contains("We Leave From Here"));              //Now we can type text into email field              WebElement emailE = driver.findElement(By.id("email"));              emailE.sendKeys("admin@selenium.dev");              emailE.clear();              driver.switchTo().defaultContent();                                        //switch To IFrame using name or id              WebElement iframe1=driver.findElement(By.name("iframe1-name"));              //Switch to the frame              driver.switchTo().frame(iframe1);              assertEquals(true, driver.getPageSource().contains("We Leave From Here"));              WebElement email = driver.findElement(By.id("email"));              //Now we can type text into email field              email.sendKeys("admin@selenium.dev");              email.clear();              driver.switchTo().defaultContent();                                      //switch To IFrame using index              driver.switchTo().frame(0);              assertEquals(true, driver.getPageSource().contains("We Leave From Here"));                            //leave frame              driver.switchTo().defaultContent();              assertEquals(true, driver.getPageSource().contains("This page has iframes"));                            //quit the browser              driver.quit();         }          }                    # --- Switch to iframe using name or ID ---     iframe1=driver.find_element(By.NAME, "iframe1-name")  # (This line doesn't switch, just locates)     driver.switch_to.frame(iframe1)     assert "We Leave From Here" in driver.page_source          email = driver.find_element(By.ID, "email")     email.send_keys("admin@selenium.dev")     email.clear()     driver.switch_to.default_content()

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/python/tests/interactions/test_frames.py#L34-L42)

##### examples/python/tests/interactions/test\_frames.py

Copy  Close               # Licensed to the Software Freedom Conservancy (SFC) under one     # or more contributor license agreements.  See the NOTICE file     # distributed with this work for additional information     # regarding copyright ownership.  The SFC licenses this file     # to you under the Apache License, Version 2.0 (the     # "License"); you may not use this file except in compliance     # with the License.  You may obtain a copy of the License at     #     #   http://www.apache.org/licenses/LICENSE-2.0     # Unless required by applicable law or agreed to in writing,     # software distributed under the License is distributed on an     # "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY     # KIND, either express or implied.  See the License for the     # specific language governing permissions and limitations     # under the License.          from selenium import webdriver     from selenium.webdriver.common.by import By          #set chrome and launch web page     driver = webdriver.Chrome()     driver.get("https://www.selenium.dev/selenium/web/iframes.html")          # --- Switch to iframe using WebElement ---     iframe = driver.find_element(By.ID, "iframe1")     driver.switch_to.frame(iframe)     assert "We Leave From Here" in driver.page_source          email_element = driver.find_element(By.ID, "email")     email_element.send_keys("admin@selenium.dev")     email_element.clear()     driver.switch_to.default_content()          # --- Switch to iframe using name or ID ---     iframe1=driver.find_element(By.NAME, "iframe1-name")  # (This line doesn't switch, just locates)     driver.switch_to.frame(iframe1)     assert "We Leave From Here" in driver.page_source          email = driver.find_element(By.ID, "email")     email.send_keys("admin@selenium.dev")     email.clear()     driver.switch_to.default_content()          # --- Switch to iframe using index ---     driver.switch_to.frame(0)     assert "We Leave From Here" in driver.page_source          # --- Final page content check ---     driver.switch_to.default_content()     assert "This page has iframes" in driver.page_source          #quit the driver     driver.quit()          #demo code for conference                                //switch To IFrame using name or id                 IWebElement iframe1=driver.FindElement(By.Name("iframe1-name"));                 //Switch to the frame                 driver.SwitchTo().Frame(iframe1);                 Assert.AreEqual(true, driver.PageSource.Contains("We Leave From Here"));                 IWebElement email = driver.FindElement(By.Id("email"));                 //Now we can type text into email field                 email.SendKeys("admin@selenium.dev");                 email.Clear();

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/dotnet/SeleniumDocs/Interactions/FramesTest.cs#L50-L58)

##### examples/dotnet/SeleniumDocs/Interactions/FramesTest.cs

Copy  Close               // Licensed to the Software Freedom Conservancy (SFC) under one     // or more contributor license agreements.  See the NOTICE file     // distributed with this work for additional information     // regarding copyright ownership.  The SFC licenses this file     // to you under the Apache License, Version 2.0 (the     // "License"); you may not use this file except in compliance     // with the License.  You may obtain a copy of the License at     //     //   http://www.apache.org/licenses/LICENSE-2.0     //     // Unless required by applicable law or agreed to in writing,     // software distributed under the License is distributed on an     // "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY     // KIND, either express or implied.  See the License for the     // specific language governing permissions and limitations     // under the License.               using System;     using Microsoft.VisualStudio.TestTools.UnitTesting;     using OpenQA.Selenium;     using OpenQA.Selenium.Chrome;     using System.Collections.Generic;          namespace SeleniumDocs.Interactions     {       [TestClass]         public class FramesTest         {             [TestMethod]             public void TestFrames()             {                 WebDriver driver = new ChromeDriver();                 driver.Manage().Timeouts().ImplicitWait = TimeSpan.FromMilliseconds(500);                      // Navigate to Url                 driver.Url= "https://www.selenium.dev/selenium/web/iframes.html";                 //switch To IFrame using Web Element                 IWebElement iframe = driver.FindElement(By.Id("iframe1"));                 //Switch to the frame                 driver.SwitchTo().Frame(iframe);                 Assert.AreEqual(true, driver.PageSource.Contains("We Leave From Here"));                 //Now we can type text into email field                 IWebElement emailE = driver.FindElement(By.Id("email"));                 emailE.SendKeys("admin@selenium.dev");                 emailE.Clear();                 driver.SwitchTo().DefaultContent();                           //switch To IFrame using name or id                 IWebElement iframe1=driver.FindElement(By.Name("iframe1-name"));                 //Switch to the frame                 driver.SwitchTo().Frame(iframe1);                 Assert.AreEqual(true, driver.PageSource.Contains("We Leave From Here"));                 IWebElement email = driver.FindElement(By.Id("email"));                 //Now we can type text into email field                 email.SendKeys("admin@selenium.dev");                 email.Clear();                 driver.SwitchTo().DefaultContent();                           //switch To IFrame using index                 driver.SwitchTo().Frame(0);                 Assert.AreEqual(true, driver.PageSource.Contains("We Leave From Here"));                      //leave frame                 driver.SwitchTo().DefaultContent();                 Assert.AreEqual(true, driver.PageSource.Contains("This page has iframes"));                      //quit the browser                 driver.Quit();             }         }     }                   iframe1 = driver.find_element(:name, 'iframe1-name')         driver.switch_to.frame(iframe1)         expect(driver.page_source).to include('We Leave From Here')              email = driver.find_element(:id, 'email')         email.send_keys('admin@selenium.dev')         email.clear         driver.switch_to.default_content

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/ruby/spec/interactions/frames_spec.rb#L36-L43)

##### examples/ruby/spec/interactions/frames\_spec.rb

Copy  Close               # Licensed to the Software Freedom Conservancy (SFC) under one     # or more contributor license agreements.  See the NOTICE file     # distributed with this work for additional information     # regarding copyright ownership.  The SFC licenses this file     # to you under the Apache License, Version 2.0 (the     # "License"); you may not use this file except in compliance     # with the License.  You may obtain a copy of the License at     #     #   http://www.apache.org/licenses/LICENSE-2.0     # Unless required by applicable law or agreed to in writing,     # software distributed under the License is distributed on an     # "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY     # KIND, either express or implied.  See the License for the     # specific language governing permissions and limitations     # under the License.     # frozen_string_literal: true          require 'spec_helper'          RSpec.describe 'Frames' do       let(:driver) { start_session }            it 'performs iframe switching operations' do         driver.navigate.to 'https://www.selenium.dev/selenium/web/iframes.html'         # --- Switch to iframe using WebElement ---         iframe = driver.find_element(:id, 'iframe1')         driver.switch_to.frame(iframe)         expect(driver.page_source).to include('We Leave From Here')              email_element = driver.find_element(:id, 'email')         email_element.send_keys('admin@selenium.dev')         email_element.clear         driver.switch_to.default_content              # --- Switch to iframe using name or ID ---         iframe1 = driver.find_element(:name, 'iframe1-name')         driver.switch_to.frame(iframe1)         expect(driver.page_source).to include('We Leave From Here')              email = driver.find_element(:id, 'email')         email.send_keys('admin@selenium.dev')         email.clear         driver.switch_to.default_content              # --- Switch to iframe using index ---         driver.switch_to.frame(0)         expect(driver.page_source).to include('We Leave From Here')         # --- Final page content check ---         driver.switch_to.default_content         expect(driver.page_source).to include('This page has iframes')       end     end                    // Using the ID     await driver.switchTo().frame('buttonframe');          // Or using the name instead     await driver.switchTo().frame('myframe');          // Now we can click the button     await driver.findElement(By.css('button')).click();                           //Using the ID     driver.switchTo().frame("buttonframe")          //Or using the name instead     driver.switchTo().frame("myframe")          //Now we can click the button     driver.findElement(By.tagName("button")).click()       

## Using an index

It is also possible to use the index of the frame, such as can be queried using _window.frames_ in JavaScript.

[Move Code](https://www.selenium.dev/documentation/about/contributing/#moving-examples)

  * Java   * Python   * CSharp   * Ruby   * JavaScript   * Kotlin

                       //switch To IFrame using index              driver.switchTo().frame(0);

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/java/src/test/java/dev/selenium/interactions/FramesTest.java#L62-L63)

##### examples/java/src/test/java/dev/selenium/interactions/FramesTest.java

Copy  Close               // Licensed to the Software Freedom Conservancy (SFC) under one     // or more contributor license agreements.  See the NOTICE file     // distributed with this work for additional information     // regarding copyright ownership.  The SFC licenses this file     // to you under the Apache License, Version 2.0 (the     // "License"); you may not use this file except in compliance     // with the License.  You may obtain a copy of the License at     //     //   http://www.apache.org/licenses/LICENSE-2.0     //     // Unless required by applicable law or agreed to in writing,     // software distributed under the License is distributed on an     // "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY     // KIND, either express or implied.  See the License for the     // specific language governing permissions and limitations     // under the License.          package dev.selenium.interactions;          import org.junit.jupiter.api.Test;     import org.openqa.selenium.*;     import org.openqa.selenium.chrome.ChromeDriver;     import java.time.Duration;     import static org.junit.jupiter.api.Assertions.assertEquals;          public class FramesTest{              @Test         public void informationWithElements() {         	         	 WebDriver driver = new ChromeDriver();              driver.manage().timeouts().implicitlyWait(Duration.ofMillis(500));                           // Navigate to Url              driver.get("https://www.selenium.dev/selenium/web/iframes.html");                                         //switch To IFrame using Web Element              WebElement iframe = driver.findElement(By.id("iframe1"));              //Switch to the frame              driver.switchTo().frame(iframe);              assertEquals(true, driver.getPageSource().contains("We Leave From Here"));              //Now we can type text into email field              WebElement emailE = driver.findElement(By.id("email"));              emailE.sendKeys("admin@selenium.dev");              emailE.clear();              driver.switchTo().defaultContent();                                        //switch To IFrame using name or id              WebElement iframe1=driver.findElement(By.name("iframe1-name"));              //Switch to the frame              driver.switchTo().frame(iframe1);              assertEquals(true, driver.getPageSource().contains("We Leave From Here"));              WebElement email = driver.findElement(By.id("email"));              //Now we can type text into email field              email.sendKeys("admin@selenium.dev");              email.clear();              driver.switchTo().defaultContent();                                      //switch To IFrame using index              driver.switchTo().frame(0);              assertEquals(true, driver.getPageSource().contains("We Leave From Here"));                            //leave frame              driver.switchTo().defaultContent();              assertEquals(true, driver.getPageSource().contains("This page has iframes"));                            //quit the browser              driver.quit();         }          }                    driver.switch_to.frame(0)     assert "We Leave From Here" in driver.page_source

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/python/tests/interactions/test_frames.py#L45-L46)

##### examples/python/tests/interactions/test\_frames.py

Copy  Close               # Licensed to the Software Freedom Conservancy (SFC) under one     # or more contributor license agreements.  See the NOTICE file     # distributed with this work for additional information     # regarding copyright ownership.  The SFC licenses this file     # to you under the Apache License, Version 2.0 (the     # "License"); you may not use this file except in compliance     # with the License.  You may obtain a copy of the License at     #     #   http://www.apache.org/licenses/LICENSE-2.0     # Unless required by applicable law or agreed to in writing,     # software distributed under the License is distributed on an     # "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY     # KIND, either express or implied.  See the License for the     # specific language governing permissions and limitations     # under the License.          from selenium import webdriver     from selenium.webdriver.common.by import By          #set chrome and launch web page     driver = webdriver.Chrome()     driver.get("https://www.selenium.dev/selenium/web/iframes.html")          # --- Switch to iframe using WebElement ---     iframe = driver.find_element(By.ID, "iframe1")     driver.switch_to.frame(iframe)     assert "We Leave From Here" in driver.page_source          email_element = driver.find_element(By.ID, "email")     email_element.send_keys("admin@selenium.dev")     email_element.clear()     driver.switch_to.default_content()          # --- Switch to iframe using name or ID ---     iframe1=driver.find_element(By.NAME, "iframe1-name")  # (This line doesn't switch, just locates)     driver.switch_to.frame(iframe1)     assert "We Leave From Here" in driver.page_source          email = driver.find_element(By.ID, "email")     email.send_keys("admin@selenium.dev")     email.clear()     driver.switch_to.default_content()          # --- Switch to iframe using index ---     driver.switch_to.frame(0)     assert "We Leave From Here" in driver.page_source          # --- Final page content check ---     driver.switch_to.default_content()     assert "This page has iframes" in driver.page_source          #quit the driver     driver.quit()          #demo code for conference                                //switch To IFrame using index                 driver.SwitchTo().Frame(0);

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/dotnet/SeleniumDocs/Interactions/FramesTest.cs#L62-L63)

##### examples/dotnet/SeleniumDocs/Interactions/FramesTest.cs

Copy  Close               // Licensed to the Software Freedom Conservancy (SFC) under one     // or more contributor license agreements.  See the NOTICE file     // distributed with this work for additional information     // regarding copyright ownership.  The SFC licenses this file     // to you under the Apache License, Version 2.0 (the     // "License"); you may not use this file except in compliance     // with the License.  You may obtain a copy of the License at     //     //   http://www.apache.org/licenses/LICENSE-2.0     //     // Unless required by applicable law or agreed to in writing,     // software distributed under the License is distributed on an     // "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY     // KIND, either express or implied.  See the License for the     // specific language governing permissions and limitations     // under the License.               using System;     using Microsoft.VisualStudio.TestTools.UnitTesting;     using OpenQA.Selenium;     using OpenQA.Selenium.Chrome;     using System.Collections.Generic;          namespace SeleniumDocs.Interactions     {       [TestClass]         public class FramesTest         {             [TestMethod]             public void TestFrames()             {                 WebDriver driver = new ChromeDriver();                 driver.Manage().Timeouts().ImplicitWait = TimeSpan.FromMilliseconds(500);                      // Navigate to Url                 driver.Url= "https://www.selenium.dev/selenium/web/iframes.html";                 //switch To IFrame using Web Element                 IWebElement iframe = driver.FindElement(By.Id("iframe1"));                 //Switch to the frame                 driver.SwitchTo().Frame(iframe);                 Assert.AreEqual(true, driver.PageSource.Contains("We Leave From Here"));                 //Now we can type text into email field                 IWebElement emailE = driver.FindElement(By.Id("email"));                 emailE.SendKeys("admin@selenium.dev");                 emailE.Clear();                 driver.SwitchTo().DefaultContent();                           //switch To IFrame using name or id                 IWebElement iframe1=driver.FindElement(By.Name("iframe1-name"));                 //Switch to the frame                 driver.SwitchTo().Frame(iframe1);                 Assert.AreEqual(true, driver.PageSource.Contains("We Leave From Here"));                 IWebElement email = driver.FindElement(By.Id("email"));                 //Now we can type text into email field                 email.SendKeys("admin@selenium.dev");                 email.Clear();                 driver.SwitchTo().DefaultContent();                           //switch To IFrame using index                 driver.SwitchTo().Frame(0);                 Assert.AreEqual(true, driver.PageSource.Contains("We Leave From Here"));                      //leave frame                 driver.SwitchTo().DefaultContent();                 Assert.AreEqual(true, driver.PageSource.Contains("This page has iframes"));                      //quit the browser                 driver.Quit();             }         }     }                   driver.switch_to.frame(0)         expect(driver.page_source).to include('We Leave From Here')

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/ruby/spec/interactions/frames_spec.rb#L46-L47)

##### examples/ruby/spec/interactions/frames\_spec.rb

Copy  Close               # Licensed to the Software Freedom Conservancy (SFC) under one     # or more contributor license agreements.  See the NOTICE file     # distributed with this work for additional information     # regarding copyright ownership.  The SFC licenses this file     # to you under the Apache License, Version 2.0 (the     # "License"); you may not use this file except in compliance     # with the License.  You may obtain a copy of the License at     #     #   http://www.apache.org/licenses/LICENSE-2.0     # Unless required by applicable law or agreed to in writing,     # software distributed under the License is distributed on an     # "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY     # KIND, either express or implied.  See the License for the     # specific language governing permissions and limitations     # under the License.     # frozen_string_literal: true          require 'spec_helper'          RSpec.describe 'Frames' do       let(:driver) { start_session }            it 'performs iframe switching operations' do         driver.navigate.to 'https://www.selenium.dev/selenium/web/iframes.html'         # --- Switch to iframe using WebElement ---         iframe = driver.find_element(:id, 'iframe1')         driver.switch_to.frame(iframe)         expect(driver.page_source).to include('We Leave From Here')              email_element = driver.find_element(:id, 'email')         email_element.send_keys('admin@selenium.dev')         email_element.clear         driver.switch_to.default_content              # --- Switch to iframe using name or ID ---         iframe1 = driver.find_element(:name, 'iframe1-name')         driver.switch_to.frame(iframe1)         expect(driver.page_source).to include('We Leave From Here')              email = driver.find_element(:id, 'email')         email.send_keys('admin@selenium.dev')         email.clear         driver.switch_to.default_content              # --- Switch to iframe using index ---         driver.switch_to.frame(0)         expect(driver.page_source).to include('We Leave From Here')         # --- Final page content check ---         driver.switch_to.default_content         expect(driver.page_source).to include('This page has iframes')       end     end                    // Switches to the second frame     await driver.switchTo().frame(1);                           // Switches to the second frame     driver.switchTo().frame(1)       

## Leaving a frame

To leave an iframe or frameset, switch back to the default content like so:

[Move Code](https://www.selenium.dev/documentation/about/contributing/#moving-examples)

  * Java   * Python   * CSharp   * Ruby   * JavaScript   * Kotlin

                       //leave frame              driver.switchTo().defaultContent();

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/java/src/test/java/dev/selenium/interactions/FramesTest.java#L66-L67)

##### examples/java/src/test/java/dev/selenium/interactions/FramesTest.java

Copy  Close               // Licensed to the Software Freedom Conservancy (SFC) under one     // or more contributor license agreements.  See the NOTICE file     // distributed with this work for additional information     // regarding copyright ownership.  The SFC licenses this file     // to you under the Apache License, Version 2.0 (the     // "License"); you may not use this file except in compliance     // with the License.  You may obtain a copy of the License at     //     //   http://www.apache.org/licenses/LICENSE-2.0     //     // Unless required by applicable law or agreed to in writing,     // software distributed under the License is distributed on an     // "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY     // KIND, either express or implied.  See the License for the     // specific language governing permissions and limitations     // under the License.          package dev.selenium.interactions;          import org.junit.jupiter.api.Test;     import org.openqa.selenium.*;     import org.openqa.selenium.chrome.ChromeDriver;     import java.time.Duration;     import static org.junit.jupiter.api.Assertions.assertEquals;          public class FramesTest{              @Test         public void informationWithElements() {         	         	 WebDriver driver = new ChromeDriver();              driver.manage().timeouts().implicitlyWait(Duration.ofMillis(500));                           // Navigate to Url              driver.get("https://www.selenium.dev/selenium/web/iframes.html");                                         //switch To IFrame using Web Element              WebElement iframe = driver.findElement(By.id("iframe1"));              //Switch to the frame              driver.switchTo().frame(iframe);              assertEquals(true, driver.getPageSource().contains("We Leave From Here"));              //Now we can type text into email field              WebElement emailE = driver.findElement(By.id("email"));              emailE.sendKeys("admin@selenium.dev");              emailE.clear();              driver.switchTo().defaultContent();                                        //switch To IFrame using name or id              WebElement iframe1=driver.findElement(By.name("iframe1-name"));              //Switch to the frame              driver.switchTo().frame(iframe1);              assertEquals(true, driver.getPageSource().contains("We Leave From Here"));              WebElement email = driver.findElement(By.id("email"));              //Now we can type text into email field              email.sendKeys("admin@selenium.dev");              email.clear();              driver.switchTo().defaultContent();                                      //switch To IFrame using index              driver.switchTo().frame(0);              assertEquals(true, driver.getPageSource().contains("We Leave From Here"));                            //leave frame              driver.switchTo().defaultContent();              assertEquals(true, driver.getPageSource().contains("This page has iframes"));                            //quit the browser              driver.quit();         }          }                    driver.switch_to.default_content()     assert "This page has iframes" in driver.page_source

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/python/tests/interactions/test_frames.py#L49-L50)

##### examples/python/tests/interactions/test\_frames.py

Copy  Close               # Licensed to the Software Freedom Conservancy (SFC) under one     # or more contributor license agreements.  See the NOTICE file     # distributed with this work for additional information     # regarding copyright ownership.  The SFC licenses this file     # to you under the Apache License, Version 2.0 (the     # "License"); you may not use this file except in compliance     # with the License.  You may obtain a copy of the License at     #     #   http://www.apache.org/licenses/LICENSE-2.0     # Unless required by applicable law or agreed to in writing,     # software distributed under the License is distributed on an     # "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY     # KIND, either express or implied.  See the License for the     # specific language governing permissions and limitations     # under the License.          from selenium import webdriver     from selenium.webdriver.common.by import By          #set chrome and launch web page     driver = webdriver.Chrome()     driver.get("https://www.selenium.dev/selenium/web/iframes.html")          # --- Switch to iframe using WebElement ---     iframe = driver.find_element(By.ID, "iframe1")     driver.switch_to.frame(iframe)     assert "We Leave From Here" in driver.page_source          email_element = driver.find_element(By.ID, "email")     email_element.send_keys("admin@selenium.dev")     email_element.clear()     driver.switch_to.default_content()          # --- Switch to iframe using name or ID ---     iframe1=driver.find_element(By.NAME, "iframe1-name")  # (This line doesn't switch, just locates)     driver.switch_to.frame(iframe1)     assert "We Leave From Here" in driver.page_source          email = driver.find_element(By.ID, "email")     email.send_keys("admin@selenium.dev")     email.clear()     driver.switch_to.default_content()          # --- Switch to iframe using index ---     driver.switch_to.frame(0)     assert "We Leave From Here" in driver.page_source          # --- Final page content check ---     driver.switch_to.default_content()     assert "This page has iframes" in driver.page_source          #quit the driver     driver.quit()          #demo code for conference                                //leave frame                 driver.SwitchTo().DefaultContent();

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/dotnet/SeleniumDocs/Interactions/FramesTest.cs#L66-L67)

##### examples/dotnet/SeleniumDocs/Interactions/FramesTest.cs

Copy  Close               // Licensed to the Software Freedom Conservancy (SFC) under one     // or more contributor license agreements.  See the NOTICE file     // distributed with this work for additional information     // regarding copyright ownership.  The SFC licenses this file     // to you under the Apache License, Version 2.0 (the     // "License"); you may not use this file except in compliance     // with the License.  You may obtain a copy of the License at     //     //   http://www.apache.org/licenses/LICENSE-2.0     //     // Unless required by applicable law or agreed to in writing,     // software distributed under the License is distributed on an     // "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY     // KIND, either express or implied.  See the License for the     // specific language governing permissions and limitations     // under the License.               using System;     using Microsoft.VisualStudio.TestTools.UnitTesting;     using OpenQA.Selenium;     using OpenQA.Selenium.Chrome;     using System.Collections.Generic;          namespace SeleniumDocs.Interactions     {       [TestClass]         public class FramesTest         {             [TestMethod]             public void TestFrames()             {                 WebDriver driver = new ChromeDriver();                 driver.Manage().Timeouts().ImplicitWait = TimeSpan.FromMilliseconds(500);                      // Navigate to Url                 driver.Url= "https://www.selenium.dev/selenium/web/iframes.html";                 //switch To IFrame using Web Element                 IWebElement iframe = driver.FindElement(By.Id("iframe1"));                 //Switch to the frame                 driver.SwitchTo().Frame(iframe);                 Assert.AreEqual(true, driver.PageSource.Contains("We Leave From Here"));                 //Now we can type text into email field                 IWebElement emailE = driver.FindElement(By.Id("email"));                 emailE.SendKeys("admin@selenium.dev");                 emailE.Clear();                 driver.SwitchTo().DefaultContent();                           //switch To IFrame using name or id                 IWebElement iframe1=driver.FindElement(By.Name("iframe1-name"));                 //Switch to the frame                 driver.SwitchTo().Frame(iframe1);                 Assert.AreEqual(true, driver.PageSource.Contains("We Leave From Here"));                 IWebElement email = driver.FindElement(By.Id("email"));                 //Now we can type text into email field                 email.SendKeys("admin@selenium.dev");                 email.Clear();                 driver.SwitchTo().DefaultContent();                           //switch To IFrame using index                 driver.SwitchTo().Frame(0);                 Assert.AreEqual(true, driver.PageSource.Contains("We Leave From Here"));                      //leave frame                 driver.SwitchTo().DefaultContent();                 Assert.AreEqual(true, driver.PageSource.Contains("This page has iframes"));                      //quit the browser                 driver.Quit();             }         }     }                   driver.switch_to.default_content         expect(driver.page_source).to include('This page has iframes')

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/ruby/spec/interactions/frames_spec.rb#L49-L50)

##### examples/ruby/spec/interactions/frames\_spec.rb

Copy  Close               # Licensed to the Software Freedom Conservancy (SFC) under one     # or more contributor license agreements.  See the NOTICE file     # distributed with this work for additional information     # regarding copyright ownership.  The SFC licenses this file     # to you under the Apache License, Version 2.0 (the     # "License"); you may not use this file except in compliance     # with the License.  You may obtain a copy of the License at     #     #   http://www.apache.org/licenses/LICENSE-2.0     # Unless required by applicable law or agreed to in writing,     # software distributed under the License is distributed on an     # "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY     # KIND, either express or implied.  See the License for the     # specific language governing permissions and limitations     # under the License.     # frozen_string_literal: true          require 'spec_helper'          RSpec.describe 'Frames' do       let(:driver) { start_session }            it 'performs iframe switching operations' do         driver.navigate.to 'https://www.selenium.dev/selenium/web/iframes.html'         # --- Switch to iframe using WebElement ---         iframe = driver.find_element(:id, 'iframe1')         driver.switch_to.frame(iframe)         expect(driver.page_source).to include('We Leave From Here')              email_element = driver.find_element(:id, 'email')         email_element.send_keys('admin@selenium.dev')         email_element.clear         driver.switch_to.default_content              # --- Switch to iframe using name or ID ---         iframe1 = driver.find_element(:name, 'iframe1-name')         driver.switch_to.frame(iframe1)         expect(driver.page_source).to include('We Leave From Here')              email = driver.find_element(:id, 'email')         email.send_keys('admin@selenium.dev')         email.clear         driver.switch_to.default_content              # --- Switch to iframe using index ---         driver.switch_to.frame(0)         expect(driver.page_source).to include('We Leave From Here')         # --- Final page content check ---         driver.switch_to.default_content         expect(driver.page_source).to include('This page has iframes')       end     end                    // Return to the top level     await driver.switchTo().defaultContent();                           // Return to the top level     driver.switchTo().defaultContent()       

# 5 - Print Page

Printing a webpage is a common task, whether for sharing information or maintaining archives. Selenium simplifies this process through its PrintOptions, PrintsPage, and browsingContext classes, which provide a flexible and intuitive interface for automating the printing of web pages. These classes enable you to configure printing preferences, such as page layout, margins, and scaling, ensuring that the output meets your specific requirements.

## Configuring

### Orientation

Using the `getOrientation()` and `setOrientation()` methods, you can get/set the page orientation — either `PORTRAIT` or `LANDSCAPE`.

  * Java   * CSharp   * Ruby   * Python   * JavaScript   * Kotlin

                      driver.get("https://www.selenium.dev/");             PrintOptions printOptions = new PrintOptions();             printOptions.setOrientation(PrintOptions.Orientation.LANDSCAPE);             PrintOptions.Orientation current_orientation = printOptions.getOrientation();

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/java/src/test/java/dev/selenium/interactions/PrintOptionsTest.java#L14-L17)

##### examples/java/src/test/java/dev/selenium/interactions/PrintOptionsTest.java

Copy  Close               package dev.selenium.interactions;          import org.junit.jupiter.api.Test;     import org.openqa.selenium.print.PageMargin;     import org.openqa.selenium.print.PrintOptions;     import org.openqa.selenium.print.PageSize;     import dev.selenium.BaseChromeTest;          public class PrintOptionsTest extends BaseChromeTest {              @Test         public void TestOrientation()          {             driver.get("https://www.selenium.dev/");             PrintOptions printOptions = new PrintOptions();             printOptions.setOrientation(PrintOptions.Orientation.LANDSCAPE);             PrintOptions.Orientation current_orientation = printOptions.getOrientation();         }              @Test         public void TestRange()          {             driver.get("https://www.selenium.dev/");             PrintOptions printOptions = new PrintOptions();             printOptions.setPageRanges("1-2");             String[] current_range = printOptions.getPageRanges();         }              @Test         public void TestSize()          {             driver.get("https://www.selenium.dev/");             PrintOptions printOptions = new PrintOptions();             printOptions.setPageSize(new PageSize(27.94, 21.59)); // A4 size in cm             double currentHeight = printOptions.getPageSize().getHeight(); // use getWidth() to retrieve width         }              @Test         public void TestMargins()          {             driver.get("https://www.selenium.dev/");             PrintOptions printOptions = new PrintOptions();             PageMargin margins = new PageMargin(1.0,1.0,1.0,1.0);             printOptions.setPageMargin(margins);             double topMargin = margins.getTop();             double bottomMargin = margins.getBottom();             double leftMargin = margins.getLeft();             double rightMargin = margins.getRight();         }              @Test         public void TestScale()          {             driver.get("https://www.selenium.dev/");             PrintOptions printOptions = new PrintOptions();             printOptions.setScale(.50);             double current_scale = printOptions.getScale();         }              @Test         public void TestBackground()          {             driver.get("https://www.selenium.dev/");             PrintOptions printOptions = new PrintOptions();             printOptions.setBackground(true);             boolean current_background = printOptions.getBackground();         }              @Test         public void TestShrinkToFit()          {             driver.get("https://www.selenium.dev/");             PrintOptions printOptions = new PrintOptions();             printOptions.setShrinkToFit(true);             boolean current_shrink_to_fit = printOptions.getShrinkToFit();         }     }                            public void TestOrientation()             {                 IWebDriver driver = new ChromeDriver();                 driver.Navigate().GoToUrl("https://selenium.dev");                 PrintOptions printOptions  = new PrintOptions();                 printOptions.Orientation = PrintOrientation.Landscape;                 PrintOrientation currentOrientation = printOptions.Orientation;                 driver.Quit();

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/dotnet/SeleniumDocs/Interactions/PrintOptionsTest.cs#L12-L19)

##### examples/dotnet/SeleniumDocs/Interactions/PrintOptionsTest.cs

Copy  Close               using System;     using Microsoft.VisualStudio.TestTools.UnitTesting;     using OpenQA.Selenium;     using OpenQA.Selenium.Chrome;          namespace SeleniumDocumentation.SeleniumInteractions     {         [TestClass]         public class PrintOptionsTest         {             [TestMethod]             public void TestOrientation()             {                 IWebDriver driver = new ChromeDriver();                 driver.Navigate().GoToUrl("https://selenium.dev");                 PrintOptions printOptions  = new PrintOptions();                 printOptions.Orientation = PrintOrientation.Landscape;                 PrintOrientation currentOrientation = printOptions.Orientation;                 driver.Quit();             }                  [TestMethod]             public void TestRange()             {                 IWebDriver driver = new ChromeDriver();                 driver.Navigate().GoToUrl("https://selenium.dev");                 PrintOptions printOptions  = new PrintOptions();                 printOptions.AddPageRangeToPrint("1-3"); // add range of pages                 printOptions.AddPageToPrint(5); // add individual page                 driver.Quit();             }                  [TestMethod]             public void TestSize()             {                 IWebDriver driver = new ChromeDriver();                 driver.Navigate().GoToUrl("https://www.selenium.dev/");                 PrintOptions printOptions = new PrintOptions();                 PrintOptions.PageSize currentDimensions = printOptions.PageDimensions;                 driver.Quit();             }                  [TestMethod]             public void TestBackgrounds()             {                 IWebDriver driver = new ChromeDriver();                 driver.Navigate().GoToUrl("https://www.selenium.dev/");                 PrintOptions printOptions = new PrintOptions();                 printOptions.OutputBackgroundImages = true;                 bool currentBackgrounds = printOptions.OutputBackgroundImages;                 driver.Quit();             }                  [TestMethod]             public void TestMargins()             {                 IWebDriver driver = new ChromeDriver();                 driver.Navigate().GoToUrl("https://www.selenium.dev/");                 PrintOptions printOptions = new PrintOptions();                 PrintOptions.Margins currentMargins = printOptions.PageMargins;                 driver.Quit();             }                       [TestMethod]             public void TestScale()             {                 IWebDriver driver = new ChromeDriver();                 driver.Navigate().GoToUrl("https://www.selenium.dev/");                 PrintOptions printOptions = new PrintOptions();                 printOptions.ScaleFactor = 0.5;                 double currentScale = printOptions.ScaleFactor;                 driver.Quit();             }                  [TestMethod]             public void TestShrinkToFit()             {                 IWebDriver driver = new ChromeDriver();                 driver.Navigate().GoToUrl("https://www.selenium.dev/");                 PrintOptions printOptions = new PrintOptions();                 printOptions.ShrinkToFit = true;                 bool currentShrinkToFit = printOptions.ShrinkToFit;                 driver.Quit();             }                  [TestMethod]             public void PrintWithPrintsPageTest()             {                 WebDriver driver = new ChromeDriver();                 driver.Navigate().GoToUrl("https://www.selenium.dev/");                 PrintOptions printOptions = new PrintOptions();                 PrintDocument printedPage = driver.Print(printOptions);                 Assert.IsTrue(printedPage.AsBase64EncodedString.StartsWith("JVBER"));                 driver.Quit();             }         }     }     

[Implementation Missing](https://github.com/SeleniumHQ/selenium)                   driver.get("https://www.selenium.dev/")         print_options = PrintOptions()         print_options.orientation = "landscape" ## landscape or portrait

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/python/tests/interactions/test_print_options.py#L12-L14)

##### examples/python/tests/interactions/test\_print\_options.py

Copy  Close               import pytest     from selenium import webdriver     from selenium.webdriver.common.print_page_options import PrintOptions          @pytest.fixture()     def driver():         driver = webdriver.Chrome()         yield driver         driver.quit()          def test_orientation(driver):         driver.get("https://www.selenium.dev/")         print_options = PrintOptions()         print_options.orientation = "landscape" ## landscape or portrait         assert print_options.orientation == "landscape"          def test_range(driver):         driver.get("https://www.selenium.dev/")         print_options = PrintOptions()         print_options.page_ranges = ["1, 2, 3"] ## ["1", "2", "3"] or ["1-3"]         assert print_options.page_ranges == ["1, 2, 3"]          def test_size(driver):         driver.get("https://www.selenium.dev/")         print_options = PrintOptions()         print_options.page_height = 27.94  # Use page_width to assign width         assert print_options.page_height == 27.94          def test_margin(driver):         driver.get("https://www.selenium.dev/")         print_options = PrintOptions()         print_options.margin_top = 10         print_options.margin_bottom = 10         print_options.margin_left = 10         print_options.margin_right = 10         assert print_options.margin_top == 10         assert print_options.margin_bottom == 10         assert print_options.margin_left == 10         assert print_options.margin_right == 10          def test_scale(driver):         driver.get("https://www.selenium.dev/")         print_options = PrintOptions()         print_options.scale = 0.5 ## 0.1 to 2.0         current_scale = print_options.scale         assert current_scale == 0.5          def test_background(driver):         driver.get("https://www.selenium.dev/")         print_options = PrintOptions()         print_options.background = True ## True or False         assert print_options.background is True          def test_shrink_to_fit(driver):         driver.get("https://www.selenium.dev/")         print_options = PrintOptions()         print_options.shrink_to_fit = True ## True or False         assert print_options.shrink_to_fit is True     

[Implementation Missing](https://github.com/SeleniumHQ/selenium)

[Implementation Missing](https://github.com/SeleniumHQ/selenium)

### Range

Using the `getPageRanges()` and `setPageRanges()` methods, you can get/set the range of pages to print — e.g. “2-4”.

  * Java   * CSharp   * Ruby   * Python   * JavaScript   * Kotlin

                      driver.get("https://www.selenium.dev/");             PrintOptions printOptions = new PrintOptions();             printOptions.setPageRanges("1-2");             String[] current_range = printOptions.getPageRanges();

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/java/src/test/java/dev/selenium/interactions/PrintOptionsTest.java#L23-L26)

##### examples/java/src/test/java/dev/selenium/interactions/PrintOptionsTest.java

Copy  Close               package dev.selenium.interactions;          import org.junit.jupiter.api.Test;     import org.openqa.selenium.print.PageMargin;     import org.openqa.selenium.print.PrintOptions;     import org.openqa.selenium.print.PageSize;     import dev.selenium.BaseChromeTest;          public class PrintOptionsTest extends BaseChromeTest {              @Test         public void TestOrientation()          {             driver.get("https://www.selenium.dev/");             PrintOptions printOptions = new PrintOptions();             printOptions.setOrientation(PrintOptions.Orientation.LANDSCAPE);             PrintOptions.Orientation current_orientation = printOptions.getOrientation();         }              @Test         public void TestRange()          {             driver.get("https://www.selenium.dev/");             PrintOptions printOptions = new PrintOptions();             printOptions.setPageRanges("1-2");             String[] current_range = printOptions.getPageRanges();         }              @Test         public void TestSize()          {             driver.get("https://www.selenium.dev/");             PrintOptions printOptions = new PrintOptions();             printOptions.setPageSize(new PageSize(27.94, 21.59)); // A4 size in cm             double currentHeight = printOptions.getPageSize().getHeight(); // use getWidth() to retrieve width         }              @Test         public void TestMargins()          {             driver.get("https://www.selenium.dev/");             PrintOptions printOptions = new PrintOptions();             PageMargin margins = new PageMargin(1.0,1.0,1.0,1.0);             printOptions.setPageMargin(margins);             double topMargin = margins.getTop();             double bottomMargin = margins.getBottom();             double leftMargin = margins.getLeft();             double rightMargin = margins.getRight();         }              @Test         public void TestScale()          {             driver.get("https://www.selenium.dev/");             PrintOptions printOptions = new PrintOptions();             printOptions.setScale(.50);             double current_scale = printOptions.getScale();         }              @Test         public void TestBackground()          {             driver.get("https://www.selenium.dev/");             PrintOptions printOptions = new PrintOptions();             printOptions.setBackground(true);             boolean current_background = printOptions.getBackground();         }              @Test         public void TestShrinkToFit()          {             driver.get("https://www.selenium.dev/");             PrintOptions printOptions = new PrintOptions();             printOptions.setShrinkToFit(true);             boolean current_shrink_to_fit = printOptions.getShrinkToFit();         }     }                            [TestMethod]             public void TestRange()             {                 IWebDriver driver = new ChromeDriver();                 driver.Navigate().GoToUrl("https://selenium.dev");                 PrintOptions printOptions  = new PrintOptions();                 printOptions.AddPageRangeToPrint("1-3"); // add range of pages                 printOptions.AddPageToPrint(5); // add individual page

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/dotnet/SeleniumDocs/Interactions/PrintOptionsTest.cs#L22-L29)

##### examples/dotnet/SeleniumDocs/Interactions/PrintOptionsTest.cs

Copy  Close               using System;     using Microsoft.VisualStudio.TestTools.UnitTesting;     using OpenQA.Selenium;     using OpenQA.Selenium.Chrome;          namespace SeleniumDocumentation.SeleniumInteractions     {         [TestClass]         public class PrintOptionsTest         {             [TestMethod]             public void TestOrientation()             {                 IWebDriver driver = new ChromeDriver();                 driver.Navigate().GoToUrl("https://selenium.dev");                 PrintOptions printOptions  = new PrintOptions();                 printOptions.Orientation = PrintOrientation.Landscape;                 PrintOrientation currentOrientation = printOptions.Orientation;                 driver.Quit();             }                  [TestMethod]             public void TestRange()             {                 IWebDriver driver = new ChromeDriver();                 driver.Navigate().GoToUrl("https://selenium.dev");                 PrintOptions printOptions  = new PrintOptions();                 printOptions.AddPageRangeToPrint("1-3"); // add range of pages                 printOptions.AddPageToPrint(5); // add individual page                 driver.Quit();             }                  [TestMethod]             public void TestSize()             {                 IWebDriver driver = new ChromeDriver();                 driver.Navigate().GoToUrl("https://www.selenium.dev/");                 PrintOptions printOptions = new PrintOptions();                 PrintOptions.PageSize currentDimensions = printOptions.PageDimensions;                 driver.Quit();             }                  [TestMethod]             public void TestBackgrounds()             {                 IWebDriver driver = new ChromeDriver();                 driver.Navigate().GoToUrl("https://www.selenium.dev/");                 PrintOptions printOptions = new PrintOptions();                 printOptions.OutputBackgroundImages = true;                 bool currentBackgrounds = printOptions.OutputBackgroundImages;                 driver.Quit();             }                  [TestMethod]             public void TestMargins()             {                 IWebDriver driver = new ChromeDriver();                 driver.Navigate().GoToUrl("https://www.selenium.dev/");                 PrintOptions printOptions = new PrintOptions();                 PrintOptions.Margins currentMargins = printOptions.PageMargins;                 driver.Quit();             }                       [TestMethod]             public void TestScale()             {                 IWebDriver driver = new ChromeDriver();                 driver.Navigate().GoToUrl("https://www.selenium.dev/");                 PrintOptions printOptions = new PrintOptions();                 printOptions.ScaleFactor = 0.5;                 double currentScale = printOptions.ScaleFactor;                 driver.Quit();             }                  [TestMethod]             public void TestShrinkToFit()             {                 IWebDriver driver = new ChromeDriver();                 driver.Navigate().GoToUrl("https://www.selenium.dev/");                 PrintOptions printOptions = new PrintOptions();                 printOptions.ShrinkToFit = true;                 bool currentShrinkToFit = printOptions.ShrinkToFit;                 driver.Quit();             }                  [TestMethod]             public void PrintWithPrintsPageTest()             {                 WebDriver driver = new ChromeDriver();                 driver.Navigate().GoToUrl("https://www.selenium.dev/");                 PrintOptions printOptions = new PrintOptions();                 PrintDocument printedPage = driver.Print(printOptions);                 Assert.IsTrue(printedPage.AsBase64EncodedString.StartsWith("JVBER"));                 driver.Quit();             }         }     }     

[Implementation Missing](https://github.com/SeleniumHQ/selenium)                   driver.get("https://www.selenium.dev/")         print_options = PrintOptions()         print_options.page_ranges = ["1, 2, 3"] ## ["1", "2", "3"] or ["1-3"]

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/python/tests/interactions/test_print_options.py#L18-L20)

##### examples/python/tests/interactions/test\_print\_options.py

Copy  Close               import pytest     from selenium import webdriver     from selenium.webdriver.common.print_page_options import PrintOptions          @pytest.fixture()     def driver():         driver = webdriver.Chrome()         yield driver         driver.quit()          def test_orientation(driver):         driver.get("https://www.selenium.dev/")         print_options = PrintOptions()         print_options.orientation = "landscape" ## landscape or portrait         assert print_options.orientation == "landscape"          def test_range(driver):         driver.get("https://www.selenium.dev/")         print_options = PrintOptions()         print_options.page_ranges = ["1, 2, 3"] ## ["1", "2", "3"] or ["1-3"]         assert print_options.page_ranges == ["1, 2, 3"]          def test_size(driver):         driver.get("https://www.selenium.dev/")         print_options = PrintOptions()         print_options.page_height = 27.94  # Use page_width to assign width         assert print_options.page_height == 27.94          def test_margin(driver):         driver.get("https://www.selenium.dev/")         print_options = PrintOptions()         print_options.margin_top = 10         print_options.margin_bottom = 10         print_options.margin_left = 10         print_options.margin_right = 10         assert print_options.margin_top == 10         assert print_options.margin_bottom == 10         assert print_options.margin_left == 10         assert print_options.margin_right == 10          def test_scale(driver):         driver.get("https://www.selenium.dev/")         print_options = PrintOptions()         print_options.scale = 0.5 ## 0.1 to 2.0         current_scale = print_options.scale         assert current_scale == 0.5          def test_background(driver):         driver.get("https://www.selenium.dev/")         print_options = PrintOptions()         print_options.background = True ## True or False         assert print_options.background is True          def test_shrink_to_fit(driver):         driver.get("https://www.selenium.dev/")         print_options = PrintOptions()         print_options.shrink_to_fit = True ## True or False         assert print_options.shrink_to_fit is True     

[Implementation Missing](https://github.com/SeleniumHQ/selenium)

[Implementation Missing](https://github.com/SeleniumHQ/selenium)

### Size

Using the `getPageSize()` and `setPageSize()` methods, you can get/set the paper size to print — e.g. “A0”, “A6”, “Legal”, “Tabloid”, etc.

  * Java   * CSharp   * Ruby   * Python   * JavaScript   * Kotlin

                      driver.get("https://www.selenium.dev/");             PrintOptions printOptions = new PrintOptions();             printOptions.setPageSize(new PageSize(27.94, 21.59)); // A4 size in cm             double currentHeight = printOptions.getPageSize().getHeight(); // use getWidth() to retrieve width

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/java/src/test/java/dev/selenium/interactions/PrintOptionsTest.java#L32-L35)

##### examples/java/src/test/java/dev/selenium/interactions/PrintOptionsTest.java

Copy  Close               package dev.selenium.interactions;          import org.junit.jupiter.api.Test;     import org.openqa.selenium.print.PageMargin;     import org.openqa.selenium.print.PrintOptions;     import org.openqa.selenium.print.PageSize;     import dev.selenium.BaseChromeTest;          public class PrintOptionsTest extends BaseChromeTest {              @Test         public void TestOrientation()          {             driver.get("https://www.selenium.dev/");             PrintOptions printOptions = new PrintOptions();             printOptions.setOrientation(PrintOptions.Orientation.LANDSCAPE);             PrintOptions.Orientation current_orientation = printOptions.getOrientation();         }              @Test         public void TestRange()          {             driver.get("https://www.selenium.dev/");             PrintOptions printOptions = new PrintOptions();             printOptions.setPageRanges("1-2");             String[] current_range = printOptions.getPageRanges();         }              @Test         public void TestSize()          {             driver.get("https://www.selenium.dev/");             PrintOptions printOptions = new PrintOptions();             printOptions.setPageSize(new PageSize(27.94, 21.59)); // A4 size in cm             double currentHeight = printOptions.getPageSize().getHeight(); // use getWidth() to retrieve width         }              @Test         public void TestMargins()          {             driver.get("https://www.selenium.dev/");             PrintOptions printOptions = new PrintOptions();             PageMargin margins = new PageMargin(1.0,1.0,1.0,1.0);             printOptions.setPageMargin(margins);             double topMargin = margins.getTop();             double bottomMargin = margins.getBottom();             double leftMargin = margins.getLeft();             double rightMargin = margins.getRight();         }              @Test         public void TestScale()          {             driver.get("https://www.selenium.dev/");             PrintOptions printOptions = new PrintOptions();             printOptions.setScale(.50);             double current_scale = printOptions.getScale();         }              @Test         public void TestBackground()          {             driver.get("https://www.selenium.dev/");             PrintOptions printOptions = new PrintOptions();             printOptions.setBackground(true);             boolean current_background = printOptions.getBackground();         }              @Test         public void TestShrinkToFit()          {             driver.get("https://www.selenium.dev/");             PrintOptions printOptions = new PrintOptions();             printOptions.setShrinkToFit(true);             boolean current_shrink_to_fit = printOptions.getShrinkToFit();         }     }                            [TestMethod]             public void TestSize()             {                 IWebDriver driver = new ChromeDriver();                 driver.Navigate().GoToUrl("https://www.selenium.dev/");                 PrintOptions printOptions = new PrintOptions();

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/dotnet/SeleniumDocs/Interactions/PrintOptionsTest.cs#L32-L38)

##### examples/dotnet/SeleniumDocs/Interactions/PrintOptionsTest.cs

Copy  Close               using System;     using Microsoft.VisualStudio.TestTools.UnitTesting;     using OpenQA.Selenium;     using OpenQA.Selenium.Chrome;          namespace SeleniumDocumentation.SeleniumInteractions     {         [TestClass]         public class PrintOptionsTest         {             [TestMethod]             public void TestOrientation()             {                 IWebDriver driver = new ChromeDriver();                 driver.Navigate().GoToUrl("https://selenium.dev");                 PrintOptions printOptions  = new PrintOptions();                 printOptions.Orientation = PrintOrientation.Landscape;                 PrintOrientation currentOrientation = printOptions.Orientation;                 driver.Quit();             }                  [TestMethod]             public void TestRange()             {                 IWebDriver driver = new ChromeDriver();                 driver.Navigate().GoToUrl("https://selenium.dev");                 PrintOptions printOptions  = new PrintOptions();                 printOptions.AddPageRangeToPrint("1-3"); // add range of pages                 printOptions.AddPageToPrint(5); // add individual page                 driver.Quit();             }                  [TestMethod]             public void TestSize()             {                 IWebDriver driver = new ChromeDriver();                 driver.Navigate().GoToUrl("https://www.selenium.dev/");                 PrintOptions printOptions = new PrintOptions();                 PrintOptions.PageSize currentDimensions = printOptions.PageDimensions;                 driver.Quit();             }                  [TestMethod]             public void TestBackgrounds()             {                 IWebDriver driver = new ChromeDriver();                 driver.Navigate().GoToUrl("https://www.selenium.dev/");                 PrintOptions printOptions = new PrintOptions();                 printOptions.OutputBackgroundImages = true;                 bool currentBackgrounds = printOptions.OutputBackgroundImages;                 driver.Quit();             }                  [TestMethod]             public void TestMargins()             {                 IWebDriver driver = new ChromeDriver();                 driver.Navigate().GoToUrl("https://www.selenium.dev/");                 PrintOptions printOptions = new PrintOptions();                 PrintOptions.Margins currentMargins = printOptions.PageMargins;                 driver.Quit();             }                       [TestMethod]             public void TestScale()             {                 IWebDriver driver = new ChromeDriver();                 driver.Navigate().GoToUrl("https://www.selenium.dev/");                 PrintOptions printOptions = new PrintOptions();                 printOptions.ScaleFactor = 0.5;                 double currentScale = printOptions.ScaleFactor;                 driver.Quit();             }                  [TestMethod]             public void TestShrinkToFit()             {                 IWebDriver driver = new ChromeDriver();                 driver.Navigate().GoToUrl("https://www.selenium.dev/");                 PrintOptions printOptions = new PrintOptions();                 printOptions.ShrinkToFit = true;                 bool currentShrinkToFit = printOptions.ShrinkToFit;                 driver.Quit();             }                  [TestMethod]             public void PrintWithPrintsPageTest()             {                 WebDriver driver = new ChromeDriver();                 driver.Navigate().GoToUrl("https://www.selenium.dev/");                 PrintOptions printOptions = new PrintOptions();                 PrintDocument printedPage = driver.Print(printOptions);                 Assert.IsTrue(printedPage.AsBase64EncodedString.StartsWith("JVBER"));                 driver.Quit();             }         }     }     

[Implementation Missing](https://github.com/SeleniumHQ/selenium)                   driver.get("https://www.selenium.dev/")         print_options = PrintOptions()         print_options.page_height = 27.94  # Use page_width to assign width

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/python/tests/interactions/test_print_options.py#L24-L26)

##### examples/python/tests/interactions/test\_print\_options.py

Copy  Close               import pytest     from selenium import webdriver     from selenium.webdriver.common.print_page_options import PrintOptions          @pytest.fixture()     def driver():         driver = webdriver.Chrome()         yield driver         driver.quit()          def test_orientation(driver):         driver.get("https://www.selenium.dev/")         print_options = PrintOptions()         print_options.orientation = "landscape" ## landscape or portrait         assert print_options.orientation == "landscape"          def test_range(driver):         driver.get("https://www.selenium.dev/")         print_options = PrintOptions()         print_options.page_ranges = ["1, 2, 3"] ## ["1", "2", "3"] or ["1-3"]         assert print_options.page_ranges == ["1, 2, 3"]          def test_size(driver):         driver.get("https://www.selenium.dev/")         print_options = PrintOptions()         print_options.page_height = 27.94  # Use page_width to assign width         assert print_options.page_height == 27.94          def test_margin(driver):         driver.get("https://www.selenium.dev/")         print_options = PrintOptions()         print_options.margin_top = 10         print_options.margin_bottom = 10         print_options.margin_left = 10         print_options.margin_right = 10         assert print_options.margin_top == 10         assert print_options.margin_bottom == 10         assert print_options.margin_left == 10         assert print_options.margin_right == 10          def test_scale(driver):         driver.get("https://www.selenium.dev/")         print_options = PrintOptions()         print_options.scale = 0.5 ## 0.1 to 2.0         current_scale = print_options.scale         assert current_scale == 0.5          def test_background(driver):         driver.get("https://www.selenium.dev/")         print_options = PrintOptions()         print_options.background = True ## True or False         assert print_options.background is True          def test_shrink_to_fit(driver):         driver.get("https://www.selenium.dev/")         print_options = PrintOptions()         print_options.shrink_to_fit = True ## True or False         assert print_options.shrink_to_fit is True     

[Implementation Missing](https://github.com/SeleniumHQ/selenium)

[Implementation Missing](https://github.com/SeleniumHQ/selenium)

### Margins

Using the `getPageMargin()` and `setPageMargin()` methods, you can set the margin sizes of the page you wish to print — i.e. top, bottom, left, and right margins.

  * Java   * CSharp   * Ruby   * Python   * JavaScript   * Kotlin

                      driver.get("https://www.selenium.dev/");             PrintOptions printOptions = new PrintOptions();             PageMargin margins = new PageMargin(1.0,1.0,1.0,1.0);             printOptions.setPageMargin(margins);             double topMargin = margins.getTop();             double bottomMargin = margins.getBottom();             double leftMargin = margins.getLeft();             double rightMargin = margins.getRight();

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/java/src/test/java/dev/selenium/interactions/PrintOptionsTest.java#L41-L48)

##### examples/java/src/test/java/dev/selenium/interactions/PrintOptionsTest.java

Copy  Close               package dev.selenium.interactions;          import org.junit.jupiter.api.Test;     import org.openqa.selenium.print.PageMargin;     import org.openqa.selenium.print.PrintOptions;     import org.openqa.selenium.print.PageSize;     import dev.selenium.BaseChromeTest;          public class PrintOptionsTest extends BaseChromeTest {              @Test         public void TestOrientation()          {             driver.get("https://www.selenium.dev/");             PrintOptions printOptions = new PrintOptions();             printOptions.setOrientation(PrintOptions.Orientation.LANDSCAPE);             PrintOptions.Orientation current_orientation = printOptions.getOrientation();         }              @Test         public void TestRange()          {             driver.get("https://www.selenium.dev/");             PrintOptions printOptions = new PrintOptions();             printOptions.setPageRanges("1-2");             String[] current_range = printOptions.getPageRanges();         }              @Test         public void TestSize()          {             driver.get("https://www.selenium.dev/");             PrintOptions printOptions = new PrintOptions();             printOptions.setPageSize(new PageSize(27.94, 21.59)); // A4 size in cm             double currentHeight = printOptions.getPageSize().getHeight(); // use getWidth() to retrieve width         }              @Test         public void TestMargins()          {             driver.get("https://www.selenium.dev/");             PrintOptions printOptions = new PrintOptions();             PageMargin margins = new PageMargin(1.0,1.0,1.0,1.0);             printOptions.setPageMargin(margins);             double topMargin = margins.getTop();             double bottomMargin = margins.getBottom();             double leftMargin = margins.getLeft();             double rightMargin = margins.getRight();         }              @Test         public void TestScale()          {             driver.get("https://www.selenium.dev/");             PrintOptions printOptions = new PrintOptions();             printOptions.setScale(.50);             double current_scale = printOptions.getScale();         }              @Test         public void TestBackground()          {             driver.get("https://www.selenium.dev/");             PrintOptions printOptions = new PrintOptions();             printOptions.setBackground(true);             boolean current_background = printOptions.getBackground();         }              @Test         public void TestShrinkToFit()          {             driver.get("https://www.selenium.dev/");             PrintOptions printOptions = new PrintOptions();             printOptions.setShrinkToFit(true);             boolean current_shrink_to_fit = printOptions.getShrinkToFit();         }     }                                driver.Quit();             }                  [TestMethod]             public void TestMargins()             {                 IWebDriver driver = new ChromeDriver();

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/dotnet/SeleniumDocs/Interactions/PrintOptionsTest.cs#L51-L57)

##### examples/dotnet/SeleniumDocs/Interactions/PrintOptionsTest.cs

Copy  Close               using System;     using Microsoft.VisualStudio.TestTools.UnitTesting;     using OpenQA.Selenium;     using OpenQA.Selenium.Chrome;          namespace SeleniumDocumentation.SeleniumInteractions     {         [TestClass]         public class PrintOptionsTest         {             [TestMethod]             public void TestOrientation()             {                 IWebDriver driver = new ChromeDriver();                 driver.Navigate().GoToUrl("https://selenium.dev");                 PrintOptions printOptions  = new PrintOptions();                 printOptions.Orientation = PrintOrientation.Landscape;                 PrintOrientation currentOrientation = printOptions.Orientation;                 driver.Quit();             }                  [TestMethod]             public void TestRange()             {                 IWebDriver driver = new ChromeDriver();                 driver.Navigate().GoToUrl("https://selenium.dev");                 PrintOptions printOptions  = new PrintOptions();                 printOptions.AddPageRangeToPrint("1-3"); // add range of pages                 printOptions.AddPageToPrint(5); // add individual page                 driver.Quit();             }                  [TestMethod]             public void TestSize()             {                 IWebDriver driver = new ChromeDriver();                 driver.Navigate().GoToUrl("https://www.selenium.dev/");                 PrintOptions printOptions = new PrintOptions();                 PrintOptions.PageSize currentDimensions = printOptions.PageDimensions;                 driver.Quit();             }                  [TestMethod]             public void TestBackgrounds()             {                 IWebDriver driver = new ChromeDriver();                 driver.Navigate().GoToUrl("https://www.selenium.dev/");                 PrintOptions printOptions = new PrintOptions();                 printOptions.OutputBackgroundImages = true;                 bool currentBackgrounds = printOptions.OutputBackgroundImages;                 driver.Quit();             }                  [TestMethod]             public void TestMargins()             {                 IWebDriver driver = new ChromeDriver();                 driver.Navigate().GoToUrl("https://www.selenium.dev/");                 PrintOptions printOptions = new PrintOptions();                 PrintOptions.Margins currentMargins = printOptions.PageMargins;                 driver.Quit();             }                       [TestMethod]             public void TestScale()             {                 IWebDriver driver = new ChromeDriver();                 driver.Navigate().GoToUrl("https://www.selenium.dev/");                 PrintOptions printOptions = new PrintOptions();                 printOptions.ScaleFactor = 0.5;                 double currentScale = printOptions.ScaleFactor;                 driver.Quit();             }                  [TestMethod]             public void TestShrinkToFit()             {                 IWebDriver driver = new ChromeDriver();                 driver.Navigate().GoToUrl("https://www.selenium.dev/");                 PrintOptions printOptions = new PrintOptions();                 printOptions.ShrinkToFit = true;                 bool currentShrinkToFit = printOptions.ShrinkToFit;                 driver.Quit();             }                  [TestMethod]             public void PrintWithPrintsPageTest()             {                 WebDriver driver = new ChromeDriver();                 driver.Navigate().GoToUrl("https://www.selenium.dev/");                 PrintOptions printOptions = new PrintOptions();                 PrintDocument printedPage = driver.Print(printOptions);                 Assert.IsTrue(printedPage.AsBase64EncodedString.StartsWith("JVBER"));                 driver.Quit();             }         }     }     

[Implementation Missing](https://github.com/SeleniumHQ/selenium)                   driver.get("https://www.selenium.dev/")         print_options = PrintOptions()         print_options.margin_top = 10         print_options.margin_bottom = 10         print_options.margin_left = 10         print_options.margin_right = 10

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/python/tests/interactions/test_print_options.py#L30-L35)

##### examples/python/tests/interactions/test\_print\_options.py

Copy  Close               import pytest     from selenium import webdriver     from selenium.webdriver.common.print_page_options import PrintOptions          @pytest.fixture()     def driver():         driver = webdriver.Chrome()         yield driver         driver.quit()          def test_orientation(driver):         driver.get("https://www.selenium.dev/")         print_options = PrintOptions()         print_options.orientation = "landscape" ## landscape or portrait         assert print_options.orientation == "landscape"          def test_range(driver):         driver.get("https://www.selenium.dev/")         print_options = PrintOptions()         print_options.page_ranges = ["1, 2, 3"] ## ["1", "2", "3"] or ["1-3"]         assert print_options.page_ranges == ["1, 2, 3"]          def test_size(driver):         driver.get("https://www.selenium.dev/")         print_options = PrintOptions()         print_options.page_height = 27.94  # Use page_width to assign width         assert print_options.page_height == 27.94          def test_margin(driver):         driver.get("https://www.selenium.dev/")         print_options = PrintOptions()         print_options.margin_top = 10         print_options.margin_bottom = 10         print_options.margin_left = 10         print_options.margin_right = 10         assert print_options.margin_top == 10         assert print_options.margin_bottom == 10         assert print_options.margin_left == 10         assert print_options.margin_right == 10          def test_scale(driver):         driver.get("https://www.selenium.dev/")         print_options = PrintOptions()         print_options.scale = 0.5 ## 0.1 to 2.0         current_scale = print_options.scale         assert current_scale == 0.5          def test_background(driver):         driver.get("https://www.selenium.dev/")         print_options = PrintOptions()         print_options.background = True ## True or False         assert print_options.background is True          def test_shrink_to_fit(driver):         driver.get("https://www.selenium.dev/")         print_options = PrintOptions()         print_options.shrink_to_fit = True ## True or False         assert print_options.shrink_to_fit is True     

[Implementation Missing](https://github.com/SeleniumHQ/selenium)

[Implementation Missing](https://github.com/SeleniumHQ/selenium)

### Scale

Using `getScale()` and `setScale()` methods, you can get/set the scale of the page you wish to print — e.g. 1.0 is 100% or default, 0.25 is 25%, etc.

  * Java   * CSharp   * Ruby   * Python   * JavaScript   * Kotlin

                  {             driver.get("https://www.selenium.dev/");             PrintOptions printOptions = new PrintOptions();             printOptions.setScale(.50);             double current_scale = printOptions.getScale();

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/java/src/test/java/dev/selenium/interactions/PrintOptionsTest.java#L53-L57)

##### examples/java/src/test/java/dev/selenium/interactions/PrintOptionsTest.java

Copy  Close               package dev.selenium.interactions;          import org.junit.jupiter.api.Test;     import org.openqa.selenium.print.PageMargin;     import org.openqa.selenium.print.PrintOptions;     import org.openqa.selenium.print.PageSize;     import dev.selenium.BaseChromeTest;          public class PrintOptionsTest extends BaseChromeTest {              @Test         public void TestOrientation()          {             driver.get("https://www.selenium.dev/");             PrintOptions printOptions = new PrintOptions();             printOptions.setOrientation(PrintOptions.Orientation.LANDSCAPE);             PrintOptions.Orientation current_orientation = printOptions.getOrientation();         }              @Test         public void TestRange()          {             driver.get("https://www.selenium.dev/");             PrintOptions printOptions = new PrintOptions();             printOptions.setPageRanges("1-2");             String[] current_range = printOptions.getPageRanges();         }              @Test         public void TestSize()          {             driver.get("https://www.selenium.dev/");             PrintOptions printOptions = new PrintOptions();             printOptions.setPageSize(new PageSize(27.94, 21.59)); // A4 size in cm             double currentHeight = printOptions.getPageSize().getHeight(); // use getWidth() to retrieve width         }              @Test         public void TestMargins()          {             driver.get("https://www.selenium.dev/");             PrintOptions printOptions = new PrintOptions();             PageMargin margins = new PageMargin(1.0,1.0,1.0,1.0);             printOptions.setPageMargin(margins);             double topMargin = margins.getTop();             double bottomMargin = margins.getBottom();             double leftMargin = margins.getLeft();             double rightMargin = margins.getRight();         }              @Test         public void TestScale()          {             driver.get("https://www.selenium.dev/");             PrintOptions printOptions = new PrintOptions();             printOptions.setScale(.50);             double current_scale = printOptions.getScale();         }              @Test         public void TestBackground()          {             driver.get("https://www.selenium.dev/");             PrintOptions printOptions = new PrintOptions();             printOptions.setBackground(true);             boolean current_background = printOptions.getBackground();         }              @Test         public void TestShrinkToFit()          {             driver.get("https://www.selenium.dev/");             PrintOptions printOptions = new PrintOptions();             printOptions.setShrinkToFit(true);             boolean current_shrink_to_fit = printOptions.getShrinkToFit();         }     }                                driver.Quit();             }                       [TestMethod]             public void TestScale()             {                 IWebDriver driver = new ChromeDriver();

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/dotnet/SeleniumDocs/Interactions/PrintOptionsTest.cs#L61-L68)

##### examples/dotnet/SeleniumDocs/Interactions/PrintOptionsTest.cs

Copy  Close               using System;     using Microsoft.VisualStudio.TestTools.UnitTesting;     using OpenQA.Selenium;     using OpenQA.Selenium.Chrome;          namespace SeleniumDocumentation.SeleniumInteractions     {         [TestClass]         public class PrintOptionsTest         {             [TestMethod]             public void TestOrientation()             {                 IWebDriver driver = new ChromeDriver();                 driver.Navigate().GoToUrl("https://selenium.dev");                 PrintOptions printOptions  = new PrintOptions();                 printOptions.Orientation = PrintOrientation.Landscape;                 PrintOrientation currentOrientation = printOptions.Orientation;                 driver.Quit();             }                  [TestMethod]             public void TestRange()             {                 IWebDriver driver = new ChromeDriver();                 driver.Navigate().GoToUrl("https://selenium.dev");                 PrintOptions printOptions  = new PrintOptions();                 printOptions.AddPageRangeToPrint("1-3"); // add range of pages                 printOptions.AddPageToPrint(5); // add individual page                 driver.Quit();             }                  [TestMethod]             public void TestSize()             {                 IWebDriver driver = new ChromeDriver();                 driver.Navigate().GoToUrl("https://www.selenium.dev/");                 PrintOptions printOptions = new PrintOptions();                 PrintOptions.PageSize currentDimensions = printOptions.PageDimensions;                 driver.Quit();             }                  [TestMethod]             public void TestBackgrounds()             {                 IWebDriver driver = new ChromeDriver();                 driver.Navigate().GoToUrl("https://www.selenium.dev/");                 PrintOptions printOptions = new PrintOptions();                 printOptions.OutputBackgroundImages = true;                 bool currentBackgrounds = printOptions.OutputBackgroundImages;                 driver.Quit();             }                  [TestMethod]             public void TestMargins()             {                 IWebDriver driver = new ChromeDriver();                 driver.Navigate().GoToUrl("https://www.selenium.dev/");                 PrintOptions printOptions = new PrintOptions();                 PrintOptions.Margins currentMargins = printOptions.PageMargins;                 driver.Quit();             }                       [TestMethod]             public void TestScale()             {                 IWebDriver driver = new ChromeDriver();                 driver.Navigate().GoToUrl("https://www.selenium.dev/");                 PrintOptions printOptions = new PrintOptions();                 printOptions.ScaleFactor = 0.5;                 double currentScale = printOptions.ScaleFactor;                 driver.Quit();             }                  [TestMethod]             public void TestShrinkToFit()             {                 IWebDriver driver = new ChromeDriver();                 driver.Navigate().GoToUrl("https://www.selenium.dev/");                 PrintOptions printOptions = new PrintOptions();                 printOptions.ShrinkToFit = true;                 bool currentShrinkToFit = printOptions.ShrinkToFit;                 driver.Quit();             }                  [TestMethod]             public void PrintWithPrintsPageTest()             {                 WebDriver driver = new ChromeDriver();                 driver.Navigate().GoToUrl("https://www.selenium.dev/");                 PrintOptions printOptions = new PrintOptions();                 PrintDocument printedPage = driver.Print(printOptions);                 Assert.IsTrue(printedPage.AsBase64EncodedString.StartsWith("JVBER"));                 driver.Quit();             }         }     }     

[Implementation Missing](https://github.com/SeleniumHQ/selenium)                   driver.get("https://www.selenium.dev/")         print_options = PrintOptions()         print_options.scale = 0.5 ## 0.1 to 2.0         current_scale = print_options.scale

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/python/tests/interactions/test_print_options.py#L42-L45)

##### examples/python/tests/interactions/test\_print\_options.py

Copy  Close               import pytest     from selenium import webdriver     from selenium.webdriver.common.print_page_options import PrintOptions          @pytest.fixture()     def driver():         driver = webdriver.Chrome()         yield driver         driver.quit()          def test_orientation(driver):         driver.get("https://www.selenium.dev/")         print_options = PrintOptions()         print_options.orientation = "landscape" ## landscape or portrait         assert print_options.orientation == "landscape"          def test_range(driver):         driver.get("https://www.selenium.dev/")         print_options = PrintOptions()         print_options.page_ranges = ["1, 2, 3"] ## ["1", "2", "3"] or ["1-3"]         assert print_options.page_ranges == ["1, 2, 3"]          def test_size(driver):         driver.get("https://www.selenium.dev/")         print_options = PrintOptions()         print_options.page_height = 27.94  # Use page_width to assign width         assert print_options.page_height == 27.94          def test_margin(driver):         driver.get("https://www.selenium.dev/")         print_options = PrintOptions()         print_options.margin_top = 10         print_options.margin_bottom = 10         print_options.margin_left = 10         print_options.margin_right = 10         assert print_options.margin_top == 10         assert print_options.margin_bottom == 10         assert print_options.margin_left == 10         assert print_options.margin_right == 10          def test_scale(driver):         driver.get("https://www.selenium.dev/")         print_options = PrintOptions()         print_options.scale = 0.5 ## 0.1 to 2.0         current_scale = print_options.scale         assert current_scale == 0.5          def test_background(driver):         driver.get("https://www.selenium.dev/")         print_options = PrintOptions()         print_options.background = True ## True or False         assert print_options.background is True          def test_shrink_to_fit(driver):         driver.get("https://www.selenium.dev/")         print_options = PrintOptions()         print_options.shrink_to_fit = True ## True or False         assert print_options.shrink_to_fit is True     

[Implementation Missing](https://github.com/SeleniumHQ/selenium)

[Implementation Missing](https://github.com/SeleniumHQ/selenium)

### Background

Using `getBackground()` and `setBackground()` methods, you can get/set whether background colors and images appear — boolean `true` or `false`.

  * Java   * CSharp   * Ruby   * Python   * JavaScript   * Kotlin

                      driver.get("https://www.selenium.dev/");             PrintOptions printOptions = new PrintOptions();             printOptions.setBackground(true);             boolean current_background = printOptions.getBackground();

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/java/src/test/java/dev/selenium/interactions/PrintOptionsTest.java#L63-L66)

##### examples/java/src/test/java/dev/selenium/interactions/PrintOptionsTest.java

Copy  Close               package dev.selenium.interactions;          import org.junit.jupiter.api.Test;     import org.openqa.selenium.print.PageMargin;     import org.openqa.selenium.print.PrintOptions;     import org.openqa.selenium.print.PageSize;     import dev.selenium.BaseChromeTest;          public class PrintOptionsTest extends BaseChromeTest {              @Test         public void TestOrientation()          {             driver.get("https://www.selenium.dev/");             PrintOptions printOptions = new PrintOptions();             printOptions.setOrientation(PrintOptions.Orientation.LANDSCAPE);             PrintOptions.Orientation current_orientation = printOptions.getOrientation();         }              @Test         public void TestRange()          {             driver.get("https://www.selenium.dev/");             PrintOptions printOptions = new PrintOptions();             printOptions.setPageRanges("1-2");             String[] current_range = printOptions.getPageRanges();         }              @Test         public void TestSize()          {             driver.get("https://www.selenium.dev/");             PrintOptions printOptions = new PrintOptions();             printOptions.setPageSize(new PageSize(27.94, 21.59)); // A4 size in cm             double currentHeight = printOptions.getPageSize().getHeight(); // use getWidth() to retrieve width         }              @Test         public void TestMargins()          {             driver.get("https://www.selenium.dev/");             PrintOptions printOptions = new PrintOptions();             PageMargin margins = new PageMargin(1.0,1.0,1.0,1.0);             printOptions.setPageMargin(margins);             double topMargin = margins.getTop();             double bottomMargin = margins.getBottom();             double leftMargin = margins.getLeft();             double rightMargin = margins.getRight();         }              @Test         public void TestScale()          {             driver.get("https://www.selenium.dev/");             PrintOptions printOptions = new PrintOptions();             printOptions.setScale(.50);             double current_scale = printOptions.getScale();         }              @Test         public void TestBackground()          {             driver.get("https://www.selenium.dev/");             PrintOptions printOptions = new PrintOptions();             printOptions.setBackground(true);             boolean current_background = printOptions.getBackground();         }              @Test         public void TestShrinkToFit()          {             driver.get("https://www.selenium.dev/");             PrintOptions printOptions = new PrintOptions();             printOptions.setShrinkToFit(true);             boolean current_shrink_to_fit = printOptions.getShrinkToFit();         }     }                            }                  [TestMethod]             public void TestBackgrounds()             {                 IWebDriver driver = new ChromeDriver();                 driver.Navigate().GoToUrl("https://www.selenium.dev/");                 PrintOptions printOptions = new PrintOptions();

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/dotnet/SeleniumDocs/Interactions/PrintOptionsTest.cs#L41-L48)

##### examples/dotnet/SeleniumDocs/Interactions/PrintOptionsTest.cs

Copy  Close               using System;     using Microsoft.VisualStudio.TestTools.UnitTesting;     using OpenQA.Selenium;     using OpenQA.Selenium.Chrome;          namespace SeleniumDocumentation.SeleniumInteractions     {         [TestClass]         public class PrintOptionsTest         {             [TestMethod]             public void TestOrientation()             {                 IWebDriver driver = new ChromeDriver();                 driver.Navigate().GoToUrl("https://selenium.dev");                 PrintOptions printOptions  = new PrintOptions();                 printOptions.Orientation = PrintOrientation.Landscape;                 PrintOrientation currentOrientation = printOptions.Orientation;                 driver.Quit();             }                  [TestMethod]             public void TestRange()             {                 IWebDriver driver = new ChromeDriver();                 driver.Navigate().GoToUrl("https://selenium.dev");                 PrintOptions printOptions  = new PrintOptions();                 printOptions.AddPageRangeToPrint("1-3"); // add range of pages                 printOptions.AddPageToPrint(5); // add individual page                 driver.Quit();             }                  [TestMethod]             public void TestSize()             {                 IWebDriver driver = new ChromeDriver();                 driver.Navigate().GoToUrl("https://www.selenium.dev/");                 PrintOptions printOptions = new PrintOptions();                 PrintOptions.PageSize currentDimensions = printOptions.PageDimensions;                 driver.Quit();             }                  [TestMethod]             public void TestBackgrounds()             {                 IWebDriver driver = new ChromeDriver();                 driver.Navigate().GoToUrl("https://www.selenium.dev/");                 PrintOptions printOptions = new PrintOptions();                 printOptions.OutputBackgroundImages = true;                 bool currentBackgrounds = printOptions.OutputBackgroundImages;                 driver.Quit();             }                  [TestMethod]             public void TestMargins()             {                 IWebDriver driver = new ChromeDriver();                 driver.Navigate().GoToUrl("https://www.selenium.dev/");                 PrintOptions printOptions = new PrintOptions();                 PrintOptions.Margins currentMargins = printOptions.PageMargins;                 driver.Quit();             }                       [TestMethod]             public void TestScale()             {                 IWebDriver driver = new ChromeDriver();                 driver.Navigate().GoToUrl("https://www.selenium.dev/");                 PrintOptions printOptions = new PrintOptions();                 printOptions.ScaleFactor = 0.5;                 double currentScale = printOptions.ScaleFactor;                 driver.Quit();             }                  [TestMethod]             public void TestShrinkToFit()             {                 IWebDriver driver = new ChromeDriver();                 driver.Navigate().GoToUrl("https://www.selenium.dev/");                 PrintOptions printOptions = new PrintOptions();                 printOptions.ShrinkToFit = true;                 bool currentShrinkToFit = printOptions.ShrinkToFit;                 driver.Quit();             }                  [TestMethod]             public void PrintWithPrintsPageTest()             {                 WebDriver driver = new ChromeDriver();                 driver.Navigate().GoToUrl("https://www.selenium.dev/");                 PrintOptions printOptions = new PrintOptions();                 PrintDocument printedPage = driver.Print(printOptions);                 Assert.IsTrue(printedPage.AsBase64EncodedString.StartsWith("JVBER"));                 driver.Quit();             }         }     }     

[Implementation Missing](https://github.com/SeleniumHQ/selenium)                   driver.get("https://www.selenium.dev/")         print_options = PrintOptions()         print_options.background = True ## True or False

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/python/tests/interactions/test_print_options.py#L49-L51)

##### examples/python/tests/interactions/test\_print\_options.py

Copy  Close               import pytest     from selenium import webdriver     from selenium.webdriver.common.print_page_options import PrintOptions          @pytest.fixture()     def driver():         driver = webdriver.Chrome()         yield driver         driver.quit()          def test_orientation(driver):         driver.get("https://www.selenium.dev/")         print_options = PrintOptions()         print_options.orientation = "landscape" ## landscape or portrait         assert print_options.orientation == "landscape"          def test_range(driver):         driver.get("https://www.selenium.dev/")         print_options = PrintOptions()         print_options.page_ranges = ["1, 2, 3"] ## ["1", "2", "3"] or ["1-3"]         assert print_options.page_ranges == ["1, 2, 3"]          def test_size(driver):         driver.get("https://www.selenium.dev/")         print_options = PrintOptions()         print_options.page_height = 27.94  # Use page_width to assign width         assert print_options.page_height == 27.94          def test_margin(driver):         driver.get("https://www.selenium.dev/")         print_options = PrintOptions()         print_options.margin_top = 10         print_options.margin_bottom = 10         print_options.margin_left = 10         print_options.margin_right = 10         assert print_options.margin_top == 10         assert print_options.margin_bottom == 10         assert print_options.margin_left == 10         assert print_options.margin_right == 10          def test_scale(driver):         driver.get("https://www.selenium.dev/")         print_options = PrintOptions()         print_options.scale = 0.5 ## 0.1 to 2.0         current_scale = print_options.scale         assert current_scale == 0.5          def test_background(driver):         driver.get("https://www.selenium.dev/")         print_options = PrintOptions()         print_options.background = True ## True or False         assert print_options.background is True          def test_shrink_to_fit(driver):         driver.get("https://www.selenium.dev/")         print_options = PrintOptions()         print_options.shrink_to_fit = True ## True or False         assert print_options.shrink_to_fit is True     

[Implementation Missing](https://github.com/SeleniumHQ/selenium)

[Implementation Missing](https://github.com/SeleniumHQ/selenium)

### ShrinkToFit

Using `getShrinkToFit()` and `setShrinkToFit()` methods, you can get/set whether the page will shrink-to-fit content on the page — boolean `true` or `false`.

  * Java   * CSharp   * Ruby   * Python   * JavaScript   * Kotlin

                      driver.get("https://www.selenium.dev/");             PrintOptions printOptions = new PrintOptions();             printOptions.setShrinkToFit(true);             boolean current_shrink_to_fit = printOptions.getShrinkToFit();

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/java/src/test/java/dev/selenium/interactions/PrintOptionsTest.java#L72-L75)

##### examples/java/src/test/java/dev/selenium/interactions/PrintOptionsTest.java

Copy  Close               package dev.selenium.interactions;          import org.junit.jupiter.api.Test;     import org.openqa.selenium.print.PageMargin;     import org.openqa.selenium.print.PrintOptions;     import org.openqa.selenium.print.PageSize;     import dev.selenium.BaseChromeTest;          public class PrintOptionsTest extends BaseChromeTest {              @Test         public void TestOrientation()          {             driver.get("https://www.selenium.dev/");             PrintOptions printOptions = new PrintOptions();             printOptions.setOrientation(PrintOptions.Orientation.LANDSCAPE);             PrintOptions.Orientation current_orientation = printOptions.getOrientation();         }              @Test         public void TestRange()          {             driver.get("https://www.selenium.dev/");             PrintOptions printOptions = new PrintOptions();             printOptions.setPageRanges("1-2");             String[] current_range = printOptions.getPageRanges();         }              @Test         public void TestSize()          {             driver.get("https://www.selenium.dev/");             PrintOptions printOptions = new PrintOptions();             printOptions.setPageSize(new PageSize(27.94, 21.59)); // A4 size in cm             double currentHeight = printOptions.getPageSize().getHeight(); // use getWidth() to retrieve width         }              @Test         public void TestMargins()          {             driver.get("https://www.selenium.dev/");             PrintOptions printOptions = new PrintOptions();             PageMargin margins = new PageMargin(1.0,1.0,1.0,1.0);             printOptions.setPageMargin(margins);             double topMargin = margins.getTop();             double bottomMargin = margins.getBottom();             double leftMargin = margins.getLeft();             double rightMargin = margins.getRight();         }              @Test         public void TestScale()          {             driver.get("https://www.selenium.dev/");             PrintOptions printOptions = new PrintOptions();             printOptions.setScale(.50);             double current_scale = printOptions.getScale();         }              @Test         public void TestBackground()          {             driver.get("https://www.selenium.dev/");             PrintOptions printOptions = new PrintOptions();             printOptions.setBackground(true);             boolean current_background = printOptions.getBackground();         }              @Test         public void TestShrinkToFit()          {             driver.get("https://www.selenium.dev/");             PrintOptions printOptions = new PrintOptions();             printOptions.setShrinkToFit(true);             boolean current_shrink_to_fit = printOptions.getShrinkToFit();         }     }                                printOptions.ScaleFactor = 0.5;                 double currentScale = printOptions.ScaleFactor;                 driver.Quit();             }                  [TestMethod]             public void TestShrinkToFit()             {

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/dotnet/SeleniumDocs/Interactions/PrintOptionsTest.cs#L71-L78)

##### examples/dotnet/SeleniumDocs/Interactions/PrintOptionsTest.cs

Copy  Close               using System;     using Microsoft.VisualStudio.TestTools.UnitTesting;     using OpenQA.Selenium;     using OpenQA.Selenium.Chrome;          namespace SeleniumDocumentation.SeleniumInteractions     {         [TestClass]         public class PrintOptionsTest         {             [TestMethod]             public void TestOrientation()             {                 IWebDriver driver = new ChromeDriver();                 driver.Navigate().GoToUrl("https://selenium.dev");                 PrintOptions printOptions  = new PrintOptions();                 printOptions.Orientation = PrintOrientation.Landscape;                 PrintOrientation currentOrientation = printOptions.Orientation;                 driver.Quit();             }                  [TestMethod]             public void TestRange()             {                 IWebDriver driver = new ChromeDriver();                 driver.Navigate().GoToUrl("https://selenium.dev");                 PrintOptions printOptions  = new PrintOptions();                 printOptions.AddPageRangeToPrint("1-3"); // add range of pages                 printOptions.AddPageToPrint(5); // add individual page                 driver.Quit();             }                  [TestMethod]             public void TestSize()             {                 IWebDriver driver = new ChromeDriver();                 driver.Navigate().GoToUrl("https://www.selenium.dev/");                 PrintOptions printOptions = new PrintOptions();                 PrintOptions.PageSize currentDimensions = printOptions.PageDimensions;                 driver.Quit();             }                  [TestMethod]             public void TestBackgrounds()             {                 IWebDriver driver = new ChromeDriver();                 driver.Navigate().GoToUrl("https://www.selenium.dev/");                 PrintOptions printOptions = new PrintOptions();                 printOptions.OutputBackgroundImages = true;                 bool currentBackgrounds = printOptions.OutputBackgroundImages;                 driver.Quit();             }                  [TestMethod]             public void TestMargins()             {                 IWebDriver driver = new ChromeDriver();                 driver.Navigate().GoToUrl("https://www.selenium.dev/");                 PrintOptions printOptions = new PrintOptions();                 PrintOptions.Margins currentMargins = printOptions.PageMargins;                 driver.Quit();             }                       [TestMethod]             public void TestScale()             {                 IWebDriver driver = new ChromeDriver();                 driver.Navigate().GoToUrl("https://www.selenium.dev/");                 PrintOptions printOptions = new PrintOptions();                 printOptions.ScaleFactor = 0.5;                 double currentScale = printOptions.ScaleFactor;                 driver.Quit();             }                  [TestMethod]             public void TestShrinkToFit()             {                 IWebDriver driver = new ChromeDriver();                 driver.Navigate().GoToUrl("https://www.selenium.dev/");                 PrintOptions printOptions = new PrintOptions();                 printOptions.ShrinkToFit = true;                 bool currentShrinkToFit = printOptions.ShrinkToFit;                 driver.Quit();             }                  [TestMethod]             public void PrintWithPrintsPageTest()             {                 WebDriver driver = new ChromeDriver();                 driver.Navigate().GoToUrl("https://www.selenium.dev/");                 PrintOptions printOptions = new PrintOptions();                 PrintDocument printedPage = driver.Print(printOptions);                 Assert.IsTrue(printedPage.AsBase64EncodedString.StartsWith("JVBER"));                 driver.Quit();             }         }     }     

[Implementation Missing](https://github.com/SeleniumHQ/selenium)                   driver.get("https://www.selenium.dev/")         print_options = PrintOptions()         print_options.shrink_to_fit = True ## True or False

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/python/tests/interactions/test_print_options.py#L55-L57)

##### examples/python/tests/interactions/test\_print\_options.py

Copy  Close               import pytest     from selenium import webdriver     from selenium.webdriver.common.print_page_options import PrintOptions          @pytest.fixture()     def driver():         driver = webdriver.Chrome()         yield driver         driver.quit()          def test_orientation(driver):         driver.get("https://www.selenium.dev/")         print_options = PrintOptions()         print_options.orientation = "landscape" ## landscape or portrait         assert print_options.orientation == "landscape"          def test_range(driver):         driver.get("https://www.selenium.dev/")         print_options = PrintOptions()         print_options.page_ranges = ["1, 2, 3"] ## ["1", "2", "3"] or ["1-3"]         assert print_options.page_ranges == ["1, 2, 3"]          def test_size(driver):         driver.get("https://www.selenium.dev/")         print_options = PrintOptions()         print_options.page_height = 27.94  # Use page_width to assign width         assert print_options.page_height == 27.94          def test_margin(driver):         driver.get("https://www.selenium.dev/")         print_options = PrintOptions()         print_options.margin_top = 10         print_options.margin_bottom = 10         print_options.margin_left = 10         print_options.margin_right = 10         assert print_options.margin_top == 10         assert print_options.margin_bottom == 10         assert print_options.margin_left == 10         assert print_options.margin_right == 10          def test_scale(driver):         driver.get("https://www.selenium.dev/")         print_options = PrintOptions()         print_options.scale = 0.5 ## 0.1 to 2.0         current_scale = print_options.scale         assert current_scale == 0.5          def test_background(driver):         driver.get("https://www.selenium.dev/")         print_options = PrintOptions()         print_options.background = True ## True or False         assert print_options.background is True          def test_shrink_to_fit(driver):         driver.get("https://www.selenium.dev/")         print_options = PrintOptions()         print_options.shrink_to_fit = True ## True or False         assert print_options.shrink_to_fit is True     

[Implementation Missing](https://github.com/SeleniumHQ/selenium)

[Implementation Missing](https://github.com/SeleniumHQ/selenium)

## Printing

Once you’ve configured your PrintOptions, you’re ready to print the page. To do this, you can invoke the print function, which generates a PDF representation of the web page. The resulting PDF can be saved to your local storage for further use or distribution. Using `PrintsPage()`, the print command will return the PDF data in base64-encoded format, which can be decoded and written to a file in your desired location, and using `BrowsingContext()` will return a String.

There may currently be multiple implementations depending on your language of choice. For example, with Java you have the ability to print using either `BrowingContext()` or `PrintsPage()`. Both take `PrintOptions()` objects as a parameter.

Note: `BrowsingContext()` is part of Selenium’s BiDi implementation. To enable BiDi see [Enabling Bidi](https://www.selenium.dev/documentation/webdriver/bidi/)

  * Java   * CSharp   * Ruby   * Python   * JavaScript   * Kotlin

**PrintsPage\(\)**                       driver.get("https://www.selenium.dev/");             PrintsPage printer = (PrintsPage) driver;             PrintOptions printOptions = new PrintOptions();             Pdf printedPage = printer.print(printOptions);             Assertions.assertNotNull(printedPage);

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/java/src/test/java/dev/selenium/interactions/PrintsPageTest.java#L27-L31)

##### examples/java/src/test/java/dev/selenium/interactions/PrintsPageTest.java

Copy  Close               package dev.selenium.interactions;          import org.openqa.selenium.Pdf;     import org.openqa.selenium.bidi.browsingcontext.BrowsingContext;     import org.junit.jupiter.api.Test;     import org.junit.jupiter.api.Assertions;     import org.junit.jupiter.api.BeforeEach;     import org.openqa.selenium.print.PageMargin;     import org.openqa.selenium.print.PrintOptions;     import org.openqa.selenium.chrome.ChromeOptions;     import org.openqa.selenium.chrome.ChromeDriver;     import org.openqa.selenium.PrintsPage;     import dev.selenium.BaseTest;          public class PrintsPageTest extends BaseTest{              @BeforeEach         public void setup() {             ChromeOptions options = getDefaultChromeOptions();             options.setCapability("webSocketUrl", true);             driver = new ChromeDriver(options);         }              @Test         public void PrintWithPrintsPageTest()          {             driver.get("https://www.selenium.dev/");             PrintsPage printer = (PrintsPage) driver;             PrintOptions printOptions = new PrintOptions();             Pdf printedPage = printer.print(printOptions);             Assertions.assertNotNull(printedPage);         }              @Test         public void PrintWithBrowsingContextTest()          {             BrowsingContext browsingContext = new BrowsingContext(driver, driver.getWindowHandle());             driver.get("https://www.selenium.dev/selenium/web/formPage.html");             PrintOptions printOptions = new PrintOptions();             String printPage = browsingContext.print(printOptions);             Assertions.assertTrue(printPage.length() > 0);         }     }     

**BrowsingContext\(\)**                       BrowsingContext browsingContext = new BrowsingContext(driver, driver.getWindowHandle());             driver.get("https://www.selenium.dev/selenium/web/formPage.html");             PrintOptions printOptions = new PrintOptions();             String printPage = browsingContext.print(printOptions);             Assertions.assertTrue(printPage.length() > 0);

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/java/src/test/java/dev/selenium/interactions/PrintsPageTest.java#L37-L41)

##### examples/java/src/test/java/dev/selenium/interactions/PrintsPageTest.java

Copy  Close               package dev.selenium.interactions;          import org.openqa.selenium.Pdf;     import org.openqa.selenium.bidi.browsingcontext.BrowsingContext;     import org.junit.jupiter.api.Test;     import org.junit.jupiter.api.Assertions;     import org.junit.jupiter.api.BeforeEach;     import org.openqa.selenium.print.PageMargin;     import org.openqa.selenium.print.PrintOptions;     import org.openqa.selenium.chrome.ChromeOptions;     import org.openqa.selenium.chrome.ChromeDriver;     import org.openqa.selenium.PrintsPage;     import dev.selenium.BaseTest;          public class PrintsPageTest extends BaseTest{              @BeforeEach         public void setup() {             ChromeOptions options = getDefaultChromeOptions();             options.setCapability("webSocketUrl", true);             driver = new ChromeDriver(options);         }              @Test         public void PrintWithPrintsPageTest()          {             driver.get("https://www.selenium.dev/");             PrintsPage printer = (PrintsPage) driver;             PrintOptions printOptions = new PrintOptions();             Pdf printedPage = printer.print(printOptions);             Assertions.assertNotNull(printedPage);         }              @Test         public void PrintWithBrowsingContextTest()          {             BrowsingContext browsingContext = new BrowsingContext(driver, driver.getWindowHandle());             driver.get("https://www.selenium.dev/selenium/web/formPage.html");             PrintOptions printOptions = new PrintOptions();             String printPage = browsingContext.print(printOptions);             Assertions.assertTrue(printPage.length() > 0);         }     }                                PrintOptions printOptions = new PrintOptions();                 printOptions.ShrinkToFit = true;                 bool currentShrinkToFit = printOptions.ShrinkToFit;                 driver.Quit();             }                  [TestMethod]             public void PrintWithPrintsPageTest()

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/dotnet/SeleniumDocs/Interactions/PrintOptionsTest.cs#L81-L88)

##### examples/dotnet/SeleniumDocs/Interactions/PrintOptionsTest.cs

Copy  Close               using System;     using Microsoft.VisualStudio.TestTools.UnitTesting;     using OpenQA.Selenium;     using OpenQA.Selenium.Chrome;          namespace SeleniumDocumentation.SeleniumInteractions     {         [TestClass]         public class PrintOptionsTest         {             [TestMethod]             public void TestOrientation()             {                 IWebDriver driver = new ChromeDriver();                 driver.Navigate().GoToUrl("https://selenium.dev");                 PrintOptions printOptions  = new PrintOptions();                 printOptions.Orientation = PrintOrientation.Landscape;                 PrintOrientation currentOrientation = printOptions.Orientation;                 driver.Quit();             }                  [TestMethod]             public void TestRange()             {                 IWebDriver driver = new ChromeDriver();                 driver.Navigate().GoToUrl("https://selenium.dev");                 PrintOptions printOptions  = new PrintOptions();                 printOptions.AddPageRangeToPrint("1-3"); // add range of pages                 printOptions.AddPageToPrint(5); // add individual page                 driver.Quit();             }                  [TestMethod]             public void TestSize()             {                 IWebDriver driver = new ChromeDriver();                 driver.Navigate().GoToUrl("https://www.selenium.dev/");                 PrintOptions printOptions = new PrintOptions();                 PrintOptions.PageSize currentDimensions = printOptions.PageDimensions;                 driver.Quit();             }                  [TestMethod]             public void TestBackgrounds()             {                 IWebDriver driver = new ChromeDriver();                 driver.Navigate().GoToUrl("https://www.selenium.dev/");                 PrintOptions printOptions = new PrintOptions();                 printOptions.OutputBackgroundImages = true;                 bool currentBackgrounds = printOptions.OutputBackgroundImages;                 driver.Quit();             }                  [TestMethod]             public void TestMargins()             {                 IWebDriver driver = new ChromeDriver();                 driver.Navigate().GoToUrl("https://www.selenium.dev/");                 PrintOptions printOptions = new PrintOptions();                 PrintOptions.Margins currentMargins = printOptions.PageMargins;                 driver.Quit();             }                       [TestMethod]             public void TestScale()             {                 IWebDriver driver = new ChromeDriver();                 driver.Navigate().GoToUrl("https://www.selenium.dev/");                 PrintOptions printOptions = new PrintOptions();                 printOptions.ScaleFactor = 0.5;                 double currentScale = printOptions.ScaleFactor;                 driver.Quit();             }                  [TestMethod]             public void TestShrinkToFit()             {                 IWebDriver driver = new ChromeDriver();                 driver.Navigate().GoToUrl("https://www.selenium.dev/");                 PrintOptions printOptions = new PrintOptions();                 printOptions.ShrinkToFit = true;                 bool currentShrinkToFit = printOptions.ShrinkToFit;                 driver.Quit();             }                  [TestMethod]             public void PrintWithPrintsPageTest()             {                 WebDriver driver = new ChromeDriver();                 driver.Navigate().GoToUrl("https://www.selenium.dev/");                 PrintOptions printOptions = new PrintOptions();                 PrintDocument printedPage = driver.Print(printOptions);                 Assert.IsTrue(printedPage.AsBase64EncodedString.StartsWith("JVBER"));                 driver.Quit();             }         }     }     

[Implementation Missing](https://github.com/SeleniumHQ/selenium)

**print\_page\(\)**                   driver.get("https://www.selenium.dev/")         print_options = PrintOptions()         pdf = driver.print_page(print_options)

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/python/tests/interactions/test_prints_page.py#L12-L14)

##### examples/python/tests/interactions/test\_prints\_page.py

Copy  Close               import pytest     from selenium import webdriver     from selenium.webdriver.common.print_page_options import PrintOptions          pytest.fixture()     def driver():         driver = webdriver.Chrome()         yield driver         driver.quit()          def test_prints_page(driver):         driver.get("https://www.selenium.dev/")         print_options = PrintOptions()         pdf = driver.print_page(print_options)         assert len(pdf) > 0

[Implementation Missing](https://github.com/SeleniumHQ/selenium)

[Implementation Missing](https://github.com/SeleniumHQ/selenium)

# 6 - Working with windows and tabs

## Windows and tabs

### Get window handle

WebDriver does not make the distinction between windows and tabs. If your site opens a new tab or window, Selenium will let you work with it using a window handle. Each window has a unique identifier which remains persistent in a single session. You can get the window handle of the current window by using:

[Move Code](https://www.selenium.dev/documentation/about/contributing/#moving-examples)

  * Java   * Python   * CSharp   * Ruby   * JavaScript   * Kotlin

                      // Navigate to Url             driver.get("https://www.selenium.dev/selenium/web/window_switching_tests/page_with_frame.html");             //fetch handle of this             String currHandle=driver.getWindowHandle();             assertNotNull(currHandle);

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/java/src/test/java/dev/selenium/interactions/WindowsTest.java#L16-L20)

##### examples/java/src/test/java/dev/selenium/interactions/WindowsTest.java

Copy  Close               package dev.selenium.interactions;          import org.openqa.selenium.*;     import org.openqa.selenium.chrome.ChromeDriver;     import java.time.Duration;     import org.junit.jupiter.api.Test;     import static org.junit.jupiter.api.Assertions.*;          public class WindowsTest {              @Test         public void windowsExampleCode() {                      	WebDriver driver = new ChromeDriver();             driver.manage().timeouts().implicitlyWait(Duration.ofMillis(500));             // Navigate to Url             driver.get("https://www.selenium.dev/selenium/web/window_switching_tests/page_with_frame.html");             //fetch handle of this             String currHandle=driver.getWindowHandle();             assertNotNull(currHandle);                          //click on link to open a new window             driver.findElement(By.linkText("Open new window")).click();             //fetch handles of all windows, there will be two, [0]- default, [1] - new window             Object[] windowHandles=driver.getWindowHandles().toArray();             driver.switchTo().window((String) windowHandles[1]);             //assert on title of new window             String title=driver.getTitle();             assertEquals("Simple Page",title);                          //closing current window             driver.close();             //Switch back to the old tab or window             driver.switchTo().window((String) windowHandles[0]);                          //Opens a new tab and switches to new tab             driver.switchTo().newWindow(WindowType.TAB);             assertEquals("",driver.getTitle());                          //Opens a new window and switches to new window             driver.switchTo().newWindow(WindowType.WINDOW);             assertEquals("",driver.getTitle());                               //quitting driver             driver.quit(); //close all windows     	           	}     }               driver.current_window_handle                           // Navigate to Url                   driver.Url="https://www.selenium.dev/selenium/web/window_switching_tests/page_with_frame.html";                   //fetch handle of this                   String currHandle = driver.CurrentWindowHandle;                   Assert.IsNotNull(currHandle);

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/dotnet/SeleniumDocs/Interactions/WindowsTest.cs#L17-L21)

##### examples/dotnet/SeleniumDocs/Interactions/WindowsTest.cs

Copy  Close               using System;       using Microsoft.VisualStudio.TestTools.UnitTesting;       using OpenQA.Selenium;       using OpenQA.Selenium.Chrome;       using System.Collections.Generic;       namespace SeleniumDocs.Interactions       {           [TestClass]           public class WindowsTest           {               [TestMethod]               public void TestWindowCommands()               {                   WebDriver driver = new ChromeDriver();                   driver.Manage().Timeouts().ImplicitWait = TimeSpan.FromMilliseconds(500);                          // Navigate to Url                   driver.Url="https://www.selenium.dev/selenium/web/window_switching_tests/page_with_frame.html";                   //fetch handle of this                   String currHandle = driver.CurrentWindowHandle;                   Assert.IsNotNull(currHandle);                          //click on link to open a new window                   driver.FindElement(By.LinkText("Open new window")).Click();                   //fetch handles of all windows, there will be two, [0]- default, [1] - new window                   IList<string> windowHandles = new List<string>(driver.WindowHandles);                   driver.SwitchTo().Window(windowHandles[1]);                   //assert on title of new window                   String title = driver.Title;                   Assert.AreEqual("Simple Page", title);                          //closing current window                   driver.Close();                   //Switch back to the old tab or window                   driver.SwitchTo().Window(windowHandles[0]);                          //Opens a new tab and switches to new tab                   driver.SwitchTo().NewWindow(WindowType.Tab);                   Assert.AreEqual("", driver.Title);                          //Opens a new window and switches to new window                   driver.SwitchTo().NewWindow(WindowType.Window);                   Assert.AreEqual("", driver.Title);                          //quitting driver                   driver.Quit(); //close all windows               }           }       }                      driver.window_handle               await driver.getWindowHandle();               driver.windowHandle

### Switching windows or tabs

Clicking a link which opens in a [new window](https://seleniumhq.github.io) will focus the new window or tab on screen, but WebDriver will not know which window the Operating System considers active. To work with the new window you will need to switch to it. For this, we fetch all window handles, and store them in an array. The array position fills in the order the window is launched. So first position will be default browser, and so on.

[Move Code](https://www.selenium.dev/documentation/about/contributing/#moving-examples)

  * Java   * Python   * CSharp   * Ruby   * JavaScript   * Kotlin

                      //click on link to open a new window             driver.findElement(By.linkText("Open new window")).click();             //fetch handles of all windows, there will be two, [0]- default, [1] - new window             Object[] windowHandles=driver.getWindowHandles().toArray();             driver.switchTo().window((String) windowHandles[1]);             //assert on title of new window             String title=driver.getTitle();             assertEquals("Simple Page",title);

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/java/src/test/java/dev/selenium/interactions/WindowsTest.java#L22-L29)

##### examples/java/src/test/java/dev/selenium/interactions/WindowsTest.java

Copy  Close               package dev.selenium.interactions;          import org.openqa.selenium.*;     import org.openqa.selenium.chrome.ChromeDriver;     import java.time.Duration;     import org.junit.jupiter.api.Test;     import static org.junit.jupiter.api.Assertions.*;          public class WindowsTest {              @Test         public void windowsExampleCode() {                      	WebDriver driver = new ChromeDriver();             driver.manage().timeouts().implicitlyWait(Duration.ofMillis(500));             // Navigate to Url             driver.get("https://www.selenium.dev/selenium/web/window_switching_tests/page_with_frame.html");             //fetch handle of this             String currHandle=driver.getWindowHandle();             assertNotNull(currHandle);                          //click on link to open a new window             driver.findElement(By.linkText("Open new window")).click();             //fetch handles of all windows, there will be two, [0]- default, [1] - new window             Object[] windowHandles=driver.getWindowHandles().toArray();             driver.switchTo().window((String) windowHandles[1]);             //assert on title of new window             String title=driver.getTitle();             assertEquals("Simple Page",title);                          //closing current window             driver.close();             //Switch back to the old tab or window             driver.switchTo().window((String) windowHandles[0]);                          //Opens a new tab and switches to new tab             driver.switchTo().newWindow(WindowType.TAB);             assertEquals("",driver.getTitle());                          //Opens a new window and switches to new window             driver.switchTo().newWindow(WindowType.WINDOW);             assertEquals("",driver.getTitle());                               //quitting driver             driver.quit(); //close all windows     	           	}     }               from selenium import webdriver     from selenium.webdriver.support.ui import WebDriverWait     from selenium.webdriver.support import expected_conditions as EC          with webdriver.Firefox() as driver:         # Open URL         driver.get("https://seleniumhq.github.io")              # Setup wait for later         wait = WebDriverWait(driver, 10)              # Store the ID of the original window         original_window = driver.current_window_handle              # Check we don't have other windows open already         assert len(driver.window_handles) == 1              # Click the link which opens in a new window         driver.find_element(By.LINK_TEXT, "new window").click()              # Wait for the new window or tab         wait.until(EC.number_of_windows_to_be(2))              # Loop through until we find a new window handle         for window_handle in driver.window_handles:             if window_handle != original_window:                 driver.switch_to.window(window_handle)                 break              # Wait for the new tab to finish loading content         wait.until(EC.title_is("SeleniumHQ Browser Automation"))                                  //click on link to open a new window                   driver.FindElement(By.LinkText("Open new window")).Click();                   //fetch handles of all windows, there will be two, [0]- default, [1] - new window                   IList<string> windowHandles = new List<string>(driver.WindowHandles);                   driver.SwitchTo().Window(windowHandles[1]);                   //assert on title of new window                   String title = driver.Title;                   Assert.AreEqual("Simple Page", title);

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/dotnet/SeleniumDocs/Interactions/WindowsTest.cs#L23-L30)

##### examples/dotnet/SeleniumDocs/Interactions/WindowsTest.cs

Copy  Close               using System;       using Microsoft.VisualStudio.TestTools.UnitTesting;       using OpenQA.Selenium;       using OpenQA.Selenium.Chrome;       using System.Collections.Generic;       namespace SeleniumDocs.Interactions       {           [TestClass]           public class WindowsTest           {               [TestMethod]               public void TestWindowCommands()               {                   WebDriver driver = new ChromeDriver();                   driver.Manage().Timeouts().ImplicitWait = TimeSpan.FromMilliseconds(500);                          // Navigate to Url                   driver.Url="https://www.selenium.dev/selenium/web/window_switching_tests/page_with_frame.html";                   //fetch handle of this                   String currHandle = driver.CurrentWindowHandle;                   Assert.IsNotNull(currHandle);                          //click on link to open a new window                   driver.FindElement(By.LinkText("Open new window")).Click();                   //fetch handles of all windows, there will be two, [0]- default, [1] - new window                   IList<string> windowHandles = new List<string>(driver.WindowHandles);                   driver.SwitchTo().Window(windowHandles[1]);                   //assert on title of new window                   String title = driver.Title;                   Assert.AreEqual("Simple Page", title);                          //closing current window                   driver.Close();                   //Switch back to the old tab or window                   driver.SwitchTo().Window(windowHandles[0]);                          //Opens a new tab and switches to new tab                   driver.SwitchTo().NewWindow(WindowType.Tab);                   Assert.AreEqual("", driver.Title);                          //Opens a new window and switches to new window                   driver.SwitchTo().NewWindow(WindowType.Window);                   Assert.AreEqual("", driver.Title);                          //quitting driver                   driver.Quit(); //close all windows               }           }       }                          # Store the ID of the original window     original_window = driver.window_handle              # Check we don't have other windows open already     assert(driver.window_handles.length == 1, 'Expected one window')              # Click the link which opens in a new window     driver.find_element(link: 'new window').click              # Wait for the new window or tab     wait.until { driver.window_handles.length == 2 }              #Loop through until we find a new window handle     driver.window_handles.each do |handle|         if handle != original_window             driver.switch_to.window handle             break         end     end              #Wait for the new tab to finish loading content     wait.until { driver.title == 'Selenium documentation'}                      //Store the ID of the original window     const originalWindow = await driver.getWindowHandle();          //Check we don't have other windows open already     assert((await driver.getAllWindowHandles()).length === 1);          //Click the link which opens in a new window     await driver.findElement(By.linkText('new window')).click();          //Wait for the new window or tab     await driver.wait(         async () => (await driver.getAllWindowHandles()).length === 2,         10000       );          //Loop through until we find a new window handle     const windows = await driver.getAllWindowHandles();     windows.forEach(async handle => {       if (handle !== originalWindow) {         await driver.switchTo().window(handle);       }     });          //Wait for the new tab to finish loading content     await driver.wait(until.titleIs('Selenium documentation'), 10000);                           //Store the ID of the original window     val originalWindow = driver.getWindowHandle()          //Check we don't have other windows open already     assert(driver.getWindowHandles().size() === 1)          //Click the link which opens in a new window     driver.findElement(By.linkText("new window")).click()          //Wait for the new window or tab     wait.until(numberOfWindowsToBe(2))          //Loop through until we find a new window handle     for (windowHandle in driver.getWindowHandles()) {         if (!originalWindow.contentEquals(windowHandle)) {             driver.switchTo().window(windowHandle)             break         }     }          //Wait for the new tab to finish loading content     wait.until(titleIs("Selenium documentation"))            

### Closing a window or tab

When you are finished with a window or tab _and_ it is not the last window or tab open in your browser, you should close it and switch back to the window you were using previously. Assuming you followed the code sample in the previous section you will have the previous window handle stored in a variable. Put this together and you will get:

[Move Code](https://www.selenium.dev/documentation/about/contributing/#moving-examples)

  * Java   * Python   * CSharp   * Ruby   * JavaScript   * Kotlin

                      //closing current window             driver.close();             //Switch back to the old tab or window             driver.switchTo().window((String) windowHandles[0]);

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/java/src/test/java/dev/selenium/interactions/WindowsTest.java#L31-L34)

##### examples/java/src/test/java/dev/selenium/interactions/WindowsTest.java

Copy  Close               package dev.selenium.interactions;          import org.openqa.selenium.*;     import org.openqa.selenium.chrome.ChromeDriver;     import java.time.Duration;     import org.junit.jupiter.api.Test;     import static org.junit.jupiter.api.Assertions.*;          public class WindowsTest {              @Test         public void windowsExampleCode() {                      	WebDriver driver = new ChromeDriver();             driver.manage().timeouts().implicitlyWait(Duration.ofMillis(500));             // Navigate to Url             driver.get("https://www.selenium.dev/selenium/web/window_switching_tests/page_with_frame.html");             //fetch handle of this             String currHandle=driver.getWindowHandle();             assertNotNull(currHandle);                          //click on link to open a new window             driver.findElement(By.linkText("Open new window")).click();             //fetch handles of all windows, there will be two, [0]- default, [1] - new window             Object[] windowHandles=driver.getWindowHandles().toArray();             driver.switchTo().window((String) windowHandles[1]);             //assert on title of new window             String title=driver.getTitle();             assertEquals("Simple Page",title);                          //closing current window             driver.close();             //Switch back to the old tab or window             driver.switchTo().window((String) windowHandles[0]);                          //Opens a new tab and switches to new tab             driver.switchTo().newWindow(WindowType.TAB);             assertEquals("",driver.getTitle());                          //Opens a new window and switches to new window             driver.switchTo().newWindow(WindowType.WINDOW);             assertEquals("",driver.getTitle());                               //quitting driver             driver.quit(); //close all windows     	           	}     }                   #Close the tab or window     driver.close()              #Switch back to the old tab or window     driver.switch_to.window(original_window)                                  //closing current window                   driver.Close();                   //Switch back to the old tab or window                   driver.SwitchTo().Window(windowHandles[0]);

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/dotnet/SeleniumDocs/Interactions/WindowsTest.cs#L32-L35)

##### examples/dotnet/SeleniumDocs/Interactions/WindowsTest.cs

Copy  Close               using System;       using Microsoft.VisualStudio.TestTools.UnitTesting;       using OpenQA.Selenium;       using OpenQA.Selenium.Chrome;       using System.Collections.Generic;       namespace SeleniumDocs.Interactions       {           [TestClass]           public class WindowsTest           {               [TestMethod]               public void TestWindowCommands()               {                   WebDriver driver = new ChromeDriver();                   driver.Manage().Timeouts().ImplicitWait = TimeSpan.FromMilliseconds(500);                          // Navigate to Url                   driver.Url="https://www.selenium.dev/selenium/web/window_switching_tests/page_with_frame.html";                   //fetch handle of this                   String currHandle = driver.CurrentWindowHandle;                   Assert.IsNotNull(currHandle);                          //click on link to open a new window                   driver.FindElement(By.LinkText("Open new window")).Click();                   //fetch handles of all windows, there will be two, [0]- default, [1] - new window                   IList<string> windowHandles = new List<string>(driver.WindowHandles);                   driver.SwitchTo().Window(windowHandles[1]);                   //assert on title of new window                   String title = driver.Title;                   Assert.AreEqual("Simple Page", title);                          //closing current window                   driver.Close();                   //Switch back to the old tab or window                   driver.SwitchTo().Window(windowHandles[0]);                          //Opens a new tab and switches to new tab                   driver.SwitchTo().NewWindow(WindowType.Tab);                   Assert.AreEqual("", driver.Title);                          //Opens a new window and switches to new window                   driver.SwitchTo().NewWindow(WindowType.Window);                   Assert.AreEqual("", driver.Title);                          //quitting driver                   driver.Quit(); //close all windows               }           }       }                          #Close the tab or window     driver.close              #Switch back to the old tab or window     driver.switch_to.window original_window                      //Close the tab or window     await driver.close();          //Switch back to the old tab or window     await driver.switchTo().window(originalWindow);                           //Close the tab or window     driver.close()          //Switch back to the old tab or window     driver.switchTo().window(originalWindow)            

Forgetting to switch back to another window handle after closing a window will leave WebDriver executing on the now closed page, and will trigger a **No Such Window Exception**. You must switch back to a valid window handle in order to continue execution.

### Create new window \(or\) new tab and switch

Creates a new window \(or\) tab and will focus the new window or tab on screen. You don’t need to switch to work with the new window \(or\) tab. If you have more than two windows \(or\) tabs opened other than the new window, you can loop over both windows or tabs that WebDriver can see, and switch to the one which is not the original.

**Note: This feature works with Selenium 4 and later versions.**

[ Move Code](https://www.selenium.dev/documentation/about/contributing/#moving-examples)

  * Java   * Python   * CSharp   * Ruby   * JavaScript   * Kotlin

                      //Opens a new tab and switches to new tab             driver.switchTo().newWindow(WindowType.TAB);             assertEquals("",driver.getTitle());                          //Opens a new window and switches to new window             driver.switchTo().newWindow(WindowType.WINDOW);             assertEquals("",driver.getTitle());

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/java/src/test/java/dev/selenium/interactions/WindowsTest.java#L36-L42)

##### examples/java/src/test/java/dev/selenium/interactions/WindowsTest.java

Copy  Close               package dev.selenium.interactions;          import org.openqa.selenium.*;     import org.openqa.selenium.chrome.ChromeDriver;     import java.time.Duration;     import org.junit.jupiter.api.Test;     import static org.junit.jupiter.api.Assertions.*;          public class WindowsTest {              @Test         public void windowsExampleCode() {                      	WebDriver driver = new ChromeDriver();             driver.manage().timeouts().implicitlyWait(Duration.ofMillis(500));             // Navigate to Url             driver.get("https://www.selenium.dev/selenium/web/window_switching_tests/page_with_frame.html");             //fetch handle of this             String currHandle=driver.getWindowHandle();             assertNotNull(currHandle);                          //click on link to open a new window             driver.findElement(By.linkText("Open new window")).click();             //fetch handles of all windows, there will be two, [0]- default, [1] - new window             Object[] windowHandles=driver.getWindowHandles().toArray();             driver.switchTo().window((String) windowHandles[1]);             //assert on title of new window             String title=driver.getTitle();             assertEquals("Simple Page",title);                          //closing current window             driver.close();             //Switch back to the old tab or window             driver.switchTo().window((String) windowHandles[0]);                          //Opens a new tab and switches to new tab             driver.switchTo().newWindow(WindowType.TAB);             assertEquals("",driver.getTitle());                          //Opens a new window and switches to new window             driver.switchTo().newWindow(WindowType.WINDOW);             assertEquals("",driver.getTitle());                               //quitting driver             driver.quit(); //close all windows     	           	}     }                   # Opens a new tab and switches to new tab     driver.switch_to.new_window('tab')              # Opens a new window and switches to new window     driver.switch_to.new_window('window')                                  //Opens a new tab and switches to new tab                   driver.SwitchTo().NewWindow(WindowType.Tab);                   Assert.AreEqual("", driver.Title);                          //Opens a new window and switches to new window                   driver.SwitchTo().NewWindow(WindowType.Window);                   Assert.AreEqual("", driver.Title);

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/dotnet/SeleniumDocs/Interactions/WindowsTest.cs#L37-L43)

##### examples/dotnet/SeleniumDocs/Interactions/WindowsTest.cs

Copy  Close               using System;       using Microsoft.VisualStudio.TestTools.UnitTesting;       using OpenQA.Selenium;       using OpenQA.Selenium.Chrome;       using System.Collections.Generic;       namespace SeleniumDocs.Interactions       {           [TestClass]           public class WindowsTest           {               [TestMethod]               public void TestWindowCommands()               {                   WebDriver driver = new ChromeDriver();                   driver.Manage().Timeouts().ImplicitWait = TimeSpan.FromMilliseconds(500);                          // Navigate to Url                   driver.Url="https://www.selenium.dev/selenium/web/window_switching_tests/page_with_frame.html";                   //fetch handle of this                   String currHandle = driver.CurrentWindowHandle;                   Assert.IsNotNull(currHandle);                          //click on link to open a new window                   driver.FindElement(By.LinkText("Open new window")).Click();                   //fetch handles of all windows, there will be two, [0]- default, [1] - new window                   IList<string> windowHandles = new List<string>(driver.WindowHandles);                   driver.SwitchTo().Window(windowHandles[1]);                   //assert on title of new window                   String title = driver.Title;                   Assert.AreEqual("Simple Page", title);                          //closing current window                   driver.Close();                   //Switch back to the old tab or window                   driver.SwitchTo().Window(windowHandles[0]);                          //Opens a new tab and switches to new tab                   driver.SwitchTo().NewWindow(WindowType.Tab);                   Assert.AreEqual("", driver.Title);                          //Opens a new window and switches to new window                   driver.SwitchTo().NewWindow(WindowType.Window);                   Assert.AreEqual("", driver.Title);                          //quitting driver                   driver.Quit(); //close all windows               }           }       }       

Opens a new tab and switches to new tab:                   driver.switch_to.new_window(:tab)

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk//examples/ruby/spec/interactions/windows_spec.rb#L9)

##### /examples/ruby/spec/interactions/windows\_spec.rb

Copy  Close               # frozen_string_literal: true          require 'spec_helper'          RSpec.describe 'Windows' do       let(:driver) { start_session }            it 'opens new tab' do         driver.switch_to.new_window(:tab)              expect(driver.window_handles.size).to eq 2       end            it 'opens new window' do         driver.switch_to.new_window(:window)              expect(driver.window_handles.size).to eq 2       end     end     

Opens a new window and switches to new window:                   driver.switch_to.new_window(:window)

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk//examples/ruby/spec/interactions/windows_spec.rb#L15)

##### /examples/ruby/spec/interactions/windows\_spec.rb

Copy  Close               # frozen_string_literal: true          require 'spec_helper'          RSpec.describe 'Windows' do       let(:driver) { start_session }            it 'opens new tab' do         driver.switch_to.new_window(:tab)              expect(driver.window_handles.size).to eq 2       end            it 'opens new window' do         driver.switch_to.new_window(:window)              expect(driver.window_handles.size).to eq 2       end     end     

Opens a new tab and switches to new tab                   await driver.switchTo().newWindow('tab');

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/javascript/test/interactions/windows.spec.js#L70)

##### examples/javascript/test/interactions/windows.spec.js

Copy  Close               const {Builder, By} = require('selenium-webdriver');     const chrome = require('selenium-webdriver/chrome');     const assert = require("node:assert");     let opts = new chrome.Options();     opts.addArguments('--headless');     let startIndex = 0     let endIndex = 5     let pdfMagicNumber = 'JVBER'     let imgMagicNumber = 'iVBOR'     let base64Code          describe('Interactions - Windows', function () {       let driver;       before(async function () {         driver = await new Builder().forBrowser('chrome').setChromeOptions(opts).build();       });            after(async () => await driver.quit());            it('Should be able to print page to pdf', async function () {              await driver.get('https://www.selenium.dev/selenium/web/alerts.html');         let base64 = await driver.printPage({pageRanges: ["1-2"]});         // page can be saved as a PDF as below         // await fs.writeFileSync('./test.pdf', base64, 'base64');              base64Code = base64.slice(startIndex, endIndex)         assert.strictEqual(base64Code, pdfMagicNumber)       });            it('Should be able to get text using executeScript', async function () {         await driver.get('https://www.selenium.dev/selenium/web/javascriptPage.html');         // Stores the header element         let header = await driver.findElement(By.css('h1'));              // Executing JavaScript to capture innerText of header element         let text = await driver.executeScript('return arguments[0].innerText', header);         assert.strictEqual(text, `Type Stuff`)       });            it('Should be able to take Element Screenshot', async function () {         await driver.get('https://www.selenium.dev/selenium/web/javascriptPage.html');              let header = await driver.findElement(By.css('h1'));         // Captures the element screenshot         let encodedString = await header.takeScreenshot(true);         // save screenshot as below         // await fs.writeFileSync('./image.png', encodedString, 'base64');         base64Code = encodedString.slice(startIndex, endIndex)         assert.strictEqual(base64Code, imgMagicNumber)       });            it('Should be able to takeScreenshot', async function () {         await driver.get('https://www.selenium.dev/selenium/web/javascriptPage.html');              // Captures the screenshot         let encodedString = await driver.takeScreenshot();         // save screenshot as below         // await fs.writeFileSync('./image.png', encodedString, 'base64');         base64Code = encodedString.slice(startIndex, endIndex)         assert.strictEqual(base64Code, imgMagicNumber)       });            it('Should be able to switch to newWindow and newTab and close', async function () {         await driver.get('https://www.selenium.dev/selenium/web/');         const initialWindow = await driver.getAllWindowHandles();         assert.strictEqual(initialWindow.length, 1)              // Opens a new tab and switches to new tab         await driver.switchTo().newWindow('tab');         const browserTabs = await driver.getAllWindowHandles();         assert.strictEqual(browserTabs.length, 2)              // Opens a new window and switches to new window         await driver.switchTo().newWindow('window');         const windows = await driver.getAllWindowHandles();         assert.strictEqual(windows.length, 3)              //Close the tab or window         await driver.close();              //Switch back to the old tab or window         await driver.switchTo().window(windows[1]);              const windowsAfterClose = await driver.getAllWindowHandles();         assert.strictEqual(windowsAfterClose.length, 2);       });            it('Should be able to getWindow Size', async function () {         await driver.get('https://www.selenium.dev/selenium/web/');              // Access each dimension individually         const { width, height } = await driver.manage().window().getRect();              // Or store the dimensions and query them later         const rect = await driver.manage().window().getRect();         const windowWidth = rect.width;         const windowHeight = rect.height;              assert.ok(windowWidth>0);         assert.ok(windowHeight>0);       });            it('Should be able to getWindow position', async function () {         await driver.get('https://www.selenium.dev/selenium/web/');              // Access each dimension individually         const { x, y } = await driver.manage().window().getRect();              // Or store the dimensions and query them later         const rect = await driver.manage().window().getRect();         const x1 = rect.x;         const y1 = rect.y;              assert.ok(x1>=0);         assert.ok(y1>=0);       });     });

Opens a new window and switches to new window:                   await driver.switchTo().newWindow('window');

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/javascript/test/interactions/windows.spec.js#L75)

##### examples/javascript/test/interactions/windows.spec.js

Copy  Close               const {Builder, By} = require('selenium-webdriver');     const chrome = require('selenium-webdriver/chrome');     const assert = require("node:assert");     let opts = new chrome.Options();     opts.addArguments('--headless');     let startIndex = 0     let endIndex = 5     let pdfMagicNumber = 'JVBER'     let imgMagicNumber = 'iVBOR'     let base64Code          describe('Interactions - Windows', function () {       let driver;       before(async function () {         driver = await new Builder().forBrowser('chrome').setChromeOptions(opts).build();       });            after(async () => await driver.quit());            it('Should be able to print page to pdf', async function () {              await driver.get('https://www.selenium.dev/selenium/web/alerts.html');         let base64 = await driver.printPage({pageRanges: ["1-2"]});         // page can be saved as a PDF as below         // await fs.writeFileSync('./test.pdf', base64, 'base64');              base64Code = base64.slice(startIndex, endIndex)         assert.strictEqual(base64Code, pdfMagicNumber)       });            it('Should be able to get text using executeScript', async function () {         await driver.get('https://www.selenium.dev/selenium/web/javascriptPage.html');         // Stores the header element         let header = await driver.findElement(By.css('h1'));              // Executing JavaScript to capture innerText of header element         let text = await driver.executeScript('return arguments[0].innerText', header);         assert.strictEqual(text, `Type Stuff`)       });            it('Should be able to take Element Screenshot', async function () {         await driver.get('https://www.selenium.dev/selenium/web/javascriptPage.html');              let header = await driver.findElement(By.css('h1'));         // Captures the element screenshot         let encodedString = await header.takeScreenshot(true);         // save screenshot as below         // await fs.writeFileSync('./image.png', encodedString, 'base64');         base64Code = encodedString.slice(startIndex, endIndex)         assert.strictEqual(base64Code, imgMagicNumber)       });            it('Should be able to takeScreenshot', async function () {         await driver.get('https://www.selenium.dev/selenium/web/javascriptPage.html');              // Captures the screenshot         let encodedString = await driver.takeScreenshot();         // save screenshot as below         // await fs.writeFileSync('./image.png', encodedString, 'base64');         base64Code = encodedString.slice(startIndex, endIndex)         assert.strictEqual(base64Code, imgMagicNumber)       });            it('Should be able to switch to newWindow and newTab and close', async function () {         await driver.get('https://www.selenium.dev/selenium/web/');         const initialWindow = await driver.getAllWindowHandles();         assert.strictEqual(initialWindow.length, 1)              // Opens a new tab and switches to new tab         await driver.switchTo().newWindow('tab');         const browserTabs = await driver.getAllWindowHandles();         assert.strictEqual(browserTabs.length, 2)              // Opens a new window and switches to new window         await driver.switchTo().newWindow('window');         const windows = await driver.getAllWindowHandles();         assert.strictEqual(windows.length, 3)              //Close the tab or window         await driver.close();              //Switch back to the old tab or window         await driver.switchTo().window(windows[1]);              const windowsAfterClose = await driver.getAllWindowHandles();         assert.strictEqual(windowsAfterClose.length, 2);       });            it('Should be able to getWindow Size', async function () {         await driver.get('https://www.selenium.dev/selenium/web/');              // Access each dimension individually         const { width, height } = await driver.manage().window().getRect();              // Or store the dimensions and query them later         const rect = await driver.manage().window().getRect();         const windowWidth = rect.width;         const windowHeight = rect.height;              assert.ok(windowWidth>0);         assert.ok(windowHeight>0);       });            it('Should be able to getWindow position', async function () {         await driver.get('https://www.selenium.dev/selenium/web/');              // Access each dimension individually         const { x, y } = await driver.manage().window().getRect();              // Or store the dimensions and query them later         const rect = await driver.manage().window().getRect();         const x1 = rect.x;         const y1 = rect.y;              assert.ok(x1>=0);         assert.ok(y1>=0);       });     });               // Opens a new tab and switches to new tab     driver.switchTo().newWindow(WindowType.TAB)          // Opens a new window and switches to new window     driver.switchTo().newWindow(WindowType.WINDOW)       

### Quitting the browser at the end of a session

When you are finished with the browser session you should call quit, instead of close:

[Move Code](https://www.selenium.dev/documentation/about/contributing/#moving-examples)

  * Java   * Python   * CSharp   * Ruby   * JavaScript   * Kotlin

                      //quitting driver             driver.quit(); //close all windows

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/java/src/test/java/dev/selenium/interactions/WindowsTest.java#L44-L45)

##### examples/java/src/test/java/dev/selenium/interactions/WindowsTest.java

Copy  Close               package dev.selenium.interactions;          import org.openqa.selenium.*;     import org.openqa.selenium.chrome.ChromeDriver;     import java.time.Duration;     import org.junit.jupiter.api.Test;     import static org.junit.jupiter.api.Assertions.*;          public class WindowsTest {              @Test         public void windowsExampleCode() {                      	WebDriver driver = new ChromeDriver();             driver.manage().timeouts().implicitlyWait(Duration.ofMillis(500));             // Navigate to Url             driver.get("https://www.selenium.dev/selenium/web/window_switching_tests/page_with_frame.html");             //fetch handle of this             String currHandle=driver.getWindowHandle();             assertNotNull(currHandle);                          //click on link to open a new window             driver.findElement(By.linkText("Open new window")).click();             //fetch handles of all windows, there will be two, [0]- default, [1] - new window             Object[] windowHandles=driver.getWindowHandles().toArray();             driver.switchTo().window((String) windowHandles[1]);             //assert on title of new window             String title=driver.getTitle();             assertEquals("Simple Page",title);                          //closing current window             driver.close();             //Switch back to the old tab or window             driver.switchTo().window((String) windowHandles[0]);                          //Opens a new tab and switches to new tab             driver.switchTo().newWindow(WindowType.TAB);             assertEquals("",driver.getTitle());                          //Opens a new window and switches to new window             driver.switchTo().newWindow(WindowType.WINDOW);             assertEquals("",driver.getTitle());                               //quitting driver             driver.quit(); //close all windows     	           	}     }               driver.quit()                           //quitting driver                   driver.Quit(); //close all windows

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/dotnet/SeleniumDocs/Interactions/WindowsTest.cs#L45-L46)

##### examples/dotnet/SeleniumDocs/Interactions/WindowsTest.cs

Copy  Close               using System;       using Microsoft.VisualStudio.TestTools.UnitTesting;       using OpenQA.Selenium;       using OpenQA.Selenium.Chrome;       using System.Collections.Generic;       namespace SeleniumDocs.Interactions       {           [TestClass]           public class WindowsTest           {               [TestMethod]               public void TestWindowCommands()               {                   WebDriver driver = new ChromeDriver();                   driver.Manage().Timeouts().ImplicitWait = TimeSpan.FromMilliseconds(500);                          // Navigate to Url                   driver.Url="https://www.selenium.dev/selenium/web/window_switching_tests/page_with_frame.html";                   //fetch handle of this                   String currHandle = driver.CurrentWindowHandle;                   Assert.IsNotNull(currHandle);                          //click on link to open a new window                   driver.FindElement(By.LinkText("Open new window")).Click();                   //fetch handles of all windows, there will be two, [0]- default, [1] - new window                   IList<string> windowHandles = new List<string>(driver.WindowHandles);                   driver.SwitchTo().Window(windowHandles[1]);                   //assert on title of new window                   String title = driver.Title;                   Assert.AreEqual("Simple Page", title);                          //closing current window                   driver.Close();                   //Switch back to the old tab or window                   driver.SwitchTo().Window(windowHandles[0]);                          //Opens a new tab and switches to new tab                   driver.SwitchTo().NewWindow(WindowType.Tab);                   Assert.AreEqual("", driver.Title);                          //Opens a new window and switches to new window                   driver.SwitchTo().NewWindow(WindowType.Window);                   Assert.AreEqual("", driver.Title);                          //quitting driver                   driver.Quit(); //close all windows               }           }       }                      driver.quit               await driver.quit();               driver.quit()

  * Quit will:     * Close all the windows and tabs associated with that WebDriver session     * Close the browser process     * Close the background driver process     * Notify Selenium Grid that the browser is no longer in use so it can be used by another session \(if you are using Selenium Grid\)

Failure to call quit will leave extra background processes and ports running on your machine which could cause you problems later.

Some test frameworks offer methods and annotations which you can hook into to tear down at the end of a test.

[Move Code](https://www.selenium.dev/documentation/about/contributing/#moving-examples)

  * Java   * Python   * CSharp   * Ruby   * JavaScript   * Kotlin

              /**      * Example using JUnit      * https://junit.org/junit5/docs/current/api/org/junit/jupiter/api/AfterAll.html      */     @AfterAll     public static void tearDown() {         driver.quit();     }                          # unittest teardown         # https://docs.python.org/3/library/unittest.html?highlight=teardown#unittest.TestCase.tearDown     def tearDown(self):         self.driver.quit()                      /*         Example using Visual Studio's UnitTesting         https://msdn.microsoft.com/en-us/library/microsoft.visualstudio.testtools.unittesting.aspx     */     [TestCleanup]     public void TearDown()     {         driver.Quit();     }                          # UnitTest Teardown         # https://www.rubydoc.info/github/test-unit/test-unit/Test/Unit/TestCase     def teardown         @driver.quit     end                      /**      * Example using Mocha      * https://mochajs.org/#hooks      */     after('Tear down', async function () {       await driver.quit();     });                           /**      * Example using JUnit      * https://junit.org/junit5/docs/current/api/org/junit/jupiter/api/AfterAll.html      */     @AfterAll     fun tearDown() {         driver.quit()     }       

If not running WebDriver in a test context, you may consider using `try / finally` which is offered by most languages so that an exception will still clean up the WebDriver session.

[Move Code](https://www.selenium.dev/documentation/about/contributing/#moving-examples)

  * Java   * Python   * CSharp   * Ruby   * JavaScript   * Kotlin

              try {         //WebDriver code here...     } finally {         driver.quit();     }                      try:         #WebDriver code here...     finally:         driver.quit()                      try {         //WebDriver code here...     } finally {         driver.Quit();     }                      begin         #WebDriver code here...     ensure         driver.quit     end                      try {         //WebDriver code here...     } finally {         await driver.quit();     }                           try {         //WebDriver code here...     } finally {         driver.quit()     }       

Python’s WebDriver now supports the python context manager, which when using the `with` keyword can automatically quit the driver at the end of execution.               with webdriver.Firefox() as driver:       # WebDriver code here...          # WebDriver will automatically quit after indentation     

## Window management

Screen resolution can impact how your web application renders, so WebDriver provides mechanisms for moving and resizing the browser window.

### Get window size

Fetches the size of the browser window in pixels.

[Move Code](https://www.selenium.dev/documentation/about/contributing/#moving-examples)

  * Java   * Python   * CSharp   * Ruby   * JavaScript   * Kotlin

              //Access each dimension individually     int width = driver.manage().window().getSize().getWidth();     int height = driver.manage().window().getSize().getHeight();          //Or store the dimensions and query them later     Dimension size = driver.manage().window().getSize();     int width1 = size.getWidth();     int height1 = size.getHeight();                          # Access each dimension individually     width = driver.get_window_size().get("width")     height = driver.get_window_size().get("height")              # Or store the dimensions and query them later     size = driver.get_window_size()     width1 = size.get("width")     height1 = size.get("height")                      //Access each dimension individually     int width = driver.Manage().Window.Size.Width;     int height = driver.Manage().Window.Size.Height;          //Or store the dimensions and query them later     System.Drawing.Size size = driver.Manage().Window.Size;     int width1 = size.Width;     int height1 = size.Height;                          # Access each dimension individually     width = driver.manage.window.size.width     height = driver.manage.window.size.height              # Or store the dimensions and query them later     size = driver.manage.window.size     width1 = size.width     height1 = size.height       

Access each dimension individually                   const { width, height } = await driver.manage().window().getRect();

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/javascript/test/interactions/windows.spec.js#L93)

##### examples/javascript/test/interactions/windows.spec.js

Copy  Close               const {Builder, By} = require('selenium-webdriver');     const chrome = require('selenium-webdriver/chrome');     const assert = require("node:assert");     let opts = new chrome.Options();     opts.addArguments('--headless');     let startIndex = 0     let endIndex = 5     let pdfMagicNumber = 'JVBER'     let imgMagicNumber = 'iVBOR'     let base64Code          describe('Interactions - Windows', function () {       let driver;       before(async function () {         driver = await new Builder().forBrowser('chrome').setChromeOptions(opts).build();       });            after(async () => await driver.quit());            it('Should be able to print page to pdf', async function () {              await driver.get('https://www.selenium.dev/selenium/web/alerts.html');         let base64 = await driver.printPage({pageRanges: ["1-2"]});         // page can be saved as a PDF as below         // await fs.writeFileSync('./test.pdf', base64, 'base64');              base64Code = base64.slice(startIndex, endIndex)         assert.strictEqual(base64Code, pdfMagicNumber)       });            it('Should be able to get text using executeScript', async function () {         await driver.get('https://www.selenium.dev/selenium/web/javascriptPage.html');         // Stores the header element         let header = await driver.findElement(By.css('h1'));              // Executing JavaScript to capture innerText of header element         let text = await driver.executeScript('return arguments[0].innerText', header);         assert.strictEqual(text, `Type Stuff`)       });            it('Should be able to take Element Screenshot', async function () {         await driver.get('https://www.selenium.dev/selenium/web/javascriptPage.html');              let header = await driver.findElement(By.css('h1'));         // Captures the element screenshot         let encodedString = await header.takeScreenshot(true);         // save screenshot as below         // await fs.writeFileSync('./image.png', encodedString, 'base64');         base64Code = encodedString.slice(startIndex, endIndex)         assert.strictEqual(base64Code, imgMagicNumber)       });            it('Should be able to takeScreenshot', async function () {         await driver.get('https://www.selenium.dev/selenium/web/javascriptPage.html');              // Captures the screenshot         let encodedString = await driver.takeScreenshot();         // save screenshot as below         // await fs.writeFileSync('./image.png', encodedString, 'base64');         base64Code = encodedString.slice(startIndex, endIndex)         assert.strictEqual(base64Code, imgMagicNumber)       });            it('Should be able to switch to newWindow and newTab and close', async function () {         await driver.get('https://www.selenium.dev/selenium/web/');         const initialWindow = await driver.getAllWindowHandles();         assert.strictEqual(initialWindow.length, 1)              // Opens a new tab and switches to new tab         await driver.switchTo().newWindow('tab');         const browserTabs = await driver.getAllWindowHandles();         assert.strictEqual(browserTabs.length, 2)              // Opens a new window and switches to new window         await driver.switchTo().newWindow('window');         const windows = await driver.getAllWindowHandles();         assert.strictEqual(windows.length, 3)              //Close the tab or window         await driver.close();              //Switch back to the old tab or window         await driver.switchTo().window(windows[1]);              const windowsAfterClose = await driver.getAllWindowHandles();         assert.strictEqual(windowsAfterClose.length, 2);       });            it('Should be able to getWindow Size', async function () {         await driver.get('https://www.selenium.dev/selenium/web/');              // Access each dimension individually         const { width, height } = await driver.manage().window().getRect();              // Or store the dimensions and query them later         const rect = await driver.manage().window().getRect();         const windowWidth = rect.width;         const windowHeight = rect.height;              assert.ok(windowWidth>0);         assert.ok(windowHeight>0);       });            it('Should be able to getWindow position', async function () {         await driver.get('https://www.selenium.dev/selenium/web/');              // Access each dimension individually         const { x, y } = await driver.manage().window().getRect();              // Or store the dimensions and query them later         const rect = await driver.manage().window().getRect();         const x1 = rect.x;         const y1 = rect.y;              assert.ok(x1>=0);         assert.ok(y1>=0);       });     });

\(or\) store the dimensions and query them later                   const rect = await driver.manage().window().getRect();         const windowWidth = rect.width;         const windowHeight = rect.height;

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/javascript/test/interactions/windows.spec.js#L96-L98)

##### examples/javascript/test/interactions/windows.spec.js

Copy  Close               const {Builder, By} = require('selenium-webdriver');     const chrome = require('selenium-webdriver/chrome');     const assert = require("node:assert");     let opts = new chrome.Options();     opts.addArguments('--headless');     let startIndex = 0     let endIndex = 5     let pdfMagicNumber = 'JVBER'     let imgMagicNumber = 'iVBOR'     let base64Code          describe('Interactions - Windows', function () {       let driver;       before(async function () {         driver = await new Builder().forBrowser('chrome').setChromeOptions(opts).build();       });            after(async () => await driver.quit());            it('Should be able to print page to pdf', async function () {              await driver.get('https://www.selenium.dev/selenium/web/alerts.html');         let base64 = await driver.printPage({pageRanges: ["1-2"]});         // page can be saved as a PDF as below         // await fs.writeFileSync('./test.pdf', base64, 'base64');              base64Code = base64.slice(startIndex, endIndex)         assert.strictEqual(base64Code, pdfMagicNumber)       });            it('Should be able to get text using executeScript', async function () {         await driver.get('https://www.selenium.dev/selenium/web/javascriptPage.html');         // Stores the header element         let header = await driver.findElement(By.css('h1'));              // Executing JavaScript to capture innerText of header element         let text = await driver.executeScript('return arguments[0].innerText', header);         assert.strictEqual(text, `Type Stuff`)       });            it('Should be able to take Element Screenshot', async function () {         await driver.get('https://www.selenium.dev/selenium/web/javascriptPage.html');              let header = await driver.findElement(By.css('h1'));         // Captures the element screenshot         let encodedString = await header.takeScreenshot(true);         // save screenshot as below         // await fs.writeFileSync('./image.png', encodedString, 'base64');         base64Code = encodedString.slice(startIndex, endIndex)         assert.strictEqual(base64Code, imgMagicNumber)       });            it('Should be able to takeScreenshot', async function () {         await driver.get('https://www.selenium.dev/selenium/web/javascriptPage.html');              // Captures the screenshot         let encodedString = await driver.takeScreenshot();         // save screenshot as below         // await fs.writeFileSync('./image.png', encodedString, 'base64');         base64Code = encodedString.slice(startIndex, endIndex)         assert.strictEqual(base64Code, imgMagicNumber)       });            it('Should be able to switch to newWindow and newTab and close', async function () {         await driver.get('https://www.selenium.dev/selenium/web/');         const initialWindow = await driver.getAllWindowHandles();         assert.strictEqual(initialWindow.length, 1)              // Opens a new tab and switches to new tab         await driver.switchTo().newWindow('tab');         const browserTabs = await driver.getAllWindowHandles();         assert.strictEqual(browserTabs.length, 2)              // Opens a new window and switches to new window         await driver.switchTo().newWindow('window');         const windows = await driver.getAllWindowHandles();         assert.strictEqual(windows.length, 3)              //Close the tab or window         await driver.close();              //Switch back to the old tab or window         await driver.switchTo().window(windows[1]);              const windowsAfterClose = await driver.getAllWindowHandles();         assert.strictEqual(windowsAfterClose.length, 2);       });            it('Should be able to getWindow Size', async function () {         await driver.get('https://www.selenium.dev/selenium/web/');              // Access each dimension individually         const { width, height } = await driver.manage().window().getRect();              // Or store the dimensions and query them later         const rect = await driver.manage().window().getRect();         const windowWidth = rect.width;         const windowHeight = rect.height;              assert.ok(windowWidth>0);         assert.ok(windowHeight>0);       });            it('Should be able to getWindow position', async function () {         await driver.get('https://www.selenium.dev/selenium/web/');              // Access each dimension individually         const { x, y } = await driver.manage().window().getRect();              // Or store the dimensions and query them later         const rect = await driver.manage().window().getRect();         const x1 = rect.x;         const y1 = rect.y;              assert.ok(x1>=0);         assert.ok(y1>=0);       });     });               //Access each dimension individually     val width = driver.manage().window().size.width     val height = driver.manage().window().size.height          //Or store the dimensions and query them later     val size = driver.manage().window().size     val width1 = size.width     val height1 = size.height       

### Set window size

Restores the window and sets the window size.

[Move Code](https://www.selenium.dev/documentation/about/contributing/#moving-examples)

  * Java   * Python   * CSharp   * Ruby   * JavaScript   * Kotlin

              driver.manage().window().setSize(new Dimension(1024, 768));               driver.set_window_size(1024, 768)               driver.Manage().Window.Size = new Size(1024, 768);               driver.manage.window.resize_to(1024,768)               await driver.manage().window().setRect({ width: 1024, height: 768 });               driver.manage().window().size = Dimension(1024, 768)

### Get window position

Fetches the coordinates of the top left coordinate of the browser window.

[Move Code](https://www.selenium.dev/documentation/about/contributing/#moving-examples)

  * Java   * Python   * CSharp   * Ruby   * JavaScript   * Kotlin

              // Access each dimension individually     int x = driver.manage().window().getPosition().getX();     int y = driver.manage().window().getPosition().getY();          // Or store the dimensions and query them later     Point position = driver.manage().window().getPosition();     int x1 = position.getX();     int y1 = position.getY();                          # Access each dimension individually     x = driver.get_window_position().get('x')     y = driver.get_window_position().get('y')              # Or store the dimensions and query them later     position = driver.get_window_position()     x1 = position.get('x')     y1 = position.get('y')                      //Access each dimension individually     int x = driver.Manage().Window.Position.X;     int y = driver.Manage().Window.Position.Y;          //Or store the dimensions and query them later     Point position = driver.Manage().Window.Position;     int x1 = position.X;     int y1 = position.Y;                          #Access each dimension individually     x = driver.manage.window.position.x     y = driver.manage.window.position.y              # Or store the dimensions and query them later     rect  = driver.manage.window.rect     x1 = rect.x     y1 = rect.y       

Access each dimension individually                   const { x, y } = await driver.manage().window().getRect();

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/javascript/test/interactions/windows.spec.js#L108)

##### examples/javascript/test/interactions/windows.spec.js

Copy  Close               const {Builder, By} = require('selenium-webdriver');     const chrome = require('selenium-webdriver/chrome');     const assert = require("node:assert");     let opts = new chrome.Options();     opts.addArguments('--headless');     let startIndex = 0     let endIndex = 5     let pdfMagicNumber = 'JVBER'     let imgMagicNumber = 'iVBOR'     let base64Code          describe('Interactions - Windows', function () {       let driver;       before(async function () {         driver = await new Builder().forBrowser('chrome').setChromeOptions(opts).build();       });            after(async () => await driver.quit());            it('Should be able to print page to pdf', async function () {              await driver.get('https://www.selenium.dev/selenium/web/alerts.html');         let base64 = await driver.printPage({pageRanges: ["1-2"]});         // page can be saved as a PDF as below         // await fs.writeFileSync('./test.pdf', base64, 'base64');              base64Code = base64.slice(startIndex, endIndex)         assert.strictEqual(base64Code, pdfMagicNumber)       });            it('Should be able to get text using executeScript', async function () {         await driver.get('https://www.selenium.dev/selenium/web/javascriptPage.html');         // Stores the header element         let header = await driver.findElement(By.css('h1'));              // Executing JavaScript to capture innerText of header element         let text = await driver.executeScript('return arguments[0].innerText', header);         assert.strictEqual(text, `Type Stuff`)       });            it('Should be able to take Element Screenshot', async function () {         await driver.get('https://www.selenium.dev/selenium/web/javascriptPage.html');              let header = await driver.findElement(By.css('h1'));         // Captures the element screenshot         let encodedString = await header.takeScreenshot(true);         // save screenshot as below         // await fs.writeFileSync('./image.png', encodedString, 'base64');         base64Code = encodedString.slice(startIndex, endIndex)         assert.strictEqual(base64Code, imgMagicNumber)       });            it('Should be able to takeScreenshot', async function () {         await driver.get('https://www.selenium.dev/selenium/web/javascriptPage.html');              // Captures the screenshot         let encodedString = await driver.takeScreenshot();         // save screenshot as below         // await fs.writeFileSync('./image.png', encodedString, 'base64');         base64Code = encodedString.slice(startIndex, endIndex)         assert.strictEqual(base64Code, imgMagicNumber)       });            it('Should be able to switch to newWindow and newTab and close', async function () {         await driver.get('https://www.selenium.dev/selenium/web/');         const initialWindow = await driver.getAllWindowHandles();         assert.strictEqual(initialWindow.length, 1)              // Opens a new tab and switches to new tab         await driver.switchTo().newWindow('tab');         const browserTabs = await driver.getAllWindowHandles();         assert.strictEqual(browserTabs.length, 2)              // Opens a new window and switches to new window         await driver.switchTo().newWindow('window');         const windows = await driver.getAllWindowHandles();         assert.strictEqual(windows.length, 3)              //Close the tab or window         await driver.close();              //Switch back to the old tab or window         await driver.switchTo().window(windows[1]);              const windowsAfterClose = await driver.getAllWindowHandles();         assert.strictEqual(windowsAfterClose.length, 2);       });            it('Should be able to getWindow Size', async function () {         await driver.get('https://www.selenium.dev/selenium/web/');              // Access each dimension individually         const { width, height } = await driver.manage().window().getRect();              // Or store the dimensions and query them later         const rect = await driver.manage().window().getRect();         const windowWidth = rect.width;         const windowHeight = rect.height;              assert.ok(windowWidth>0);         assert.ok(windowHeight>0);       });            it('Should be able to getWindow position', async function () {         await driver.get('https://www.selenium.dev/selenium/web/');              // Access each dimension individually         const { x, y } = await driver.manage().window().getRect();              // Or store the dimensions and query them later         const rect = await driver.manage().window().getRect();         const x1 = rect.x;         const y1 = rect.y;              assert.ok(x1>=0);         assert.ok(y1>=0);       });     });

\(or\) store the dimensions and query them later                   const rect = await driver.manage().window().getRect();         const x1 = rect.x;         const y1 = rect.y;

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/javascript/test/interactions/windows.spec.js#L111-L113)

##### examples/javascript/test/interactions/windows.spec.js

Copy  Close               const {Builder, By} = require('selenium-webdriver');     const chrome = require('selenium-webdriver/chrome');     const assert = require("node:assert");     let opts = new chrome.Options();     opts.addArguments('--headless');     let startIndex = 0     let endIndex = 5     let pdfMagicNumber = 'JVBER'     let imgMagicNumber = 'iVBOR'     let base64Code          describe('Interactions - Windows', function () {       let driver;       before(async function () {         driver = await new Builder().forBrowser('chrome').setChromeOptions(opts).build();       });            after(async () => await driver.quit());            it('Should be able to print page to pdf', async function () {              await driver.get('https://www.selenium.dev/selenium/web/alerts.html');         let base64 = await driver.printPage({pageRanges: ["1-2"]});         // page can be saved as a PDF as below         // await fs.writeFileSync('./test.pdf', base64, 'base64');              base64Code = base64.slice(startIndex, endIndex)         assert.strictEqual(base64Code, pdfMagicNumber)       });            it('Should be able to get text using executeScript', async function () {         await driver.get('https://www.selenium.dev/selenium/web/javascriptPage.html');         // Stores the header element         let header = await driver.findElement(By.css('h1'));              // Executing JavaScript to capture innerText of header element         let text = await driver.executeScript('return arguments[0].innerText', header);         assert.strictEqual(text, `Type Stuff`)       });            it('Should be able to take Element Screenshot', async function () {         await driver.get('https://www.selenium.dev/selenium/web/javascriptPage.html');              let header = await driver.findElement(By.css('h1'));         // Captures the element screenshot         let encodedString = await header.takeScreenshot(true);         // save screenshot as below         // await fs.writeFileSync('./image.png', encodedString, 'base64');         base64Code = encodedString.slice(startIndex, endIndex)         assert.strictEqual(base64Code, imgMagicNumber)       });            it('Should be able to takeScreenshot', async function () {         await driver.get('https://www.selenium.dev/selenium/web/javascriptPage.html');              // Captures the screenshot         let encodedString = await driver.takeScreenshot();         // save screenshot as below         // await fs.writeFileSync('./image.png', encodedString, 'base64');         base64Code = encodedString.slice(startIndex, endIndex)         assert.strictEqual(base64Code, imgMagicNumber)       });            it('Should be able to switch to newWindow and newTab and close', async function () {         await driver.get('https://www.selenium.dev/selenium/web/');         const initialWindow = await driver.getAllWindowHandles();         assert.strictEqual(initialWindow.length, 1)              // Opens a new tab and switches to new tab         await driver.switchTo().newWindow('tab');         const browserTabs = await driver.getAllWindowHandles();         assert.strictEqual(browserTabs.length, 2)              // Opens a new window and switches to new window         await driver.switchTo().newWindow('window');         const windows = await driver.getAllWindowHandles();         assert.strictEqual(windows.length, 3)              //Close the tab or window         await driver.close();              //Switch back to the old tab or window         await driver.switchTo().window(windows[1]);              const windowsAfterClose = await driver.getAllWindowHandles();         assert.strictEqual(windowsAfterClose.length, 2);       });            it('Should be able to getWindow Size', async function () {         await driver.get('https://www.selenium.dev/selenium/web/');              // Access each dimension individually         const { width, height } = await driver.manage().window().getRect();              // Or store the dimensions and query them later         const rect = await driver.manage().window().getRect();         const windowWidth = rect.width;         const windowHeight = rect.height;              assert.ok(windowWidth>0);         assert.ok(windowHeight>0);       });            it('Should be able to getWindow position', async function () {         await driver.get('https://www.selenium.dev/selenium/web/');              // Access each dimension individually         const { x, y } = await driver.manage().window().getRect();              // Or store the dimensions and query them later         const rect = await driver.manage().window().getRect();         const x1 = rect.x;         const y1 = rect.y;              assert.ok(x1>=0);         assert.ok(y1>=0);       });     });               // Access each dimension individually     val x = driver.manage().window().position.x     val y = driver.manage().window().position.y          // Or store the dimensions and query them later     val position = driver.manage().window().position     val x1 = position.x     val y1 = position.y            

## Set window position

Moves the window to the chosen position.

[Move Code](https://www.selenium.dev/documentation/about/contributing/#moving-examples)

  * Java   * Python   * CSharp   * Ruby   * JavaScript   * Kotlin

              // Move the window to the top left of the primary monitor     driver.manage().window().setPosition(new Point(0, 0));                          # Move the window to the top left of the primary monitor     driver.set_window_position(0, 0)                      // Move the window to the top left of the primary monitor     driver.Manage().Window.Position = new Point(0, 0);                      driver.manage.window.move_to(0,0)                      // Move the window to the top left of the primary monitor     await driver.manage().window().setRect({ x: 0, y: 0 });                           // Move the window to the top left of the primary monitor     driver.manage().window().position = Point(0,0)         

### Maximize window

Enlarges the window. For most operating systems, the window will fill the screen, without blocking the operating system’s own menus and toolbars.

[Move Code](https://www.selenium.dev/documentation/about/contributing/#moving-examples)

  * Java   * Python   * CSharp   * Ruby   * JavaScript   * Kotlin

              driver.manage().window().maximize();               driver.maximize_window()               driver.Manage().Window.Maximize();               driver.manage.window.maximize               await driver.manage().window().maximize();               driver.manage().window().maximize()

### Minimize window

Minimizes the window of current browsing context. The exact behavior of this command is specific to individual window managers.

Minimize Window typically hides the window in the system tray.

**Note: This feature works with Selenium 4 and later versions.**

[ Move Code](https://www.selenium.dev/documentation/about/contributing/#moving-examples)

  * Java   * Python   * CSharp   * Ruby   * JavaScript   * Kotlin

              driver.manage().window().minimize();               driver.minimize_window()               driver.Manage().Window.Minimize();               driver.manage.window.minimize               await driver.manage().window().minimize();               driver.manage().window().minimize()

### Fullscreen window

Fills the entire screen, similar to pressing F11 in most browsers.

[Move Code](https://www.selenium.dev/documentation/about/contributing/#moving-examples)

  * Java   * Python   * CSharp   * Ruby   * JavaScript   * Kotlin

              driver.manage().window().fullscreen();               driver.fullscreen_window()               driver.Manage().Window.FullScreen();               driver.manage.window.full_screen               await driver.manage().window().fullscreen();               driver.manage().window().fullscreen()

### TakeScreenshot

Used to capture screenshot for current browsing context. The WebDriver endpoint [screenshot](https://www.w3.org/TR/webdriver/#dfn-take-screenshot) returns screenshot which is encoded in Base64 format.

[Move Code](https://www.selenium.dev/documentation/about/contributing/#moving-examples)

  * Java   * Python   * CSharp   * Ruby   * JavaScript   * Kotlin

              import org.apache.commons.io.FileUtils;     import org.openqa.selenium.chrome.ChromeDriver;     import java.io.*;     import org.openqa.selenium.*;          public class SeleniumTakeScreenshot {         public static void main(String args[]) throws IOException {             WebDriver driver = new ChromeDriver();             driver.get("http://www.example.com");             File scrFile = ((TakesScreenshot)driver).getScreenshotAs(OutputType.FILE);             FileUtils.copyFile(scrFile, new File("./image.png"));             driver.quit();         }     }                      from selenium import webdriver          driver = webdriver.Chrome()          driver.get("http://www.example.com")              # Returns and base64 encoded string into image     driver.save_screenshot('./image.png')          driver.quit()                 using OpenQA.Selenium;       using OpenQA.Selenium.Chrome;       using OpenQA.Selenium.Support.UI;            var driver = new ChromeDriver();       driver.Navigate().GoToUrl("http://www.example.com");       Screenshot screenshot = (driver as ITakesScreenshot).GetScreenshot();       screenshot.SaveAsFile("screenshot.png", ScreenshotImageFormat.Png); // Format values are Bmp, Gif, Jpeg, Png, Tiff                      require 'selenium-webdriver'     driver = Selenium::WebDriver.for :chrome          begin       driver.get 'https://example.com/'              # Takes and Stores the screenshot in specified path       driver.save_screenshot('./image.png')          end                          // Captures the screenshot         let encodedString = await driver.takeScreenshot();         // save screenshot as below         // await fs.writeFileSync('./image.png', encodedString, 'base64');     

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/javascript/test/interactions/windows.spec.js#L56-L59)

##### examples/javascript/test/interactions/windows.spec.js

Copy  Close               const {Builder, By} = require('selenium-webdriver');     const chrome = require('selenium-webdriver/chrome');     const assert = require("node:assert");     let opts = new chrome.Options();     opts.addArguments('--headless');     let startIndex = 0     let endIndex = 5     let pdfMagicNumber = 'JVBER'     let imgMagicNumber = 'iVBOR'     let base64Code          describe('Interactions - Windows', function () {       let driver;       before(async function () {         driver = await new Builder().forBrowser('chrome').setChromeOptions(opts).build();       });            after(async () => await driver.quit());            it('Should be able to print page to pdf', async function () {              await driver.get('https://www.selenium.dev/selenium/web/alerts.html');         let base64 = await driver.printPage({pageRanges: ["1-2"]});         // page can be saved as a PDF as below         // await fs.writeFileSync('./test.pdf', base64, 'base64');              base64Code = base64.slice(startIndex, endIndex)         assert.strictEqual(base64Code, pdfMagicNumber)       });            it('Should be able to get text using executeScript', async function () {         await driver.get('https://www.selenium.dev/selenium/web/javascriptPage.html');         // Stores the header element         let header = await driver.findElement(By.css('h1'));              // Executing JavaScript to capture innerText of header element         let text = await driver.executeScript('return arguments[0].innerText', header);         assert.strictEqual(text, `Type Stuff`)       });            it('Should be able to take Element Screenshot', async function () {         await driver.get('https://www.selenium.dev/selenium/web/javascriptPage.html');              let header = await driver.findElement(By.css('h1'));         // Captures the element screenshot         let encodedString = await header.takeScreenshot(true);         // save screenshot as below         // await fs.writeFileSync('./image.png', encodedString, 'base64');         base64Code = encodedString.slice(startIndex, endIndex)         assert.strictEqual(base64Code, imgMagicNumber)       });            it('Should be able to takeScreenshot', async function () {         await driver.get('https://www.selenium.dev/selenium/web/javascriptPage.html');              // Captures the screenshot         let encodedString = await driver.takeScreenshot();         // save screenshot as below         // await fs.writeFileSync('./image.png', encodedString, 'base64');         base64Code = encodedString.slice(startIndex, endIndex)         assert.strictEqual(base64Code, imgMagicNumber)       });            it('Should be able to switch to newWindow and newTab and close', async function () {         await driver.get('https://www.selenium.dev/selenium/web/');         const initialWindow = await driver.getAllWindowHandles();         assert.strictEqual(initialWindow.length, 1)              // Opens a new tab and switches to new tab         await driver.switchTo().newWindow('tab');         const browserTabs = await driver.getAllWindowHandles();         assert.strictEqual(browserTabs.length, 2)              // Opens a new window and switches to new window         await driver.switchTo().newWindow('window');         const windows = await driver.getAllWindowHandles();         assert.strictEqual(windows.length, 3)              //Close the tab or window         await driver.close();              //Switch back to the old tab or window         await driver.switchTo().window(windows[1]);              const windowsAfterClose = await driver.getAllWindowHandles();         assert.strictEqual(windowsAfterClose.length, 2);       });            it('Should be able to getWindow Size', async function () {         await driver.get('https://www.selenium.dev/selenium/web/');              // Access each dimension individually         const { width, height } = await driver.manage().window().getRect();              // Or store the dimensions and query them later         const rect = await driver.manage().window().getRect();         const windowWidth = rect.width;         const windowHeight = rect.height;              assert.ok(windowWidth>0);         assert.ok(windowHeight>0);       });            it('Should be able to getWindow position', async function () {         await driver.get('https://www.selenium.dev/selenium/web/');              // Access each dimension individually         const { x, y } = await driver.manage().window().getRect();              // Or store the dimensions and query them later         const rect = await driver.manage().window().getRect();         const x1 = rect.x;         const y1 = rect.y;              assert.ok(x1>=0);         assert.ok(y1>=0);       });     });               import com.oracle.tools.packager.IOUtils.copyFile     import org.openqa.selenium.*     import org.openqa.selenium.chrome.ChromeDriver     import java.io.File          fun main(){         val driver =  ChromeDriver()         driver.get("https://www.example.com")         val scrFile = (driver as TakesScreenshot).getScreenshotAs<File>(OutputType.FILE)         copyFile(scrFile, File("./image.png"))         driver.quit()     }        

### TakeElementScreenshot

Used to capture screenshot of an element for current browsing context. The WebDriver endpoint [screenshot](https://www.w3.org/TR/webdriver/#take-element-screenshot) returns screenshot which is encoded in Base64 format.

[Move Code](https://www.selenium.dev/documentation/about/contributing/#moving-examples)

  * Java   * Python   * CSharp   * Ruby   * JavaScript   * Kotlin

              import org.apache.commons.io.FileUtils;     import org.openqa.selenium.*;     import org.openqa.selenium.chrome.ChromeDriver;     import java.io.File;     import java.io.IOException;          public class SeleniumelementTakeScreenshot {       public static void main(String args[]) throws IOException {         WebDriver driver = new ChromeDriver();         driver.get("https://www.example.com");         WebElement element = driver.findElement(By.cssSelector("h1"));         File scrFile = element.getScreenshotAs(OutputType.FILE);         FileUtils.copyFile(scrFile, new File("./image.png"));         driver.quit();       }     }                      from selenium import webdriver     from selenium.webdriver.common.by import By          driver = webdriver.Chrome()          driver.get("http://www.example.com")          ele = driver.find_element(By.CSS_SELECTOR, 'h1')              # Returns and base64 encoded string into image     ele.screenshot('./image.png')          driver.quit()                          using OpenQA.Selenium;         using OpenQA.Selenium.Chrome;         using OpenQA.Selenium.Support.UI;              // Webdriver         var driver = new ChromeDriver();         driver.Navigate().GoToUrl("http://www.example.com");              // Fetch element using FindElement         var webElement = driver.FindElement(By.CssSelector("h1"));              // Screenshot for the element         var elementScreenshot = (webElement as ITakesScreenshot).GetScreenshot();         elementScreenshot.SaveAsFile("screenshot_of_element.png");                          # Works with Selenium4-alpha7 Ruby bindings and above     require 'selenium-webdriver'     driver = Selenium::WebDriver.for :chrome          begin       driver.get 'https://example.com/'       ele = driver.find_element(:css, 'h1')              # Takes and Stores the element screenshot in specified path       ele.save_screenshot('./image.jpg')     end                          let header = await driver.findElement(By.css('h1'));           // Captures the element screenshot           let encodedString = await header.takeScreenshot(true);           // save screenshot as below           // await fs.writeFileSync('./image.png', encodedString, 'base64');       

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/javascript/test/interactions/windows.spec.js#L44-L48)

##### examples/javascript/test/interactions/windows.spec.js

Copy  Close               const {Builder, By} = require('selenium-webdriver');       const chrome = require('selenium-webdriver/chrome');       const assert = require("node:assert");       let opts = new chrome.Options();       opts.addArguments('--headless');       let startIndex = 0       let endIndex = 5       let pdfMagicNumber = 'JVBER'       let imgMagicNumber = 'iVBOR'       let base64Code              describe('Interactions - Windows', function () {         let driver;         before(async function () {           driver = await new Builder().forBrowser('chrome').setChromeOptions(opts).build();         });                after(async () => await driver.quit());                it('Should be able to print page to pdf', async function () {                  await driver.get('https://www.selenium.dev/selenium/web/alerts.html');           let base64 = await driver.printPage({pageRanges: ["1-2"]});           // page can be saved as a PDF as below           // await fs.writeFileSync('./test.pdf', base64, 'base64');                  base64Code = base64.slice(startIndex, endIndex)           assert.strictEqual(base64Code, pdfMagicNumber)         });                it('Should be able to get text using executeScript', async function () {           await driver.get('https://www.selenium.dev/selenium/web/javascriptPage.html');           // Stores the header element           let header = await driver.findElement(By.css('h1'));                  // Executing JavaScript to capture innerText of header element           let text = await driver.executeScript('return arguments[0].innerText', header);           assert.strictEqual(text, `Type Stuff`)         });                it('Should be able to take Element Screenshot', async function () {           await driver.get('https://www.selenium.dev/selenium/web/javascriptPage.html');                  let header = await driver.findElement(By.css('h1'));           // Captures the element screenshot           let encodedString = await header.takeScreenshot(true);           // save screenshot as below           // await fs.writeFileSync('./image.png', encodedString, 'base64');           base64Code = encodedString.slice(startIndex, endIndex)           assert.strictEqual(base64Code, imgMagicNumber)         });                it('Should be able to takeScreenshot', async function () {           await driver.get('https://www.selenium.dev/selenium/web/javascriptPage.html');                  // Captures the screenshot           let encodedString = await driver.takeScreenshot();           // save screenshot as below           // await fs.writeFileSync('./image.png', encodedString, 'base64');           base64Code = encodedString.slice(startIndex, endIndex)           assert.strictEqual(base64Code, imgMagicNumber)         });                it('Should be able to switch to newWindow and newTab and close', async function () {           await driver.get('https://www.selenium.dev/selenium/web/');           const initialWindow = await driver.getAllWindowHandles();           assert.strictEqual(initialWindow.length, 1)                  // Opens a new tab and switches to new tab           await driver.switchTo().newWindow('tab');           const browserTabs = await driver.getAllWindowHandles();           assert.strictEqual(browserTabs.length, 2)                  // Opens a new window and switches to new window           await driver.switchTo().newWindow('window');           const windows = await driver.getAllWindowHandles();           assert.strictEqual(windows.length, 3)                  //Close the tab or window           await driver.close();                  //Switch back to the old tab or window           await driver.switchTo().window(windows[1]);                  const windowsAfterClose = await driver.getAllWindowHandles();           assert.strictEqual(windowsAfterClose.length, 2);         });                it('Should be able to getWindow Size', async function () {           await driver.get('https://www.selenium.dev/selenium/web/');                  // Access each dimension individually           const { width, height } = await driver.manage().window().getRect();                  // Or store the dimensions and query them later           const rect = await driver.manage().window().getRect();           const windowWidth = rect.width;           const windowHeight = rect.height;                  assert.ok(windowWidth>0);           assert.ok(windowHeight>0);         });                it('Should be able to getWindow position', async function () {           await driver.get('https://www.selenium.dev/selenium/web/');                  // Access each dimension individually           const { x, y } = await driver.manage().window().getRect();                  // Or store the dimensions and query them later           const rect = await driver.manage().window().getRect();           const x1 = rect.x;           const y1 = rect.y;                  assert.ok(x1>=0);           assert.ok(y1>=0);         });       });               import org.apache.commons.io.FileUtils     import org.openqa.selenium.chrome.ChromeDriver     import org.openqa.selenium.*     import java.io.File          fun main() {         val driver = ChromeDriver()         driver.get("https://www.example.com")         val element = driver.findElement(By.cssSelector("h1"))         val scrFile: File = element.getScreenshotAs(OutputType.FILE)         FileUtils.copyFile(scrFile, File("./image.png"))         driver.quit()     }       

### Execute Script

Executes JavaScript code snippet in the current context of a selected frame or window.

[Move Code](https://www.selenium.dev/documentation/about/contributing/#moving-examples)

  * Java   * Python   * CSharp   * Ruby   * JavaScript   * Kotlin

                  //Creating the JavascriptExecutor interface object by Type casting           JavascriptExecutor js = (JavascriptExecutor)driver;         //Button Element           WebElement button =driver.findElement(By.name("btnLogin"));         //Executing JavaScript to click on element           js.executeScript("arguments[0].click();", button);         //Get return value from script           String text = (String) js.executeScript("return arguments[0].innerText", button);         //Executing JavaScript directly           js.executeScript("console.log('hello world')");                          # Stores the header element     header = driver.find_element(By.CSS_SELECTOR, "h1")              # Executing JavaScript to capture innerText of header element     driver.execute_script('return arguments[0].innerText', header)                      	//creating Chromedriver instance     	IWebDriver driver = new ChromeDriver();     	//Creating the JavascriptExecutor interface object by Type casting     	IJavaScriptExecutor js = (IJavaScriptExecutor) driver;     	//Button Element     	IWebElement button = driver.FindElement(By.Name("btnLogin"));     	//Executing JavaScript to click on element     	js.ExecuteScript("arguments[0].click();", button);     	//Get return value from script     	String text = (String)js.ExecuteScript("return arguments[0].innerText", button);     	//Executing JavaScript directly     	js.ExecuteScript("console.log('hello world')");                          # Stores the header element     header = driver.find_element(css: 'h1')              # Get return value from script     result = driver.execute_script("return arguments[0].innerText", header)              # Executing JavaScript directly     driver.execute_script("alert('hello world')")                          // Stores the header element         let header = await driver.findElement(By.css('h1'));              // Executing JavaScript to capture innerText of header element         let text = await driver.executeScript('return arguments[0].innerText', header);

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/javascript/test/interactions/windows.spec.js#L33-L37)

##### examples/javascript/test/interactions/windows.spec.js

Copy  Close               const {Builder, By} = require('selenium-webdriver');     const chrome = require('selenium-webdriver/chrome');     const assert = require("node:assert");     let opts = new chrome.Options();     opts.addArguments('--headless');     let startIndex = 0     let endIndex = 5     let pdfMagicNumber = 'JVBER'     let imgMagicNumber = 'iVBOR'     let base64Code          describe('Interactions - Windows', function () {       let driver;       before(async function () {         driver = await new Builder().forBrowser('chrome').setChromeOptions(opts).build();       });            after(async () => await driver.quit());            it('Should be able to print page to pdf', async function () {              await driver.get('https://www.selenium.dev/selenium/web/alerts.html');         let base64 = await driver.printPage({pageRanges: ["1-2"]});         // page can be saved as a PDF as below         // await fs.writeFileSync('./test.pdf', base64, 'base64');              base64Code = base64.slice(startIndex, endIndex)         assert.strictEqual(base64Code, pdfMagicNumber)       });            it('Should be able to get text using executeScript', async function () {         await driver.get('https://www.selenium.dev/selenium/web/javascriptPage.html');         // Stores the header element         let header = await driver.findElement(By.css('h1'));              // Executing JavaScript to capture innerText of header element         let text = await driver.executeScript('return arguments[0].innerText', header);         assert.strictEqual(text, `Type Stuff`)       });            it('Should be able to take Element Screenshot', async function () {         await driver.get('https://www.selenium.dev/selenium/web/javascriptPage.html');              let header = await driver.findElement(By.css('h1'));         // Captures the element screenshot         let encodedString = await header.takeScreenshot(true);         // save screenshot as below         // await fs.writeFileSync('./image.png', encodedString, 'base64');         base64Code = encodedString.slice(startIndex, endIndex)         assert.strictEqual(base64Code, imgMagicNumber)       });            it('Should be able to takeScreenshot', async function () {         await driver.get('https://www.selenium.dev/selenium/web/javascriptPage.html');              // Captures the screenshot         let encodedString = await driver.takeScreenshot();         // save screenshot as below         // await fs.writeFileSync('./image.png', encodedString, 'base64');         base64Code = encodedString.slice(startIndex, endIndex)         assert.strictEqual(base64Code, imgMagicNumber)       });            it('Should be able to switch to newWindow and newTab and close', async function () {         await driver.get('https://www.selenium.dev/selenium/web/');         const initialWindow = await driver.getAllWindowHandles();         assert.strictEqual(initialWindow.length, 1)              // Opens a new tab and switches to new tab         await driver.switchTo().newWindow('tab');         const browserTabs = await driver.getAllWindowHandles();         assert.strictEqual(browserTabs.length, 2)              // Opens a new window and switches to new window         await driver.switchTo().newWindow('window');         const windows = await driver.getAllWindowHandles();         assert.strictEqual(windows.length, 3)              //Close the tab or window         await driver.close();              //Switch back to the old tab or window         await driver.switchTo().window(windows[1]);              const windowsAfterClose = await driver.getAllWindowHandles();         assert.strictEqual(windowsAfterClose.length, 2);       });            it('Should be able to getWindow Size', async function () {         await driver.get('https://www.selenium.dev/selenium/web/');              // Access each dimension individually         const { width, height } = await driver.manage().window().getRect();              // Or store the dimensions and query them later         const rect = await driver.manage().window().getRect();         const windowWidth = rect.width;         const windowHeight = rect.height;              assert.ok(windowWidth>0);         assert.ok(windowHeight>0);       });            it('Should be able to getWindow position', async function () {         await driver.get('https://www.selenium.dev/selenium/web/');              // Access each dimension individually         const { x, y } = await driver.manage().window().getRect();              // Or store the dimensions and query them later         const rect = await driver.manage().window().getRect();         const x1 = rect.x;         const y1 = rect.y;              assert.ok(x1>=0);         assert.ok(y1>=0);       });     });               // Stores the header element     val header = driver.findElement(By.cssSelector("h1"))          // Get return value from script     val result = driver.executeScript("return arguments[0].innerText", header)          // Executing JavaScript directly     driver.executeScript("alert('hello world')")       

### Print Page

Prints the current page within the browser.

_Note: This requires Chromium Browsers to be in headless mode_

[ Move Code](https://www.selenium.dev/documentation/about/contributing/#moving-examples)

  * Java   * Python   * CSharp   * Ruby   * JavaScript   * Kotlin

                  import org.openqa.selenium.print.PrintOptions;              driver.get("https://www.selenium.dev");         printer = (PrintsPage) driver;              PrintOptions printOptions = new PrintOptions();         printOptions.setPageRanges("1-2");              Pdf pdf = printer.print(printOptions);         String content = pdf.getContent();                          from selenium.webdriver.common.print_page_options import PrintOptions              print_options = PrintOptions()         print_options.page_ranges = ['1-2']              driver.get("printPage.html")              base64code = driver.print_page(print_options)                          // code sample not available please raise a PR                          driver.navigate_to 'https://www.selenium.dev'              base64encodedContent = driver.print_page(orientation: 'landscape')                          await driver.get('https://www.selenium.dev/selenium/web/alerts.html');           let base64 = await driver.printPage({pageRanges: ["1-2"]});           // page can be saved as a PDF as below           // await fs.writeFileSync('./test.pdf', base64, 'base64');       

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/javascript/test/interactions/windows.spec.js#L22-L25)

##### examples/javascript/test/interactions/windows.spec.js

Copy  Close               const {Builder, By} = require('selenium-webdriver');       const chrome = require('selenium-webdriver/chrome');       const assert = require("node:assert");       let opts = new chrome.Options();       opts.addArguments('--headless');       let startIndex = 0       let endIndex = 5       let pdfMagicNumber = 'JVBER'       let imgMagicNumber = 'iVBOR'       let base64Code              describe('Interactions - Windows', function () {         let driver;         before(async function () {           driver = await new Builder().forBrowser('chrome').setChromeOptions(opts).build();         });                after(async () => await driver.quit());                it('Should be able to print page to pdf', async function () {                  await driver.get('https://www.selenium.dev/selenium/web/alerts.html');           let base64 = await driver.printPage({pageRanges: ["1-2"]});           // page can be saved as a PDF as below           // await fs.writeFileSync('./test.pdf', base64, 'base64');                  base64Code = base64.slice(startIndex, endIndex)           assert.strictEqual(base64Code, pdfMagicNumber)         });                it('Should be able to get text using executeScript', async function () {           await driver.get('https://www.selenium.dev/selenium/web/javascriptPage.html');           // Stores the header element           let header = await driver.findElement(By.css('h1'));                  // Executing JavaScript to capture innerText of header element           let text = await driver.executeScript('return arguments[0].innerText', header);           assert.strictEqual(text, `Type Stuff`)         });                it('Should be able to take Element Screenshot', async function () {           await driver.get('https://www.selenium.dev/selenium/web/javascriptPage.html');                  let header = await driver.findElement(By.css('h1'));           // Captures the element screenshot           let encodedString = await header.takeScreenshot(true);           // save screenshot as below           // await fs.writeFileSync('./image.png', encodedString, 'base64');           base64Code = encodedString.slice(startIndex, endIndex)           assert.strictEqual(base64Code, imgMagicNumber)         });                it('Should be able to takeScreenshot', async function () {           await driver.get('https://www.selenium.dev/selenium/web/javascriptPage.html');                  // Captures the screenshot           let encodedString = await driver.takeScreenshot();           // save screenshot as below           // await fs.writeFileSync('./image.png', encodedString, 'base64');           base64Code = encodedString.slice(startIndex, endIndex)           assert.strictEqual(base64Code, imgMagicNumber)         });                it('Should be able to switch to newWindow and newTab and close', async function () {           await driver.get('https://www.selenium.dev/selenium/web/');           const initialWindow = await driver.getAllWindowHandles();           assert.strictEqual(initialWindow.length, 1)                  // Opens a new tab and switches to new tab           await driver.switchTo().newWindow('tab');           const browserTabs = await driver.getAllWindowHandles();           assert.strictEqual(browserTabs.length, 2)                  // Opens a new window and switches to new window           await driver.switchTo().newWindow('window');           const windows = await driver.getAllWindowHandles();           assert.strictEqual(windows.length, 3)                  //Close the tab or window           await driver.close();                  //Switch back to the old tab or window           await driver.switchTo().window(windows[1]);                  const windowsAfterClose = await driver.getAllWindowHandles();           assert.strictEqual(windowsAfterClose.length, 2);         });                it('Should be able to getWindow Size', async function () {           await driver.get('https://www.selenium.dev/selenium/web/');                  // Access each dimension individually           const { width, height } = await driver.manage().window().getRect();                  // Or store the dimensions and query them later           const rect = await driver.manage().window().getRect();           const windowWidth = rect.width;           const windowHeight = rect.height;                  assert.ok(windowWidth>0);           assert.ok(windowHeight>0);         });                it('Should be able to getWindow position', async function () {           await driver.get('https://www.selenium.dev/selenium/web/');                  // Access each dimension individually           const { x, y } = await driver.manage().window().getRect();                  // Or store the dimensions and query them later           const rect = await driver.manage().window().getRect();           const x1 = rect.x;           const y1 = rect.y;                  assert.ok(x1>=0);           assert.ok(y1>=0);         });       });                   driver.get("https://www.selenium.dev")         val printer = driver as PrintsPage              val printOptions = PrintOptions()         printOptions.setPageRanges("1-2")                  val pdf: Pdf = printer.print(printOptions)         val content = pdf.content       

# 7 - Virtual Authenticator

A representation of the Web Authenticator model.

Web applications can enable a public key-based authentication mechanism known as Web Authentication to authenticate users in a passwordless manner. [Web Authentication](https://www.w3.org/TR/webauthn-2/) defines APIs that allows a user to create a public-key credential and register it with an authenticator. An authenticator can be a hardware device or a software entity that stores user’s public-key credentials and retrieves them on request.

As the name suggests, Virtual Authenticator emulates such authenticators for testing.

## Virtual Authenticator Options

A Virtual Authenticatior has a [set of properties](https://www.w3.org/TR/webauthn-2/#sctn-automation-virtual-authenticators). These properties are mapped as VirtualAuthenticatorOptions in the Selenium bindings.

  * Java   * CSharp   * Ruby   * Python   * JavaScript   * Kotlin

                public void testVirtualOptions() {         VirtualAuthenticatorOptions options = new VirtualAuthenticatorOptions()           .setIsUserVerified(true)           .setHasUserVerification(true)           .setIsUserConsenting(true)           .setTransport(VirtualAuthenticatorOptions.Transport.USB)           .setProtocol(VirtualAuthenticatorOptions.Protocol.U2F)

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/java/src/test/java/dev/selenium/interactions/VirtualAuthenticatorTest.java#L55-L61)

##### examples/java/src/test/java/dev/selenium/interactions/VirtualAuthenticatorTest.java

Copy  Close               package dev.selenium.interactions;          import dev.selenium.BaseChromeTest;     import java.security.spec.PKCS8EncodedKeySpec;     import java.util.Base64;     import java.util.List;     import org.junit.jupiter.api.Assertions;     import org.junit.jupiter.api.Disabled;     import org.junit.jupiter.api.Test;     import org.openqa.selenium.InvalidArgumentException;     import org.openqa.selenium.virtualauthenticator.Credential;     import org.openqa.selenium.virtualauthenticator.HasVirtualAuthenticator;     import org.openqa.selenium.virtualauthenticator.VirtualAuthenticator;     import org.openqa.selenium.virtualauthenticator.VirtualAuthenticatorOptions;          public class VirtualAuthenticatorTest extends BaseChromeTest {            /**        * A pkcs#8 encoded encrypted RSA private key as a base64url string.        */       private final static String         base64EncodedRsaPK =         "MIIEvAIBADANBgkqhkiG9w0BAQEFAASCBKYwggSiAgEAAoIBAQDbBOu5Lhs4vpowbCnmCyLUpIE7JM9sm9QXzye2G+jr+Kr"         + "MsinWohEce47BFPJlTaDzHSvOW2eeunBO89ZcvvVc8RLz4qyQ8rO98xS1jtgqi1NcBPETDrtzthODu/gd0sjB2Tk3TLuB"         + "GVoPXt54a+Oo4JbBJ6h3s0+5eAfGplCbSNq6hN3Jh9YOTw5ZA6GCEy5l8zBaOgjXytd2v2OdSVoEDNiNQRkjJd2rmS2oi"         + "9AyQFR3B7BrPSiDlCcITZFOWgLF5C31Wp/PSHwQhlnh7/6YhnE2y9tzsUvzx0wJXrBADW13+oMxrneDK3WGbxTNYgIi1P"         + "vSqXlqGjHtCK+R2QkXAgMBAAECggEAVc6bu7VAnP6v0gDOeX4razv4FX/adCao9ZsHZ+WPX8PQxtmWYqykH5CY4TSfsui"         + "zAgyPuQ0+j4Vjssr9VODLqFoanspT6YXsvaKanncUYbasNgUJnfnLnw3an2XpU2XdmXTNYckCPRX9nsAAURWT3/n9ljc/"         + "XYY22ecYxM8sDWnHu2uKZ1B7M3X60bQYL5T/lVXkKdD6xgSNLeP4AkRx0H4egaop68hoW8FIwmDPVWYVAvo8etzWCtib"         + "RXz5FcNld9MgD/Ai7ycKy4Q1KhX5GBFI79MVVaHkSQfxPHpr7/XcmpQOEAr+BMPon4s4vnKqAGdGB3j/E3d/+4F2swyko"         + "QKBgQD8hCsp6FIQ5umJlk9/j/nGsMl85LgLaNVYpWlPRKPc54YNumtvj5vx1BG+zMbT7qIE3nmUPTCHP7qb5ERZG4CdMC"         + "S6S64/qzZEqijLCqepwj6j4fV5SyPWEcpxf6ehNdmcfgzVB3Wolfwh1ydhx/96L1jHJcTKchdJJzlfTvq8wwKBgQDeCnK"         + "ws1t5GapfE1rmC/h4olL2qZTth9oQmbrXYohVnoqNFslDa43ePZwL9Jmd9kYb0axOTNMmyrP0NTj41uCfgDS0cJnNTc63"         + "ojKjegxHIyYDKRZNVUR/dxAYB/vPfBYZUS7M89pO6LLsHhzS3qpu3/hppo/Uc/AM /r8PSflNHQKBgDnWgBh6OQncChPUl"         + "OLv9FMZPR1ZOfqLCYrjYEqiuzGm6iKM13zXFO4AGAxu1P/IAd5BovFcTpg79Z8tWqZaUUwvscnl+cRlj+mMXAmdqCeO8V"         + "ASOmqM1ml667axeZDIR867ZG8K5V029Wg+4qtX5uFypNAAi6GfHkxIKrD04yOHAoGACdh4wXESi0oiDdkz3KOHPwIjn6B"         + "hZC7z8mx+pnJODU3cYukxv3WTctlUhAsyjJiQ/0bK1yX87ulqFVgO0Knmh+wNajrb9wiONAJTMICG7tiWJOm7fW5cfTJw"         + "WkBwYADmkfTRmHDvqzQSSvoC2S7aa9QulbC3C/qgGFNrcWgcT9kCgYAZTa1P9bFCDU7hJc2mHwJwAW7/FQKEJg8SL33KI"         + "NpLwcR8fqaYOdAHWWz636osVEqosRrHzJOGpf9x2RSWzQJ+dq8+6fACgfFZOVpN644+sAHfNPAI/gnNKU5OfUv+eav8fB"         + "nzlf1A3y3GIkyMyzFN3DE7e0n/lyqxE4HBYGpI8g==";            private final static PKCS8EncodedKeySpec rsaPrivateKey =         new PKCS8EncodedKeySpec(Base64.getMimeDecoder().decode(base64EncodedRsaPK));            // A pkcs#8 encoded unencrypted EC256 private key as a base64url string.       String base64EncodedEC256PK =         "MIGHAgEAMBMGByqGSM49AgEGCCqGSM49AwEHBG0wawIBAQQg8_zMDQDYAxlU-Q"         + "hk1Dwkf0v18GZca1DMF3SaJ9HPdmShRANCAASNYX5lyVCOZLzFZzrIKmeZ2jwU"         + "RmgsJYxGP__fWN_S-j5sN4tT15XEpN_7QZnt14YvI6uvAgO0uJEboFaZlOEB";            PKCS8EncodedKeySpec ec256PrivateKey =         new PKCS8EncodedKeySpec(Base64.getUrlDecoder().decode(base64EncodedEC256PK));            @Test       public void testVirtualOptions() {         VirtualAuthenticatorOptions options = new VirtualAuthenticatorOptions()           .setIsUserVerified(true)           .setHasUserVerification(true)           .setIsUserConsenting(true)           .setTransport(VirtualAuthenticatorOptions.Transport.USB)           .setProtocol(VirtualAuthenticatorOptions.Protocol.U2F)           .setHasResidentKey(false);              Assertions.assertEquals(6, options.toMap().size());       }            @Test       public void testCreateAuthenticator() {         VirtualAuthenticatorOptions options = new VirtualAuthenticatorOptions()           .setProtocol(VirtualAuthenticatorOptions.Protocol.U2F)           .setHasResidentKey(false);              VirtualAuthenticator authenticator =           ((HasVirtualAuthenticator) driver).addVirtualAuthenticator(options);              List<Credential> credentialList = authenticator.getCredentials();              Assertions.assertEquals(0, credentialList.size());       }            @Test       public void testRemoveAuthenticator() {         VirtualAuthenticatorOptions options = new VirtualAuthenticatorOptions();         VirtualAuthenticator authenticator =           ((HasVirtualAuthenticator) driver).addVirtualAuthenticator(options);              ((HasVirtualAuthenticator) driver).removeVirtualAuthenticator(authenticator);              Assertions.assertThrows(InvalidArgumentException.class, authenticator::getCredentials);       }            @Test       public void testCreateAndAddResidentialKey() {         VirtualAuthenticatorOptions options = new VirtualAuthenticatorOptions()           .setProtocol(VirtualAuthenticatorOptions.Protocol.CTAP2)           .setHasResidentKey(true)           .setHasUserVerification(true)           .setIsUserVerified(true);         VirtualAuthenticator authenticator = ((HasVirtualAuthenticator) driver).addVirtualAuthenticator(options);              byte[] credentialId = {1, 2, 3, 4};         byte[] userHandle = {1};         Credential residentCredential = Credential.createResidentCredential(           credentialId, "localhost", rsaPrivateKey, userHandle, /*signCount=*/0);              authenticator.addCredential(residentCredential);              List<Credential> credentialList = authenticator.getCredentials();         Assertions.assertEquals(1, credentialList.size());              Credential credential = credentialList.get(0);         Assertions.assertArrayEquals(credentialId, credential.getId());       }            @Test       public void testAddResidentCredentialNotSupportedWhenAuthenticatorUsesU2FProtocol() {         VirtualAuthenticatorOptions options = new VirtualAuthenticatorOptions()           .setProtocol(VirtualAuthenticatorOptions.Protocol.U2F)           .setHasResidentKey(true);              VirtualAuthenticator authenticator = ((HasVirtualAuthenticator) driver).addVirtualAuthenticator(options);              PKCS8EncodedKeySpec privateKey =           new PKCS8EncodedKeySpec(Base64.getUrlDecoder().decode(base64EncodedEC256PK));              byte[] credentialId = {1, 2, 3, 4};         byte[] userHandle = {1};         Credential credential = Credential.createResidentCredential(           credentialId, "localhost", privateKey, userHandle, /*signCount=*/0);              Assertions.assertThrows(InvalidArgumentException.class,                                 () -> authenticator.addCredential(credential));       }                 @Test       @Disabled("A fix was implemented and will be available in Selenium 4.34.")       public void testCreateAndAddNonResidentialKey() {         VirtualAuthenticatorOptions options = new VirtualAuthenticatorOptions()           .setProtocol(VirtualAuthenticatorOptions.Protocol.U2F)           .setHasResidentKey(false);              VirtualAuthenticator authenticator = ((HasVirtualAuthenticator) driver).addVirtualAuthenticator(options);              byte[] credentialId = {1, 2, 3, 4};         Credential nonResidentCredential = Credential.createNonResidentCredential(           credentialId, "localhost", ec256PrivateKey, /*signCount=*/0);         authenticator.addCredential(nonResidentCredential);              List<Credential> credentialList = authenticator.getCredentials();         Assertions.assertEquals(1, credentialList.size());              Credential credential = credentialList.get(0);         Assertions.assertArrayEquals(credentialId, credential.getId());       }            @Test       public void testGetCredential() {         VirtualAuthenticatorOptions options = new VirtualAuthenticatorOptions()           .setProtocol(VirtualAuthenticatorOptions.Protocol.CTAP2)           .setHasResidentKey(true)           .setHasUserVerification(true)           .setIsUserVerified(true);         VirtualAuthenticator authenticator = ((HasVirtualAuthenticator) driver).addVirtualAuthenticator(options);              byte[] credentialId = {1, 2, 3, 4};         byte[] userHandle = {1};         Credential residentCredential = Credential.createResidentCredential(           credentialId, "localhost", rsaPrivateKey, userHandle, /*signCount=*/0);              authenticator.addCredential(residentCredential);              List<Credential> credentialList = authenticator.getCredentials();         Assertions.assertEquals(1, credentialList.size());              Credential credential = credentialList.get(0);         Assertions.assertArrayEquals(credentialId, credential.getId());         Assertions.assertArrayEquals(rsaPrivateKey.getEncoded(), credential.getPrivateKey().getEncoded());       }            @Test       public void testRemoveCredential() {         VirtualAuthenticator authenticator =           ((HasVirtualAuthenticator) driver).addVirtualAuthenticator(new VirtualAuthenticatorOptions());              byte[] credentialId = {1, 2, 3, 4};         Credential credential = Credential.createNonResidentCredential(           credentialId, "localhost", rsaPrivateKey, 0);              authenticator.addCredential(credential);              authenticator.removeCredential(credentialId);         Assertions.assertEquals(0, authenticator.getCredentials().size());       }            @Test       public void testRemoveAllCredentials() {         VirtualAuthenticator authenticator =           ((HasVirtualAuthenticator) driver).addVirtualAuthenticator(new VirtualAuthenticatorOptions());              byte[] credentialId = {1, 2, 3, 4};         Credential residentCredential = Credential.createNonResidentCredential(           credentialId, "localhost", rsaPrivateKey, /*signCount=*/0);              authenticator.addCredential(residentCredential);              authenticator.removeAllCredentials();         Assertions.assertEquals(0, authenticator.getCredentials().size());       }            @Test       public void testSetUserVerified() {         VirtualAuthenticatorOptions options = new VirtualAuthenticatorOptions()           .setIsUserVerified(true);              Assertions.assertTrue((boolean) options.toMap().get("isUserVerified"));       }     }                                // Create virtual authenticator options                 VirtualAuthenticatorOptions options = new VirtualAuthenticatorOptions()                     .SetIsUserVerified(true)                     .SetHasUserVerification(true)                     .SetIsUserConsenting(true)                     .SetTransport(VirtualAuthenticatorOptions.Transport.USB)                     .SetProtocol(VirtualAuthenticatorOptions.Protocol.U2F)                     .SetHasResidentKey(false);

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/dotnet/SeleniumDocs/Interactions/VirtualAuthenticatorTest.cs#L48-55)

##### examples/dotnet/SeleniumDocs/Interactions/VirtualAuthenticatorTest.cs

Copy  Close               using Microsoft.VisualStudio.TestTools.UnitTesting;     using Microsoft.IdentityModel.Tokens;     using OpenQA.Selenium;     using OpenQA.Selenium.VirtualAuth;     using static OpenQA.Selenium.VirtualAuth.VirtualAuthenticatorOptions;     using System.Collections.Generic;     using System;          namespace SeleniumDocs.VirtualAuthentication     {         [TestClass]         public class VirtualAuthenticatorTest : BaseChromeTest         {             //A pkcs#8 encoded encrypted RSA private key as a base64 string.             private static string base64EncodedRSAPK =                     "MIIEvAIBADANBgkqhkiG9w0BAQEFAASCBKYwggSiAgEAAoIBAQDbBOu5Lhs4vpowbCnmCyLUpIE7JM9sm9QXzye2G+jr+Kr"                   + "MsinWohEce47BFPJlTaDzHSvOW2eeunBO89ZcvvVc8RLz4qyQ8rO98xS1jtgqi1NcBPETDrtzthODu/gd0sjB2Tk3TLuB"                   + "GVoPXt54a+Oo4JbBJ6h3s0+5eAfGplCbSNq6hN3Jh9YOTw5ZA6GCEy5l8zBaOgjXytd2v2OdSVoEDNiNQRkjJd2rmS2oi"                   + "9AyQFR3B7BrPSiDlCcITZFOWgLF5C31Wp/PSHwQhlnh7/6YhnE2y9tzsUvzx0wJXrBADW13+oMxrneDK3WGbxTNYgIi1P"                   + "vSqXlqGjHtCK+R2QkXAgMBAAECggEAVc6bu7VAnP6v0gDOeX4razv4FX/adCao9ZsHZ+WPX8PQxtmWYqykH5CY4TSfsui"                   + "zAgyPuQ0+j4Vjssr9VODLqFoanspT6YXsvaKanncUYbasNgUJnfnLnw3an2XpU2XdmXTNYckCPRX9nsAAURWT3/n9ljc/"                   + "XYY22ecYxM8sDWnHu2uKZ1B7M3X60bQYL5T/lVXkKdD6xgSNLeP4AkRx0H4egaop68hoW8FIwmDPVWYVAvo8etzWCtib"                   + "RXz5FcNld9MgD/Ai7ycKy4Q1KhX5GBFI79MVVaHkSQfxPHpr7/XcmpQOEAr+BMPon4s4vnKqAGdGB3j/E3d/+4F2swyko"                   + "QKBgQD8hCsp6FIQ5umJlk9/j/nGsMl85LgLaNVYpWlPRKPc54YNumtvj5vx1BG+zMbT7qIE3nmUPTCHP7qb5ERZG4CdMC"                   + "S6S64/qzZEqijLCqepwj6j4fV5SyPWEcpxf6ehNdmcfgzVB3Wolfwh1ydhx/96L1jHJcTKchdJJzlfTvq8wwKBgQDeCnK"                   + "ws1t5GapfE1rmC/h4olL2qZTth9oQmbrXYohVnoqNFslDa43ePZwL9Jmd9kYb0axOTNMmyrP0NTj41uCfgDS0cJnNTc63"                   + "ojKjegxHIyYDKRZNVUR/dxAYB/vPfBYZUS7M89pO6LLsHhzS3qpu3/hppo/Uc/AM /r8PSflNHQKBgDnWgBh6OQncChPUl"                   + "OLv9FMZPR1ZOfqLCYrjYEqiuzGm6iKM13zXFO4AGAxu1P/IAd5BovFcTpg79Z8tWqZaUUwvscnl+cRlj+mMXAmdqCeO8V"                   + "ASOmqM1ml667axeZDIR867ZG8K5V029Wg+4qtX5uFypNAAi6GfHkxIKrD04yOHAoGACdh4wXESi0oiDdkz3KOHPwIjn6B"                   + "hZC7z8mx+pnJODU3cYukxv3WTctlUhAsyjJiQ/0bK1yX87ulqFVgO0Knmh+wNajrb9wiONAJTMICG7tiWJOm7fW5cfTJw"                   + "WkBwYADmkfTRmHDvqzQSSvoC2S7aa9QulbC3C/qgGFNrcWgcT9kCgYAZTa1P9bFCDU7hJc2mHwJwAW7/FQKEJg8SL33KI"                   + "NpLwcR8fqaYOdAHWWz636osVEqosRrHzJOGpf9x2RSWzQJ+dq8+6fACgfFZOVpN644+sAHfNPAI/gnNKU5OfUv+eav8fB"                   + "nzlf1A3y3GIkyMyzFN3DE7e0n/lyqxE4HBYGpI8g==";                  private static byte[] bytes = System.Convert.FromBase64String(base64EncodedRSAPK);             private string base64EncodedPK = Base64UrlEncoder.Encode(bytes);                  // A pkcs#8 encoded unencrypted EC256 private key as a base64url string.             private string base64EncodedEC256PK =                   "MIGHAgEAMBMGByqGSM49AgEGCCqGSM49AwEHBG0wawIBAQQg8_zMDQDYAxlU-Q"                   + "hk1Dwkf0v18GZca1DMF3SaJ9HPdmShRANCAASNYX5lyVCOZLzFZzrIKmeZ2jwU"                   + "RmgsJYxGP__fWN_S-j5sN4tT15XEpN_7QZnt14YvI6uvAgO0uJEboFaZlOEB";                       [TestMethod]             public void VirtualOptionsShouldAllowSettingOptions()             {                 // Create virtual authenticator options                 VirtualAuthenticatorOptions options = new VirtualAuthenticatorOptions()                     .SetIsUserVerified(true)                     .SetHasUserVerification(true)                     .SetIsUserConsenting(true)                     .SetTransport(VirtualAuthenticatorOptions.Transport.USB)                     .SetProtocol(VirtualAuthenticatorOptions.Protocol.U2F)                     .SetHasResidentKey(false);                      Assert.AreEqual(6, options.ToDictionary().Count);             }                  [TestMethod]             public void ShouldBeAbleToCreateAuthenticator()             {                 // Create virtual authenticator options                 VirtualAuthenticatorOptions options = new VirtualAuthenticatorOptions()                     .SetProtocol(VirtualAuthenticatorOptions.Protocol.U2F)                     .SetHasResidentKey(false);                      // Register a virtual authenticator                 ((WebDriver)driver).AddVirtualAuthenticator(options);                      List<Credential> credentialList = ((WebDriver)driver).GetCredentials();                      Assert.AreEqual(0, credentialList.Count);             }                       [TestMethod]             public void ShouldBeAbleToRemoveAuthenticator()             {                 VirtualAuthenticatorOptions options = new VirtualAuthenticatorOptions()                     .SetProtocol(VirtualAuthenticatorOptions.Protocol.U2F)                     .SetHasResidentKey(false);                      String virtualAuthenticatorId = ((WebDriver)driver).AddVirtualAuthenticator(options);                      ((WebDriver)driver).RemoveVirtualAuthenticator(virtualAuthenticatorId);                      // Since the authenticator was removed, any operation using it will throw an error                 Assert.ThrowsException<InvalidOperationException>(() => ((WebDriver)driver).GetCredentials());             }                  [TestMethod]             public void ShouldBeAbleToCreateAndAddResidentialKey()             {                 VirtualAuthenticatorOptions options = new VirtualAuthenticatorOptions()                     .SetProtocol(Protocol.CTAP2)                     .SetHasResidentKey(true)                     .SetHasUserVerification(true)                     .SetIsUserVerified(true);                      ((WebDriver)driver).AddVirtualAuthenticator(options);                      byte[] credentialId = { 1, 2, 3, 4 };                 byte[] userHandle = { 1 };                      Credential residentCredential = Credential.CreateResidentCredential(                   credentialId, "localhost", base64EncodedPK, userHandle, 0);                      ((WebDriver)driver).AddCredential(residentCredential);                      List<Credential> credentialList = ((WebDriver)driver).GetCredentials();                 Assert.AreEqual(1, credentialList.Count);                      Credential credential = credentialList[0];                 CollectionAssert.AreEqual(credentialId, credential.Id);             }                  [TestMethod]             public void ShouldNotAddResidentCredentialWhenAuthenticatorUsesU2FProtocol()             {                 VirtualAuthenticatorOptions options = new VirtualAuthenticatorOptions()                     .SetProtocol(VirtualAuthenticatorOptions.Protocol.U2F)                     .SetHasResidentKey(true);                      ((WebDriver)driver).AddVirtualAuthenticator(options);                      byte[] credentialId = { 1, 2, 3, 4 };                 byte[] userHandle = { 1 };                      Credential credential = Credential.CreateResidentCredential(                   credentialId, "localhost", base64EncodedEC256PK, userHandle, 0);                      Assert.ThrowsException<WebDriverArgumentException>(() => ((WebDriver)driver).AddCredential(credential));             }                  [TestMethod]             public void ShouldBeAbleToCreateAndAddNonResidentKey()             {                 VirtualAuthenticatorOptions options = new VirtualAuthenticatorOptions()                     .SetProtocol(VirtualAuthenticatorOptions.Protocol.U2F)                     .SetHasResidentKey(false);                      ((WebDriver)driver).AddVirtualAuthenticator(options);                      byte[] credentialId = { 1, 2, 3, 4 };                      Credential nonResidentCredential = Credential.CreateNonResidentCredential(                   credentialId, "localhost", base64EncodedEC256PK, 0);                      ((WebDriver)driver).AddCredential(nonResidentCredential);                      List<Credential> credentialList = ((WebDriver)driver).GetCredentials();                 Assert.AreEqual(1, credentialList.Count);                      Credential credential = credentialList[0];                 CollectionAssert.AreEqual(credentialId, nonResidentCredential.Id);             }                  [TestMethod]             public void ShouldBeAbleToGetCredential()             {                 VirtualAuthenticatorOptions options = new VirtualAuthenticatorOptions()                     .SetProtocol(Protocol.CTAP2)                     .SetHasResidentKey(true)                     .SetHasUserVerification(true)                     .SetIsUserVerified(true);                      ((WebDriver)driver).AddVirtualAuthenticator(options);                      byte[] credentialId = { 1, 2, 3, 4 };                 byte[] userHandle = { 1 };                      Credential residentCredential = Credential.CreateResidentCredential(                   credentialId, "localhost", base64EncodedPK, userHandle, 0);                      ((WebDriver)driver).AddCredential(residentCredential);                      List<Credential> credentialList = ((WebDriver)driver).GetCredentials();                 Assert.AreEqual(1, credentialList.Count);                      Credential credential = credentialList[0];                 CollectionAssert.AreEqual(credentialId, residentCredential.Id);                 Assert.AreEqual(base64EncodedPK, credential.PrivateKey);             }                  [TestMethod]             public void ShouldBeAbleToRemoveCredential()             {                 ((WebDriver)driver).AddVirtualAuthenticator(new VirtualAuthenticatorOptions());                      byte[] credentialId = { 1, 2, 3, 4 };                      Credential nonResidentCredential = Credential.CreateNonResidentCredential(                   credentialId, "localhost", base64EncodedEC256PK, 0);                      ((WebDriver)driver).AddCredential(nonResidentCredential);                      ((WebDriver)driver).RemoveCredential(credentialId);                      Assert.AreEqual(0, ((WebDriver)driver).GetCredentials().Count);             }                       [TestMethod]             public void ShouldBeAbleToRemoveAllCredentias()             {                 ((WebDriver)driver).AddVirtualAuthenticator(new VirtualAuthenticatorOptions());                      byte[] credentialId = { 1, 2, 3, 4 };                      Credential nonResidentCredential = Credential.CreateNonResidentCredential(                   credentialId, "localhost", base64EncodedEC256PK, 0);                      ((WebDriver)driver).AddCredential(nonResidentCredential);                      ((WebDriver)driver).RemoveAllCredentials();                      Assert.AreEqual(0, ((WebDriver)driver).GetCredentials().Count);             }                  [TestMethod]             public void ShouldBeSetVerifiedOption()             {                 VirtualAuthenticatorOptions options = new VirtualAuthenticatorOptions()                     .SetIsUserVerified(true);                      Assert.IsTrue((bool)options.ToDictionary()["isUserVerified"]);             }         }     }

[Add Example](https://www.selenium.dev/documentation/about/contributing/#creating-examples)                   options = VirtualAuthenticatorOptions()         options.is_user_verified = True         options.has_user_verification = True         options.is_user_consenting = True         options.transport = VirtualAuthenticatorOptions.Transport.USB         options.protocol = VirtualAuthenticatorOptions.Protocol.U2F         options.has_resident_key = False

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/python/tests/interactions/test_virtual_authenticator.py#L40-L46)

##### examples/python/tests/interactions/test\_virtual\_authenticator.py

Copy  Close               import pytest     from base64 import urlsafe_b64decode, urlsafe_b64encode          from selenium.common.exceptions import InvalidArgumentException     from selenium.webdriver.chrome.webdriver import WebDriver     from selenium.webdriver.common.virtual_authenticator import (         Credential,         VirtualAuthenticatorOptions,     )               BASE64__ENCODED_PK = '''     MIIEvAIBADANBgkqhkiG9w0BAQEFAASCBKYwggSiAgEAAoIBAQDbBOu5Lhs4vpowbCnmCyLUpIE7JM9sm9QXzye2G+jr+Kr     MsinWohEce47BFPJlTaDzHSvOW2eeunBO89ZcvvVc8RLz4qyQ8rO98xS1jtgqi1NcBPETDrtzthODu/gd0sjB2Tk3TLuBGV     oPXt54a+Oo4JbBJ6h3s0+5eAfGplCbSNq6hN3Jh9YOTw5ZA6GCEy5l8zBaOgjXytd2v2OdSVoEDNiNQRkjJd2rmS2oi9AyQ     FR3B7BrPSiDlCcITZFOWgLF5C31Wp/PSHwQhlnh7/6YhnE2y9tzsUvzx0wJXrBADW13+oMxrneDK3WGbxTNYgIi1PvSqXlq     GjHtCK+R2QkXAgMBAAECggEAVc6bu7VAnP6v0gDOeX4razv4FX/adCao9ZsHZ+WPX8PQxtmWYqykH5CY4TSfsuizAgyPuQ0     +j4Vjssr9VODLqFoanspT6YXsvaKanncUYbasNgUJnfnLnw3an2XpU2XdmXTNYckCPRX9nsAAURWT3/n9ljc/XYY22ecYxM     8sDWnHu2uKZ1B7M3X60bQYL5T/lVXkKdD6xgSNLeP4AkRx0H4egaop68hoW8FIwmDPVWYVAvo8etzWCtibRXz5FcNld9MgD     /Ai7ycKy4Q1KhX5GBFI79MVVaHkSQfxPHpr7/XcmpQOEAr+BMPon4s4vnKqAGdGB3j/E3d/+4F2swykoQKBgQD8hCsp6FIQ     5umJlk9/j/nGsMl85LgLaNVYpWlPRKPc54YNumtvj5vx1BG+zMbT7qIE3nmUPTCHP7qb5ERZG4CdMCS6S64/qzZEqijLCqe     pwj6j4fV5SyPWEcpxf6ehNdmcfgzVB3Wolfwh1ydhx/96L1jHJcTKchdJJzlfTvq8wwKBgQDeCnKws1t5GapfE1rmC/h4ol     L2qZTth9oQmbrXYohVnoqNFslDa43ePZwL9Jmd9kYb0axOTNMmyrP0NTj41uCfgDS0cJnNTc63ojKjegxHIyYDKRZNVUR/d     xAYB/vPfBYZUS7M89pO6LLsHhzS3qpu3/hppo/Uc/AM/r8PSflNHQKBgDnWgBh6OQncChPUlOLv9FMZPR1ZOfqLCYrjYEqi     uzGm6iKM13zXFO4AGAxu1P/IAd5BovFcTpg79Z8tWqZaUUwvscnl+cRlj+mMXAmdqCeO8VASOmqM1ml667axeZDIR867ZG8     K5V029Wg+4qtX5uFypNAAi6GfHkxIKrD04yOHAoGACdh4wXESi0oiDdkz3KOHPwIjn6BhZC7z8mx+pnJODU3cYukxv3WTct     lUhAsyjJiQ/0bK1yX87ulqFVgO0Knmh+wNajrb9wiONAJTMICG7tiWJOm7fW5cfTJwWkBwYADmkfTRmHDvqzQSSvoC2S7aa     9QulbC3C/qgGFNrcWgcT9kCgYAZTa1P9bFCDU7hJc2mHwJwAW7/FQKEJg8SL33KINpLwcR8fqaYOdAHWWz636osVEqosRrH     zJOGpf9x2RSWzQJ+dq8+6fACgfFZOVpN644+sAHfNPAI/gnNKU5OfUv+eav8fBnzlf1A3y3GIkyMyzFN3DE7e0n/lyqxE4H     BYGpI8g==     '''               @pytest.fixture(scope="module", autouse=True)     def driver():         yield WebDriver()               def test_virtual_authenticator_options():         options = VirtualAuthenticatorOptions()         options.is_user_verified = True         options.has_user_verification = True         options.is_user_consenting = True         options.transport = VirtualAuthenticatorOptions.Transport.USB         options.protocol = VirtualAuthenticatorOptions.Protocol.U2F         options.has_resident_key = False              assert len(options.to_dict()) == 6               def test_add_authenticator(driver):         # Create virtual authenticator options         options = VirtualAuthenticatorOptions()         options.protocol = VirtualAuthenticatorOptions.Protocol.U2F         options.has_resident_key = False              # Register a virtual authenticator         driver.add_virtual_authenticator(options)              # Get list of credentials         credential_list = driver.get_credentials()              assert len(credential_list) == 0               def test_remove_authenticator(driver):         # Create default virtual authenticator option         options = VirtualAuthenticatorOptions()              # Register a virtual authenticator         driver.add_virtual_authenticator(options)              # Remove virtual authenticator         driver.remove_virtual_authenticator()         assert driver.virtual_authenticator_id is None               def test_create_and_add_resident_key(driver):         # Create virtual authenticator options         options = VirtualAuthenticatorOptions()         options.protocol = VirtualAuthenticatorOptions.Protocol.CTAP2         options.has_resident_key = True         options.has_user_verification = True         options.is_user_verified = True              # Register a virtual authenticator         driver.add_virtual_authenticator(options)              # parameters for Resident Credential         credential_id = bytearray({1, 2, 3, 4})         rp_id = "localhost"         user_handle = bytearray({1})         privatekey = urlsafe_b64decode(BASE64__ENCODED_PK)         sign_count = 0              # create a resident credential using above parameters         resident_credential = Credential.create_resident_credential(credential_id, rp_id, user_handle, privatekey, sign_count)              # add the credential created to virtual authenticator         driver.add_credential(resident_credential)              # get list of all the registered credentials          credential_list = driver.get_credentials()         assert len(credential_list) == 1               def test_add_resident_credential_not_supported_when_authenticator_uses_u2f_protocol(driver):         # Create virtual authenticator options         options = VirtualAuthenticatorOptions()         options.protocol = VirtualAuthenticatorOptions.Protocol.U2F         options.has_resident_key = False              # Register a virtual authenticator         driver.add_virtual_authenticator(options)              # parameters for Resident Credential         credential_id = bytearray({1, 2, 3, 4})         rp_id = "localhost"         user_handle = bytearray({1})         privatekey = urlsafe_b64decode(BASE64__ENCODED_PK)         sign_count = 0              # create a  resident credential using above parameters         credential = Credential.create_resident_credential(credential_id, rp_id, user_handle, privatekey, sign_count)              # Expect InvalidArgumentException          with pytest.raises(InvalidArgumentException):             driver.add_credential(credential)               def test_create_and_add_non_resident_key(driver):         # Create virtual authenticator options         options = VirtualAuthenticatorOptions()         options.protocol = VirtualAuthenticatorOptions.Protocol.U2F         options.has_resident_key = False              # Register a virtual authenticator         driver.add_virtual_authenticator(options)              # parameters for Non Resident Credential         credential_id = bytearray({1, 2, 3, 4})         rp_id = "localhost"         privatekey = urlsafe_b64decode(BASE64__ENCODED_PK)         sign_count = 0              # create a non resident credential using above parameters         credential = Credential.create_non_resident_credential(credential_id, rp_id, privatekey, sign_count)              # add the credential created to virtual authenticator         driver.add_credential(credential)                  # get list of all the registered credentials          credential_list = driver.get_credentials()         assert len(credential_list) == 1                    def test_get_credential(driver):         # Create virtual authenticator options         options = VirtualAuthenticatorOptions()         options.protocol = VirtualAuthenticatorOptions.Protocol.CTAP2         options.has_resident_key = True         options.has_user_verfied = True         options.is_user_verified = True              # Register a virtual authenticator         driver.add_virtual_authenticator(options)              # parameters for Resident Credential         credential_id = bytearray({1, 2, 3, 4})         rp_id = "localhost"         user_handle = bytearray({1})         privatekey = urlsafe_b64decode(BASE64__ENCODED_PK)         sign_count = 0              # create a resident credential using above parameters         credential = Credential.create_resident_credential(credential_id, rp_id, user_handle, privatekey, sign_count)                  # add the credential created to virtual authenticator         driver.add_credential(credential)              # get list of all the registered credentials          credential_list = driver.get_credentials()              assert len(credential_list) == 1         assert credential_list[0].id == urlsafe_b64encode(credential_id).decode()               def test_remove_credential(driver):         # Create default virtual authenticator options         options = VirtualAuthenticatorOptions()              # Register a virtual authenticator         driver.add_virtual_authenticator(options)              # parameters for Non Resident Credential         credential_id = bytearray({1, 2, 3, 4})         rp_id = "localhost"         privatekey = urlsafe_b64decode(BASE64__ENCODED_PK)         sign_count = 0              # create a non resident credential using above parameters         credential = Credential.create_non_resident_credential(credential_id, rp_id, privatekey, sign_count)              # add the credential created to virtual authenticator         driver.add_credential(credential)              # remove the credential created from virtual authenticator         driver.remove_credential(credential.id)              # credential can also be removed using Byte Array         # driver.remove_credential(credential_id)               assert len(driver.get_credentials()) == 0               def test_remove_all_credentials(driver):         # Create default virtual authenticator options         options = VirtualAuthenticatorOptions()         options.has_resident_key = True              # Register a virtual authenticator         driver.add_virtual_authenticator(options)              # parameters for Resident Credential         credential_id = bytearray({1, 2, 3, 4})         rp_id = "localhost"         user_handle = bytearray({1})         privatekey = urlsafe_b64decode(BASE64__ENCODED_PK)         sign_count = 0              # create a resident credential using above parameters         resident_credential = Credential.create_resident_credential(credential_id, rp_id, user_handle, privatekey, sign_count)                  # add the credential created to virtual authenticator         driver.add_credential(resident_credential)              # remove all credentials in virtual authenticator         driver.remove_all_credentials()              assert len(driver.get_credentials()) == 0               def test_set_user_verified():         # Create virtual authenticator options         options = VirtualAuthenticatorOptions()         options.is_user_verified = True              assert options.to_dict().get("isUserVerified") is True                   options.setHasUserVerification(true);         options.setIsUserConsenting(true);         options.setTransport(Transport['USB']);         options.setProtocol(Protocol['U2F']);         options.setHasResidentKey(false);              assert(Object.keys(options).length === 6);

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/javascript/test/virtual_authenticator/virtualAuthenticatorOptions.spec.js#L11-L17)

##### examples/javascript/test/virtual\_authenticator/virtualAuthenticatorOptions.spec.js

Copy  Close               const {VirtualAuthenticatorOptions, Transport, Protocol} = require("selenium-webdriver/lib/virtual_authenticator");     const assert = require('assert')               describe('Virtual authenticator options', function () {       let options;            it('Virtual options', async function () {         options = new VirtualAuthenticatorOptions();         options.setIsUserVerified(true);         options.setHasUserVerification(true);         options.setIsUserConsenting(true);         options.setTransport(Transport['USB']);         options.setProtocol(Protocol['U2F']);         options.setHasResidentKey(false);              assert(Object.keys(options).length === 6);       });            it('User verified', async function () {         options.setIsUserVerified(true);              assert(options.toDict()['isUserVerified']);       });     });

[Add Example](https://www.selenium.dev/documentation/about/contributing/#creating-examples)

## Add Virtual Authenticator

It creates a new virtual authenticator with the provided properties.

  * Java   * CSharp   * Ruby   * Python   * JavaScript   * Kotlin

                public void testCreateAuthenticator() {         VirtualAuthenticatorOptions options = new VirtualAuthenticatorOptions()           .setProtocol(VirtualAuthenticatorOptions.Protocol.U2F)           .setHasResidentKey(false);              VirtualAuthenticator authenticator =

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/java/src/test/java/dev/selenium/interactions/VirtualAuthenticatorTest.java#L68-L73)

##### examples/java/src/test/java/dev/selenium/interactions/VirtualAuthenticatorTest.java

Copy  Close               package dev.selenium.interactions;          import dev.selenium.BaseChromeTest;     import java.security.spec.PKCS8EncodedKeySpec;     import java.util.Base64;     import java.util.List;     import org.junit.jupiter.api.Assertions;     import org.junit.jupiter.api.Disabled;     import org.junit.jupiter.api.Test;     import org.openqa.selenium.InvalidArgumentException;     import org.openqa.selenium.virtualauthenticator.Credential;     import org.openqa.selenium.virtualauthenticator.HasVirtualAuthenticator;     import org.openqa.selenium.virtualauthenticator.VirtualAuthenticator;     import org.openqa.selenium.virtualauthenticator.VirtualAuthenticatorOptions;          public class VirtualAuthenticatorTest extends BaseChromeTest {            /**        * A pkcs#8 encoded encrypted RSA private key as a base64url string.        */       private final static String         base64EncodedRsaPK =         "MIIEvAIBADANBgkqhkiG9w0BAQEFAASCBKYwggSiAgEAAoIBAQDbBOu5Lhs4vpowbCnmCyLUpIE7JM9sm9QXzye2G+jr+Kr"         + "MsinWohEce47BFPJlTaDzHSvOW2eeunBO89ZcvvVc8RLz4qyQ8rO98xS1jtgqi1NcBPETDrtzthODu/gd0sjB2Tk3TLuB"         + "GVoPXt54a+Oo4JbBJ6h3s0+5eAfGplCbSNq6hN3Jh9YOTw5ZA6GCEy5l8zBaOgjXytd2v2OdSVoEDNiNQRkjJd2rmS2oi"         + "9AyQFR3B7BrPSiDlCcITZFOWgLF5C31Wp/PSHwQhlnh7/6YhnE2y9tzsUvzx0wJXrBADW13+oMxrneDK3WGbxTNYgIi1P"         + "vSqXlqGjHtCK+R2QkXAgMBAAECggEAVc6bu7VAnP6v0gDOeX4razv4FX/adCao9ZsHZ+WPX8PQxtmWYqykH5CY4TSfsui"         + "zAgyPuQ0+j4Vjssr9VODLqFoanspT6YXsvaKanncUYbasNgUJnfnLnw3an2XpU2XdmXTNYckCPRX9nsAAURWT3/n9ljc/"         + "XYY22ecYxM8sDWnHu2uKZ1B7M3X60bQYL5T/lVXkKdD6xgSNLeP4AkRx0H4egaop68hoW8FIwmDPVWYVAvo8etzWCtib"         + "RXz5FcNld9MgD/Ai7ycKy4Q1KhX5GBFI79MVVaHkSQfxPHpr7/XcmpQOEAr+BMPon4s4vnKqAGdGB3j/E3d/+4F2swyko"         + "QKBgQD8hCsp6FIQ5umJlk9/j/nGsMl85LgLaNVYpWlPRKPc54YNumtvj5vx1BG+zMbT7qIE3nmUPTCHP7qb5ERZG4CdMC"         + "S6S64/qzZEqijLCqepwj6j4fV5SyPWEcpxf6ehNdmcfgzVB3Wolfwh1ydhx/96L1jHJcTKchdJJzlfTvq8wwKBgQDeCnK"         + "ws1t5GapfE1rmC/h4olL2qZTth9oQmbrXYohVnoqNFslDa43ePZwL9Jmd9kYb0axOTNMmyrP0NTj41uCfgDS0cJnNTc63"         + "ojKjegxHIyYDKRZNVUR/dxAYB/vPfBYZUS7M89pO6LLsHhzS3qpu3/hppo/Uc/AM /r8PSflNHQKBgDnWgBh6OQncChPUl"         + "OLv9FMZPR1ZOfqLCYrjYEqiuzGm6iKM13zXFO4AGAxu1P/IAd5BovFcTpg79Z8tWqZaUUwvscnl+cRlj+mMXAmdqCeO8V"         + "ASOmqM1ml667axeZDIR867ZG8K5V029Wg+4qtX5uFypNAAi6GfHkxIKrD04yOHAoGACdh4wXESi0oiDdkz3KOHPwIjn6B"         + "hZC7z8mx+pnJODU3cYukxv3WTctlUhAsyjJiQ/0bK1yX87ulqFVgO0Knmh+wNajrb9wiONAJTMICG7tiWJOm7fW5cfTJw"         + "WkBwYADmkfTRmHDvqzQSSvoC2S7aa9QulbC3C/qgGFNrcWgcT9kCgYAZTa1P9bFCDU7hJc2mHwJwAW7/FQKEJg8SL33KI"         + "NpLwcR8fqaYOdAHWWz636osVEqosRrHzJOGpf9x2RSWzQJ+dq8+6fACgfFZOVpN644+sAHfNPAI/gnNKU5OfUv+eav8fB"         + "nzlf1A3y3GIkyMyzFN3DE7e0n/lyqxE4HBYGpI8g==";            private final static PKCS8EncodedKeySpec rsaPrivateKey =         new PKCS8EncodedKeySpec(Base64.getMimeDecoder().decode(base64EncodedRsaPK));            // A pkcs#8 encoded unencrypted EC256 private key as a base64url string.       String base64EncodedEC256PK =         "MIGHAgEAMBMGByqGSM49AgEGCCqGSM49AwEHBG0wawIBAQQg8_zMDQDYAxlU-Q"         + "hk1Dwkf0v18GZca1DMF3SaJ9HPdmShRANCAASNYX5lyVCOZLzFZzrIKmeZ2jwU"         + "RmgsJYxGP__fWN_S-j5sN4tT15XEpN_7QZnt14YvI6uvAgO0uJEboFaZlOEB";            PKCS8EncodedKeySpec ec256PrivateKey =         new PKCS8EncodedKeySpec(Base64.getUrlDecoder().decode(base64EncodedEC256PK));            @Test       public void testVirtualOptions() {         VirtualAuthenticatorOptions options = new VirtualAuthenticatorOptions()           .setIsUserVerified(true)           .setHasUserVerification(true)           .setIsUserConsenting(true)           .setTransport(VirtualAuthenticatorOptions.Transport.USB)           .setProtocol(VirtualAuthenticatorOptions.Protocol.U2F)           .setHasResidentKey(false);              Assertions.assertEquals(6, options.toMap().size());       }            @Test       public void testCreateAuthenticator() {         VirtualAuthenticatorOptions options = new VirtualAuthenticatorOptions()           .setProtocol(VirtualAuthenticatorOptions.Protocol.U2F)           .setHasResidentKey(false);              VirtualAuthenticator authenticator =           ((HasVirtualAuthenticator) driver).addVirtualAuthenticator(options);              List<Credential> credentialList = authenticator.getCredentials();              Assertions.assertEquals(0, credentialList.size());       }            @Test       public void testRemoveAuthenticator() {         VirtualAuthenticatorOptions options = new VirtualAuthenticatorOptions();         VirtualAuthenticator authenticator =           ((HasVirtualAuthenticator) driver).addVirtualAuthenticator(options);              ((HasVirtualAuthenticator) driver).removeVirtualAuthenticator(authenticator);              Assertions.assertThrows(InvalidArgumentException.class, authenticator::getCredentials);       }            @Test       public void testCreateAndAddResidentialKey() {         VirtualAuthenticatorOptions options = new VirtualAuthenticatorOptions()           .setProtocol(VirtualAuthenticatorOptions.Protocol.CTAP2)           .setHasResidentKey(true)           .setHasUserVerification(true)           .setIsUserVerified(true);         VirtualAuthenticator authenticator = ((HasVirtualAuthenticator) driver).addVirtualAuthenticator(options);              byte[] credentialId = {1, 2, 3, 4};         byte[] userHandle = {1};         Credential residentCredential = Credential.createResidentCredential(           credentialId, "localhost", rsaPrivateKey, userHandle, /*signCount=*/0);              authenticator.addCredential(residentCredential);              List<Credential> credentialList = authenticator.getCredentials();         Assertions.assertEquals(1, credentialList.size());              Credential credential = credentialList.get(0);         Assertions.assertArrayEquals(credentialId, credential.getId());       }            @Test       public void testAddResidentCredentialNotSupportedWhenAuthenticatorUsesU2FProtocol() {         VirtualAuthenticatorOptions options = new VirtualAuthenticatorOptions()           .setProtocol(VirtualAuthenticatorOptions.Protocol.U2F)           .setHasResidentKey(true);              VirtualAuthenticator authenticator = ((HasVirtualAuthenticator) driver).addVirtualAuthenticator(options);              PKCS8EncodedKeySpec privateKey =           new PKCS8EncodedKeySpec(Base64.getUrlDecoder().decode(base64EncodedEC256PK));              byte[] credentialId = {1, 2, 3, 4};         byte[] userHandle = {1};         Credential credential = Credential.createResidentCredential(           credentialId, "localhost", privateKey, userHandle, /*signCount=*/0);              Assertions.assertThrows(InvalidArgumentException.class,                                 () -> authenticator.addCredential(credential));       }                 @Test       @Disabled("A fix was implemented and will be available in Selenium 4.34.")       public void testCreateAndAddNonResidentialKey() {         VirtualAuthenticatorOptions options = new VirtualAuthenticatorOptions()           .setProtocol(VirtualAuthenticatorOptions.Protocol.U2F)           .setHasResidentKey(false);              VirtualAuthenticator authenticator = ((HasVirtualAuthenticator) driver).addVirtualAuthenticator(options);              byte[] credentialId = {1, 2, 3, 4};         Credential nonResidentCredential = Credential.createNonResidentCredential(           credentialId, "localhost", ec256PrivateKey, /*signCount=*/0);         authenticator.addCredential(nonResidentCredential);              List<Credential> credentialList = authenticator.getCredentials();         Assertions.assertEquals(1, credentialList.size());              Credential credential = credentialList.get(0);         Assertions.assertArrayEquals(credentialId, credential.getId());       }            @Test       public void testGetCredential() {         VirtualAuthenticatorOptions options = new VirtualAuthenticatorOptions()           .setProtocol(VirtualAuthenticatorOptions.Protocol.CTAP2)           .setHasResidentKey(true)           .setHasUserVerification(true)           .setIsUserVerified(true);         VirtualAuthenticator authenticator = ((HasVirtualAuthenticator) driver).addVirtualAuthenticator(options);              byte[] credentialId = {1, 2, 3, 4};         byte[] userHandle = {1};         Credential residentCredential = Credential.createResidentCredential(           credentialId, "localhost", rsaPrivateKey, userHandle, /*signCount=*/0);              authenticator.addCredential(residentCredential);              List<Credential> credentialList = authenticator.getCredentials();         Assertions.assertEquals(1, credentialList.size());              Credential credential = credentialList.get(0);         Assertions.assertArrayEquals(credentialId, credential.getId());         Assertions.assertArrayEquals(rsaPrivateKey.getEncoded(), credential.getPrivateKey().getEncoded());       }            @Test       public void testRemoveCredential() {         VirtualAuthenticator authenticator =           ((HasVirtualAuthenticator) driver).addVirtualAuthenticator(new VirtualAuthenticatorOptions());              byte[] credentialId = {1, 2, 3, 4};         Credential credential = Credential.createNonResidentCredential(           credentialId, "localhost", rsaPrivateKey, 0);              authenticator.addCredential(credential);              authenticator.removeCredential(credentialId);         Assertions.assertEquals(0, authenticator.getCredentials().size());       }            @Test       public void testRemoveAllCredentials() {         VirtualAuthenticator authenticator =           ((HasVirtualAuthenticator) driver).addVirtualAuthenticator(new VirtualAuthenticatorOptions());              byte[] credentialId = {1, 2, 3, 4};         Credential residentCredential = Credential.createNonResidentCredential(           credentialId, "localhost", rsaPrivateKey, /*signCount=*/0);              authenticator.addCredential(residentCredential);              authenticator.removeAllCredentials();         Assertions.assertEquals(0, authenticator.getCredentials().size());       }            @Test       public void testSetUserVerified() {         VirtualAuthenticatorOptions options = new VirtualAuthenticatorOptions()           .setIsUserVerified(true);              Assertions.assertTrue((boolean) options.toMap().get("isUserVerified"));       }     }                                // Create virtual authenticator options                 VirtualAuthenticatorOptions options = new VirtualAuthenticatorOptions()                     .SetProtocol(VirtualAuthenticatorOptions.Protocol.U2F)                     .SetHasResidentKey(false);                      // Register a virtual authenticator                 ((WebDriver)driver).AddVirtualAuthenticator(options);                      List<Credential> credentialList = ((WebDriver)driver).GetCredentials();

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/dotnet/SeleniumDocs/Interactions/VirtualAuthenticatorTest.cs#L63-71)

##### examples/dotnet/SeleniumDocs/Interactions/VirtualAuthenticatorTest.cs

Copy  Close               using Microsoft.VisualStudio.TestTools.UnitTesting;     using Microsoft.IdentityModel.Tokens;     using OpenQA.Selenium;     using OpenQA.Selenium.VirtualAuth;     using static OpenQA.Selenium.VirtualAuth.VirtualAuthenticatorOptions;     using System.Collections.Generic;     using System;          namespace SeleniumDocs.VirtualAuthentication     {         [TestClass]         public class VirtualAuthenticatorTest : BaseChromeTest         {             //A pkcs#8 encoded encrypted RSA private key as a base64 string.             private static string base64EncodedRSAPK =                     "MIIEvAIBADANBgkqhkiG9w0BAQEFAASCBKYwggSiAgEAAoIBAQDbBOu5Lhs4vpowbCnmCyLUpIE7JM9sm9QXzye2G+jr+Kr"                   + "MsinWohEce47BFPJlTaDzHSvOW2eeunBO89ZcvvVc8RLz4qyQ8rO98xS1jtgqi1NcBPETDrtzthODu/gd0sjB2Tk3TLuB"                   + "GVoPXt54a+Oo4JbBJ6h3s0+5eAfGplCbSNq6hN3Jh9YOTw5ZA6GCEy5l8zBaOgjXytd2v2OdSVoEDNiNQRkjJd2rmS2oi"                   + "9AyQFR3B7BrPSiDlCcITZFOWgLF5C31Wp/PSHwQhlnh7/6YhnE2y9tzsUvzx0wJXrBADW13+oMxrneDK3WGbxTNYgIi1P"                   + "vSqXlqGjHtCK+R2QkXAgMBAAECggEAVc6bu7VAnP6v0gDOeX4razv4FX/adCao9ZsHZ+WPX8PQxtmWYqykH5CY4TSfsui"                   + "zAgyPuQ0+j4Vjssr9VODLqFoanspT6YXsvaKanncUYbasNgUJnfnLnw3an2XpU2XdmXTNYckCPRX9nsAAURWT3/n9ljc/"                   + "XYY22ecYxM8sDWnHu2uKZ1B7M3X60bQYL5T/lVXkKdD6xgSNLeP4AkRx0H4egaop68hoW8FIwmDPVWYVAvo8etzWCtib"                   + "RXz5FcNld9MgD/Ai7ycKy4Q1KhX5GBFI79MVVaHkSQfxPHpr7/XcmpQOEAr+BMPon4s4vnKqAGdGB3j/E3d/+4F2swyko"                   + "QKBgQD8hCsp6FIQ5umJlk9/j/nGsMl85LgLaNVYpWlPRKPc54YNumtvj5vx1BG+zMbT7qIE3nmUPTCHP7qb5ERZG4CdMC"                   + "S6S64/qzZEqijLCqepwj6j4fV5SyPWEcpxf6ehNdmcfgzVB3Wolfwh1ydhx/96L1jHJcTKchdJJzlfTvq8wwKBgQDeCnK"                   + "ws1t5GapfE1rmC/h4olL2qZTth9oQmbrXYohVnoqNFslDa43ePZwL9Jmd9kYb0axOTNMmyrP0NTj41uCfgDS0cJnNTc63"                   + "ojKjegxHIyYDKRZNVUR/dxAYB/vPfBYZUS7M89pO6LLsHhzS3qpu3/hppo/Uc/AM /r8PSflNHQKBgDnWgBh6OQncChPUl"                   + "OLv9FMZPR1ZOfqLCYrjYEqiuzGm6iKM13zXFO4AGAxu1P/IAd5BovFcTpg79Z8tWqZaUUwvscnl+cRlj+mMXAmdqCeO8V"                   + "ASOmqM1ml667axeZDIR867ZG8K5V029Wg+4qtX5uFypNAAi6GfHkxIKrD04yOHAoGACdh4wXESi0oiDdkz3KOHPwIjn6B"                   + "hZC7z8mx+pnJODU3cYukxv3WTctlUhAsyjJiQ/0bK1yX87ulqFVgO0Knmh+wNajrb9wiONAJTMICG7tiWJOm7fW5cfTJw"                   + "WkBwYADmkfTRmHDvqzQSSvoC2S7aa9QulbC3C/qgGFNrcWgcT9kCgYAZTa1P9bFCDU7hJc2mHwJwAW7/FQKEJg8SL33KI"                   + "NpLwcR8fqaYOdAHWWz636osVEqosRrHzJOGpf9x2RSWzQJ+dq8+6fACgfFZOVpN644+sAHfNPAI/gnNKU5OfUv+eav8fB"                   + "nzlf1A3y3GIkyMyzFN3DE7e0n/lyqxE4HBYGpI8g==";                  private static byte[] bytes = System.Convert.FromBase64String(base64EncodedRSAPK);             private string base64EncodedPK = Base64UrlEncoder.Encode(bytes);                  // A pkcs#8 encoded unencrypted EC256 private key as a base64url string.             private string base64EncodedEC256PK =                   "MIGHAgEAMBMGByqGSM49AgEGCCqGSM49AwEHBG0wawIBAQQg8_zMDQDYAxlU-Q"                   + "hk1Dwkf0v18GZca1DMF3SaJ9HPdmShRANCAASNYX5lyVCOZLzFZzrIKmeZ2jwU"                   + "RmgsJYxGP__fWN_S-j5sN4tT15XEpN_7QZnt14YvI6uvAgO0uJEboFaZlOEB";                       [TestMethod]             public void VirtualOptionsShouldAllowSettingOptions()             {                 // Create virtual authenticator options                 VirtualAuthenticatorOptions options = new VirtualAuthenticatorOptions()                     .SetIsUserVerified(true)                     .SetHasUserVerification(true)                     .SetIsUserConsenting(true)                     .SetTransport(VirtualAuthenticatorOptions.Transport.USB)                     .SetProtocol(VirtualAuthenticatorOptions.Protocol.U2F)                     .SetHasResidentKey(false);                      Assert.AreEqual(6, options.ToDictionary().Count);             }                  [TestMethod]             public void ShouldBeAbleToCreateAuthenticator()             {                 // Create virtual authenticator options                 VirtualAuthenticatorOptions options = new VirtualAuthenticatorOptions()                     .SetProtocol(VirtualAuthenticatorOptions.Protocol.U2F)                     .SetHasResidentKey(false);                      // Register a virtual authenticator                 ((WebDriver)driver).AddVirtualAuthenticator(options);                      List<Credential> credentialList = ((WebDriver)driver).GetCredentials();                      Assert.AreEqual(0, credentialList.Count);             }                       [TestMethod]             public void ShouldBeAbleToRemoveAuthenticator()             {                 VirtualAuthenticatorOptions options = new VirtualAuthenticatorOptions()                     .SetProtocol(VirtualAuthenticatorOptions.Protocol.U2F)                     .SetHasResidentKey(false);                      String virtualAuthenticatorId = ((WebDriver)driver).AddVirtualAuthenticator(options);                      ((WebDriver)driver).RemoveVirtualAuthenticator(virtualAuthenticatorId);                      // Since the authenticator was removed, any operation using it will throw an error                 Assert.ThrowsException<InvalidOperationException>(() => ((WebDriver)driver).GetCredentials());             }                  [TestMethod]             public void ShouldBeAbleToCreateAndAddResidentialKey()             {                 VirtualAuthenticatorOptions options = new VirtualAuthenticatorOptions()                     .SetProtocol(Protocol.CTAP2)                     .SetHasResidentKey(true)                     .SetHasUserVerification(true)                     .SetIsUserVerified(true);                      ((WebDriver)driver).AddVirtualAuthenticator(options);                      byte[] credentialId = { 1, 2, 3, 4 };                 byte[] userHandle = { 1 };                      Credential residentCredential = Credential.CreateResidentCredential(                   credentialId, "localhost", base64EncodedPK, userHandle, 0);                      ((WebDriver)driver).AddCredential(residentCredential);                      List<Credential> credentialList = ((WebDriver)driver).GetCredentials();                 Assert.AreEqual(1, credentialList.Count);                      Credential credential = credentialList[0];                 CollectionAssert.AreEqual(credentialId, credential.Id);             }                  [TestMethod]             public void ShouldNotAddResidentCredentialWhenAuthenticatorUsesU2FProtocol()             {                 VirtualAuthenticatorOptions options = new VirtualAuthenticatorOptions()                     .SetProtocol(VirtualAuthenticatorOptions.Protocol.U2F)                     .SetHasResidentKey(true);                      ((WebDriver)driver).AddVirtualAuthenticator(options);                      byte[] credentialId = { 1, 2, 3, 4 };                 byte[] userHandle = { 1 };                      Credential credential = Credential.CreateResidentCredential(                   credentialId, "localhost", base64EncodedEC256PK, userHandle, 0);                      Assert.ThrowsException<WebDriverArgumentException>(() => ((WebDriver)driver).AddCredential(credential));             }                  [TestMethod]             public void ShouldBeAbleToCreateAndAddNonResidentKey()             {                 VirtualAuthenticatorOptions options = new VirtualAuthenticatorOptions()                     .SetProtocol(VirtualAuthenticatorOptions.Protocol.U2F)                     .SetHasResidentKey(false);                      ((WebDriver)driver).AddVirtualAuthenticator(options);                      byte[] credentialId = { 1, 2, 3, 4 };                      Credential nonResidentCredential = Credential.CreateNonResidentCredential(                   credentialId, "localhost", base64EncodedEC256PK, 0);                      ((WebDriver)driver).AddCredential(nonResidentCredential);                      List<Credential> credentialList = ((WebDriver)driver).GetCredentials();                 Assert.AreEqual(1, credentialList.Count);                      Credential credential = credentialList[0];                 CollectionAssert.AreEqual(credentialId, nonResidentCredential.Id);             }                  [TestMethod]             public void ShouldBeAbleToGetCredential()             {                 VirtualAuthenticatorOptions options = new VirtualAuthenticatorOptions()                     .SetProtocol(Protocol.CTAP2)                     .SetHasResidentKey(true)                     .SetHasUserVerification(true)                     .SetIsUserVerified(true);                      ((WebDriver)driver).AddVirtualAuthenticator(options);                      byte[] credentialId = { 1, 2, 3, 4 };                 byte[] userHandle = { 1 };                      Credential residentCredential = Credential.CreateResidentCredential(                   credentialId, "localhost", base64EncodedPK, userHandle, 0);                      ((WebDriver)driver).AddCredential(residentCredential);                      List<Credential> credentialList = ((WebDriver)driver).GetCredentials();                 Assert.AreEqual(1, credentialList.Count);                      Credential credential = credentialList[0];                 CollectionAssert.AreEqual(credentialId, residentCredential.Id);                 Assert.AreEqual(base64EncodedPK, credential.PrivateKey);             }                  [TestMethod]             public void ShouldBeAbleToRemoveCredential()             {                 ((WebDriver)driver).AddVirtualAuthenticator(new VirtualAuthenticatorOptions());                      byte[] credentialId = { 1, 2, 3, 4 };                      Credential nonResidentCredential = Credential.CreateNonResidentCredential(                   credentialId, "localhost", base64EncodedEC256PK, 0);                      ((WebDriver)driver).AddCredential(nonResidentCredential);                      ((WebDriver)driver).RemoveCredential(credentialId);                      Assert.AreEqual(0, ((WebDriver)driver).GetCredentials().Count);             }                       [TestMethod]             public void ShouldBeAbleToRemoveAllCredentias()             {                 ((WebDriver)driver).AddVirtualAuthenticator(new VirtualAuthenticatorOptions());                      byte[] credentialId = { 1, 2, 3, 4 };                      Credential nonResidentCredential = Credential.CreateNonResidentCredential(                   credentialId, "localhost", base64EncodedEC256PK, 0);                      ((WebDriver)driver).AddCredential(nonResidentCredential);                      ((WebDriver)driver).RemoveAllCredentials();                      Assert.AreEqual(0, ((WebDriver)driver).GetCredentials().Count);             }                  [TestMethod]             public void ShouldBeSetVerifiedOption()             {                 VirtualAuthenticatorOptions options = new VirtualAuthenticatorOptions()                     .SetIsUserVerified(true);                      Assert.IsTrue((bool)options.ToDictionary()["isUserVerified"]);             }         }     }

[Add Example](https://www.selenium.dev/documentation/about/contributing/#creating-examples)                   options = VirtualAuthenticatorOptions()         options.protocol = VirtualAuthenticatorOptions.Protocol.U2F         options.has_resident_key = False              # Register a virtual authenticator         driver.add_virtual_authenticator(options)

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/python/tests/interactions/test_virtual_authenticator.py#L53-L58)

##### examples/python/tests/interactions/test\_virtual\_authenticator.py

Copy  Close               import pytest     from base64 import urlsafe_b64decode, urlsafe_b64encode          from selenium.common.exceptions import InvalidArgumentException     from selenium.webdriver.chrome.webdriver import WebDriver     from selenium.webdriver.common.virtual_authenticator import (         Credential,         VirtualAuthenticatorOptions,     )               BASE64__ENCODED_PK = '''     MIIEvAIBADANBgkqhkiG9w0BAQEFAASCBKYwggSiAgEAAoIBAQDbBOu5Lhs4vpowbCnmCyLUpIE7JM9sm9QXzye2G+jr+Kr     MsinWohEce47BFPJlTaDzHSvOW2eeunBO89ZcvvVc8RLz4qyQ8rO98xS1jtgqi1NcBPETDrtzthODu/gd0sjB2Tk3TLuBGV     oPXt54a+Oo4JbBJ6h3s0+5eAfGplCbSNq6hN3Jh9YOTw5ZA6GCEy5l8zBaOgjXytd2v2OdSVoEDNiNQRkjJd2rmS2oi9AyQ     FR3B7BrPSiDlCcITZFOWgLF5C31Wp/PSHwQhlnh7/6YhnE2y9tzsUvzx0wJXrBADW13+oMxrneDK3WGbxTNYgIi1PvSqXlq     GjHtCK+R2QkXAgMBAAECggEAVc6bu7VAnP6v0gDOeX4razv4FX/adCao9ZsHZ+WPX8PQxtmWYqykH5CY4TSfsuizAgyPuQ0     +j4Vjssr9VODLqFoanspT6YXsvaKanncUYbasNgUJnfnLnw3an2XpU2XdmXTNYckCPRX9nsAAURWT3/n9ljc/XYY22ecYxM     8sDWnHu2uKZ1B7M3X60bQYL5T/lVXkKdD6xgSNLeP4AkRx0H4egaop68hoW8FIwmDPVWYVAvo8etzWCtibRXz5FcNld9MgD     /Ai7ycKy4Q1KhX5GBFI79MVVaHkSQfxPHpr7/XcmpQOEAr+BMPon4s4vnKqAGdGB3j/E3d/+4F2swykoQKBgQD8hCsp6FIQ     5umJlk9/j/nGsMl85LgLaNVYpWlPRKPc54YNumtvj5vx1BG+zMbT7qIE3nmUPTCHP7qb5ERZG4CdMCS6S64/qzZEqijLCqe     pwj6j4fV5SyPWEcpxf6ehNdmcfgzVB3Wolfwh1ydhx/96L1jHJcTKchdJJzlfTvq8wwKBgQDeCnKws1t5GapfE1rmC/h4ol     L2qZTth9oQmbrXYohVnoqNFslDa43ePZwL9Jmd9kYb0axOTNMmyrP0NTj41uCfgDS0cJnNTc63ojKjegxHIyYDKRZNVUR/d     xAYB/vPfBYZUS7M89pO6LLsHhzS3qpu3/hppo/Uc/AM/r8PSflNHQKBgDnWgBh6OQncChPUlOLv9FMZPR1ZOfqLCYrjYEqi     uzGm6iKM13zXFO4AGAxu1P/IAd5BovFcTpg79Z8tWqZaUUwvscnl+cRlj+mMXAmdqCeO8VASOmqM1ml667axeZDIR867ZG8     K5V029Wg+4qtX5uFypNAAi6GfHkxIKrD04yOHAoGACdh4wXESi0oiDdkz3KOHPwIjn6BhZC7z8mx+pnJODU3cYukxv3WTct     lUhAsyjJiQ/0bK1yX87ulqFVgO0Knmh+wNajrb9wiONAJTMICG7tiWJOm7fW5cfTJwWkBwYADmkfTRmHDvqzQSSvoC2S7aa     9QulbC3C/qgGFNrcWgcT9kCgYAZTa1P9bFCDU7hJc2mHwJwAW7/FQKEJg8SL33KINpLwcR8fqaYOdAHWWz636osVEqosRrH     zJOGpf9x2RSWzQJ+dq8+6fACgfFZOVpN644+sAHfNPAI/gnNKU5OfUv+eav8fBnzlf1A3y3GIkyMyzFN3DE7e0n/lyqxE4H     BYGpI8g==     '''               @pytest.fixture(scope="module", autouse=True)     def driver():         yield WebDriver()               def test_virtual_authenticator_options():         options = VirtualAuthenticatorOptions()         options.is_user_verified = True         options.has_user_verification = True         options.is_user_consenting = True         options.transport = VirtualAuthenticatorOptions.Transport.USB         options.protocol = VirtualAuthenticatorOptions.Protocol.U2F         options.has_resident_key = False              assert len(options.to_dict()) == 6               def test_add_authenticator(driver):         # Create virtual authenticator options         options = VirtualAuthenticatorOptions()         options.protocol = VirtualAuthenticatorOptions.Protocol.U2F         options.has_resident_key = False              # Register a virtual authenticator         driver.add_virtual_authenticator(options)              # Get list of credentials         credential_list = driver.get_credentials()              assert len(credential_list) == 0               def test_remove_authenticator(driver):         # Create default virtual authenticator option         options = VirtualAuthenticatorOptions()              # Register a virtual authenticator         driver.add_virtual_authenticator(options)              # Remove virtual authenticator         driver.remove_virtual_authenticator()         assert driver.virtual_authenticator_id is None               def test_create_and_add_resident_key(driver):         # Create virtual authenticator options         options = VirtualAuthenticatorOptions()         options.protocol = VirtualAuthenticatorOptions.Protocol.CTAP2         options.has_resident_key = True         options.has_user_verification = True         options.is_user_verified = True              # Register a virtual authenticator         driver.add_virtual_authenticator(options)              # parameters for Resident Credential         credential_id = bytearray({1, 2, 3, 4})         rp_id = "localhost"         user_handle = bytearray({1})         privatekey = urlsafe_b64decode(BASE64__ENCODED_PK)         sign_count = 0              # create a resident credential using above parameters         resident_credential = Credential.create_resident_credential(credential_id, rp_id, user_handle, privatekey, sign_count)              # add the credential created to virtual authenticator         driver.add_credential(resident_credential)              # get list of all the registered credentials          credential_list = driver.get_credentials()         assert len(credential_list) == 1               def test_add_resident_credential_not_supported_when_authenticator_uses_u2f_protocol(driver):         # Create virtual authenticator options         options = VirtualAuthenticatorOptions()         options.protocol = VirtualAuthenticatorOptions.Protocol.U2F         options.has_resident_key = False              # Register a virtual authenticator         driver.add_virtual_authenticator(options)              # parameters for Resident Credential         credential_id = bytearray({1, 2, 3, 4})         rp_id = "localhost"         user_handle = bytearray({1})         privatekey = urlsafe_b64decode(BASE64__ENCODED_PK)         sign_count = 0              # create a  resident credential using above parameters         credential = Credential.create_resident_credential(credential_id, rp_id, user_handle, privatekey, sign_count)              # Expect InvalidArgumentException          with pytest.raises(InvalidArgumentException):             driver.add_credential(credential)               def test_create_and_add_non_resident_key(driver):         # Create virtual authenticator options         options = VirtualAuthenticatorOptions()         options.protocol = VirtualAuthenticatorOptions.Protocol.U2F         options.has_resident_key = False              # Register a virtual authenticator         driver.add_virtual_authenticator(options)              # parameters for Non Resident Credential         credential_id = bytearray({1, 2, 3, 4})         rp_id = "localhost"         privatekey = urlsafe_b64decode(BASE64__ENCODED_PK)         sign_count = 0              # create a non resident credential using above parameters         credential = Credential.create_non_resident_credential(credential_id, rp_id, privatekey, sign_count)              # add the credential created to virtual authenticator         driver.add_credential(credential)                  # get list of all the registered credentials          credential_list = driver.get_credentials()         assert len(credential_list) == 1                    def test_get_credential(driver):         # Create virtual authenticator options         options = VirtualAuthenticatorOptions()         options.protocol = VirtualAuthenticatorOptions.Protocol.CTAP2         options.has_resident_key = True         options.has_user_verfied = True         options.is_user_verified = True              # Register a virtual authenticator         driver.add_virtual_authenticator(options)              # parameters for Resident Credential         credential_id = bytearray({1, 2, 3, 4})         rp_id = "localhost"         user_handle = bytearray({1})         privatekey = urlsafe_b64decode(BASE64__ENCODED_PK)         sign_count = 0              # create a resident credential using above parameters         credential = Credential.create_resident_credential(credential_id, rp_id, user_handle, privatekey, sign_count)                  # add the credential created to virtual authenticator         driver.add_credential(credential)              # get list of all the registered credentials          credential_list = driver.get_credentials()              assert len(credential_list) == 1         assert credential_list[0].id == urlsafe_b64encode(credential_id).decode()               def test_remove_credential(driver):         # Create default virtual authenticator options         options = VirtualAuthenticatorOptions()              # Register a virtual authenticator         driver.add_virtual_authenticator(options)              # parameters for Non Resident Credential         credential_id = bytearray({1, 2, 3, 4})         rp_id = "localhost"         privatekey = urlsafe_b64decode(BASE64__ENCODED_PK)         sign_count = 0              # create a non resident credential using above parameters         credential = Credential.create_non_resident_credential(credential_id, rp_id, privatekey, sign_count)              # add the credential created to virtual authenticator         driver.add_credential(credential)              # remove the credential created from virtual authenticator         driver.remove_credential(credential.id)              # credential can also be removed using Byte Array         # driver.remove_credential(credential_id)               assert len(driver.get_credentials()) == 0               def test_remove_all_credentials(driver):         # Create default virtual authenticator options         options = VirtualAuthenticatorOptions()         options.has_resident_key = True              # Register a virtual authenticator         driver.add_virtual_authenticator(options)              # parameters for Resident Credential         credential_id = bytearray({1, 2, 3, 4})         rp_id = "localhost"         user_handle = bytearray({1})         privatekey = urlsafe_b64decode(BASE64__ENCODED_PK)         sign_count = 0              # create a resident credential using above parameters         resident_credential = Credential.create_resident_credential(credential_id, rp_id, user_handle, privatekey, sign_count)                  # add the credential created to virtual authenticator         driver.add_credential(resident_credential)              # remove all credentials in virtual authenticator         driver.remove_all_credentials()              assert len(driver.get_credentials()) == 0               def test_set_user_verified():         # Create virtual authenticator options         options = VirtualAuthenticatorOptions()         options.is_user_verified = True              assert options.to_dict().get("isUserVerified") is True                   options.setProtocol(Protocol['U2F']);         options.setHasResidentKey(false);              // Register a virtual authenticator         await driver.addVirtualAuthenticator(options);

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/javascript/test/virtual_authenticator/virtualAuthenticator.spec.js#L51-L55)

##### examples/javascript/test/virtual\_authenticator/virtualAuthenticator.spec.js

Copy  Close               const { Builder} = require("selenium-webdriver");     const { Credential, VirtualAuthenticatorOptions, Transport, Protocol } = require("selenium-webdriver/lib/virtual_authenticator");     const assert = require('assert')     const { InvalidArgumentError } = require("selenium-webdriver/lib/error");               describe('Virtual authenticator', function() {       const BASE64_ENCODED_PK =         "MIIEvAIBADANBgkqhkiG9w0BAQEFAASCBKYwggSiAgEAAoIBAQDbBOu5Lhs4vpowbCnmCyLUpIE7JM9sm9QXzye2G+jr+Kr" +         "MsinWohEce47BFPJlTaDzHSvOW2eeunBO89ZcvvVc8RLz4qyQ8rO98xS1jtgqi1NcBPETDrtzthODu/gd0sjB2Tk3TLuBGV" +         "oPXt54a+Oo4JbBJ6h3s0+5eAfGplCbSNq6hN3Jh9YOTw5ZA6GCEy5l8zBaOgjXytd2v2OdSVoEDNiNQRkjJd2rmS2oi9AyQ" +         "FR3B7BrPSiDlCcITZFOWgLF5C31Wp/PSHwQhlnh7/6YhnE2y9tzsUvzx0wJXrBADW13+oMxrneDK3WGbxTNYgIi1PvSqXlq" +         "GjHtCK+R2QkXAgMBAAECggEAVc6bu7VAnP6v0gDOeX4razv4FX/adCao9ZsHZ+WPX8PQxtmWYqykH5CY4TSfsuizAgyPuQ0" +         "+j4Vjssr9VODLqFoanspT6YXsvaKanncUYbasNgUJnfnLnw3an2XpU2XdmXTNYckCPRX9nsAAURWT3/n9ljc/XYY22ecYxM" +         "8sDWnHu2uKZ1B7M3X60bQYL5T/lVXkKdD6xgSNLeP4AkRx0H4egaop68hoW8FIwmDPVWYVAvo8etzWCtibRXz5FcNld9MgD" +         "/Ai7ycKy4Q1KhX5GBFI79MVVaHkSQfxPHpr7/XcmpQOEAr+BMPon4s4vnKqAGdGB3j/E3d/+4F2swykoQKBgQD8hCsp6FIQ" +         "5umJlk9/j/nGsMl85LgLaNVYpWlPRKPc54YNumtvj5vx1BG+zMbT7qIE3nmUPTCHP7qb5ERZG4CdMCS6S64/qzZEqijLCqe" +         "pwj6j4fV5SyPWEcpxf6ehNdmcfgzVB3Wolfwh1ydhx/96L1jHJcTKchdJJzlfTvq8wwKBgQDeCnKws1t5GapfE1rmC/h4ol" +         "L2qZTth9oQmbrXYohVnoqNFslDa43ePZwL9Jmd9kYb0axOTNMmyrP0NTj41uCfgDS0cJnNTc63ojKjegxHIyYDKRZNVUR/d" +         "xAYB/vPfBYZUS7M89pO6LLsHhzS3qpu3/hppo/Uc/AM/r8PSflNHQKBgDnWgBh6OQncChPUlOLv9FMZPR1ZOfqLCYrjYEqi" +         "uzGm6iKM13zXFO4AGAxu1P/IAd5BovFcTpg79Z8tWqZaUUwvscnl+cRlj+mMXAmdqCeO8VASOmqM1ml667axeZDIR867ZG8" +         "K5V029Wg+4qtX5uFypNAAi6GfHkxIKrD04yOHAoGACdh4wXESi0oiDdkz3KOHPwIjn6BhZC7z8mx+pnJODU3cYukxv3WTct" +         "lUhAsyjJiQ/0bK1yX87ulqFVgO0Knmh+wNajrb9wiONAJTMICG7tiWJOm7fW5cfTJwWkBwYADmkfTRmHDvqzQSSvoC2S7aa" +         "9QulbC3C/qgGFNrcWgcT9kCgYAZTa1P9bFCDU7hJc2mHwJwAW7/FQKEJg8SL33KINpLwcR8fqaYOdAHWWz636osVEqosRrH" +         "zJOGpf9x2RSWzQJ+dq8+6fACgfFZOVpN644+sAHfNPAI/gnNKU5OfUv+eav8fBnzlf1A3y3GIkyMyzFN3DE7e0n/lyqxE4H" +         "BYGpI8g==";            const base64EncodedPK =         "MIGHAgEAMBMGByqGSM49AgEGCCqGSM49AwEHBG0wawIBAQQg8_zMDQDYAxlU-Q" +         "hk1Dwkf0v18GZca1DMF3SaJ9HPdmShRANCAASNYX5lyVCOZLzFZzrIKmeZ2jwU" +         "RmgsJYxGP__fWN_S-j5sN4tT15XEpN_7QZnt14YvI6uvAgO0uJEboFaZlOEB";            let options;       let driver;            before(async function() {         options = new VirtualAuthenticatorOptions();         driver = await new Builder().forBrowser('chrome').build();       });            after(async() => await driver.quit());            function arraysEqual(array1, array2) {         return (array1.length === array2.length &&           array1.every((item) => array2.includes(item)) &&           array2.every((item) => array1.includes(item)));       }            it('Register a virtual authenticator', async function() {         options.setProtocol(Protocol['U2F']);         options.setHasResidentKey(false);              // Register a virtual authenticator         await driver.addVirtualAuthenticator(options);         let credentialList = await driver.getCredentials();              assert.equal(0, credentialList.length);       });            it('Remove authenticator', async function() {         await driver.addVirtualAuthenticator(options);         await driver.removeVirtualAuthenticator();              // Since the authenticator was removed, any operation using it will throw an error         try {           await driver.getCredentials()         }         catch (e) {           if (e instanceof InvalidArgumentError) {             assert(true)           }           else {             assert(false)           }         }       });            it('Createa and add residential key', async function() {         options.setProtocol(Protocol['CTAP2']);         options.setHasResidentKey(true);         options.setHasUserVerification(true);         options.setIsUserVerified(true);              await driver.addVirtualAuthenticator(options);              let residentCredential = new Credential().createResidentCredential(           new Uint8Array([1, 2, 3, 4]),           'localhost',           new Uint8Array([1]),           Buffer.from(BASE64_ENCODED_PK, 'base64').toString('binary'),           0);              await driver.addCredential(residentCredential);         let credentialList = await driver.getCredentials();         assert.equal(1, credentialList.length);              let credential_id = credentialList[0].id();         let test_id = new Uint8Array([1, 2, 3, 4]);              assert(arraysEqual(credential_id, test_id));       });            it('Add resident credential not supported when authenticator uses U2F protocol', async function() {         options.setProtocol(Protocol['U2F']);         options.setHasResidentKey(true);              await driver.addVirtualAuthenticator(options);              let credential = new Credential().createResidentCredential(           new Uint8Array([1, 2, 3, 4]),           'localhost',           new Uint8Array([1]),           Buffer.from(base64EncodedPK, 'base64').toString('binary'),           0);              try {           await driver.addCredential(credential)         }         catch (e) {           if (e instanceof InvalidArgumentError) {             assert(true)           }           else {             assert(false)           }         }       });            it('Create and add non residential key', async function() {         options.setProtocol(Protocol['U2F']);         options.setHasResidentKey(false);              await driver.addVirtualAuthenticator(options);              let nonResidentCredential = new Credential().createNonResidentCredential(           new Uint8Array([1, 2, 3, 4]),           'localhost',           Buffer.from(base64EncodedPK, 'base64').toString('binary'),           0);              await driver.addCredential(nonResidentCredential);              let credentialList = await driver.getCredentials();         assert.equal(1, credentialList.length);              let credential_id = credentialList[0].id();         let test_id = new Uint8Array([1, 2, 3, 4]);              assert(arraysEqual(credential_id, test_id));       });            it('Get credential', async function() {         options.setProtocol(Protocol['CTAP2']);         options.setHasResidentKey(true);         options.setHasUserVerification(true);         options.setIsUserVerified(true);              await driver.addVirtualAuthenticator(options);              let residentCredential = new Credential().createResidentCredential(           new Uint8Array([1, 2, 3, 4]),           'localhost',           new Uint8Array([1]),           Buffer.from(BASE64_ENCODED_PK, 'base64').toString('binary'),           0);              await driver.addCredential(residentCredential);              let credentialList = await driver.getCredentials();         assert.equal(1, credentialList.length);              let credential_id = credentialList[0].id();         let test_id = new Uint8Array([1, 2, 3, 4]);              assert(arraysEqual(credential_id, test_id));         assert.equal(BASE64_ENCODED_PK, Buffer.from(credentialList[0].privateKey(), 'binary').toString('base64'));       });            it('Remove all credentials', async function() {         await driver.addVirtualAuthenticator(options);              let nonResidentCredential = new Credential().createNonResidentCredential(           new Uint8Array([1, 2, 3, 4]),           'localhost',           Buffer.from(BASE64_ENCODED_PK, 'base64').toString('binary'),           0);              await driver.addCredential(nonResidentCredential);         await driver.removeAllCredentials();              let credentialList = await driver.getCredentials();         assert.equal(0, credentialList.length);       });            it('Set is user verified', async function() {         options.setIsUserVerified(true);         assert.equal(options.getIsUserVerified(), true);       });     });

[Add Example](https://www.selenium.dev/documentation/about/contributing/#creating-examples)

## Remove Virtual Authenticator

Removes the previously added virtual authenticator.

  * Java   * CSharp   * Ruby   * Python   * JavaScript   * Kotlin

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/java/src/test/java/dev/selenium/interactions/VirtualAuthenticatorTest.java#L86)

##### examples/java/src/test/java/dev/selenium/interactions/VirtualAuthenticatorTest.java

Copy  Close               package dev.selenium.interactions;          import dev.selenium.BaseChromeTest;     import java.security.spec.PKCS8EncodedKeySpec;     import java.util.Base64;     import java.util.List;     import org.junit.jupiter.api.Assertions;     import org.junit.jupiter.api.Disabled;     import org.junit.jupiter.api.Test;     import org.openqa.selenium.InvalidArgumentException;     import org.openqa.selenium.virtualauthenticator.Credential;     import org.openqa.selenium.virtualauthenticator.HasVirtualAuthenticator;     import org.openqa.selenium.virtualauthenticator.VirtualAuthenticator;     import org.openqa.selenium.virtualauthenticator.VirtualAuthenticatorOptions;          public class VirtualAuthenticatorTest extends BaseChromeTest {            /**        * A pkcs#8 encoded encrypted RSA private key as a base64url string.        */       private final static String         base64EncodedRsaPK =         "MIIEvAIBADANBgkqhkiG9w0BAQEFAASCBKYwggSiAgEAAoIBAQDbBOu5Lhs4vpowbCnmCyLUpIE7JM9sm9QXzye2G+jr+Kr"         + "MsinWohEce47BFPJlTaDzHSvOW2eeunBO89ZcvvVc8RLz4qyQ8rO98xS1jtgqi1NcBPETDrtzthODu/gd0sjB2Tk3TLuB"         + "GVoPXt54a+Oo4JbBJ6h3s0+5eAfGplCbSNq6hN3Jh9YOTw5ZA6GCEy5l8zBaOgjXytd2v2OdSVoEDNiNQRkjJd2rmS2oi"         + "9AyQFR3B7BrPSiDlCcITZFOWgLF5C31Wp/PSHwQhlnh7/6YhnE2y9tzsUvzx0wJXrBADW13+oMxrneDK3WGbxTNYgIi1P"         + "vSqXlqGjHtCK+R2QkXAgMBAAECggEAVc6bu7VAnP6v0gDOeX4razv4FX/adCao9ZsHZ+WPX8PQxtmWYqykH5CY4TSfsui"         + "zAgyPuQ0+j4Vjssr9VODLqFoanspT6YXsvaKanncUYbasNgUJnfnLnw3an2XpU2XdmXTNYckCPRX9nsAAURWT3/n9ljc/"         + "XYY22ecYxM8sDWnHu2uKZ1B7M3X60bQYL5T/lVXkKdD6xgSNLeP4AkRx0H4egaop68hoW8FIwmDPVWYVAvo8etzWCtib"         + "RXz5FcNld9MgD/Ai7ycKy4Q1KhX5GBFI79MVVaHkSQfxPHpr7/XcmpQOEAr+BMPon4s4vnKqAGdGB3j/E3d/+4F2swyko"         + "QKBgQD8hCsp6FIQ5umJlk9/j/nGsMl85LgLaNVYpWlPRKPc54YNumtvj5vx1BG+zMbT7qIE3nmUPTCHP7qb5ERZG4CdMC"         + "S6S64/qzZEqijLCqepwj6j4fV5SyPWEcpxf6ehNdmcfgzVB3Wolfwh1ydhx/96L1jHJcTKchdJJzlfTvq8wwKBgQDeCnK"         + "ws1t5GapfE1rmC/h4olL2qZTth9oQmbrXYohVnoqNFslDa43ePZwL9Jmd9kYb0axOTNMmyrP0NTj41uCfgDS0cJnNTc63"         + "ojKjegxHIyYDKRZNVUR/dxAYB/vPfBYZUS7M89pO6LLsHhzS3qpu3/hppo/Uc/AM /r8PSflNHQKBgDnWgBh6OQncChPUl"         + "OLv9FMZPR1ZOfqLCYrjYEqiuzGm6iKM13zXFO4AGAxu1P/IAd5BovFcTpg79Z8tWqZaUUwvscnl+cRlj+mMXAmdqCeO8V"         + "ASOmqM1ml667axeZDIR867ZG8K5V029Wg+4qtX5uFypNAAi6GfHkxIKrD04yOHAoGACdh4wXESi0oiDdkz3KOHPwIjn6B"         + "hZC7z8mx+pnJODU3cYukxv3WTctlUhAsyjJiQ/0bK1yX87ulqFVgO0Knmh+wNajrb9wiONAJTMICG7tiWJOm7fW5cfTJw"         + "WkBwYADmkfTRmHDvqzQSSvoC2S7aa9QulbC3C/qgGFNrcWgcT9kCgYAZTa1P9bFCDU7hJc2mHwJwAW7/FQKEJg8SL33KI"         + "NpLwcR8fqaYOdAHWWz636osVEqosRrHzJOGpf9x2RSWzQJ+dq8+6fACgfFZOVpN644+sAHfNPAI/gnNKU5OfUv+eav8fB"         + "nzlf1A3y3GIkyMyzFN3DE7e0n/lyqxE4HBYGpI8g==";            private final static PKCS8EncodedKeySpec rsaPrivateKey =         new PKCS8EncodedKeySpec(Base64.getMimeDecoder().decode(base64EncodedRsaPK));            // A pkcs#8 encoded unencrypted EC256 private key as a base64url string.       String base64EncodedEC256PK =         "MIGHAgEAMBMGByqGSM49AgEGCCqGSM49AwEHBG0wawIBAQQg8_zMDQDYAxlU-Q"         + "hk1Dwkf0v18GZca1DMF3SaJ9HPdmShRANCAASNYX5lyVCOZLzFZzrIKmeZ2jwU"         + "RmgsJYxGP__fWN_S-j5sN4tT15XEpN_7QZnt14YvI6uvAgO0uJEboFaZlOEB";            PKCS8EncodedKeySpec ec256PrivateKey =         new PKCS8EncodedKeySpec(Base64.getUrlDecoder().decode(base64EncodedEC256PK));            @Test       public void testVirtualOptions() {         VirtualAuthenticatorOptions options = new VirtualAuthenticatorOptions()           .setIsUserVerified(true)           .setHasUserVerification(true)           .setIsUserConsenting(true)           .setTransport(VirtualAuthenticatorOptions.Transport.USB)           .setProtocol(VirtualAuthenticatorOptions.Protocol.U2F)           .setHasResidentKey(false);              Assertions.assertEquals(6, options.toMap().size());       }            @Test       public void testCreateAuthenticator() {         VirtualAuthenticatorOptions options = new VirtualAuthenticatorOptions()           .setProtocol(VirtualAuthenticatorOptions.Protocol.U2F)           .setHasResidentKey(false);              VirtualAuthenticator authenticator =           ((HasVirtualAuthenticator) driver).addVirtualAuthenticator(options);              List<Credential> credentialList = authenticator.getCredentials();              Assertions.assertEquals(0, credentialList.size());       }            @Test       public void testRemoveAuthenticator() {         VirtualAuthenticatorOptions options = new VirtualAuthenticatorOptions();         VirtualAuthenticator authenticator =           ((HasVirtualAuthenticator) driver).addVirtualAuthenticator(options);              ((HasVirtualAuthenticator) driver).removeVirtualAuthenticator(authenticator);              Assertions.assertThrows(InvalidArgumentException.class, authenticator::getCredentials);       }            @Test       public void testCreateAndAddResidentialKey() {         VirtualAuthenticatorOptions options = new VirtualAuthenticatorOptions()           .setProtocol(VirtualAuthenticatorOptions.Protocol.CTAP2)           .setHasResidentKey(true)           .setHasUserVerification(true)           .setIsUserVerified(true);         VirtualAuthenticator authenticator = ((HasVirtualAuthenticator) driver).addVirtualAuthenticator(options);              byte[] credentialId = {1, 2, 3, 4};         byte[] userHandle = {1};         Credential residentCredential = Credential.createResidentCredential(           credentialId, "localhost", rsaPrivateKey, userHandle, /*signCount=*/0);              authenticator.addCredential(residentCredential);              List<Credential> credentialList = authenticator.getCredentials();         Assertions.assertEquals(1, credentialList.size());              Credential credential = credentialList.get(0);         Assertions.assertArrayEquals(credentialId, credential.getId());       }            @Test       public void testAddResidentCredentialNotSupportedWhenAuthenticatorUsesU2FProtocol() {         VirtualAuthenticatorOptions options = new VirtualAuthenticatorOptions()           .setProtocol(VirtualAuthenticatorOptions.Protocol.U2F)           .setHasResidentKey(true);              VirtualAuthenticator authenticator = ((HasVirtualAuthenticator) driver).addVirtualAuthenticator(options);              PKCS8EncodedKeySpec privateKey =           new PKCS8EncodedKeySpec(Base64.getUrlDecoder().decode(base64EncodedEC256PK));              byte[] credentialId = {1, 2, 3, 4};         byte[] userHandle = {1};         Credential credential = Credential.createResidentCredential(           credentialId, "localhost", privateKey, userHandle, /*signCount=*/0);              Assertions.assertThrows(InvalidArgumentException.class,                                 () -> authenticator.addCredential(credential));       }                 @Test       @Disabled("A fix was implemented and will be available in Selenium 4.34.")       public void testCreateAndAddNonResidentialKey() {         VirtualAuthenticatorOptions options = new VirtualAuthenticatorOptions()           .setProtocol(VirtualAuthenticatorOptions.Protocol.U2F)           .setHasResidentKey(false);              VirtualAuthenticator authenticator = ((HasVirtualAuthenticator) driver).addVirtualAuthenticator(options);              byte[] credentialId = {1, 2, 3, 4};         Credential nonResidentCredential = Credential.createNonResidentCredential(           credentialId, "localhost", ec256PrivateKey, /*signCount=*/0);         authenticator.addCredential(nonResidentCredential);              List<Credential> credentialList = authenticator.getCredentials();         Assertions.assertEquals(1, credentialList.size());              Credential credential = credentialList.get(0);         Assertions.assertArrayEquals(credentialId, credential.getId());       }            @Test       public void testGetCredential() {         VirtualAuthenticatorOptions options = new VirtualAuthenticatorOptions()           .setProtocol(VirtualAuthenticatorOptions.Protocol.CTAP2)           .setHasResidentKey(true)           .setHasUserVerification(true)           .setIsUserVerified(true);         VirtualAuthenticator authenticator = ((HasVirtualAuthenticator) driver).addVirtualAuthenticator(options);              byte[] credentialId = {1, 2, 3, 4};         byte[] userHandle = {1};         Credential residentCredential = Credential.createResidentCredential(           credentialId, "localhost", rsaPrivateKey, userHandle, /*signCount=*/0);              authenticator.addCredential(residentCredential);              List<Credential> credentialList = authenticator.getCredentials();         Assertions.assertEquals(1, credentialList.size());              Credential credential = credentialList.get(0);         Assertions.assertArrayEquals(credentialId, credential.getId());         Assertions.assertArrayEquals(rsaPrivateKey.getEncoded(), credential.getPrivateKey().getEncoded());       }            @Test       public void testRemoveCredential() {         VirtualAuthenticator authenticator =           ((HasVirtualAuthenticator) driver).addVirtualAuthenticator(new VirtualAuthenticatorOptions());              byte[] credentialId = {1, 2, 3, 4};         Credential credential = Credential.createNonResidentCredential(           credentialId, "localhost", rsaPrivateKey, 0);              authenticator.addCredential(credential);              authenticator.removeCredential(credentialId);         Assertions.assertEquals(0, authenticator.getCredentials().size());       }            @Test       public void testRemoveAllCredentials() {         VirtualAuthenticator authenticator =           ((HasVirtualAuthenticator) driver).addVirtualAuthenticator(new VirtualAuthenticatorOptions());              byte[] credentialId = {1, 2, 3, 4};         Credential residentCredential = Credential.createNonResidentCredential(           credentialId, "localhost", rsaPrivateKey, /*signCount=*/0);              authenticator.addCredential(residentCredential);              authenticator.removeAllCredentials();         Assertions.assertEquals(0, authenticator.getCredentials().size());       }            @Test       public void testSetUserVerified() {         VirtualAuthenticatorOptions options = new VirtualAuthenticatorOptions()           .setIsUserVerified(true);              Assertions.assertTrue((boolean) options.toMap().get("isUserVerified"));       }     }                                VirtualAuthenticatorOptions options = new VirtualAuthenticatorOptions()                     .SetProtocol(VirtualAuthenticatorOptions.Protocol.U2F)                     .SetHasResidentKey(false);                      String virtualAuthenticatorId = ((WebDriver)driver).AddVirtualAuthenticator(options);                      ((WebDriver)driver).RemoveVirtualAuthenticator(virtualAuthenticatorId);

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/dotnet/SeleniumDocs/Interactions/VirtualAuthenticatorTest.cs#80-86)

##### examples/dotnet/SeleniumDocs/Interactions/VirtualAuthenticatorTest.cs

Copy  Close               using Microsoft.VisualStudio.TestTools.UnitTesting;     using Microsoft.IdentityModel.Tokens;     using OpenQA.Selenium;     using OpenQA.Selenium.VirtualAuth;     using static OpenQA.Selenium.VirtualAuth.VirtualAuthenticatorOptions;     using System.Collections.Generic;     using System;          namespace SeleniumDocs.VirtualAuthentication     {         [TestClass]         public class VirtualAuthenticatorTest : BaseChromeTest         {             //A pkcs#8 encoded encrypted RSA private key as a base64 string.             private static string base64EncodedRSAPK =                     "MIIEvAIBADANBgkqhkiG9w0BAQEFAASCBKYwggSiAgEAAoIBAQDbBOu5Lhs4vpowbCnmCyLUpIE7JM9sm9QXzye2G+jr+Kr"                   + "MsinWohEce47BFPJlTaDzHSvOW2eeunBO89ZcvvVc8RLz4qyQ8rO98xS1jtgqi1NcBPETDrtzthODu/gd0sjB2Tk3TLuB"                   + "GVoPXt54a+Oo4JbBJ6h3s0+5eAfGplCbSNq6hN3Jh9YOTw5ZA6GCEy5l8zBaOgjXytd2v2OdSVoEDNiNQRkjJd2rmS2oi"                   + "9AyQFR3B7BrPSiDlCcITZFOWgLF5C31Wp/PSHwQhlnh7/6YhnE2y9tzsUvzx0wJXrBADW13+oMxrneDK3WGbxTNYgIi1P"                   + "vSqXlqGjHtCK+R2QkXAgMBAAECggEAVc6bu7VAnP6v0gDOeX4razv4FX/adCao9ZsHZ+WPX8PQxtmWYqykH5CY4TSfsui"                   + "zAgyPuQ0+j4Vjssr9VODLqFoanspT6YXsvaKanncUYbasNgUJnfnLnw3an2XpU2XdmXTNYckCPRX9nsAAURWT3/n9ljc/"                   + "XYY22ecYxM8sDWnHu2uKZ1B7M3X60bQYL5T/lVXkKdD6xgSNLeP4AkRx0H4egaop68hoW8FIwmDPVWYVAvo8etzWCtib"                   + "RXz5FcNld9MgD/Ai7ycKy4Q1KhX5GBFI79MVVaHkSQfxPHpr7/XcmpQOEAr+BMPon4s4vnKqAGdGB3j/E3d/+4F2swyko"                   + "QKBgQD8hCsp6FIQ5umJlk9/j/nGsMl85LgLaNVYpWlPRKPc54YNumtvj5vx1BG+zMbT7qIE3nmUPTCHP7qb5ERZG4CdMC"                   + "S6S64/qzZEqijLCqepwj6j4fV5SyPWEcpxf6ehNdmcfgzVB3Wolfwh1ydhx/96L1jHJcTKchdJJzlfTvq8wwKBgQDeCnK"                   + "ws1t5GapfE1rmC/h4olL2qZTth9oQmbrXYohVnoqNFslDa43ePZwL9Jmd9kYb0axOTNMmyrP0NTj41uCfgDS0cJnNTc63"                   + "ojKjegxHIyYDKRZNVUR/dxAYB/vPfBYZUS7M89pO6LLsHhzS3qpu3/hppo/Uc/AM /r8PSflNHQKBgDnWgBh6OQncChPUl"                   + "OLv9FMZPR1ZOfqLCYrjYEqiuzGm6iKM13zXFO4AGAxu1P/IAd5BovFcTpg79Z8tWqZaUUwvscnl+cRlj+mMXAmdqCeO8V"                   + "ASOmqM1ml667axeZDIR867ZG8K5V029Wg+4qtX5uFypNAAi6GfHkxIKrD04yOHAoGACdh4wXESi0oiDdkz3KOHPwIjn6B"                   + "hZC7z8mx+pnJODU3cYukxv3WTctlUhAsyjJiQ/0bK1yX87ulqFVgO0Knmh+wNajrb9wiONAJTMICG7tiWJOm7fW5cfTJw"                   + "WkBwYADmkfTRmHDvqzQSSvoC2S7aa9QulbC3C/qgGFNrcWgcT9kCgYAZTa1P9bFCDU7hJc2mHwJwAW7/FQKEJg8SL33KI"                   + "NpLwcR8fqaYOdAHWWz636osVEqosRrHzJOGpf9x2RSWzQJ+dq8+6fACgfFZOVpN644+sAHfNPAI/gnNKU5OfUv+eav8fB"                   + "nzlf1A3y3GIkyMyzFN3DE7e0n/lyqxE4HBYGpI8g==";                  private static byte[] bytes = System.Convert.FromBase64String(base64EncodedRSAPK);             private string base64EncodedPK = Base64UrlEncoder.Encode(bytes);                  // A pkcs#8 encoded unencrypted EC256 private key as a base64url string.             private string base64EncodedEC256PK =                   "MIGHAgEAMBMGByqGSM49AgEGCCqGSM49AwEHBG0wawIBAQQg8_zMDQDYAxlU-Q"                   + "hk1Dwkf0v18GZca1DMF3SaJ9HPdmShRANCAASNYX5lyVCOZLzFZzrIKmeZ2jwU"                   + "RmgsJYxGP__fWN_S-j5sN4tT15XEpN_7QZnt14YvI6uvAgO0uJEboFaZlOEB";                       [TestMethod]             public void VirtualOptionsShouldAllowSettingOptions()             {                 // Create virtual authenticator options                 VirtualAuthenticatorOptions options = new VirtualAuthenticatorOptions()                     .SetIsUserVerified(true)                     .SetHasUserVerification(true)                     .SetIsUserConsenting(true)                     .SetTransport(VirtualAuthenticatorOptions.Transport.USB)                     .SetProtocol(VirtualAuthenticatorOptions.Protocol.U2F)                     .SetHasResidentKey(false);                      Assert.AreEqual(6, options.ToDictionary().Count);             }                  [TestMethod]             public void ShouldBeAbleToCreateAuthenticator()             {                 // Create virtual authenticator options                 VirtualAuthenticatorOptions options = new VirtualAuthenticatorOptions()                     .SetProtocol(VirtualAuthenticatorOptions.Protocol.U2F)                     .SetHasResidentKey(false);                      // Register a virtual authenticator                 ((WebDriver)driver).AddVirtualAuthenticator(options);                      List<Credential> credentialList = ((WebDriver)driver).GetCredentials();                      Assert.AreEqual(0, credentialList.Count);             }                       [TestMethod]             public void ShouldBeAbleToRemoveAuthenticator()             {                 VirtualAuthenticatorOptions options = new VirtualAuthenticatorOptions()                     .SetProtocol(VirtualAuthenticatorOptions.Protocol.U2F)                     .SetHasResidentKey(false);                      String virtualAuthenticatorId = ((WebDriver)driver).AddVirtualAuthenticator(options);                      ((WebDriver)driver).RemoveVirtualAuthenticator(virtualAuthenticatorId);                      // Since the authenticator was removed, any operation using it will throw an error                 Assert.ThrowsException<InvalidOperationException>(() => ((WebDriver)driver).GetCredentials());             }                  [TestMethod]             public void ShouldBeAbleToCreateAndAddResidentialKey()             {                 VirtualAuthenticatorOptions options = new VirtualAuthenticatorOptions()                     .SetProtocol(Protocol.CTAP2)                     .SetHasResidentKey(true)                     .SetHasUserVerification(true)                     .SetIsUserVerified(true);                      ((WebDriver)driver).AddVirtualAuthenticator(options);                      byte[] credentialId = { 1, 2, 3, 4 };                 byte[] userHandle = { 1 };                      Credential residentCredential = Credential.CreateResidentCredential(                   credentialId, "localhost", base64EncodedPK, userHandle, 0);                      ((WebDriver)driver).AddCredential(residentCredential);                      List<Credential> credentialList = ((WebDriver)driver).GetCredentials();                 Assert.AreEqual(1, credentialList.Count);                      Credential credential = credentialList[0];                 CollectionAssert.AreEqual(credentialId, credential.Id);             }                  [TestMethod]             public void ShouldNotAddResidentCredentialWhenAuthenticatorUsesU2FProtocol()             {                 VirtualAuthenticatorOptions options = new VirtualAuthenticatorOptions()                     .SetProtocol(VirtualAuthenticatorOptions.Protocol.U2F)                     .SetHasResidentKey(true);                      ((WebDriver)driver).AddVirtualAuthenticator(options);                      byte[] credentialId = { 1, 2, 3, 4 };                 byte[] userHandle = { 1 };                      Credential credential = Credential.CreateResidentCredential(                   credentialId, "localhost", base64EncodedEC256PK, userHandle, 0);                      Assert.ThrowsException<WebDriverArgumentException>(() => ((WebDriver)driver).AddCredential(credential));             }                  [TestMethod]             public void ShouldBeAbleToCreateAndAddNonResidentKey()             {                 VirtualAuthenticatorOptions options = new VirtualAuthenticatorOptions()                     .SetProtocol(VirtualAuthenticatorOptions.Protocol.U2F)                     .SetHasResidentKey(false);                      ((WebDriver)driver).AddVirtualAuthenticator(options);                      byte[] credentialId = { 1, 2, 3, 4 };                      Credential nonResidentCredential = Credential.CreateNonResidentCredential(                   credentialId, "localhost", base64EncodedEC256PK, 0);                      ((WebDriver)driver).AddCredential(nonResidentCredential);                      List<Credential> credentialList = ((WebDriver)driver).GetCredentials();                 Assert.AreEqual(1, credentialList.Count);                      Credential credential = credentialList[0];                 CollectionAssert.AreEqual(credentialId, nonResidentCredential.Id);             }                  [TestMethod]             public void ShouldBeAbleToGetCredential()             {                 VirtualAuthenticatorOptions options = new VirtualAuthenticatorOptions()                     .SetProtocol(Protocol.CTAP2)                     .SetHasResidentKey(true)                     .SetHasUserVerification(true)                     .SetIsUserVerified(true);                      ((WebDriver)driver).AddVirtualAuthenticator(options);                      byte[] credentialId = { 1, 2, 3, 4 };                 byte[] userHandle = { 1 };                      Credential residentCredential = Credential.CreateResidentCredential(                   credentialId, "localhost", base64EncodedPK, userHandle, 0);                      ((WebDriver)driver).AddCredential(residentCredential);                      List<Credential> credentialList = ((WebDriver)driver).GetCredentials();                 Assert.AreEqual(1, credentialList.Count);                      Credential credential = credentialList[0];                 CollectionAssert.AreEqual(credentialId, residentCredential.Id);                 Assert.AreEqual(base64EncodedPK, credential.PrivateKey);             }                  [TestMethod]             public void ShouldBeAbleToRemoveCredential()             {                 ((WebDriver)driver).AddVirtualAuthenticator(new VirtualAuthenticatorOptions());                      byte[] credentialId = { 1, 2, 3, 4 };                      Credential nonResidentCredential = Credential.CreateNonResidentCredential(                   credentialId, "localhost", base64EncodedEC256PK, 0);                      ((WebDriver)driver).AddCredential(nonResidentCredential);                      ((WebDriver)driver).RemoveCredential(credentialId);                      Assert.AreEqual(0, ((WebDriver)driver).GetCredentials().Count);             }                       [TestMethod]             public void ShouldBeAbleToRemoveAllCredentias()             {                 ((WebDriver)driver).AddVirtualAuthenticator(new VirtualAuthenticatorOptions());                      byte[] credentialId = { 1, 2, 3, 4 };                      Credential nonResidentCredential = Credential.CreateNonResidentCredential(                   credentialId, "localhost", base64EncodedEC256PK, 0);                      ((WebDriver)driver).AddCredential(nonResidentCredential);                      ((WebDriver)driver).RemoveAllCredentials();                      Assert.AreEqual(0, ((WebDriver)driver).GetCredentials().Count);             }                  [TestMethod]             public void ShouldBeSetVerifiedOption()             {                 VirtualAuthenticatorOptions options = new VirtualAuthenticatorOptions()                     .SetIsUserVerified(true);                      Assert.IsTrue((bool)options.ToDictionary()["isUserVerified"]);             }         }     }

[Add Example](https://www.selenium.dev/documentation/about/contributing/#creating-examples)                   options = VirtualAuthenticatorOptions()              # Register a virtual authenticator         driver.add_virtual_authenticator(options)              # Remove virtual authenticator         driver.remove_virtual_authenticator()

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/python/tests/interactions/test_virtual_authenticator.py#L68-L74)

##### examples/python/tests/interactions/test\_virtual\_authenticator.py

Copy  Close               import pytest     from base64 import urlsafe_b64decode, urlsafe_b64encode          from selenium.common.exceptions import InvalidArgumentException     from selenium.webdriver.chrome.webdriver import WebDriver     from selenium.webdriver.common.virtual_authenticator import (         Credential,         VirtualAuthenticatorOptions,     )               BASE64__ENCODED_PK = '''     MIIEvAIBADANBgkqhkiG9w0BAQEFAASCBKYwggSiAgEAAoIBAQDbBOu5Lhs4vpowbCnmCyLUpIE7JM9sm9QXzye2G+jr+Kr     MsinWohEce47BFPJlTaDzHSvOW2eeunBO89ZcvvVc8RLz4qyQ8rO98xS1jtgqi1NcBPETDrtzthODu/gd0sjB2Tk3TLuBGV     oPXt54a+Oo4JbBJ6h3s0+5eAfGplCbSNq6hN3Jh9YOTw5ZA6GCEy5l8zBaOgjXytd2v2OdSVoEDNiNQRkjJd2rmS2oi9AyQ     FR3B7BrPSiDlCcITZFOWgLF5C31Wp/PSHwQhlnh7/6YhnE2y9tzsUvzx0wJXrBADW13+oMxrneDK3WGbxTNYgIi1PvSqXlq     GjHtCK+R2QkXAgMBAAECggEAVc6bu7VAnP6v0gDOeX4razv4FX/adCao9ZsHZ+WPX8PQxtmWYqykH5CY4TSfsuizAgyPuQ0     +j4Vjssr9VODLqFoanspT6YXsvaKanncUYbasNgUJnfnLnw3an2XpU2XdmXTNYckCPRX9nsAAURWT3/n9ljc/XYY22ecYxM     8sDWnHu2uKZ1B7M3X60bQYL5T/lVXkKdD6xgSNLeP4AkRx0H4egaop68hoW8FIwmDPVWYVAvo8etzWCtibRXz5FcNld9MgD     /Ai7ycKy4Q1KhX5GBFI79MVVaHkSQfxPHpr7/XcmpQOEAr+BMPon4s4vnKqAGdGB3j/E3d/+4F2swykoQKBgQD8hCsp6FIQ     5umJlk9/j/nGsMl85LgLaNVYpWlPRKPc54YNumtvj5vx1BG+zMbT7qIE3nmUPTCHP7qb5ERZG4CdMCS6S64/qzZEqijLCqe     pwj6j4fV5SyPWEcpxf6ehNdmcfgzVB3Wolfwh1ydhx/96L1jHJcTKchdJJzlfTvq8wwKBgQDeCnKws1t5GapfE1rmC/h4ol     L2qZTth9oQmbrXYohVnoqNFslDa43ePZwL9Jmd9kYb0axOTNMmyrP0NTj41uCfgDS0cJnNTc63ojKjegxHIyYDKRZNVUR/d     xAYB/vPfBYZUS7M89pO6LLsHhzS3qpu3/hppo/Uc/AM/r8PSflNHQKBgDnWgBh6OQncChPUlOLv9FMZPR1ZOfqLCYrjYEqi     uzGm6iKM13zXFO4AGAxu1P/IAd5BovFcTpg79Z8tWqZaUUwvscnl+cRlj+mMXAmdqCeO8VASOmqM1ml667axeZDIR867ZG8     K5V029Wg+4qtX5uFypNAAi6GfHkxIKrD04yOHAoGACdh4wXESi0oiDdkz3KOHPwIjn6BhZC7z8mx+pnJODU3cYukxv3WTct     lUhAsyjJiQ/0bK1yX87ulqFVgO0Knmh+wNajrb9wiONAJTMICG7tiWJOm7fW5cfTJwWkBwYADmkfTRmHDvqzQSSvoC2S7aa     9QulbC3C/qgGFNrcWgcT9kCgYAZTa1P9bFCDU7hJc2mHwJwAW7/FQKEJg8SL33KINpLwcR8fqaYOdAHWWz636osVEqosRrH     zJOGpf9x2RSWzQJ+dq8+6fACgfFZOVpN644+sAHfNPAI/gnNKU5OfUv+eav8fBnzlf1A3y3GIkyMyzFN3DE7e0n/lyqxE4H     BYGpI8g==     '''               @pytest.fixture(scope="module", autouse=True)     def driver():         yield WebDriver()               def test_virtual_authenticator_options():         options = VirtualAuthenticatorOptions()         options.is_user_verified = True         options.has_user_verification = True         options.is_user_consenting = True         options.transport = VirtualAuthenticatorOptions.Transport.USB         options.protocol = VirtualAuthenticatorOptions.Protocol.U2F         options.has_resident_key = False              assert len(options.to_dict()) == 6               def test_add_authenticator(driver):         # Create virtual authenticator options         options = VirtualAuthenticatorOptions()         options.protocol = VirtualAuthenticatorOptions.Protocol.U2F         options.has_resident_key = False              # Register a virtual authenticator         driver.add_virtual_authenticator(options)              # Get list of credentials         credential_list = driver.get_credentials()              assert len(credential_list) == 0               def test_remove_authenticator(driver):         # Create default virtual authenticator option         options = VirtualAuthenticatorOptions()              # Register a virtual authenticator         driver.add_virtual_authenticator(options)              # Remove virtual authenticator         driver.remove_virtual_authenticator()         assert driver.virtual_authenticator_id is None               def test_create_and_add_resident_key(driver):         # Create virtual authenticator options         options = VirtualAuthenticatorOptions()         options.protocol = VirtualAuthenticatorOptions.Protocol.CTAP2         options.has_resident_key = True         options.has_user_verification = True         options.is_user_verified = True              # Register a virtual authenticator         driver.add_virtual_authenticator(options)              # parameters for Resident Credential         credential_id = bytearray({1, 2, 3, 4})         rp_id = "localhost"         user_handle = bytearray({1})         privatekey = urlsafe_b64decode(BASE64__ENCODED_PK)         sign_count = 0              # create a resident credential using above parameters         resident_credential = Credential.create_resident_credential(credential_id, rp_id, user_handle, privatekey, sign_count)              # add the credential created to virtual authenticator         driver.add_credential(resident_credential)              # get list of all the registered credentials          credential_list = driver.get_credentials()         assert len(credential_list) == 1               def test_add_resident_credential_not_supported_when_authenticator_uses_u2f_protocol(driver):         # Create virtual authenticator options         options = VirtualAuthenticatorOptions()         options.protocol = VirtualAuthenticatorOptions.Protocol.U2F         options.has_resident_key = False              # Register a virtual authenticator         driver.add_virtual_authenticator(options)              # parameters for Resident Credential         credential_id = bytearray({1, 2, 3, 4})         rp_id = "localhost"         user_handle = bytearray({1})         privatekey = urlsafe_b64decode(BASE64__ENCODED_PK)         sign_count = 0              # create a  resident credential using above parameters         credential = Credential.create_resident_credential(credential_id, rp_id, user_handle, privatekey, sign_count)              # Expect InvalidArgumentException          with pytest.raises(InvalidArgumentException):             driver.add_credential(credential)               def test_create_and_add_non_resident_key(driver):         # Create virtual authenticator options         options = VirtualAuthenticatorOptions()         options.protocol = VirtualAuthenticatorOptions.Protocol.U2F         options.has_resident_key = False              # Register a virtual authenticator         driver.add_virtual_authenticator(options)              # parameters for Non Resident Credential         credential_id = bytearray({1, 2, 3, 4})         rp_id = "localhost"         privatekey = urlsafe_b64decode(BASE64__ENCODED_PK)         sign_count = 0              # create a non resident credential using above parameters         credential = Credential.create_non_resident_credential(credential_id, rp_id, privatekey, sign_count)              # add the credential created to virtual authenticator         driver.add_credential(credential)                  # get list of all the registered credentials          credential_list = driver.get_credentials()         assert len(credential_list) == 1                    def test_get_credential(driver):         # Create virtual authenticator options         options = VirtualAuthenticatorOptions()         options.protocol = VirtualAuthenticatorOptions.Protocol.CTAP2         options.has_resident_key = True         options.has_user_verfied = True         options.is_user_verified = True              # Register a virtual authenticator         driver.add_virtual_authenticator(options)              # parameters for Resident Credential         credential_id = bytearray({1, 2, 3, 4})         rp_id = "localhost"         user_handle = bytearray({1})         privatekey = urlsafe_b64decode(BASE64__ENCODED_PK)         sign_count = 0              # create a resident credential using above parameters         credential = Credential.create_resident_credential(credential_id, rp_id, user_handle, privatekey, sign_count)                  # add the credential created to virtual authenticator         driver.add_credential(credential)              # get list of all the registered credentials          credential_list = driver.get_credentials()              assert len(credential_list) == 1         assert credential_list[0].id == urlsafe_b64encode(credential_id).decode()               def test_remove_credential(driver):         # Create default virtual authenticator options         options = VirtualAuthenticatorOptions()              # Register a virtual authenticator         driver.add_virtual_authenticator(options)              # parameters for Non Resident Credential         credential_id = bytearray({1, 2, 3, 4})         rp_id = "localhost"         privatekey = urlsafe_b64decode(BASE64__ENCODED_PK)         sign_count = 0              # create a non resident credential using above parameters         credential = Credential.create_non_resident_credential(credential_id, rp_id, privatekey, sign_count)              # add the credential created to virtual authenticator         driver.add_credential(credential)              # remove the credential created from virtual authenticator         driver.remove_credential(credential.id)              # credential can also be removed using Byte Array         # driver.remove_credential(credential_id)               assert len(driver.get_credentials()) == 0               def test_remove_all_credentials(driver):         # Create default virtual authenticator options         options = VirtualAuthenticatorOptions()         options.has_resident_key = True              # Register a virtual authenticator         driver.add_virtual_authenticator(options)              # parameters for Resident Credential         credential_id = bytearray({1, 2, 3, 4})         rp_id = "localhost"         user_handle = bytearray({1})         privatekey = urlsafe_b64decode(BASE64__ENCODED_PK)         sign_count = 0              # create a resident credential using above parameters         resident_credential = Credential.create_resident_credential(credential_id, rp_id, user_handle, privatekey, sign_count)                  # add the credential created to virtual authenticator         driver.add_credential(resident_credential)              # remove all credentials in virtual authenticator         driver.remove_all_credentials()              assert len(driver.get_credentials()) == 0               def test_set_user_verified():         # Create virtual authenticator options         options = VirtualAuthenticatorOptions()         options.is_user_verified = True              assert options.to_dict().get("isUserVerified") is True                   await driver.addVirtualAuthenticator(options);         await driver.removeVirtualAuthenticator();

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/javascript/test/virtual_authenticator/virtualAuthenticator.spec.js#L62-L63)

##### examples/javascript/test/virtual\_authenticator/virtualAuthenticator.spec.js

Copy  Close               const { Builder} = require("selenium-webdriver");     const { Credential, VirtualAuthenticatorOptions, Transport, Protocol } = require("selenium-webdriver/lib/virtual_authenticator");     const assert = require('assert')     const { InvalidArgumentError } = require("selenium-webdriver/lib/error");               describe('Virtual authenticator', function() {       const BASE64_ENCODED_PK =         "MIIEvAIBADANBgkqhkiG9w0BAQEFAASCBKYwggSiAgEAAoIBAQDbBOu5Lhs4vpowbCnmCyLUpIE7JM9sm9QXzye2G+jr+Kr" +         "MsinWohEce47BFPJlTaDzHSvOW2eeunBO89ZcvvVc8RLz4qyQ8rO98xS1jtgqi1NcBPETDrtzthODu/gd0sjB2Tk3TLuBGV" +         "oPXt54a+Oo4JbBJ6h3s0+5eAfGplCbSNq6hN3Jh9YOTw5ZA6GCEy5l8zBaOgjXytd2v2OdSVoEDNiNQRkjJd2rmS2oi9AyQ" +         "FR3B7BrPSiDlCcITZFOWgLF5C31Wp/PSHwQhlnh7/6YhnE2y9tzsUvzx0wJXrBADW13+oMxrneDK3WGbxTNYgIi1PvSqXlq" +         "GjHtCK+R2QkXAgMBAAECggEAVc6bu7VAnP6v0gDOeX4razv4FX/adCao9ZsHZ+WPX8PQxtmWYqykH5CY4TSfsuizAgyPuQ0" +         "+j4Vjssr9VODLqFoanspT6YXsvaKanncUYbasNgUJnfnLnw3an2XpU2XdmXTNYckCPRX9nsAAURWT3/n9ljc/XYY22ecYxM" +         "8sDWnHu2uKZ1B7M3X60bQYL5T/lVXkKdD6xgSNLeP4AkRx0H4egaop68hoW8FIwmDPVWYVAvo8etzWCtibRXz5FcNld9MgD" +         "/Ai7ycKy4Q1KhX5GBFI79MVVaHkSQfxPHpr7/XcmpQOEAr+BMPon4s4vnKqAGdGB3j/E3d/+4F2swykoQKBgQD8hCsp6FIQ" +         "5umJlk9/j/nGsMl85LgLaNVYpWlPRKPc54YNumtvj5vx1BG+zMbT7qIE3nmUPTCHP7qb5ERZG4CdMCS6S64/qzZEqijLCqe" +         "pwj6j4fV5SyPWEcpxf6ehNdmcfgzVB3Wolfwh1ydhx/96L1jHJcTKchdJJzlfTvq8wwKBgQDeCnKws1t5GapfE1rmC/h4ol" +         "L2qZTth9oQmbrXYohVnoqNFslDa43ePZwL9Jmd9kYb0axOTNMmyrP0NTj41uCfgDS0cJnNTc63ojKjegxHIyYDKRZNVUR/d" +         "xAYB/vPfBYZUS7M89pO6LLsHhzS3qpu3/hppo/Uc/AM/r8PSflNHQKBgDnWgBh6OQncChPUlOLv9FMZPR1ZOfqLCYrjYEqi" +         "uzGm6iKM13zXFO4AGAxu1P/IAd5BovFcTpg79Z8tWqZaUUwvscnl+cRlj+mMXAmdqCeO8VASOmqM1ml667axeZDIR867ZG8" +         "K5V029Wg+4qtX5uFypNAAi6GfHkxIKrD04yOHAoGACdh4wXESi0oiDdkz3KOHPwIjn6BhZC7z8mx+pnJODU3cYukxv3WTct" +         "lUhAsyjJiQ/0bK1yX87ulqFVgO0Knmh+wNajrb9wiONAJTMICG7tiWJOm7fW5cfTJwWkBwYADmkfTRmHDvqzQSSvoC2S7aa" +         "9QulbC3C/qgGFNrcWgcT9kCgYAZTa1P9bFCDU7hJc2mHwJwAW7/FQKEJg8SL33KINpLwcR8fqaYOdAHWWz636osVEqosRrH" +         "zJOGpf9x2RSWzQJ+dq8+6fACgfFZOVpN644+sAHfNPAI/gnNKU5OfUv+eav8fBnzlf1A3y3GIkyMyzFN3DE7e0n/lyqxE4H" +         "BYGpI8g==";            const base64EncodedPK =         "MIGHAgEAMBMGByqGSM49AgEGCCqGSM49AwEHBG0wawIBAQQg8_zMDQDYAxlU-Q" +         "hk1Dwkf0v18GZca1DMF3SaJ9HPdmShRANCAASNYX5lyVCOZLzFZzrIKmeZ2jwU" +         "RmgsJYxGP__fWN_S-j5sN4tT15XEpN_7QZnt14YvI6uvAgO0uJEboFaZlOEB";            let options;       let driver;            before(async function() {         options = new VirtualAuthenticatorOptions();         driver = await new Builder().forBrowser('chrome').build();       });            after(async() => await driver.quit());            function arraysEqual(array1, array2) {         return (array1.length === array2.length &&           array1.every((item) => array2.includes(item)) &&           array2.every((item) => array1.includes(item)));       }            it('Register a virtual authenticator', async function() {         options.setProtocol(Protocol['U2F']);         options.setHasResidentKey(false);              // Register a virtual authenticator         await driver.addVirtualAuthenticator(options);         let credentialList = await driver.getCredentials();              assert.equal(0, credentialList.length);       });            it('Remove authenticator', async function() {         await driver.addVirtualAuthenticator(options);         await driver.removeVirtualAuthenticator();              // Since the authenticator was removed, any operation using it will throw an error         try {           await driver.getCredentials()         }         catch (e) {           if (e instanceof InvalidArgumentError) {             assert(true)           }           else {             assert(false)           }         }       });            it('Createa and add residential key', async function() {         options.setProtocol(Protocol['CTAP2']);         options.setHasResidentKey(true);         options.setHasUserVerification(true);         options.setIsUserVerified(true);              await driver.addVirtualAuthenticator(options);              let residentCredential = new Credential().createResidentCredential(           new Uint8Array([1, 2, 3, 4]),           'localhost',           new Uint8Array([1]),           Buffer.from(BASE64_ENCODED_PK, 'base64').toString('binary'),           0);              await driver.addCredential(residentCredential);         let credentialList = await driver.getCredentials();         assert.equal(1, credentialList.length);              let credential_id = credentialList[0].id();         let test_id = new Uint8Array([1, 2, 3, 4]);              assert(arraysEqual(credential_id, test_id));       });            it('Add resident credential not supported when authenticator uses U2F protocol', async function() {         options.setProtocol(Protocol['U2F']);         options.setHasResidentKey(true);              await driver.addVirtualAuthenticator(options);              let credential = new Credential().createResidentCredential(           new Uint8Array([1, 2, 3, 4]),           'localhost',           new Uint8Array([1]),           Buffer.from(base64EncodedPK, 'base64').toString('binary'),           0);              try {           await driver.addCredential(credential)         }         catch (e) {           if (e instanceof InvalidArgumentError) {             assert(true)           }           else {             assert(false)           }         }       });            it('Create and add non residential key', async function() {         options.setProtocol(Protocol['U2F']);         options.setHasResidentKey(false);              await driver.addVirtualAuthenticator(options);              let nonResidentCredential = new Credential().createNonResidentCredential(           new Uint8Array([1, 2, 3, 4]),           'localhost',           Buffer.from(base64EncodedPK, 'base64').toString('binary'),           0);              await driver.addCredential(nonResidentCredential);              let credentialList = await driver.getCredentials();         assert.equal(1, credentialList.length);              let credential_id = credentialList[0].id();         let test_id = new Uint8Array([1, 2, 3, 4]);              assert(arraysEqual(credential_id, test_id));       });            it('Get credential', async function() {         options.setProtocol(Protocol['CTAP2']);         options.setHasResidentKey(true);         options.setHasUserVerification(true);         options.setIsUserVerified(true);              await driver.addVirtualAuthenticator(options);              let residentCredential = new Credential().createResidentCredential(           new Uint8Array([1, 2, 3, 4]),           'localhost',           new Uint8Array([1]),           Buffer.from(BASE64_ENCODED_PK, 'base64').toString('binary'),           0);              await driver.addCredential(residentCredential);              let credentialList = await driver.getCredentials();         assert.equal(1, credentialList.length);              let credential_id = credentialList[0].id();         let test_id = new Uint8Array([1, 2, 3, 4]);              assert(arraysEqual(credential_id, test_id));         assert.equal(BASE64_ENCODED_PK, Buffer.from(credentialList[0].privateKey(), 'binary').toString('base64'));       });            it('Remove all credentials', async function() {         await driver.addVirtualAuthenticator(options);              let nonResidentCredential = new Credential().createNonResidentCredential(           new Uint8Array([1, 2, 3, 4]),           'localhost',           Buffer.from(BASE64_ENCODED_PK, 'base64').toString('binary'),           0);              await driver.addCredential(nonResidentCredential);         await driver.removeAllCredentials();              let credentialList = await driver.getCredentials();         assert.equal(0, credentialList.length);       });            it('Set is user verified', async function() {         options.setIsUserVerified(true);         assert.equal(options.getIsUserVerified(), true);       });     });

[Add Example](https://www.selenium.dev/documentation/about/contributing/#creating-examples)

## Create Resident Credential

Creates a resident \(stateful\) credential with the given required credential [parameters](https://w3c.github.io/webauthn/#sctn-automation-add-credential).

  * Java   * CSharp   * Ruby   * Python   * JavaScript   * Kotlin

                  byte[] credentialId = {1, 2, 3, 4};         byte[] userHandle = {1};         Credential residentCredential = Credential.createResidentCredential(

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/java/src/test/java/dev/selenium/interactions/VirtualAuthenticatorTest.java#L100-L103)

##### examples/java/src/test/java/dev/selenium/interactions/VirtualAuthenticatorTest.java

Copy  Close               package dev.selenium.interactions;          import dev.selenium.BaseChromeTest;     import java.security.spec.PKCS8EncodedKeySpec;     import java.util.Base64;     import java.util.List;     import org.junit.jupiter.api.Assertions;     import org.junit.jupiter.api.Disabled;     import org.junit.jupiter.api.Test;     import org.openqa.selenium.InvalidArgumentException;     import org.openqa.selenium.virtualauthenticator.Credential;     import org.openqa.selenium.virtualauthenticator.HasVirtualAuthenticator;     import org.openqa.selenium.virtualauthenticator.VirtualAuthenticator;     import org.openqa.selenium.virtualauthenticator.VirtualAuthenticatorOptions;          public class VirtualAuthenticatorTest extends BaseChromeTest {            /**        * A pkcs#8 encoded encrypted RSA private key as a base64url string.        */       private final static String         base64EncodedRsaPK =         "MIIEvAIBADANBgkqhkiG9w0BAQEFAASCBKYwggSiAgEAAoIBAQDbBOu5Lhs4vpowbCnmCyLUpIE7JM9sm9QXzye2G+jr+Kr"         + "MsinWohEce47BFPJlTaDzHSvOW2eeunBO89ZcvvVc8RLz4qyQ8rO98xS1jtgqi1NcBPETDrtzthODu/gd0sjB2Tk3TLuB"         + "GVoPXt54a+Oo4JbBJ6h3s0+5eAfGplCbSNq6hN3Jh9YOTw5ZA6GCEy5l8zBaOgjXytd2v2OdSVoEDNiNQRkjJd2rmS2oi"         + "9AyQFR3B7BrPSiDlCcITZFOWgLF5C31Wp/PSHwQhlnh7/6YhnE2y9tzsUvzx0wJXrBADW13+oMxrneDK3WGbxTNYgIi1P"         + "vSqXlqGjHtCK+R2QkXAgMBAAECggEAVc6bu7VAnP6v0gDOeX4razv4FX/adCao9ZsHZ+WPX8PQxtmWYqykH5CY4TSfsui"         + "zAgyPuQ0+j4Vjssr9VODLqFoanspT6YXsvaKanncUYbasNgUJnfnLnw3an2XpU2XdmXTNYckCPRX9nsAAURWT3/n9ljc/"         + "XYY22ecYxM8sDWnHu2uKZ1B7M3X60bQYL5T/lVXkKdD6xgSNLeP4AkRx0H4egaop68hoW8FIwmDPVWYVAvo8etzWCtib"         + "RXz5FcNld9MgD/Ai7ycKy4Q1KhX5GBFI79MVVaHkSQfxPHpr7/XcmpQOEAr+BMPon4s4vnKqAGdGB3j/E3d/+4F2swyko"         + "QKBgQD8hCsp6FIQ5umJlk9/j/nGsMl85LgLaNVYpWlPRKPc54YNumtvj5vx1BG+zMbT7qIE3nmUPTCHP7qb5ERZG4CdMC"         + "S6S64/qzZEqijLCqepwj6j4fV5SyPWEcpxf6ehNdmcfgzVB3Wolfwh1ydhx/96L1jHJcTKchdJJzlfTvq8wwKBgQDeCnK"         + "ws1t5GapfE1rmC/h4olL2qZTth9oQmbrXYohVnoqNFslDa43ePZwL9Jmd9kYb0axOTNMmyrP0NTj41uCfgDS0cJnNTc63"         + "ojKjegxHIyYDKRZNVUR/dxAYB/vPfBYZUS7M89pO6LLsHhzS3qpu3/hppo/Uc/AM /r8PSflNHQKBgDnWgBh6OQncChPUl"         + "OLv9FMZPR1ZOfqLCYrjYEqiuzGm6iKM13zXFO4AGAxu1P/IAd5BovFcTpg79Z8tWqZaUUwvscnl+cRlj+mMXAmdqCeO8V"         + "ASOmqM1ml667axeZDIR867ZG8K5V029Wg+4qtX5uFypNAAi6GfHkxIKrD04yOHAoGACdh4wXESi0oiDdkz3KOHPwIjn6B"         + "hZC7z8mx+pnJODU3cYukxv3WTctlUhAsyjJiQ/0bK1yX87ulqFVgO0Knmh+wNajrb9wiONAJTMICG7tiWJOm7fW5cfTJw"         + "WkBwYADmkfTRmHDvqzQSSvoC2S7aa9QulbC3C/qgGFNrcWgcT9kCgYAZTa1P9bFCDU7hJc2mHwJwAW7/FQKEJg8SL33KI"         + "NpLwcR8fqaYOdAHWWz636osVEqosRrHzJOGpf9x2RSWzQJ+dq8+6fACgfFZOVpN644+sAHfNPAI/gnNKU5OfUv+eav8fB"         + "nzlf1A3y3GIkyMyzFN3DE7e0n/lyqxE4HBYGpI8g==";            private final static PKCS8EncodedKeySpec rsaPrivateKey =         new PKCS8EncodedKeySpec(Base64.getMimeDecoder().decode(base64EncodedRsaPK));            // A pkcs#8 encoded unencrypted EC256 private key as a base64url string.       String base64EncodedEC256PK =         "MIGHAgEAMBMGByqGSM49AgEGCCqGSM49AwEHBG0wawIBAQQg8_zMDQDYAxlU-Q"         + "hk1Dwkf0v18GZca1DMF3SaJ9HPdmShRANCAASNYX5lyVCOZLzFZzrIKmeZ2jwU"         + "RmgsJYxGP__fWN_S-j5sN4tT15XEpN_7QZnt14YvI6uvAgO0uJEboFaZlOEB";            PKCS8EncodedKeySpec ec256PrivateKey =         new PKCS8EncodedKeySpec(Base64.getUrlDecoder().decode(base64EncodedEC256PK));            @Test       public void testVirtualOptions() {         VirtualAuthenticatorOptions options = new VirtualAuthenticatorOptions()           .setIsUserVerified(true)           .setHasUserVerification(true)           .setIsUserConsenting(true)           .setTransport(VirtualAuthenticatorOptions.Transport.USB)           .setProtocol(VirtualAuthenticatorOptions.Protocol.U2F)           .setHasResidentKey(false);              Assertions.assertEquals(6, options.toMap().size());       }            @Test       public void testCreateAuthenticator() {         VirtualAuthenticatorOptions options = new VirtualAuthenticatorOptions()           .setProtocol(VirtualAuthenticatorOptions.Protocol.U2F)           .setHasResidentKey(false);              VirtualAuthenticator authenticator =           ((HasVirtualAuthenticator) driver).addVirtualAuthenticator(options);              List<Credential> credentialList = authenticator.getCredentials();              Assertions.assertEquals(0, credentialList.size());       }            @Test       public void testRemoveAuthenticator() {         VirtualAuthenticatorOptions options = new VirtualAuthenticatorOptions();         VirtualAuthenticator authenticator =           ((HasVirtualAuthenticator) driver).addVirtualAuthenticator(options);              ((HasVirtualAuthenticator) driver).removeVirtualAuthenticator(authenticator);              Assertions.assertThrows(InvalidArgumentException.class, authenticator::getCredentials);       }            @Test       public void testCreateAndAddResidentialKey() {         VirtualAuthenticatorOptions options = new VirtualAuthenticatorOptions()           .setProtocol(VirtualAuthenticatorOptions.Protocol.CTAP2)           .setHasResidentKey(true)           .setHasUserVerification(true)           .setIsUserVerified(true);         VirtualAuthenticator authenticator = ((HasVirtualAuthenticator) driver).addVirtualAuthenticator(options);              byte[] credentialId = {1, 2, 3, 4};         byte[] userHandle = {1};         Credential residentCredential = Credential.createResidentCredential(           credentialId, "localhost", rsaPrivateKey, userHandle, /*signCount=*/0);              authenticator.addCredential(residentCredential);              List<Credential> credentialList = authenticator.getCredentials();         Assertions.assertEquals(1, credentialList.size());              Credential credential = credentialList.get(0);         Assertions.assertArrayEquals(credentialId, credential.getId());       }            @Test       public void testAddResidentCredentialNotSupportedWhenAuthenticatorUsesU2FProtocol() {         VirtualAuthenticatorOptions options = new VirtualAuthenticatorOptions()           .setProtocol(VirtualAuthenticatorOptions.Protocol.U2F)           .setHasResidentKey(true);              VirtualAuthenticator authenticator = ((HasVirtualAuthenticator) driver).addVirtualAuthenticator(options);              PKCS8EncodedKeySpec privateKey =           new PKCS8EncodedKeySpec(Base64.getUrlDecoder().decode(base64EncodedEC256PK));              byte[] credentialId = {1, 2, 3, 4};         byte[] userHandle = {1};         Credential credential = Credential.createResidentCredential(           credentialId, "localhost", privateKey, userHandle, /*signCount=*/0);              Assertions.assertThrows(InvalidArgumentException.class,                                 () -> authenticator.addCredential(credential));       }                 @Test       @Disabled("A fix was implemented and will be available in Selenium 4.34.")       public void testCreateAndAddNonResidentialKey() {         VirtualAuthenticatorOptions options = new VirtualAuthenticatorOptions()           .setProtocol(VirtualAuthenticatorOptions.Protocol.U2F)           .setHasResidentKey(false);              VirtualAuthenticator authenticator = ((HasVirtualAuthenticator) driver).addVirtualAuthenticator(options);              byte[] credentialId = {1, 2, 3, 4};         Credential nonResidentCredential = Credential.createNonResidentCredential(           credentialId, "localhost", ec256PrivateKey, /*signCount=*/0);         authenticator.addCredential(nonResidentCredential);              List<Credential> credentialList = authenticator.getCredentials();         Assertions.assertEquals(1, credentialList.size());              Credential credential = credentialList.get(0);         Assertions.assertArrayEquals(credentialId, credential.getId());       }            @Test       public void testGetCredential() {         VirtualAuthenticatorOptions options = new VirtualAuthenticatorOptions()           .setProtocol(VirtualAuthenticatorOptions.Protocol.CTAP2)           .setHasResidentKey(true)           .setHasUserVerification(true)           .setIsUserVerified(true);         VirtualAuthenticator authenticator = ((HasVirtualAuthenticator) driver).addVirtualAuthenticator(options);              byte[] credentialId = {1, 2, 3, 4};         byte[] userHandle = {1};         Credential residentCredential = Credential.createResidentCredential(           credentialId, "localhost", rsaPrivateKey, userHandle, /*signCount=*/0);              authenticator.addCredential(residentCredential);              List<Credential> credentialList = authenticator.getCredentials();         Assertions.assertEquals(1, credentialList.size());              Credential credential = credentialList.get(0);         Assertions.assertArrayEquals(credentialId, credential.getId());         Assertions.assertArrayEquals(rsaPrivateKey.getEncoded(), credential.getPrivateKey().getEncoded());       }            @Test       public void testRemoveCredential() {         VirtualAuthenticator authenticator =           ((HasVirtualAuthenticator) driver).addVirtualAuthenticator(new VirtualAuthenticatorOptions());              byte[] credentialId = {1, 2, 3, 4};         Credential credential = Credential.createNonResidentCredential(           credentialId, "localhost", rsaPrivateKey, 0);              authenticator.addCredential(credential);              authenticator.removeCredential(credentialId);         Assertions.assertEquals(0, authenticator.getCredentials().size());       }            @Test       public void testRemoveAllCredentials() {         VirtualAuthenticator authenticator =           ((HasVirtualAuthenticator) driver).addVirtualAuthenticator(new VirtualAuthenticatorOptions());              byte[] credentialId = {1, 2, 3, 4};         Credential residentCredential = Credential.createNonResidentCredential(           credentialId, "localhost", rsaPrivateKey, /*signCount=*/0);              authenticator.addCredential(residentCredential);              authenticator.removeAllCredentials();         Assertions.assertEquals(0, authenticator.getCredentials().size());       }            @Test       public void testSetUserVerified() {         VirtualAuthenticatorOptions options = new VirtualAuthenticatorOptions()           .setIsUserVerified(true);              Assertions.assertTrue((boolean) options.toMap().get("isUserVerified"));       }     }                                byte[] credentialId = { 1, 2, 3, 4 };                 byte[] userHandle = { 1 };                      Credential residentCredential = Credential.CreateResidentCredential(                   credentialId, "localhost", base64EncodedPK, userHandle, 0);

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/dotnet/SeleniumDocs/Interactions/VirtualAuthenticatorTest.cs#103-107)

##### examples/dotnet/SeleniumDocs/Interactions/VirtualAuthenticatorTest.cs

Copy  Close               using Microsoft.VisualStudio.TestTools.UnitTesting;     using Microsoft.IdentityModel.Tokens;     using OpenQA.Selenium;     using OpenQA.Selenium.VirtualAuth;     using static OpenQA.Selenium.VirtualAuth.VirtualAuthenticatorOptions;     using System.Collections.Generic;     using System;          namespace SeleniumDocs.VirtualAuthentication     {         [TestClass]         public class VirtualAuthenticatorTest : BaseChromeTest         {             //A pkcs#8 encoded encrypted RSA private key as a base64 string.             private static string base64EncodedRSAPK =                     "MIIEvAIBADANBgkqhkiG9w0BAQEFAASCBKYwggSiAgEAAoIBAQDbBOu5Lhs4vpowbCnmCyLUpIE7JM9sm9QXzye2G+jr+Kr"                   + "MsinWohEce47BFPJlTaDzHSvOW2eeunBO89ZcvvVc8RLz4qyQ8rO98xS1jtgqi1NcBPETDrtzthODu/gd0sjB2Tk3TLuB"                   + "GVoPXt54a+Oo4JbBJ6h3s0+5eAfGplCbSNq6hN3Jh9YOTw5ZA6GCEy5l8zBaOgjXytd2v2OdSVoEDNiNQRkjJd2rmS2oi"                   + "9AyQFR3B7BrPSiDlCcITZFOWgLF5C31Wp/PSHwQhlnh7/6YhnE2y9tzsUvzx0wJXrBADW13+oMxrneDK3WGbxTNYgIi1P"                   + "vSqXlqGjHtCK+R2QkXAgMBAAECggEAVc6bu7VAnP6v0gDOeX4razv4FX/adCao9ZsHZ+WPX8PQxtmWYqykH5CY4TSfsui"                   + "zAgyPuQ0+j4Vjssr9VODLqFoanspT6YXsvaKanncUYbasNgUJnfnLnw3an2XpU2XdmXTNYckCPRX9nsAAURWT3/n9ljc/"                   + "XYY22ecYxM8sDWnHu2uKZ1B7M3X60bQYL5T/lVXkKdD6xgSNLeP4AkRx0H4egaop68hoW8FIwmDPVWYVAvo8etzWCtib"                   + "RXz5FcNld9MgD/Ai7ycKy4Q1KhX5GBFI79MVVaHkSQfxPHpr7/XcmpQOEAr+BMPon4s4vnKqAGdGB3j/E3d/+4F2swyko"                   + "QKBgQD8hCsp6FIQ5umJlk9/j/nGsMl85LgLaNVYpWlPRKPc54YNumtvj5vx1BG+zMbT7qIE3nmUPTCHP7qb5ERZG4CdMC"                   + "S6S64/qzZEqijLCqepwj6j4fV5SyPWEcpxf6ehNdmcfgzVB3Wolfwh1ydhx/96L1jHJcTKchdJJzlfTvq8wwKBgQDeCnK"                   + "ws1t5GapfE1rmC/h4olL2qZTth9oQmbrXYohVnoqNFslDa43ePZwL9Jmd9kYb0axOTNMmyrP0NTj41uCfgDS0cJnNTc63"                   + "ojKjegxHIyYDKRZNVUR/dxAYB/vPfBYZUS7M89pO6LLsHhzS3qpu3/hppo/Uc/AM /r8PSflNHQKBgDnWgBh6OQncChPUl"                   + "OLv9FMZPR1ZOfqLCYrjYEqiuzGm6iKM13zXFO4AGAxu1P/IAd5BovFcTpg79Z8tWqZaUUwvscnl+cRlj+mMXAmdqCeO8V"                   + "ASOmqM1ml667axeZDIR867ZG8K5V029Wg+4qtX5uFypNAAi6GfHkxIKrD04yOHAoGACdh4wXESi0oiDdkz3KOHPwIjn6B"                   + "hZC7z8mx+pnJODU3cYukxv3WTctlUhAsyjJiQ/0bK1yX87ulqFVgO0Knmh+wNajrb9wiONAJTMICG7tiWJOm7fW5cfTJw"                   + "WkBwYADmkfTRmHDvqzQSSvoC2S7aa9QulbC3C/qgGFNrcWgcT9kCgYAZTa1P9bFCDU7hJc2mHwJwAW7/FQKEJg8SL33KI"                   + "NpLwcR8fqaYOdAHWWz636osVEqosRrHzJOGpf9x2RSWzQJ+dq8+6fACgfFZOVpN644+sAHfNPAI/gnNKU5OfUv+eav8fB"                   + "nzlf1A3y3GIkyMyzFN3DE7e0n/lyqxE4HBYGpI8g==";                  private static byte[] bytes = System.Convert.FromBase64String(base64EncodedRSAPK);             private string base64EncodedPK = Base64UrlEncoder.Encode(bytes);                  // A pkcs#8 encoded unencrypted EC256 private key as a base64url string.             private string base64EncodedEC256PK =                   "MIGHAgEAMBMGByqGSM49AgEGCCqGSM49AwEHBG0wawIBAQQg8_zMDQDYAxlU-Q"                   + "hk1Dwkf0v18GZca1DMF3SaJ9HPdmShRANCAASNYX5lyVCOZLzFZzrIKmeZ2jwU"                   + "RmgsJYxGP__fWN_S-j5sN4tT15XEpN_7QZnt14YvI6uvAgO0uJEboFaZlOEB";                       [TestMethod]             public void VirtualOptionsShouldAllowSettingOptions()             {                 // Create virtual authenticator options                 VirtualAuthenticatorOptions options = new VirtualAuthenticatorOptions()                     .SetIsUserVerified(true)                     .SetHasUserVerification(true)                     .SetIsUserConsenting(true)                     .SetTransport(VirtualAuthenticatorOptions.Transport.USB)                     .SetProtocol(VirtualAuthenticatorOptions.Protocol.U2F)                     .SetHasResidentKey(false);                      Assert.AreEqual(6, options.ToDictionary().Count);             }                  [TestMethod]             public void ShouldBeAbleToCreateAuthenticator()             {                 // Create virtual authenticator options                 VirtualAuthenticatorOptions options = new VirtualAuthenticatorOptions()                     .SetProtocol(VirtualAuthenticatorOptions.Protocol.U2F)                     .SetHasResidentKey(false);                      // Register a virtual authenticator                 ((WebDriver)driver).AddVirtualAuthenticator(options);                      List<Credential> credentialList = ((WebDriver)driver).GetCredentials();                      Assert.AreEqual(0, credentialList.Count);             }                       [TestMethod]             public void ShouldBeAbleToRemoveAuthenticator()             {                 VirtualAuthenticatorOptions options = new VirtualAuthenticatorOptions()                     .SetProtocol(VirtualAuthenticatorOptions.Protocol.U2F)                     .SetHasResidentKey(false);                      String virtualAuthenticatorId = ((WebDriver)driver).AddVirtualAuthenticator(options);                      ((WebDriver)driver).RemoveVirtualAuthenticator(virtualAuthenticatorId);                      // Since the authenticator was removed, any operation using it will throw an error                 Assert.ThrowsException<InvalidOperationException>(() => ((WebDriver)driver).GetCredentials());             }                  [TestMethod]             public void ShouldBeAbleToCreateAndAddResidentialKey()             {                 VirtualAuthenticatorOptions options = new VirtualAuthenticatorOptions()                     .SetProtocol(Protocol.CTAP2)                     .SetHasResidentKey(true)                     .SetHasUserVerification(true)                     .SetIsUserVerified(true);                      ((WebDriver)driver).AddVirtualAuthenticator(options);                      byte[] credentialId = { 1, 2, 3, 4 };                 byte[] userHandle = { 1 };                      Credential residentCredential = Credential.CreateResidentCredential(                   credentialId, "localhost", base64EncodedPK, userHandle, 0);                      ((WebDriver)driver).AddCredential(residentCredential);                      List<Credential> credentialList = ((WebDriver)driver).GetCredentials();                 Assert.AreEqual(1, credentialList.Count);                      Credential credential = credentialList[0];                 CollectionAssert.AreEqual(credentialId, credential.Id);             }                  [TestMethod]             public void ShouldNotAddResidentCredentialWhenAuthenticatorUsesU2FProtocol()             {                 VirtualAuthenticatorOptions options = new VirtualAuthenticatorOptions()                     .SetProtocol(VirtualAuthenticatorOptions.Protocol.U2F)                     .SetHasResidentKey(true);                      ((WebDriver)driver).AddVirtualAuthenticator(options);                      byte[] credentialId = { 1, 2, 3, 4 };                 byte[] userHandle = { 1 };                      Credential credential = Credential.CreateResidentCredential(                   credentialId, "localhost", base64EncodedEC256PK, userHandle, 0);                      Assert.ThrowsException<WebDriverArgumentException>(() => ((WebDriver)driver).AddCredential(credential));             }                  [TestMethod]             public void ShouldBeAbleToCreateAndAddNonResidentKey()             {                 VirtualAuthenticatorOptions options = new VirtualAuthenticatorOptions()                     .SetProtocol(VirtualAuthenticatorOptions.Protocol.U2F)                     .SetHasResidentKey(false);                      ((WebDriver)driver).AddVirtualAuthenticator(options);                      byte[] credentialId = { 1, 2, 3, 4 };                      Credential nonResidentCredential = Credential.CreateNonResidentCredential(                   credentialId, "localhost", base64EncodedEC256PK, 0);                      ((WebDriver)driver).AddCredential(nonResidentCredential);                      List<Credential> credentialList = ((WebDriver)driver).GetCredentials();                 Assert.AreEqual(1, credentialList.Count);                      Credential credential = credentialList[0];                 CollectionAssert.AreEqual(credentialId, nonResidentCredential.Id);             }                  [TestMethod]             public void ShouldBeAbleToGetCredential()             {                 VirtualAuthenticatorOptions options = new VirtualAuthenticatorOptions()                     .SetProtocol(Protocol.CTAP2)                     .SetHasResidentKey(true)                     .SetHasUserVerification(true)                     .SetIsUserVerified(true);                      ((WebDriver)driver).AddVirtualAuthenticator(options);                      byte[] credentialId = { 1, 2, 3, 4 };                 byte[] userHandle = { 1 };                      Credential residentCredential = Credential.CreateResidentCredential(                   credentialId, "localhost", base64EncodedPK, userHandle, 0);                      ((WebDriver)driver).AddCredential(residentCredential);                      List<Credential> credentialList = ((WebDriver)driver).GetCredentials();                 Assert.AreEqual(1, credentialList.Count);                      Credential credential = credentialList[0];                 CollectionAssert.AreEqual(credentialId, residentCredential.Id);                 Assert.AreEqual(base64EncodedPK, credential.PrivateKey);             }                  [TestMethod]             public void ShouldBeAbleToRemoveCredential()             {                 ((WebDriver)driver).AddVirtualAuthenticator(new VirtualAuthenticatorOptions());                      byte[] credentialId = { 1, 2, 3, 4 };                      Credential nonResidentCredential = Credential.CreateNonResidentCredential(                   credentialId, "localhost", base64EncodedEC256PK, 0);                      ((WebDriver)driver).AddCredential(nonResidentCredential);                      ((WebDriver)driver).RemoveCredential(credentialId);                      Assert.AreEqual(0, ((WebDriver)driver).GetCredentials().Count);             }                       [TestMethod]             public void ShouldBeAbleToRemoveAllCredentias()             {                 ((WebDriver)driver).AddVirtualAuthenticator(new VirtualAuthenticatorOptions());                      byte[] credentialId = { 1, 2, 3, 4 };                      Credential nonResidentCredential = Credential.CreateNonResidentCredential(                   credentialId, "localhost", base64EncodedEC256PK, 0);                      ((WebDriver)driver).AddCredential(nonResidentCredential);                      ((WebDriver)driver).RemoveAllCredentials();                      Assert.AreEqual(0, ((WebDriver)driver).GetCredentials().Count);             }                  [TestMethod]             public void ShouldBeSetVerifiedOption()             {                 VirtualAuthenticatorOptions options = new VirtualAuthenticatorOptions()                     .SetIsUserVerified(true);                      Assert.IsTrue((bool)options.ToDictionary()["isUserVerified"]);             }         }     }

[Add Example](https://www.selenium.dev/documentation/about/contributing/#creating-examples)                   # parameters for Resident Credential         credential_id = bytearray({1, 2, 3, 4})         rp_id = "localhost"         user_handle = bytearray({1})         privatekey = urlsafe_b64decode(BASE64__ENCODED_PK)         sign_count = 0              # create a resident credential using above parameters         resident_credential = Credential.create_resident_credential(credential_id, rp_id, user_handle, privatekey, sign_count)

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/python/tests/interactions/test_virtual_authenticator.py#L89-L97)

##### examples/python/tests/interactions/test\_virtual\_authenticator.py

Copy  Close               import pytest     from base64 import urlsafe_b64decode, urlsafe_b64encode          from selenium.common.exceptions import InvalidArgumentException     from selenium.webdriver.chrome.webdriver import WebDriver     from selenium.webdriver.common.virtual_authenticator import (         Credential,         VirtualAuthenticatorOptions,     )               BASE64__ENCODED_PK = '''     MIIEvAIBADANBgkqhkiG9w0BAQEFAASCBKYwggSiAgEAAoIBAQDbBOu5Lhs4vpowbCnmCyLUpIE7JM9sm9QXzye2G+jr+Kr     MsinWohEce47BFPJlTaDzHSvOW2eeunBO89ZcvvVc8RLz4qyQ8rO98xS1jtgqi1NcBPETDrtzthODu/gd0sjB2Tk3TLuBGV     oPXt54a+Oo4JbBJ6h3s0+5eAfGplCbSNq6hN3Jh9YOTw5ZA6GCEy5l8zBaOgjXytd2v2OdSVoEDNiNQRkjJd2rmS2oi9AyQ     FR3B7BrPSiDlCcITZFOWgLF5C31Wp/PSHwQhlnh7/6YhnE2y9tzsUvzx0wJXrBADW13+oMxrneDK3WGbxTNYgIi1PvSqXlq     GjHtCK+R2QkXAgMBAAECggEAVc6bu7VAnP6v0gDOeX4razv4FX/adCao9ZsHZ+WPX8PQxtmWYqykH5CY4TSfsuizAgyPuQ0     +j4Vjssr9VODLqFoanspT6YXsvaKanncUYbasNgUJnfnLnw3an2XpU2XdmXTNYckCPRX9nsAAURWT3/n9ljc/XYY22ecYxM     8sDWnHu2uKZ1B7M3X60bQYL5T/lVXkKdD6xgSNLeP4AkRx0H4egaop68hoW8FIwmDPVWYVAvo8etzWCtibRXz5FcNld9MgD     /Ai7ycKy4Q1KhX5GBFI79MVVaHkSQfxPHpr7/XcmpQOEAr+BMPon4s4vnKqAGdGB3j/E3d/+4F2swykoQKBgQD8hCsp6FIQ     5umJlk9/j/nGsMl85LgLaNVYpWlPRKPc54YNumtvj5vx1BG+zMbT7qIE3nmUPTCHP7qb5ERZG4CdMCS6S64/qzZEqijLCqe     pwj6j4fV5SyPWEcpxf6ehNdmcfgzVB3Wolfwh1ydhx/96L1jHJcTKchdJJzlfTvq8wwKBgQDeCnKws1t5GapfE1rmC/h4ol     L2qZTth9oQmbrXYohVnoqNFslDa43ePZwL9Jmd9kYb0axOTNMmyrP0NTj41uCfgDS0cJnNTc63ojKjegxHIyYDKRZNVUR/d     xAYB/vPfBYZUS7M89pO6LLsHhzS3qpu3/hppo/Uc/AM/r8PSflNHQKBgDnWgBh6OQncChPUlOLv9FMZPR1ZOfqLCYrjYEqi     uzGm6iKM13zXFO4AGAxu1P/IAd5BovFcTpg79Z8tWqZaUUwvscnl+cRlj+mMXAmdqCeO8VASOmqM1ml667axeZDIR867ZG8     K5V029Wg+4qtX5uFypNAAi6GfHkxIKrD04yOHAoGACdh4wXESi0oiDdkz3KOHPwIjn6BhZC7z8mx+pnJODU3cYukxv3WTct     lUhAsyjJiQ/0bK1yX87ulqFVgO0Knmh+wNajrb9wiONAJTMICG7tiWJOm7fW5cfTJwWkBwYADmkfTRmHDvqzQSSvoC2S7aa     9QulbC3C/qgGFNrcWgcT9kCgYAZTa1P9bFCDU7hJc2mHwJwAW7/FQKEJg8SL33KINpLwcR8fqaYOdAHWWz636osVEqosRrH     zJOGpf9x2RSWzQJ+dq8+6fACgfFZOVpN644+sAHfNPAI/gnNKU5OfUv+eav8fBnzlf1A3y3GIkyMyzFN3DE7e0n/lyqxE4H     BYGpI8g==     '''               @pytest.fixture(scope="module", autouse=True)     def driver():         yield WebDriver()               def test_virtual_authenticator_options():         options = VirtualAuthenticatorOptions()         options.is_user_verified = True         options.has_user_verification = True         options.is_user_consenting = True         options.transport = VirtualAuthenticatorOptions.Transport.USB         options.protocol = VirtualAuthenticatorOptions.Protocol.U2F         options.has_resident_key = False              assert len(options.to_dict()) == 6               def test_add_authenticator(driver):         # Create virtual authenticator options         options = VirtualAuthenticatorOptions()         options.protocol = VirtualAuthenticatorOptions.Protocol.U2F         options.has_resident_key = False              # Register a virtual authenticator         driver.add_virtual_authenticator(options)              # Get list of credentials         credential_list = driver.get_credentials()              assert len(credential_list) == 0               def test_remove_authenticator(driver):         # Create default virtual authenticator option         options = VirtualAuthenticatorOptions()              # Register a virtual authenticator         driver.add_virtual_authenticator(options)              # Remove virtual authenticator         driver.remove_virtual_authenticator()         assert driver.virtual_authenticator_id is None               def test_create_and_add_resident_key(driver):         # Create virtual authenticator options         options = VirtualAuthenticatorOptions()         options.protocol = VirtualAuthenticatorOptions.Protocol.CTAP2         options.has_resident_key = True         options.has_user_verification = True         options.is_user_verified = True              # Register a virtual authenticator         driver.add_virtual_authenticator(options)              # parameters for Resident Credential         credential_id = bytearray({1, 2, 3, 4})         rp_id = "localhost"         user_handle = bytearray({1})         privatekey = urlsafe_b64decode(BASE64__ENCODED_PK)         sign_count = 0              # create a resident credential using above parameters         resident_credential = Credential.create_resident_credential(credential_id, rp_id, user_handle, privatekey, sign_count)              # add the credential created to virtual authenticator         driver.add_credential(resident_credential)              # get list of all the registered credentials          credential_list = driver.get_credentials()         assert len(credential_list) == 1               def test_add_resident_credential_not_supported_when_authenticator_uses_u2f_protocol(driver):         # Create virtual authenticator options         options = VirtualAuthenticatorOptions()         options.protocol = VirtualAuthenticatorOptions.Protocol.U2F         options.has_resident_key = False              # Register a virtual authenticator         driver.add_virtual_authenticator(options)              # parameters for Resident Credential         credential_id = bytearray({1, 2, 3, 4})         rp_id = "localhost"         user_handle = bytearray({1})         privatekey = urlsafe_b64decode(BASE64__ENCODED_PK)         sign_count = 0              # create a  resident credential using above parameters         credential = Credential.create_resident_credential(credential_id, rp_id, user_handle, privatekey, sign_count)              # Expect InvalidArgumentException          with pytest.raises(InvalidArgumentException):             driver.add_credential(credential)               def test_create_and_add_non_resident_key(driver):         # Create virtual authenticator options         options = VirtualAuthenticatorOptions()         options.protocol = VirtualAuthenticatorOptions.Protocol.U2F         options.has_resident_key = False              # Register a virtual authenticator         driver.add_virtual_authenticator(options)              # parameters for Non Resident Credential         credential_id = bytearray({1, 2, 3, 4})         rp_id = "localhost"         privatekey = urlsafe_b64decode(BASE64__ENCODED_PK)         sign_count = 0              # create a non resident credential using above parameters         credential = Credential.create_non_resident_credential(credential_id, rp_id, privatekey, sign_count)              # add the credential created to virtual authenticator         driver.add_credential(credential)                  # get list of all the registered credentials          credential_list = driver.get_credentials()         assert len(credential_list) == 1                    def test_get_credential(driver):         # Create virtual authenticator options         options = VirtualAuthenticatorOptions()         options.protocol = VirtualAuthenticatorOptions.Protocol.CTAP2         options.has_resident_key = True         options.has_user_verfied = True         options.is_user_verified = True              # Register a virtual authenticator         driver.add_virtual_authenticator(options)              # parameters for Resident Credential         credential_id = bytearray({1, 2, 3, 4})         rp_id = "localhost"         user_handle = bytearray({1})         privatekey = urlsafe_b64decode(BASE64__ENCODED_PK)         sign_count = 0              # create a resident credential using above parameters         credential = Credential.create_resident_credential(credential_id, rp_id, user_handle, privatekey, sign_count)                  # add the credential created to virtual authenticator         driver.add_credential(credential)              # get list of all the registered credentials          credential_list = driver.get_credentials()              assert len(credential_list) == 1         assert credential_list[0].id == urlsafe_b64encode(credential_id).decode()               def test_remove_credential(driver):         # Create default virtual authenticator options         options = VirtualAuthenticatorOptions()              # Register a virtual authenticator         driver.add_virtual_authenticator(options)              # parameters for Non Resident Credential         credential_id = bytearray({1, 2, 3, 4})         rp_id = "localhost"         privatekey = urlsafe_b64decode(BASE64__ENCODED_PK)         sign_count = 0              # create a non resident credential using above parameters         credential = Credential.create_non_resident_credential(credential_id, rp_id, privatekey, sign_count)              # add the credential created to virtual authenticator         driver.add_credential(credential)              # remove the credential created from virtual authenticator         driver.remove_credential(credential.id)              # credential can also be removed using Byte Array         # driver.remove_credential(credential_id)               assert len(driver.get_credentials()) == 0               def test_remove_all_credentials(driver):         # Create default virtual authenticator options         options = VirtualAuthenticatorOptions()         options.has_resident_key = True              # Register a virtual authenticator         driver.add_virtual_authenticator(options)              # parameters for Resident Credential         credential_id = bytearray({1, 2, 3, 4})         rp_id = "localhost"         user_handle = bytearray({1})         privatekey = urlsafe_b64decode(BASE64__ENCODED_PK)         sign_count = 0              # create a resident credential using above parameters         resident_credential = Credential.create_resident_credential(credential_id, rp_id, user_handle, privatekey, sign_count)                  # add the credential created to virtual authenticator         driver.add_credential(resident_credential)              # remove all credentials in virtual authenticator         driver.remove_all_credentials()              assert len(driver.get_credentials()) == 0               def test_set_user_verified():         # Create virtual authenticator options         options = VirtualAuthenticatorOptions()         options.is_user_verified = True              assert options.to_dict().get("isUserVerified") is True                   options.setProtocol(Protocol['CTAP2']);         options.setHasResidentKey(true);         options.setHasUserVerification(true);         options.setIsUserVerified(true);              await driver.addVirtualAuthenticator(options);              let residentCredential = new Credential().createResidentCredential(           new Uint8Array([1, 2, 3, 4]),           'localhost',           new Uint8Array([1]),           Buffer.from(BASE64_ENCODED_PK, 'base64').toString('binary'),           0);              await driver.addCredential(residentCredential);

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/javascript/test/virtual_authenticator/virtualAuthenticator.spec.js#L80-L94)

##### examples/javascript/test/virtual\_authenticator/virtualAuthenticator.spec.js

Copy  Close               const { Builder} = require("selenium-webdriver");     const { Credential, VirtualAuthenticatorOptions, Transport, Protocol } = require("selenium-webdriver/lib/virtual_authenticator");     const assert = require('assert')     const { InvalidArgumentError } = require("selenium-webdriver/lib/error");               describe('Virtual authenticator', function() {       const BASE64_ENCODED_PK =         "MIIEvAIBADANBgkqhkiG9w0BAQEFAASCBKYwggSiAgEAAoIBAQDbBOu5Lhs4vpowbCnmCyLUpIE7JM9sm9QXzye2G+jr+Kr" +         "MsinWohEce47BFPJlTaDzHSvOW2eeunBO89ZcvvVc8RLz4qyQ8rO98xS1jtgqi1NcBPETDrtzthODu/gd0sjB2Tk3TLuBGV" +         "oPXt54a+Oo4JbBJ6h3s0+5eAfGplCbSNq6hN3Jh9YOTw5ZA6GCEy5l8zBaOgjXytd2v2OdSVoEDNiNQRkjJd2rmS2oi9AyQ" +         "FR3B7BrPSiDlCcITZFOWgLF5C31Wp/PSHwQhlnh7/6YhnE2y9tzsUvzx0wJXrBADW13+oMxrneDK3WGbxTNYgIi1PvSqXlq" +         "GjHtCK+R2QkXAgMBAAECggEAVc6bu7VAnP6v0gDOeX4razv4FX/adCao9ZsHZ+WPX8PQxtmWYqykH5CY4TSfsuizAgyPuQ0" +         "+j4Vjssr9VODLqFoanspT6YXsvaKanncUYbasNgUJnfnLnw3an2XpU2XdmXTNYckCPRX9nsAAURWT3/n9ljc/XYY22ecYxM" +         "8sDWnHu2uKZ1B7M3X60bQYL5T/lVXkKdD6xgSNLeP4AkRx0H4egaop68hoW8FIwmDPVWYVAvo8etzWCtibRXz5FcNld9MgD" +         "/Ai7ycKy4Q1KhX5GBFI79MVVaHkSQfxPHpr7/XcmpQOEAr+BMPon4s4vnKqAGdGB3j/E3d/+4F2swykoQKBgQD8hCsp6FIQ" +         "5umJlk9/j/nGsMl85LgLaNVYpWlPRKPc54YNumtvj5vx1BG+zMbT7qIE3nmUPTCHP7qb5ERZG4CdMCS6S64/qzZEqijLCqe" +         "pwj6j4fV5SyPWEcpxf6ehNdmcfgzVB3Wolfwh1ydhx/96L1jHJcTKchdJJzlfTvq8wwKBgQDeCnKws1t5GapfE1rmC/h4ol" +         "L2qZTth9oQmbrXYohVnoqNFslDa43ePZwL9Jmd9kYb0axOTNMmyrP0NTj41uCfgDS0cJnNTc63ojKjegxHIyYDKRZNVUR/d" +         "xAYB/vPfBYZUS7M89pO6LLsHhzS3qpu3/hppo/Uc/AM/r8PSflNHQKBgDnWgBh6OQncChPUlOLv9FMZPR1ZOfqLCYrjYEqi" +         "uzGm6iKM13zXFO4AGAxu1P/IAd5BovFcTpg79Z8tWqZaUUwvscnl+cRlj+mMXAmdqCeO8VASOmqM1ml667axeZDIR867ZG8" +         "K5V029Wg+4qtX5uFypNAAi6GfHkxIKrD04yOHAoGACdh4wXESi0oiDdkz3KOHPwIjn6BhZC7z8mx+pnJODU3cYukxv3WTct" +         "lUhAsyjJiQ/0bK1yX87ulqFVgO0Knmh+wNajrb9wiONAJTMICG7tiWJOm7fW5cfTJwWkBwYADmkfTRmHDvqzQSSvoC2S7aa" +         "9QulbC3C/qgGFNrcWgcT9kCgYAZTa1P9bFCDU7hJc2mHwJwAW7/FQKEJg8SL33KINpLwcR8fqaYOdAHWWz636osVEqosRrH" +         "zJOGpf9x2RSWzQJ+dq8+6fACgfFZOVpN644+sAHfNPAI/gnNKU5OfUv+eav8fBnzlf1A3y3GIkyMyzFN3DE7e0n/lyqxE4H" +         "BYGpI8g==";            const base64EncodedPK =         "MIGHAgEAMBMGByqGSM49AgEGCCqGSM49AwEHBG0wawIBAQQg8_zMDQDYAxlU-Q" +         "hk1Dwkf0v18GZca1DMF3SaJ9HPdmShRANCAASNYX5lyVCOZLzFZzrIKmeZ2jwU" +         "RmgsJYxGP__fWN_S-j5sN4tT15XEpN_7QZnt14YvI6uvAgO0uJEboFaZlOEB";            let options;       let driver;            before(async function() {         options = new VirtualAuthenticatorOptions();         driver = await new Builder().forBrowser('chrome').build();       });            after(async() => await driver.quit());            function arraysEqual(array1, array2) {         return (array1.length === array2.length &&           array1.every((item) => array2.includes(item)) &&           array2.every((item) => array1.includes(item)));       }            it('Register a virtual authenticator', async function() {         options.setProtocol(Protocol['U2F']);         options.setHasResidentKey(false);              // Register a virtual authenticator         await driver.addVirtualAuthenticator(options);         let credentialList = await driver.getCredentials();              assert.equal(0, credentialList.length);       });            it('Remove authenticator', async function() {         await driver.addVirtualAuthenticator(options);         await driver.removeVirtualAuthenticator();              // Since the authenticator was removed, any operation using it will throw an error         try {           await driver.getCredentials()         }         catch (e) {           if (e instanceof InvalidArgumentError) {             assert(true)           }           else {             assert(false)           }         }       });            it('Createa and add residential key', async function() {         options.setProtocol(Protocol['CTAP2']);         options.setHasResidentKey(true);         options.setHasUserVerification(true);         options.setIsUserVerified(true);              await driver.addVirtualAuthenticator(options);              let residentCredential = new Credential().createResidentCredential(           new Uint8Array([1, 2, 3, 4]),           'localhost',           new Uint8Array([1]),           Buffer.from(BASE64_ENCODED_PK, 'base64').toString('binary'),           0);              await driver.addCredential(residentCredential);         let credentialList = await driver.getCredentials();         assert.equal(1, credentialList.length);              let credential_id = credentialList[0].id();         let test_id = new Uint8Array([1, 2, 3, 4]);              assert(arraysEqual(credential_id, test_id));       });            it('Add resident credential not supported when authenticator uses U2F protocol', async function() {         options.setProtocol(Protocol['U2F']);         options.setHasResidentKey(true);              await driver.addVirtualAuthenticator(options);              let credential = new Credential().createResidentCredential(           new Uint8Array([1, 2, 3, 4]),           'localhost',           new Uint8Array([1]),           Buffer.from(base64EncodedPK, 'base64').toString('binary'),           0);              try {           await driver.addCredential(credential)         }         catch (e) {           if (e instanceof InvalidArgumentError) {             assert(true)           }           else {             assert(false)           }         }       });            it('Create and add non residential key', async function() {         options.setProtocol(Protocol['U2F']);         options.setHasResidentKey(false);              await driver.addVirtualAuthenticator(options);              let nonResidentCredential = new Credential().createNonResidentCredential(           new Uint8Array([1, 2, 3, 4]),           'localhost',           Buffer.from(base64EncodedPK, 'base64').toString('binary'),           0);              await driver.addCredential(nonResidentCredential);              let credentialList = await driver.getCredentials();         assert.equal(1, credentialList.length);              let credential_id = credentialList[0].id();         let test_id = new Uint8Array([1, 2, 3, 4]);              assert(arraysEqual(credential_id, test_id));       });            it('Get credential', async function() {         options.setProtocol(Protocol['CTAP2']);         options.setHasResidentKey(true);         options.setHasUserVerification(true);         options.setIsUserVerified(true);              await driver.addVirtualAuthenticator(options);              let residentCredential = new Credential().createResidentCredential(           new Uint8Array([1, 2, 3, 4]),           'localhost',           new Uint8Array([1]),           Buffer.from(BASE64_ENCODED_PK, 'base64').toString('binary'),           0);              await driver.addCredential(residentCredential);              let credentialList = await driver.getCredentials();         assert.equal(1, credentialList.length);              let credential_id = credentialList[0].id();         let test_id = new Uint8Array([1, 2, 3, 4]);              assert(arraysEqual(credential_id, test_id));         assert.equal(BASE64_ENCODED_PK, Buffer.from(credentialList[0].privateKey(), 'binary').toString('base64'));       });            it('Remove all credentials', async function() {         await driver.addVirtualAuthenticator(options);              let nonResidentCredential = new Credential().createNonResidentCredential(           new Uint8Array([1, 2, 3, 4]),           'localhost',           Buffer.from(BASE64_ENCODED_PK, 'base64').toString('binary'),           0);              await driver.addCredential(nonResidentCredential);         await driver.removeAllCredentials();              let credentialList = await driver.getCredentials();         assert.equal(0, credentialList.length);       });            it('Set is user verified', async function() {         options.setIsUserVerified(true);         assert.equal(options.getIsUserVerified(), true);       });     });

[Add Example](https://www.selenium.dev/documentation/about/contributing/#creating-examples)

## Create Non-Resident Credential

Creates a resident \(stateless\) credential with the given required credential [parameters](https://w3c.github.io/webauthn/#sctn-automation-add-credential).

  * Java   * CSharp   * Ruby   * Python   * JavaScript   * Kotlin

                  VirtualAuthenticator authenticator = ((HasVirtualAuthenticator) driver).addVirtualAuthenticator(options);              byte[] credentialId = {1, 2, 3, 4};

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/java/src/test/java/dev/selenium/interactions/VirtualAuthenticatorTest.java#L143-L145)

##### examples/java/src/test/java/dev/selenium/interactions/VirtualAuthenticatorTest.java

Copy  Close               package dev.selenium.interactions;          import dev.selenium.BaseChromeTest;     import java.security.spec.PKCS8EncodedKeySpec;     import java.util.Base64;     import java.util.List;     import org.junit.jupiter.api.Assertions;     import org.junit.jupiter.api.Disabled;     import org.junit.jupiter.api.Test;     import org.openqa.selenium.InvalidArgumentException;     import org.openqa.selenium.virtualauthenticator.Credential;     import org.openqa.selenium.virtualauthenticator.HasVirtualAuthenticator;     import org.openqa.selenium.virtualauthenticator.VirtualAuthenticator;     import org.openqa.selenium.virtualauthenticator.VirtualAuthenticatorOptions;          public class VirtualAuthenticatorTest extends BaseChromeTest {            /**        * A pkcs#8 encoded encrypted RSA private key as a base64url string.        */       private final static String         base64EncodedRsaPK =         "MIIEvAIBADANBgkqhkiG9w0BAQEFAASCBKYwggSiAgEAAoIBAQDbBOu5Lhs4vpowbCnmCyLUpIE7JM9sm9QXzye2G+jr+Kr"         + "MsinWohEce47BFPJlTaDzHSvOW2eeunBO89ZcvvVc8RLz4qyQ8rO98xS1jtgqi1NcBPETDrtzthODu/gd0sjB2Tk3TLuB"         + "GVoPXt54a+Oo4JbBJ6h3s0+5eAfGplCbSNq6hN3Jh9YOTw5ZA6GCEy5l8zBaOgjXytd2v2OdSVoEDNiNQRkjJd2rmS2oi"         + "9AyQFR3B7BrPSiDlCcITZFOWgLF5C31Wp/PSHwQhlnh7/6YhnE2y9tzsUvzx0wJXrBADW13+oMxrneDK3WGbxTNYgIi1P"         + "vSqXlqGjHtCK+R2QkXAgMBAAECggEAVc6bu7VAnP6v0gDOeX4razv4FX/adCao9ZsHZ+WPX8PQxtmWYqykH5CY4TSfsui"         + "zAgyPuQ0+j4Vjssr9VODLqFoanspT6YXsvaKanncUYbasNgUJnfnLnw3an2XpU2XdmXTNYckCPRX9nsAAURWT3/n9ljc/"         + "XYY22ecYxM8sDWnHu2uKZ1B7M3X60bQYL5T/lVXkKdD6xgSNLeP4AkRx0H4egaop68hoW8FIwmDPVWYVAvo8etzWCtib"         + "RXz5FcNld9MgD/Ai7ycKy4Q1KhX5GBFI79MVVaHkSQfxPHpr7/XcmpQOEAr+BMPon4s4vnKqAGdGB3j/E3d/+4F2swyko"         + "QKBgQD8hCsp6FIQ5umJlk9/j/nGsMl85LgLaNVYpWlPRKPc54YNumtvj5vx1BG+zMbT7qIE3nmUPTCHP7qb5ERZG4CdMC"         + "S6S64/qzZEqijLCqepwj6j4fV5SyPWEcpxf6ehNdmcfgzVB3Wolfwh1ydhx/96L1jHJcTKchdJJzlfTvq8wwKBgQDeCnK"         + "ws1t5GapfE1rmC/h4olL2qZTth9oQmbrXYohVnoqNFslDa43ePZwL9Jmd9kYb0axOTNMmyrP0NTj41uCfgDS0cJnNTc63"         + "ojKjegxHIyYDKRZNVUR/dxAYB/vPfBYZUS7M89pO6LLsHhzS3qpu3/hppo/Uc/AM /r8PSflNHQKBgDnWgBh6OQncChPUl"         + "OLv9FMZPR1ZOfqLCYrjYEqiuzGm6iKM13zXFO4AGAxu1P/IAd5BovFcTpg79Z8tWqZaUUwvscnl+cRlj+mMXAmdqCeO8V"         + "ASOmqM1ml667axeZDIR867ZG8K5V029Wg+4qtX5uFypNAAi6GfHkxIKrD04yOHAoGACdh4wXESi0oiDdkz3KOHPwIjn6B"         + "hZC7z8mx+pnJODU3cYukxv3WTctlUhAsyjJiQ/0bK1yX87ulqFVgO0Knmh+wNajrb9wiONAJTMICG7tiWJOm7fW5cfTJw"         + "WkBwYADmkfTRmHDvqzQSSvoC2S7aa9QulbC3C/qgGFNrcWgcT9kCgYAZTa1P9bFCDU7hJc2mHwJwAW7/FQKEJg8SL33KI"         + "NpLwcR8fqaYOdAHWWz636osVEqosRrHzJOGpf9x2RSWzQJ+dq8+6fACgfFZOVpN644+sAHfNPAI/gnNKU5OfUv+eav8fB"         + "nzlf1A3y3GIkyMyzFN3DE7e0n/lyqxE4HBYGpI8g==";            private final static PKCS8EncodedKeySpec rsaPrivateKey =         new PKCS8EncodedKeySpec(Base64.getMimeDecoder().decode(base64EncodedRsaPK));            // A pkcs#8 encoded unencrypted EC256 private key as a base64url string.       String base64EncodedEC256PK =         "MIGHAgEAMBMGByqGSM49AgEGCCqGSM49AwEHBG0wawIBAQQg8_zMDQDYAxlU-Q"         + "hk1Dwkf0v18GZca1DMF3SaJ9HPdmShRANCAASNYX5lyVCOZLzFZzrIKmeZ2jwU"         + "RmgsJYxGP__fWN_S-j5sN4tT15XEpN_7QZnt14YvI6uvAgO0uJEboFaZlOEB";            PKCS8EncodedKeySpec ec256PrivateKey =         new PKCS8EncodedKeySpec(Base64.getUrlDecoder().decode(base64EncodedEC256PK));            @Test       public void testVirtualOptions() {         VirtualAuthenticatorOptions options = new VirtualAuthenticatorOptions()           .setIsUserVerified(true)           .setHasUserVerification(true)           .setIsUserConsenting(true)           .setTransport(VirtualAuthenticatorOptions.Transport.USB)           .setProtocol(VirtualAuthenticatorOptions.Protocol.U2F)           .setHasResidentKey(false);              Assertions.assertEquals(6, options.toMap().size());       }            @Test       public void testCreateAuthenticator() {         VirtualAuthenticatorOptions options = new VirtualAuthenticatorOptions()           .setProtocol(VirtualAuthenticatorOptions.Protocol.U2F)           .setHasResidentKey(false);              VirtualAuthenticator authenticator =           ((HasVirtualAuthenticator) driver).addVirtualAuthenticator(options);              List<Credential> credentialList = authenticator.getCredentials();              Assertions.assertEquals(0, credentialList.size());       }            @Test       public void testRemoveAuthenticator() {         VirtualAuthenticatorOptions options = new VirtualAuthenticatorOptions();         VirtualAuthenticator authenticator =           ((HasVirtualAuthenticator) driver).addVirtualAuthenticator(options);              ((HasVirtualAuthenticator) driver).removeVirtualAuthenticator(authenticator);              Assertions.assertThrows(InvalidArgumentException.class, authenticator::getCredentials);       }            @Test       public void testCreateAndAddResidentialKey() {         VirtualAuthenticatorOptions options = new VirtualAuthenticatorOptions()           .setProtocol(VirtualAuthenticatorOptions.Protocol.CTAP2)           .setHasResidentKey(true)           .setHasUserVerification(true)           .setIsUserVerified(true);         VirtualAuthenticator authenticator = ((HasVirtualAuthenticator) driver).addVirtualAuthenticator(options);              byte[] credentialId = {1, 2, 3, 4};         byte[] userHandle = {1};         Credential residentCredential = Credential.createResidentCredential(           credentialId, "localhost", rsaPrivateKey, userHandle, /*signCount=*/0);              authenticator.addCredential(residentCredential);              List<Credential> credentialList = authenticator.getCredentials();         Assertions.assertEquals(1, credentialList.size());              Credential credential = credentialList.get(0);         Assertions.assertArrayEquals(credentialId, credential.getId());       }            @Test       public void testAddResidentCredentialNotSupportedWhenAuthenticatorUsesU2FProtocol() {         VirtualAuthenticatorOptions options = new VirtualAuthenticatorOptions()           .setProtocol(VirtualAuthenticatorOptions.Protocol.U2F)           .setHasResidentKey(true);              VirtualAuthenticator authenticator = ((HasVirtualAuthenticator) driver).addVirtualAuthenticator(options);              PKCS8EncodedKeySpec privateKey =           new PKCS8EncodedKeySpec(Base64.getUrlDecoder().decode(base64EncodedEC256PK));              byte[] credentialId = {1, 2, 3, 4};         byte[] userHandle = {1};         Credential credential = Credential.createResidentCredential(           credentialId, "localhost", privateKey, userHandle, /*signCount=*/0);              Assertions.assertThrows(InvalidArgumentException.class,                                 () -> authenticator.addCredential(credential));       }                 @Test       @Disabled("A fix was implemented and will be available in Selenium 4.34.")       public void testCreateAndAddNonResidentialKey() {         VirtualAuthenticatorOptions options = new VirtualAuthenticatorOptions()           .setProtocol(VirtualAuthenticatorOptions.Protocol.U2F)           .setHasResidentKey(false);              VirtualAuthenticator authenticator = ((HasVirtualAuthenticator) driver).addVirtualAuthenticator(options);              byte[] credentialId = {1, 2, 3, 4};         Credential nonResidentCredential = Credential.createNonResidentCredential(           credentialId, "localhost", ec256PrivateKey, /*signCount=*/0);         authenticator.addCredential(nonResidentCredential);              List<Credential> credentialList = authenticator.getCredentials();         Assertions.assertEquals(1, credentialList.size());              Credential credential = credentialList.get(0);         Assertions.assertArrayEquals(credentialId, credential.getId());       }            @Test       public void testGetCredential() {         VirtualAuthenticatorOptions options = new VirtualAuthenticatorOptions()           .setProtocol(VirtualAuthenticatorOptions.Protocol.CTAP2)           .setHasResidentKey(true)           .setHasUserVerification(true)           .setIsUserVerified(true);         VirtualAuthenticator authenticator = ((HasVirtualAuthenticator) driver).addVirtualAuthenticator(options);              byte[] credentialId = {1, 2, 3, 4};         byte[] userHandle = {1};         Credential residentCredential = Credential.createResidentCredential(           credentialId, "localhost", rsaPrivateKey, userHandle, /*signCount=*/0);              authenticator.addCredential(residentCredential);              List<Credential> credentialList = authenticator.getCredentials();         Assertions.assertEquals(1, credentialList.size());              Credential credential = credentialList.get(0);         Assertions.assertArrayEquals(credentialId, credential.getId());         Assertions.assertArrayEquals(rsaPrivateKey.getEncoded(), credential.getPrivateKey().getEncoded());       }            @Test       public void testRemoveCredential() {         VirtualAuthenticator authenticator =           ((HasVirtualAuthenticator) driver).addVirtualAuthenticator(new VirtualAuthenticatorOptions());              byte[] credentialId = {1, 2, 3, 4};         Credential credential = Credential.createNonResidentCredential(           credentialId, "localhost", rsaPrivateKey, 0);              authenticator.addCredential(credential);              authenticator.removeCredential(credentialId);         Assertions.assertEquals(0, authenticator.getCredentials().size());       }            @Test       public void testRemoveAllCredentials() {         VirtualAuthenticator authenticator =           ((HasVirtualAuthenticator) driver).addVirtualAuthenticator(new VirtualAuthenticatorOptions());              byte[] credentialId = {1, 2, 3, 4};         Credential residentCredential = Credential.createNonResidentCredential(           credentialId, "localhost", rsaPrivateKey, /*signCount=*/0);              authenticator.addCredential(residentCredential);              authenticator.removeAllCredentials();         Assertions.assertEquals(0, authenticator.getCredentials().size());       }            @Test       public void testSetUserVerified() {         VirtualAuthenticatorOptions options = new VirtualAuthenticatorOptions()           .setIsUserVerified(true);              Assertions.assertTrue((boolean) options.toMap().get("isUserVerified"));       }     }                                byte[] credentialId = { 1, 2, 3, 4 };                      Credential nonResidentCredential = Credential.CreateNonResidentCredential(                   credentialId, "localhost", base64EncodedEC256PK, 0);

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/dotnet/SeleniumDocs/Interactions/VirtualAuthenticatorTest.cs#L145-148)

##### examples/dotnet/SeleniumDocs/Interactions/VirtualAuthenticatorTest.cs

Copy  Close               using Microsoft.VisualStudio.TestTools.UnitTesting;     using Microsoft.IdentityModel.Tokens;     using OpenQA.Selenium;     using OpenQA.Selenium.VirtualAuth;     using static OpenQA.Selenium.VirtualAuth.VirtualAuthenticatorOptions;     using System.Collections.Generic;     using System;          namespace SeleniumDocs.VirtualAuthentication     {         [TestClass]         public class VirtualAuthenticatorTest : BaseChromeTest         {             //A pkcs#8 encoded encrypted RSA private key as a base64 string.             private static string base64EncodedRSAPK =                     "MIIEvAIBADANBgkqhkiG9w0BAQEFAASCBKYwggSiAgEAAoIBAQDbBOu5Lhs4vpowbCnmCyLUpIE7JM9sm9QXzye2G+jr+Kr"                   + "MsinWohEce47BFPJlTaDzHSvOW2eeunBO89ZcvvVc8RLz4qyQ8rO98xS1jtgqi1NcBPETDrtzthODu/gd0sjB2Tk3TLuB"                   + "GVoPXt54a+Oo4JbBJ6h3s0+5eAfGplCbSNq6hN3Jh9YOTw5ZA6GCEy5l8zBaOgjXytd2v2OdSVoEDNiNQRkjJd2rmS2oi"                   + "9AyQFR3B7BrPSiDlCcITZFOWgLF5C31Wp/PSHwQhlnh7/6YhnE2y9tzsUvzx0wJXrBADW13+oMxrneDK3WGbxTNYgIi1P"                   + "vSqXlqGjHtCK+R2QkXAgMBAAECggEAVc6bu7VAnP6v0gDOeX4razv4FX/adCao9ZsHZ+WPX8PQxtmWYqykH5CY4TSfsui"                   + "zAgyPuQ0+j4Vjssr9VODLqFoanspT6YXsvaKanncUYbasNgUJnfnLnw3an2XpU2XdmXTNYckCPRX9nsAAURWT3/n9ljc/"                   + "XYY22ecYxM8sDWnHu2uKZ1B7M3X60bQYL5T/lVXkKdD6xgSNLeP4AkRx0H4egaop68hoW8FIwmDPVWYVAvo8etzWCtib"                   + "RXz5FcNld9MgD/Ai7ycKy4Q1KhX5GBFI79MVVaHkSQfxPHpr7/XcmpQOEAr+BMPon4s4vnKqAGdGB3j/E3d/+4F2swyko"                   + "QKBgQD8hCsp6FIQ5umJlk9/j/nGsMl85LgLaNVYpWlPRKPc54YNumtvj5vx1BG+zMbT7qIE3nmUPTCHP7qb5ERZG4CdMC"                   + "S6S64/qzZEqijLCqepwj6j4fV5SyPWEcpxf6ehNdmcfgzVB3Wolfwh1ydhx/96L1jHJcTKchdJJzlfTvq8wwKBgQDeCnK"                   + "ws1t5GapfE1rmC/h4olL2qZTth9oQmbrXYohVnoqNFslDa43ePZwL9Jmd9kYb0axOTNMmyrP0NTj41uCfgDS0cJnNTc63"                   + "ojKjegxHIyYDKRZNVUR/dxAYB/vPfBYZUS7M89pO6LLsHhzS3qpu3/hppo/Uc/AM /r8PSflNHQKBgDnWgBh6OQncChPUl"                   + "OLv9FMZPR1ZOfqLCYrjYEqiuzGm6iKM13zXFO4AGAxu1P/IAd5BovFcTpg79Z8tWqZaUUwvscnl+cRlj+mMXAmdqCeO8V"                   + "ASOmqM1ml667axeZDIR867ZG8K5V029Wg+4qtX5uFypNAAi6GfHkxIKrD04yOHAoGACdh4wXESi0oiDdkz3KOHPwIjn6B"                   + "hZC7z8mx+pnJODU3cYukxv3WTctlUhAsyjJiQ/0bK1yX87ulqFVgO0Knmh+wNajrb9wiONAJTMICG7tiWJOm7fW5cfTJw"                   + "WkBwYADmkfTRmHDvqzQSSvoC2S7aa9QulbC3C/qgGFNrcWgcT9kCgYAZTa1P9bFCDU7hJc2mHwJwAW7/FQKEJg8SL33KI"                   + "NpLwcR8fqaYOdAHWWz636osVEqosRrHzJOGpf9x2RSWzQJ+dq8+6fACgfFZOVpN644+sAHfNPAI/gnNKU5OfUv+eav8fB"                   + "nzlf1A3y3GIkyMyzFN3DE7e0n/lyqxE4HBYGpI8g==";                  private static byte[] bytes = System.Convert.FromBase64String(base64EncodedRSAPK);             private string base64EncodedPK = Base64UrlEncoder.Encode(bytes);                  // A pkcs#8 encoded unencrypted EC256 private key as a base64url string.             private string base64EncodedEC256PK =                   "MIGHAgEAMBMGByqGSM49AgEGCCqGSM49AwEHBG0wawIBAQQg8_zMDQDYAxlU-Q"                   + "hk1Dwkf0v18GZca1DMF3SaJ9HPdmShRANCAASNYX5lyVCOZLzFZzrIKmeZ2jwU"                   + "RmgsJYxGP__fWN_S-j5sN4tT15XEpN_7QZnt14YvI6uvAgO0uJEboFaZlOEB";                       [TestMethod]             public void VirtualOptionsShouldAllowSettingOptions()             {                 // Create virtual authenticator options                 VirtualAuthenticatorOptions options = new VirtualAuthenticatorOptions()                     .SetIsUserVerified(true)                     .SetHasUserVerification(true)                     .SetIsUserConsenting(true)                     .SetTransport(VirtualAuthenticatorOptions.Transport.USB)                     .SetProtocol(VirtualAuthenticatorOptions.Protocol.U2F)                     .SetHasResidentKey(false);                      Assert.AreEqual(6, options.ToDictionary().Count);             }                  [TestMethod]             public void ShouldBeAbleToCreateAuthenticator()             {                 // Create virtual authenticator options                 VirtualAuthenticatorOptions options = new VirtualAuthenticatorOptions()                     .SetProtocol(VirtualAuthenticatorOptions.Protocol.U2F)                     .SetHasResidentKey(false);                      // Register a virtual authenticator                 ((WebDriver)driver).AddVirtualAuthenticator(options);                      List<Credential> credentialList = ((WebDriver)driver).GetCredentials();                      Assert.AreEqual(0, credentialList.Count);             }                       [TestMethod]             public void ShouldBeAbleToRemoveAuthenticator()             {                 VirtualAuthenticatorOptions options = new VirtualAuthenticatorOptions()                     .SetProtocol(VirtualAuthenticatorOptions.Protocol.U2F)                     .SetHasResidentKey(false);                      String virtualAuthenticatorId = ((WebDriver)driver).AddVirtualAuthenticator(options);                      ((WebDriver)driver).RemoveVirtualAuthenticator(virtualAuthenticatorId);                      // Since the authenticator was removed, any operation using it will throw an error                 Assert.ThrowsException<InvalidOperationException>(() => ((WebDriver)driver).GetCredentials());             }                  [TestMethod]             public void ShouldBeAbleToCreateAndAddResidentialKey()             {                 VirtualAuthenticatorOptions options = new VirtualAuthenticatorOptions()                     .SetProtocol(Protocol.CTAP2)                     .SetHasResidentKey(true)                     .SetHasUserVerification(true)                     .SetIsUserVerified(true);                      ((WebDriver)driver).AddVirtualAuthenticator(options);                      byte[] credentialId = { 1, 2, 3, 4 };                 byte[] userHandle = { 1 };                      Credential residentCredential = Credential.CreateResidentCredential(                   credentialId, "localhost", base64EncodedPK, userHandle, 0);                      ((WebDriver)driver).AddCredential(residentCredential);                      List<Credential> credentialList = ((WebDriver)driver).GetCredentials();                 Assert.AreEqual(1, credentialList.Count);                      Credential credential = credentialList[0];                 CollectionAssert.AreEqual(credentialId, credential.Id);             }                  [TestMethod]             public void ShouldNotAddResidentCredentialWhenAuthenticatorUsesU2FProtocol()             {                 VirtualAuthenticatorOptions options = new VirtualAuthenticatorOptions()                     .SetProtocol(VirtualAuthenticatorOptions.Protocol.U2F)                     .SetHasResidentKey(true);                      ((WebDriver)driver).AddVirtualAuthenticator(options);                      byte[] credentialId = { 1, 2, 3, 4 };                 byte[] userHandle = { 1 };                      Credential credential = Credential.CreateResidentCredential(                   credentialId, "localhost", base64EncodedEC256PK, userHandle, 0);                      Assert.ThrowsException<WebDriverArgumentException>(() => ((WebDriver)driver).AddCredential(credential));             }                  [TestMethod]             public void ShouldBeAbleToCreateAndAddNonResidentKey()             {                 VirtualAuthenticatorOptions options = new VirtualAuthenticatorOptions()                     .SetProtocol(VirtualAuthenticatorOptions.Protocol.U2F)                     .SetHasResidentKey(false);                      ((WebDriver)driver).AddVirtualAuthenticator(options);                      byte[] credentialId = { 1, 2, 3, 4 };                      Credential nonResidentCredential = Credential.CreateNonResidentCredential(                   credentialId, "localhost", base64EncodedEC256PK, 0);                      ((WebDriver)driver).AddCredential(nonResidentCredential);                      List<Credential> credentialList = ((WebDriver)driver).GetCredentials();                 Assert.AreEqual(1, credentialList.Count);                      Credential credential = credentialList[0];                 CollectionAssert.AreEqual(credentialId, nonResidentCredential.Id);             }                  [TestMethod]             public void ShouldBeAbleToGetCredential()             {                 VirtualAuthenticatorOptions options = new VirtualAuthenticatorOptions()                     .SetProtocol(Protocol.CTAP2)                     .SetHasResidentKey(true)                     .SetHasUserVerification(true)                     .SetIsUserVerified(true);                      ((WebDriver)driver).AddVirtualAuthenticator(options);                      byte[] credentialId = { 1, 2, 3, 4 };                 byte[] userHandle = { 1 };                      Credential residentCredential = Credential.CreateResidentCredential(                   credentialId, "localhost", base64EncodedPK, userHandle, 0);                      ((WebDriver)driver).AddCredential(residentCredential);                      List<Credential> credentialList = ((WebDriver)driver).GetCredentials();                 Assert.AreEqual(1, credentialList.Count);                      Credential credential = credentialList[0];                 CollectionAssert.AreEqual(credentialId, residentCredential.Id);                 Assert.AreEqual(base64EncodedPK, credential.PrivateKey);             }                  [TestMethod]             public void ShouldBeAbleToRemoveCredential()             {                 ((WebDriver)driver).AddVirtualAuthenticator(new VirtualAuthenticatorOptions());                      byte[] credentialId = { 1, 2, 3, 4 };                      Credential nonResidentCredential = Credential.CreateNonResidentCredential(                   credentialId, "localhost", base64EncodedEC256PK, 0);                      ((WebDriver)driver).AddCredential(nonResidentCredential);                      ((WebDriver)driver).RemoveCredential(credentialId);                      Assert.AreEqual(0, ((WebDriver)driver).GetCredentials().Count);             }                       [TestMethod]             public void ShouldBeAbleToRemoveAllCredentias()             {                 ((WebDriver)driver).AddVirtualAuthenticator(new VirtualAuthenticatorOptions());                      byte[] credentialId = { 1, 2, 3, 4 };                      Credential nonResidentCredential = Credential.CreateNonResidentCredential(                   credentialId, "localhost", base64EncodedEC256PK, 0);                      ((WebDriver)driver).AddCredential(nonResidentCredential);                      ((WebDriver)driver).RemoveAllCredentials();                      Assert.AreEqual(0, ((WebDriver)driver).GetCredentials().Count);             }                  [TestMethod]             public void ShouldBeSetVerifiedOption()             {                 VirtualAuthenticatorOptions options = new VirtualAuthenticatorOptions()                     .SetIsUserVerified(true);                      Assert.IsTrue((bool)options.ToDictionary()["isUserVerified"]);             }         }     }

[Add Example](https://www.selenium.dev/documentation/about/contributing/#creating-examples)                   # parameters for Non Resident Credential         credential_id = bytearray({1, 2, 3, 4})         rp_id = "localhost"         privatekey = urlsafe_b64decode(BASE64__ENCODED_PK)         sign_count = 0              # create a non resident credential using above parameters         credential = Credential.create_non_resident_credential(credential_id, rp_id, privatekey, sign_count)

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/python/tests/interactions/test_virtual_authenticator.py#L140-L147)

##### examples/python/tests/interactions/test\_virtual\_authenticator.py

Copy  Close               import pytest     from base64 import urlsafe_b64decode, urlsafe_b64encode          from selenium.common.exceptions import InvalidArgumentException     from selenium.webdriver.chrome.webdriver import WebDriver     from selenium.webdriver.common.virtual_authenticator import (         Credential,         VirtualAuthenticatorOptions,     )               BASE64__ENCODED_PK = '''     MIIEvAIBADANBgkqhkiG9w0BAQEFAASCBKYwggSiAgEAAoIBAQDbBOu5Lhs4vpowbCnmCyLUpIE7JM9sm9QXzye2G+jr+Kr     MsinWohEce47BFPJlTaDzHSvOW2eeunBO89ZcvvVc8RLz4qyQ8rO98xS1jtgqi1NcBPETDrtzthODu/gd0sjB2Tk3TLuBGV     oPXt54a+Oo4JbBJ6h3s0+5eAfGplCbSNq6hN3Jh9YOTw5ZA6GCEy5l8zBaOgjXytd2v2OdSVoEDNiNQRkjJd2rmS2oi9AyQ     FR3B7BrPSiDlCcITZFOWgLF5C31Wp/PSHwQhlnh7/6YhnE2y9tzsUvzx0wJXrBADW13+oMxrneDK3WGbxTNYgIi1PvSqXlq     GjHtCK+R2QkXAgMBAAECggEAVc6bu7VAnP6v0gDOeX4razv4FX/adCao9ZsHZ+WPX8PQxtmWYqykH5CY4TSfsuizAgyPuQ0     +j4Vjssr9VODLqFoanspT6YXsvaKanncUYbasNgUJnfnLnw3an2XpU2XdmXTNYckCPRX9nsAAURWT3/n9ljc/XYY22ecYxM     8sDWnHu2uKZ1B7M3X60bQYL5T/lVXkKdD6xgSNLeP4AkRx0H4egaop68hoW8FIwmDPVWYVAvo8etzWCtibRXz5FcNld9MgD     /Ai7ycKy4Q1KhX5GBFI79MVVaHkSQfxPHpr7/XcmpQOEAr+BMPon4s4vnKqAGdGB3j/E3d/+4F2swykoQKBgQD8hCsp6FIQ     5umJlk9/j/nGsMl85LgLaNVYpWlPRKPc54YNumtvj5vx1BG+zMbT7qIE3nmUPTCHP7qb5ERZG4CdMCS6S64/qzZEqijLCqe     pwj6j4fV5SyPWEcpxf6ehNdmcfgzVB3Wolfwh1ydhx/96L1jHJcTKchdJJzlfTvq8wwKBgQDeCnKws1t5GapfE1rmC/h4ol     L2qZTth9oQmbrXYohVnoqNFslDa43ePZwL9Jmd9kYb0axOTNMmyrP0NTj41uCfgDS0cJnNTc63ojKjegxHIyYDKRZNVUR/d     xAYB/vPfBYZUS7M89pO6LLsHhzS3qpu3/hppo/Uc/AM/r8PSflNHQKBgDnWgBh6OQncChPUlOLv9FMZPR1ZOfqLCYrjYEqi     uzGm6iKM13zXFO4AGAxu1P/IAd5BovFcTpg79Z8tWqZaUUwvscnl+cRlj+mMXAmdqCeO8VASOmqM1ml667axeZDIR867ZG8     K5V029Wg+4qtX5uFypNAAi6GfHkxIKrD04yOHAoGACdh4wXESi0oiDdkz3KOHPwIjn6BhZC7z8mx+pnJODU3cYukxv3WTct     lUhAsyjJiQ/0bK1yX87ulqFVgO0Knmh+wNajrb9wiONAJTMICG7tiWJOm7fW5cfTJwWkBwYADmkfTRmHDvqzQSSvoC2S7aa     9QulbC3C/qgGFNrcWgcT9kCgYAZTa1P9bFCDU7hJc2mHwJwAW7/FQKEJg8SL33KINpLwcR8fqaYOdAHWWz636osVEqosRrH     zJOGpf9x2RSWzQJ+dq8+6fACgfFZOVpN644+sAHfNPAI/gnNKU5OfUv+eav8fBnzlf1A3y3GIkyMyzFN3DE7e0n/lyqxE4H     BYGpI8g==     '''               @pytest.fixture(scope="module", autouse=True)     def driver():         yield WebDriver()               def test_virtual_authenticator_options():         options = VirtualAuthenticatorOptions()         options.is_user_verified = True         options.has_user_verification = True         options.is_user_consenting = True         options.transport = VirtualAuthenticatorOptions.Transport.USB         options.protocol = VirtualAuthenticatorOptions.Protocol.U2F         options.has_resident_key = False              assert len(options.to_dict()) == 6               def test_add_authenticator(driver):         # Create virtual authenticator options         options = VirtualAuthenticatorOptions()         options.protocol = VirtualAuthenticatorOptions.Protocol.U2F         options.has_resident_key = False              # Register a virtual authenticator         driver.add_virtual_authenticator(options)              # Get list of credentials         credential_list = driver.get_credentials()              assert len(credential_list) == 0               def test_remove_authenticator(driver):         # Create default virtual authenticator option         options = VirtualAuthenticatorOptions()              # Register a virtual authenticator         driver.add_virtual_authenticator(options)              # Remove virtual authenticator         driver.remove_virtual_authenticator()         assert driver.virtual_authenticator_id is None               def test_create_and_add_resident_key(driver):         # Create virtual authenticator options         options = VirtualAuthenticatorOptions()         options.protocol = VirtualAuthenticatorOptions.Protocol.CTAP2         options.has_resident_key = True         options.has_user_verification = True         options.is_user_verified = True              # Register a virtual authenticator         driver.add_virtual_authenticator(options)              # parameters for Resident Credential         credential_id = bytearray({1, 2, 3, 4})         rp_id = "localhost"         user_handle = bytearray({1})         privatekey = urlsafe_b64decode(BASE64__ENCODED_PK)         sign_count = 0              # create a resident credential using above parameters         resident_credential = Credential.create_resident_credential(credential_id, rp_id, user_handle, privatekey, sign_count)              # add the credential created to virtual authenticator         driver.add_credential(resident_credential)              # get list of all the registered credentials          credential_list = driver.get_credentials()         assert len(credential_list) == 1               def test_add_resident_credential_not_supported_when_authenticator_uses_u2f_protocol(driver):         # Create virtual authenticator options         options = VirtualAuthenticatorOptions()         options.protocol = VirtualAuthenticatorOptions.Protocol.U2F         options.has_resident_key = False              # Register a virtual authenticator         driver.add_virtual_authenticator(options)              # parameters for Resident Credential         credential_id = bytearray({1, 2, 3, 4})         rp_id = "localhost"         user_handle = bytearray({1})         privatekey = urlsafe_b64decode(BASE64__ENCODED_PK)         sign_count = 0              # create a  resident credential using above parameters         credential = Credential.create_resident_credential(credential_id, rp_id, user_handle, privatekey, sign_count)              # Expect InvalidArgumentException          with pytest.raises(InvalidArgumentException):             driver.add_credential(credential)               def test_create_and_add_non_resident_key(driver):         # Create virtual authenticator options         options = VirtualAuthenticatorOptions()         options.protocol = VirtualAuthenticatorOptions.Protocol.U2F         options.has_resident_key = False              # Register a virtual authenticator         driver.add_virtual_authenticator(options)              # parameters for Non Resident Credential         credential_id = bytearray({1, 2, 3, 4})         rp_id = "localhost"         privatekey = urlsafe_b64decode(BASE64__ENCODED_PK)         sign_count = 0              # create a non resident credential using above parameters         credential = Credential.create_non_resident_credential(credential_id, rp_id, privatekey, sign_count)              # add the credential created to virtual authenticator         driver.add_credential(credential)                  # get list of all the registered credentials          credential_list = driver.get_credentials()         assert len(credential_list) == 1                    def test_get_credential(driver):         # Create virtual authenticator options         options = VirtualAuthenticatorOptions()         options.protocol = VirtualAuthenticatorOptions.Protocol.CTAP2         options.has_resident_key = True         options.has_user_verfied = True         options.is_user_verified = True              # Register a virtual authenticator         driver.add_virtual_authenticator(options)              # parameters for Resident Credential         credential_id = bytearray({1, 2, 3, 4})         rp_id = "localhost"         user_handle = bytearray({1})         privatekey = urlsafe_b64decode(BASE64__ENCODED_PK)         sign_count = 0              # create a resident credential using above parameters         credential = Credential.create_resident_credential(credential_id, rp_id, user_handle, privatekey, sign_count)                  # add the credential created to virtual authenticator         driver.add_credential(credential)              # get list of all the registered credentials          credential_list = driver.get_credentials()              assert len(credential_list) == 1         assert credential_list[0].id == urlsafe_b64encode(credential_id).decode()               def test_remove_credential(driver):         # Create default virtual authenticator options         options = VirtualAuthenticatorOptions()              # Register a virtual authenticator         driver.add_virtual_authenticator(options)              # parameters for Non Resident Credential         credential_id = bytearray({1, 2, 3, 4})         rp_id = "localhost"         privatekey = urlsafe_b64decode(BASE64__ENCODED_PK)         sign_count = 0              # create a non resident credential using above parameters         credential = Credential.create_non_resident_credential(credential_id, rp_id, privatekey, sign_count)              # add the credential created to virtual authenticator         driver.add_credential(credential)              # remove the credential created from virtual authenticator         driver.remove_credential(credential.id)              # credential can also be removed using Byte Array         # driver.remove_credential(credential_id)               assert len(driver.get_credentials()) == 0               def test_remove_all_credentials(driver):         # Create default virtual authenticator options         options = VirtualAuthenticatorOptions()         options.has_resident_key = True              # Register a virtual authenticator         driver.add_virtual_authenticator(options)              # parameters for Resident Credential         credential_id = bytearray({1, 2, 3, 4})         rp_id = "localhost"         user_handle = bytearray({1})         privatekey = urlsafe_b64decode(BASE64__ENCODED_PK)         sign_count = 0              # create a resident credential using above parameters         resident_credential = Credential.create_resident_credential(credential_id, rp_id, user_handle, privatekey, sign_count)                  # add the credential created to virtual authenticator         driver.add_credential(resident_credential)              # remove all credentials in virtual authenticator         driver.remove_all_credentials()              assert len(driver.get_credentials()) == 0               def test_set_user_verified():         # Create virtual authenticator options         options = VirtualAuthenticatorOptions()         options.is_user_verified = True              assert options.to_dict().get("isUserVerified") is True                   let nonResidentCredential = new Credential().createNonResidentCredential(           new Uint8Array([1, 2, 3, 4]),           'localhost',           Buffer.from(base64EncodedPK, 'base64').toString('binary'),           0);

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/javascript/test/virtual_authenticator/virtualAuthenticator.spec.js#L136-L140)

##### examples/javascript/test/virtual\_authenticator/virtualAuthenticator.spec.js

Copy  Close               const { Builder} = require("selenium-webdriver");     const { Credential, VirtualAuthenticatorOptions, Transport, Protocol } = require("selenium-webdriver/lib/virtual_authenticator");     const assert = require('assert')     const { InvalidArgumentError } = require("selenium-webdriver/lib/error");               describe('Virtual authenticator', function() {       const BASE64_ENCODED_PK =         "MIIEvAIBADANBgkqhkiG9w0BAQEFAASCBKYwggSiAgEAAoIBAQDbBOu5Lhs4vpowbCnmCyLUpIE7JM9sm9QXzye2G+jr+Kr" +         "MsinWohEce47BFPJlTaDzHSvOW2eeunBO89ZcvvVc8RLz4qyQ8rO98xS1jtgqi1NcBPETDrtzthODu/gd0sjB2Tk3TLuBGV" +         "oPXt54a+Oo4JbBJ6h3s0+5eAfGplCbSNq6hN3Jh9YOTw5ZA6GCEy5l8zBaOgjXytd2v2OdSVoEDNiNQRkjJd2rmS2oi9AyQ" +         "FR3B7BrPSiDlCcITZFOWgLF5C31Wp/PSHwQhlnh7/6YhnE2y9tzsUvzx0wJXrBADW13+oMxrneDK3WGbxTNYgIi1PvSqXlq" +         "GjHtCK+R2QkXAgMBAAECggEAVc6bu7VAnP6v0gDOeX4razv4FX/adCao9ZsHZ+WPX8PQxtmWYqykH5CY4TSfsuizAgyPuQ0" +         "+j4Vjssr9VODLqFoanspT6YXsvaKanncUYbasNgUJnfnLnw3an2XpU2XdmXTNYckCPRX9nsAAURWT3/n9ljc/XYY22ecYxM" +         "8sDWnHu2uKZ1B7M3X60bQYL5T/lVXkKdD6xgSNLeP4AkRx0H4egaop68hoW8FIwmDPVWYVAvo8etzWCtibRXz5FcNld9MgD" +         "/Ai7ycKy4Q1KhX5GBFI79MVVaHkSQfxPHpr7/XcmpQOEAr+BMPon4s4vnKqAGdGB3j/E3d/+4F2swykoQKBgQD8hCsp6FIQ" +         "5umJlk9/j/nGsMl85LgLaNVYpWlPRKPc54YNumtvj5vx1BG+zMbT7qIE3nmUPTCHP7qb5ERZG4CdMCS6S64/qzZEqijLCqe" +         "pwj6j4fV5SyPWEcpxf6ehNdmcfgzVB3Wolfwh1ydhx/96L1jHJcTKchdJJzlfTvq8wwKBgQDeCnKws1t5GapfE1rmC/h4ol" +         "L2qZTth9oQmbrXYohVnoqNFslDa43ePZwL9Jmd9kYb0axOTNMmyrP0NTj41uCfgDS0cJnNTc63ojKjegxHIyYDKRZNVUR/d" +         "xAYB/vPfBYZUS7M89pO6LLsHhzS3qpu3/hppo/Uc/AM/r8PSflNHQKBgDnWgBh6OQncChPUlOLv9FMZPR1ZOfqLCYrjYEqi" +         "uzGm6iKM13zXFO4AGAxu1P/IAd5BovFcTpg79Z8tWqZaUUwvscnl+cRlj+mMXAmdqCeO8VASOmqM1ml667axeZDIR867ZG8" +         "K5V029Wg+4qtX5uFypNAAi6GfHkxIKrD04yOHAoGACdh4wXESi0oiDdkz3KOHPwIjn6BhZC7z8mx+pnJODU3cYukxv3WTct" +         "lUhAsyjJiQ/0bK1yX87ulqFVgO0Knmh+wNajrb9wiONAJTMICG7tiWJOm7fW5cfTJwWkBwYADmkfTRmHDvqzQSSvoC2S7aa" +         "9QulbC3C/qgGFNrcWgcT9kCgYAZTa1P9bFCDU7hJc2mHwJwAW7/FQKEJg8SL33KINpLwcR8fqaYOdAHWWz636osVEqosRrH" +         "zJOGpf9x2RSWzQJ+dq8+6fACgfFZOVpN644+sAHfNPAI/gnNKU5OfUv+eav8fBnzlf1A3y3GIkyMyzFN3DE7e0n/lyqxE4H" +         "BYGpI8g==";            const base64EncodedPK =         "MIGHAgEAMBMGByqGSM49AgEGCCqGSM49AwEHBG0wawIBAQQg8_zMDQDYAxlU-Q" +         "hk1Dwkf0v18GZca1DMF3SaJ9HPdmShRANCAASNYX5lyVCOZLzFZzrIKmeZ2jwU" +         "RmgsJYxGP__fWN_S-j5sN4tT15XEpN_7QZnt14YvI6uvAgO0uJEboFaZlOEB";            let options;       let driver;            before(async function() {         options = new VirtualAuthenticatorOptions();         driver = await new Builder().forBrowser('chrome').build();       });            after(async() => await driver.quit());            function arraysEqual(array1, array2) {         return (array1.length === array2.length &&           array1.every((item) => array2.includes(item)) &&           array2.every((item) => array1.includes(item)));       }            it('Register a virtual authenticator', async function() {         options.setProtocol(Protocol['U2F']);         options.setHasResidentKey(false);              // Register a virtual authenticator         await driver.addVirtualAuthenticator(options);         let credentialList = await driver.getCredentials();              assert.equal(0, credentialList.length);       });            it('Remove authenticator', async function() {         await driver.addVirtualAuthenticator(options);         await driver.removeVirtualAuthenticator();              // Since the authenticator was removed, any operation using it will throw an error         try {           await driver.getCredentials()         }         catch (e) {           if (e instanceof InvalidArgumentError) {             assert(true)           }           else {             assert(false)           }         }       });            it('Createa and add residential key', async function() {         options.setProtocol(Protocol['CTAP2']);         options.setHasResidentKey(true);         options.setHasUserVerification(true);         options.setIsUserVerified(true);              await driver.addVirtualAuthenticator(options);              let residentCredential = new Credential().createResidentCredential(           new Uint8Array([1, 2, 3, 4]),           'localhost',           new Uint8Array([1]),           Buffer.from(BASE64_ENCODED_PK, 'base64').toString('binary'),           0);              await driver.addCredential(residentCredential);         let credentialList = await driver.getCredentials();         assert.equal(1, credentialList.length);              let credential_id = credentialList[0].id();         let test_id = new Uint8Array([1, 2, 3, 4]);              assert(arraysEqual(credential_id, test_id));       });            it('Add resident credential not supported when authenticator uses U2F protocol', async function() {         options.setProtocol(Protocol['U2F']);         options.setHasResidentKey(true);              await driver.addVirtualAuthenticator(options);              let credential = new Credential().createResidentCredential(           new Uint8Array([1, 2, 3, 4]),           'localhost',           new Uint8Array([1]),           Buffer.from(base64EncodedPK, 'base64').toString('binary'),           0);              try {           await driver.addCredential(credential)         }         catch (e) {           if (e instanceof InvalidArgumentError) {             assert(true)           }           else {             assert(false)           }         }       });            it('Create and add non residential key', async function() {         options.setProtocol(Protocol['U2F']);         options.setHasResidentKey(false);              await driver.addVirtualAuthenticator(options);              let nonResidentCredential = new Credential().createNonResidentCredential(           new Uint8Array([1, 2, 3, 4]),           'localhost',           Buffer.from(base64EncodedPK, 'base64').toString('binary'),           0);              await driver.addCredential(nonResidentCredential);              let credentialList = await driver.getCredentials();         assert.equal(1, credentialList.length);              let credential_id = credentialList[0].id();         let test_id = new Uint8Array([1, 2, 3, 4]);              assert(arraysEqual(credential_id, test_id));       });            it('Get credential', async function() {         options.setProtocol(Protocol['CTAP2']);         options.setHasResidentKey(true);         options.setHasUserVerification(true);         options.setIsUserVerified(true);              await driver.addVirtualAuthenticator(options);              let residentCredential = new Credential().createResidentCredential(           new Uint8Array([1, 2, 3, 4]),           'localhost',           new Uint8Array([1]),           Buffer.from(BASE64_ENCODED_PK, 'base64').toString('binary'),           0);              await driver.addCredential(residentCredential);              let credentialList = await driver.getCredentials();         assert.equal(1, credentialList.length);              let credential_id = credentialList[0].id();         let test_id = new Uint8Array([1, 2, 3, 4]);              assert(arraysEqual(credential_id, test_id));         assert.equal(BASE64_ENCODED_PK, Buffer.from(credentialList[0].privateKey(), 'binary').toString('base64'));       });            it('Remove all credentials', async function() {         await driver.addVirtualAuthenticator(options);              let nonResidentCredential = new Credential().createNonResidentCredential(           new Uint8Array([1, 2, 3, 4]),           'localhost',           Buffer.from(BASE64_ENCODED_PK, 'base64').toString('binary'),           0);              await driver.addCredential(nonResidentCredential);         await driver.removeAllCredentials();              let credentialList = await driver.getCredentials();         assert.equal(0, credentialList.length);       });            it('Set is user verified', async function() {         options.setIsUserVerified(true);         assert.equal(options.getIsUserVerified(), true);       });     });

[Add Example](https://www.selenium.dev/documentation/about/contributing/#creating-examples)

## Add Credential

Registers the credential with the authenticator.

  * Java   * CSharp   * Ruby   * Python   * JavaScript   * Kotlin

                @Disabled("A fix was implemented and will be available in Selenium 4.34.")       public void testCreateAndAddNonResidentialKey() {         VirtualAuthenticatorOptions options = new VirtualAuthenticatorOptions()           .setProtocol(VirtualAuthenticatorOptions.Protocol.U2F)           .setHasResidentKey(false);              VirtualAuthenticator authenticator = ((HasVirtualAuthenticator) driver).addVirtualAuthenticator(options);              byte[] credentialId = {1, 2, 3, 4};         Credential nonResidentCredential = Credential.createNonResidentCredential(

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/java/src/test/java/dev/selenium/interactions/VirtualAuthenticatorTest.java#L137-L146)

##### examples/java/src/test/java/dev/selenium/interactions/VirtualAuthenticatorTest.java

Copy  Close               package dev.selenium.interactions;          import dev.selenium.BaseChromeTest;     import java.security.spec.PKCS8EncodedKeySpec;     import java.util.Base64;     import java.util.List;     import org.junit.jupiter.api.Assertions;     import org.junit.jupiter.api.Disabled;     import org.junit.jupiter.api.Test;     import org.openqa.selenium.InvalidArgumentException;     import org.openqa.selenium.virtualauthenticator.Credential;     import org.openqa.selenium.virtualauthenticator.HasVirtualAuthenticator;     import org.openqa.selenium.virtualauthenticator.VirtualAuthenticator;     import org.openqa.selenium.virtualauthenticator.VirtualAuthenticatorOptions;          public class VirtualAuthenticatorTest extends BaseChromeTest {            /**        * A pkcs#8 encoded encrypted RSA private key as a base64url string.        */       private final static String         base64EncodedRsaPK =         "MIIEvAIBADANBgkqhkiG9w0BAQEFAASCBKYwggSiAgEAAoIBAQDbBOu5Lhs4vpowbCnmCyLUpIE7JM9sm9QXzye2G+jr+Kr"         + "MsinWohEce47BFPJlTaDzHSvOW2eeunBO89ZcvvVc8RLz4qyQ8rO98xS1jtgqi1NcBPETDrtzthODu/gd0sjB2Tk3TLuB"         + "GVoPXt54a+Oo4JbBJ6h3s0+5eAfGplCbSNq6hN3Jh9YOTw5ZA6GCEy5l8zBaOgjXytd2v2OdSVoEDNiNQRkjJd2rmS2oi"         + "9AyQFR3B7BrPSiDlCcITZFOWgLF5C31Wp/PSHwQhlnh7/6YhnE2y9tzsUvzx0wJXrBADW13+oMxrneDK3WGbxTNYgIi1P"         + "vSqXlqGjHtCK+R2QkXAgMBAAECggEAVc6bu7VAnP6v0gDOeX4razv4FX/adCao9ZsHZ+WPX8PQxtmWYqykH5CY4TSfsui"         + "zAgyPuQ0+j4Vjssr9VODLqFoanspT6YXsvaKanncUYbasNgUJnfnLnw3an2XpU2XdmXTNYckCPRX9nsAAURWT3/n9ljc/"         + "XYY22ecYxM8sDWnHu2uKZ1B7M3X60bQYL5T/lVXkKdD6xgSNLeP4AkRx0H4egaop68hoW8FIwmDPVWYVAvo8etzWCtib"         + "RXz5FcNld9MgD/Ai7ycKy4Q1KhX5GBFI79MVVaHkSQfxPHpr7/XcmpQOEAr+BMPon4s4vnKqAGdGB3j/E3d/+4F2swyko"         + "QKBgQD8hCsp6FIQ5umJlk9/j/nGsMl85LgLaNVYpWlPRKPc54YNumtvj5vx1BG+zMbT7qIE3nmUPTCHP7qb5ERZG4CdMC"         + "S6S64/qzZEqijLCqepwj6j4fV5SyPWEcpxf6ehNdmcfgzVB3Wolfwh1ydhx/96L1jHJcTKchdJJzlfTvq8wwKBgQDeCnK"         + "ws1t5GapfE1rmC/h4olL2qZTth9oQmbrXYohVnoqNFslDa43ePZwL9Jmd9kYb0axOTNMmyrP0NTj41uCfgDS0cJnNTc63"         + "ojKjegxHIyYDKRZNVUR/dxAYB/vPfBYZUS7M89pO6LLsHhzS3qpu3/hppo/Uc/AM /r8PSflNHQKBgDnWgBh6OQncChPUl"         + "OLv9FMZPR1ZOfqLCYrjYEqiuzGm6iKM13zXFO4AGAxu1P/IAd5BovFcTpg79Z8tWqZaUUwvscnl+cRlj+mMXAmdqCeO8V"         + "ASOmqM1ml667axeZDIR867ZG8K5V029Wg+4qtX5uFypNAAi6GfHkxIKrD04yOHAoGACdh4wXESi0oiDdkz3KOHPwIjn6B"         + "hZC7z8mx+pnJODU3cYukxv3WTctlUhAsyjJiQ/0bK1yX87ulqFVgO0Knmh+wNajrb9wiONAJTMICG7tiWJOm7fW5cfTJw"         + "WkBwYADmkfTRmHDvqzQSSvoC2S7aa9QulbC3C/qgGFNrcWgcT9kCgYAZTa1P9bFCDU7hJc2mHwJwAW7/FQKEJg8SL33KI"         + "NpLwcR8fqaYOdAHWWz636osVEqosRrHzJOGpf9x2RSWzQJ+dq8+6fACgfFZOVpN644+sAHfNPAI/gnNKU5OfUv+eav8fB"         + "nzlf1A3y3GIkyMyzFN3DE7e0n/lyqxE4HBYGpI8g==";            private final static PKCS8EncodedKeySpec rsaPrivateKey =         new PKCS8EncodedKeySpec(Base64.getMimeDecoder().decode(base64EncodedRsaPK));            // A pkcs#8 encoded unencrypted EC256 private key as a base64url string.       String base64EncodedEC256PK =         "MIGHAgEAMBMGByqGSM49AgEGCCqGSM49AwEHBG0wawIBAQQg8_zMDQDYAxlU-Q"         + "hk1Dwkf0v18GZca1DMF3SaJ9HPdmShRANCAASNYX5lyVCOZLzFZzrIKmeZ2jwU"         + "RmgsJYxGP__fWN_S-j5sN4tT15XEpN_7QZnt14YvI6uvAgO0uJEboFaZlOEB";            PKCS8EncodedKeySpec ec256PrivateKey =         new PKCS8EncodedKeySpec(Base64.getUrlDecoder().decode(base64EncodedEC256PK));            @Test       public void testVirtualOptions() {         VirtualAuthenticatorOptions options = new VirtualAuthenticatorOptions()           .setIsUserVerified(true)           .setHasUserVerification(true)           .setIsUserConsenting(true)           .setTransport(VirtualAuthenticatorOptions.Transport.USB)           .setProtocol(VirtualAuthenticatorOptions.Protocol.U2F)           .setHasResidentKey(false);              Assertions.assertEquals(6, options.toMap().size());       }            @Test       public void testCreateAuthenticator() {         VirtualAuthenticatorOptions options = new VirtualAuthenticatorOptions()           .setProtocol(VirtualAuthenticatorOptions.Protocol.U2F)           .setHasResidentKey(false);              VirtualAuthenticator authenticator =           ((HasVirtualAuthenticator) driver).addVirtualAuthenticator(options);              List<Credential> credentialList = authenticator.getCredentials();              Assertions.assertEquals(0, credentialList.size());       }            @Test       public void testRemoveAuthenticator() {         VirtualAuthenticatorOptions options = new VirtualAuthenticatorOptions();         VirtualAuthenticator authenticator =           ((HasVirtualAuthenticator) driver).addVirtualAuthenticator(options);              ((HasVirtualAuthenticator) driver).removeVirtualAuthenticator(authenticator);              Assertions.assertThrows(InvalidArgumentException.class, authenticator::getCredentials);       }            @Test       public void testCreateAndAddResidentialKey() {         VirtualAuthenticatorOptions options = new VirtualAuthenticatorOptions()           .setProtocol(VirtualAuthenticatorOptions.Protocol.CTAP2)           .setHasResidentKey(true)           .setHasUserVerification(true)           .setIsUserVerified(true);         VirtualAuthenticator authenticator = ((HasVirtualAuthenticator) driver).addVirtualAuthenticator(options);              byte[] credentialId = {1, 2, 3, 4};         byte[] userHandle = {1};         Credential residentCredential = Credential.createResidentCredential(           credentialId, "localhost", rsaPrivateKey, userHandle, /*signCount=*/0);              authenticator.addCredential(residentCredential);              List<Credential> credentialList = authenticator.getCredentials();         Assertions.assertEquals(1, credentialList.size());              Credential credential = credentialList.get(0);         Assertions.assertArrayEquals(credentialId, credential.getId());       }            @Test       public void testAddResidentCredentialNotSupportedWhenAuthenticatorUsesU2FProtocol() {         VirtualAuthenticatorOptions options = new VirtualAuthenticatorOptions()           .setProtocol(VirtualAuthenticatorOptions.Protocol.U2F)           .setHasResidentKey(true);              VirtualAuthenticator authenticator = ((HasVirtualAuthenticator) driver).addVirtualAuthenticator(options);              PKCS8EncodedKeySpec privateKey =           new PKCS8EncodedKeySpec(Base64.getUrlDecoder().decode(base64EncodedEC256PK));              byte[] credentialId = {1, 2, 3, 4};         byte[] userHandle = {1};         Credential credential = Credential.createResidentCredential(           credentialId, "localhost", privateKey, userHandle, /*signCount=*/0);              Assertions.assertThrows(InvalidArgumentException.class,                                 () -> authenticator.addCredential(credential));       }                 @Test       @Disabled("A fix was implemented and will be available in Selenium 4.34.")       public void testCreateAndAddNonResidentialKey() {         VirtualAuthenticatorOptions options = new VirtualAuthenticatorOptions()           .setProtocol(VirtualAuthenticatorOptions.Protocol.U2F)           .setHasResidentKey(false);              VirtualAuthenticator authenticator = ((HasVirtualAuthenticator) driver).addVirtualAuthenticator(options);              byte[] credentialId = {1, 2, 3, 4};         Credential nonResidentCredential = Credential.createNonResidentCredential(           credentialId, "localhost", ec256PrivateKey, /*signCount=*/0);         authenticator.addCredential(nonResidentCredential);              List<Credential> credentialList = authenticator.getCredentials();         Assertions.assertEquals(1, credentialList.size());              Credential credential = credentialList.get(0);         Assertions.assertArrayEquals(credentialId, credential.getId());       }            @Test       public void testGetCredential() {         VirtualAuthenticatorOptions options = new VirtualAuthenticatorOptions()           .setProtocol(VirtualAuthenticatorOptions.Protocol.CTAP2)           .setHasResidentKey(true)           .setHasUserVerification(true)           .setIsUserVerified(true);         VirtualAuthenticator authenticator = ((HasVirtualAuthenticator) driver).addVirtualAuthenticator(options);              byte[] credentialId = {1, 2, 3, 4};         byte[] userHandle = {1};         Credential residentCredential = Credential.createResidentCredential(           credentialId, "localhost", rsaPrivateKey, userHandle, /*signCount=*/0);              authenticator.addCredential(residentCredential);              List<Credential> credentialList = authenticator.getCredentials();         Assertions.assertEquals(1, credentialList.size());              Credential credential = credentialList.get(0);         Assertions.assertArrayEquals(credentialId, credential.getId());         Assertions.assertArrayEquals(rsaPrivateKey.getEncoded(), credential.getPrivateKey().getEncoded());       }            @Test       public void testRemoveCredential() {         VirtualAuthenticator authenticator =           ((HasVirtualAuthenticator) driver).addVirtualAuthenticator(new VirtualAuthenticatorOptions());              byte[] credentialId = {1, 2, 3, 4};         Credential credential = Credential.createNonResidentCredential(           credentialId, "localhost", rsaPrivateKey, 0);              authenticator.addCredential(credential);              authenticator.removeCredential(credentialId);         Assertions.assertEquals(0, authenticator.getCredentials().size());       }            @Test       public void testRemoveAllCredentials() {         VirtualAuthenticator authenticator =           ((HasVirtualAuthenticator) driver).addVirtualAuthenticator(new VirtualAuthenticatorOptions());              byte[] credentialId = {1, 2, 3, 4};         Credential residentCredential = Credential.createNonResidentCredential(           credentialId, "localhost", rsaPrivateKey, /*signCount=*/0);              authenticator.addCredential(residentCredential);              authenticator.removeAllCredentials();         Assertions.assertEquals(0, authenticator.getCredentials().size());       }            @Test       public void testSetUserVerified() {         VirtualAuthenticatorOptions options = new VirtualAuthenticatorOptions()           .setIsUserVerified(true);              Assertions.assertTrue((boolean) options.toMap().get("isUserVerified"));       }     }                                VirtualAuthenticatorOptions options = new VirtualAuthenticatorOptions()                     .SetProtocol(VirtualAuthenticatorOptions.Protocol.U2F)                     .SetHasResidentKey(false);                      ((WebDriver)driver).AddVirtualAuthenticator(options);                      byte[] credentialId = { 1, 2, 3, 4 };                      Credential nonResidentCredential = Credential.CreateNonResidentCredential(                   credentialId, "localhost", base64EncodedEC256PK, 0);                      ((WebDriver)driver).AddCredential(nonResidentCredential);

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/dotnet/SeleniumDocs/Interactions/VirtualAuthenticatorTest.cs#L139-150)

##### examples/dotnet/SeleniumDocs/Interactions/VirtualAuthenticatorTest.cs

Copy  Close               using Microsoft.VisualStudio.TestTools.UnitTesting;     using Microsoft.IdentityModel.Tokens;     using OpenQA.Selenium;     using OpenQA.Selenium.VirtualAuth;     using static OpenQA.Selenium.VirtualAuth.VirtualAuthenticatorOptions;     using System.Collections.Generic;     using System;          namespace SeleniumDocs.VirtualAuthentication     {         [TestClass]         public class VirtualAuthenticatorTest : BaseChromeTest         {             //A pkcs#8 encoded encrypted RSA private key as a base64 string.             private static string base64EncodedRSAPK =                     "MIIEvAIBADANBgkqhkiG9w0BAQEFAASCBKYwggSiAgEAAoIBAQDbBOu5Lhs4vpowbCnmCyLUpIE7JM9sm9QXzye2G+jr+Kr"                   + "MsinWohEce47BFPJlTaDzHSvOW2eeunBO89ZcvvVc8RLz4qyQ8rO98xS1jtgqi1NcBPETDrtzthODu/gd0sjB2Tk3TLuB"                   + "GVoPXt54a+Oo4JbBJ6h3s0+5eAfGplCbSNq6hN3Jh9YOTw5ZA6GCEy5l8zBaOgjXytd2v2OdSVoEDNiNQRkjJd2rmS2oi"                   + "9AyQFR3B7BrPSiDlCcITZFOWgLF5C31Wp/PSHwQhlnh7/6YhnE2y9tzsUvzx0wJXrBADW13+oMxrneDK3WGbxTNYgIi1P"                   + "vSqXlqGjHtCK+R2QkXAgMBAAECggEAVc6bu7VAnP6v0gDOeX4razv4FX/adCao9ZsHZ+WPX8PQxtmWYqykH5CY4TSfsui"                   + "zAgyPuQ0+j4Vjssr9VODLqFoanspT6YXsvaKanncUYbasNgUJnfnLnw3an2XpU2XdmXTNYckCPRX9nsAAURWT3/n9ljc/"                   + "XYY22ecYxM8sDWnHu2uKZ1B7M3X60bQYL5T/lVXkKdD6xgSNLeP4AkRx0H4egaop68hoW8FIwmDPVWYVAvo8etzWCtib"                   + "RXz5FcNld9MgD/Ai7ycKy4Q1KhX5GBFI79MVVaHkSQfxPHpr7/XcmpQOEAr+BMPon4s4vnKqAGdGB3j/E3d/+4F2swyko"                   + "QKBgQD8hCsp6FIQ5umJlk9/j/nGsMl85LgLaNVYpWlPRKPc54YNumtvj5vx1BG+zMbT7qIE3nmUPTCHP7qb5ERZG4CdMC"                   + "S6S64/qzZEqijLCqepwj6j4fV5SyPWEcpxf6ehNdmcfgzVB3Wolfwh1ydhx/96L1jHJcTKchdJJzlfTvq8wwKBgQDeCnK"                   + "ws1t5GapfE1rmC/h4olL2qZTth9oQmbrXYohVnoqNFslDa43ePZwL9Jmd9kYb0axOTNMmyrP0NTj41uCfgDS0cJnNTc63"                   + "ojKjegxHIyYDKRZNVUR/dxAYB/vPfBYZUS7M89pO6LLsHhzS3qpu3/hppo/Uc/AM /r8PSflNHQKBgDnWgBh6OQncChPUl"                   + "OLv9FMZPR1ZOfqLCYrjYEqiuzGm6iKM13zXFO4AGAxu1P/IAd5BovFcTpg79Z8tWqZaUUwvscnl+cRlj+mMXAmdqCeO8V"                   + "ASOmqM1ml667axeZDIR867ZG8K5V029Wg+4qtX5uFypNAAi6GfHkxIKrD04yOHAoGACdh4wXESi0oiDdkz3KOHPwIjn6B"                   + "hZC7z8mx+pnJODU3cYukxv3WTctlUhAsyjJiQ/0bK1yX87ulqFVgO0Knmh+wNajrb9wiONAJTMICG7tiWJOm7fW5cfTJw"                   + "WkBwYADmkfTRmHDvqzQSSvoC2S7aa9QulbC3C/qgGFNrcWgcT9kCgYAZTa1P9bFCDU7hJc2mHwJwAW7/FQKEJg8SL33KI"                   + "NpLwcR8fqaYOdAHWWz636osVEqosRrHzJOGpf9x2RSWzQJ+dq8+6fACgfFZOVpN644+sAHfNPAI/gnNKU5OfUv+eav8fB"                   + "nzlf1A3y3GIkyMyzFN3DE7e0n/lyqxE4HBYGpI8g==";                  private static byte[] bytes = System.Convert.FromBase64String(base64EncodedRSAPK);             private string base64EncodedPK = Base64UrlEncoder.Encode(bytes);                  // A pkcs#8 encoded unencrypted EC256 private key as a base64url string.             private string base64EncodedEC256PK =                   "MIGHAgEAMBMGByqGSM49AgEGCCqGSM49AwEHBG0wawIBAQQg8_zMDQDYAxlU-Q"                   + "hk1Dwkf0v18GZca1DMF3SaJ9HPdmShRANCAASNYX5lyVCOZLzFZzrIKmeZ2jwU"                   + "RmgsJYxGP__fWN_S-j5sN4tT15XEpN_7QZnt14YvI6uvAgO0uJEboFaZlOEB";                       [TestMethod]             public void VirtualOptionsShouldAllowSettingOptions()             {                 // Create virtual authenticator options                 VirtualAuthenticatorOptions options = new VirtualAuthenticatorOptions()                     .SetIsUserVerified(true)                     .SetHasUserVerification(true)                     .SetIsUserConsenting(true)                     .SetTransport(VirtualAuthenticatorOptions.Transport.USB)                     .SetProtocol(VirtualAuthenticatorOptions.Protocol.U2F)                     .SetHasResidentKey(false);                      Assert.AreEqual(6, options.ToDictionary().Count);             }                  [TestMethod]             public void ShouldBeAbleToCreateAuthenticator()             {                 // Create virtual authenticator options                 VirtualAuthenticatorOptions options = new VirtualAuthenticatorOptions()                     .SetProtocol(VirtualAuthenticatorOptions.Protocol.U2F)                     .SetHasResidentKey(false);                      // Register a virtual authenticator                 ((WebDriver)driver).AddVirtualAuthenticator(options);                      List<Credential> credentialList = ((WebDriver)driver).GetCredentials();                      Assert.AreEqual(0, credentialList.Count);             }                       [TestMethod]             public void ShouldBeAbleToRemoveAuthenticator()             {                 VirtualAuthenticatorOptions options = new VirtualAuthenticatorOptions()                     .SetProtocol(VirtualAuthenticatorOptions.Protocol.U2F)                     .SetHasResidentKey(false);                      String virtualAuthenticatorId = ((WebDriver)driver).AddVirtualAuthenticator(options);                      ((WebDriver)driver).RemoveVirtualAuthenticator(virtualAuthenticatorId);                      // Since the authenticator was removed, any operation using it will throw an error                 Assert.ThrowsException<InvalidOperationException>(() => ((WebDriver)driver).GetCredentials());             }                  [TestMethod]             public void ShouldBeAbleToCreateAndAddResidentialKey()             {                 VirtualAuthenticatorOptions options = new VirtualAuthenticatorOptions()                     .SetProtocol(Protocol.CTAP2)                     .SetHasResidentKey(true)                     .SetHasUserVerification(true)                     .SetIsUserVerified(true);                      ((WebDriver)driver).AddVirtualAuthenticator(options);                      byte[] credentialId = { 1, 2, 3, 4 };                 byte[] userHandle = { 1 };                      Credential residentCredential = Credential.CreateResidentCredential(                   credentialId, "localhost", base64EncodedPK, userHandle, 0);                      ((WebDriver)driver).AddCredential(residentCredential);                      List<Credential> credentialList = ((WebDriver)driver).GetCredentials();                 Assert.AreEqual(1, credentialList.Count);                      Credential credential = credentialList[0];                 CollectionAssert.AreEqual(credentialId, credential.Id);             }                  [TestMethod]             public void ShouldNotAddResidentCredentialWhenAuthenticatorUsesU2FProtocol()             {                 VirtualAuthenticatorOptions options = new VirtualAuthenticatorOptions()                     .SetProtocol(VirtualAuthenticatorOptions.Protocol.U2F)                     .SetHasResidentKey(true);                      ((WebDriver)driver).AddVirtualAuthenticator(options);                      byte[] credentialId = { 1, 2, 3, 4 };                 byte[] userHandle = { 1 };                      Credential credential = Credential.CreateResidentCredential(                   credentialId, "localhost", base64EncodedEC256PK, userHandle, 0);                      Assert.ThrowsException<WebDriverArgumentException>(() => ((WebDriver)driver).AddCredential(credential));             }                  [TestMethod]             public void ShouldBeAbleToCreateAndAddNonResidentKey()             {                 VirtualAuthenticatorOptions options = new VirtualAuthenticatorOptions()                     .SetProtocol(VirtualAuthenticatorOptions.Protocol.U2F)                     .SetHasResidentKey(false);                      ((WebDriver)driver).AddVirtualAuthenticator(options);                      byte[] credentialId = { 1, 2, 3, 4 };                      Credential nonResidentCredential = Credential.CreateNonResidentCredential(                   credentialId, "localhost", base64EncodedEC256PK, 0);                      ((WebDriver)driver).AddCredential(nonResidentCredential);                      List<Credential> credentialList = ((WebDriver)driver).GetCredentials();                 Assert.AreEqual(1, credentialList.Count);                      Credential credential = credentialList[0];                 CollectionAssert.AreEqual(credentialId, nonResidentCredential.Id);             }                  [TestMethod]             public void ShouldBeAbleToGetCredential()             {                 VirtualAuthenticatorOptions options = new VirtualAuthenticatorOptions()                     .SetProtocol(Protocol.CTAP2)                     .SetHasResidentKey(true)                     .SetHasUserVerification(true)                     .SetIsUserVerified(true);                      ((WebDriver)driver).AddVirtualAuthenticator(options);                      byte[] credentialId = { 1, 2, 3, 4 };                 byte[] userHandle = { 1 };                      Credential residentCredential = Credential.CreateResidentCredential(                   credentialId, "localhost", base64EncodedPK, userHandle, 0);                      ((WebDriver)driver).AddCredential(residentCredential);                      List<Credential> credentialList = ((WebDriver)driver).GetCredentials();                 Assert.AreEqual(1, credentialList.Count);                      Credential credential = credentialList[0];                 CollectionAssert.AreEqual(credentialId, residentCredential.Id);                 Assert.AreEqual(base64EncodedPK, credential.PrivateKey);             }                  [TestMethod]             public void ShouldBeAbleToRemoveCredential()             {                 ((WebDriver)driver).AddVirtualAuthenticator(new VirtualAuthenticatorOptions());                      byte[] credentialId = { 1, 2, 3, 4 };                      Credential nonResidentCredential = Credential.CreateNonResidentCredential(                   credentialId, "localhost", base64EncodedEC256PK, 0);                      ((WebDriver)driver).AddCredential(nonResidentCredential);                      ((WebDriver)driver).RemoveCredential(credentialId);                      Assert.AreEqual(0, ((WebDriver)driver).GetCredentials().Count);             }                       [TestMethod]             public void ShouldBeAbleToRemoveAllCredentias()             {                 ((WebDriver)driver).AddVirtualAuthenticator(new VirtualAuthenticatorOptions());                      byte[] credentialId = { 1, 2, 3, 4 };                      Credential nonResidentCredential = Credential.CreateNonResidentCredential(                   credentialId, "localhost", base64EncodedEC256PK, 0);                      ((WebDriver)driver).AddCredential(nonResidentCredential);                      ((WebDriver)driver).RemoveAllCredentials();                      Assert.AreEqual(0, ((WebDriver)driver).GetCredentials().Count);             }                  [TestMethod]             public void ShouldBeSetVerifiedOption()             {                 VirtualAuthenticatorOptions options = new VirtualAuthenticatorOptions()                     .SetIsUserVerified(true);                      Assert.IsTrue((bool)options.ToDictionary()["isUserVerified"]);             }         }     }

[Add Example](https://www.selenium.dev/documentation/about/contributing/#creating-examples)                   driver.add_credential(credential)

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/python/tests/interactions/test_virtual_authenticator.py#L150)

##### examples/python/tests/interactions/test\_virtual\_authenticator.py

Copy  Close               import pytest     from base64 import urlsafe_b64decode, urlsafe_b64encode          from selenium.common.exceptions import InvalidArgumentException     from selenium.webdriver.chrome.webdriver import WebDriver     from selenium.webdriver.common.virtual_authenticator import (         Credential,         VirtualAuthenticatorOptions,     )               BASE64__ENCODED_PK = '''     MIIEvAIBADANBgkqhkiG9w0BAQEFAASCBKYwggSiAgEAAoIBAQDbBOu5Lhs4vpowbCnmCyLUpIE7JM9sm9QXzye2G+jr+Kr     MsinWohEce47BFPJlTaDzHSvOW2eeunBO89ZcvvVc8RLz4qyQ8rO98xS1jtgqi1NcBPETDrtzthODu/gd0sjB2Tk3TLuBGV     oPXt54a+Oo4JbBJ6h3s0+5eAfGplCbSNq6hN3Jh9YOTw5ZA6GCEy5l8zBaOgjXytd2v2OdSVoEDNiNQRkjJd2rmS2oi9AyQ     FR3B7BrPSiDlCcITZFOWgLF5C31Wp/PSHwQhlnh7/6YhnE2y9tzsUvzx0wJXrBADW13+oMxrneDK3WGbxTNYgIi1PvSqXlq     GjHtCK+R2QkXAgMBAAECggEAVc6bu7VAnP6v0gDOeX4razv4FX/adCao9ZsHZ+WPX8PQxtmWYqykH5CY4TSfsuizAgyPuQ0     +j4Vjssr9VODLqFoanspT6YXsvaKanncUYbasNgUJnfnLnw3an2XpU2XdmXTNYckCPRX9nsAAURWT3/n9ljc/XYY22ecYxM     8sDWnHu2uKZ1B7M3X60bQYL5T/lVXkKdD6xgSNLeP4AkRx0H4egaop68hoW8FIwmDPVWYVAvo8etzWCtibRXz5FcNld9MgD     /Ai7ycKy4Q1KhX5GBFI79MVVaHkSQfxPHpr7/XcmpQOEAr+BMPon4s4vnKqAGdGB3j/E3d/+4F2swykoQKBgQD8hCsp6FIQ     5umJlk9/j/nGsMl85LgLaNVYpWlPRKPc54YNumtvj5vx1BG+zMbT7qIE3nmUPTCHP7qb5ERZG4CdMCS6S64/qzZEqijLCqe     pwj6j4fV5SyPWEcpxf6ehNdmcfgzVB3Wolfwh1ydhx/96L1jHJcTKchdJJzlfTvq8wwKBgQDeCnKws1t5GapfE1rmC/h4ol     L2qZTth9oQmbrXYohVnoqNFslDa43ePZwL9Jmd9kYb0axOTNMmyrP0NTj41uCfgDS0cJnNTc63ojKjegxHIyYDKRZNVUR/d     xAYB/vPfBYZUS7M89pO6LLsHhzS3qpu3/hppo/Uc/AM/r8PSflNHQKBgDnWgBh6OQncChPUlOLv9FMZPR1ZOfqLCYrjYEqi     uzGm6iKM13zXFO4AGAxu1P/IAd5BovFcTpg79Z8tWqZaUUwvscnl+cRlj+mMXAmdqCeO8VASOmqM1ml667axeZDIR867ZG8     K5V029Wg+4qtX5uFypNAAi6GfHkxIKrD04yOHAoGACdh4wXESi0oiDdkz3KOHPwIjn6BhZC7z8mx+pnJODU3cYukxv3WTct     lUhAsyjJiQ/0bK1yX87ulqFVgO0Knmh+wNajrb9wiONAJTMICG7tiWJOm7fW5cfTJwWkBwYADmkfTRmHDvqzQSSvoC2S7aa     9QulbC3C/qgGFNrcWgcT9kCgYAZTa1P9bFCDU7hJc2mHwJwAW7/FQKEJg8SL33KINpLwcR8fqaYOdAHWWz636osVEqosRrH     zJOGpf9x2RSWzQJ+dq8+6fACgfFZOVpN644+sAHfNPAI/gnNKU5OfUv+eav8fBnzlf1A3y3GIkyMyzFN3DE7e0n/lyqxE4H     BYGpI8g==     '''               @pytest.fixture(scope="module", autouse=True)     def driver():         yield WebDriver()               def test_virtual_authenticator_options():         options = VirtualAuthenticatorOptions()         options.is_user_verified = True         options.has_user_verification = True         options.is_user_consenting = True         options.transport = VirtualAuthenticatorOptions.Transport.USB         options.protocol = VirtualAuthenticatorOptions.Protocol.U2F         options.has_resident_key = False              assert len(options.to_dict()) == 6               def test_add_authenticator(driver):         # Create virtual authenticator options         options = VirtualAuthenticatorOptions()         options.protocol = VirtualAuthenticatorOptions.Protocol.U2F         options.has_resident_key = False              # Register a virtual authenticator         driver.add_virtual_authenticator(options)              # Get list of credentials         credential_list = driver.get_credentials()              assert len(credential_list) == 0               def test_remove_authenticator(driver):         # Create default virtual authenticator option         options = VirtualAuthenticatorOptions()              # Register a virtual authenticator         driver.add_virtual_authenticator(options)              # Remove virtual authenticator         driver.remove_virtual_authenticator()         assert driver.virtual_authenticator_id is None               def test_create_and_add_resident_key(driver):         # Create virtual authenticator options         options = VirtualAuthenticatorOptions()         options.protocol = VirtualAuthenticatorOptions.Protocol.CTAP2         options.has_resident_key = True         options.has_user_verification = True         options.is_user_verified = True              # Register a virtual authenticator         driver.add_virtual_authenticator(options)              # parameters for Resident Credential         credential_id = bytearray({1, 2, 3, 4})         rp_id = "localhost"         user_handle = bytearray({1})         privatekey = urlsafe_b64decode(BASE64__ENCODED_PK)         sign_count = 0              # create a resident credential using above parameters         resident_credential = Credential.create_resident_credential(credential_id, rp_id, user_handle, privatekey, sign_count)              # add the credential created to virtual authenticator         driver.add_credential(resident_credential)              # get list of all the registered credentials          credential_list = driver.get_credentials()         assert len(credential_list) == 1               def test_add_resident_credential_not_supported_when_authenticator_uses_u2f_protocol(driver):         # Create virtual authenticator options         options = VirtualAuthenticatorOptions()         options.protocol = VirtualAuthenticatorOptions.Protocol.U2F         options.has_resident_key = False              # Register a virtual authenticator         driver.add_virtual_authenticator(options)              # parameters for Resident Credential         credential_id = bytearray({1, 2, 3, 4})         rp_id = "localhost"         user_handle = bytearray({1})         privatekey = urlsafe_b64decode(BASE64__ENCODED_PK)         sign_count = 0              # create a  resident credential using above parameters         credential = Credential.create_resident_credential(credential_id, rp_id, user_handle, privatekey, sign_count)              # Expect InvalidArgumentException          with pytest.raises(InvalidArgumentException):             driver.add_credential(credential)               def test_create_and_add_non_resident_key(driver):         # Create virtual authenticator options         options = VirtualAuthenticatorOptions()         options.protocol = VirtualAuthenticatorOptions.Protocol.U2F         options.has_resident_key = False              # Register a virtual authenticator         driver.add_virtual_authenticator(options)              # parameters for Non Resident Credential         credential_id = bytearray({1, 2, 3, 4})         rp_id = "localhost"         privatekey = urlsafe_b64decode(BASE64__ENCODED_PK)         sign_count = 0              # create a non resident credential using above parameters         credential = Credential.create_non_resident_credential(credential_id, rp_id, privatekey, sign_count)              # add the credential created to virtual authenticator         driver.add_credential(credential)                  # get list of all the registered credentials          credential_list = driver.get_credentials()         assert len(credential_list) == 1                    def test_get_credential(driver):         # Create virtual authenticator options         options = VirtualAuthenticatorOptions()         options.protocol = VirtualAuthenticatorOptions.Protocol.CTAP2         options.has_resident_key = True         options.has_user_verfied = True         options.is_user_verified = True              # Register a virtual authenticator         driver.add_virtual_authenticator(options)              # parameters for Resident Credential         credential_id = bytearray({1, 2, 3, 4})         rp_id = "localhost"         user_handle = bytearray({1})         privatekey = urlsafe_b64decode(BASE64__ENCODED_PK)         sign_count = 0              # create a resident credential using above parameters         credential = Credential.create_resident_credential(credential_id, rp_id, user_handle, privatekey, sign_count)                  # add the credential created to virtual authenticator         driver.add_credential(credential)              # get list of all the registered credentials          credential_list = driver.get_credentials()              assert len(credential_list) == 1         assert credential_list[0].id == urlsafe_b64encode(credential_id).decode()               def test_remove_credential(driver):         # Create default virtual authenticator options         options = VirtualAuthenticatorOptions()              # Register a virtual authenticator         driver.add_virtual_authenticator(options)              # parameters for Non Resident Credential         credential_id = bytearray({1, 2, 3, 4})         rp_id = "localhost"         privatekey = urlsafe_b64decode(BASE64__ENCODED_PK)         sign_count = 0              # create a non resident credential using above parameters         credential = Credential.create_non_resident_credential(credential_id, rp_id, privatekey, sign_count)              # add the credential created to virtual authenticator         driver.add_credential(credential)              # remove the credential created from virtual authenticator         driver.remove_credential(credential.id)              # credential can also be removed using Byte Array         # driver.remove_credential(credential_id)               assert len(driver.get_credentials()) == 0               def test_remove_all_credentials(driver):         # Create default virtual authenticator options         options = VirtualAuthenticatorOptions()         options.has_resident_key = True              # Register a virtual authenticator         driver.add_virtual_authenticator(options)              # parameters for Resident Credential         credential_id = bytearray({1, 2, 3, 4})         rp_id = "localhost"         user_handle = bytearray({1})         privatekey = urlsafe_b64decode(BASE64__ENCODED_PK)         sign_count = 0              # create a resident credential using above parameters         resident_credential = Credential.create_resident_credential(credential_id, rp_id, user_handle, privatekey, sign_count)                  # add the credential created to virtual authenticator         driver.add_credential(resident_credential)              # remove all credentials in virtual authenticator         driver.remove_all_credentials()              assert len(driver.get_credentials()) == 0               def test_set_user_verified():         # Create virtual authenticator options         options = VirtualAuthenticatorOptions()         options.is_user_verified = True              assert options.to_dict().get("isUserVerified") is True                   options.setProtocol(Protocol['U2F']);         options.setHasResidentKey(false);              await driver.addVirtualAuthenticator(options);              let nonResidentCredential = new Credential().createNonResidentCredential(           new Uint8Array([1, 2, 3, 4]),           'localhost',           Buffer.from(base64EncodedPK, 'base64').toString('binary'),           0);              await driver.addCredential(nonResidentCredential);

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/javascript/test/virtual_authenticator/virtualAuthenticator.spec.js#L131-L142)

##### examples/javascript/test/virtual\_authenticator/virtualAuthenticator.spec.js

Copy  Close               const { Builder} = require("selenium-webdriver");     const { Credential, VirtualAuthenticatorOptions, Transport, Protocol } = require("selenium-webdriver/lib/virtual_authenticator");     const assert = require('assert')     const { InvalidArgumentError } = require("selenium-webdriver/lib/error");               describe('Virtual authenticator', function() {       const BASE64_ENCODED_PK =         "MIIEvAIBADANBgkqhkiG9w0BAQEFAASCBKYwggSiAgEAAoIBAQDbBOu5Lhs4vpowbCnmCyLUpIE7JM9sm9QXzye2G+jr+Kr" +         "MsinWohEce47BFPJlTaDzHSvOW2eeunBO89ZcvvVc8RLz4qyQ8rO98xS1jtgqi1NcBPETDrtzthODu/gd0sjB2Tk3TLuBGV" +         "oPXt54a+Oo4JbBJ6h3s0+5eAfGplCbSNq6hN3Jh9YOTw5ZA6GCEy5l8zBaOgjXytd2v2OdSVoEDNiNQRkjJd2rmS2oi9AyQ" +         "FR3B7BrPSiDlCcITZFOWgLF5C31Wp/PSHwQhlnh7/6YhnE2y9tzsUvzx0wJXrBADW13+oMxrneDK3WGbxTNYgIi1PvSqXlq" +         "GjHtCK+R2QkXAgMBAAECggEAVc6bu7VAnP6v0gDOeX4razv4FX/adCao9ZsHZ+WPX8PQxtmWYqykH5CY4TSfsuizAgyPuQ0" +         "+j4Vjssr9VODLqFoanspT6YXsvaKanncUYbasNgUJnfnLnw3an2XpU2XdmXTNYckCPRX9nsAAURWT3/n9ljc/XYY22ecYxM" +         "8sDWnHu2uKZ1B7M3X60bQYL5T/lVXkKdD6xgSNLeP4AkRx0H4egaop68hoW8FIwmDPVWYVAvo8etzWCtibRXz5FcNld9MgD" +         "/Ai7ycKy4Q1KhX5GBFI79MVVaHkSQfxPHpr7/XcmpQOEAr+BMPon4s4vnKqAGdGB3j/E3d/+4F2swykoQKBgQD8hCsp6FIQ" +         "5umJlk9/j/nGsMl85LgLaNVYpWlPRKPc54YNumtvj5vx1BG+zMbT7qIE3nmUPTCHP7qb5ERZG4CdMCS6S64/qzZEqijLCqe" +         "pwj6j4fV5SyPWEcpxf6ehNdmcfgzVB3Wolfwh1ydhx/96L1jHJcTKchdJJzlfTvq8wwKBgQDeCnKws1t5GapfE1rmC/h4ol" +         "L2qZTth9oQmbrXYohVnoqNFslDa43ePZwL9Jmd9kYb0axOTNMmyrP0NTj41uCfgDS0cJnNTc63ojKjegxHIyYDKRZNVUR/d" +         "xAYB/vPfBYZUS7M89pO6LLsHhzS3qpu3/hppo/Uc/AM/r8PSflNHQKBgDnWgBh6OQncChPUlOLv9FMZPR1ZOfqLCYrjYEqi" +         "uzGm6iKM13zXFO4AGAxu1P/IAd5BovFcTpg79Z8tWqZaUUwvscnl+cRlj+mMXAmdqCeO8VASOmqM1ml667axeZDIR867ZG8" +         "K5V029Wg+4qtX5uFypNAAi6GfHkxIKrD04yOHAoGACdh4wXESi0oiDdkz3KOHPwIjn6BhZC7z8mx+pnJODU3cYukxv3WTct" +         "lUhAsyjJiQ/0bK1yX87ulqFVgO0Knmh+wNajrb9wiONAJTMICG7tiWJOm7fW5cfTJwWkBwYADmkfTRmHDvqzQSSvoC2S7aa" +         "9QulbC3C/qgGFNrcWgcT9kCgYAZTa1P9bFCDU7hJc2mHwJwAW7/FQKEJg8SL33KINpLwcR8fqaYOdAHWWz636osVEqosRrH" +         "zJOGpf9x2RSWzQJ+dq8+6fACgfFZOVpN644+sAHfNPAI/gnNKU5OfUv+eav8fBnzlf1A3y3GIkyMyzFN3DE7e0n/lyqxE4H" +         "BYGpI8g==";            const base64EncodedPK =         "MIGHAgEAMBMGByqGSM49AgEGCCqGSM49AwEHBG0wawIBAQQg8_zMDQDYAxlU-Q" +         "hk1Dwkf0v18GZca1DMF3SaJ9HPdmShRANCAASNYX5lyVCOZLzFZzrIKmeZ2jwU" +         "RmgsJYxGP__fWN_S-j5sN4tT15XEpN_7QZnt14YvI6uvAgO0uJEboFaZlOEB";            let options;       let driver;            before(async function() {         options = new VirtualAuthenticatorOptions();         driver = await new Builder().forBrowser('chrome').build();       });            after(async() => await driver.quit());            function arraysEqual(array1, array2) {         return (array1.length === array2.length &&           array1.every((item) => array2.includes(item)) &&           array2.every((item) => array1.includes(item)));       }            it('Register a virtual authenticator', async function() {         options.setProtocol(Protocol['U2F']);         options.setHasResidentKey(false);              // Register a virtual authenticator         await driver.addVirtualAuthenticator(options);         let credentialList = await driver.getCredentials();              assert.equal(0, credentialList.length);       });            it('Remove authenticator', async function() {         await driver.addVirtualAuthenticator(options);         await driver.removeVirtualAuthenticator();              // Since the authenticator was removed, any operation using it will throw an error         try {           await driver.getCredentials()         }         catch (e) {           if (e instanceof InvalidArgumentError) {             assert(true)           }           else {             assert(false)           }         }       });            it('Createa and add residential key', async function() {         options.setProtocol(Protocol['CTAP2']);         options.setHasResidentKey(true);         options.setHasUserVerification(true);         options.setIsUserVerified(true);              await driver.addVirtualAuthenticator(options);              let residentCredential = new Credential().createResidentCredential(           new Uint8Array([1, 2, 3, 4]),           'localhost',           new Uint8Array([1]),           Buffer.from(BASE64_ENCODED_PK, 'base64').toString('binary'),           0);              await driver.addCredential(residentCredential);         let credentialList = await driver.getCredentials();         assert.equal(1, credentialList.length);              let credential_id = credentialList[0].id();         let test_id = new Uint8Array([1, 2, 3, 4]);              assert(arraysEqual(credential_id, test_id));       });            it('Add resident credential not supported when authenticator uses U2F protocol', async function() {         options.setProtocol(Protocol['U2F']);         options.setHasResidentKey(true);              await driver.addVirtualAuthenticator(options);              let credential = new Credential().createResidentCredential(           new Uint8Array([1, 2, 3, 4]),           'localhost',           new Uint8Array([1]),           Buffer.from(base64EncodedPK, 'base64').toString('binary'),           0);              try {           await driver.addCredential(credential)         }         catch (e) {           if (e instanceof InvalidArgumentError) {             assert(true)           }           else {             assert(false)           }         }       });            it('Create and add non residential key', async function() {         options.setProtocol(Protocol['U2F']);         options.setHasResidentKey(false);              await driver.addVirtualAuthenticator(options);              let nonResidentCredential = new Credential().createNonResidentCredential(           new Uint8Array([1, 2, 3, 4]),           'localhost',           Buffer.from(base64EncodedPK, 'base64').toString('binary'),           0);              await driver.addCredential(nonResidentCredential);              let credentialList = await driver.getCredentials();         assert.equal(1, credentialList.length);              let credential_id = credentialList[0].id();         let test_id = new Uint8Array([1, 2, 3, 4]);              assert(arraysEqual(credential_id, test_id));       });            it('Get credential', async function() {         options.setProtocol(Protocol['CTAP2']);         options.setHasResidentKey(true);         options.setHasUserVerification(true);         options.setIsUserVerified(true);              await driver.addVirtualAuthenticator(options);              let residentCredential = new Credential().createResidentCredential(           new Uint8Array([1, 2, 3, 4]),           'localhost',           new Uint8Array([1]),           Buffer.from(BASE64_ENCODED_PK, 'base64').toString('binary'),           0);              await driver.addCredential(residentCredential);              let credentialList = await driver.getCredentials();         assert.equal(1, credentialList.length);              let credential_id = credentialList[0].id();         let test_id = new Uint8Array([1, 2, 3, 4]);              assert(arraysEqual(credential_id, test_id));         assert.equal(BASE64_ENCODED_PK, Buffer.from(credentialList[0].privateKey(), 'binary').toString('base64'));       });            it('Remove all credentials', async function() {         await driver.addVirtualAuthenticator(options);              let nonResidentCredential = new Credential().createNonResidentCredential(           new Uint8Array([1, 2, 3, 4]),           'localhost',           Buffer.from(BASE64_ENCODED_PK, 'base64').toString('binary'),           0);              await driver.addCredential(nonResidentCredential);         await driver.removeAllCredentials();              let credentialList = await driver.getCredentials();         assert.equal(0, credentialList.length);       });            it('Set is user verified', async function() {         options.setIsUserVerified(true);         assert.equal(options.getIsUserVerified(), true);       });     });

[Add Example](https://www.selenium.dev/documentation/about/contributing/#creating-examples)

## Get Credential

Returns the list of credentials owned by the authenticator.

  * Java   * CSharp   * Ruby   * Python   * JavaScript   * Kotlin

                @Test       public void testGetCredential() {         VirtualAuthenticatorOptions options = new VirtualAuthenticatorOptions()           .setProtocol(VirtualAuthenticatorOptions.Protocol.CTAP2)           .setHasResidentKey(true)           .setHasUserVerification(true)           .setIsUserVerified(true);         VirtualAuthenticator authenticator = ((HasVirtualAuthenticator) driver).addVirtualAuthenticator(options);              byte[] credentialId = {1, 2, 3, 4};         byte[] userHandle = {1};         Credential residentCredential = Credential.createResidentCredential(           credentialId, "localhost", rsaPrivateKey, userHandle, /*signCount=*/0);              authenticator.addCredential(residentCredential);

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/java/src/test/java/dev/selenium/interactions/VirtualAuthenticatorTest.java#L157-L171)

##### examples/java/src/test/java/dev/selenium/interactions/VirtualAuthenticatorTest.java

Copy  Close               package dev.selenium.interactions;          import dev.selenium.BaseChromeTest;     import java.security.spec.PKCS8EncodedKeySpec;     import java.util.Base64;     import java.util.List;     import org.junit.jupiter.api.Assertions;     import org.junit.jupiter.api.Disabled;     import org.junit.jupiter.api.Test;     import org.openqa.selenium.InvalidArgumentException;     import org.openqa.selenium.virtualauthenticator.Credential;     import org.openqa.selenium.virtualauthenticator.HasVirtualAuthenticator;     import org.openqa.selenium.virtualauthenticator.VirtualAuthenticator;     import org.openqa.selenium.virtualauthenticator.VirtualAuthenticatorOptions;          public class VirtualAuthenticatorTest extends BaseChromeTest {            /**        * A pkcs#8 encoded encrypted RSA private key as a base64url string.        */       private final static String         base64EncodedRsaPK =         "MIIEvAIBADANBgkqhkiG9w0BAQEFAASCBKYwggSiAgEAAoIBAQDbBOu5Lhs4vpowbCnmCyLUpIE7JM9sm9QXzye2G+jr+Kr"         + "MsinWohEce47BFPJlTaDzHSvOW2eeunBO89ZcvvVc8RLz4qyQ8rO98xS1jtgqi1NcBPETDrtzthODu/gd0sjB2Tk3TLuB"         + "GVoPXt54a+Oo4JbBJ6h3s0+5eAfGplCbSNq6hN3Jh9YOTw5ZA6GCEy5l8zBaOgjXytd2v2OdSVoEDNiNQRkjJd2rmS2oi"         + "9AyQFR3B7BrPSiDlCcITZFOWgLF5C31Wp/PSHwQhlnh7/6YhnE2y9tzsUvzx0wJXrBADW13+oMxrneDK3WGbxTNYgIi1P"         + "vSqXlqGjHtCK+R2QkXAgMBAAECggEAVc6bu7VAnP6v0gDOeX4razv4FX/adCao9ZsHZ+WPX8PQxtmWYqykH5CY4TSfsui"         + "zAgyPuQ0+j4Vjssr9VODLqFoanspT6YXsvaKanncUYbasNgUJnfnLnw3an2XpU2XdmXTNYckCPRX9nsAAURWT3/n9ljc/"         + "XYY22ecYxM8sDWnHu2uKZ1B7M3X60bQYL5T/lVXkKdD6xgSNLeP4AkRx0H4egaop68hoW8FIwmDPVWYVAvo8etzWCtib"         + "RXz5FcNld9MgD/Ai7ycKy4Q1KhX5GBFI79MVVaHkSQfxPHpr7/XcmpQOEAr+BMPon4s4vnKqAGdGB3j/E3d/+4F2swyko"         + "QKBgQD8hCsp6FIQ5umJlk9/j/nGsMl85LgLaNVYpWlPRKPc54YNumtvj5vx1BG+zMbT7qIE3nmUPTCHP7qb5ERZG4CdMC"         + "S6S64/qzZEqijLCqepwj6j4fV5SyPWEcpxf6ehNdmcfgzVB3Wolfwh1ydhx/96L1jHJcTKchdJJzlfTvq8wwKBgQDeCnK"         + "ws1t5GapfE1rmC/h4olL2qZTth9oQmbrXYohVnoqNFslDa43ePZwL9Jmd9kYb0axOTNMmyrP0NTj41uCfgDS0cJnNTc63"         + "ojKjegxHIyYDKRZNVUR/dxAYB/vPfBYZUS7M89pO6LLsHhzS3qpu3/hppo/Uc/AM /r8PSflNHQKBgDnWgBh6OQncChPUl"         + "OLv9FMZPR1ZOfqLCYrjYEqiuzGm6iKM13zXFO4AGAxu1P/IAd5BovFcTpg79Z8tWqZaUUwvscnl+cRlj+mMXAmdqCeO8V"         + "ASOmqM1ml667axeZDIR867ZG8K5V029Wg+4qtX5uFypNAAi6GfHkxIKrD04yOHAoGACdh4wXESi0oiDdkz3KOHPwIjn6B"         + "hZC7z8mx+pnJODU3cYukxv3WTctlUhAsyjJiQ/0bK1yX87ulqFVgO0Knmh+wNajrb9wiONAJTMICG7tiWJOm7fW5cfTJw"         + "WkBwYADmkfTRmHDvqzQSSvoC2S7aa9QulbC3C/qgGFNrcWgcT9kCgYAZTa1P9bFCDU7hJc2mHwJwAW7/FQKEJg8SL33KI"         + "NpLwcR8fqaYOdAHWWz636osVEqosRrHzJOGpf9x2RSWzQJ+dq8+6fACgfFZOVpN644+sAHfNPAI/gnNKU5OfUv+eav8fB"         + "nzlf1A3y3GIkyMyzFN3DE7e0n/lyqxE4HBYGpI8g==";            private final static PKCS8EncodedKeySpec rsaPrivateKey =         new PKCS8EncodedKeySpec(Base64.getMimeDecoder().decode(base64EncodedRsaPK));            // A pkcs#8 encoded unencrypted EC256 private key as a base64url string.       String base64EncodedEC256PK =         "MIGHAgEAMBMGByqGSM49AgEGCCqGSM49AwEHBG0wawIBAQQg8_zMDQDYAxlU-Q"         + "hk1Dwkf0v18GZca1DMF3SaJ9HPdmShRANCAASNYX5lyVCOZLzFZzrIKmeZ2jwU"         + "RmgsJYxGP__fWN_S-j5sN4tT15XEpN_7QZnt14YvI6uvAgO0uJEboFaZlOEB";            PKCS8EncodedKeySpec ec256PrivateKey =         new PKCS8EncodedKeySpec(Base64.getUrlDecoder().decode(base64EncodedEC256PK));            @Test       public void testVirtualOptions() {         VirtualAuthenticatorOptions options = new VirtualAuthenticatorOptions()           .setIsUserVerified(true)           .setHasUserVerification(true)           .setIsUserConsenting(true)           .setTransport(VirtualAuthenticatorOptions.Transport.USB)           .setProtocol(VirtualAuthenticatorOptions.Protocol.U2F)           .setHasResidentKey(false);              Assertions.assertEquals(6, options.toMap().size());       }            @Test       public void testCreateAuthenticator() {         VirtualAuthenticatorOptions options = new VirtualAuthenticatorOptions()           .setProtocol(VirtualAuthenticatorOptions.Protocol.U2F)           .setHasResidentKey(false);              VirtualAuthenticator authenticator =           ((HasVirtualAuthenticator) driver).addVirtualAuthenticator(options);              List<Credential> credentialList = authenticator.getCredentials();              Assertions.assertEquals(0, credentialList.size());       }            @Test       public void testRemoveAuthenticator() {         VirtualAuthenticatorOptions options = new VirtualAuthenticatorOptions();         VirtualAuthenticator authenticator =           ((HasVirtualAuthenticator) driver).addVirtualAuthenticator(options);              ((HasVirtualAuthenticator) driver).removeVirtualAuthenticator(authenticator);              Assertions.assertThrows(InvalidArgumentException.class, authenticator::getCredentials);       }            @Test       public void testCreateAndAddResidentialKey() {         VirtualAuthenticatorOptions options = new VirtualAuthenticatorOptions()           .setProtocol(VirtualAuthenticatorOptions.Protocol.CTAP2)           .setHasResidentKey(true)           .setHasUserVerification(true)           .setIsUserVerified(true);         VirtualAuthenticator authenticator = ((HasVirtualAuthenticator) driver).addVirtualAuthenticator(options);              byte[] credentialId = {1, 2, 3, 4};         byte[] userHandle = {1};         Credential residentCredential = Credential.createResidentCredential(           credentialId, "localhost", rsaPrivateKey, userHandle, /*signCount=*/0);              authenticator.addCredential(residentCredential);              List<Credential> credentialList = authenticator.getCredentials();         Assertions.assertEquals(1, credentialList.size());              Credential credential = credentialList.get(0);         Assertions.assertArrayEquals(credentialId, credential.getId());       }            @Test       public void testAddResidentCredentialNotSupportedWhenAuthenticatorUsesU2FProtocol() {         VirtualAuthenticatorOptions options = new VirtualAuthenticatorOptions()           .setProtocol(VirtualAuthenticatorOptions.Protocol.U2F)           .setHasResidentKey(true);              VirtualAuthenticator authenticator = ((HasVirtualAuthenticator) driver).addVirtualAuthenticator(options);              PKCS8EncodedKeySpec privateKey =           new PKCS8EncodedKeySpec(Base64.getUrlDecoder().decode(base64EncodedEC256PK));              byte[] credentialId = {1, 2, 3, 4};         byte[] userHandle = {1};         Credential credential = Credential.createResidentCredential(           credentialId, "localhost", privateKey, userHandle, /*signCount=*/0);              Assertions.assertThrows(InvalidArgumentException.class,                                 () -> authenticator.addCredential(credential));       }                 @Test       @Disabled("A fix was implemented and will be available in Selenium 4.34.")       public void testCreateAndAddNonResidentialKey() {         VirtualAuthenticatorOptions options = new VirtualAuthenticatorOptions()           .setProtocol(VirtualAuthenticatorOptions.Protocol.U2F)           .setHasResidentKey(false);              VirtualAuthenticator authenticator = ((HasVirtualAuthenticator) driver).addVirtualAuthenticator(options);              byte[] credentialId = {1, 2, 3, 4};         Credential nonResidentCredential = Credential.createNonResidentCredential(           credentialId, "localhost", ec256PrivateKey, /*signCount=*/0);         authenticator.addCredential(nonResidentCredential);              List<Credential> credentialList = authenticator.getCredentials();         Assertions.assertEquals(1, credentialList.size());              Credential credential = credentialList.get(0);         Assertions.assertArrayEquals(credentialId, credential.getId());       }            @Test       public void testGetCredential() {         VirtualAuthenticatorOptions options = new VirtualAuthenticatorOptions()           .setProtocol(VirtualAuthenticatorOptions.Protocol.CTAP2)           .setHasResidentKey(true)           .setHasUserVerification(true)           .setIsUserVerified(true);         VirtualAuthenticator authenticator = ((HasVirtualAuthenticator) driver).addVirtualAuthenticator(options);              byte[] credentialId = {1, 2, 3, 4};         byte[] userHandle = {1};         Credential residentCredential = Credential.createResidentCredential(           credentialId, "localhost", rsaPrivateKey, userHandle, /*signCount=*/0);              authenticator.addCredential(residentCredential);              List<Credential> credentialList = authenticator.getCredentials();         Assertions.assertEquals(1, credentialList.size());              Credential credential = credentialList.get(0);         Assertions.assertArrayEquals(credentialId, credential.getId());         Assertions.assertArrayEquals(rsaPrivateKey.getEncoded(), credential.getPrivateKey().getEncoded());       }            @Test       public void testRemoveCredential() {         VirtualAuthenticator authenticator =           ((HasVirtualAuthenticator) driver).addVirtualAuthenticator(new VirtualAuthenticatorOptions());              byte[] credentialId = {1, 2, 3, 4};         Credential credential = Credential.createNonResidentCredential(           credentialId, "localhost", rsaPrivateKey, 0);              authenticator.addCredential(credential);              authenticator.removeCredential(credentialId);         Assertions.assertEquals(0, authenticator.getCredentials().size());       }            @Test       public void testRemoveAllCredentials() {         VirtualAuthenticator authenticator =           ((HasVirtualAuthenticator) driver).addVirtualAuthenticator(new VirtualAuthenticatorOptions());              byte[] credentialId = {1, 2, 3, 4};         Credential residentCredential = Credential.createNonResidentCredential(           credentialId, "localhost", rsaPrivateKey, /*signCount=*/0);              authenticator.addCredential(residentCredential);              authenticator.removeAllCredentials();         Assertions.assertEquals(0, authenticator.getCredentials().size());       }            @Test       public void testSetUserVerified() {         VirtualAuthenticatorOptions options = new VirtualAuthenticatorOptions()           .setIsUserVerified(true);              Assertions.assertTrue((boolean) options.toMap().get("isUserVerified"));       }     }                                VirtualAuthenticatorOptions options = new VirtualAuthenticatorOptions()                     .SetProtocol(Protocol.CTAP2)                     .SetHasResidentKey(true)                     .SetHasUserVerification(true)                     .SetIsUserVerified(true);                      ((WebDriver)driver).AddVirtualAuthenticator(options);                      byte[] credentialId = { 1, 2, 3, 4 };                 byte[] userHandle = { 1 };                      Credential residentCredential = Credential.CreateResidentCredential(                   credentialId, "localhost", base64EncodedPK, userHandle, 0);                      ((WebDriver)driver).AddCredential(residentCredential);                      List<Credential> credentialList = ((WebDriver)driver).GetCredentials();

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/dotnet/SeleniumDocs/Interactions/VirtualAuthenticatorTest.cs#L162-178)

##### examples/dotnet/SeleniumDocs/Interactions/VirtualAuthenticatorTest.cs

Copy  Close               using Microsoft.VisualStudio.TestTools.UnitTesting;     using Microsoft.IdentityModel.Tokens;     using OpenQA.Selenium;     using OpenQA.Selenium.VirtualAuth;     using static OpenQA.Selenium.VirtualAuth.VirtualAuthenticatorOptions;     using System.Collections.Generic;     using System;          namespace SeleniumDocs.VirtualAuthentication     {         [TestClass]         public class VirtualAuthenticatorTest : BaseChromeTest         {             //A pkcs#8 encoded encrypted RSA private key as a base64 string.             private static string base64EncodedRSAPK =                     "MIIEvAIBADANBgkqhkiG9w0BAQEFAASCBKYwggSiAgEAAoIBAQDbBOu5Lhs4vpowbCnmCyLUpIE7JM9sm9QXzye2G+jr+Kr"                   + "MsinWohEce47BFPJlTaDzHSvOW2eeunBO89ZcvvVc8RLz4qyQ8rO98xS1jtgqi1NcBPETDrtzthODu/gd0sjB2Tk3TLuB"                   + "GVoPXt54a+Oo4JbBJ6h3s0+5eAfGplCbSNq6hN3Jh9YOTw5ZA6GCEy5l8zBaOgjXytd2v2OdSVoEDNiNQRkjJd2rmS2oi"                   + "9AyQFR3B7BrPSiDlCcITZFOWgLF5C31Wp/PSHwQhlnh7/6YhnE2y9tzsUvzx0wJXrBADW13+oMxrneDK3WGbxTNYgIi1P"                   + "vSqXlqGjHtCK+R2QkXAgMBAAECggEAVc6bu7VAnP6v0gDOeX4razv4FX/adCao9ZsHZ+WPX8PQxtmWYqykH5CY4TSfsui"                   + "zAgyPuQ0+j4Vjssr9VODLqFoanspT6YXsvaKanncUYbasNgUJnfnLnw3an2XpU2XdmXTNYckCPRX9nsAAURWT3/n9ljc/"                   + "XYY22ecYxM8sDWnHu2uKZ1B7M3X60bQYL5T/lVXkKdD6xgSNLeP4AkRx0H4egaop68hoW8FIwmDPVWYVAvo8etzWCtib"                   + "RXz5FcNld9MgD/Ai7ycKy4Q1KhX5GBFI79MVVaHkSQfxPHpr7/XcmpQOEAr+BMPon4s4vnKqAGdGB3j/E3d/+4F2swyko"                   + "QKBgQD8hCsp6FIQ5umJlk9/j/nGsMl85LgLaNVYpWlPRKPc54YNumtvj5vx1BG+zMbT7qIE3nmUPTCHP7qb5ERZG4CdMC"                   + "S6S64/qzZEqijLCqepwj6j4fV5SyPWEcpxf6ehNdmcfgzVB3Wolfwh1ydhx/96L1jHJcTKchdJJzlfTvq8wwKBgQDeCnK"                   + "ws1t5GapfE1rmC/h4olL2qZTth9oQmbrXYohVnoqNFslDa43ePZwL9Jmd9kYb0axOTNMmyrP0NTj41uCfgDS0cJnNTc63"                   + "ojKjegxHIyYDKRZNVUR/dxAYB/vPfBYZUS7M89pO6LLsHhzS3qpu3/hppo/Uc/AM /r8PSflNHQKBgDnWgBh6OQncChPUl"                   + "OLv9FMZPR1ZOfqLCYrjYEqiuzGm6iKM13zXFO4AGAxu1P/IAd5BovFcTpg79Z8tWqZaUUwvscnl+cRlj+mMXAmdqCeO8V"                   + "ASOmqM1ml667axeZDIR867ZG8K5V029Wg+4qtX5uFypNAAi6GfHkxIKrD04yOHAoGACdh4wXESi0oiDdkz3KOHPwIjn6B"                   + "hZC7z8mx+pnJODU3cYukxv3WTctlUhAsyjJiQ/0bK1yX87ulqFVgO0Knmh+wNajrb9wiONAJTMICG7tiWJOm7fW5cfTJw"                   + "WkBwYADmkfTRmHDvqzQSSvoC2S7aa9QulbC3C/qgGFNrcWgcT9kCgYAZTa1P9bFCDU7hJc2mHwJwAW7/FQKEJg8SL33KI"                   + "NpLwcR8fqaYOdAHWWz636osVEqosRrHzJOGpf9x2RSWzQJ+dq8+6fACgfFZOVpN644+sAHfNPAI/gnNKU5OfUv+eav8fB"                   + "nzlf1A3y3GIkyMyzFN3DE7e0n/lyqxE4HBYGpI8g==";                  private static byte[] bytes = System.Convert.FromBase64String(base64EncodedRSAPK);             private string base64EncodedPK = Base64UrlEncoder.Encode(bytes);                  // A pkcs#8 encoded unencrypted EC256 private key as a base64url string.             private string base64EncodedEC256PK =                   "MIGHAgEAMBMGByqGSM49AgEGCCqGSM49AwEHBG0wawIBAQQg8_zMDQDYAxlU-Q"                   + "hk1Dwkf0v18GZca1DMF3SaJ9HPdmShRANCAASNYX5lyVCOZLzFZzrIKmeZ2jwU"                   + "RmgsJYxGP__fWN_S-j5sN4tT15XEpN_7QZnt14YvI6uvAgO0uJEboFaZlOEB";                       [TestMethod]             public void VirtualOptionsShouldAllowSettingOptions()             {                 // Create virtual authenticator options                 VirtualAuthenticatorOptions options = new VirtualAuthenticatorOptions()                     .SetIsUserVerified(true)                     .SetHasUserVerification(true)                     .SetIsUserConsenting(true)                     .SetTransport(VirtualAuthenticatorOptions.Transport.USB)                     .SetProtocol(VirtualAuthenticatorOptions.Protocol.U2F)                     .SetHasResidentKey(false);                      Assert.AreEqual(6, options.ToDictionary().Count);             }                  [TestMethod]             public void ShouldBeAbleToCreateAuthenticator()             {                 // Create virtual authenticator options                 VirtualAuthenticatorOptions options = new VirtualAuthenticatorOptions()                     .SetProtocol(VirtualAuthenticatorOptions.Protocol.U2F)                     .SetHasResidentKey(false);                      // Register a virtual authenticator                 ((WebDriver)driver).AddVirtualAuthenticator(options);                      List<Credential> credentialList = ((WebDriver)driver).GetCredentials();                      Assert.AreEqual(0, credentialList.Count);             }                       [TestMethod]             public void ShouldBeAbleToRemoveAuthenticator()             {                 VirtualAuthenticatorOptions options = new VirtualAuthenticatorOptions()                     .SetProtocol(VirtualAuthenticatorOptions.Protocol.U2F)                     .SetHasResidentKey(false);                      String virtualAuthenticatorId = ((WebDriver)driver).AddVirtualAuthenticator(options);                      ((WebDriver)driver).RemoveVirtualAuthenticator(virtualAuthenticatorId);                      // Since the authenticator was removed, any operation using it will throw an error                 Assert.ThrowsException<InvalidOperationException>(() => ((WebDriver)driver).GetCredentials());             }                  [TestMethod]             public void ShouldBeAbleToCreateAndAddResidentialKey()             {                 VirtualAuthenticatorOptions options = new VirtualAuthenticatorOptions()                     .SetProtocol(Protocol.CTAP2)                     .SetHasResidentKey(true)                     .SetHasUserVerification(true)                     .SetIsUserVerified(true);                      ((WebDriver)driver).AddVirtualAuthenticator(options);                      byte[] credentialId = { 1, 2, 3, 4 };                 byte[] userHandle = { 1 };                      Credential residentCredential = Credential.CreateResidentCredential(                   credentialId, "localhost", base64EncodedPK, userHandle, 0);                      ((WebDriver)driver).AddCredential(residentCredential);                      List<Credential> credentialList = ((WebDriver)driver).GetCredentials();                 Assert.AreEqual(1, credentialList.Count);                      Credential credential = credentialList[0];                 CollectionAssert.AreEqual(credentialId, credential.Id);             }                  [TestMethod]             public void ShouldNotAddResidentCredentialWhenAuthenticatorUsesU2FProtocol()             {                 VirtualAuthenticatorOptions options = new VirtualAuthenticatorOptions()                     .SetProtocol(VirtualAuthenticatorOptions.Protocol.U2F)                     .SetHasResidentKey(true);                      ((WebDriver)driver).AddVirtualAuthenticator(options);                      byte[] credentialId = { 1, 2, 3, 4 };                 byte[] userHandle = { 1 };                      Credential credential = Credential.CreateResidentCredential(                   credentialId, "localhost", base64EncodedEC256PK, userHandle, 0);                      Assert.ThrowsException<WebDriverArgumentException>(() => ((WebDriver)driver).AddCredential(credential));             }                  [TestMethod]             public void ShouldBeAbleToCreateAndAddNonResidentKey()             {                 VirtualAuthenticatorOptions options = new VirtualAuthenticatorOptions()                     .SetProtocol(VirtualAuthenticatorOptions.Protocol.U2F)                     .SetHasResidentKey(false);                      ((WebDriver)driver).AddVirtualAuthenticator(options);                      byte[] credentialId = { 1, 2, 3, 4 };                      Credential nonResidentCredential = Credential.CreateNonResidentCredential(                   credentialId, "localhost", base64EncodedEC256PK, 0);                      ((WebDriver)driver).AddCredential(nonResidentCredential);                      List<Credential> credentialList = ((WebDriver)driver).GetCredentials();                 Assert.AreEqual(1, credentialList.Count);                      Credential credential = credentialList[0];                 CollectionAssert.AreEqual(credentialId, nonResidentCredential.Id);             }                  [TestMethod]             public void ShouldBeAbleToGetCredential()             {                 VirtualAuthenticatorOptions options = new VirtualAuthenticatorOptions()                     .SetProtocol(Protocol.CTAP2)                     .SetHasResidentKey(true)                     .SetHasUserVerification(true)                     .SetIsUserVerified(true);                      ((WebDriver)driver).AddVirtualAuthenticator(options);                      byte[] credentialId = { 1, 2, 3, 4 };                 byte[] userHandle = { 1 };                      Credential residentCredential = Credential.CreateResidentCredential(                   credentialId, "localhost", base64EncodedPK, userHandle, 0);                      ((WebDriver)driver).AddCredential(residentCredential);                      List<Credential> credentialList = ((WebDriver)driver).GetCredentials();                 Assert.AreEqual(1, credentialList.Count);                      Credential credential = credentialList[0];                 CollectionAssert.AreEqual(credentialId, residentCredential.Id);                 Assert.AreEqual(base64EncodedPK, credential.PrivateKey);             }                  [TestMethod]             public void ShouldBeAbleToRemoveCredential()             {                 ((WebDriver)driver).AddVirtualAuthenticator(new VirtualAuthenticatorOptions());                      byte[] credentialId = { 1, 2, 3, 4 };                      Credential nonResidentCredential = Credential.CreateNonResidentCredential(                   credentialId, "localhost", base64EncodedEC256PK, 0);                      ((WebDriver)driver).AddCredential(nonResidentCredential);                      ((WebDriver)driver).RemoveCredential(credentialId);                      Assert.AreEqual(0, ((WebDriver)driver).GetCredentials().Count);             }                       [TestMethod]             public void ShouldBeAbleToRemoveAllCredentias()             {                 ((WebDriver)driver).AddVirtualAuthenticator(new VirtualAuthenticatorOptions());                      byte[] credentialId = { 1, 2, 3, 4 };                      Credential nonResidentCredential = Credential.CreateNonResidentCredential(                   credentialId, "localhost", base64EncodedEC256PK, 0);                      ((WebDriver)driver).AddCredential(nonResidentCredential);                      ((WebDriver)driver).RemoveAllCredentials();                      Assert.AreEqual(0, ((WebDriver)driver).GetCredentials().Count);             }                  [TestMethod]             public void ShouldBeSetVerifiedOption()             {                 VirtualAuthenticatorOptions options = new VirtualAuthenticatorOptions()                     .SetIsUserVerified(true);                      Assert.IsTrue((bool)options.ToDictionary()["isUserVerified"]);             }         }     }

[Add Example](https://www.selenium.dev/documentation/about/contributing/#creating-examples)                   credential_list = driver.get_credentials()

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/python/tests/interactions/test_virtual_authenticator.py#L183)

##### examples/python/tests/interactions/test\_virtual\_authenticator.py

Copy  Close               import pytest     from base64 import urlsafe_b64decode, urlsafe_b64encode          from selenium.common.exceptions import InvalidArgumentException     from selenium.webdriver.chrome.webdriver import WebDriver     from selenium.webdriver.common.virtual_authenticator import (         Credential,         VirtualAuthenticatorOptions,     )               BASE64__ENCODED_PK = '''     MIIEvAIBADANBgkqhkiG9w0BAQEFAASCBKYwggSiAgEAAoIBAQDbBOu5Lhs4vpowbCnmCyLUpIE7JM9sm9QXzye2G+jr+Kr     MsinWohEce47BFPJlTaDzHSvOW2eeunBO89ZcvvVc8RLz4qyQ8rO98xS1jtgqi1NcBPETDrtzthODu/gd0sjB2Tk3TLuBGV     oPXt54a+Oo4JbBJ6h3s0+5eAfGplCbSNq6hN3Jh9YOTw5ZA6GCEy5l8zBaOgjXytd2v2OdSVoEDNiNQRkjJd2rmS2oi9AyQ     FR3B7BrPSiDlCcITZFOWgLF5C31Wp/PSHwQhlnh7/6YhnE2y9tzsUvzx0wJXrBADW13+oMxrneDK3WGbxTNYgIi1PvSqXlq     GjHtCK+R2QkXAgMBAAECggEAVc6bu7VAnP6v0gDOeX4razv4FX/adCao9ZsHZ+WPX8PQxtmWYqykH5CY4TSfsuizAgyPuQ0     +j4Vjssr9VODLqFoanspT6YXsvaKanncUYbasNgUJnfnLnw3an2XpU2XdmXTNYckCPRX9nsAAURWT3/n9ljc/XYY22ecYxM     8sDWnHu2uKZ1B7M3X60bQYL5T/lVXkKdD6xgSNLeP4AkRx0H4egaop68hoW8FIwmDPVWYVAvo8etzWCtibRXz5FcNld9MgD     /Ai7ycKy4Q1KhX5GBFI79MVVaHkSQfxPHpr7/XcmpQOEAr+BMPon4s4vnKqAGdGB3j/E3d/+4F2swykoQKBgQD8hCsp6FIQ     5umJlk9/j/nGsMl85LgLaNVYpWlPRKPc54YNumtvj5vx1BG+zMbT7qIE3nmUPTCHP7qb5ERZG4CdMCS6S64/qzZEqijLCqe     pwj6j4fV5SyPWEcpxf6ehNdmcfgzVB3Wolfwh1ydhx/96L1jHJcTKchdJJzlfTvq8wwKBgQDeCnKws1t5GapfE1rmC/h4ol     L2qZTth9oQmbrXYohVnoqNFslDa43ePZwL9Jmd9kYb0axOTNMmyrP0NTj41uCfgDS0cJnNTc63ojKjegxHIyYDKRZNVUR/d     xAYB/vPfBYZUS7M89pO6LLsHhzS3qpu3/hppo/Uc/AM/r8PSflNHQKBgDnWgBh6OQncChPUlOLv9FMZPR1ZOfqLCYrjYEqi     uzGm6iKM13zXFO4AGAxu1P/IAd5BovFcTpg79Z8tWqZaUUwvscnl+cRlj+mMXAmdqCeO8VASOmqM1ml667axeZDIR867ZG8     K5V029Wg+4qtX5uFypNAAi6GfHkxIKrD04yOHAoGACdh4wXESi0oiDdkz3KOHPwIjn6BhZC7z8mx+pnJODU3cYukxv3WTct     lUhAsyjJiQ/0bK1yX87ulqFVgO0Knmh+wNajrb9wiONAJTMICG7tiWJOm7fW5cfTJwWkBwYADmkfTRmHDvqzQSSvoC2S7aa     9QulbC3C/qgGFNrcWgcT9kCgYAZTa1P9bFCDU7hJc2mHwJwAW7/FQKEJg8SL33KINpLwcR8fqaYOdAHWWz636osVEqosRrH     zJOGpf9x2RSWzQJ+dq8+6fACgfFZOVpN644+sAHfNPAI/gnNKU5OfUv+eav8fBnzlf1A3y3GIkyMyzFN3DE7e0n/lyqxE4H     BYGpI8g==     '''               @pytest.fixture(scope="module", autouse=True)     def driver():         yield WebDriver()               def test_virtual_authenticator_options():         options = VirtualAuthenticatorOptions()         options.is_user_verified = True         options.has_user_verification = True         options.is_user_consenting = True         options.transport = VirtualAuthenticatorOptions.Transport.USB         options.protocol = VirtualAuthenticatorOptions.Protocol.U2F         options.has_resident_key = False              assert len(options.to_dict()) == 6               def test_add_authenticator(driver):         # Create virtual authenticator options         options = VirtualAuthenticatorOptions()         options.protocol = VirtualAuthenticatorOptions.Protocol.U2F         options.has_resident_key = False              # Register a virtual authenticator         driver.add_virtual_authenticator(options)              # Get list of credentials         credential_list = driver.get_credentials()              assert len(credential_list) == 0               def test_remove_authenticator(driver):         # Create default virtual authenticator option         options = VirtualAuthenticatorOptions()              # Register a virtual authenticator         driver.add_virtual_authenticator(options)              # Remove virtual authenticator         driver.remove_virtual_authenticator()         assert driver.virtual_authenticator_id is None               def test_create_and_add_resident_key(driver):         # Create virtual authenticator options         options = VirtualAuthenticatorOptions()         options.protocol = VirtualAuthenticatorOptions.Protocol.CTAP2         options.has_resident_key = True         options.has_user_verification = True         options.is_user_verified = True              # Register a virtual authenticator         driver.add_virtual_authenticator(options)              # parameters for Resident Credential         credential_id = bytearray({1, 2, 3, 4})         rp_id = "localhost"         user_handle = bytearray({1})         privatekey = urlsafe_b64decode(BASE64__ENCODED_PK)         sign_count = 0              # create a resident credential using above parameters         resident_credential = Credential.create_resident_credential(credential_id, rp_id, user_handle, privatekey, sign_count)              # add the credential created to virtual authenticator         driver.add_credential(resident_credential)              # get list of all the registered credentials          credential_list = driver.get_credentials()         assert len(credential_list) == 1               def test_add_resident_credential_not_supported_when_authenticator_uses_u2f_protocol(driver):         # Create virtual authenticator options         options = VirtualAuthenticatorOptions()         options.protocol = VirtualAuthenticatorOptions.Protocol.U2F         options.has_resident_key = False              # Register a virtual authenticator         driver.add_virtual_authenticator(options)              # parameters for Resident Credential         credential_id = bytearray({1, 2, 3, 4})         rp_id = "localhost"         user_handle = bytearray({1})         privatekey = urlsafe_b64decode(BASE64__ENCODED_PK)         sign_count = 0              # create a  resident credential using above parameters         credential = Credential.create_resident_credential(credential_id, rp_id, user_handle, privatekey, sign_count)              # Expect InvalidArgumentException          with pytest.raises(InvalidArgumentException):             driver.add_credential(credential)               def test_create_and_add_non_resident_key(driver):         # Create virtual authenticator options         options = VirtualAuthenticatorOptions()         options.protocol = VirtualAuthenticatorOptions.Protocol.U2F         options.has_resident_key = False              # Register a virtual authenticator         driver.add_virtual_authenticator(options)              # parameters for Non Resident Credential         credential_id = bytearray({1, 2, 3, 4})         rp_id = "localhost"         privatekey = urlsafe_b64decode(BASE64__ENCODED_PK)         sign_count = 0              # create a non resident credential using above parameters         credential = Credential.create_non_resident_credential(credential_id, rp_id, privatekey, sign_count)              # add the credential created to virtual authenticator         driver.add_credential(credential)                  # get list of all the registered credentials          credential_list = driver.get_credentials()         assert len(credential_list) == 1                    def test_get_credential(driver):         # Create virtual authenticator options         options = VirtualAuthenticatorOptions()         options.protocol = VirtualAuthenticatorOptions.Protocol.CTAP2         options.has_resident_key = True         options.has_user_verfied = True         options.is_user_verified = True              # Register a virtual authenticator         driver.add_virtual_authenticator(options)              # parameters for Resident Credential         credential_id = bytearray({1, 2, 3, 4})         rp_id = "localhost"         user_handle = bytearray({1})         privatekey = urlsafe_b64decode(BASE64__ENCODED_PK)         sign_count = 0              # create a resident credential using above parameters         credential = Credential.create_resident_credential(credential_id, rp_id, user_handle, privatekey, sign_count)                  # add the credential created to virtual authenticator         driver.add_credential(credential)              # get list of all the registered credentials          credential_list = driver.get_credentials()              assert len(credential_list) == 1         assert credential_list[0].id == urlsafe_b64encode(credential_id).decode()               def test_remove_credential(driver):         # Create default virtual authenticator options         options = VirtualAuthenticatorOptions()              # Register a virtual authenticator         driver.add_virtual_authenticator(options)              # parameters for Non Resident Credential         credential_id = bytearray({1, 2, 3, 4})         rp_id = "localhost"         privatekey = urlsafe_b64decode(BASE64__ENCODED_PK)         sign_count = 0              # create a non resident credential using above parameters         credential = Credential.create_non_resident_credential(credential_id, rp_id, privatekey, sign_count)              # add the credential created to virtual authenticator         driver.add_credential(credential)              # remove the credential created from virtual authenticator         driver.remove_credential(credential.id)              # credential can also be removed using Byte Array         # driver.remove_credential(credential_id)               assert len(driver.get_credentials()) == 0               def test_remove_all_credentials(driver):         # Create default virtual authenticator options         options = VirtualAuthenticatorOptions()         options.has_resident_key = True              # Register a virtual authenticator         driver.add_virtual_authenticator(options)              # parameters for Resident Credential         credential_id = bytearray({1, 2, 3, 4})         rp_id = "localhost"         user_handle = bytearray({1})         privatekey = urlsafe_b64decode(BASE64__ENCODED_PK)         sign_count = 0              # create a resident credential using above parameters         resident_credential = Credential.create_resident_credential(credential_id, rp_id, user_handle, privatekey, sign_count)                  # add the credential created to virtual authenticator         driver.add_credential(resident_credential)              # remove all credentials in virtual authenticator         driver.remove_all_credentials()              assert len(driver.get_credentials()) == 0               def test_set_user_verified():         # Create virtual authenticator options         options = VirtualAuthenticatorOptions()         options.is_user_verified = True              assert options.to_dict().get("isUserVerified") is True                   options.setProtocol(Protocol['CTAP2']);         options.setHasResidentKey(true);         options.setHasUserVerification(true);         options.setIsUserVerified(true);              await driver.addVirtualAuthenticator(options);              let residentCredential = new Credential().createResidentCredential(           new Uint8Array([1, 2, 3, 4]),           'localhost',           new Uint8Array([1]),           Buffer.from(BASE64_ENCODED_PK, 'base64').toString('binary'),           0);              await driver.addCredential(residentCredential);              let credentialList = await driver.getCredentials();

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/javascript/test/virtual_authenticator/virtualAuthenticator.spec.js#L154-L170)

##### examples/javascript/test/virtual\_authenticator/virtualAuthenticator.spec.js

Copy  Close               const { Builder} = require("selenium-webdriver");     const { Credential, VirtualAuthenticatorOptions, Transport, Protocol } = require("selenium-webdriver/lib/virtual_authenticator");     const assert = require('assert')     const { InvalidArgumentError } = require("selenium-webdriver/lib/error");               describe('Virtual authenticator', function() {       const BASE64_ENCODED_PK =         "MIIEvAIBADANBgkqhkiG9w0BAQEFAASCBKYwggSiAgEAAoIBAQDbBOu5Lhs4vpowbCnmCyLUpIE7JM9sm9QXzye2G+jr+Kr" +         "MsinWohEce47BFPJlTaDzHSvOW2eeunBO89ZcvvVc8RLz4qyQ8rO98xS1jtgqi1NcBPETDrtzthODu/gd0sjB2Tk3TLuBGV" +         "oPXt54a+Oo4JbBJ6h3s0+5eAfGplCbSNq6hN3Jh9YOTw5ZA6GCEy5l8zBaOgjXytd2v2OdSVoEDNiNQRkjJd2rmS2oi9AyQ" +         "FR3B7BrPSiDlCcITZFOWgLF5C31Wp/PSHwQhlnh7/6YhnE2y9tzsUvzx0wJXrBADW13+oMxrneDK3WGbxTNYgIi1PvSqXlq" +         "GjHtCK+R2QkXAgMBAAECggEAVc6bu7VAnP6v0gDOeX4razv4FX/adCao9ZsHZ+WPX8PQxtmWYqykH5CY4TSfsuizAgyPuQ0" +         "+j4Vjssr9VODLqFoanspT6YXsvaKanncUYbasNgUJnfnLnw3an2XpU2XdmXTNYckCPRX9nsAAURWT3/n9ljc/XYY22ecYxM" +         "8sDWnHu2uKZ1B7M3X60bQYL5T/lVXkKdD6xgSNLeP4AkRx0H4egaop68hoW8FIwmDPVWYVAvo8etzWCtibRXz5FcNld9MgD" +         "/Ai7ycKy4Q1KhX5GBFI79MVVaHkSQfxPHpr7/XcmpQOEAr+BMPon4s4vnKqAGdGB3j/E3d/+4F2swykoQKBgQD8hCsp6FIQ" +         "5umJlk9/j/nGsMl85LgLaNVYpWlPRKPc54YNumtvj5vx1BG+zMbT7qIE3nmUPTCHP7qb5ERZG4CdMCS6S64/qzZEqijLCqe" +         "pwj6j4fV5SyPWEcpxf6ehNdmcfgzVB3Wolfwh1ydhx/96L1jHJcTKchdJJzlfTvq8wwKBgQDeCnKws1t5GapfE1rmC/h4ol" +         "L2qZTth9oQmbrXYohVnoqNFslDa43ePZwL9Jmd9kYb0axOTNMmyrP0NTj41uCfgDS0cJnNTc63ojKjegxHIyYDKRZNVUR/d" +         "xAYB/vPfBYZUS7M89pO6LLsHhzS3qpu3/hppo/Uc/AM/r8PSflNHQKBgDnWgBh6OQncChPUlOLv9FMZPR1ZOfqLCYrjYEqi" +         "uzGm6iKM13zXFO4AGAxu1P/IAd5BovFcTpg79Z8tWqZaUUwvscnl+cRlj+mMXAmdqCeO8VASOmqM1ml667axeZDIR867ZG8" +         "K5V029Wg+4qtX5uFypNAAi6GfHkxIKrD04yOHAoGACdh4wXESi0oiDdkz3KOHPwIjn6BhZC7z8mx+pnJODU3cYukxv3WTct" +         "lUhAsyjJiQ/0bK1yX87ulqFVgO0Knmh+wNajrb9wiONAJTMICG7tiWJOm7fW5cfTJwWkBwYADmkfTRmHDvqzQSSvoC2S7aa" +         "9QulbC3C/qgGFNrcWgcT9kCgYAZTa1P9bFCDU7hJc2mHwJwAW7/FQKEJg8SL33KINpLwcR8fqaYOdAHWWz636osVEqosRrH" +         "zJOGpf9x2RSWzQJ+dq8+6fACgfFZOVpN644+sAHfNPAI/gnNKU5OfUv+eav8fBnzlf1A3y3GIkyMyzFN3DE7e0n/lyqxE4H" +         "BYGpI8g==";            const base64EncodedPK =         "MIGHAgEAMBMGByqGSM49AgEGCCqGSM49AwEHBG0wawIBAQQg8_zMDQDYAxlU-Q" +         "hk1Dwkf0v18GZca1DMF3SaJ9HPdmShRANCAASNYX5lyVCOZLzFZzrIKmeZ2jwU" +         "RmgsJYxGP__fWN_S-j5sN4tT15XEpN_7QZnt14YvI6uvAgO0uJEboFaZlOEB";            let options;       let driver;            before(async function() {         options = new VirtualAuthenticatorOptions();         driver = await new Builder().forBrowser('chrome').build();       });            after(async() => await driver.quit());            function arraysEqual(array1, array2) {         return (array1.length === array2.length &&           array1.every((item) => array2.includes(item)) &&           array2.every((item) => array1.includes(item)));       }            it('Register a virtual authenticator', async function() {         options.setProtocol(Protocol['U2F']);         options.setHasResidentKey(false);              // Register a virtual authenticator         await driver.addVirtualAuthenticator(options);         let credentialList = await driver.getCredentials();              assert.equal(0, credentialList.length);       });            it('Remove authenticator', async function() {         await driver.addVirtualAuthenticator(options);         await driver.removeVirtualAuthenticator();              // Since the authenticator was removed, any operation using it will throw an error         try {           await driver.getCredentials()         }         catch (e) {           if (e instanceof InvalidArgumentError) {             assert(true)           }           else {             assert(false)           }         }       });            it('Createa and add residential key', async function() {         options.setProtocol(Protocol['CTAP2']);         options.setHasResidentKey(true);         options.setHasUserVerification(true);         options.setIsUserVerified(true);              await driver.addVirtualAuthenticator(options);              let residentCredential = new Credential().createResidentCredential(           new Uint8Array([1, 2, 3, 4]),           'localhost',           new Uint8Array([1]),           Buffer.from(BASE64_ENCODED_PK, 'base64').toString('binary'),           0);              await driver.addCredential(residentCredential);         let credentialList = await driver.getCredentials();         assert.equal(1, credentialList.length);              let credential_id = credentialList[0].id();         let test_id = new Uint8Array([1, 2, 3, 4]);              assert(arraysEqual(credential_id, test_id));       });            it('Add resident credential not supported when authenticator uses U2F protocol', async function() {         options.setProtocol(Protocol['U2F']);         options.setHasResidentKey(true);              await driver.addVirtualAuthenticator(options);              let credential = new Credential().createResidentCredential(           new Uint8Array([1, 2, 3, 4]),           'localhost',           new Uint8Array([1]),           Buffer.from(base64EncodedPK, 'base64').toString('binary'),           0);              try {           await driver.addCredential(credential)         }         catch (e) {           if (e instanceof InvalidArgumentError) {             assert(true)           }           else {             assert(false)           }         }       });            it('Create and add non residential key', async function() {         options.setProtocol(Protocol['U2F']);         options.setHasResidentKey(false);              await driver.addVirtualAuthenticator(options);              let nonResidentCredential = new Credential().createNonResidentCredential(           new Uint8Array([1, 2, 3, 4]),           'localhost',           Buffer.from(base64EncodedPK, 'base64').toString('binary'),           0);              await driver.addCredential(nonResidentCredential);              let credentialList = await driver.getCredentials();         assert.equal(1, credentialList.length);              let credential_id = credentialList[0].id();         let test_id = new Uint8Array([1, 2, 3, 4]);              assert(arraysEqual(credential_id, test_id));       });            it('Get credential', async function() {         options.setProtocol(Protocol['CTAP2']);         options.setHasResidentKey(true);         options.setHasUserVerification(true);         options.setIsUserVerified(true);              await driver.addVirtualAuthenticator(options);              let residentCredential = new Credential().createResidentCredential(           new Uint8Array([1, 2, 3, 4]),           'localhost',           new Uint8Array([1]),           Buffer.from(BASE64_ENCODED_PK, 'base64').toString('binary'),           0);              await driver.addCredential(residentCredential);              let credentialList = await driver.getCredentials();         assert.equal(1, credentialList.length);              let credential_id = credentialList[0].id();         let test_id = new Uint8Array([1, 2, 3, 4]);              assert(arraysEqual(credential_id, test_id));         assert.equal(BASE64_ENCODED_PK, Buffer.from(credentialList[0].privateKey(), 'binary').toString('base64'));       });            it('Remove all credentials', async function() {         await driver.addVirtualAuthenticator(options);              let nonResidentCredential = new Credential().createNonResidentCredential(           new Uint8Array([1, 2, 3, 4]),           'localhost',           Buffer.from(BASE64_ENCODED_PK, 'base64').toString('binary'),           0);              await driver.addCredential(nonResidentCredential);         await driver.removeAllCredentials();              let credentialList = await driver.getCredentials();         assert.equal(0, credentialList.length);       });            it('Set is user verified', async function() {         options.setIsUserVerified(true);         assert.equal(options.getIsUserVerified(), true);       });     });

[Add Example](https://www.selenium.dev/documentation/about/contributing/#creating-examples)

## Remove Credential

Removes a credential from the authenticator based on the passed credential id.

  * Java   * CSharp   * Ruby   * Python   * JavaScript   * Kotlin

                @Test       public void testRemoveCredential() {         VirtualAuthenticator authenticator =           ((HasVirtualAuthenticator) driver).addVirtualAuthenticator(new VirtualAuthenticatorOptions());              byte[] credentialId = {1, 2, 3, 4};         Credential credential = Credential.createNonResidentCredential(           credentialId, "localhost", rsaPrivateKey, 0);              authenticator.addCredential(credential);

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/java/src/test/java/dev/selenium/interactions/VirtualAuthenticatorTest.java#L181-L190)

##### examples/java/src/test/java/dev/selenium/interactions/VirtualAuthenticatorTest.java

Copy  Close               package dev.selenium.interactions;          import dev.selenium.BaseChromeTest;     import java.security.spec.PKCS8EncodedKeySpec;     import java.util.Base64;     import java.util.List;     import org.junit.jupiter.api.Assertions;     import org.junit.jupiter.api.Disabled;     import org.junit.jupiter.api.Test;     import org.openqa.selenium.InvalidArgumentException;     import org.openqa.selenium.virtualauthenticator.Credential;     import org.openqa.selenium.virtualauthenticator.HasVirtualAuthenticator;     import org.openqa.selenium.virtualauthenticator.VirtualAuthenticator;     import org.openqa.selenium.virtualauthenticator.VirtualAuthenticatorOptions;          public class VirtualAuthenticatorTest extends BaseChromeTest {            /**        * A pkcs#8 encoded encrypted RSA private key as a base64url string.        */       private final static String         base64EncodedRsaPK =         "MIIEvAIBADANBgkqhkiG9w0BAQEFAASCBKYwggSiAgEAAoIBAQDbBOu5Lhs4vpowbCnmCyLUpIE7JM9sm9QXzye2G+jr+Kr"         + "MsinWohEce47BFPJlTaDzHSvOW2eeunBO89ZcvvVc8RLz4qyQ8rO98xS1jtgqi1NcBPETDrtzthODu/gd0sjB2Tk3TLuB"         + "GVoPXt54a+Oo4JbBJ6h3s0+5eAfGplCbSNq6hN3Jh9YOTw5ZA6GCEy5l8zBaOgjXytd2v2OdSVoEDNiNQRkjJd2rmS2oi"         + "9AyQFR3B7BrPSiDlCcITZFOWgLF5C31Wp/PSHwQhlnh7/6YhnE2y9tzsUvzx0wJXrBADW13+oMxrneDK3WGbxTNYgIi1P"         + "vSqXlqGjHtCK+R2QkXAgMBAAECggEAVc6bu7VAnP6v0gDOeX4razv4FX/adCao9ZsHZ+WPX8PQxtmWYqykH5CY4TSfsui"         + "zAgyPuQ0+j4Vjssr9VODLqFoanspT6YXsvaKanncUYbasNgUJnfnLnw3an2XpU2XdmXTNYckCPRX9nsAAURWT3/n9ljc/"         + "XYY22ecYxM8sDWnHu2uKZ1B7M3X60bQYL5T/lVXkKdD6xgSNLeP4AkRx0H4egaop68hoW8FIwmDPVWYVAvo8etzWCtib"         + "RXz5FcNld9MgD/Ai7ycKy4Q1KhX5GBFI79MVVaHkSQfxPHpr7/XcmpQOEAr+BMPon4s4vnKqAGdGB3j/E3d/+4F2swyko"         + "QKBgQD8hCsp6FIQ5umJlk9/j/nGsMl85LgLaNVYpWlPRKPc54YNumtvj5vx1BG+zMbT7qIE3nmUPTCHP7qb5ERZG4CdMC"         + "S6S64/qzZEqijLCqepwj6j4fV5SyPWEcpxf6ehNdmcfgzVB3Wolfwh1ydhx/96L1jHJcTKchdJJzlfTvq8wwKBgQDeCnK"         + "ws1t5GapfE1rmC/h4olL2qZTth9oQmbrXYohVnoqNFslDa43ePZwL9Jmd9kYb0axOTNMmyrP0NTj41uCfgDS0cJnNTc63"         + "ojKjegxHIyYDKRZNVUR/dxAYB/vPfBYZUS7M89pO6LLsHhzS3qpu3/hppo/Uc/AM /r8PSflNHQKBgDnWgBh6OQncChPUl"         + "OLv9FMZPR1ZOfqLCYrjYEqiuzGm6iKM13zXFO4AGAxu1P/IAd5BovFcTpg79Z8tWqZaUUwvscnl+cRlj+mMXAmdqCeO8V"         + "ASOmqM1ml667axeZDIR867ZG8K5V029Wg+4qtX5uFypNAAi6GfHkxIKrD04yOHAoGACdh4wXESi0oiDdkz3KOHPwIjn6B"         + "hZC7z8mx+pnJODU3cYukxv3WTctlUhAsyjJiQ/0bK1yX87ulqFVgO0Knmh+wNajrb9wiONAJTMICG7tiWJOm7fW5cfTJw"         + "WkBwYADmkfTRmHDvqzQSSvoC2S7aa9QulbC3C/qgGFNrcWgcT9kCgYAZTa1P9bFCDU7hJc2mHwJwAW7/FQKEJg8SL33KI"         + "NpLwcR8fqaYOdAHWWz636osVEqosRrHzJOGpf9x2RSWzQJ+dq8+6fACgfFZOVpN644+sAHfNPAI/gnNKU5OfUv+eav8fB"         + "nzlf1A3y3GIkyMyzFN3DE7e0n/lyqxE4HBYGpI8g==";            private final static PKCS8EncodedKeySpec rsaPrivateKey =         new PKCS8EncodedKeySpec(Base64.getMimeDecoder().decode(base64EncodedRsaPK));            // A pkcs#8 encoded unencrypted EC256 private key as a base64url string.       String base64EncodedEC256PK =         "MIGHAgEAMBMGByqGSM49AgEGCCqGSM49AwEHBG0wawIBAQQg8_zMDQDYAxlU-Q"         + "hk1Dwkf0v18GZca1DMF3SaJ9HPdmShRANCAASNYX5lyVCOZLzFZzrIKmeZ2jwU"         + "RmgsJYxGP__fWN_S-j5sN4tT15XEpN_7QZnt14YvI6uvAgO0uJEboFaZlOEB";            PKCS8EncodedKeySpec ec256PrivateKey =         new PKCS8EncodedKeySpec(Base64.getUrlDecoder().decode(base64EncodedEC256PK));            @Test       public void testVirtualOptions() {         VirtualAuthenticatorOptions options = new VirtualAuthenticatorOptions()           .setIsUserVerified(true)           .setHasUserVerification(true)           .setIsUserConsenting(true)           .setTransport(VirtualAuthenticatorOptions.Transport.USB)           .setProtocol(VirtualAuthenticatorOptions.Protocol.U2F)           .setHasResidentKey(false);              Assertions.assertEquals(6, options.toMap().size());       }            @Test       public void testCreateAuthenticator() {         VirtualAuthenticatorOptions options = new VirtualAuthenticatorOptions()           .setProtocol(VirtualAuthenticatorOptions.Protocol.U2F)           .setHasResidentKey(false);              VirtualAuthenticator authenticator =           ((HasVirtualAuthenticator) driver).addVirtualAuthenticator(options);              List<Credential> credentialList = authenticator.getCredentials();              Assertions.assertEquals(0, credentialList.size());       }            @Test       public void testRemoveAuthenticator() {         VirtualAuthenticatorOptions options = new VirtualAuthenticatorOptions();         VirtualAuthenticator authenticator =           ((HasVirtualAuthenticator) driver).addVirtualAuthenticator(options);              ((HasVirtualAuthenticator) driver).removeVirtualAuthenticator(authenticator);              Assertions.assertThrows(InvalidArgumentException.class, authenticator::getCredentials);       }            @Test       public void testCreateAndAddResidentialKey() {         VirtualAuthenticatorOptions options = new VirtualAuthenticatorOptions()           .setProtocol(VirtualAuthenticatorOptions.Protocol.CTAP2)           .setHasResidentKey(true)           .setHasUserVerification(true)           .setIsUserVerified(true);         VirtualAuthenticator authenticator = ((HasVirtualAuthenticator) driver).addVirtualAuthenticator(options);              byte[] credentialId = {1, 2, 3, 4};         byte[] userHandle = {1};         Credential residentCredential = Credential.createResidentCredential(           credentialId, "localhost", rsaPrivateKey, userHandle, /*signCount=*/0);              authenticator.addCredential(residentCredential);              List<Credential> credentialList = authenticator.getCredentials();         Assertions.assertEquals(1, credentialList.size());              Credential credential = credentialList.get(0);         Assertions.assertArrayEquals(credentialId, credential.getId());       }            @Test       public void testAddResidentCredentialNotSupportedWhenAuthenticatorUsesU2FProtocol() {         VirtualAuthenticatorOptions options = new VirtualAuthenticatorOptions()           .setProtocol(VirtualAuthenticatorOptions.Protocol.U2F)           .setHasResidentKey(true);              VirtualAuthenticator authenticator = ((HasVirtualAuthenticator) driver).addVirtualAuthenticator(options);              PKCS8EncodedKeySpec privateKey =           new PKCS8EncodedKeySpec(Base64.getUrlDecoder().decode(base64EncodedEC256PK));              byte[] credentialId = {1, 2, 3, 4};         byte[] userHandle = {1};         Credential credential = Credential.createResidentCredential(           credentialId, "localhost", privateKey, userHandle, /*signCount=*/0);              Assertions.assertThrows(InvalidArgumentException.class,                                 () -> authenticator.addCredential(credential));       }                 @Test       @Disabled("A fix was implemented and will be available in Selenium 4.34.")       public void testCreateAndAddNonResidentialKey() {         VirtualAuthenticatorOptions options = new VirtualAuthenticatorOptions()           .setProtocol(VirtualAuthenticatorOptions.Protocol.U2F)           .setHasResidentKey(false);              VirtualAuthenticator authenticator = ((HasVirtualAuthenticator) driver).addVirtualAuthenticator(options);              byte[] credentialId = {1, 2, 3, 4};         Credential nonResidentCredential = Credential.createNonResidentCredential(           credentialId, "localhost", ec256PrivateKey, /*signCount=*/0);         authenticator.addCredential(nonResidentCredential);              List<Credential> credentialList = authenticator.getCredentials();         Assertions.assertEquals(1, credentialList.size());              Credential credential = credentialList.get(0);         Assertions.assertArrayEquals(credentialId, credential.getId());       }            @Test       public void testGetCredential() {         VirtualAuthenticatorOptions options = new VirtualAuthenticatorOptions()           .setProtocol(VirtualAuthenticatorOptions.Protocol.CTAP2)           .setHasResidentKey(true)           .setHasUserVerification(true)           .setIsUserVerified(true);         VirtualAuthenticator authenticator = ((HasVirtualAuthenticator) driver).addVirtualAuthenticator(options);              byte[] credentialId = {1, 2, 3, 4};         byte[] userHandle = {1};         Credential residentCredential = Credential.createResidentCredential(           credentialId, "localhost", rsaPrivateKey, userHandle, /*signCount=*/0);              authenticator.addCredential(residentCredential);              List<Credential> credentialList = authenticator.getCredentials();         Assertions.assertEquals(1, credentialList.size());              Credential credential = credentialList.get(0);         Assertions.assertArrayEquals(credentialId, credential.getId());         Assertions.assertArrayEquals(rsaPrivateKey.getEncoded(), credential.getPrivateKey().getEncoded());       }            @Test       public void testRemoveCredential() {         VirtualAuthenticator authenticator =           ((HasVirtualAuthenticator) driver).addVirtualAuthenticator(new VirtualAuthenticatorOptions());              byte[] credentialId = {1, 2, 3, 4};         Credential credential = Credential.createNonResidentCredential(           credentialId, "localhost", rsaPrivateKey, 0);              authenticator.addCredential(credential);              authenticator.removeCredential(credentialId);         Assertions.assertEquals(0, authenticator.getCredentials().size());       }            @Test       public void testRemoveAllCredentials() {         VirtualAuthenticator authenticator =           ((HasVirtualAuthenticator) driver).addVirtualAuthenticator(new VirtualAuthenticatorOptions());              byte[] credentialId = {1, 2, 3, 4};         Credential residentCredential = Credential.createNonResidentCredential(           credentialId, "localhost", rsaPrivateKey, /*signCount=*/0);              authenticator.addCredential(residentCredential);              authenticator.removeAllCredentials();         Assertions.assertEquals(0, authenticator.getCredentials().size());       }            @Test       public void testSetUserVerified() {         VirtualAuthenticatorOptions options = new VirtualAuthenticatorOptions()           .setIsUserVerified(true);              Assertions.assertTrue((boolean) options.toMap().get("isUserVerified"));       }     }                                ((WebDriver)driver).AddVirtualAuthenticator(new VirtualAuthenticatorOptions());                      byte[] credentialId = { 1, 2, 3, 4 };                      Credential nonResidentCredential = Credential.CreateNonResidentCredential(                   credentialId, "localhost", base64EncodedEC256PK, 0);                      ((WebDriver)driver).AddCredential(nonResidentCredential);                      ((WebDriver)driver).RemoveCredential(credentialId);

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/dotnet/SeleniumDocs/Interactions/VirtualAuthenticatorTest.cs#L189-198)

##### examples/dotnet/SeleniumDocs/Interactions/VirtualAuthenticatorTest.cs

Copy  Close               using Microsoft.VisualStudio.TestTools.UnitTesting;     using Microsoft.IdentityModel.Tokens;     using OpenQA.Selenium;     using OpenQA.Selenium.VirtualAuth;     using static OpenQA.Selenium.VirtualAuth.VirtualAuthenticatorOptions;     using System.Collections.Generic;     using System;          namespace SeleniumDocs.VirtualAuthentication     {         [TestClass]         public class VirtualAuthenticatorTest : BaseChromeTest         {             //A pkcs#8 encoded encrypted RSA private key as a base64 string.             private static string base64EncodedRSAPK =                     "MIIEvAIBADANBgkqhkiG9w0BAQEFAASCBKYwggSiAgEAAoIBAQDbBOu5Lhs4vpowbCnmCyLUpIE7JM9sm9QXzye2G+jr+Kr"                   + "MsinWohEce47BFPJlTaDzHSvOW2eeunBO89ZcvvVc8RLz4qyQ8rO98xS1jtgqi1NcBPETDrtzthODu/gd0sjB2Tk3TLuB"                   + "GVoPXt54a+Oo4JbBJ6h3s0+5eAfGplCbSNq6hN3Jh9YOTw5ZA6GCEy5l8zBaOgjXytd2v2OdSVoEDNiNQRkjJd2rmS2oi"                   + "9AyQFR3B7BrPSiDlCcITZFOWgLF5C31Wp/PSHwQhlnh7/6YhnE2y9tzsUvzx0wJXrBADW13+oMxrneDK3WGbxTNYgIi1P"                   + "vSqXlqGjHtCK+R2QkXAgMBAAECggEAVc6bu7VAnP6v0gDOeX4razv4FX/adCao9ZsHZ+WPX8PQxtmWYqykH5CY4TSfsui"                   + "zAgyPuQ0+j4Vjssr9VODLqFoanspT6YXsvaKanncUYbasNgUJnfnLnw3an2XpU2XdmXTNYckCPRX9nsAAURWT3/n9ljc/"                   + "XYY22ecYxM8sDWnHu2uKZ1B7M3X60bQYL5T/lVXkKdD6xgSNLeP4AkRx0H4egaop68hoW8FIwmDPVWYVAvo8etzWCtib"                   + "RXz5FcNld9MgD/Ai7ycKy4Q1KhX5GBFI79MVVaHkSQfxPHpr7/XcmpQOEAr+BMPon4s4vnKqAGdGB3j/E3d/+4F2swyko"                   + "QKBgQD8hCsp6FIQ5umJlk9/j/nGsMl85LgLaNVYpWlPRKPc54YNumtvj5vx1BG+zMbT7qIE3nmUPTCHP7qb5ERZG4CdMC"                   + "S6S64/qzZEqijLCqepwj6j4fV5SyPWEcpxf6ehNdmcfgzVB3Wolfwh1ydhx/96L1jHJcTKchdJJzlfTvq8wwKBgQDeCnK"                   + "ws1t5GapfE1rmC/h4olL2qZTth9oQmbrXYohVnoqNFslDa43ePZwL9Jmd9kYb0axOTNMmyrP0NTj41uCfgDS0cJnNTc63"                   + "ojKjegxHIyYDKRZNVUR/dxAYB/vPfBYZUS7M89pO6LLsHhzS3qpu3/hppo/Uc/AM /r8PSflNHQKBgDnWgBh6OQncChPUl"                   + "OLv9FMZPR1ZOfqLCYrjYEqiuzGm6iKM13zXFO4AGAxu1P/IAd5BovFcTpg79Z8tWqZaUUwvscnl+cRlj+mMXAmdqCeO8V"                   + "ASOmqM1ml667axeZDIR867ZG8K5V029Wg+4qtX5uFypNAAi6GfHkxIKrD04yOHAoGACdh4wXESi0oiDdkz3KOHPwIjn6B"                   + "hZC7z8mx+pnJODU3cYukxv3WTctlUhAsyjJiQ/0bK1yX87ulqFVgO0Knmh+wNajrb9wiONAJTMICG7tiWJOm7fW5cfTJw"                   + "WkBwYADmkfTRmHDvqzQSSvoC2S7aa9QulbC3C/qgGFNrcWgcT9kCgYAZTa1P9bFCDU7hJc2mHwJwAW7/FQKEJg8SL33KI"                   + "NpLwcR8fqaYOdAHWWz636osVEqosRrHzJOGpf9x2RSWzQJ+dq8+6fACgfFZOVpN644+sAHfNPAI/gnNKU5OfUv+eav8fB"                   + "nzlf1A3y3GIkyMyzFN3DE7e0n/lyqxE4HBYGpI8g==";                  private static byte[] bytes = System.Convert.FromBase64String(base64EncodedRSAPK);             private string base64EncodedPK = Base64UrlEncoder.Encode(bytes);                  // A pkcs#8 encoded unencrypted EC256 private key as a base64url string.             private string base64EncodedEC256PK =                   "MIGHAgEAMBMGByqGSM49AgEGCCqGSM49AwEHBG0wawIBAQQg8_zMDQDYAxlU-Q"                   + "hk1Dwkf0v18GZca1DMF3SaJ9HPdmShRANCAASNYX5lyVCOZLzFZzrIKmeZ2jwU"                   + "RmgsJYxGP__fWN_S-j5sN4tT15XEpN_7QZnt14YvI6uvAgO0uJEboFaZlOEB";                       [TestMethod]             public void VirtualOptionsShouldAllowSettingOptions()             {                 // Create virtual authenticator options                 VirtualAuthenticatorOptions options = new VirtualAuthenticatorOptions()                     .SetIsUserVerified(true)                     .SetHasUserVerification(true)                     .SetIsUserConsenting(true)                     .SetTransport(VirtualAuthenticatorOptions.Transport.USB)                     .SetProtocol(VirtualAuthenticatorOptions.Protocol.U2F)                     .SetHasResidentKey(false);                      Assert.AreEqual(6, options.ToDictionary().Count);             }                  [TestMethod]             public void ShouldBeAbleToCreateAuthenticator()             {                 // Create virtual authenticator options                 VirtualAuthenticatorOptions options = new VirtualAuthenticatorOptions()                     .SetProtocol(VirtualAuthenticatorOptions.Protocol.U2F)                     .SetHasResidentKey(false);                      // Register a virtual authenticator                 ((WebDriver)driver).AddVirtualAuthenticator(options);                      List<Credential> credentialList = ((WebDriver)driver).GetCredentials();                      Assert.AreEqual(0, credentialList.Count);             }                       [TestMethod]             public void ShouldBeAbleToRemoveAuthenticator()             {                 VirtualAuthenticatorOptions options = new VirtualAuthenticatorOptions()                     .SetProtocol(VirtualAuthenticatorOptions.Protocol.U2F)                     .SetHasResidentKey(false);                      String virtualAuthenticatorId = ((WebDriver)driver).AddVirtualAuthenticator(options);                      ((WebDriver)driver).RemoveVirtualAuthenticator(virtualAuthenticatorId);                      // Since the authenticator was removed, any operation using it will throw an error                 Assert.ThrowsException<InvalidOperationException>(() => ((WebDriver)driver).GetCredentials());             }                  [TestMethod]             public void ShouldBeAbleToCreateAndAddResidentialKey()             {                 VirtualAuthenticatorOptions options = new VirtualAuthenticatorOptions()                     .SetProtocol(Protocol.CTAP2)                     .SetHasResidentKey(true)                     .SetHasUserVerification(true)                     .SetIsUserVerified(true);                      ((WebDriver)driver).AddVirtualAuthenticator(options);                      byte[] credentialId = { 1, 2, 3, 4 };                 byte[] userHandle = { 1 };                      Credential residentCredential = Credential.CreateResidentCredential(                   credentialId, "localhost", base64EncodedPK, userHandle, 0);                      ((WebDriver)driver).AddCredential(residentCredential);                      List<Credential> credentialList = ((WebDriver)driver).GetCredentials();                 Assert.AreEqual(1, credentialList.Count);                      Credential credential = credentialList[0];                 CollectionAssert.AreEqual(credentialId, credential.Id);             }                  [TestMethod]             public void ShouldNotAddResidentCredentialWhenAuthenticatorUsesU2FProtocol()             {                 VirtualAuthenticatorOptions options = new VirtualAuthenticatorOptions()                     .SetProtocol(VirtualAuthenticatorOptions.Protocol.U2F)                     .SetHasResidentKey(true);                      ((WebDriver)driver).AddVirtualAuthenticator(options);                      byte[] credentialId = { 1, 2, 3, 4 };                 byte[] userHandle = { 1 };                      Credential credential = Credential.CreateResidentCredential(                   credentialId, "localhost", base64EncodedEC256PK, userHandle, 0);                      Assert.ThrowsException<WebDriverArgumentException>(() => ((WebDriver)driver).AddCredential(credential));             }                  [TestMethod]             public void ShouldBeAbleToCreateAndAddNonResidentKey()             {                 VirtualAuthenticatorOptions options = new VirtualAuthenticatorOptions()                     .SetProtocol(VirtualAuthenticatorOptions.Protocol.U2F)                     .SetHasResidentKey(false);                      ((WebDriver)driver).AddVirtualAuthenticator(options);                      byte[] credentialId = { 1, 2, 3, 4 };                      Credential nonResidentCredential = Credential.CreateNonResidentCredential(                   credentialId, "localhost", base64EncodedEC256PK, 0);                      ((WebDriver)driver).AddCredential(nonResidentCredential);                      List<Credential> credentialList = ((WebDriver)driver).GetCredentials();                 Assert.AreEqual(1, credentialList.Count);                      Credential credential = credentialList[0];                 CollectionAssert.AreEqual(credentialId, nonResidentCredential.Id);             }                  [TestMethod]             public void ShouldBeAbleToGetCredential()             {                 VirtualAuthenticatorOptions options = new VirtualAuthenticatorOptions()                     .SetProtocol(Protocol.CTAP2)                     .SetHasResidentKey(true)                     .SetHasUserVerification(true)                     .SetIsUserVerified(true);                      ((WebDriver)driver).AddVirtualAuthenticator(options);                      byte[] credentialId = { 1, 2, 3, 4 };                 byte[] userHandle = { 1 };                      Credential residentCredential = Credential.CreateResidentCredential(                   credentialId, "localhost", base64EncodedPK, userHandle, 0);                      ((WebDriver)driver).AddCredential(residentCredential);                      List<Credential> credentialList = ((WebDriver)driver).GetCredentials();                 Assert.AreEqual(1, credentialList.Count);                      Credential credential = credentialList[0];                 CollectionAssert.AreEqual(credentialId, residentCredential.Id);                 Assert.AreEqual(base64EncodedPK, credential.PrivateKey);             }                  [TestMethod]             public void ShouldBeAbleToRemoveCredential()             {                 ((WebDriver)driver).AddVirtualAuthenticator(new VirtualAuthenticatorOptions());                      byte[] credentialId = { 1, 2, 3, 4 };                      Credential nonResidentCredential = Credential.CreateNonResidentCredential(                   credentialId, "localhost", base64EncodedEC256PK, 0);                      ((WebDriver)driver).AddCredential(nonResidentCredential);                      ((WebDriver)driver).RemoveCredential(credentialId);                      Assert.AreEqual(0, ((WebDriver)driver).GetCredentials().Count);             }                       [TestMethod]             public void ShouldBeAbleToRemoveAllCredentias()             {                 ((WebDriver)driver).AddVirtualAuthenticator(new VirtualAuthenticatorOptions());                      byte[] credentialId = { 1, 2, 3, 4 };                      Credential nonResidentCredential = Credential.CreateNonResidentCredential(                   credentialId, "localhost", base64EncodedEC256PK, 0);                      ((WebDriver)driver).AddCredential(nonResidentCredential);                      ((WebDriver)driver).RemoveAllCredentials();                      Assert.AreEqual(0, ((WebDriver)driver).GetCredentials().Count);             }                  [TestMethod]             public void ShouldBeSetVerifiedOption()             {                 VirtualAuthenticatorOptions options = new VirtualAuthenticatorOptions()                     .SetIsUserVerified(true);                      Assert.IsTrue((bool)options.ToDictionary()["isUserVerified"]);             }         }     }

[Add Example](https://www.selenium.dev/documentation/about/contributing/#creating-examples)                   driver.remove_credential(credential.id)

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/python/tests/interactions/test_virtual_authenticator.py#L209)

##### examples/python/tests/interactions/test\_virtual\_authenticator.py

Copy  Close               import pytest     from base64 import urlsafe_b64decode, urlsafe_b64encode          from selenium.common.exceptions import InvalidArgumentException     from selenium.webdriver.chrome.webdriver import WebDriver     from selenium.webdriver.common.virtual_authenticator import (         Credential,         VirtualAuthenticatorOptions,     )               BASE64__ENCODED_PK = '''     MIIEvAIBADANBgkqhkiG9w0BAQEFAASCBKYwggSiAgEAAoIBAQDbBOu5Lhs4vpowbCnmCyLUpIE7JM9sm9QXzye2G+jr+Kr     MsinWohEce47BFPJlTaDzHSvOW2eeunBO89ZcvvVc8RLz4qyQ8rO98xS1jtgqi1NcBPETDrtzthODu/gd0sjB2Tk3TLuBGV     oPXt54a+Oo4JbBJ6h3s0+5eAfGplCbSNq6hN3Jh9YOTw5ZA6GCEy5l8zBaOgjXytd2v2OdSVoEDNiNQRkjJd2rmS2oi9AyQ     FR3B7BrPSiDlCcITZFOWgLF5C31Wp/PSHwQhlnh7/6YhnE2y9tzsUvzx0wJXrBADW13+oMxrneDK3WGbxTNYgIi1PvSqXlq     GjHtCK+R2QkXAgMBAAECggEAVc6bu7VAnP6v0gDOeX4razv4FX/adCao9ZsHZ+WPX8PQxtmWYqykH5CY4TSfsuizAgyPuQ0     +j4Vjssr9VODLqFoanspT6YXsvaKanncUYbasNgUJnfnLnw3an2XpU2XdmXTNYckCPRX9nsAAURWT3/n9ljc/XYY22ecYxM     8sDWnHu2uKZ1B7M3X60bQYL5T/lVXkKdD6xgSNLeP4AkRx0H4egaop68hoW8FIwmDPVWYVAvo8etzWCtibRXz5FcNld9MgD     /Ai7ycKy4Q1KhX5GBFI79MVVaHkSQfxPHpr7/XcmpQOEAr+BMPon4s4vnKqAGdGB3j/E3d/+4F2swykoQKBgQD8hCsp6FIQ     5umJlk9/j/nGsMl85LgLaNVYpWlPRKPc54YNumtvj5vx1BG+zMbT7qIE3nmUPTCHP7qb5ERZG4CdMCS6S64/qzZEqijLCqe     pwj6j4fV5SyPWEcpxf6ehNdmcfgzVB3Wolfwh1ydhx/96L1jHJcTKchdJJzlfTvq8wwKBgQDeCnKws1t5GapfE1rmC/h4ol     L2qZTth9oQmbrXYohVnoqNFslDa43ePZwL9Jmd9kYb0axOTNMmyrP0NTj41uCfgDS0cJnNTc63ojKjegxHIyYDKRZNVUR/d     xAYB/vPfBYZUS7M89pO6LLsHhzS3qpu3/hppo/Uc/AM/r8PSflNHQKBgDnWgBh6OQncChPUlOLv9FMZPR1ZOfqLCYrjYEqi     uzGm6iKM13zXFO4AGAxu1P/IAd5BovFcTpg79Z8tWqZaUUwvscnl+cRlj+mMXAmdqCeO8VASOmqM1ml667axeZDIR867ZG8     K5V029Wg+4qtX5uFypNAAi6GfHkxIKrD04yOHAoGACdh4wXESi0oiDdkz3KOHPwIjn6BhZC7z8mx+pnJODU3cYukxv3WTct     lUhAsyjJiQ/0bK1yX87ulqFVgO0Knmh+wNajrb9wiONAJTMICG7tiWJOm7fW5cfTJwWkBwYADmkfTRmHDvqzQSSvoC2S7aa     9QulbC3C/qgGFNrcWgcT9kCgYAZTa1P9bFCDU7hJc2mHwJwAW7/FQKEJg8SL33KINpLwcR8fqaYOdAHWWz636osVEqosRrH     zJOGpf9x2RSWzQJ+dq8+6fACgfFZOVpN644+sAHfNPAI/gnNKU5OfUv+eav8fBnzlf1A3y3GIkyMyzFN3DE7e0n/lyqxE4H     BYGpI8g==     '''               @pytest.fixture(scope="module", autouse=True)     def driver():         yield WebDriver()               def test_virtual_authenticator_options():         options = VirtualAuthenticatorOptions()         options.is_user_verified = True         options.has_user_verification = True         options.is_user_consenting = True         options.transport = VirtualAuthenticatorOptions.Transport.USB         options.protocol = VirtualAuthenticatorOptions.Protocol.U2F         options.has_resident_key = False              assert len(options.to_dict()) == 6               def test_add_authenticator(driver):         # Create virtual authenticator options         options = VirtualAuthenticatorOptions()         options.protocol = VirtualAuthenticatorOptions.Protocol.U2F         options.has_resident_key = False              # Register a virtual authenticator         driver.add_virtual_authenticator(options)              # Get list of credentials         credential_list = driver.get_credentials()              assert len(credential_list) == 0               def test_remove_authenticator(driver):         # Create default virtual authenticator option         options = VirtualAuthenticatorOptions()              # Register a virtual authenticator         driver.add_virtual_authenticator(options)              # Remove virtual authenticator         driver.remove_virtual_authenticator()         assert driver.virtual_authenticator_id is None               def test_create_and_add_resident_key(driver):         # Create virtual authenticator options         options = VirtualAuthenticatorOptions()         options.protocol = VirtualAuthenticatorOptions.Protocol.CTAP2         options.has_resident_key = True         options.has_user_verification = True         options.is_user_verified = True              # Register a virtual authenticator         driver.add_virtual_authenticator(options)              # parameters for Resident Credential         credential_id = bytearray({1, 2, 3, 4})         rp_id = "localhost"         user_handle = bytearray({1})         privatekey = urlsafe_b64decode(BASE64__ENCODED_PK)         sign_count = 0              # create a resident credential using above parameters         resident_credential = Credential.create_resident_credential(credential_id, rp_id, user_handle, privatekey, sign_count)              # add the credential created to virtual authenticator         driver.add_credential(resident_credential)              # get list of all the registered credentials          credential_list = driver.get_credentials()         assert len(credential_list) == 1               def test_add_resident_credential_not_supported_when_authenticator_uses_u2f_protocol(driver):         # Create virtual authenticator options         options = VirtualAuthenticatorOptions()         options.protocol = VirtualAuthenticatorOptions.Protocol.U2F         options.has_resident_key = False              # Register a virtual authenticator         driver.add_virtual_authenticator(options)              # parameters for Resident Credential         credential_id = bytearray({1, 2, 3, 4})         rp_id = "localhost"         user_handle = bytearray({1})         privatekey = urlsafe_b64decode(BASE64__ENCODED_PK)         sign_count = 0              # create a  resident credential using above parameters         credential = Credential.create_resident_credential(credential_id, rp_id, user_handle, privatekey, sign_count)              # Expect InvalidArgumentException          with pytest.raises(InvalidArgumentException):             driver.add_credential(credential)               def test_create_and_add_non_resident_key(driver):         # Create virtual authenticator options         options = VirtualAuthenticatorOptions()         options.protocol = VirtualAuthenticatorOptions.Protocol.U2F         options.has_resident_key = False              # Register a virtual authenticator         driver.add_virtual_authenticator(options)              # parameters for Non Resident Credential         credential_id = bytearray({1, 2, 3, 4})         rp_id = "localhost"         privatekey = urlsafe_b64decode(BASE64__ENCODED_PK)         sign_count = 0              # create a non resident credential using above parameters         credential = Credential.create_non_resident_credential(credential_id, rp_id, privatekey, sign_count)              # add the credential created to virtual authenticator         driver.add_credential(credential)                  # get list of all the registered credentials          credential_list = driver.get_credentials()         assert len(credential_list) == 1                    def test_get_credential(driver):         # Create virtual authenticator options         options = VirtualAuthenticatorOptions()         options.protocol = VirtualAuthenticatorOptions.Protocol.CTAP2         options.has_resident_key = True         options.has_user_verfied = True         options.is_user_verified = True              # Register a virtual authenticator         driver.add_virtual_authenticator(options)              # parameters for Resident Credential         credential_id = bytearray({1, 2, 3, 4})         rp_id = "localhost"         user_handle = bytearray({1})         privatekey = urlsafe_b64decode(BASE64__ENCODED_PK)         sign_count = 0              # create a resident credential using above parameters         credential = Credential.create_resident_credential(credential_id, rp_id, user_handle, privatekey, sign_count)                  # add the credential created to virtual authenticator         driver.add_credential(credential)              # get list of all the registered credentials          credential_list = driver.get_credentials()              assert len(credential_list) == 1         assert credential_list[0].id == urlsafe_b64encode(credential_id).decode()               def test_remove_credential(driver):         # Create default virtual authenticator options         options = VirtualAuthenticatorOptions()              # Register a virtual authenticator         driver.add_virtual_authenticator(options)              # parameters for Non Resident Credential         credential_id = bytearray({1, 2, 3, 4})         rp_id = "localhost"         privatekey = urlsafe_b64decode(BASE64__ENCODED_PK)         sign_count = 0              # create a non resident credential using above parameters         credential = Credential.create_non_resident_credential(credential_id, rp_id, privatekey, sign_count)              # add the credential created to virtual authenticator         driver.add_credential(credential)              # remove the credential created from virtual authenticator         driver.remove_credential(credential.id)              # credential can also be removed using Byte Array         # driver.remove_credential(credential_id)               assert len(driver.get_credentials()) == 0               def test_remove_all_credentials(driver):         # Create default virtual authenticator options         options = VirtualAuthenticatorOptions()         options.has_resident_key = True              # Register a virtual authenticator         driver.add_virtual_authenticator(options)              # parameters for Resident Credential         credential_id = bytearray({1, 2, 3, 4})         rp_id = "localhost"         user_handle = bytearray({1})         privatekey = urlsafe_b64decode(BASE64__ENCODED_PK)         sign_count = 0              # create a resident credential using above parameters         resident_credential = Credential.create_resident_credential(credential_id, rp_id, user_handle, privatekey, sign_count)                  # add the credential created to virtual authenticator         driver.add_credential(resident_credential)              # remove all credentials in virtual authenticator         driver.remove_all_credentials()              assert len(driver.get_credentials()) == 0               def test_set_user_verified():         # Create virtual authenticator options         options = VirtualAuthenticatorOptions()         options.is_user_verified = True              assert options.to_dict().get("isUserVerified") is True

[Add Example](https://www.selenium.dev/documentation/about/contributing/#creating-examples)

[Add Example](https://www.selenium.dev/documentation/about/contributing/#creating-examples)

## Remove All Credentials

Removes all the credentials from the authenticator.

  * Java   * CSharp   * Ruby   * Python   * JavaScript   * Kotlin

                @Test       public void testRemoveAllCredentials() {         VirtualAuthenticator authenticator =           ((HasVirtualAuthenticator) driver).addVirtualAuthenticator(new VirtualAuthenticatorOptions());              byte[] credentialId = {1, 2, 3, 4};         Credential residentCredential = Credential.createNonResidentCredential(           credentialId, "localhost", rsaPrivateKey, /*signCount=*/0);              authenticator.addCredential(residentCredential);

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/java/src/test/java/dev/selenium/interactions/VirtualAuthenticatorTest.java#L196-L205)

##### examples/java/src/test/java/dev/selenium/interactions/VirtualAuthenticatorTest.java

Copy  Close               package dev.selenium.interactions;          import dev.selenium.BaseChromeTest;     import java.security.spec.PKCS8EncodedKeySpec;     import java.util.Base64;     import java.util.List;     import org.junit.jupiter.api.Assertions;     import org.junit.jupiter.api.Disabled;     import org.junit.jupiter.api.Test;     import org.openqa.selenium.InvalidArgumentException;     import org.openqa.selenium.virtualauthenticator.Credential;     import org.openqa.selenium.virtualauthenticator.HasVirtualAuthenticator;     import org.openqa.selenium.virtualauthenticator.VirtualAuthenticator;     import org.openqa.selenium.virtualauthenticator.VirtualAuthenticatorOptions;          public class VirtualAuthenticatorTest extends BaseChromeTest {            /**        * A pkcs#8 encoded encrypted RSA private key as a base64url string.        */       private final static String         base64EncodedRsaPK =         "MIIEvAIBADANBgkqhkiG9w0BAQEFAASCBKYwggSiAgEAAoIBAQDbBOu5Lhs4vpowbCnmCyLUpIE7JM9sm9QXzye2G+jr+Kr"         + "MsinWohEce47BFPJlTaDzHSvOW2eeunBO89ZcvvVc8RLz4qyQ8rO98xS1jtgqi1NcBPETDrtzthODu/gd0sjB2Tk3TLuB"         + "GVoPXt54a+Oo4JbBJ6h3s0+5eAfGplCbSNq6hN3Jh9YOTw5ZA6GCEy5l8zBaOgjXytd2v2OdSVoEDNiNQRkjJd2rmS2oi"         + "9AyQFR3B7BrPSiDlCcITZFOWgLF5C31Wp/PSHwQhlnh7/6YhnE2y9tzsUvzx0wJXrBADW13+oMxrneDK3WGbxTNYgIi1P"         + "vSqXlqGjHtCK+R2QkXAgMBAAECggEAVc6bu7VAnP6v0gDOeX4razv4FX/adCao9ZsHZ+WPX8PQxtmWYqykH5CY4TSfsui"         + "zAgyPuQ0+j4Vjssr9VODLqFoanspT6YXsvaKanncUYbasNgUJnfnLnw3an2XpU2XdmXTNYckCPRX9nsAAURWT3/n9ljc/"         + "XYY22ecYxM8sDWnHu2uKZ1B7M3X60bQYL5T/lVXkKdD6xgSNLeP4AkRx0H4egaop68hoW8FIwmDPVWYVAvo8etzWCtib"         + "RXz5FcNld9MgD/Ai7ycKy4Q1KhX5GBFI79MVVaHkSQfxPHpr7/XcmpQOEAr+BMPon4s4vnKqAGdGB3j/E3d/+4F2swyko"         + "QKBgQD8hCsp6FIQ5umJlk9/j/nGsMl85LgLaNVYpWlPRKPc54YNumtvj5vx1BG+zMbT7qIE3nmUPTCHP7qb5ERZG4CdMC"         + "S6S64/qzZEqijLCqepwj6j4fV5SyPWEcpxf6ehNdmcfgzVB3Wolfwh1ydhx/96L1jHJcTKchdJJzlfTvq8wwKBgQDeCnK"         + "ws1t5GapfE1rmC/h4olL2qZTth9oQmbrXYohVnoqNFslDa43ePZwL9Jmd9kYb0axOTNMmyrP0NTj41uCfgDS0cJnNTc63"         + "ojKjegxHIyYDKRZNVUR/dxAYB/vPfBYZUS7M89pO6LLsHhzS3qpu3/hppo/Uc/AM /r8PSflNHQKBgDnWgBh6OQncChPUl"         + "OLv9FMZPR1ZOfqLCYrjYEqiuzGm6iKM13zXFO4AGAxu1P/IAd5BovFcTpg79Z8tWqZaUUwvscnl+cRlj+mMXAmdqCeO8V"         + "ASOmqM1ml667axeZDIR867ZG8K5V029Wg+4qtX5uFypNAAi6GfHkxIKrD04yOHAoGACdh4wXESi0oiDdkz3KOHPwIjn6B"         + "hZC7z8mx+pnJODU3cYukxv3WTctlUhAsyjJiQ/0bK1yX87ulqFVgO0Knmh+wNajrb9wiONAJTMICG7tiWJOm7fW5cfTJw"         + "WkBwYADmkfTRmHDvqzQSSvoC2S7aa9QulbC3C/qgGFNrcWgcT9kCgYAZTa1P9bFCDU7hJc2mHwJwAW7/FQKEJg8SL33KI"         + "NpLwcR8fqaYOdAHWWz636osVEqosRrHzJOGpf9x2RSWzQJ+dq8+6fACgfFZOVpN644+sAHfNPAI/gnNKU5OfUv+eav8fB"         + "nzlf1A3y3GIkyMyzFN3DE7e0n/lyqxE4HBYGpI8g==";            private final static PKCS8EncodedKeySpec rsaPrivateKey =         new PKCS8EncodedKeySpec(Base64.getMimeDecoder().decode(base64EncodedRsaPK));            // A pkcs#8 encoded unencrypted EC256 private key as a base64url string.       String base64EncodedEC256PK =         "MIGHAgEAMBMGByqGSM49AgEGCCqGSM49AwEHBG0wawIBAQQg8_zMDQDYAxlU-Q"         + "hk1Dwkf0v18GZca1DMF3SaJ9HPdmShRANCAASNYX5lyVCOZLzFZzrIKmeZ2jwU"         + "RmgsJYxGP__fWN_S-j5sN4tT15XEpN_7QZnt14YvI6uvAgO0uJEboFaZlOEB";            PKCS8EncodedKeySpec ec256PrivateKey =         new PKCS8EncodedKeySpec(Base64.getUrlDecoder().decode(base64EncodedEC256PK));            @Test       public void testVirtualOptions() {         VirtualAuthenticatorOptions options = new VirtualAuthenticatorOptions()           .setIsUserVerified(true)           .setHasUserVerification(true)           .setIsUserConsenting(true)           .setTransport(VirtualAuthenticatorOptions.Transport.USB)           .setProtocol(VirtualAuthenticatorOptions.Protocol.U2F)           .setHasResidentKey(false);              Assertions.assertEquals(6, options.toMap().size());       }            @Test       public void testCreateAuthenticator() {         VirtualAuthenticatorOptions options = new VirtualAuthenticatorOptions()           .setProtocol(VirtualAuthenticatorOptions.Protocol.U2F)           .setHasResidentKey(false);              VirtualAuthenticator authenticator =           ((HasVirtualAuthenticator) driver).addVirtualAuthenticator(options);              List<Credential> credentialList = authenticator.getCredentials();              Assertions.assertEquals(0, credentialList.size());       }            @Test       public void testRemoveAuthenticator() {         VirtualAuthenticatorOptions options = new VirtualAuthenticatorOptions();         VirtualAuthenticator authenticator =           ((HasVirtualAuthenticator) driver).addVirtualAuthenticator(options);              ((HasVirtualAuthenticator) driver).removeVirtualAuthenticator(authenticator);              Assertions.assertThrows(InvalidArgumentException.class, authenticator::getCredentials);       }            @Test       public void testCreateAndAddResidentialKey() {         VirtualAuthenticatorOptions options = new VirtualAuthenticatorOptions()           .setProtocol(VirtualAuthenticatorOptions.Protocol.CTAP2)           .setHasResidentKey(true)           .setHasUserVerification(true)           .setIsUserVerified(true);         VirtualAuthenticator authenticator = ((HasVirtualAuthenticator) driver).addVirtualAuthenticator(options);              byte[] credentialId = {1, 2, 3, 4};         byte[] userHandle = {1};         Credential residentCredential = Credential.createResidentCredential(           credentialId, "localhost", rsaPrivateKey, userHandle, /*signCount=*/0);              authenticator.addCredential(residentCredential);              List<Credential> credentialList = authenticator.getCredentials();         Assertions.assertEquals(1, credentialList.size());              Credential credential = credentialList.get(0);         Assertions.assertArrayEquals(credentialId, credential.getId());       }            @Test       public void testAddResidentCredentialNotSupportedWhenAuthenticatorUsesU2FProtocol() {         VirtualAuthenticatorOptions options = new VirtualAuthenticatorOptions()           .setProtocol(VirtualAuthenticatorOptions.Protocol.U2F)           .setHasResidentKey(true);              VirtualAuthenticator authenticator = ((HasVirtualAuthenticator) driver).addVirtualAuthenticator(options);              PKCS8EncodedKeySpec privateKey =           new PKCS8EncodedKeySpec(Base64.getUrlDecoder().decode(base64EncodedEC256PK));              byte[] credentialId = {1, 2, 3, 4};         byte[] userHandle = {1};         Credential credential = Credential.createResidentCredential(           credentialId, "localhost", privateKey, userHandle, /*signCount=*/0);              Assertions.assertThrows(InvalidArgumentException.class,                                 () -> authenticator.addCredential(credential));       }                 @Test       @Disabled("A fix was implemented and will be available in Selenium 4.34.")       public void testCreateAndAddNonResidentialKey() {         VirtualAuthenticatorOptions options = new VirtualAuthenticatorOptions()           .setProtocol(VirtualAuthenticatorOptions.Protocol.U2F)           .setHasResidentKey(false);              VirtualAuthenticator authenticator = ((HasVirtualAuthenticator) driver).addVirtualAuthenticator(options);              byte[] credentialId = {1, 2, 3, 4};         Credential nonResidentCredential = Credential.createNonResidentCredential(           credentialId, "localhost", ec256PrivateKey, /*signCount=*/0);         authenticator.addCredential(nonResidentCredential);              List<Credential> credentialList = authenticator.getCredentials();         Assertions.assertEquals(1, credentialList.size());              Credential credential = credentialList.get(0);         Assertions.assertArrayEquals(credentialId, credential.getId());       }            @Test       public void testGetCredential() {         VirtualAuthenticatorOptions options = new VirtualAuthenticatorOptions()           .setProtocol(VirtualAuthenticatorOptions.Protocol.CTAP2)           .setHasResidentKey(true)           .setHasUserVerification(true)           .setIsUserVerified(true);         VirtualAuthenticator authenticator = ((HasVirtualAuthenticator) driver).addVirtualAuthenticator(options);              byte[] credentialId = {1, 2, 3, 4};         byte[] userHandle = {1};         Credential residentCredential = Credential.createResidentCredential(           credentialId, "localhost", rsaPrivateKey, userHandle, /*signCount=*/0);              authenticator.addCredential(residentCredential);              List<Credential> credentialList = authenticator.getCredentials();         Assertions.assertEquals(1, credentialList.size());              Credential credential = credentialList.get(0);         Assertions.assertArrayEquals(credentialId, credential.getId());         Assertions.assertArrayEquals(rsaPrivateKey.getEncoded(), credential.getPrivateKey().getEncoded());       }            @Test       public void testRemoveCredential() {         VirtualAuthenticator authenticator =           ((HasVirtualAuthenticator) driver).addVirtualAuthenticator(new VirtualAuthenticatorOptions());              byte[] credentialId = {1, 2, 3, 4};         Credential credential = Credential.createNonResidentCredential(           credentialId, "localhost", rsaPrivateKey, 0);              authenticator.addCredential(credential);              authenticator.removeCredential(credentialId);         Assertions.assertEquals(0, authenticator.getCredentials().size());       }            @Test       public void testRemoveAllCredentials() {         VirtualAuthenticator authenticator =           ((HasVirtualAuthenticator) driver).addVirtualAuthenticator(new VirtualAuthenticatorOptions());              byte[] credentialId = {1, 2, 3, 4};         Credential residentCredential = Credential.createNonResidentCredential(           credentialId, "localhost", rsaPrivateKey, /*signCount=*/0);              authenticator.addCredential(residentCredential);              authenticator.removeAllCredentials();         Assertions.assertEquals(0, authenticator.getCredentials().size());       }            @Test       public void testSetUserVerified() {         VirtualAuthenticatorOptions options = new VirtualAuthenticatorOptions()           .setIsUserVerified(true);              Assertions.assertTrue((boolean) options.toMap().get("isUserVerified"));       }     }                                ((WebDriver)driver).AddVirtualAuthenticator(new VirtualAuthenticatorOptions());                      byte[] credentialId = { 1, 2, 3, 4 };                      Credential nonResidentCredential = Credential.CreateNonResidentCredential(                   credentialId, "localhost", base64EncodedEC256PK, 0);                      ((WebDriver)driver).AddCredential(nonResidentCredential);                      ((WebDriver)driver).RemoveAllCredentials();

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/dotnet/SeleniumDocs/Interactions/VirtualAuthenticatorTest.cs#L207-216)

##### examples/dotnet/SeleniumDocs/Interactions/VirtualAuthenticatorTest.cs

Copy  Close               using Microsoft.VisualStudio.TestTools.UnitTesting;     using Microsoft.IdentityModel.Tokens;     using OpenQA.Selenium;     using OpenQA.Selenium.VirtualAuth;     using static OpenQA.Selenium.VirtualAuth.VirtualAuthenticatorOptions;     using System.Collections.Generic;     using System;          namespace SeleniumDocs.VirtualAuthentication     {         [TestClass]         public class VirtualAuthenticatorTest : BaseChromeTest         {             //A pkcs#8 encoded encrypted RSA private key as a base64 string.             private static string base64EncodedRSAPK =                     "MIIEvAIBADANBgkqhkiG9w0BAQEFAASCBKYwggSiAgEAAoIBAQDbBOu5Lhs4vpowbCnmCyLUpIE7JM9sm9QXzye2G+jr+Kr"                   + "MsinWohEce47BFPJlTaDzHSvOW2eeunBO89ZcvvVc8RLz4qyQ8rO98xS1jtgqi1NcBPETDrtzthODu/gd0sjB2Tk3TLuB"                   + "GVoPXt54a+Oo4JbBJ6h3s0+5eAfGplCbSNq6hN3Jh9YOTw5ZA6GCEy5l8zBaOgjXytd2v2OdSVoEDNiNQRkjJd2rmS2oi"                   + "9AyQFR3B7BrPSiDlCcITZFOWgLF5C31Wp/PSHwQhlnh7/6YhnE2y9tzsUvzx0wJXrBADW13+oMxrneDK3WGbxTNYgIi1P"                   + "vSqXlqGjHtCK+R2QkXAgMBAAECggEAVc6bu7VAnP6v0gDOeX4razv4FX/adCao9ZsHZ+WPX8PQxtmWYqykH5CY4TSfsui"                   + "zAgyPuQ0+j4Vjssr9VODLqFoanspT6YXsvaKanncUYbasNgUJnfnLnw3an2XpU2XdmXTNYckCPRX9nsAAURWT3/n9ljc/"                   + "XYY22ecYxM8sDWnHu2uKZ1B7M3X60bQYL5T/lVXkKdD6xgSNLeP4AkRx0H4egaop68hoW8FIwmDPVWYVAvo8etzWCtib"                   + "RXz5FcNld9MgD/Ai7ycKy4Q1KhX5GBFI79MVVaHkSQfxPHpr7/XcmpQOEAr+BMPon4s4vnKqAGdGB3j/E3d/+4F2swyko"                   + "QKBgQD8hCsp6FIQ5umJlk9/j/nGsMl85LgLaNVYpWlPRKPc54YNumtvj5vx1BG+zMbT7qIE3nmUPTCHP7qb5ERZG4CdMC"                   + "S6S64/qzZEqijLCqepwj6j4fV5SyPWEcpxf6ehNdmcfgzVB3Wolfwh1ydhx/96L1jHJcTKchdJJzlfTvq8wwKBgQDeCnK"                   + "ws1t5GapfE1rmC/h4olL2qZTth9oQmbrXYohVnoqNFslDa43ePZwL9Jmd9kYb0axOTNMmyrP0NTj41uCfgDS0cJnNTc63"                   + "ojKjegxHIyYDKRZNVUR/dxAYB/vPfBYZUS7M89pO6LLsHhzS3qpu3/hppo/Uc/AM /r8PSflNHQKBgDnWgBh6OQncChPUl"                   + "OLv9FMZPR1ZOfqLCYrjYEqiuzGm6iKM13zXFO4AGAxu1P/IAd5BovFcTpg79Z8tWqZaUUwvscnl+cRlj+mMXAmdqCeO8V"                   + "ASOmqM1ml667axeZDIR867ZG8K5V029Wg+4qtX5uFypNAAi6GfHkxIKrD04yOHAoGACdh4wXESi0oiDdkz3KOHPwIjn6B"                   + "hZC7z8mx+pnJODU3cYukxv3WTctlUhAsyjJiQ/0bK1yX87ulqFVgO0Knmh+wNajrb9wiONAJTMICG7tiWJOm7fW5cfTJw"                   + "WkBwYADmkfTRmHDvqzQSSvoC2S7aa9QulbC3C/qgGFNrcWgcT9kCgYAZTa1P9bFCDU7hJc2mHwJwAW7/FQKEJg8SL33KI"                   + "NpLwcR8fqaYOdAHWWz636osVEqosRrHzJOGpf9x2RSWzQJ+dq8+6fACgfFZOVpN644+sAHfNPAI/gnNKU5OfUv+eav8fB"                   + "nzlf1A3y3GIkyMyzFN3DE7e0n/lyqxE4HBYGpI8g==";                  private static byte[] bytes = System.Convert.FromBase64String(base64EncodedRSAPK);             private string base64EncodedPK = Base64UrlEncoder.Encode(bytes);                  // A pkcs#8 encoded unencrypted EC256 private key as a base64url string.             private string base64EncodedEC256PK =                   "MIGHAgEAMBMGByqGSM49AgEGCCqGSM49AwEHBG0wawIBAQQg8_zMDQDYAxlU-Q"                   + "hk1Dwkf0v18GZca1DMF3SaJ9HPdmShRANCAASNYX5lyVCOZLzFZzrIKmeZ2jwU"                   + "RmgsJYxGP__fWN_S-j5sN4tT15XEpN_7QZnt14YvI6uvAgO0uJEboFaZlOEB";                       [TestMethod]             public void VirtualOptionsShouldAllowSettingOptions()             {                 // Create virtual authenticator options                 VirtualAuthenticatorOptions options = new VirtualAuthenticatorOptions()                     .SetIsUserVerified(true)                     .SetHasUserVerification(true)                     .SetIsUserConsenting(true)                     .SetTransport(VirtualAuthenticatorOptions.Transport.USB)                     .SetProtocol(VirtualAuthenticatorOptions.Protocol.U2F)                     .SetHasResidentKey(false);                      Assert.AreEqual(6, options.ToDictionary().Count);             }                  [TestMethod]             public void ShouldBeAbleToCreateAuthenticator()             {                 // Create virtual authenticator options                 VirtualAuthenticatorOptions options = new VirtualAuthenticatorOptions()                     .SetProtocol(VirtualAuthenticatorOptions.Protocol.U2F)                     .SetHasResidentKey(false);                      // Register a virtual authenticator                 ((WebDriver)driver).AddVirtualAuthenticator(options);                      List<Credential> credentialList = ((WebDriver)driver).GetCredentials();                      Assert.AreEqual(0, credentialList.Count);             }                       [TestMethod]             public void ShouldBeAbleToRemoveAuthenticator()             {                 VirtualAuthenticatorOptions options = new VirtualAuthenticatorOptions()                     .SetProtocol(VirtualAuthenticatorOptions.Protocol.U2F)                     .SetHasResidentKey(false);                      String virtualAuthenticatorId = ((WebDriver)driver).AddVirtualAuthenticator(options);                      ((WebDriver)driver).RemoveVirtualAuthenticator(virtualAuthenticatorId);                      // Since the authenticator was removed, any operation using it will throw an error                 Assert.ThrowsException<InvalidOperationException>(() => ((WebDriver)driver).GetCredentials());             }                  [TestMethod]             public void ShouldBeAbleToCreateAndAddResidentialKey()             {                 VirtualAuthenticatorOptions options = new VirtualAuthenticatorOptions()                     .SetProtocol(Protocol.CTAP2)                     .SetHasResidentKey(true)                     .SetHasUserVerification(true)                     .SetIsUserVerified(true);                      ((WebDriver)driver).AddVirtualAuthenticator(options);                      byte[] credentialId = { 1, 2, 3, 4 };                 byte[] userHandle = { 1 };                      Credential residentCredential = Credential.CreateResidentCredential(                   credentialId, "localhost", base64EncodedPK, userHandle, 0);                      ((WebDriver)driver).AddCredential(residentCredential);                      List<Credential> credentialList = ((WebDriver)driver).GetCredentials();                 Assert.AreEqual(1, credentialList.Count);                      Credential credential = credentialList[0];                 CollectionAssert.AreEqual(credentialId, credential.Id);             }                  [TestMethod]             public void ShouldNotAddResidentCredentialWhenAuthenticatorUsesU2FProtocol()             {                 VirtualAuthenticatorOptions options = new VirtualAuthenticatorOptions()                     .SetProtocol(VirtualAuthenticatorOptions.Protocol.U2F)                     .SetHasResidentKey(true);                      ((WebDriver)driver).AddVirtualAuthenticator(options);                      byte[] credentialId = { 1, 2, 3, 4 };                 byte[] userHandle = { 1 };                      Credential credential = Credential.CreateResidentCredential(                   credentialId, "localhost", base64EncodedEC256PK, userHandle, 0);                      Assert.ThrowsException<WebDriverArgumentException>(() => ((WebDriver)driver).AddCredential(credential));             }                  [TestMethod]             public void ShouldBeAbleToCreateAndAddNonResidentKey()             {                 VirtualAuthenticatorOptions options = new VirtualAuthenticatorOptions()                     .SetProtocol(VirtualAuthenticatorOptions.Protocol.U2F)                     .SetHasResidentKey(false);                      ((WebDriver)driver).AddVirtualAuthenticator(options);                      byte[] credentialId = { 1, 2, 3, 4 };                      Credential nonResidentCredential = Credential.CreateNonResidentCredential(                   credentialId, "localhost", base64EncodedEC256PK, 0);                      ((WebDriver)driver).AddCredential(nonResidentCredential);                      List<Credential> credentialList = ((WebDriver)driver).GetCredentials();                 Assert.AreEqual(1, credentialList.Count);                      Credential credential = credentialList[0];                 CollectionAssert.AreEqual(credentialId, nonResidentCredential.Id);             }                  [TestMethod]             public void ShouldBeAbleToGetCredential()             {                 VirtualAuthenticatorOptions options = new VirtualAuthenticatorOptions()                     .SetProtocol(Protocol.CTAP2)                     .SetHasResidentKey(true)                     .SetHasUserVerification(true)                     .SetIsUserVerified(true);                      ((WebDriver)driver).AddVirtualAuthenticator(options);                      byte[] credentialId = { 1, 2, 3, 4 };                 byte[] userHandle = { 1 };                      Credential residentCredential = Credential.CreateResidentCredential(                   credentialId, "localhost", base64EncodedPK, userHandle, 0);                      ((WebDriver)driver).AddCredential(residentCredential);                      List<Credential> credentialList = ((WebDriver)driver).GetCredentials();                 Assert.AreEqual(1, credentialList.Count);                      Credential credential = credentialList[0];                 CollectionAssert.AreEqual(credentialId, residentCredential.Id);                 Assert.AreEqual(base64EncodedPK, credential.PrivateKey);             }                  [TestMethod]             public void ShouldBeAbleToRemoveCredential()             {                 ((WebDriver)driver).AddVirtualAuthenticator(new VirtualAuthenticatorOptions());                      byte[] credentialId = { 1, 2, 3, 4 };                      Credential nonResidentCredential = Credential.CreateNonResidentCredential(                   credentialId, "localhost", base64EncodedEC256PK, 0);                      ((WebDriver)driver).AddCredential(nonResidentCredential);                      ((WebDriver)driver).RemoveCredential(credentialId);                      Assert.AreEqual(0, ((WebDriver)driver).GetCredentials().Count);             }                       [TestMethod]             public void ShouldBeAbleToRemoveAllCredentias()             {                 ((WebDriver)driver).AddVirtualAuthenticator(new VirtualAuthenticatorOptions());                      byte[] credentialId = { 1, 2, 3, 4 };                      Credential nonResidentCredential = Credential.CreateNonResidentCredential(                   credentialId, "localhost", base64EncodedEC256PK, 0);                      ((WebDriver)driver).AddCredential(nonResidentCredential);                      ((WebDriver)driver).RemoveAllCredentials();                      Assert.AreEqual(0, ((WebDriver)driver).GetCredentials().Count);             }                  [TestMethod]             public void ShouldBeSetVerifiedOption()             {                 VirtualAuthenticatorOptions options = new VirtualAuthenticatorOptions()                     .SetIsUserVerified(true);                      Assert.IsTrue((bool)options.ToDictionary()["isUserVerified"]);             }         }     }

[Add Example](https://www.selenium.dev/documentation/about/contributing/#creating-examples)                   driver.remove_all_credentials()

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/python/tests/interactions/test_virtual_authenticator.py#L239)

##### examples/python/tests/interactions/test\_virtual\_authenticator.py

Copy  Close               import pytest     from base64 import urlsafe_b64decode, urlsafe_b64encode          from selenium.common.exceptions import InvalidArgumentException     from selenium.webdriver.chrome.webdriver import WebDriver     from selenium.webdriver.common.virtual_authenticator import (         Credential,         VirtualAuthenticatorOptions,     )               BASE64__ENCODED_PK = '''     MIIEvAIBADANBgkqhkiG9w0BAQEFAASCBKYwggSiAgEAAoIBAQDbBOu5Lhs4vpowbCnmCyLUpIE7JM9sm9QXzye2G+jr+Kr     MsinWohEce47BFPJlTaDzHSvOW2eeunBO89ZcvvVc8RLz4qyQ8rO98xS1jtgqi1NcBPETDrtzthODu/gd0sjB2Tk3TLuBGV     oPXt54a+Oo4JbBJ6h3s0+5eAfGplCbSNq6hN3Jh9YOTw5ZA6GCEy5l8zBaOgjXytd2v2OdSVoEDNiNQRkjJd2rmS2oi9AyQ     FR3B7BrPSiDlCcITZFOWgLF5C31Wp/PSHwQhlnh7/6YhnE2y9tzsUvzx0wJXrBADW13+oMxrneDK3WGbxTNYgIi1PvSqXlq     GjHtCK+R2QkXAgMBAAECggEAVc6bu7VAnP6v0gDOeX4razv4FX/adCao9ZsHZ+WPX8PQxtmWYqykH5CY4TSfsuizAgyPuQ0     +j4Vjssr9VODLqFoanspT6YXsvaKanncUYbasNgUJnfnLnw3an2XpU2XdmXTNYckCPRX9nsAAURWT3/n9ljc/XYY22ecYxM     8sDWnHu2uKZ1B7M3X60bQYL5T/lVXkKdD6xgSNLeP4AkRx0H4egaop68hoW8FIwmDPVWYVAvo8etzWCtibRXz5FcNld9MgD     /Ai7ycKy4Q1KhX5GBFI79MVVaHkSQfxPHpr7/XcmpQOEAr+BMPon4s4vnKqAGdGB3j/E3d/+4F2swykoQKBgQD8hCsp6FIQ     5umJlk9/j/nGsMl85LgLaNVYpWlPRKPc54YNumtvj5vx1BG+zMbT7qIE3nmUPTCHP7qb5ERZG4CdMCS6S64/qzZEqijLCqe     pwj6j4fV5SyPWEcpxf6ehNdmcfgzVB3Wolfwh1ydhx/96L1jHJcTKchdJJzlfTvq8wwKBgQDeCnKws1t5GapfE1rmC/h4ol     L2qZTth9oQmbrXYohVnoqNFslDa43ePZwL9Jmd9kYb0axOTNMmyrP0NTj41uCfgDS0cJnNTc63ojKjegxHIyYDKRZNVUR/d     xAYB/vPfBYZUS7M89pO6LLsHhzS3qpu3/hppo/Uc/AM/r8PSflNHQKBgDnWgBh6OQncChPUlOLv9FMZPR1ZOfqLCYrjYEqi     uzGm6iKM13zXFO4AGAxu1P/IAd5BovFcTpg79Z8tWqZaUUwvscnl+cRlj+mMXAmdqCeO8VASOmqM1ml667axeZDIR867ZG8     K5V029Wg+4qtX5uFypNAAi6GfHkxIKrD04yOHAoGACdh4wXESi0oiDdkz3KOHPwIjn6BhZC7z8mx+pnJODU3cYukxv3WTct     lUhAsyjJiQ/0bK1yX87ulqFVgO0Knmh+wNajrb9wiONAJTMICG7tiWJOm7fW5cfTJwWkBwYADmkfTRmHDvqzQSSvoC2S7aa     9QulbC3C/qgGFNrcWgcT9kCgYAZTa1P9bFCDU7hJc2mHwJwAW7/FQKEJg8SL33KINpLwcR8fqaYOdAHWWz636osVEqosRrH     zJOGpf9x2RSWzQJ+dq8+6fACgfFZOVpN644+sAHfNPAI/gnNKU5OfUv+eav8fBnzlf1A3y3GIkyMyzFN3DE7e0n/lyqxE4H     BYGpI8g==     '''               @pytest.fixture(scope="module", autouse=True)     def driver():         yield WebDriver()               def test_virtual_authenticator_options():         options = VirtualAuthenticatorOptions()         options.is_user_verified = True         options.has_user_verification = True         options.is_user_consenting = True         options.transport = VirtualAuthenticatorOptions.Transport.USB         options.protocol = VirtualAuthenticatorOptions.Protocol.U2F         options.has_resident_key = False              assert len(options.to_dict()) == 6               def test_add_authenticator(driver):         # Create virtual authenticator options         options = VirtualAuthenticatorOptions()         options.protocol = VirtualAuthenticatorOptions.Protocol.U2F         options.has_resident_key = False              # Register a virtual authenticator         driver.add_virtual_authenticator(options)              # Get list of credentials         credential_list = driver.get_credentials()              assert len(credential_list) == 0               def test_remove_authenticator(driver):         # Create default virtual authenticator option         options = VirtualAuthenticatorOptions()              # Register a virtual authenticator         driver.add_virtual_authenticator(options)              # Remove virtual authenticator         driver.remove_virtual_authenticator()         assert driver.virtual_authenticator_id is None               def test_create_and_add_resident_key(driver):         # Create virtual authenticator options         options = VirtualAuthenticatorOptions()         options.protocol = VirtualAuthenticatorOptions.Protocol.CTAP2         options.has_resident_key = True         options.has_user_verification = True         options.is_user_verified = True              # Register a virtual authenticator         driver.add_virtual_authenticator(options)              # parameters for Resident Credential         credential_id = bytearray({1, 2, 3, 4})         rp_id = "localhost"         user_handle = bytearray({1})         privatekey = urlsafe_b64decode(BASE64__ENCODED_PK)         sign_count = 0              # create a resident credential using above parameters         resident_credential = Credential.create_resident_credential(credential_id, rp_id, user_handle, privatekey, sign_count)              # add the credential created to virtual authenticator         driver.add_credential(resident_credential)              # get list of all the registered credentials          credential_list = driver.get_credentials()         assert len(credential_list) == 1               def test_add_resident_credential_not_supported_when_authenticator_uses_u2f_protocol(driver):         # Create virtual authenticator options         options = VirtualAuthenticatorOptions()         options.protocol = VirtualAuthenticatorOptions.Protocol.U2F         options.has_resident_key = False              # Register a virtual authenticator         driver.add_virtual_authenticator(options)              # parameters for Resident Credential         credential_id = bytearray({1, 2, 3, 4})         rp_id = "localhost"         user_handle = bytearray({1})         privatekey = urlsafe_b64decode(BASE64__ENCODED_PK)         sign_count = 0              # create a  resident credential using above parameters         credential = Credential.create_resident_credential(credential_id, rp_id, user_handle, privatekey, sign_count)              # Expect InvalidArgumentException          with pytest.raises(InvalidArgumentException):             driver.add_credential(credential)               def test_create_and_add_non_resident_key(driver):         # Create virtual authenticator options         options = VirtualAuthenticatorOptions()         options.protocol = VirtualAuthenticatorOptions.Protocol.U2F         options.has_resident_key = False              # Register a virtual authenticator         driver.add_virtual_authenticator(options)              # parameters for Non Resident Credential         credential_id = bytearray({1, 2, 3, 4})         rp_id = "localhost"         privatekey = urlsafe_b64decode(BASE64__ENCODED_PK)         sign_count = 0              # create a non resident credential using above parameters         credential = Credential.create_non_resident_credential(credential_id, rp_id, privatekey, sign_count)              # add the credential created to virtual authenticator         driver.add_credential(credential)                  # get list of all the registered credentials          credential_list = driver.get_credentials()         assert len(credential_list) == 1                    def test_get_credential(driver):         # Create virtual authenticator options         options = VirtualAuthenticatorOptions()         options.protocol = VirtualAuthenticatorOptions.Protocol.CTAP2         options.has_resident_key = True         options.has_user_verfied = True         options.is_user_verified = True              # Register a virtual authenticator         driver.add_virtual_authenticator(options)              # parameters for Resident Credential         credential_id = bytearray({1, 2, 3, 4})         rp_id = "localhost"         user_handle = bytearray({1})         privatekey = urlsafe_b64decode(BASE64__ENCODED_PK)         sign_count = 0              # create a resident credential using above parameters         credential = Credential.create_resident_credential(credential_id, rp_id, user_handle, privatekey, sign_count)                  # add the credential created to virtual authenticator         driver.add_credential(credential)              # get list of all the registered credentials          credential_list = driver.get_credentials()              assert len(credential_list) == 1         assert credential_list[0].id == urlsafe_b64encode(credential_id).decode()               def test_remove_credential(driver):         # Create default virtual authenticator options         options = VirtualAuthenticatorOptions()              # Register a virtual authenticator         driver.add_virtual_authenticator(options)              # parameters for Non Resident Credential         credential_id = bytearray({1, 2, 3, 4})         rp_id = "localhost"         privatekey = urlsafe_b64decode(BASE64__ENCODED_PK)         sign_count = 0              # create a non resident credential using above parameters         credential = Credential.create_non_resident_credential(credential_id, rp_id, privatekey, sign_count)              # add the credential created to virtual authenticator         driver.add_credential(credential)              # remove the credential created from virtual authenticator         driver.remove_credential(credential.id)              # credential can also be removed using Byte Array         # driver.remove_credential(credential_id)               assert len(driver.get_credentials()) == 0               def test_remove_all_credentials(driver):         # Create default virtual authenticator options         options = VirtualAuthenticatorOptions()         options.has_resident_key = True              # Register a virtual authenticator         driver.add_virtual_authenticator(options)              # parameters for Resident Credential         credential_id = bytearray({1, 2, 3, 4})         rp_id = "localhost"         user_handle = bytearray({1})         privatekey = urlsafe_b64decode(BASE64__ENCODED_PK)         sign_count = 0              # create a resident credential using above parameters         resident_credential = Credential.create_resident_credential(credential_id, rp_id, user_handle, privatekey, sign_count)                  # add the credential created to virtual authenticator         driver.add_credential(resident_credential)              # remove all credentials in virtual authenticator         driver.remove_all_credentials()              assert len(driver.get_credentials()) == 0               def test_set_user_verified():         # Create virtual authenticator options         options = VirtualAuthenticatorOptions()         options.is_user_verified = True              assert options.to_dict().get("isUserVerified") is True                   await driver.addVirtualAuthenticator(options);              let nonResidentCredential = new Credential().createNonResidentCredential(           new Uint8Array([1, 2, 3, 4]),           'localhost',           Buffer.from(BASE64_ENCODED_PK, 'base64').toString('binary'),           0);              await driver.addCredential(nonResidentCredential);         await driver.removeAllCredentials();

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/javascript/test/virtual_authenticator/virtualAuthenticator.spec.js#L181-L190)

##### examples/javascript/test/virtual\_authenticator/virtualAuthenticator.spec.js

Copy  Close               const { Builder} = require("selenium-webdriver");     const { Credential, VirtualAuthenticatorOptions, Transport, Protocol } = require("selenium-webdriver/lib/virtual_authenticator");     const assert = require('assert')     const { InvalidArgumentError } = require("selenium-webdriver/lib/error");               describe('Virtual authenticator', function() {       const BASE64_ENCODED_PK =         "MIIEvAIBADANBgkqhkiG9w0BAQEFAASCBKYwggSiAgEAAoIBAQDbBOu5Lhs4vpowbCnmCyLUpIE7JM9sm9QXzye2G+jr+Kr" +         "MsinWohEce47BFPJlTaDzHSvOW2eeunBO89ZcvvVc8RLz4qyQ8rO98xS1jtgqi1NcBPETDrtzthODu/gd0sjB2Tk3TLuBGV" +         "oPXt54a+Oo4JbBJ6h3s0+5eAfGplCbSNq6hN3Jh9YOTw5ZA6GCEy5l8zBaOgjXytd2v2OdSVoEDNiNQRkjJd2rmS2oi9AyQ" +         "FR3B7BrPSiDlCcITZFOWgLF5C31Wp/PSHwQhlnh7/6YhnE2y9tzsUvzx0wJXrBADW13+oMxrneDK3WGbxTNYgIi1PvSqXlq" +         "GjHtCK+R2QkXAgMBAAECggEAVc6bu7VAnP6v0gDOeX4razv4FX/adCao9ZsHZ+WPX8PQxtmWYqykH5CY4TSfsuizAgyPuQ0" +         "+j4Vjssr9VODLqFoanspT6YXsvaKanncUYbasNgUJnfnLnw3an2XpU2XdmXTNYckCPRX9nsAAURWT3/n9ljc/XYY22ecYxM" +         "8sDWnHu2uKZ1B7M3X60bQYL5T/lVXkKdD6xgSNLeP4AkRx0H4egaop68hoW8FIwmDPVWYVAvo8etzWCtibRXz5FcNld9MgD" +         "/Ai7ycKy4Q1KhX5GBFI79MVVaHkSQfxPHpr7/XcmpQOEAr+BMPon4s4vnKqAGdGB3j/E3d/+4F2swykoQKBgQD8hCsp6FIQ" +         "5umJlk9/j/nGsMl85LgLaNVYpWlPRKPc54YNumtvj5vx1BG+zMbT7qIE3nmUPTCHP7qb5ERZG4CdMCS6S64/qzZEqijLCqe" +         "pwj6j4fV5SyPWEcpxf6ehNdmcfgzVB3Wolfwh1ydhx/96L1jHJcTKchdJJzlfTvq8wwKBgQDeCnKws1t5GapfE1rmC/h4ol" +         "L2qZTth9oQmbrXYohVnoqNFslDa43ePZwL9Jmd9kYb0axOTNMmyrP0NTj41uCfgDS0cJnNTc63ojKjegxHIyYDKRZNVUR/d" +         "xAYB/vPfBYZUS7M89pO6LLsHhzS3qpu3/hppo/Uc/AM/r8PSflNHQKBgDnWgBh6OQncChPUlOLv9FMZPR1ZOfqLCYrjYEqi" +         "uzGm6iKM13zXFO4AGAxu1P/IAd5BovFcTpg79Z8tWqZaUUwvscnl+cRlj+mMXAmdqCeO8VASOmqM1ml667axeZDIR867ZG8" +         "K5V029Wg+4qtX5uFypNAAi6GfHkxIKrD04yOHAoGACdh4wXESi0oiDdkz3KOHPwIjn6BhZC7z8mx+pnJODU3cYukxv3WTct" +         "lUhAsyjJiQ/0bK1yX87ulqFVgO0Knmh+wNajrb9wiONAJTMICG7tiWJOm7fW5cfTJwWkBwYADmkfTRmHDvqzQSSvoC2S7aa" +         "9QulbC3C/qgGFNrcWgcT9kCgYAZTa1P9bFCDU7hJc2mHwJwAW7/FQKEJg8SL33KINpLwcR8fqaYOdAHWWz636osVEqosRrH" +         "zJOGpf9x2RSWzQJ+dq8+6fACgfFZOVpN644+sAHfNPAI/gnNKU5OfUv+eav8fBnzlf1A3y3GIkyMyzFN3DE7e0n/lyqxE4H" +         "BYGpI8g==";            const base64EncodedPK =         "MIGHAgEAMBMGByqGSM49AgEGCCqGSM49AwEHBG0wawIBAQQg8_zMDQDYAxlU-Q" +         "hk1Dwkf0v18GZca1DMF3SaJ9HPdmShRANCAASNYX5lyVCOZLzFZzrIKmeZ2jwU" +         "RmgsJYxGP__fWN_S-j5sN4tT15XEpN_7QZnt14YvI6uvAgO0uJEboFaZlOEB";            let options;       let driver;            before(async function() {         options = new VirtualAuthenticatorOptions();         driver = await new Builder().forBrowser('chrome').build();       });            after(async() => await driver.quit());            function arraysEqual(array1, array2) {         return (array1.length === array2.length &&           array1.every((item) => array2.includes(item)) &&           array2.every((item) => array1.includes(item)));       }            it('Register a virtual authenticator', async function() {         options.setProtocol(Protocol['U2F']);         options.setHasResidentKey(false);              // Register a virtual authenticator         await driver.addVirtualAuthenticator(options);         let credentialList = await driver.getCredentials();              assert.equal(0, credentialList.length);       });            it('Remove authenticator', async function() {         await driver.addVirtualAuthenticator(options);         await driver.removeVirtualAuthenticator();              // Since the authenticator was removed, any operation using it will throw an error         try {           await driver.getCredentials()         }         catch (e) {           if (e instanceof InvalidArgumentError) {             assert(true)           }           else {             assert(false)           }         }       });            it('Createa and add residential key', async function() {         options.setProtocol(Protocol['CTAP2']);         options.setHasResidentKey(true);         options.setHasUserVerification(true);         options.setIsUserVerified(true);              await driver.addVirtualAuthenticator(options);              let residentCredential = new Credential().createResidentCredential(           new Uint8Array([1, 2, 3, 4]),           'localhost',           new Uint8Array([1]),           Buffer.from(BASE64_ENCODED_PK, 'base64').toString('binary'),           0);              await driver.addCredential(residentCredential);         let credentialList = await driver.getCredentials();         assert.equal(1, credentialList.length);              let credential_id = credentialList[0].id();         let test_id = new Uint8Array([1, 2, 3, 4]);              assert(arraysEqual(credential_id, test_id));       });            it('Add resident credential not supported when authenticator uses U2F protocol', async function() {         options.setProtocol(Protocol['U2F']);         options.setHasResidentKey(true);              await driver.addVirtualAuthenticator(options);              let credential = new Credential().createResidentCredential(           new Uint8Array([1, 2, 3, 4]),           'localhost',           new Uint8Array([1]),           Buffer.from(base64EncodedPK, 'base64').toString('binary'),           0);              try {           await driver.addCredential(credential)         }         catch (e) {           if (e instanceof InvalidArgumentError) {             assert(true)           }           else {             assert(false)           }         }       });            it('Create and add non residential key', async function() {         options.setProtocol(Protocol['U2F']);         options.setHasResidentKey(false);              await driver.addVirtualAuthenticator(options);              let nonResidentCredential = new Credential().createNonResidentCredential(           new Uint8Array([1, 2, 3, 4]),           'localhost',           Buffer.from(base64EncodedPK, 'base64').toString('binary'),           0);              await driver.addCredential(nonResidentCredential);              let credentialList = await driver.getCredentials();         assert.equal(1, credentialList.length);              let credential_id = credentialList[0].id();         let test_id = new Uint8Array([1, 2, 3, 4]);              assert(arraysEqual(credential_id, test_id));       });            it('Get credential', async function() {         options.setProtocol(Protocol['CTAP2']);         options.setHasResidentKey(true);         options.setHasUserVerification(true);         options.setIsUserVerified(true);              await driver.addVirtualAuthenticator(options);              let residentCredential = new Credential().createResidentCredential(           new Uint8Array([1, 2, 3, 4]),           'localhost',           new Uint8Array([1]),           Buffer.from(BASE64_ENCODED_PK, 'base64').toString('binary'),           0);              await driver.addCredential(residentCredential);              let credentialList = await driver.getCredentials();         assert.equal(1, credentialList.length);              let credential_id = credentialList[0].id();         let test_id = new Uint8Array([1, 2, 3, 4]);              assert(arraysEqual(credential_id, test_id));         assert.equal(BASE64_ENCODED_PK, Buffer.from(credentialList[0].privateKey(), 'binary').toString('base64'));       });            it('Remove all credentials', async function() {         await driver.addVirtualAuthenticator(options);              let nonResidentCredential = new Credential().createNonResidentCredential(           new Uint8Array([1, 2, 3, 4]),           'localhost',           Buffer.from(BASE64_ENCODED_PK, 'base64').toString('binary'),           0);              await driver.addCredential(nonResidentCredential);         await driver.removeAllCredentials();              let credentialList = await driver.getCredentials();         assert.equal(0, credentialList.length);       });            it('Set is user verified', async function() {         options.setIsUserVerified(true);         assert.equal(options.getIsUserVerified(), true);       });     });

[Add Example](https://www.selenium.dev/documentation/about/contributing/#creating-examples)

## Set User Verified

Sets whether the authenticator will simulate success or fail on user verification.

  * Java   * CSharp   * Ruby   * Python   * JavaScript   * Kotlin

                @Test       public void testSetUserVerified() {

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/java/src/test/java/dev/selenium/interactions/VirtualAuthenticatorTest.java#L211-L212)

##### examples/java/src/test/java/dev/selenium/interactions/VirtualAuthenticatorTest.java

Copy  Close               package dev.selenium.interactions;          import dev.selenium.BaseChromeTest;     import java.security.spec.PKCS8EncodedKeySpec;     import java.util.Base64;     import java.util.List;     import org.junit.jupiter.api.Assertions;     import org.junit.jupiter.api.Disabled;     import org.junit.jupiter.api.Test;     import org.openqa.selenium.InvalidArgumentException;     import org.openqa.selenium.virtualauthenticator.Credential;     import org.openqa.selenium.virtualauthenticator.HasVirtualAuthenticator;     import org.openqa.selenium.virtualauthenticator.VirtualAuthenticator;     import org.openqa.selenium.virtualauthenticator.VirtualAuthenticatorOptions;          public class VirtualAuthenticatorTest extends BaseChromeTest {            /**        * A pkcs#8 encoded encrypted RSA private key as a base64url string.        */       private final static String         base64EncodedRsaPK =         "MIIEvAIBADANBgkqhkiG9w0BAQEFAASCBKYwggSiAgEAAoIBAQDbBOu5Lhs4vpowbCnmCyLUpIE7JM9sm9QXzye2G+jr+Kr"         + "MsinWohEce47BFPJlTaDzHSvOW2eeunBO89ZcvvVc8RLz4qyQ8rO98xS1jtgqi1NcBPETDrtzthODu/gd0sjB2Tk3TLuB"         + "GVoPXt54a+Oo4JbBJ6h3s0+5eAfGplCbSNq6hN3Jh9YOTw5ZA6GCEy5l8zBaOgjXytd2v2OdSVoEDNiNQRkjJd2rmS2oi"         + "9AyQFR3B7BrPSiDlCcITZFOWgLF5C31Wp/PSHwQhlnh7/6YhnE2y9tzsUvzx0wJXrBADW13+oMxrneDK3WGbxTNYgIi1P"         + "vSqXlqGjHtCK+R2QkXAgMBAAECggEAVc6bu7VAnP6v0gDOeX4razv4FX/adCao9ZsHZ+WPX8PQxtmWYqykH5CY4TSfsui"         + "zAgyPuQ0+j4Vjssr9VODLqFoanspT6YXsvaKanncUYbasNgUJnfnLnw3an2XpU2XdmXTNYckCPRX9nsAAURWT3/n9ljc/"         + "XYY22ecYxM8sDWnHu2uKZ1B7M3X60bQYL5T/lVXkKdD6xgSNLeP4AkRx0H4egaop68hoW8FIwmDPVWYVAvo8etzWCtib"         + "RXz5FcNld9MgD/Ai7ycKy4Q1KhX5GBFI79MVVaHkSQfxPHpr7/XcmpQOEAr+BMPon4s4vnKqAGdGB3j/E3d/+4F2swyko"         + "QKBgQD8hCsp6FIQ5umJlk9/j/nGsMl85LgLaNVYpWlPRKPc54YNumtvj5vx1BG+zMbT7qIE3nmUPTCHP7qb5ERZG4CdMC"         + "S6S64/qzZEqijLCqepwj6j4fV5SyPWEcpxf6ehNdmcfgzVB3Wolfwh1ydhx/96L1jHJcTKchdJJzlfTvq8wwKBgQDeCnK"         + "ws1t5GapfE1rmC/h4olL2qZTth9oQmbrXYohVnoqNFslDa43ePZwL9Jmd9kYb0axOTNMmyrP0NTj41uCfgDS0cJnNTc63"         + "ojKjegxHIyYDKRZNVUR/dxAYB/vPfBYZUS7M89pO6LLsHhzS3qpu3/hppo/Uc/AM /r8PSflNHQKBgDnWgBh6OQncChPUl"         + "OLv9FMZPR1ZOfqLCYrjYEqiuzGm6iKM13zXFO4AGAxu1P/IAd5BovFcTpg79Z8tWqZaUUwvscnl+cRlj+mMXAmdqCeO8V"         + "ASOmqM1ml667axeZDIR867ZG8K5V029Wg+4qtX5uFypNAAi6GfHkxIKrD04yOHAoGACdh4wXESi0oiDdkz3KOHPwIjn6B"         + "hZC7z8mx+pnJODU3cYukxv3WTctlUhAsyjJiQ/0bK1yX87ulqFVgO0Knmh+wNajrb9wiONAJTMICG7tiWJOm7fW5cfTJw"         + "WkBwYADmkfTRmHDvqzQSSvoC2S7aa9QulbC3C/qgGFNrcWgcT9kCgYAZTa1P9bFCDU7hJc2mHwJwAW7/FQKEJg8SL33KI"         + "NpLwcR8fqaYOdAHWWz636osVEqosRrHzJOGpf9x2RSWzQJ+dq8+6fACgfFZOVpN644+sAHfNPAI/gnNKU5OfUv+eav8fB"         + "nzlf1A3y3GIkyMyzFN3DE7e0n/lyqxE4HBYGpI8g==";            private final static PKCS8EncodedKeySpec rsaPrivateKey =         new PKCS8EncodedKeySpec(Base64.getMimeDecoder().decode(base64EncodedRsaPK));            // A pkcs#8 encoded unencrypted EC256 private key as a base64url string.       String base64EncodedEC256PK =         "MIGHAgEAMBMGByqGSM49AgEGCCqGSM49AwEHBG0wawIBAQQg8_zMDQDYAxlU-Q"         + "hk1Dwkf0v18GZca1DMF3SaJ9HPdmShRANCAASNYX5lyVCOZLzFZzrIKmeZ2jwU"         + "RmgsJYxGP__fWN_S-j5sN4tT15XEpN_7QZnt14YvI6uvAgO0uJEboFaZlOEB";            PKCS8EncodedKeySpec ec256PrivateKey =         new PKCS8EncodedKeySpec(Base64.getUrlDecoder().decode(base64EncodedEC256PK));            @Test       public void testVirtualOptions() {         VirtualAuthenticatorOptions options = new VirtualAuthenticatorOptions()           .setIsUserVerified(true)           .setHasUserVerification(true)           .setIsUserConsenting(true)           .setTransport(VirtualAuthenticatorOptions.Transport.USB)           .setProtocol(VirtualAuthenticatorOptions.Protocol.U2F)           .setHasResidentKey(false);              Assertions.assertEquals(6, options.toMap().size());       }            @Test       public void testCreateAuthenticator() {         VirtualAuthenticatorOptions options = new VirtualAuthenticatorOptions()           .setProtocol(VirtualAuthenticatorOptions.Protocol.U2F)           .setHasResidentKey(false);              VirtualAuthenticator authenticator =           ((HasVirtualAuthenticator) driver).addVirtualAuthenticator(options);              List<Credential> credentialList = authenticator.getCredentials();              Assertions.assertEquals(0, credentialList.size());       }            @Test       public void testRemoveAuthenticator() {         VirtualAuthenticatorOptions options = new VirtualAuthenticatorOptions();         VirtualAuthenticator authenticator =           ((HasVirtualAuthenticator) driver).addVirtualAuthenticator(options);              ((HasVirtualAuthenticator) driver).removeVirtualAuthenticator(authenticator);              Assertions.assertThrows(InvalidArgumentException.class, authenticator::getCredentials);       }            @Test       public void testCreateAndAddResidentialKey() {         VirtualAuthenticatorOptions options = new VirtualAuthenticatorOptions()           .setProtocol(VirtualAuthenticatorOptions.Protocol.CTAP2)           .setHasResidentKey(true)           .setHasUserVerification(true)           .setIsUserVerified(true);         VirtualAuthenticator authenticator = ((HasVirtualAuthenticator) driver).addVirtualAuthenticator(options);              byte[] credentialId = {1, 2, 3, 4};         byte[] userHandle = {1};         Credential residentCredential = Credential.createResidentCredential(           credentialId, "localhost", rsaPrivateKey, userHandle, /*signCount=*/0);              authenticator.addCredential(residentCredential);              List<Credential> credentialList = authenticator.getCredentials();         Assertions.assertEquals(1, credentialList.size());              Credential credential = credentialList.get(0);         Assertions.assertArrayEquals(credentialId, credential.getId());       }            @Test       public void testAddResidentCredentialNotSupportedWhenAuthenticatorUsesU2FProtocol() {         VirtualAuthenticatorOptions options = new VirtualAuthenticatorOptions()           .setProtocol(VirtualAuthenticatorOptions.Protocol.U2F)           .setHasResidentKey(true);              VirtualAuthenticator authenticator = ((HasVirtualAuthenticator) driver).addVirtualAuthenticator(options);              PKCS8EncodedKeySpec privateKey =           new PKCS8EncodedKeySpec(Base64.getUrlDecoder().decode(base64EncodedEC256PK));              byte[] credentialId = {1, 2, 3, 4};         byte[] userHandle = {1};         Credential credential = Credential.createResidentCredential(           credentialId, "localhost", privateKey, userHandle, /*signCount=*/0);              Assertions.assertThrows(InvalidArgumentException.class,                                 () -> authenticator.addCredential(credential));       }                 @Test       @Disabled("A fix was implemented and will be available in Selenium 4.34.")       public void testCreateAndAddNonResidentialKey() {         VirtualAuthenticatorOptions options = new VirtualAuthenticatorOptions()           .setProtocol(VirtualAuthenticatorOptions.Protocol.U2F)           .setHasResidentKey(false);              VirtualAuthenticator authenticator = ((HasVirtualAuthenticator) driver).addVirtualAuthenticator(options);              byte[] credentialId = {1, 2, 3, 4};         Credential nonResidentCredential = Credential.createNonResidentCredential(           credentialId, "localhost", ec256PrivateKey, /*signCount=*/0);         authenticator.addCredential(nonResidentCredential);              List<Credential> credentialList = authenticator.getCredentials();         Assertions.assertEquals(1, credentialList.size());              Credential credential = credentialList.get(0);         Assertions.assertArrayEquals(credentialId, credential.getId());       }            @Test       public void testGetCredential() {         VirtualAuthenticatorOptions options = new VirtualAuthenticatorOptions()           .setProtocol(VirtualAuthenticatorOptions.Protocol.CTAP2)           .setHasResidentKey(true)           .setHasUserVerification(true)           .setIsUserVerified(true);         VirtualAuthenticator authenticator = ((HasVirtualAuthenticator) driver).addVirtualAuthenticator(options);              byte[] credentialId = {1, 2, 3, 4};         byte[] userHandle = {1};         Credential residentCredential = Credential.createResidentCredential(           credentialId, "localhost", rsaPrivateKey, userHandle, /*signCount=*/0);              authenticator.addCredential(residentCredential);              List<Credential> credentialList = authenticator.getCredentials();         Assertions.assertEquals(1, credentialList.size());              Credential credential = credentialList.get(0);         Assertions.assertArrayEquals(credentialId, credential.getId());         Assertions.assertArrayEquals(rsaPrivateKey.getEncoded(), credential.getPrivateKey().getEncoded());       }            @Test       public void testRemoveCredential() {         VirtualAuthenticator authenticator =           ((HasVirtualAuthenticator) driver).addVirtualAuthenticator(new VirtualAuthenticatorOptions());              byte[] credentialId = {1, 2, 3, 4};         Credential credential = Credential.createNonResidentCredential(           credentialId, "localhost", rsaPrivateKey, 0);              authenticator.addCredential(credential);              authenticator.removeCredential(credentialId);         Assertions.assertEquals(0, authenticator.getCredentials().size());       }            @Test       public void testRemoveAllCredentials() {         VirtualAuthenticator authenticator =           ((HasVirtualAuthenticator) driver).addVirtualAuthenticator(new VirtualAuthenticatorOptions());              byte[] credentialId = {1, 2, 3, 4};         Credential residentCredential = Credential.createNonResidentCredential(           credentialId, "localhost", rsaPrivateKey, /*signCount=*/0);              authenticator.addCredential(residentCredential);              authenticator.removeAllCredentials();         Assertions.assertEquals(0, authenticator.getCredentials().size());       }            @Test       public void testSetUserVerified() {         VirtualAuthenticatorOptions options = new VirtualAuthenticatorOptions()           .setIsUserVerified(true);              Assertions.assertTrue((boolean) options.toMap().get("isUserVerified"));       }     }                                VirtualAuthenticatorOptions options = new VirtualAuthenticatorOptions()                     .SetIsUserVerified(true);

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/dotnet/SeleniumDocs/Interactions/VirtualAuthenticatorTest.cs#L224-225)

##### examples/dotnet/SeleniumDocs/Interactions/VirtualAuthenticatorTest.cs

Copy  Close               using Microsoft.VisualStudio.TestTools.UnitTesting;     using Microsoft.IdentityModel.Tokens;     using OpenQA.Selenium;     using OpenQA.Selenium.VirtualAuth;     using static OpenQA.Selenium.VirtualAuth.VirtualAuthenticatorOptions;     using System.Collections.Generic;     using System;          namespace SeleniumDocs.VirtualAuthentication     {         [TestClass]         public class VirtualAuthenticatorTest : BaseChromeTest         {             //A pkcs#8 encoded encrypted RSA private key as a base64 string.             private static string base64EncodedRSAPK =                     "MIIEvAIBADANBgkqhkiG9w0BAQEFAASCBKYwggSiAgEAAoIBAQDbBOu5Lhs4vpowbCnmCyLUpIE7JM9sm9QXzye2G+jr+Kr"                   + "MsinWohEce47BFPJlTaDzHSvOW2eeunBO89ZcvvVc8RLz4qyQ8rO98xS1jtgqi1NcBPETDrtzthODu/gd0sjB2Tk3TLuB"                   + "GVoPXt54a+Oo4JbBJ6h3s0+5eAfGplCbSNq6hN3Jh9YOTw5ZA6GCEy5l8zBaOgjXytd2v2OdSVoEDNiNQRkjJd2rmS2oi"                   + "9AyQFR3B7BrPSiDlCcITZFOWgLF5C31Wp/PSHwQhlnh7/6YhnE2y9tzsUvzx0wJXrBADW13+oMxrneDK3WGbxTNYgIi1P"                   + "vSqXlqGjHtCK+R2QkXAgMBAAECggEAVc6bu7VAnP6v0gDOeX4razv4FX/adCao9ZsHZ+WPX8PQxtmWYqykH5CY4TSfsui"                   + "zAgyPuQ0+j4Vjssr9VODLqFoanspT6YXsvaKanncUYbasNgUJnfnLnw3an2XpU2XdmXTNYckCPRX9nsAAURWT3/n9ljc/"                   + "XYY22ecYxM8sDWnHu2uKZ1B7M3X60bQYL5T/lVXkKdD6xgSNLeP4AkRx0H4egaop68hoW8FIwmDPVWYVAvo8etzWCtib"                   + "RXz5FcNld9MgD/Ai7ycKy4Q1KhX5GBFI79MVVaHkSQfxPHpr7/XcmpQOEAr+BMPon4s4vnKqAGdGB3j/E3d/+4F2swyko"                   + "QKBgQD8hCsp6FIQ5umJlk9/j/nGsMl85LgLaNVYpWlPRKPc54YNumtvj5vx1BG+zMbT7qIE3nmUPTCHP7qb5ERZG4CdMC"                   + "S6S64/qzZEqijLCqepwj6j4fV5SyPWEcpxf6ehNdmcfgzVB3Wolfwh1ydhx/96L1jHJcTKchdJJzlfTvq8wwKBgQDeCnK"                   + "ws1t5GapfE1rmC/h4olL2qZTth9oQmbrXYohVnoqNFslDa43ePZwL9Jmd9kYb0axOTNMmyrP0NTj41uCfgDS0cJnNTc63"                   + "ojKjegxHIyYDKRZNVUR/dxAYB/vPfBYZUS7M89pO6LLsHhzS3qpu3/hppo/Uc/AM /r8PSflNHQKBgDnWgBh6OQncChPUl"                   + "OLv9FMZPR1ZOfqLCYrjYEqiuzGm6iKM13zXFO4AGAxu1P/IAd5BovFcTpg79Z8tWqZaUUwvscnl+cRlj+mMXAmdqCeO8V"                   + "ASOmqM1ml667axeZDIR867ZG8K5V029Wg+4qtX5uFypNAAi6GfHkxIKrD04yOHAoGACdh4wXESi0oiDdkz3KOHPwIjn6B"                   + "hZC7z8mx+pnJODU3cYukxv3WTctlUhAsyjJiQ/0bK1yX87ulqFVgO0Knmh+wNajrb9wiONAJTMICG7tiWJOm7fW5cfTJw"                   + "WkBwYADmkfTRmHDvqzQSSvoC2S7aa9QulbC3C/qgGFNrcWgcT9kCgYAZTa1P9bFCDU7hJc2mHwJwAW7/FQKEJg8SL33KI"                   + "NpLwcR8fqaYOdAHWWz636osVEqosRrHzJOGpf9x2RSWzQJ+dq8+6fACgfFZOVpN644+sAHfNPAI/gnNKU5OfUv+eav8fB"                   + "nzlf1A3y3GIkyMyzFN3DE7e0n/lyqxE4HBYGpI8g==";                  private static byte[] bytes = System.Convert.FromBase64String(base64EncodedRSAPK);             private string base64EncodedPK = Base64UrlEncoder.Encode(bytes);                  // A pkcs#8 encoded unencrypted EC256 private key as a base64url string.             private string base64EncodedEC256PK =                   "MIGHAgEAMBMGByqGSM49AgEGCCqGSM49AwEHBG0wawIBAQQg8_zMDQDYAxlU-Q"                   + "hk1Dwkf0v18GZca1DMF3SaJ9HPdmShRANCAASNYX5lyVCOZLzFZzrIKmeZ2jwU"                   + "RmgsJYxGP__fWN_S-j5sN4tT15XEpN_7QZnt14YvI6uvAgO0uJEboFaZlOEB";                       [TestMethod]             public void VirtualOptionsShouldAllowSettingOptions()             {                 // Create virtual authenticator options                 VirtualAuthenticatorOptions options = new VirtualAuthenticatorOptions()                     .SetIsUserVerified(true)                     .SetHasUserVerification(true)                     .SetIsUserConsenting(true)                     .SetTransport(VirtualAuthenticatorOptions.Transport.USB)                     .SetProtocol(VirtualAuthenticatorOptions.Protocol.U2F)                     .SetHasResidentKey(false);                      Assert.AreEqual(6, options.ToDictionary().Count);             }                  [TestMethod]             public void ShouldBeAbleToCreateAuthenticator()             {                 // Create virtual authenticator options                 VirtualAuthenticatorOptions options = new VirtualAuthenticatorOptions()                     .SetProtocol(VirtualAuthenticatorOptions.Protocol.U2F)                     .SetHasResidentKey(false);                      // Register a virtual authenticator                 ((WebDriver)driver).AddVirtualAuthenticator(options);                      List<Credential> credentialList = ((WebDriver)driver).GetCredentials();                      Assert.AreEqual(0, credentialList.Count);             }                       [TestMethod]             public void ShouldBeAbleToRemoveAuthenticator()             {                 VirtualAuthenticatorOptions options = new VirtualAuthenticatorOptions()                     .SetProtocol(VirtualAuthenticatorOptions.Protocol.U2F)                     .SetHasResidentKey(false);                      String virtualAuthenticatorId = ((WebDriver)driver).AddVirtualAuthenticator(options);                      ((WebDriver)driver).RemoveVirtualAuthenticator(virtualAuthenticatorId);                      // Since the authenticator was removed, any operation using it will throw an error                 Assert.ThrowsException<InvalidOperationException>(() => ((WebDriver)driver).GetCredentials());             }                  [TestMethod]             public void ShouldBeAbleToCreateAndAddResidentialKey()             {                 VirtualAuthenticatorOptions options = new VirtualAuthenticatorOptions()                     .SetProtocol(Protocol.CTAP2)                     .SetHasResidentKey(true)                     .SetHasUserVerification(true)                     .SetIsUserVerified(true);                      ((WebDriver)driver).AddVirtualAuthenticator(options);                      byte[] credentialId = { 1, 2, 3, 4 };                 byte[] userHandle = { 1 };                      Credential residentCredential = Credential.CreateResidentCredential(                   credentialId, "localhost", base64EncodedPK, userHandle, 0);                      ((WebDriver)driver).AddCredential(residentCredential);                      List<Credential> credentialList = ((WebDriver)driver).GetCredentials();                 Assert.AreEqual(1, credentialList.Count);                      Credential credential = credentialList[0];                 CollectionAssert.AreEqual(credentialId, credential.Id);             }                  [TestMethod]             public void ShouldNotAddResidentCredentialWhenAuthenticatorUsesU2FProtocol()             {                 VirtualAuthenticatorOptions options = new VirtualAuthenticatorOptions()                     .SetProtocol(VirtualAuthenticatorOptions.Protocol.U2F)                     .SetHasResidentKey(true);                      ((WebDriver)driver).AddVirtualAuthenticator(options);                      byte[] credentialId = { 1, 2, 3, 4 };                 byte[] userHandle = { 1 };                      Credential credential = Credential.CreateResidentCredential(                   credentialId, "localhost", base64EncodedEC256PK, userHandle, 0);                      Assert.ThrowsException<WebDriverArgumentException>(() => ((WebDriver)driver).AddCredential(credential));             }                  [TestMethod]             public void ShouldBeAbleToCreateAndAddNonResidentKey()             {                 VirtualAuthenticatorOptions options = new VirtualAuthenticatorOptions()                     .SetProtocol(VirtualAuthenticatorOptions.Protocol.U2F)                     .SetHasResidentKey(false);                      ((WebDriver)driver).AddVirtualAuthenticator(options);                      byte[] credentialId = { 1, 2, 3, 4 };                      Credential nonResidentCredential = Credential.CreateNonResidentCredential(                   credentialId, "localhost", base64EncodedEC256PK, 0);                      ((WebDriver)driver).AddCredential(nonResidentCredential);                      List<Credential> credentialList = ((WebDriver)driver).GetCredentials();                 Assert.AreEqual(1, credentialList.Count);                      Credential credential = credentialList[0];                 CollectionAssert.AreEqual(credentialId, nonResidentCredential.Id);             }                  [TestMethod]             public void ShouldBeAbleToGetCredential()             {                 VirtualAuthenticatorOptions options = new VirtualAuthenticatorOptions()                     .SetProtocol(Protocol.CTAP2)                     .SetHasResidentKey(true)                     .SetHasUserVerification(true)                     .SetIsUserVerified(true);                      ((WebDriver)driver).AddVirtualAuthenticator(options);                      byte[] credentialId = { 1, 2, 3, 4 };                 byte[] userHandle = { 1 };                      Credential residentCredential = Credential.CreateResidentCredential(                   credentialId, "localhost", base64EncodedPK, userHandle, 0);                      ((WebDriver)driver).AddCredential(residentCredential);                      List<Credential> credentialList = ((WebDriver)driver).GetCredentials();                 Assert.AreEqual(1, credentialList.Count);                      Credential credential = credentialList[0];                 CollectionAssert.AreEqual(credentialId, residentCredential.Id);                 Assert.AreEqual(base64EncodedPK, credential.PrivateKey);             }                  [TestMethod]             public void ShouldBeAbleToRemoveCredential()             {                 ((WebDriver)driver).AddVirtualAuthenticator(new VirtualAuthenticatorOptions());                      byte[] credentialId = { 1, 2, 3, 4 };                      Credential nonResidentCredential = Credential.CreateNonResidentCredential(                   credentialId, "localhost", base64EncodedEC256PK, 0);                      ((WebDriver)driver).AddCredential(nonResidentCredential);                      ((WebDriver)driver).RemoveCredential(credentialId);                      Assert.AreEqual(0, ((WebDriver)driver).GetCredentials().Count);             }                       [TestMethod]             public void ShouldBeAbleToRemoveAllCredentias()             {                 ((WebDriver)driver).AddVirtualAuthenticator(new VirtualAuthenticatorOptions());                      byte[] credentialId = { 1, 2, 3, 4 };                      Credential nonResidentCredential = Credential.CreateNonResidentCredential(                   credentialId, "localhost", base64EncodedEC256PK, 0);                      ((WebDriver)driver).AddCredential(nonResidentCredential);                      ((WebDriver)driver).RemoveAllCredentials();                      Assert.AreEqual(0, ((WebDriver)driver).GetCredentials().Count);             }                  [TestMethod]             public void ShouldBeSetVerifiedOption()             {                 VirtualAuthenticatorOptions options = new VirtualAuthenticatorOptions()                     .SetIsUserVerified(true);                      Assert.IsTrue((bool)options.ToDictionary()["isUserVerified"]);             }         }     }

[Add Example](https://www.selenium.dev/documentation/about/contributing/#creating-examples)                   # Create virtual authenticator options         options = VirtualAuthenticatorOptions()         options.is_user_verified = True

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/python/tests/interactions/test_virtual_authenticator.py#L245-L247)

##### examples/python/tests/interactions/test\_virtual\_authenticator.py

Copy  Close               import pytest     from base64 import urlsafe_b64decode, urlsafe_b64encode          from selenium.common.exceptions import InvalidArgumentException     from selenium.webdriver.chrome.webdriver import WebDriver     from selenium.webdriver.common.virtual_authenticator import (         Credential,         VirtualAuthenticatorOptions,     )               BASE64__ENCODED_PK = '''     MIIEvAIBADANBgkqhkiG9w0BAQEFAASCBKYwggSiAgEAAoIBAQDbBOu5Lhs4vpowbCnmCyLUpIE7JM9sm9QXzye2G+jr+Kr     MsinWohEce47BFPJlTaDzHSvOW2eeunBO89ZcvvVc8RLz4qyQ8rO98xS1jtgqi1NcBPETDrtzthODu/gd0sjB2Tk3TLuBGV     oPXt54a+Oo4JbBJ6h3s0+5eAfGplCbSNq6hN3Jh9YOTw5ZA6GCEy5l8zBaOgjXytd2v2OdSVoEDNiNQRkjJd2rmS2oi9AyQ     FR3B7BrPSiDlCcITZFOWgLF5C31Wp/PSHwQhlnh7/6YhnE2y9tzsUvzx0wJXrBADW13+oMxrneDK3WGbxTNYgIi1PvSqXlq     GjHtCK+R2QkXAgMBAAECggEAVc6bu7VAnP6v0gDOeX4razv4FX/adCao9ZsHZ+WPX8PQxtmWYqykH5CY4TSfsuizAgyPuQ0     +j4Vjssr9VODLqFoanspT6YXsvaKanncUYbasNgUJnfnLnw3an2XpU2XdmXTNYckCPRX9nsAAURWT3/n9ljc/XYY22ecYxM     8sDWnHu2uKZ1B7M3X60bQYL5T/lVXkKdD6xgSNLeP4AkRx0H4egaop68hoW8FIwmDPVWYVAvo8etzWCtibRXz5FcNld9MgD     /Ai7ycKy4Q1KhX5GBFI79MVVaHkSQfxPHpr7/XcmpQOEAr+BMPon4s4vnKqAGdGB3j/E3d/+4F2swykoQKBgQD8hCsp6FIQ     5umJlk9/j/nGsMl85LgLaNVYpWlPRKPc54YNumtvj5vx1BG+zMbT7qIE3nmUPTCHP7qb5ERZG4CdMCS6S64/qzZEqijLCqe     pwj6j4fV5SyPWEcpxf6ehNdmcfgzVB3Wolfwh1ydhx/96L1jHJcTKchdJJzlfTvq8wwKBgQDeCnKws1t5GapfE1rmC/h4ol     L2qZTth9oQmbrXYohVnoqNFslDa43ePZwL9Jmd9kYb0axOTNMmyrP0NTj41uCfgDS0cJnNTc63ojKjegxHIyYDKRZNVUR/d     xAYB/vPfBYZUS7M89pO6LLsHhzS3qpu3/hppo/Uc/AM/r8PSflNHQKBgDnWgBh6OQncChPUlOLv9FMZPR1ZOfqLCYrjYEqi     uzGm6iKM13zXFO4AGAxu1P/IAd5BovFcTpg79Z8tWqZaUUwvscnl+cRlj+mMXAmdqCeO8VASOmqM1ml667axeZDIR867ZG8     K5V029Wg+4qtX5uFypNAAi6GfHkxIKrD04yOHAoGACdh4wXESi0oiDdkz3KOHPwIjn6BhZC7z8mx+pnJODU3cYukxv3WTct     lUhAsyjJiQ/0bK1yX87ulqFVgO0Knmh+wNajrb9wiONAJTMICG7tiWJOm7fW5cfTJwWkBwYADmkfTRmHDvqzQSSvoC2S7aa     9QulbC3C/qgGFNrcWgcT9kCgYAZTa1P9bFCDU7hJc2mHwJwAW7/FQKEJg8SL33KINpLwcR8fqaYOdAHWWz636osVEqosRrH     zJOGpf9x2RSWzQJ+dq8+6fACgfFZOVpN644+sAHfNPAI/gnNKU5OfUv+eav8fBnzlf1A3y3GIkyMyzFN3DE7e0n/lyqxE4H     BYGpI8g==     '''               @pytest.fixture(scope="module", autouse=True)     def driver():         yield WebDriver()               def test_virtual_authenticator_options():         options = VirtualAuthenticatorOptions()         options.is_user_verified = True         options.has_user_verification = True         options.is_user_consenting = True         options.transport = VirtualAuthenticatorOptions.Transport.USB         options.protocol = VirtualAuthenticatorOptions.Protocol.U2F         options.has_resident_key = False              assert len(options.to_dict()) == 6               def test_add_authenticator(driver):         # Create virtual authenticator options         options = VirtualAuthenticatorOptions()         options.protocol = VirtualAuthenticatorOptions.Protocol.U2F         options.has_resident_key = False              # Register a virtual authenticator         driver.add_virtual_authenticator(options)              # Get list of credentials         credential_list = driver.get_credentials()              assert len(credential_list) == 0               def test_remove_authenticator(driver):         # Create default virtual authenticator option         options = VirtualAuthenticatorOptions()              # Register a virtual authenticator         driver.add_virtual_authenticator(options)              # Remove virtual authenticator         driver.remove_virtual_authenticator()         assert driver.virtual_authenticator_id is None               def test_create_and_add_resident_key(driver):         # Create virtual authenticator options         options = VirtualAuthenticatorOptions()         options.protocol = VirtualAuthenticatorOptions.Protocol.CTAP2         options.has_resident_key = True         options.has_user_verification = True         options.is_user_verified = True              # Register a virtual authenticator         driver.add_virtual_authenticator(options)              # parameters for Resident Credential         credential_id = bytearray({1, 2, 3, 4})         rp_id = "localhost"         user_handle = bytearray({1})         privatekey = urlsafe_b64decode(BASE64__ENCODED_PK)         sign_count = 0              # create a resident credential using above parameters         resident_credential = Credential.create_resident_credential(credential_id, rp_id, user_handle, privatekey, sign_count)              # add the credential created to virtual authenticator         driver.add_credential(resident_credential)              # get list of all the registered credentials          credential_list = driver.get_credentials()         assert len(credential_list) == 1               def test_add_resident_credential_not_supported_when_authenticator_uses_u2f_protocol(driver):         # Create virtual authenticator options         options = VirtualAuthenticatorOptions()         options.protocol = VirtualAuthenticatorOptions.Protocol.U2F         options.has_resident_key = False              # Register a virtual authenticator         driver.add_virtual_authenticator(options)              # parameters for Resident Credential         credential_id = bytearray({1, 2, 3, 4})         rp_id = "localhost"         user_handle = bytearray({1})         privatekey = urlsafe_b64decode(BASE64__ENCODED_PK)         sign_count = 0              # create a  resident credential using above parameters         credential = Credential.create_resident_credential(credential_id, rp_id, user_handle, privatekey, sign_count)              # Expect InvalidArgumentException          with pytest.raises(InvalidArgumentException):             driver.add_credential(credential)               def test_create_and_add_non_resident_key(driver):         # Create virtual authenticator options         options = VirtualAuthenticatorOptions()         options.protocol = VirtualAuthenticatorOptions.Protocol.U2F         options.has_resident_key = False              # Register a virtual authenticator         driver.add_virtual_authenticator(options)              # parameters for Non Resident Credential         credential_id = bytearray({1, 2, 3, 4})         rp_id = "localhost"         privatekey = urlsafe_b64decode(BASE64__ENCODED_PK)         sign_count = 0              # create a non resident credential using above parameters         credential = Credential.create_non_resident_credential(credential_id, rp_id, privatekey, sign_count)              # add the credential created to virtual authenticator         driver.add_credential(credential)                  # get list of all the registered credentials          credential_list = driver.get_credentials()         assert len(credential_list) == 1                    def test_get_credential(driver):         # Create virtual authenticator options         options = VirtualAuthenticatorOptions()         options.protocol = VirtualAuthenticatorOptions.Protocol.CTAP2         options.has_resident_key = True         options.has_user_verfied = True         options.is_user_verified = True              # Register a virtual authenticator         driver.add_virtual_authenticator(options)              # parameters for Resident Credential         credential_id = bytearray({1, 2, 3, 4})         rp_id = "localhost"         user_handle = bytearray({1})         privatekey = urlsafe_b64decode(BASE64__ENCODED_PK)         sign_count = 0              # create a resident credential using above parameters         credential = Credential.create_resident_credential(credential_id, rp_id, user_handle, privatekey, sign_count)                  # add the credential created to virtual authenticator         driver.add_credential(credential)              # get list of all the registered credentials          credential_list = driver.get_credentials()              assert len(credential_list) == 1         assert credential_list[0].id == urlsafe_b64encode(credential_id).decode()               def test_remove_credential(driver):         # Create default virtual authenticator options         options = VirtualAuthenticatorOptions()              # Register a virtual authenticator         driver.add_virtual_authenticator(options)              # parameters for Non Resident Credential         credential_id = bytearray({1, 2, 3, 4})         rp_id = "localhost"         privatekey = urlsafe_b64decode(BASE64__ENCODED_PK)         sign_count = 0              # create a non resident credential using above parameters         credential = Credential.create_non_resident_credential(credential_id, rp_id, privatekey, sign_count)              # add the credential created to virtual authenticator         driver.add_credential(credential)              # remove the credential created from virtual authenticator         driver.remove_credential(credential.id)              # credential can also be removed using Byte Array         # driver.remove_credential(credential_id)               assert len(driver.get_credentials()) == 0               def test_remove_all_credentials(driver):         # Create default virtual authenticator options         options = VirtualAuthenticatorOptions()         options.has_resident_key = True              # Register a virtual authenticator         driver.add_virtual_authenticator(options)              # parameters for Resident Credential         credential_id = bytearray({1, 2, 3, 4})         rp_id = "localhost"         user_handle = bytearray({1})         privatekey = urlsafe_b64decode(BASE64__ENCODED_PK)         sign_count = 0              # create a resident credential using above parameters         resident_credential = Credential.create_resident_credential(credential_id, rp_id, user_handle, privatekey, sign_count)                  # add the credential created to virtual authenticator         driver.add_credential(resident_credential)              # remove all credentials in virtual authenticator         driver.remove_all_credentials()              assert len(driver.get_credentials()) == 0               def test_set_user_verified():         # Create virtual authenticator options         options = VirtualAuthenticatorOptions()         options.is_user_verified = True              assert options.to_dict().get("isUserVerified") is True                   options.setIsUserVerified(true);

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/javascript/test/virtual_authenticator/virtualAuthenticator.spec.js#L197-L197)

##### examples/javascript/test/virtual\_authenticator/virtualAuthenticator.spec.js

Copy  Close               const { Builder} = require("selenium-webdriver");     const { Credential, VirtualAuthenticatorOptions, Transport, Protocol } = require("selenium-webdriver/lib/virtual_authenticator");     const assert = require('assert')     const { InvalidArgumentError } = require("selenium-webdriver/lib/error");               describe('Virtual authenticator', function() {       const BASE64_ENCODED_PK =         "MIIEvAIBADANBgkqhkiG9w0BAQEFAASCBKYwggSiAgEAAoIBAQDbBOu5Lhs4vpowbCnmCyLUpIE7JM9sm9QXzye2G+jr+Kr" +         "MsinWohEce47BFPJlTaDzHSvOW2eeunBO89ZcvvVc8RLz4qyQ8rO98xS1jtgqi1NcBPETDrtzthODu/gd0sjB2Tk3TLuBGV" +         "oPXt54a+Oo4JbBJ6h3s0+5eAfGplCbSNq6hN3Jh9YOTw5ZA6GCEy5l8zBaOgjXytd2v2OdSVoEDNiNQRkjJd2rmS2oi9AyQ" +         "FR3B7BrPSiDlCcITZFOWgLF5C31Wp/PSHwQhlnh7/6YhnE2y9tzsUvzx0wJXrBADW13+oMxrneDK3WGbxTNYgIi1PvSqXlq" +         "GjHtCK+R2QkXAgMBAAECggEAVc6bu7VAnP6v0gDOeX4razv4FX/adCao9ZsHZ+WPX8PQxtmWYqykH5CY4TSfsuizAgyPuQ0" +         "+j4Vjssr9VODLqFoanspT6YXsvaKanncUYbasNgUJnfnLnw3an2XpU2XdmXTNYckCPRX9nsAAURWT3/n9ljc/XYY22ecYxM" +         "8sDWnHu2uKZ1B7M3X60bQYL5T/lVXkKdD6xgSNLeP4AkRx0H4egaop68hoW8FIwmDPVWYVAvo8etzWCtibRXz5FcNld9MgD" +         "/Ai7ycKy4Q1KhX5GBFI79MVVaHkSQfxPHpr7/XcmpQOEAr+BMPon4s4vnKqAGdGB3j/E3d/+4F2swykoQKBgQD8hCsp6FIQ" +         "5umJlk9/j/nGsMl85LgLaNVYpWlPRKPc54YNumtvj5vx1BG+zMbT7qIE3nmUPTCHP7qb5ERZG4CdMCS6S64/qzZEqijLCqe" +         "pwj6j4fV5SyPWEcpxf6ehNdmcfgzVB3Wolfwh1ydhx/96L1jHJcTKchdJJzlfTvq8wwKBgQDeCnKws1t5GapfE1rmC/h4ol" +         "L2qZTth9oQmbrXYohVnoqNFslDa43ePZwL9Jmd9kYb0axOTNMmyrP0NTj41uCfgDS0cJnNTc63ojKjegxHIyYDKRZNVUR/d" +         "xAYB/vPfBYZUS7M89pO6LLsHhzS3qpu3/hppo/Uc/AM/r8PSflNHQKBgDnWgBh6OQncChPUlOLv9FMZPR1ZOfqLCYrjYEqi" +         "uzGm6iKM13zXFO4AGAxu1P/IAd5BovFcTpg79Z8tWqZaUUwvscnl+cRlj+mMXAmdqCeO8VASOmqM1ml667axeZDIR867ZG8" +         "K5V029Wg+4qtX5uFypNAAi6GfHkxIKrD04yOHAoGACdh4wXESi0oiDdkz3KOHPwIjn6BhZC7z8mx+pnJODU3cYukxv3WTct" +         "lUhAsyjJiQ/0bK1yX87ulqFVgO0Knmh+wNajrb9wiONAJTMICG7tiWJOm7fW5cfTJwWkBwYADmkfTRmHDvqzQSSvoC2S7aa" +         "9QulbC3C/qgGFNrcWgcT9kCgYAZTa1P9bFCDU7hJc2mHwJwAW7/FQKEJg8SL33KINpLwcR8fqaYOdAHWWz636osVEqosRrH" +         "zJOGpf9x2RSWzQJ+dq8+6fACgfFZOVpN644+sAHfNPAI/gnNKU5OfUv+eav8fBnzlf1A3y3GIkyMyzFN3DE7e0n/lyqxE4H" +         "BYGpI8g==";            const base64EncodedPK =         "MIGHAgEAMBMGByqGSM49AgEGCCqGSM49AwEHBG0wawIBAQQg8_zMDQDYAxlU-Q" +         "hk1Dwkf0v18GZca1DMF3SaJ9HPdmShRANCAASNYX5lyVCOZLzFZzrIKmeZ2jwU" +         "RmgsJYxGP__fWN_S-j5sN4tT15XEpN_7QZnt14YvI6uvAgO0uJEboFaZlOEB";            let options;       let driver;            before(async function() {         options = new VirtualAuthenticatorOptions();         driver = await new Builder().forBrowser('chrome').build();       });            after(async() => await driver.quit());            function arraysEqual(array1, array2) {         return (array1.length === array2.length &&           array1.every((item) => array2.includes(item)) &&           array2.every((item) => array1.includes(item)));       }            it('Register a virtual authenticator', async function() {         options.setProtocol(Protocol['U2F']);         options.setHasResidentKey(false);              // Register a virtual authenticator         await driver.addVirtualAuthenticator(options);         let credentialList = await driver.getCredentials();              assert.equal(0, credentialList.length);       });            it('Remove authenticator', async function() {         await driver.addVirtualAuthenticator(options);         await driver.removeVirtualAuthenticator();              // Since the authenticator was removed, any operation using it will throw an error         try {           await driver.getCredentials()         }         catch (e) {           if (e instanceof InvalidArgumentError) {             assert(true)           }           else {             assert(false)           }         }       });            it('Createa and add residential key', async function() {         options.setProtocol(Protocol['CTAP2']);         options.setHasResidentKey(true);         options.setHasUserVerification(true);         options.setIsUserVerified(true);              await driver.addVirtualAuthenticator(options);              let residentCredential = new Credential().createResidentCredential(           new Uint8Array([1, 2, 3, 4]),           'localhost',           new Uint8Array([1]),           Buffer.from(BASE64_ENCODED_PK, 'base64').toString('binary'),           0);              await driver.addCredential(residentCredential);         let credentialList = await driver.getCredentials();         assert.equal(1, credentialList.length);              let credential_id = credentialList[0].id();         let test_id = new Uint8Array([1, 2, 3, 4]);              assert(arraysEqual(credential_id, test_id));       });            it('Add resident credential not supported when authenticator uses U2F protocol', async function() {         options.setProtocol(Protocol['U2F']);         options.setHasResidentKey(true);              await driver.addVirtualAuthenticator(options);              let credential = new Credential().createResidentCredential(           new Uint8Array([1, 2, 3, 4]),           'localhost',           new Uint8Array([1]),           Buffer.from(base64EncodedPK, 'base64').toString('binary'),           0);              try {           await driver.addCredential(credential)         }         catch (e) {           if (e instanceof InvalidArgumentError) {             assert(true)           }           else {             assert(false)           }         }       });            it('Create and add non residential key', async function() {         options.setProtocol(Protocol['U2F']);         options.setHasResidentKey(false);              await driver.addVirtualAuthenticator(options);              let nonResidentCredential = new Credential().createNonResidentCredential(           new Uint8Array([1, 2, 3, 4]),           'localhost',           Buffer.from(base64EncodedPK, 'base64').toString('binary'),           0);              await driver.addCredential(nonResidentCredential);              let credentialList = await driver.getCredentials();         assert.equal(1, credentialList.length);              let credential_id = credentialList[0].id();         let test_id = new Uint8Array([1, 2, 3, 4]);              assert(arraysEqual(credential_id, test_id));       });            it('Get credential', async function() {         options.setProtocol(Protocol['CTAP2']);         options.setHasResidentKey(true);         options.setHasUserVerification(true);         options.setIsUserVerified(true);              await driver.addVirtualAuthenticator(options);              let residentCredential = new Credential().createResidentCredential(           new Uint8Array([1, 2, 3, 4]),           'localhost',           new Uint8Array([1]),           Buffer.from(BASE64_ENCODED_PK, 'base64').toString('binary'),           0);              await driver.addCredential(residentCredential);              let credentialList = await driver.getCredentials();         assert.equal(1, credentialList.length);              let credential_id = credentialList[0].id();         let test_id = new Uint8Array([1, 2, 3, 4]);              assert(arraysEqual(credential_id, test_id));         assert.equal(BASE64_ENCODED_PK, Buffer.from(credentialList[0].privateKey(), 'binary').toString('base64'));       });            it('Remove all credentials', async function() {         await driver.addVirtualAuthenticator(options);              let nonResidentCredential = new Credential().createNonResidentCredential(           new Uint8Array([1, 2, 3, 4]),           'localhost',           Buffer.from(BASE64_ENCODED_PK, 'base64').toString('binary'),           0);              await driver.addCredential(nonResidentCredential);         await driver.removeAllCredentials();              let credentialList = await driver.getCredentials();         assert.equal(0, credentialList.length);       });            it('Set is user verified', async function() {         options.setIsUserVerified(true);         assert.equal(options.getIsUserVerified(), true);       });     });

[Add Example](https://www.selenium.dev/documentation/about/contributing/#creating-examples)