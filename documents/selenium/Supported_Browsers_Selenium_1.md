# Supported Browsers | Selenium

**URL:** https://www.selenium.dev/documentation/webdriver/browsers/_print
**Word Count:** 13748
**Links Count:** 464
**Scraped:** 2025-07-17 06:17:48
**Status:** completed

---

This is the multi-page printable view of this section. Click here to print.

[Return to the regular view of this page](https://www.selenium.dev/documentation/webdriver/browsers/).

# Supported Browsers

  * 1: Chrome specific functionality   * 2: Edge specific functionality   * 3: Firefox specific functionality   * 4: IE specific functionality   * 5: Safari specific functionality

Each browser has custom capabilities and unique features.

# 1 - Chrome specific functionality

These are capabilities and features specific to Google Chrome browsers.

By default, Selenium 4 is compatible with Chrome v75 and greater. Note that the version of the Chrome browser and the version of chromedriver must match the major version.

## Options

Capabilities common to all browsers are described on the [Options page](https://www.selenium.dev/documentation/webdriver/drivers/options/).

Capabilities unique to Chrome and Chromium are documented at Google’s page for [Capabilities & ChromeOptions](https://chromedriver.chromium.org/capabilities)

Starting a Chrome session with basic defined options looks like this:

  * Java   * Python   * CSharp   * Ruby   * JavaScript   * Kotlin

                  ChromeOptions options = getDefaultChromeOptions();         driver = new ChromeDriver(options);

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk//examples/java/src/test/java/dev/selenium/browsers/ChromeTest.java#L36-L37)

##### /examples/java/src/test/java/dev/selenium/browsers/ChromeTest.java

Copy  Close               package dev.selenium.browsers;          import dev.selenium.BaseTest;     import java.io.File;     import java.io.IOException;     import java.io.PrintStream;     import java.nio.file.Files;     import java.nio.file.Path;     import java.nio.file.Paths;     import java.util.List;     import java.util.Map;     import java.util.logging.Level;     import java.util.regex.Pattern;     import org.junit.jupiter.api.AfterEach;     import org.junit.jupiter.api.Assertions;     import org.junit.jupiter.api.Test;     import org.openqa.selenium.By;     import org.openqa.selenium.WebElement;     import org.openqa.selenium.chrome.ChromeDriver;     import org.openqa.selenium.chrome.ChromeDriverService;     import org.openqa.selenium.chrome.ChromeOptions;     import org.openqa.selenium.chromium.ChromiumDriverLogLevel;     import org.openqa.selenium.chromium.ChromiumNetworkConditions;     import org.openqa.selenium.logging.*;     import org.openqa.selenium.remote.service.DriverFinder;          public class ChromeTest extends BaseTest {       @AfterEach       public void clearProperties() {         System.clearProperty(ChromeDriverService.CHROME_DRIVER_LOG_PROPERTY);         System.clearProperty(ChromeDriverService.CHROME_DRIVER_LOG_LEVEL_PROPERTY);       }            @Test       public void basicOptions() {         ChromeOptions options = getDefaultChromeOptions();         driver = new ChromeDriver(options);       }            @Test       public void arguments() {         ChromeOptions options = getDefaultChromeOptions();              options.addArguments("--start-maximized");              driver = new ChromeDriver(options);       }            @Test       public void setBrowserLocation() {         ChromeOptions options = getDefaultChromeOptions();              options.setBinary(getChromeLocation());              driver = new ChromeDriver(options);       }            @Test       public void extensionOptions() {         ChromeOptions options = getDefaultChromeOptions();         Path path = Paths.get("src/test/resources/extensions/webextensions-selenium-example.crx");         File extensionFilePath = new File(path.toUri());              options.addExtensions(extensionFilePath);         options.addArguments("--disable-features=DisableLoadExtensionCommandLineSwitch");              driver = new ChromeDriver(options);         driver.get("https://www.selenium.dev/selenium/web/blank.html");         WebElement injected = driver.findElement(By.id("webextensions-selenium-example"));         Assertions.assertEquals(             "Content injected by webextensions-selenium-example", injected.getText());       }            @Test       public void excludeSwitches() {         ChromeOptions options = getDefaultChromeOptions();              options.setExperimentalOption("excludeSwitches", List.of("disable-popup-blocking"));              driver = new ChromeDriver(options);       }            @Test       public void loggingPreferences() {         ChromeOptions options = getDefaultChromeOptions();         LoggingPreferences logPrefs = new LoggingPreferences();         logPrefs.enable(LogType.PERFORMANCE, Level.ALL);         options.setCapability(ChromeOptions.LOGGING_PREFS, logPrefs);              driver = new ChromeDriver(options);         driver.get("https://www.selenium.dev");              LogEntries logEntries = driver.manage().logs().get(LogType.PERFORMANCE);         Assertions.assertFalse(logEntries.getAll().isEmpty());       }            @Test       public void logsToFile() throws IOException {         File logLocation = getTempFile("logsToFile", ".log");         ChromeDriverService service =             new ChromeDriverService.Builder().withLogFile(logLocation).build();              driver = new ChromeDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         Assertions.assertTrue(fileContent.contains("Starting ChromeDriver"));       }            @Test       public void logsToConsole() throws IOException {         File logLocation = getTempFile("logsToConsole", ".log");         System.setOut(new PrintStream(logLocation));              ChromeDriverService service =             new ChromeDriverService.Builder().withLogOutput(System.out).build();              driver = new ChromeDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         Assertions.assertTrue(fileContent.contains("Starting ChromeDriver"));       }            @Test       public void logsWithLevel() throws IOException {         File logLocation = getTempFile("logsWithLevel", ".log");         System.setProperty(             ChromeDriverService.CHROME_DRIVER_LOG_PROPERTY, logLocation.getAbsolutePath());              ChromeDriverService service =             new ChromeDriverService.Builder().withLogLevel(ChromiumDriverLogLevel.DEBUG).build();              driver = new ChromeDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         Assertions.assertTrue(fileContent.contains("[DEBUG]:"));       }            @Test       public void configureDriverLogs() throws IOException {         File logLocation = getTempFile("configureDriverLogs", ".log");         System.setProperty(             ChromeDriverService.CHROME_DRIVER_LOG_PROPERTY, logLocation.getAbsolutePath());         System.setProperty(             ChromeDriverService.CHROME_DRIVER_LOG_LEVEL_PROPERTY,             ChromiumDriverLogLevel.DEBUG.toString());              ChromeDriverService service =             new ChromeDriverService.Builder().withAppendLog(true).withReadableTimestamp(true).build();              driver = new ChromeDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         Pattern pattern = Pattern.compile("\\[\\d\\d-\\d\\d-\\d\\d\\d\\d", Pattern.CASE_INSENSITIVE);         Assertions.assertTrue(pattern.matcher(fileContent).find());       }            @Test       public void disableBuildChecks() throws IOException {         File logLocation = getTempFile("disableBuildChecks", ".log");         System.setProperty(             ChromeDriverService.CHROME_DRIVER_LOG_PROPERTY, logLocation.getAbsolutePath());         System.setProperty(             ChromeDriverService.CHROME_DRIVER_LOG_LEVEL_PROPERTY,             ChromiumDriverLogLevel.WARNING.toString());              ChromeDriverService service =             new ChromeDriverService.Builder().withBuildCheckDisabled(true).build();              driver = new ChromeDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         String expected =             "[WARNING]: You are using an unsupported command-line switch: --disable-build-check";         Assertions.assertTrue(fileContent.contains(expected));       }            private File getChromeLocation() {         ChromeOptions options = getDefaultChromeOptions();         options.setBrowserVersion("stable");         DriverFinder finder = new DriverFinder(ChromeDriverService.createDefaultService(), options);         return new File(finder.getBrowserPath());       }            @Test       public void setPermission() {         ChromeDriver driver = new ChromeDriver();         driver.get("https://www.selenium.dev");              driver.setPermission("camera", "denied");              // Verify the permission state is 'denied'         String script = "return navigator.permissions.query({ name: 'camera' })" +                 "    .then(permissionStatus => permissionStatus.state);";         String permissionState = (String) driver.executeScript(script);              Assertions.assertEquals("denied", permissionState);         driver.quit();       }            @Test       public void setNetworkConditions() {         driver = new ChromeDriver();              ChromiumNetworkConditions networkConditions = new ChromiumNetworkConditions();         networkConditions.setOffline(false);         networkConditions.setLatency(java.time.Duration.ofMillis(20)); // 20 ms of latency         networkConditions.setDownloadThroughput(2000 * 1024 / 8); // 2000 kbps         networkConditions.setUploadThroughput(2000 * 1024 / 8);   // 2000 kbps              ((ChromeDriver) driver).setNetworkConditions(networkConditions);              driver.get("https://www.selenium.dev");              // Assert the network conditions are set as expected         ChromiumNetworkConditions actualConditions = ((ChromeDriver) driver).getNetworkConditions();         Assertions.assertAll(             () -> Assertions.assertEquals(networkConditions.getOffline(), actualConditions.getOffline()),             () -> Assertions.assertEquals(networkConditions.getLatency(), actualConditions.getLatency()),             () -> Assertions.assertEquals(networkConditions.getDownloadThroughput(), actualConditions.getDownloadThroughput()),             () -> Assertions.assertEquals(networkConditions.getUploadThroughput(), actualConditions.getUploadThroughput())         );         ((ChromeDriver) driver).deleteNetworkConditions();         driver.quit();       }            @Test       public void castFeatures() {         ChromeDriver driver = new ChromeDriver();              List<Map<String, String>> sinks = driver.getCastSinks();         if (!sinks.isEmpty()) {           String sinkName = sinks.get(0).get("name");           driver.startTabMirroring(sinkName);           driver.stopCasting(sinkName);         }              driver.quit();       }            @Test       public void getBrowserLogs() {         ChromeDriver driver = new ChromeDriver();         driver.get("https://www.selenium.dev/selenium/web/bidi/logEntryAdded.html");         WebElement consoleLogButton = driver.findElement(By.id("consoleError"));         consoleLogButton.click();              LogEntries logs = driver.manage().logs().get(LogType.BROWSER);              // Assert that at least one log contains the expected message         boolean logFound = false;         for (LogEntry log : logs) {           if (log.getMessage().contains("I am console error")) {             logFound = true;             break;           }         }              Assertions.assertTrue(logFound, "No matching log message found.");         driver.quit();       }     }                        options = get_default_chrome_options()         driver = webdriver.Chrome(options=options)

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk//examples/python/tests/browsers/test_chrome.py#L9-L10)

##### /examples/python/tests/browsers/test\_chrome.py

Copy  Close               import os     import re     import subprocess     import pytest     from selenium import webdriver     from selenium.webdriver.common.by import By          def test_basic_options():         options = get_default_chrome_options()         driver = webdriver.Chrome(options=options)              driver.quit()               def test_args():         options = get_default_chrome_options()              options.add_argument("--start-maximized")              driver = webdriver.Chrome(options=options)         driver.get('http://selenium.dev')              driver.quit()               def test_set_browser_location(chrome_bin):         options = get_default_chrome_options()              options.binary_location = chrome_bin              driver = webdriver.Chrome(options=options)              driver.quit()               def test_add_extension():         options = get_default_chrome_options()         extension_file_path = os.path.abspath("tests/extensions/webextensions-selenium-example.crx")              options.add_extension(extension_file_path)              driver = webdriver.Chrome(options=options)         driver.get("https://www.selenium.dev/selenium/web/blank.html")              driver.quit()               def test_keep_browser_open():         options = get_default_chrome_options()              options.add_experimental_option("detach", True)              driver = webdriver.Chrome(options=options)         driver.get('http://selenium.dev')              driver.quit()               def test_exclude_switches():         options = get_default_chrome_options()              options.add_experimental_option('excludeSwitches', ['disable-popup-blocking'])              driver = webdriver.Chrome(options=options)         driver.get('http://selenium.dev')              driver.quit()               def test_log_to_file(log_path):         service = webdriver.ChromeService(log_output=log_path)              driver = webdriver.Chrome(service=service)              with open(log_path, 'r') as fp:             assert "Starting ChromeDriver" in fp.readline()              driver.quit()               def test_log_to_stdout(capfd):         service = webdriver.ChromeService(log_output=subprocess.STDOUT)              driver = webdriver.Chrome(service=service)              out, err = capfd.readouterr()         assert "Starting ChromeDriver" in out              driver.quit()               def test_log_level(capfd):         service = webdriver.ChromeService(service_args=['--log-level=DEBUG'], log_output=subprocess.STDOUT)              driver = webdriver.Chrome(service=service)              out, err = capfd.readouterr()         assert '[DEBUG]' in err              driver.quit()               def test_log_features(log_path):         service = webdriver.ChromeService(service_args=['--append-log', '--readable-timestamp'], log_output=log_path)              driver = webdriver.Chrome(service=service)              with open(log_path, 'r') as f:             assert re.match(r"\[\d\d-\d\d-\d\d\d\d", f.read())              driver.quit()               def test_build_checks(capfd):         service = webdriver.ChromeService(service_args=['--disable-build-check'], log_output=subprocess.STDOUT)              driver = webdriver.Chrome(service=service)              expected = "[WARNING]: You are using an unsupported command-line switch: --disable-build-check"         out, err = capfd.readouterr()         assert expected in err              driver.quit()               def test_set_network_conditions():         driver = webdriver.Chrome()              network_conditions = {             "offline": False,             "latency": 20,  # 20 ms of latency             "download_throughput": 2000 * 1024 / 8,  # 2000 kbps             "upload_throughput": 2000 * 1024 / 8,    # 2000 kbps         }         driver.set_network_conditions(**network_conditions)              driver.get("https://www.selenium.dev")              # check whether the network conditions are set         assert driver.get_network_conditions() == network_conditions              driver.quit()               def test_set_permissions():         driver = webdriver.Chrome()         driver.get('https://www.selenium.dev')              driver.set_permissions('camera', 'denied')              assert get_permission_state(driver, 'camera') == 'denied'         driver.quit()               def get_permission_state(driver, name):         """Helper function to query the permission state."""         script = """         const callback = arguments[arguments.length - 1];         navigator.permissions.query({name: arguments[0]}).then(permissionStatus => {             callback(permissionStatus.state);         });         """         return driver.execute_async_script(script, name)               def test_cast_features():         driver = webdriver.Chrome()              try:             sinks = driver.get_sinks()             if sinks:                 sink_name = sinks[0]['name']                 driver.start_tab_mirroring(sink_name)                 driver.stop_casting(sink_name)             else:                 pytest.skip("No available Cast sinks to test with.")         finally:             driver.quit()               def test_get_browser_logs():         driver = webdriver.Chrome()         driver.get("https://www.selenium.dev/selenium/web/bidi/logEntryAdded.html")         driver.find_element(By.ID, "consoleError").click()              logs = driver.get_log("browser")              # Assert that at least one log contains the expected message         assert any("I am console error" in log['message'] for log in logs), "No matching log message found."         driver.quit()          def get_default_chrome_options():         options = webdriver.ChromeOptions()         options.add_argument("--no-sandbox")         return options                                var options = new ChromeOptions();                 driver = new ChromeDriver(options);

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk//examples/dotnet/SeleniumDocs/Browsers/ChromeTest.cs#L30-L31)

##### /examples/dotnet/SeleniumDocs/Browsers/ChromeTest.cs

Copy  Close               using System;     using System.IO;     using System.Linq;     using System.Text.RegularExpressions;     using Microsoft.VisualStudio.TestTools.UnitTesting;     using OpenQA.Selenium;     using OpenQA.Selenium.Chrome;          namespace SeleniumDocs.Browsers     {         [TestClass]         public class ChromeTest         {             private ChromeDriver driver;             private string _logLocation;                  [TestCleanup]             public void Cleanup()             {                 if (_logLocation != null && File.Exists(_logLocation))                 {                     File.Delete(_logLocation);                 }                 driver.Quit();             }                  [TestMethod]             public void BasicOptions()             {                 var options = new ChromeOptions();                 driver = new ChromeDriver(options);             }                  [TestMethod]             public void Arguments()             {                 var options = new ChromeOptions();                      options.AddArgument("--start-maximized");                      driver = new ChromeDriver(options);             }                  [TestMethod]             public void SetBrowserLocation()             {                 string userDataDir = System.IO.Path.Combine(System.IO.Path.GetTempPath(), System.IO.Path.GetRandomFileName());                 System.IO.Directory.CreateDirectory(userDataDir);                 var options = new ChromeOptions();                 options.AddArgument($"--user-data-dir={userDataDir}");                 options.AddArgument("--no-sandbox");                 options.AddArgument("--disable-dev-shm-usage");                      options.BinaryLocation = GetChromeLocation();                      driver = new ChromeDriver(options);             }                  [TestMethod]             public void InstallExtension()             {                 var options = new ChromeOptions();                 var baseDir = AppDomain.CurrentDomain.BaseDirectory;                 var extensionFilePath = Path.Combine(baseDir, "../../../Extensions/webextensions-selenium-example.crx");                      options.AddExtension(extensionFilePath);                 options.AddArgument("--disable-features=DisableLoadExtensionCommandLineSwitch");                      driver = new ChromeDriver(options);                      driver.Url = "https://www.selenium.dev/selenium/web/blank.html";                      IWebElement injected = driver.FindElement(By.Id("webextensions-selenium-example"));                 Assert.AreEqual("Content injected by webextensions-selenium-example", injected.Text);             }                  [TestMethod]             public void ExcludeSwitch()             {                 var options = new ChromeOptions();                      options.AddExcludedArgument("disable-popup-blocking");                      driver = new ChromeDriver(options);             }                  [TestMethod]             public void LogsToFile()             {                 var service = ChromeDriverService.CreateDefaultService();                      service.LogPath = GetLogLocation();                      driver = new ChromeDriver(service);                 driver.Quit(); // Close the Service log file before reading                 var lines = File.ReadLines(GetLogLocation());                 Assert.IsNotNull(lines.FirstOrDefault(line => line.Contains("Starting ChromeDriver")));             }                  [TestMethod]             [Ignore("Not implemented")]             public void LogsToConsole()             {                 var stringWriter = new StringWriter();                 var originalOutput = Console.Out;                 Console.SetOut(stringWriter);                      var service = ChromeDriverService.CreateDefaultService();                      //service.LogToConsole = true;                      driver = new ChromeDriver(service);                      Assert.IsTrue(stringWriter.ToString().Contains("Starting ChromeDriver"));                 Console.SetOut(originalOutput);                 stringWriter.Dispose();             }                  [TestMethod]             [Ignore("Not implemented")]             public void LogsLevel()             {                 var service = ChromeDriverService.CreateDefaultService();                 service.LogPath = GetLogLocation();                      // service.LogLevel = ChromiumDriverLogLevel.Debug                      driver = new ChromeDriver(service);                      driver.Quit(); // Close the Service log file before reading                 var lines = File.ReadLines(GetLogLocation());                 Assert.IsNotNull(lines.FirstOrDefault(line => line.Contains("[DEBUG]:")));             }                  [TestMethod]             [Ignore("Not implemented")]             public void ConfigureDriverLogs()             {                 var service = ChromeDriverService.CreateDefaultService();                 service.LogPath = GetLogLocation();                 service.EnableVerboseLogging = true;                      service.EnableAppendLog = true;                 // service.readableTimeStamp = true;                      driver = new ChromeDriver(service);                      driver.Quit(); // Close the Service log file before reading                 var lines = File.ReadLines(GetLogLocation());                 var regex = new Regex(@"\[\d\d-\d\d-\d\d\d\d");                 Assert.IsNotNull(lines.FirstOrDefault(line => regex.Matches("").Count > 0));             }                  [TestMethod]             public void DisableBuildCheck()             {                 var service = ChromeDriverService.CreateDefaultService();                 service.LogPath = GetLogLocation();                 service.EnableVerboseLogging = true;                      service.DisableBuildCheck = true;                      driver = new ChromeDriver(service);                 driver.Quit(); // Close the Service log file before reading                 var expected = "[WARNING]: You are using an unsupported command-line switch: --disable-build-check";                 var lines = File.ReadLines(GetLogLocation());                 Assert.IsNotNull(lines.FirstOrDefault(line => line.Contains(expected)));             }                  private string GetLogLocation()             {                 if (_logLocation == null || !File.Exists(_logLocation))                 {                     _logLocation = Path.GetTempFileName();                 }                      return _logLocation;             }                  private static string GetChromeLocation()             {                 var options = new ChromeOptions                 {                     BrowserVersion = "stable"                 };                 return new DriverFinder(options).GetBrowserPath();             }         }     }                          options = Selenium::WebDriver::Options.chrome           @driver = Selenium::WebDriver.for :chrome, options: options

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk//examples/ruby/spec/browsers/chrome_spec.rb#L10-L11)

##### /examples/ruby/spec/browsers/chrome\_spec.rb

Copy  Close               # frozen_string_literal: true          require 'spec_helper'          RSpec.describe 'Chrome' do       describe 'Options' do         let(:chrome_location) { driver_finder && ENV.fetch('CHROME_BIN', nil) }              it 'basic options' do           options = Selenium::WebDriver::Options.chrome           @driver = Selenium::WebDriver.for :chrome, options: options         end              it 'add arguments' do           options = Selenium::WebDriver::Options.chrome                options.args << '--start-maximized'                @driver = Selenium::WebDriver.for :chrome, options: options         end              it 'sets location of binary' do           user_data_dir = Dir.mktmpdir('chrome-profile-')           options = Selenium::WebDriver::Options.chrome           options.add_argument("--user-data-dir=#{user_data_dir}")           options.add_argument('--no-sandbox')           options.add_argument('--disable-dev-shm-usage')                options.binary = chrome_location                @driver = Selenium::WebDriver.for :chrome, options: options         end              it 'add extensions' do           extension_file_path = File.expand_path('../spec_support/extensions/webextensions-selenium-example.crx', __dir__)           options = Selenium::WebDriver::Options.chrome                options.add_extension(extension_file_path)           options.add_argument('--disable-features=DisableLoadExtensionCommandLineSwitch')                @driver = Selenium::WebDriver.for :chrome, options: options           @driver.get('https://www.selenium.dev/selenium/web/blank.html')           injected = @driver.find_element(:id, 'webextensions-selenium-example')           expect(injected.text).to eq 'Content injected by webextensions-selenium-example'         end              it 'keeps browser open' do           options = Selenium::WebDriver::Options.chrome                options.detach = true                @driver = Selenium::WebDriver.for :chrome, options: options         end              it 'excludes switches' do           options = Selenium::WebDriver::Options.chrome                options.exclude_switches << 'disable-popup-blocking'                @driver = Selenium::WebDriver.for :chrome, options: options         end       end            describe 'Service' do         let(:file_name) { File.expand_path('chromedriver.log') }              after { FileUtils.rm_f(file_name) }              it 'logs to file' do           service = Selenium::WebDriver::Service.chrome                service.log = file_name                @driver = Selenium::WebDriver.for :chrome, service: service           expect(File.readlines(file_name).first).to include('Starting ChromeDriver')         end              it 'logs to console' do           service = Selenium::WebDriver::Service.chrome                service.log = $stdout                expect {             @driver = Selenium::WebDriver.for :chrome, service: service           }.to output(/Starting ChromeDriver/).to_stdout_from_any_process         end              it 'sets log level' do           service = Selenium::WebDriver::Service.chrome           service.log = file_name                service.args << '--log-level=DEBUG'                @driver = Selenium::WebDriver.for :chrome, service: service           expect(File.readlines(file_name).grep(/\[DEBUG\]:/).any?).to eq true         end              it 'sets log features' do           args = ["--log-path=#{file_name}", '--verbose']           service = Selenium::WebDriver::Service.chrome(args: args)                service.args << '--append-log'           service.args << '--readable-timestamp'                @driver = Selenium::WebDriver.for :chrome, service: service                expect(File.readlines(file_name).grep(/\[\d\d-\d\d-\d\d\d\d/).any?).to eq true         end              it 'disables build checks' do           service = Selenium::WebDriver::Service.chrome log: file_name, args: ['--verbose']                service.args << '--disable-build-check'                @driver = Selenium::WebDriver.for :chrome, service: service           warning = /\[WARNING\]: You are using an unsupported command-line switch: --disable-build-check/           expect(File.readlines(file_name).grep(warning).any?).to eq true         end       end            describe 'Special Features' do         it 'casts' do           @driver = Selenium::WebDriver.for :chrome           sinks = @driver.cast_sinks           unless sinks.empty?             device_name = sinks.first['name']             @driver.start_cast_tab_mirroring(device_name)             expect { @driver.stop_casting(device_name) }.not_to raise_exception           end         end              it 'gets and sets network conditions' do           @driver = Selenium::WebDriver.for :chrome           @driver.network_conditions = {offline: false, latency: 100, throughput: 200}           expect(@driver.network_conditions).to eq(             'offline' => false,             'latency' => 100,             'download_throughput' => 200,             'upload_throughput' => 200           )         end              it 'gets the browser logs' do           @driver = Selenium::WebDriver.for :chrome           @driver.navigate.to 'https://www.selenium.dev/selenium/web/'           sleep 1           logs = @driver.logs.get(:browser)                expect(logs.first.message).to include 'Failed to load resource'         end              it 'sets permissions' do           @driver = Selenium::WebDriver.for :chrome           @driver.navigate.to 'https://www.selenium.dev/selenium/web/'           @driver.add_permission('camera', 'denied')           @driver.add_permissions('clipboard-read' => 'denied', 'clipboard-write' => 'prompt')           expect(permission('camera')).to eq('denied')           expect(permission('clipboard-read')).to eq('denied')           expect(permission('clipboard-write')).to eq('prompt')         end       end            def driver_finder         options = Selenium::WebDriver::Options.chrome(browser_version: 'stable')         service = Selenium::WebDriver::Service.chrome         finder = Selenium::WebDriver::DriverFinder.new(options, service)         ENV['CHROMEDRIVER_BIN'] = finder.driver_path         ENV['CHROME_BIN'] = finder.browser_path       end            def permission(name)         @driver.execute_async_script('callback = arguments[arguments.length - 1];' \                                      'callback(navigator.permissions.query({name: arguments[0]}));', name)['state']       end     end                        const Options = new Chrome.Options();         let driver = new Builder()           .forBrowser(Browser.CHROME)           .setChromeOptions(Options)           .build();

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk//examples/javascript/test/browser/chromeSpecificCaps.spec.js#L51-L55)

##### /examples/javascript/test/browser/chromeSpecificCaps.spec.js

Copy  Close               const Chrome = require('selenium-webdriver/chrome');     const { Browser, Builder } = require("selenium-webdriver");     const options = new Chrome.Options();                    describe('Should be able to Test Command line arguments', function () {       it('headless', async function () {         let driver = new Builder()           .forBrowser(Browser.CHROME)           .setChromeOptions(options.addArguments('--headless=new'))           .build();              await driver.get('https://www.selenium.dev/selenium/web/blank.html');         await driver.quit();       });            it('exclude switches', async function () {         let driver = new Builder()           .forBrowser(Browser.CHROME)           .setChromeOptions(options.excludeSwitches('enable-automation'))           .build();              await driver.get('https://www.selenium.dev/selenium/web/blank.html');         await driver.quit();       });            it('Keep browser open - set detach to true ', async function () {         let driver = new Builder()           .forBrowser(Browser.CHROME)           .setChromeOptions(options.detachDriver(true))           .build();              await driver.get('https://www.selenium.dev/selenium/web/blank.html');              // As tests runs in ci, quitting the driver instance to avoid any failures         await driver.quit();       });            xit('Start browser from specified location ', async function () {         let driver = new Builder()           .forBrowser(Browser.CHROME)           .setChromeOptions(options.setChromeBinaryPath(`Path to chrome binary`))           .build();              await driver.get('https://www.selenium.dev/selenium/web/blank.html');         await driver.quit();       });            it('Basic Chrome test', async function () {         const Options = new Chrome.Options();         let driver = new Builder()           .forBrowser(Browser.CHROME)           .setChromeOptions(Options)           .build();              await driver.get('https://www.selenium.dev/selenium/web/blank.html');         await driver.quit();       });            it('Add Extension', async function () {         const options = new Chrome.Options();         let driver = new Builder()           .forBrowser(Browser.CHROME)           .setChromeOptions(options.addExtensions(['./test/resources/extensions/webextensions-selenium-example.crx']))           .build();              await driver.get('https://www.selenium.dev/selenium/web/blank.html');         await driver.quit();       });     });

[Add Example](https://www.selenium.dev/documentation/about/contributing/#creating-examples)

### Arguments

The `args` parameter is for a list of command line switches to be used when starting the browser. There are two excellent resources for investigating these arguments:

  * [Chrome Flags for Tooling](https://github.com/GoogleChrome/chrome-launcher/blob/main/docs/chrome-flags-for-tools.md)   * [List of Chromium Command Line Switches](https://peter.sh/experiments/chromium-command-line-switches/)

Commonly used args include `--start-maximized`, `--headless=new` and `--user-data-dir=...`

Add an argument to options:

  * Java   * Python   * CSharp   * Ruby   * JavaScript   * Kotlin

                  options.addArguments("--start-maximized");

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk//examples/java/src/test/java/dev/selenium/browsers/ChromeTest.java#L44)

##### /examples/java/src/test/java/dev/selenium/browsers/ChromeTest.java

Copy  Close               package dev.selenium.browsers;          import dev.selenium.BaseTest;     import java.io.File;     import java.io.IOException;     import java.io.PrintStream;     import java.nio.file.Files;     import java.nio.file.Path;     import java.nio.file.Paths;     import java.util.List;     import java.util.Map;     import java.util.logging.Level;     import java.util.regex.Pattern;     import org.junit.jupiter.api.AfterEach;     import org.junit.jupiter.api.Assertions;     import org.junit.jupiter.api.Test;     import org.openqa.selenium.By;     import org.openqa.selenium.WebElement;     import org.openqa.selenium.chrome.ChromeDriver;     import org.openqa.selenium.chrome.ChromeDriverService;     import org.openqa.selenium.chrome.ChromeOptions;     import org.openqa.selenium.chromium.ChromiumDriverLogLevel;     import org.openqa.selenium.chromium.ChromiumNetworkConditions;     import org.openqa.selenium.logging.*;     import org.openqa.selenium.remote.service.DriverFinder;          public class ChromeTest extends BaseTest {       @AfterEach       public void clearProperties() {         System.clearProperty(ChromeDriverService.CHROME_DRIVER_LOG_PROPERTY);         System.clearProperty(ChromeDriverService.CHROME_DRIVER_LOG_LEVEL_PROPERTY);       }            @Test       public void basicOptions() {         ChromeOptions options = getDefaultChromeOptions();         driver = new ChromeDriver(options);       }            @Test       public void arguments() {         ChromeOptions options = getDefaultChromeOptions();              options.addArguments("--start-maximized");              driver = new ChromeDriver(options);       }            @Test       public void setBrowserLocation() {         ChromeOptions options = getDefaultChromeOptions();              options.setBinary(getChromeLocation());              driver = new ChromeDriver(options);       }            @Test       public void extensionOptions() {         ChromeOptions options = getDefaultChromeOptions();         Path path = Paths.get("src/test/resources/extensions/webextensions-selenium-example.crx");         File extensionFilePath = new File(path.toUri());              options.addExtensions(extensionFilePath);         options.addArguments("--disable-features=DisableLoadExtensionCommandLineSwitch");              driver = new ChromeDriver(options);         driver.get("https://www.selenium.dev/selenium/web/blank.html");         WebElement injected = driver.findElement(By.id("webextensions-selenium-example"));         Assertions.assertEquals(             "Content injected by webextensions-selenium-example", injected.getText());       }            @Test       public void excludeSwitches() {         ChromeOptions options = getDefaultChromeOptions();              options.setExperimentalOption("excludeSwitches", List.of("disable-popup-blocking"));              driver = new ChromeDriver(options);       }            @Test       public void loggingPreferences() {         ChromeOptions options = getDefaultChromeOptions();         LoggingPreferences logPrefs = new LoggingPreferences();         logPrefs.enable(LogType.PERFORMANCE, Level.ALL);         options.setCapability(ChromeOptions.LOGGING_PREFS, logPrefs);              driver = new ChromeDriver(options);         driver.get("https://www.selenium.dev");              LogEntries logEntries = driver.manage().logs().get(LogType.PERFORMANCE);         Assertions.assertFalse(logEntries.getAll().isEmpty());       }            @Test       public void logsToFile() throws IOException {         File logLocation = getTempFile("logsToFile", ".log");         ChromeDriverService service =             new ChromeDriverService.Builder().withLogFile(logLocation).build();              driver = new ChromeDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         Assertions.assertTrue(fileContent.contains("Starting ChromeDriver"));       }            @Test       public void logsToConsole() throws IOException {         File logLocation = getTempFile("logsToConsole", ".log");         System.setOut(new PrintStream(logLocation));              ChromeDriverService service =             new ChromeDriverService.Builder().withLogOutput(System.out).build();              driver = new ChromeDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         Assertions.assertTrue(fileContent.contains("Starting ChromeDriver"));       }            @Test       public void logsWithLevel() throws IOException {         File logLocation = getTempFile("logsWithLevel", ".log");         System.setProperty(             ChromeDriverService.CHROME_DRIVER_LOG_PROPERTY, logLocation.getAbsolutePath());              ChromeDriverService service =             new ChromeDriverService.Builder().withLogLevel(ChromiumDriverLogLevel.DEBUG).build();              driver = new ChromeDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         Assertions.assertTrue(fileContent.contains("[DEBUG]:"));       }            @Test       public void configureDriverLogs() throws IOException {         File logLocation = getTempFile("configureDriverLogs", ".log");         System.setProperty(             ChromeDriverService.CHROME_DRIVER_LOG_PROPERTY, logLocation.getAbsolutePath());         System.setProperty(             ChromeDriverService.CHROME_DRIVER_LOG_LEVEL_PROPERTY,             ChromiumDriverLogLevel.DEBUG.toString());              ChromeDriverService service =             new ChromeDriverService.Builder().withAppendLog(true).withReadableTimestamp(true).build();              driver = new ChromeDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         Pattern pattern = Pattern.compile("\\[\\d\\d-\\d\\d-\\d\\d\\d\\d", Pattern.CASE_INSENSITIVE);         Assertions.assertTrue(pattern.matcher(fileContent).find());       }            @Test       public void disableBuildChecks() throws IOException {         File logLocation = getTempFile("disableBuildChecks", ".log");         System.setProperty(             ChromeDriverService.CHROME_DRIVER_LOG_PROPERTY, logLocation.getAbsolutePath());         System.setProperty(             ChromeDriverService.CHROME_DRIVER_LOG_LEVEL_PROPERTY,             ChromiumDriverLogLevel.WARNING.toString());              ChromeDriverService service =             new ChromeDriverService.Builder().withBuildCheckDisabled(true).build();              driver = new ChromeDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         String expected =             "[WARNING]: You are using an unsupported command-line switch: --disable-build-check";         Assertions.assertTrue(fileContent.contains(expected));       }            private File getChromeLocation() {         ChromeOptions options = getDefaultChromeOptions();         options.setBrowserVersion("stable");         DriverFinder finder = new DriverFinder(ChromeDriverService.createDefaultService(), options);         return new File(finder.getBrowserPath());       }            @Test       public void setPermission() {         ChromeDriver driver = new ChromeDriver();         driver.get("https://www.selenium.dev");              driver.setPermission("camera", "denied");              // Verify the permission state is 'denied'         String script = "return navigator.permissions.query({ name: 'camera' })" +                 "    .then(permissionStatus => permissionStatus.state);";         String permissionState = (String) driver.executeScript(script);              Assertions.assertEquals("denied", permissionState);         driver.quit();       }            @Test       public void setNetworkConditions() {         driver = new ChromeDriver();              ChromiumNetworkConditions networkConditions = new ChromiumNetworkConditions();         networkConditions.setOffline(false);         networkConditions.setLatency(java.time.Duration.ofMillis(20)); // 20 ms of latency         networkConditions.setDownloadThroughput(2000 * 1024 / 8); // 2000 kbps         networkConditions.setUploadThroughput(2000 * 1024 / 8);   // 2000 kbps              ((ChromeDriver) driver).setNetworkConditions(networkConditions);              driver.get("https://www.selenium.dev");              // Assert the network conditions are set as expected         ChromiumNetworkConditions actualConditions = ((ChromeDriver) driver).getNetworkConditions();         Assertions.assertAll(             () -> Assertions.assertEquals(networkConditions.getOffline(), actualConditions.getOffline()),             () -> Assertions.assertEquals(networkConditions.getLatency(), actualConditions.getLatency()),             () -> Assertions.assertEquals(networkConditions.getDownloadThroughput(), actualConditions.getDownloadThroughput()),             () -> Assertions.assertEquals(networkConditions.getUploadThroughput(), actualConditions.getUploadThroughput())         );         ((ChromeDriver) driver).deleteNetworkConditions();         driver.quit();       }            @Test       public void castFeatures() {         ChromeDriver driver = new ChromeDriver();              List<Map<String, String>> sinks = driver.getCastSinks();         if (!sinks.isEmpty()) {           String sinkName = sinks.get(0).get("name");           driver.startTabMirroring(sinkName);           driver.stopCasting(sinkName);         }              driver.quit();       }            @Test       public void getBrowserLogs() {         ChromeDriver driver = new ChromeDriver();         driver.get("https://www.selenium.dev/selenium/web/bidi/logEntryAdded.html");         WebElement consoleLogButton = driver.findElement(By.id("consoleError"));         consoleLogButton.click();              LogEntries logs = driver.manage().logs().get(LogType.BROWSER);              // Assert that at least one log contains the expected message         boolean logFound = false;         for (LogEntry log : logs) {           if (log.getMessage().contains("I am console error")) {             logFound = true;             break;           }         }              Assertions.assertTrue(logFound, "No matching log message found.");         driver.quit();       }     }                        options.add_argument("--start-maximized")

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk//examples/python/tests/browsers/test_chrome.py#L18)

##### /examples/python/tests/browsers/test\_chrome.py

Copy  Close               import os     import re     import subprocess     import pytest     from selenium import webdriver     from selenium.webdriver.common.by import By          def test_basic_options():         options = get_default_chrome_options()         driver = webdriver.Chrome(options=options)              driver.quit()               def test_args():         options = get_default_chrome_options()              options.add_argument("--start-maximized")              driver = webdriver.Chrome(options=options)         driver.get('http://selenium.dev')              driver.quit()               def test_set_browser_location(chrome_bin):         options = get_default_chrome_options()              options.binary_location = chrome_bin              driver = webdriver.Chrome(options=options)              driver.quit()               def test_add_extension():         options = get_default_chrome_options()         extension_file_path = os.path.abspath("tests/extensions/webextensions-selenium-example.crx")              options.add_extension(extension_file_path)              driver = webdriver.Chrome(options=options)         driver.get("https://www.selenium.dev/selenium/web/blank.html")              driver.quit()               def test_keep_browser_open():         options = get_default_chrome_options()              options.add_experimental_option("detach", True)              driver = webdriver.Chrome(options=options)         driver.get('http://selenium.dev')              driver.quit()               def test_exclude_switches():         options = get_default_chrome_options()              options.add_experimental_option('excludeSwitches', ['disable-popup-blocking'])              driver = webdriver.Chrome(options=options)         driver.get('http://selenium.dev')              driver.quit()               def test_log_to_file(log_path):         service = webdriver.ChromeService(log_output=log_path)              driver = webdriver.Chrome(service=service)              with open(log_path, 'r') as fp:             assert "Starting ChromeDriver" in fp.readline()              driver.quit()               def test_log_to_stdout(capfd):         service = webdriver.ChromeService(log_output=subprocess.STDOUT)              driver = webdriver.Chrome(service=service)              out, err = capfd.readouterr()         assert "Starting ChromeDriver" in out              driver.quit()               def test_log_level(capfd):         service = webdriver.ChromeService(service_args=['--log-level=DEBUG'], log_output=subprocess.STDOUT)              driver = webdriver.Chrome(service=service)              out, err = capfd.readouterr()         assert '[DEBUG]' in err              driver.quit()               def test_log_features(log_path):         service = webdriver.ChromeService(service_args=['--append-log', '--readable-timestamp'], log_output=log_path)              driver = webdriver.Chrome(service=service)              with open(log_path, 'r') as f:             assert re.match(r"\[\d\d-\d\d-\d\d\d\d", f.read())              driver.quit()               def test_build_checks(capfd):         service = webdriver.ChromeService(service_args=['--disable-build-check'], log_output=subprocess.STDOUT)              driver = webdriver.Chrome(service=service)              expected = "[WARNING]: You are using an unsupported command-line switch: --disable-build-check"         out, err = capfd.readouterr()         assert expected in err              driver.quit()               def test_set_network_conditions():         driver = webdriver.Chrome()              network_conditions = {             "offline": False,             "latency": 20,  # 20 ms of latency             "download_throughput": 2000 * 1024 / 8,  # 2000 kbps             "upload_throughput": 2000 * 1024 / 8,    # 2000 kbps         }         driver.set_network_conditions(**network_conditions)              driver.get("https://www.selenium.dev")              # check whether the network conditions are set         assert driver.get_network_conditions() == network_conditions              driver.quit()               def test_set_permissions():         driver = webdriver.Chrome()         driver.get('https://www.selenium.dev')              driver.set_permissions('camera', 'denied')              assert get_permission_state(driver, 'camera') == 'denied'         driver.quit()               def get_permission_state(driver, name):         """Helper function to query the permission state."""         script = """         const callback = arguments[arguments.length - 1];         navigator.permissions.query({name: arguments[0]}).then(permissionStatus => {             callback(permissionStatus.state);         });         """         return driver.execute_async_script(script, name)               def test_cast_features():         driver = webdriver.Chrome()              try:             sinks = driver.get_sinks()             if sinks:                 sink_name = sinks[0]['name']                 driver.start_tab_mirroring(sink_name)                 driver.stop_casting(sink_name)             else:                 pytest.skip("No available Cast sinks to test with.")         finally:             driver.quit()               def test_get_browser_logs():         driver = webdriver.Chrome()         driver.get("https://www.selenium.dev/selenium/web/bidi/logEntryAdded.html")         driver.find_element(By.ID, "consoleError").click()              logs = driver.get_log("browser")              # Assert that at least one log contains the expected message         assert any("I am console error" in log['message'] for log in logs), "No matching log message found."         driver.quit()          def get_default_chrome_options():         options = webdriver.ChromeOptions()         options.add_argument("--no-sandbox")         return options                                options.AddArgument("--start-maximized");

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk//examples/dotnet/SeleniumDocs/Browsers/ChromeTest.cs#L39)

##### /examples/dotnet/SeleniumDocs/Browsers/ChromeTest.cs

Copy  Close               using System;     using System.IO;     using System.Linq;     using System.Text.RegularExpressions;     using Microsoft.VisualStudio.TestTools.UnitTesting;     using OpenQA.Selenium;     using OpenQA.Selenium.Chrome;          namespace SeleniumDocs.Browsers     {         [TestClass]         public class ChromeTest         {             private ChromeDriver driver;             private string _logLocation;                  [TestCleanup]             public void Cleanup()             {                 if (_logLocation != null && File.Exists(_logLocation))                 {                     File.Delete(_logLocation);                 }                 driver.Quit();             }                  [TestMethod]             public void BasicOptions()             {                 var options = new ChromeOptions();                 driver = new ChromeDriver(options);             }                  [TestMethod]             public void Arguments()             {                 var options = new ChromeOptions();                      options.AddArgument("--start-maximized");                      driver = new ChromeDriver(options);             }                  [TestMethod]             public void SetBrowserLocation()             {                 string userDataDir = System.IO.Path.Combine(System.IO.Path.GetTempPath(), System.IO.Path.GetRandomFileName());                 System.IO.Directory.CreateDirectory(userDataDir);                 var options = new ChromeOptions();                 options.AddArgument($"--user-data-dir={userDataDir}");                 options.AddArgument("--no-sandbox");                 options.AddArgument("--disable-dev-shm-usage");                      options.BinaryLocation = GetChromeLocation();                      driver = new ChromeDriver(options);             }                  [TestMethod]             public void InstallExtension()             {                 var options = new ChromeOptions();                 var baseDir = AppDomain.CurrentDomain.BaseDirectory;                 var extensionFilePath = Path.Combine(baseDir, "../../../Extensions/webextensions-selenium-example.crx");                      options.AddExtension(extensionFilePath);                 options.AddArgument("--disable-features=DisableLoadExtensionCommandLineSwitch");                      driver = new ChromeDriver(options);                      driver.Url = "https://www.selenium.dev/selenium/web/blank.html";                      IWebElement injected = driver.FindElement(By.Id("webextensions-selenium-example"));                 Assert.AreEqual("Content injected by webextensions-selenium-example", injected.Text);             }                  [TestMethod]             public void ExcludeSwitch()             {                 var options = new ChromeOptions();                      options.AddExcludedArgument("disable-popup-blocking");                      driver = new ChromeDriver(options);             }                  [TestMethod]             public void LogsToFile()             {                 var service = ChromeDriverService.CreateDefaultService();                      service.LogPath = GetLogLocation();                      driver = new ChromeDriver(service);                 driver.Quit(); // Close the Service log file before reading                 var lines = File.ReadLines(GetLogLocation());                 Assert.IsNotNull(lines.FirstOrDefault(line => line.Contains("Starting ChromeDriver")));             }                  [TestMethod]             [Ignore("Not implemented")]             public void LogsToConsole()             {                 var stringWriter = new StringWriter();                 var originalOutput = Console.Out;                 Console.SetOut(stringWriter);                      var service = ChromeDriverService.CreateDefaultService();                      //service.LogToConsole = true;                      driver = new ChromeDriver(service);                      Assert.IsTrue(stringWriter.ToString().Contains("Starting ChromeDriver"));                 Console.SetOut(originalOutput);                 stringWriter.Dispose();             }                  [TestMethod]             [Ignore("Not implemented")]             public void LogsLevel()             {                 var service = ChromeDriverService.CreateDefaultService();                 service.LogPath = GetLogLocation();                      // service.LogLevel = ChromiumDriverLogLevel.Debug                      driver = new ChromeDriver(service);                      driver.Quit(); // Close the Service log file before reading                 var lines = File.ReadLines(GetLogLocation());                 Assert.IsNotNull(lines.FirstOrDefault(line => line.Contains("[DEBUG]:")));             }                  [TestMethod]             [Ignore("Not implemented")]             public void ConfigureDriverLogs()             {                 var service = ChromeDriverService.CreateDefaultService();                 service.LogPath = GetLogLocation();                 service.EnableVerboseLogging = true;                      service.EnableAppendLog = true;                 // service.readableTimeStamp = true;                      driver = new ChromeDriver(service);                      driver.Quit(); // Close the Service log file before reading                 var lines = File.ReadLines(GetLogLocation());                 var regex = new Regex(@"\[\d\d-\d\d-\d\d\d\d");                 Assert.IsNotNull(lines.FirstOrDefault(line => regex.Matches("").Count > 0));             }                  [TestMethod]             public void DisableBuildCheck()             {                 var service = ChromeDriverService.CreateDefaultService();                 service.LogPath = GetLogLocation();                 service.EnableVerboseLogging = true;                      service.DisableBuildCheck = true;                      driver = new ChromeDriver(service);                 driver.Quit(); // Close the Service log file before reading                 var expected = "[WARNING]: You are using an unsupported command-line switch: --disable-build-check";                 var lines = File.ReadLines(GetLogLocation());                 Assert.IsNotNull(lines.FirstOrDefault(line => line.Contains(expected)));             }                  private string GetLogLocation()             {                 if (_logLocation == null || !File.Exists(_logLocation))                 {                     _logLocation = Path.GetTempFileName();                 }                      return _logLocation;             }                  private static string GetChromeLocation()             {                 var options = new ChromeOptions                 {                     BrowserVersion = "stable"                 };                 return new DriverFinder(options).GetBrowserPath();             }         }     }                          options.args << '--start-maximized'

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk//examples/ruby/spec/browsers/chrome_spec.rb#L17)

##### /examples/ruby/spec/browsers/chrome\_spec.rb

Copy  Close               # frozen_string_literal: true          require 'spec_helper'          RSpec.describe 'Chrome' do       describe 'Options' do         let(:chrome_location) { driver_finder && ENV.fetch('CHROME_BIN', nil) }              it 'basic options' do           options = Selenium::WebDriver::Options.chrome           @driver = Selenium::WebDriver.for :chrome, options: options         end              it 'add arguments' do           options = Selenium::WebDriver::Options.chrome                options.args << '--start-maximized'                @driver = Selenium::WebDriver.for :chrome, options: options         end              it 'sets location of binary' do           user_data_dir = Dir.mktmpdir('chrome-profile-')           options = Selenium::WebDriver::Options.chrome           options.add_argument("--user-data-dir=#{user_data_dir}")           options.add_argument('--no-sandbox')           options.add_argument('--disable-dev-shm-usage')                options.binary = chrome_location                @driver = Selenium::WebDriver.for :chrome, options: options         end              it 'add extensions' do           extension_file_path = File.expand_path('../spec_support/extensions/webextensions-selenium-example.crx', __dir__)           options = Selenium::WebDriver::Options.chrome                options.add_extension(extension_file_path)           options.add_argument('--disable-features=DisableLoadExtensionCommandLineSwitch')                @driver = Selenium::WebDriver.for :chrome, options: options           @driver.get('https://www.selenium.dev/selenium/web/blank.html')           injected = @driver.find_element(:id, 'webextensions-selenium-example')           expect(injected.text).to eq 'Content injected by webextensions-selenium-example'         end              it 'keeps browser open' do           options = Selenium::WebDriver::Options.chrome                options.detach = true                @driver = Selenium::WebDriver.for :chrome, options: options         end              it 'excludes switches' do           options = Selenium::WebDriver::Options.chrome                options.exclude_switches << 'disable-popup-blocking'                @driver = Selenium::WebDriver.for :chrome, options: options         end       end            describe 'Service' do         let(:file_name) { File.expand_path('chromedriver.log') }              after { FileUtils.rm_f(file_name) }              it 'logs to file' do           service = Selenium::WebDriver::Service.chrome                service.log = file_name                @driver = Selenium::WebDriver.for :chrome, service: service           expect(File.readlines(file_name).first).to include('Starting ChromeDriver')         end              it 'logs to console' do           service = Selenium::WebDriver::Service.chrome                service.log = $stdout                expect {             @driver = Selenium::WebDriver.for :chrome, service: service           }.to output(/Starting ChromeDriver/).to_stdout_from_any_process         end              it 'sets log level' do           service = Selenium::WebDriver::Service.chrome           service.log = file_name                service.args << '--log-level=DEBUG'                @driver = Selenium::WebDriver.for :chrome, service: service           expect(File.readlines(file_name).grep(/\[DEBUG\]:/).any?).to eq true         end              it 'sets log features' do           args = ["--log-path=#{file_name}", '--verbose']           service = Selenium::WebDriver::Service.chrome(args: args)                service.args << '--append-log'           service.args << '--readable-timestamp'                @driver = Selenium::WebDriver.for :chrome, service: service                expect(File.readlines(file_name).grep(/\[\d\d-\d\d-\d\d\d\d/).any?).to eq true         end              it 'disables build checks' do           service = Selenium::WebDriver::Service.chrome log: file_name, args: ['--verbose']                service.args << '--disable-build-check'                @driver = Selenium::WebDriver.for :chrome, service: service           warning = /\[WARNING\]: You are using an unsupported command-line switch: --disable-build-check/           expect(File.readlines(file_name).grep(warning).any?).to eq true         end       end            describe 'Special Features' do         it 'casts' do           @driver = Selenium::WebDriver.for :chrome           sinks = @driver.cast_sinks           unless sinks.empty?             device_name = sinks.first['name']             @driver.start_cast_tab_mirroring(device_name)             expect { @driver.stop_casting(device_name) }.not_to raise_exception           end         end              it 'gets and sets network conditions' do           @driver = Selenium::WebDriver.for :chrome           @driver.network_conditions = {offline: false, latency: 100, throughput: 200}           expect(@driver.network_conditions).to eq(             'offline' => false,             'latency' => 100,             'download_throughput' => 200,             'upload_throughput' => 200           )         end              it 'gets the browser logs' do           @driver = Selenium::WebDriver.for :chrome           @driver.navigate.to 'https://www.selenium.dev/selenium/web/'           sleep 1           logs = @driver.logs.get(:browser)                expect(logs.first.message).to include 'Failed to load resource'         end              it 'sets permissions' do           @driver = Selenium::WebDriver.for :chrome           @driver.navigate.to 'https://www.selenium.dev/selenium/web/'           @driver.add_permission('camera', 'denied')           @driver.add_permissions('clipboard-read' => 'denied', 'clipboard-write' => 'prompt')           expect(permission('camera')).to eq('denied')           expect(permission('clipboard-read')).to eq('denied')           expect(permission('clipboard-write')).to eq('prompt')         end       end            def driver_finder         options = Selenium::WebDriver::Options.chrome(browser_version: 'stable')         service = Selenium::WebDriver::Service.chrome         finder = Selenium::WebDriver::DriverFinder.new(options, service)         ENV['CHROMEDRIVER_BIN'] = finder.driver_path         ENV['CHROME_BIN'] = finder.browser_path       end            def permission(name)         @driver.execute_async_script('callback = arguments[arguments.length - 1];' \                                      'callback(navigator.permissions.query({name: arguments[0]}));', name)['state']       end     end                        let driver = new Builder()           .forBrowser(Browser.CHROME)           .setChromeOptions(options.addArguments('--headless=new'))           .build();

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk//examples/javascript/test/browser/chromeSpecificCaps.spec.js#L9-L12)

##### /examples/javascript/test/browser/chromeSpecificCaps.spec.js

Copy  Close               const Chrome = require('selenium-webdriver/chrome');     const { Browser, Builder } = require("selenium-webdriver");     const options = new Chrome.Options();                    describe('Should be able to Test Command line arguments', function () {       it('headless', async function () {         let driver = new Builder()           .forBrowser(Browser.CHROME)           .setChromeOptions(options.addArguments('--headless=new'))           .build();              await driver.get('https://www.selenium.dev/selenium/web/blank.html');         await driver.quit();       });            it('exclude switches', async function () {         let driver = new Builder()           .forBrowser(Browser.CHROME)           .setChromeOptions(options.excludeSwitches('enable-automation'))           .build();              await driver.get('https://www.selenium.dev/selenium/web/blank.html');         await driver.quit();       });            it('Keep browser open - set detach to true ', async function () {         let driver = new Builder()           .forBrowser(Browser.CHROME)           .setChromeOptions(options.detachDriver(true))           .build();              await driver.get('https://www.selenium.dev/selenium/web/blank.html');              // As tests runs in ci, quitting the driver instance to avoid any failures         await driver.quit();       });            xit('Start browser from specified location ', async function () {         let driver = new Builder()           .forBrowser(Browser.CHROME)           .setChromeOptions(options.setChromeBinaryPath(`Path to chrome binary`))           .build();              await driver.get('https://www.selenium.dev/selenium/web/blank.html');         await driver.quit();       });            it('Basic Chrome test', async function () {         const Options = new Chrome.Options();         let driver = new Builder()           .forBrowser(Browser.CHROME)           .setChromeOptions(Options)           .build();              await driver.get('https://www.selenium.dev/selenium/web/blank.html');         await driver.quit();       });            it('Add Extension', async function () {         const options = new Chrome.Options();         let driver = new Builder()           .forBrowser(Browser.CHROME)           .setChromeOptions(options.addExtensions(['./test/resources/extensions/webextensions-selenium-example.crx']))           .build();              await driver.get('https://www.selenium.dev/selenium/web/blank.html');         await driver.quit();       });     });

[Add Example](https://www.selenium.dev/documentation/about/contributing/#creating-examples)

### Start browser in a specified location

The `binary` parameter takes the path of an alternate location of browser to use. With this parameter you can use chromedriver to drive various Chromium based browsers.

Add a browser location to options:

  * Java   * Python   * CSharp   * Ruby   * JavaScript   * Kotlin

                  options.setBinary(getChromeLocation());

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk//examples/java/src/test/java/dev/selenium/browsers/ChromeTest.java#L53)

##### /examples/java/src/test/java/dev/selenium/browsers/ChromeTest.java

Copy  Close               package dev.selenium.browsers;          import dev.selenium.BaseTest;     import java.io.File;     import java.io.IOException;     import java.io.PrintStream;     import java.nio.file.Files;     import java.nio.file.Path;     import java.nio.file.Paths;     import java.util.List;     import java.util.Map;     import java.util.logging.Level;     import java.util.regex.Pattern;     import org.junit.jupiter.api.AfterEach;     import org.junit.jupiter.api.Assertions;     import org.junit.jupiter.api.Test;     import org.openqa.selenium.By;     import org.openqa.selenium.WebElement;     import org.openqa.selenium.chrome.ChromeDriver;     import org.openqa.selenium.chrome.ChromeDriverService;     import org.openqa.selenium.chrome.ChromeOptions;     import org.openqa.selenium.chromium.ChromiumDriverLogLevel;     import org.openqa.selenium.chromium.ChromiumNetworkConditions;     import org.openqa.selenium.logging.*;     import org.openqa.selenium.remote.service.DriverFinder;          public class ChromeTest extends BaseTest {       @AfterEach       public void clearProperties() {         System.clearProperty(ChromeDriverService.CHROME_DRIVER_LOG_PROPERTY);         System.clearProperty(ChromeDriverService.CHROME_DRIVER_LOG_LEVEL_PROPERTY);       }            @Test       public void basicOptions() {         ChromeOptions options = getDefaultChromeOptions();         driver = new ChromeDriver(options);       }            @Test       public void arguments() {         ChromeOptions options = getDefaultChromeOptions();              options.addArguments("--start-maximized");              driver = new ChromeDriver(options);       }            @Test       public void setBrowserLocation() {         ChromeOptions options = getDefaultChromeOptions();              options.setBinary(getChromeLocation());              driver = new ChromeDriver(options);       }            @Test       public void extensionOptions() {         ChromeOptions options = getDefaultChromeOptions();         Path path = Paths.get("src/test/resources/extensions/webextensions-selenium-example.crx");         File extensionFilePath = new File(path.toUri());              options.addExtensions(extensionFilePath);         options.addArguments("--disable-features=DisableLoadExtensionCommandLineSwitch");              driver = new ChromeDriver(options);         driver.get("https://www.selenium.dev/selenium/web/blank.html");         WebElement injected = driver.findElement(By.id("webextensions-selenium-example"));         Assertions.assertEquals(             "Content injected by webextensions-selenium-example", injected.getText());       }            @Test       public void excludeSwitches() {         ChromeOptions options = getDefaultChromeOptions();              options.setExperimentalOption("excludeSwitches", List.of("disable-popup-blocking"));              driver = new ChromeDriver(options);       }            @Test       public void loggingPreferences() {         ChromeOptions options = getDefaultChromeOptions();         LoggingPreferences logPrefs = new LoggingPreferences();         logPrefs.enable(LogType.PERFORMANCE, Level.ALL);         options.setCapability(ChromeOptions.LOGGING_PREFS, logPrefs);              driver = new ChromeDriver(options);         driver.get("https://www.selenium.dev");              LogEntries logEntries = driver.manage().logs().get(LogType.PERFORMANCE);         Assertions.assertFalse(logEntries.getAll().isEmpty());       }            @Test       public void logsToFile() throws IOException {         File logLocation = getTempFile("logsToFile", ".log");         ChromeDriverService service =             new ChromeDriverService.Builder().withLogFile(logLocation).build();              driver = new ChromeDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         Assertions.assertTrue(fileContent.contains("Starting ChromeDriver"));       }            @Test       public void logsToConsole() throws IOException {         File logLocation = getTempFile("logsToConsole", ".log");         System.setOut(new PrintStream(logLocation));              ChromeDriverService service =             new ChromeDriverService.Builder().withLogOutput(System.out).build();              driver = new ChromeDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         Assertions.assertTrue(fileContent.contains("Starting ChromeDriver"));       }            @Test       public void logsWithLevel() throws IOException {         File logLocation = getTempFile("logsWithLevel", ".log");         System.setProperty(             ChromeDriverService.CHROME_DRIVER_LOG_PROPERTY, logLocation.getAbsolutePath());              ChromeDriverService service =             new ChromeDriverService.Builder().withLogLevel(ChromiumDriverLogLevel.DEBUG).build();              driver = new ChromeDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         Assertions.assertTrue(fileContent.contains("[DEBUG]:"));       }            @Test       public void configureDriverLogs() throws IOException {         File logLocation = getTempFile("configureDriverLogs", ".log");         System.setProperty(             ChromeDriverService.CHROME_DRIVER_LOG_PROPERTY, logLocation.getAbsolutePath());         System.setProperty(             ChromeDriverService.CHROME_DRIVER_LOG_LEVEL_PROPERTY,             ChromiumDriverLogLevel.DEBUG.toString());              ChromeDriverService service =             new ChromeDriverService.Builder().withAppendLog(true).withReadableTimestamp(true).build();              driver = new ChromeDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         Pattern pattern = Pattern.compile("\\[\\d\\d-\\d\\d-\\d\\d\\d\\d", Pattern.CASE_INSENSITIVE);         Assertions.assertTrue(pattern.matcher(fileContent).find());       }            @Test       public void disableBuildChecks() throws IOException {         File logLocation = getTempFile("disableBuildChecks", ".log");         System.setProperty(             ChromeDriverService.CHROME_DRIVER_LOG_PROPERTY, logLocation.getAbsolutePath());         System.setProperty(             ChromeDriverService.CHROME_DRIVER_LOG_LEVEL_PROPERTY,             ChromiumDriverLogLevel.WARNING.toString());              ChromeDriverService service =             new ChromeDriverService.Builder().withBuildCheckDisabled(true).build();              driver = new ChromeDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         String expected =             "[WARNING]: You are using an unsupported command-line switch: --disable-build-check";         Assertions.assertTrue(fileContent.contains(expected));       }            private File getChromeLocation() {         ChromeOptions options = getDefaultChromeOptions();         options.setBrowserVersion("stable");         DriverFinder finder = new DriverFinder(ChromeDriverService.createDefaultService(), options);         return new File(finder.getBrowserPath());       }            @Test       public void setPermission() {         ChromeDriver driver = new ChromeDriver();         driver.get("https://www.selenium.dev");              driver.setPermission("camera", "denied");              // Verify the permission state is 'denied'         String script = "return navigator.permissions.query({ name: 'camera' })" +                 "    .then(permissionStatus => permissionStatus.state);";         String permissionState = (String) driver.executeScript(script);              Assertions.assertEquals("denied", permissionState);         driver.quit();       }            @Test       public void setNetworkConditions() {         driver = new ChromeDriver();              ChromiumNetworkConditions networkConditions = new ChromiumNetworkConditions();         networkConditions.setOffline(false);         networkConditions.setLatency(java.time.Duration.ofMillis(20)); // 20 ms of latency         networkConditions.setDownloadThroughput(2000 * 1024 / 8); // 2000 kbps         networkConditions.setUploadThroughput(2000 * 1024 / 8);   // 2000 kbps              ((ChromeDriver) driver).setNetworkConditions(networkConditions);              driver.get("https://www.selenium.dev");              // Assert the network conditions are set as expected         ChromiumNetworkConditions actualConditions = ((ChromeDriver) driver).getNetworkConditions();         Assertions.assertAll(             () -> Assertions.assertEquals(networkConditions.getOffline(), actualConditions.getOffline()),             () -> Assertions.assertEquals(networkConditions.getLatency(), actualConditions.getLatency()),             () -> Assertions.assertEquals(networkConditions.getDownloadThroughput(), actualConditions.getDownloadThroughput()),             () -> Assertions.assertEquals(networkConditions.getUploadThroughput(), actualConditions.getUploadThroughput())         );         ((ChromeDriver) driver).deleteNetworkConditions();         driver.quit();       }            @Test       public void castFeatures() {         ChromeDriver driver = new ChromeDriver();              List<Map<String, String>> sinks = driver.getCastSinks();         if (!sinks.isEmpty()) {           String sinkName = sinks.get(0).get("name");           driver.startTabMirroring(sinkName);           driver.stopCasting(sinkName);         }              driver.quit();       }            @Test       public void getBrowserLogs() {         ChromeDriver driver = new ChromeDriver();         driver.get("https://www.selenium.dev/selenium/web/bidi/logEntryAdded.html");         WebElement consoleLogButton = driver.findElement(By.id("consoleError"));         consoleLogButton.click();              LogEntries logs = driver.manage().logs().get(LogType.BROWSER);              // Assert that at least one log contains the expected message         boolean logFound = false;         for (LogEntry log : logs) {           if (log.getMessage().contains("I am console error")) {             logFound = true;             break;           }         }              Assertions.assertTrue(logFound, "No matching log message found.");         driver.quit();       }     }                        options.binary_location = chrome_bin

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk//examples/python/tests/browsers/test_chrome.py#L29)

##### /examples/python/tests/browsers/test\_chrome.py

Copy  Close               import os     import re     import subprocess     import pytest     from selenium import webdriver     from selenium.webdriver.common.by import By          def test_basic_options():         options = get_default_chrome_options()         driver = webdriver.Chrome(options=options)              driver.quit()               def test_args():         options = get_default_chrome_options()              options.add_argument("--start-maximized")              driver = webdriver.Chrome(options=options)         driver.get('http://selenium.dev')              driver.quit()               def test_set_browser_location(chrome_bin):         options = get_default_chrome_options()              options.binary_location = chrome_bin              driver = webdriver.Chrome(options=options)              driver.quit()               def test_add_extension():         options = get_default_chrome_options()         extension_file_path = os.path.abspath("tests/extensions/webextensions-selenium-example.crx")              options.add_extension(extension_file_path)              driver = webdriver.Chrome(options=options)         driver.get("https://www.selenium.dev/selenium/web/blank.html")              driver.quit()               def test_keep_browser_open():         options = get_default_chrome_options()              options.add_experimental_option("detach", True)              driver = webdriver.Chrome(options=options)         driver.get('http://selenium.dev')              driver.quit()               def test_exclude_switches():         options = get_default_chrome_options()              options.add_experimental_option('excludeSwitches', ['disable-popup-blocking'])              driver = webdriver.Chrome(options=options)         driver.get('http://selenium.dev')              driver.quit()               def test_log_to_file(log_path):         service = webdriver.ChromeService(log_output=log_path)              driver = webdriver.Chrome(service=service)              with open(log_path, 'r') as fp:             assert "Starting ChromeDriver" in fp.readline()              driver.quit()               def test_log_to_stdout(capfd):         service = webdriver.ChromeService(log_output=subprocess.STDOUT)              driver = webdriver.Chrome(service=service)              out, err = capfd.readouterr()         assert "Starting ChromeDriver" in out              driver.quit()               def test_log_level(capfd):         service = webdriver.ChromeService(service_args=['--log-level=DEBUG'], log_output=subprocess.STDOUT)              driver = webdriver.Chrome(service=service)              out, err = capfd.readouterr()         assert '[DEBUG]' in err              driver.quit()               def test_log_features(log_path):         service = webdriver.ChromeService(service_args=['--append-log', '--readable-timestamp'], log_output=log_path)              driver = webdriver.Chrome(service=service)              with open(log_path, 'r') as f:             assert re.match(r"\[\d\d-\d\d-\d\d\d\d", f.read())              driver.quit()               def test_build_checks(capfd):         service = webdriver.ChromeService(service_args=['--disable-build-check'], log_output=subprocess.STDOUT)              driver = webdriver.Chrome(service=service)              expected = "[WARNING]: You are using an unsupported command-line switch: --disable-build-check"         out, err = capfd.readouterr()         assert expected in err              driver.quit()               def test_set_network_conditions():         driver = webdriver.Chrome()              network_conditions = {             "offline": False,             "latency": 20,  # 20 ms of latency             "download_throughput": 2000 * 1024 / 8,  # 2000 kbps             "upload_throughput": 2000 * 1024 / 8,    # 2000 kbps         }         driver.set_network_conditions(**network_conditions)              driver.get("https://www.selenium.dev")              # check whether the network conditions are set         assert driver.get_network_conditions() == network_conditions              driver.quit()               def test_set_permissions():         driver = webdriver.Chrome()         driver.get('https://www.selenium.dev')              driver.set_permissions('camera', 'denied')              assert get_permission_state(driver, 'camera') == 'denied'         driver.quit()               def get_permission_state(driver, name):         """Helper function to query the permission state."""         script = """         const callback = arguments[arguments.length - 1];         navigator.permissions.query({name: arguments[0]}).then(permissionStatus => {             callback(permissionStatus.state);         });         """         return driver.execute_async_script(script, name)               def test_cast_features():         driver = webdriver.Chrome()              try:             sinks = driver.get_sinks()             if sinks:                 sink_name = sinks[0]['name']                 driver.start_tab_mirroring(sink_name)                 driver.stop_casting(sink_name)             else:                 pytest.skip("No available Cast sinks to test with.")         finally:             driver.quit()               def test_get_browser_logs():         driver = webdriver.Chrome()         driver.get("https://www.selenium.dev/selenium/web/bidi/logEntryAdded.html")         driver.find_element(By.ID, "consoleError").click()              logs = driver.get_log("browser")              # Assert that at least one log contains the expected message         assert any("I am console error" in log['message'] for log in logs), "No matching log message found."         driver.quit()          def get_default_chrome_options():         options = webdriver.ChromeOptions()         options.add_argument("--no-sandbox")         return options                                var options = new ChromeOptions();

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk//examples/dotnet/SeleniumDocs/Browsers/ChromeTest.cs#L49)

##### /examples/dotnet/SeleniumDocs/Browsers/ChromeTest.cs

Copy  Close               using System;     using System.IO;     using System.Linq;     using System.Text.RegularExpressions;     using Microsoft.VisualStudio.TestTools.UnitTesting;     using OpenQA.Selenium;     using OpenQA.Selenium.Chrome;          namespace SeleniumDocs.Browsers     {         [TestClass]         public class ChromeTest         {             private ChromeDriver driver;             private string _logLocation;                  [TestCleanup]             public void Cleanup()             {                 if (_logLocation != null && File.Exists(_logLocation))                 {                     File.Delete(_logLocation);                 }                 driver.Quit();             }                  [TestMethod]             public void BasicOptions()             {                 var options = new ChromeOptions();                 driver = new ChromeDriver(options);             }                  [TestMethod]             public void Arguments()             {                 var options = new ChromeOptions();                      options.AddArgument("--start-maximized");                      driver = new ChromeDriver(options);             }                  [TestMethod]             public void SetBrowserLocation()             {                 string userDataDir = System.IO.Path.Combine(System.IO.Path.GetTempPath(), System.IO.Path.GetRandomFileName());                 System.IO.Directory.CreateDirectory(userDataDir);                 var options = new ChromeOptions();                 options.AddArgument($"--user-data-dir={userDataDir}");                 options.AddArgument("--no-sandbox");                 options.AddArgument("--disable-dev-shm-usage");                      options.BinaryLocation = GetChromeLocation();                      driver = new ChromeDriver(options);             }                  [TestMethod]             public void InstallExtension()             {                 var options = new ChromeOptions();                 var baseDir = AppDomain.CurrentDomain.BaseDirectory;                 var extensionFilePath = Path.Combine(baseDir, "../../../Extensions/webextensions-selenium-example.crx");                      options.AddExtension(extensionFilePath);                 options.AddArgument("--disable-features=DisableLoadExtensionCommandLineSwitch");                      driver = new ChromeDriver(options);                      driver.Url = "https://www.selenium.dev/selenium/web/blank.html";                      IWebElement injected = driver.FindElement(By.Id("webextensions-selenium-example"));                 Assert.AreEqual("Content injected by webextensions-selenium-example", injected.Text);             }                  [TestMethod]             public void ExcludeSwitch()             {                 var options = new ChromeOptions();                      options.AddExcludedArgument("disable-popup-blocking");                      driver = new ChromeDriver(options);             }                  [TestMethod]             public void LogsToFile()             {                 var service = ChromeDriverService.CreateDefaultService();                      service.LogPath = GetLogLocation();                      driver = new ChromeDriver(service);                 driver.Quit(); // Close the Service log file before reading                 var lines = File.ReadLines(GetLogLocation());                 Assert.IsNotNull(lines.FirstOrDefault(line => line.Contains("Starting ChromeDriver")));             }                  [TestMethod]             [Ignore("Not implemented")]             public void LogsToConsole()             {                 var stringWriter = new StringWriter();                 var originalOutput = Console.Out;                 Console.SetOut(stringWriter);                      var service = ChromeDriverService.CreateDefaultService();                      //service.LogToConsole = true;                      driver = new ChromeDriver(service);                      Assert.IsTrue(stringWriter.ToString().Contains("Starting ChromeDriver"));                 Console.SetOut(originalOutput);                 stringWriter.Dispose();             }                  [TestMethod]             [Ignore("Not implemented")]             public void LogsLevel()             {                 var service = ChromeDriverService.CreateDefaultService();                 service.LogPath = GetLogLocation();                      // service.LogLevel = ChromiumDriverLogLevel.Debug                      driver = new ChromeDriver(service);                      driver.Quit(); // Close the Service log file before reading                 var lines = File.ReadLines(GetLogLocation());                 Assert.IsNotNull(lines.FirstOrDefault(line => line.Contains("[DEBUG]:")));             }                  [TestMethod]             [Ignore("Not implemented")]             public void ConfigureDriverLogs()             {                 var service = ChromeDriverService.CreateDefaultService();                 service.LogPath = GetLogLocation();                 service.EnableVerboseLogging = true;                      service.EnableAppendLog = true;                 // service.readableTimeStamp = true;                      driver = new ChromeDriver(service);                      driver.Quit(); // Close the Service log file before reading                 var lines = File.ReadLines(GetLogLocation());                 var regex = new Regex(@"\[\d\d-\d\d-\d\d\d\d");                 Assert.IsNotNull(lines.FirstOrDefault(line => regex.Matches("").Count > 0));             }                  [TestMethod]             public void DisableBuildCheck()             {                 var service = ChromeDriverService.CreateDefaultService();                 service.LogPath = GetLogLocation();                 service.EnableVerboseLogging = true;                      service.DisableBuildCheck = true;                      driver = new ChromeDriver(service);                 driver.Quit(); // Close the Service log file before reading                 var expected = "[WARNING]: You are using an unsupported command-line switch: --disable-build-check";                 var lines = File.ReadLines(GetLogLocation());                 Assert.IsNotNull(lines.FirstOrDefault(line => line.Contains(expected)));             }                  private string GetLogLocation()             {                 if (_logLocation == null || !File.Exists(_logLocation))                 {                     _logLocation = Path.GetTempFileName();                 }                      return _logLocation;             }                  private static string GetChromeLocation()             {                 var options = new ChromeOptions                 {                     BrowserVersion = "stable"                 };                 return new DriverFinder(options).GetBrowserPath();             }         }     }                          options.binary = chrome_location

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk//examples/ruby/spec/browsers/chrome_spec.rb#L29)

##### /examples/ruby/spec/browsers/chrome\_spec.rb

Copy  Close               # frozen_string_literal: true          require 'spec_helper'          RSpec.describe 'Chrome' do       describe 'Options' do         let(:chrome_location) { driver_finder && ENV.fetch('CHROME_BIN', nil) }              it 'basic options' do           options = Selenium::WebDriver::Options.chrome           @driver = Selenium::WebDriver.for :chrome, options: options         end              it 'add arguments' do           options = Selenium::WebDriver::Options.chrome                options.args << '--start-maximized'                @driver = Selenium::WebDriver.for :chrome, options: options         end              it 'sets location of binary' do           user_data_dir = Dir.mktmpdir('chrome-profile-')           options = Selenium::WebDriver::Options.chrome           options.add_argument("--user-data-dir=#{user_data_dir}")           options.add_argument('--no-sandbox')           options.add_argument('--disable-dev-shm-usage')                options.binary = chrome_location                @driver = Selenium::WebDriver.for :chrome, options: options         end              it 'add extensions' do           extension_file_path = File.expand_path('../spec_support/extensions/webextensions-selenium-example.crx', __dir__)           options = Selenium::WebDriver::Options.chrome                options.add_extension(extension_file_path)           options.add_argument('--disable-features=DisableLoadExtensionCommandLineSwitch')                @driver = Selenium::WebDriver.for :chrome, options: options           @driver.get('https://www.selenium.dev/selenium/web/blank.html')           injected = @driver.find_element(:id, 'webextensions-selenium-example')           expect(injected.text).to eq 'Content injected by webextensions-selenium-example'         end              it 'keeps browser open' do           options = Selenium::WebDriver::Options.chrome                options.detach = true                @driver = Selenium::WebDriver.for :chrome, options: options         end              it 'excludes switches' do           options = Selenium::WebDriver::Options.chrome                options.exclude_switches << 'disable-popup-blocking'                @driver = Selenium::WebDriver.for :chrome, options: options         end       end            describe 'Service' do         let(:file_name) { File.expand_path('chromedriver.log') }              after { FileUtils.rm_f(file_name) }              it 'logs to file' do           service = Selenium::WebDriver::Service.chrome                service.log = file_name                @driver = Selenium::WebDriver.for :chrome, service: service           expect(File.readlines(file_name).first).to include('Starting ChromeDriver')         end              it 'logs to console' do           service = Selenium::WebDriver::Service.chrome                service.log = $stdout                expect {             @driver = Selenium::WebDriver.for :chrome, service: service           }.to output(/Starting ChromeDriver/).to_stdout_from_any_process         end              it 'sets log level' do           service = Selenium::WebDriver::Service.chrome           service.log = file_name                service.args << '--log-level=DEBUG'                @driver = Selenium::WebDriver.for :chrome, service: service           expect(File.readlines(file_name).grep(/\[DEBUG\]:/).any?).to eq true         end              it 'sets log features' do           args = ["--log-path=#{file_name}", '--verbose']           service = Selenium::WebDriver::Service.chrome(args: args)                service.args << '--append-log'           service.args << '--readable-timestamp'                @driver = Selenium::WebDriver.for :chrome, service: service                expect(File.readlines(file_name).grep(/\[\d\d-\d\d-\d\d\d\d/).any?).to eq true         end              it 'disables build checks' do           service = Selenium::WebDriver::Service.chrome log: file_name, args: ['--verbose']                service.args << '--disable-build-check'                @driver = Selenium::WebDriver.for :chrome, service: service           warning = /\[WARNING\]: You are using an unsupported command-line switch: --disable-build-check/           expect(File.readlines(file_name).grep(warning).any?).to eq true         end       end            describe 'Special Features' do         it 'casts' do           @driver = Selenium::WebDriver.for :chrome           sinks = @driver.cast_sinks           unless sinks.empty?             device_name = sinks.first['name']             @driver.start_cast_tab_mirroring(device_name)             expect { @driver.stop_casting(device_name) }.not_to raise_exception           end         end              it 'gets and sets network conditions' do           @driver = Selenium::WebDriver.for :chrome           @driver.network_conditions = {offline: false, latency: 100, throughput: 200}           expect(@driver.network_conditions).to eq(             'offline' => false,             'latency' => 100,             'download_throughput' => 200,             'upload_throughput' => 200           )         end              it 'gets the browser logs' do           @driver = Selenium::WebDriver.for :chrome           @driver.navigate.to 'https://www.selenium.dev/selenium/web/'           sleep 1           logs = @driver.logs.get(:browser)                expect(logs.first.message).to include 'Failed to load resource'         end              it 'sets permissions' do           @driver = Selenium::WebDriver.for :chrome           @driver.navigate.to 'https://www.selenium.dev/selenium/web/'           @driver.add_permission('camera', 'denied')           @driver.add_permissions('clipboard-read' => 'denied', 'clipboard-write' => 'prompt')           expect(permission('camera')).to eq('denied')           expect(permission('clipboard-read')).to eq('denied')           expect(permission('clipboard-write')).to eq('prompt')         end       end            def driver_finder         options = Selenium::WebDriver::Options.chrome(browser_version: 'stable')         service = Selenium::WebDriver::Service.chrome         finder = Selenium::WebDriver::DriverFinder.new(options, service)         ENV['CHROMEDRIVER_BIN'] = finder.driver_path         ENV['CHROME_BIN'] = finder.browser_path       end            def permission(name)         @driver.execute_async_script('callback = arguments[arguments.length - 1];' \                                      'callback(navigator.permissions.query({name: arguments[0]}));', name)['state']       end     end                        let driver = new Builder()           .forBrowser(Browser.CHROME)           .setChromeOptions(options.setChromeBinaryPath(`Path to chrome binary`))           .build();

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk//examples/javascript/test/browser/chromeSpecificCaps.spec.js#L41-L44)

##### /examples/javascript/test/browser/chromeSpecificCaps.spec.js

Copy  Close               const Chrome = require('selenium-webdriver/chrome');     const { Browser, Builder } = require("selenium-webdriver");     const options = new Chrome.Options();                    describe('Should be able to Test Command line arguments', function () {       it('headless', async function () {         let driver = new Builder()           .forBrowser(Browser.CHROME)           .setChromeOptions(options.addArguments('--headless=new'))           .build();              await driver.get('https://www.selenium.dev/selenium/web/blank.html');         await driver.quit();       });            it('exclude switches', async function () {         let driver = new Builder()           .forBrowser(Browser.CHROME)           .setChromeOptions(options.excludeSwitches('enable-automation'))           .build();              await driver.get('https://www.selenium.dev/selenium/web/blank.html');         await driver.quit();       });            it('Keep browser open - set detach to true ', async function () {         let driver = new Builder()           .forBrowser(Browser.CHROME)           .setChromeOptions(options.detachDriver(true))           .build();              await driver.get('https://www.selenium.dev/selenium/web/blank.html');              // As tests runs in ci, quitting the driver instance to avoid any failures         await driver.quit();       });            xit('Start browser from specified location ', async function () {         let driver = new Builder()           .forBrowser(Browser.CHROME)           .setChromeOptions(options.setChromeBinaryPath(`Path to chrome binary`))           .build();              await driver.get('https://www.selenium.dev/selenium/web/blank.html');         await driver.quit();       });            it('Basic Chrome test', async function () {         const Options = new Chrome.Options();         let driver = new Builder()           .forBrowser(Browser.CHROME)           .setChromeOptions(Options)           .build();              await driver.get('https://www.selenium.dev/selenium/web/blank.html');         await driver.quit();       });            it('Add Extension', async function () {         const options = new Chrome.Options();         let driver = new Builder()           .forBrowser(Browser.CHROME)           .setChromeOptions(options.addExtensions(['./test/resources/extensions/webextensions-selenium-example.crx']))           .build();              await driver.get('https://www.selenium.dev/selenium/web/blank.html');         await driver.quit();       });     });

[Add Example](https://www.selenium.dev/documentation/about/contributing/#creating-examples)

### Add extensions

The `extensions` parameter accepts crx files. As for unpacked directories, please use the `load-extension` argument instead, as mentioned in [this post](https://chromedriver.chromium.org/extensions).

Add an extension to options:

  * Java   * Python   * CSharp   * Ruby   * JavaScript   * Kotlin

                  options.addExtensions(extensionFilePath);

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk//examples/java/src/test/java/dev/selenium/browsers/ChromeTest.java#L64)

##### /examples/java/src/test/java/dev/selenium/browsers/ChromeTest.java

Copy  Close               package dev.selenium.browsers;          import dev.selenium.BaseTest;     import java.io.File;     import java.io.IOException;     import java.io.PrintStream;     import java.nio.file.Files;     import java.nio.file.Path;     import java.nio.file.Paths;     import java.util.List;     import java.util.Map;     import java.util.logging.Level;     import java.util.regex.Pattern;     import org.junit.jupiter.api.AfterEach;     import org.junit.jupiter.api.Assertions;     import org.junit.jupiter.api.Test;     import org.openqa.selenium.By;     import org.openqa.selenium.WebElement;     import org.openqa.selenium.chrome.ChromeDriver;     import org.openqa.selenium.chrome.ChromeDriverService;     import org.openqa.selenium.chrome.ChromeOptions;     import org.openqa.selenium.chromium.ChromiumDriverLogLevel;     import org.openqa.selenium.chromium.ChromiumNetworkConditions;     import org.openqa.selenium.logging.*;     import org.openqa.selenium.remote.service.DriverFinder;          public class ChromeTest extends BaseTest {       @AfterEach       public void clearProperties() {         System.clearProperty(ChromeDriverService.CHROME_DRIVER_LOG_PROPERTY);         System.clearProperty(ChromeDriverService.CHROME_DRIVER_LOG_LEVEL_PROPERTY);       }            @Test       public void basicOptions() {         ChromeOptions options = getDefaultChromeOptions();         driver = new ChromeDriver(options);       }            @Test       public void arguments() {         ChromeOptions options = getDefaultChromeOptions();              options.addArguments("--start-maximized");              driver = new ChromeDriver(options);       }            @Test       public void setBrowserLocation() {         ChromeOptions options = getDefaultChromeOptions();              options.setBinary(getChromeLocation());              driver = new ChromeDriver(options);       }            @Test       public void extensionOptions() {         ChromeOptions options = getDefaultChromeOptions();         Path path = Paths.get("src/test/resources/extensions/webextensions-selenium-example.crx");         File extensionFilePath = new File(path.toUri());              options.addExtensions(extensionFilePath);         options.addArguments("--disable-features=DisableLoadExtensionCommandLineSwitch");              driver = new ChromeDriver(options);         driver.get("https://www.selenium.dev/selenium/web/blank.html");         WebElement injected = driver.findElement(By.id("webextensions-selenium-example"));         Assertions.assertEquals(             "Content injected by webextensions-selenium-example", injected.getText());       }            @Test       public void excludeSwitches() {         ChromeOptions options = getDefaultChromeOptions();              options.setExperimentalOption("excludeSwitches", List.of("disable-popup-blocking"));              driver = new ChromeDriver(options);       }            @Test       public void loggingPreferences() {         ChromeOptions options = getDefaultChromeOptions();         LoggingPreferences logPrefs = new LoggingPreferences();         logPrefs.enable(LogType.PERFORMANCE, Level.ALL);         options.setCapability(ChromeOptions.LOGGING_PREFS, logPrefs);              driver = new ChromeDriver(options);         driver.get("https://www.selenium.dev");              LogEntries logEntries = driver.manage().logs().get(LogType.PERFORMANCE);         Assertions.assertFalse(logEntries.getAll().isEmpty());       }            @Test       public void logsToFile() throws IOException {         File logLocation = getTempFile("logsToFile", ".log");         ChromeDriverService service =             new ChromeDriverService.Builder().withLogFile(logLocation).build();              driver = new ChromeDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         Assertions.assertTrue(fileContent.contains("Starting ChromeDriver"));       }            @Test       public void logsToConsole() throws IOException {         File logLocation = getTempFile("logsToConsole", ".log");         System.setOut(new PrintStream(logLocation));              ChromeDriverService service =             new ChromeDriverService.Builder().withLogOutput(System.out).build();              driver = new ChromeDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         Assertions.assertTrue(fileContent.contains("Starting ChromeDriver"));       }            @Test       public void logsWithLevel() throws IOException {         File logLocation = getTempFile("logsWithLevel", ".log");         System.setProperty(             ChromeDriverService.CHROME_DRIVER_LOG_PROPERTY, logLocation.getAbsolutePath());              ChromeDriverService service =             new ChromeDriverService.Builder().withLogLevel(ChromiumDriverLogLevel.DEBUG).build();              driver = new ChromeDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         Assertions.assertTrue(fileContent.contains("[DEBUG]:"));       }            @Test       public void configureDriverLogs() throws IOException {         File logLocation = getTempFile("configureDriverLogs", ".log");         System.setProperty(             ChromeDriverService.CHROME_DRIVER_LOG_PROPERTY, logLocation.getAbsolutePath());         System.setProperty(             ChromeDriverService.CHROME_DRIVER_LOG_LEVEL_PROPERTY,             ChromiumDriverLogLevel.DEBUG.toString());              ChromeDriverService service =             new ChromeDriverService.Builder().withAppendLog(true).withReadableTimestamp(true).build();              driver = new ChromeDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         Pattern pattern = Pattern.compile("\\[\\d\\d-\\d\\d-\\d\\d\\d\\d", Pattern.CASE_INSENSITIVE);         Assertions.assertTrue(pattern.matcher(fileContent).find());       }            @Test       public void disableBuildChecks() throws IOException {         File logLocation = getTempFile("disableBuildChecks", ".log");         System.setProperty(             ChromeDriverService.CHROME_DRIVER_LOG_PROPERTY, logLocation.getAbsolutePath());         System.setProperty(             ChromeDriverService.CHROME_DRIVER_LOG_LEVEL_PROPERTY,             ChromiumDriverLogLevel.WARNING.toString());              ChromeDriverService service =             new ChromeDriverService.Builder().withBuildCheckDisabled(true).build();              driver = new ChromeDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         String expected =             "[WARNING]: You are using an unsupported command-line switch: --disable-build-check";         Assertions.assertTrue(fileContent.contains(expected));       }            private File getChromeLocation() {         ChromeOptions options = getDefaultChromeOptions();         options.setBrowserVersion("stable");         DriverFinder finder = new DriverFinder(ChromeDriverService.createDefaultService(), options);         return new File(finder.getBrowserPath());       }            @Test       public void setPermission() {         ChromeDriver driver = new ChromeDriver();         driver.get("https://www.selenium.dev");              driver.setPermission("camera", "denied");              // Verify the permission state is 'denied'         String script = "return navigator.permissions.query({ name: 'camera' })" +                 "    .then(permissionStatus => permissionStatus.state);";         String permissionState = (String) driver.executeScript(script);              Assertions.assertEquals("denied", permissionState);         driver.quit();       }            @Test       public void setNetworkConditions() {         driver = new ChromeDriver();              ChromiumNetworkConditions networkConditions = new ChromiumNetworkConditions();         networkConditions.setOffline(false);         networkConditions.setLatency(java.time.Duration.ofMillis(20)); // 20 ms of latency         networkConditions.setDownloadThroughput(2000 * 1024 / 8); // 2000 kbps         networkConditions.setUploadThroughput(2000 * 1024 / 8);   // 2000 kbps              ((ChromeDriver) driver).setNetworkConditions(networkConditions);              driver.get("https://www.selenium.dev");              // Assert the network conditions are set as expected         ChromiumNetworkConditions actualConditions = ((ChromeDriver) driver).getNetworkConditions();         Assertions.assertAll(             () -> Assertions.assertEquals(networkConditions.getOffline(), actualConditions.getOffline()),             () -> Assertions.assertEquals(networkConditions.getLatency(), actualConditions.getLatency()),             () -> Assertions.assertEquals(networkConditions.getDownloadThroughput(), actualConditions.getDownloadThroughput()),             () -> Assertions.assertEquals(networkConditions.getUploadThroughput(), actualConditions.getUploadThroughput())         );         ((ChromeDriver) driver).deleteNetworkConditions();         driver.quit();       }            @Test       public void castFeatures() {         ChromeDriver driver = new ChromeDriver();              List<Map<String, String>> sinks = driver.getCastSinks();         if (!sinks.isEmpty()) {           String sinkName = sinks.get(0).get("name");           driver.startTabMirroring(sinkName);           driver.stopCasting(sinkName);         }              driver.quit();       }            @Test       public void getBrowserLogs() {         ChromeDriver driver = new ChromeDriver();         driver.get("https://www.selenium.dev/selenium/web/bidi/logEntryAdded.html");         WebElement consoleLogButton = driver.findElement(By.id("consoleError"));         consoleLogButton.click();              LogEntries logs = driver.manage().logs().get(LogType.BROWSER);              // Assert that at least one log contains the expected message         boolean logFound = false;         for (LogEntry log : logs) {           if (log.getMessage().contains("I am console error")) {             logFound = true;             break;           }         }              Assertions.assertTrue(logFound, "No matching log message found.");         driver.quit();       }     }                        options.add_extension(extension_file_path)

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk//examples/python/tests/browsers/test_chrome.py#L40)

##### /examples/python/tests/browsers/test\_chrome.py

Copy  Close               import os     import re     import subprocess     import pytest     from selenium import webdriver     from selenium.webdriver.common.by import By          def test_basic_options():         options = get_default_chrome_options()         driver = webdriver.Chrome(options=options)              driver.quit()               def test_args():         options = get_default_chrome_options()              options.add_argument("--start-maximized")              driver = webdriver.Chrome(options=options)         driver.get('http://selenium.dev')              driver.quit()               def test_set_browser_location(chrome_bin):         options = get_default_chrome_options()              options.binary_location = chrome_bin              driver = webdriver.Chrome(options=options)              driver.quit()               def test_add_extension():         options = get_default_chrome_options()         extension_file_path = os.path.abspath("tests/extensions/webextensions-selenium-example.crx")              options.add_extension(extension_file_path)              driver = webdriver.Chrome(options=options)         driver.get("https://www.selenium.dev/selenium/web/blank.html")              driver.quit()               def test_keep_browser_open():         options = get_default_chrome_options()              options.add_experimental_option("detach", True)              driver = webdriver.Chrome(options=options)         driver.get('http://selenium.dev')              driver.quit()               def test_exclude_switches():         options = get_default_chrome_options()              options.add_experimental_option('excludeSwitches', ['disable-popup-blocking'])              driver = webdriver.Chrome(options=options)         driver.get('http://selenium.dev')              driver.quit()               def test_log_to_file(log_path):         service = webdriver.ChromeService(log_output=log_path)              driver = webdriver.Chrome(service=service)              with open(log_path, 'r') as fp:             assert "Starting ChromeDriver" in fp.readline()              driver.quit()               def test_log_to_stdout(capfd):         service = webdriver.ChromeService(log_output=subprocess.STDOUT)              driver = webdriver.Chrome(service=service)              out, err = capfd.readouterr()         assert "Starting ChromeDriver" in out              driver.quit()               def test_log_level(capfd):         service = webdriver.ChromeService(service_args=['--log-level=DEBUG'], log_output=subprocess.STDOUT)              driver = webdriver.Chrome(service=service)              out, err = capfd.readouterr()         assert '[DEBUG]' in err              driver.quit()               def test_log_features(log_path):         service = webdriver.ChromeService(service_args=['--append-log', '--readable-timestamp'], log_output=log_path)              driver = webdriver.Chrome(service=service)              with open(log_path, 'r') as f:             assert re.match(r"\[\d\d-\d\d-\d\d\d\d", f.read())              driver.quit()               def test_build_checks(capfd):         service = webdriver.ChromeService(service_args=['--disable-build-check'], log_output=subprocess.STDOUT)              driver = webdriver.Chrome(service=service)              expected = "[WARNING]: You are using an unsupported command-line switch: --disable-build-check"         out, err = capfd.readouterr()         assert expected in err              driver.quit()               def test_set_network_conditions():         driver = webdriver.Chrome()              network_conditions = {             "offline": False,             "latency": 20,  # 20 ms of latency             "download_throughput": 2000 * 1024 / 8,  # 2000 kbps             "upload_throughput": 2000 * 1024 / 8,    # 2000 kbps         }         driver.set_network_conditions(**network_conditions)              driver.get("https://www.selenium.dev")              # check whether the network conditions are set         assert driver.get_network_conditions() == network_conditions              driver.quit()               def test_set_permissions():         driver = webdriver.Chrome()         driver.get('https://www.selenium.dev')              driver.set_permissions('camera', 'denied')              assert get_permission_state(driver, 'camera') == 'denied'         driver.quit()               def get_permission_state(driver, name):         """Helper function to query the permission state."""         script = """         const callback = arguments[arguments.length - 1];         navigator.permissions.query({name: arguments[0]}).then(permissionStatus => {             callback(permissionStatus.state);         });         """         return driver.execute_async_script(script, name)               def test_cast_features():         driver = webdriver.Chrome()              try:             sinks = driver.get_sinks()             if sinks:                 sink_name = sinks[0]['name']                 driver.start_tab_mirroring(sink_name)                 driver.stop_casting(sink_name)             else:                 pytest.skip("No available Cast sinks to test with.")         finally:             driver.quit()               def test_get_browser_logs():         driver = webdriver.Chrome()         driver.get("https://www.selenium.dev/selenium/web/bidi/logEntryAdded.html")         driver.find_element(By.ID, "consoleError").click()              logs = driver.get_log("browser")              # Assert that at least one log contains the expected message         assert any("I am console error" in log['message'] for log in logs), "No matching log message found."         driver.quit()          def get_default_chrome_options():         options = webdriver.ChromeOptions()         options.add_argument("--no-sandbox")         return options                                var options = new ChromeOptions();                 var baseDir = AppDomain.CurrentDomain.BaseDirectory;                 var extensionFilePath = Path.Combine(baseDir, "../../../Extensions/webextensions-selenium-example.crx");                      options.AddExtension(extensionFilePath);                 options.AddArgument("--disable-features=DisableLoadExtensionCommandLineSwitch");

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk//examples/dotnet/SeleniumDocs/Browsers/ChromeTest.cs#L62-67)

##### /examples/dotnet/SeleniumDocs/Browsers/ChromeTest.cs

Copy  Close               using System;     using System.IO;     using System.Linq;     using System.Text.RegularExpressions;     using Microsoft.VisualStudio.TestTools.UnitTesting;     using OpenQA.Selenium;     using OpenQA.Selenium.Chrome;          namespace SeleniumDocs.Browsers     {         [TestClass]         public class ChromeTest         {             private ChromeDriver driver;             private string _logLocation;                  [TestCleanup]             public void Cleanup()             {                 if (_logLocation != null && File.Exists(_logLocation))                 {                     File.Delete(_logLocation);                 }                 driver.Quit();             }                  [TestMethod]             public void BasicOptions()             {                 var options = new ChromeOptions();                 driver = new ChromeDriver(options);             }                  [TestMethod]             public void Arguments()             {                 var options = new ChromeOptions();                      options.AddArgument("--start-maximized");                      driver = new ChromeDriver(options);             }                  [TestMethod]             public void SetBrowserLocation()             {                 string userDataDir = System.IO.Path.Combine(System.IO.Path.GetTempPath(), System.IO.Path.GetRandomFileName());                 System.IO.Directory.CreateDirectory(userDataDir);                 var options = new ChromeOptions();                 options.AddArgument($"--user-data-dir={userDataDir}");                 options.AddArgument("--no-sandbox");                 options.AddArgument("--disable-dev-shm-usage");                      options.BinaryLocation = GetChromeLocation();                      driver = new ChromeDriver(options);             }                  [TestMethod]             public void InstallExtension()             {                 var options = new ChromeOptions();                 var baseDir = AppDomain.CurrentDomain.BaseDirectory;                 var extensionFilePath = Path.Combine(baseDir, "../../../Extensions/webextensions-selenium-example.crx");                      options.AddExtension(extensionFilePath);                 options.AddArgument("--disable-features=DisableLoadExtensionCommandLineSwitch");                      driver = new ChromeDriver(options);                      driver.Url = "https://www.selenium.dev/selenium/web/blank.html";                      IWebElement injected = driver.FindElement(By.Id("webextensions-selenium-example"));                 Assert.AreEqual("Content injected by webextensions-selenium-example", injected.Text);             }                  [TestMethod]             public void ExcludeSwitch()             {                 var options = new ChromeOptions();                      options.AddExcludedArgument("disable-popup-blocking");                      driver = new ChromeDriver(options);             }                  [TestMethod]             public void LogsToFile()             {                 var service = ChromeDriverService.CreateDefaultService();                      service.LogPath = GetLogLocation();                      driver = new ChromeDriver(service);                 driver.Quit(); // Close the Service log file before reading                 var lines = File.ReadLines(GetLogLocation());                 Assert.IsNotNull(lines.FirstOrDefault(line => line.Contains("Starting ChromeDriver")));             }                  [TestMethod]             [Ignore("Not implemented")]             public void LogsToConsole()             {                 var stringWriter = new StringWriter();                 var originalOutput = Console.Out;                 Console.SetOut(stringWriter);                      var service = ChromeDriverService.CreateDefaultService();                      //service.LogToConsole = true;                      driver = new ChromeDriver(service);                      Assert.IsTrue(stringWriter.ToString().Contains("Starting ChromeDriver"));                 Console.SetOut(originalOutput);                 stringWriter.Dispose();             }                  [TestMethod]             [Ignore("Not implemented")]             public void LogsLevel()             {                 var service = ChromeDriverService.CreateDefaultService();                 service.LogPath = GetLogLocation();                      // service.LogLevel = ChromiumDriverLogLevel.Debug                      driver = new ChromeDriver(service);                      driver.Quit(); // Close the Service log file before reading                 var lines = File.ReadLines(GetLogLocation());                 Assert.IsNotNull(lines.FirstOrDefault(line => line.Contains("[DEBUG]:")));             }                  [TestMethod]             [Ignore("Not implemented")]             public void ConfigureDriverLogs()             {                 var service = ChromeDriverService.CreateDefaultService();                 service.LogPath = GetLogLocation();                 service.EnableVerboseLogging = true;                      service.EnableAppendLog = true;                 // service.readableTimeStamp = true;                      driver = new ChromeDriver(service);                      driver.Quit(); // Close the Service log file before reading                 var lines = File.ReadLines(GetLogLocation());                 var regex = new Regex(@"\[\d\d-\d\d-\d\d\d\d");                 Assert.IsNotNull(lines.FirstOrDefault(line => regex.Matches("").Count > 0));             }                  [TestMethod]             public void DisableBuildCheck()             {                 var service = ChromeDriverService.CreateDefaultService();                 service.LogPath = GetLogLocation();                 service.EnableVerboseLogging = true;                      service.DisableBuildCheck = true;                      driver = new ChromeDriver(service);                 driver.Quit(); // Close the Service log file before reading                 var expected = "[WARNING]: You are using an unsupported command-line switch: --disable-build-check";                 var lines = File.ReadLines(GetLogLocation());                 Assert.IsNotNull(lines.FirstOrDefault(line => line.Contains(expected)));             }                  private string GetLogLocation()             {                 if (_logLocation == null || !File.Exists(_logLocation))                 {                     _logLocation = Path.GetTempFileName();                 }                      return _logLocation;             }                  private static string GetChromeLocation()             {                 var options = new ChromeOptions                 {                     BrowserVersion = "stable"                 };                 return new DriverFinder(options).GetBrowserPath();             }         }     }                          options.add_extension(extension_file_path)

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk//examples/ruby/spec/browsers/chrome_spec.rb#L38)

##### /examples/ruby/spec/browsers/chrome\_spec.rb

Copy  Close               # frozen_string_literal: true          require 'spec_helper'          RSpec.describe 'Chrome' do       describe 'Options' do         let(:chrome_location) { driver_finder && ENV.fetch('CHROME_BIN', nil) }              it 'basic options' do           options = Selenium::WebDriver::Options.chrome           @driver = Selenium::WebDriver.for :chrome, options: options         end              it 'add arguments' do           options = Selenium::WebDriver::Options.chrome                options.args << '--start-maximized'                @driver = Selenium::WebDriver.for :chrome, options: options         end              it 'sets location of binary' do           user_data_dir = Dir.mktmpdir('chrome-profile-')           options = Selenium::WebDriver::Options.chrome           options.add_argument("--user-data-dir=#{user_data_dir}")           options.add_argument('--no-sandbox')           options.add_argument('--disable-dev-shm-usage')                options.binary = chrome_location                @driver = Selenium::WebDriver.for :chrome, options: options         end              it 'add extensions' do           extension_file_path = File.expand_path('../spec_support/extensions/webextensions-selenium-example.crx', __dir__)           options = Selenium::WebDriver::Options.chrome                options.add_extension(extension_file_path)           options.add_argument('--disable-features=DisableLoadExtensionCommandLineSwitch')                @driver = Selenium::WebDriver.for :chrome, options: options           @driver.get('https://www.selenium.dev/selenium/web/blank.html')           injected = @driver.find_element(:id, 'webextensions-selenium-example')           expect(injected.text).to eq 'Content injected by webextensions-selenium-example'         end              it 'keeps browser open' do           options = Selenium::WebDriver::Options.chrome                options.detach = true                @driver = Selenium::WebDriver.for :chrome, options: options         end              it 'excludes switches' do           options = Selenium::WebDriver::Options.chrome                options.exclude_switches << 'disable-popup-blocking'                @driver = Selenium::WebDriver.for :chrome, options: options         end       end            describe 'Service' do         let(:file_name) { File.expand_path('chromedriver.log') }              after { FileUtils.rm_f(file_name) }              it 'logs to file' do           service = Selenium::WebDriver::Service.chrome                service.log = file_name                @driver = Selenium::WebDriver.for :chrome, service: service           expect(File.readlines(file_name).first).to include('Starting ChromeDriver')         end              it 'logs to console' do           service = Selenium::WebDriver::Service.chrome                service.log = $stdout                expect {             @driver = Selenium::WebDriver.for :chrome, service: service           }.to output(/Starting ChromeDriver/).to_stdout_from_any_process         end              it 'sets log level' do           service = Selenium::WebDriver::Service.chrome           service.log = file_name                service.args << '--log-level=DEBUG'                @driver = Selenium::WebDriver.for :chrome, service: service           expect(File.readlines(file_name).grep(/\[DEBUG\]:/).any?).to eq true         end              it 'sets log features' do           args = ["--log-path=#{file_name}", '--verbose']           service = Selenium::WebDriver::Service.chrome(args: args)                service.args << '--append-log'           service.args << '--readable-timestamp'                @driver = Selenium::WebDriver.for :chrome, service: service                expect(File.readlines(file_name).grep(/\[\d\d-\d\d-\d\d\d\d/).any?).to eq true         end              it 'disables build checks' do           service = Selenium::WebDriver::Service.chrome log: file_name, args: ['--verbose']                service.args << '--disable-build-check'                @driver = Selenium::WebDriver.for :chrome, service: service           warning = /\[WARNING\]: You are using an unsupported command-line switch: --disable-build-check/           expect(File.readlines(file_name).grep(warning).any?).to eq true         end       end            describe 'Special Features' do         it 'casts' do           @driver = Selenium::WebDriver.for :chrome           sinks = @driver.cast_sinks           unless sinks.empty?             device_name = sinks.first['name']             @driver.start_cast_tab_mirroring(device_name)             expect { @driver.stop_casting(device_name) }.not_to raise_exception           end         end              it 'gets and sets network conditions' do           @driver = Selenium::WebDriver.for :chrome           @driver.network_conditions = {offline: false, latency: 100, throughput: 200}           expect(@driver.network_conditions).to eq(             'offline' => false,             'latency' => 100,             'download_throughput' => 200,             'upload_throughput' => 200           )         end              it 'gets the browser logs' do           @driver = Selenium::WebDriver.for :chrome           @driver.navigate.to 'https://www.selenium.dev/selenium/web/'           sleep 1           logs = @driver.logs.get(:browser)                expect(logs.first.message).to include 'Failed to load resource'         end              it 'sets permissions' do           @driver = Selenium::WebDriver.for :chrome           @driver.navigate.to 'https://www.selenium.dev/selenium/web/'           @driver.add_permission('camera', 'denied')           @driver.add_permissions('clipboard-read' => 'denied', 'clipboard-write' => 'prompt')           expect(permission('camera')).to eq('denied')           expect(permission('clipboard-read')).to eq('denied')           expect(permission('clipboard-write')).to eq('prompt')         end       end            def driver_finder         options = Selenium::WebDriver::Options.chrome(browser_version: 'stable')         service = Selenium::WebDriver::Service.chrome         finder = Selenium::WebDriver::DriverFinder.new(options, service)         ENV['CHROMEDRIVER_BIN'] = finder.driver_path         ENV['CHROME_BIN'] = finder.browser_path       end            def permission(name)         @driver.execute_async_script('callback = arguments[arguments.length - 1];' \                                      'callback(navigator.permissions.query({name: arguments[0]}));', name)['state']       end     end                        const options = new Chrome.Options();         let driver = new Builder()           .forBrowser(Browser.CHROME)           .setChromeOptions(options.addExtensions(['./test/resources/extensions/webextensions-selenium-example.crx']))           .build();

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk//examples/javascript/test/browser/chromeSpecificCaps.spec.js#L62-L66)

##### /examples/javascript/test/browser/chromeSpecificCaps.spec.js

Copy  Close               const Chrome = require('selenium-webdriver/chrome');     const { Browser, Builder } = require("selenium-webdriver");     const options = new Chrome.Options();                    describe('Should be able to Test Command line arguments', function () {       it('headless', async function () {         let driver = new Builder()           .forBrowser(Browser.CHROME)           .setChromeOptions(options.addArguments('--headless=new'))           .build();              await driver.get('https://www.selenium.dev/selenium/web/blank.html');         await driver.quit();       });            it('exclude switches', async function () {         let driver = new Builder()           .forBrowser(Browser.CHROME)           .setChromeOptions(options.excludeSwitches('enable-automation'))           .build();              await driver.get('https://www.selenium.dev/selenium/web/blank.html');         await driver.quit();       });            it('Keep browser open - set detach to true ', async function () {         let driver = new Builder()           .forBrowser(Browser.CHROME)           .setChromeOptions(options.detachDriver(true))           .build();              await driver.get('https://www.selenium.dev/selenium/web/blank.html');              // As tests runs in ci, quitting the driver instance to avoid any failures         await driver.quit();       });            xit('Start browser from specified location ', async function () {         let driver = new Builder()           .forBrowser(Browser.CHROME)           .setChromeOptions(options.setChromeBinaryPath(`Path to chrome binary`))           .build();              await driver.get('https://www.selenium.dev/selenium/web/blank.html');         await driver.quit();       });            it('Basic Chrome test', async function () {         const Options = new Chrome.Options();         let driver = new Builder()           .forBrowser(Browser.CHROME)           .setChromeOptions(Options)           .build();              await driver.get('https://www.selenium.dev/selenium/web/blank.html');         await driver.quit();       });            it('Add Extension', async function () {         const options = new Chrome.Options();         let driver = new Builder()           .forBrowser(Browser.CHROME)           .setChromeOptions(options.addExtensions(['./test/resources/extensions/webextensions-selenium-example.crx']))           .build();              await driver.get('https://www.selenium.dev/selenium/web/blank.html');         await driver.quit();       });     });

[Add Example](https://www.selenium.dev/documentation/about/contributing/#creating-examples)

### Keeping browser open

Setting the `detach` parameter to true will keep the browser open after the process has ended, so long as the quit command is not sent to the driver.

  * Java   * Python   * CSharp   * Ruby   * JavaScript   * Kotlin

**Note** : This is already the default behavior in Java.                   options.add_experimental_option("detach", True)

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk//examples/python/tests/browsers/test_chrome.py#L51)

##### /examples/python/tests/browsers/test\_chrome.py

Copy  Close               import os     import re     import subprocess     import pytest     from selenium import webdriver     from selenium.webdriver.common.by import By          def test_basic_options():         options = get_default_chrome_options()         driver = webdriver.Chrome(options=options)              driver.quit()               def test_args():         options = get_default_chrome_options()              options.add_argument("--start-maximized")              driver = webdriver.Chrome(options=options)         driver.get('http://selenium.dev')              driver.quit()               def test_set_browser_location(chrome_bin):         options = get_default_chrome_options()              options.binary_location = chrome_bin              driver = webdriver.Chrome(options=options)              driver.quit()               def test_add_extension():         options = get_default_chrome_options()         extension_file_path = os.path.abspath("tests/extensions/webextensions-selenium-example.crx")              options.add_extension(extension_file_path)              driver = webdriver.Chrome(options=options)         driver.get("https://www.selenium.dev/selenium/web/blank.html")              driver.quit()               def test_keep_browser_open():         options = get_default_chrome_options()              options.add_experimental_option("detach", True)              driver = webdriver.Chrome(options=options)         driver.get('http://selenium.dev')              driver.quit()               def test_exclude_switches():         options = get_default_chrome_options()              options.add_experimental_option('excludeSwitches', ['disable-popup-blocking'])              driver = webdriver.Chrome(options=options)         driver.get('http://selenium.dev')              driver.quit()               def test_log_to_file(log_path):         service = webdriver.ChromeService(log_output=log_path)              driver = webdriver.Chrome(service=service)              with open(log_path, 'r') as fp:             assert "Starting ChromeDriver" in fp.readline()              driver.quit()               def test_log_to_stdout(capfd):         service = webdriver.ChromeService(log_output=subprocess.STDOUT)              driver = webdriver.Chrome(service=service)              out, err = capfd.readouterr()         assert "Starting ChromeDriver" in out              driver.quit()               def test_log_level(capfd):         service = webdriver.ChromeService(service_args=['--log-level=DEBUG'], log_output=subprocess.STDOUT)              driver = webdriver.Chrome(service=service)              out, err = capfd.readouterr()         assert '[DEBUG]' in err              driver.quit()               def test_log_features(log_path):         service = webdriver.ChromeService(service_args=['--append-log', '--readable-timestamp'], log_output=log_path)              driver = webdriver.Chrome(service=service)              with open(log_path, 'r') as f:             assert re.match(r"\[\d\d-\d\d-\d\d\d\d", f.read())              driver.quit()               def test_build_checks(capfd):         service = webdriver.ChromeService(service_args=['--disable-build-check'], log_output=subprocess.STDOUT)              driver = webdriver.Chrome(service=service)              expected = "[WARNING]: You are using an unsupported command-line switch: --disable-build-check"         out, err = capfd.readouterr()         assert expected in err              driver.quit()               def test_set_network_conditions():         driver = webdriver.Chrome()              network_conditions = {             "offline": False,             "latency": 20,  # 20 ms of latency             "download_throughput": 2000 * 1024 / 8,  # 2000 kbps             "upload_throughput": 2000 * 1024 / 8,    # 2000 kbps         }         driver.set_network_conditions(**network_conditions)              driver.get("https://www.selenium.dev")              # check whether the network conditions are set         assert driver.get_network_conditions() == network_conditions              driver.quit()               def test_set_permissions():         driver = webdriver.Chrome()         driver.get('https://www.selenium.dev')              driver.set_permissions('camera', 'denied')              assert get_permission_state(driver, 'camera') == 'denied'         driver.quit()               def get_permission_state(driver, name):         """Helper function to query the permission state."""         script = """         const callback = arguments[arguments.length - 1];         navigator.permissions.query({name: arguments[0]}).then(permissionStatus => {             callback(permissionStatus.state);         });         """         return driver.execute_async_script(script, name)               def test_cast_features():         driver = webdriver.Chrome()              try:             sinks = driver.get_sinks()             if sinks:                 sink_name = sinks[0]['name']                 driver.start_tab_mirroring(sink_name)                 driver.stop_casting(sink_name)             else:                 pytest.skip("No available Cast sinks to test with.")         finally:             driver.quit()               def test_get_browser_logs():         driver = webdriver.Chrome()         driver.get("https://www.selenium.dev/selenium/web/bidi/logEntryAdded.html")         driver.find_element(By.ID, "consoleError").click()              logs = driver.get_log("browser")              # Assert that at least one log contains the expected message         assert any("I am console error" in log['message'] for log in logs), "No matching log message found."         driver.quit()          def get_default_chrome_options():         options = webdriver.ChromeOptions()         options.add_argument("--no-sandbox")         return options     

**Note** : This is already the default behavior in .NET.

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk//examples/ruby/spec/browsers/chrome_spec.rb#L49)

##### /examples/ruby/spec/browsers/chrome\_spec.rb

Copy  Close               # frozen_string_literal: true          require 'spec_helper'          RSpec.describe 'Chrome' do       describe 'Options' do         let(:chrome_location) { driver_finder && ENV.fetch('CHROME_BIN', nil) }              it 'basic options' do           options = Selenium::WebDriver::Options.chrome           @driver = Selenium::WebDriver.for :chrome, options: options         end              it 'add arguments' do           options = Selenium::WebDriver::Options.chrome                options.args << '--start-maximized'                @driver = Selenium::WebDriver.for :chrome, options: options         end              it 'sets location of binary' do           user_data_dir = Dir.mktmpdir('chrome-profile-')           options = Selenium::WebDriver::Options.chrome           options.add_argument("--user-data-dir=#{user_data_dir}")           options.add_argument('--no-sandbox')           options.add_argument('--disable-dev-shm-usage')                options.binary = chrome_location                @driver = Selenium::WebDriver.for :chrome, options: options         end              it 'add extensions' do           extension_file_path = File.expand_path('../spec_support/extensions/webextensions-selenium-example.crx', __dir__)           options = Selenium::WebDriver::Options.chrome                options.add_extension(extension_file_path)           options.add_argument('--disable-features=DisableLoadExtensionCommandLineSwitch')                @driver = Selenium::WebDriver.for :chrome, options: options           @driver.get('https://www.selenium.dev/selenium/web/blank.html')           injected = @driver.find_element(:id, 'webextensions-selenium-example')           expect(injected.text).to eq 'Content injected by webextensions-selenium-example'         end              it 'keeps browser open' do           options = Selenium::WebDriver::Options.chrome                options.detach = true                @driver = Selenium::WebDriver.for :chrome, options: options         end              it 'excludes switches' do           options = Selenium::WebDriver::Options.chrome                options.exclude_switches << 'disable-popup-blocking'                @driver = Selenium::WebDriver.for :chrome, options: options         end       end            describe 'Service' do         let(:file_name) { File.expand_path('chromedriver.log') }              after { FileUtils.rm_f(file_name) }              it 'logs to file' do           service = Selenium::WebDriver::Service.chrome                service.log = file_name                @driver = Selenium::WebDriver.for :chrome, service: service           expect(File.readlines(file_name).first).to include('Starting ChromeDriver')         end              it 'logs to console' do           service = Selenium::WebDriver::Service.chrome                service.log = $stdout                expect {             @driver = Selenium::WebDriver.for :chrome, service: service           }.to output(/Starting ChromeDriver/).to_stdout_from_any_process         end              it 'sets log level' do           service = Selenium::WebDriver::Service.chrome           service.log = file_name                service.args << '--log-level=DEBUG'                @driver = Selenium::WebDriver.for :chrome, service: service           expect(File.readlines(file_name).grep(/\[DEBUG\]:/).any?).to eq true         end              it 'sets log features' do           args = ["--log-path=#{file_name}", '--verbose']           service = Selenium::WebDriver::Service.chrome(args: args)                service.args << '--append-log'           service.args << '--readable-timestamp'                @driver = Selenium::WebDriver.for :chrome, service: service                expect(File.readlines(file_name).grep(/\[\d\d-\d\d-\d\d\d\d/).any?).to eq true         end              it 'disables build checks' do           service = Selenium::WebDriver::Service.chrome log: file_name, args: ['--verbose']                service.args << '--disable-build-check'                @driver = Selenium::WebDriver.for :chrome, service: service           warning = /\[WARNING\]: You are using an unsupported command-line switch: --disable-build-check/           expect(File.readlines(file_name).grep(warning).any?).to eq true         end       end            describe 'Special Features' do         it 'casts' do           @driver = Selenium::WebDriver.for :chrome           sinks = @driver.cast_sinks           unless sinks.empty?             device_name = sinks.first['name']             @driver.start_cast_tab_mirroring(device_name)             expect { @driver.stop_casting(device_name) }.not_to raise_exception           end         end              it 'gets and sets network conditions' do           @driver = Selenium::WebDriver.for :chrome           @driver.network_conditions = {offline: false, latency: 100, throughput: 200}           expect(@driver.network_conditions).to eq(             'offline' => false,             'latency' => 100,             'download_throughput' => 200,             'upload_throughput' => 200           )         end              it 'gets the browser logs' do           @driver = Selenium::WebDriver.for :chrome           @driver.navigate.to 'https://www.selenium.dev/selenium/web/'           sleep 1           logs = @driver.logs.get(:browser)                expect(logs.first.message).to include 'Failed to load resource'         end              it 'sets permissions' do           @driver = Selenium::WebDriver.for :chrome           @driver.navigate.to 'https://www.selenium.dev/selenium/web/'           @driver.add_permission('camera', 'denied')           @driver.add_permissions('clipboard-read' => 'denied', 'clipboard-write' => 'prompt')           expect(permission('camera')).to eq('denied')           expect(permission('clipboard-read')).to eq('denied')           expect(permission('clipboard-write')).to eq('prompt')         end       end            def driver_finder         options = Selenium::WebDriver::Options.chrome(browser_version: 'stable')         service = Selenium::WebDriver::Service.chrome         finder = Selenium::WebDriver::DriverFinder.new(options, service)         ENV['CHROMEDRIVER_BIN'] = finder.driver_path         ENV['CHROME_BIN'] = finder.browser_path       end            def permission(name)         @driver.execute_async_script('callback = arguments[arguments.length - 1];' \                                      'callback(navigator.permissions.query({name: arguments[0]}));', name)['state']       end     end                        let driver = new Builder()           .forBrowser(Browser.CHROME)           .setChromeOptions(options.detachDriver(true))           .build();

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk//examples/javascript/test/browser/chromeSpecificCaps.spec.js#L29-L32)

##### /examples/javascript/test/browser/chromeSpecificCaps.spec.js

Copy  Close               const Chrome = require('selenium-webdriver/chrome');     const { Browser, Builder } = require("selenium-webdriver");     const options = new Chrome.Options();                    describe('Should be able to Test Command line arguments', function () {       it('headless', async function () {         let driver = new Builder()           .forBrowser(Browser.CHROME)           .setChromeOptions(options.addArguments('--headless=new'))           .build();              await driver.get('https://www.selenium.dev/selenium/web/blank.html');         await driver.quit();       });            it('exclude switches', async function () {         let driver = new Builder()           .forBrowser(Browser.CHROME)           .setChromeOptions(options.excludeSwitches('enable-automation'))           .build();              await driver.get('https://www.selenium.dev/selenium/web/blank.html');         await driver.quit();       });            it('Keep browser open - set detach to true ', async function () {         let driver = new Builder()           .forBrowser(Browser.CHROME)           .setChromeOptions(options.detachDriver(true))           .build();              await driver.get('https://www.selenium.dev/selenium/web/blank.html');              // As tests runs in ci, quitting the driver instance to avoid any failures         await driver.quit();       });            xit('Start browser from specified location ', async function () {         let driver = new Builder()           .forBrowser(Browser.CHROME)           .setChromeOptions(options.setChromeBinaryPath(`Path to chrome binary`))           .build();              await driver.get('https://www.selenium.dev/selenium/web/blank.html');         await driver.quit();       });            it('Basic Chrome test', async function () {         const Options = new Chrome.Options();         let driver = new Builder()           .forBrowser(Browser.CHROME)           .setChromeOptions(Options)           .build();              await driver.get('https://www.selenium.dev/selenium/web/blank.html');         await driver.quit();       });            it('Add Extension', async function () {         const options = new Chrome.Options();         let driver = new Builder()           .forBrowser(Browser.CHROME)           .setChromeOptions(options.addExtensions(['./test/resources/extensions/webextensions-selenium-example.crx']))           .build();              await driver.get('https://www.selenium.dev/selenium/web/blank.html');         await driver.quit();       });     });

[Add Example](https://www.selenium.dev/documentation/about/contributing/#creating-examples)

### Excluding arguments

Chromedriver has several default arguments it uses to start the browser. If you do not want those arguments added, pass them into `excludeSwitches`. A common example is to turn the popup blocker back on. A full list of default arguments can be parsed from the [Chromium Source Code](https://source.chromium.org/chromium/chromium/src/+/main:chrome/test/chromedriver/chrome_launcher.cc)

Set excluded arguments on options:

  * Java   * Python   * CSharp   * Ruby   * JavaScript   * Kotlin

                  options.setExperimentalOption("excludeSwitches", List.of("disable-popup-blocking"));

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk//examples/java/src/test/java/dev/selenium/browsers/ChromeTest.java#L78)

##### /examples/java/src/test/java/dev/selenium/browsers/ChromeTest.java

Copy  Close               package dev.selenium.browsers;          import dev.selenium.BaseTest;     import java.io.File;     import java.io.IOException;     import java.io.PrintStream;     import java.nio.file.Files;     import java.nio.file.Path;     import java.nio.file.Paths;     import java.util.List;     import java.util.Map;     import java.util.logging.Level;     import java.util.regex.Pattern;     import org.junit.jupiter.api.AfterEach;     import org.junit.jupiter.api.Assertions;     import org.junit.jupiter.api.Test;     import org.openqa.selenium.By;     import org.openqa.selenium.WebElement;     import org.openqa.selenium.chrome.ChromeDriver;     import org.openqa.selenium.chrome.ChromeDriverService;     import org.openqa.selenium.chrome.ChromeOptions;     import org.openqa.selenium.chromium.ChromiumDriverLogLevel;     import org.openqa.selenium.chromium.ChromiumNetworkConditions;     import org.openqa.selenium.logging.*;     import org.openqa.selenium.remote.service.DriverFinder;          public class ChromeTest extends BaseTest {       @AfterEach       public void clearProperties() {         System.clearProperty(ChromeDriverService.CHROME_DRIVER_LOG_PROPERTY);         System.clearProperty(ChromeDriverService.CHROME_DRIVER_LOG_LEVEL_PROPERTY);       }            @Test       public void basicOptions() {         ChromeOptions options = getDefaultChromeOptions();         driver = new ChromeDriver(options);       }            @Test       public void arguments() {         ChromeOptions options = getDefaultChromeOptions();              options.addArguments("--start-maximized");              driver = new ChromeDriver(options);       }            @Test       public void setBrowserLocation() {         ChromeOptions options = getDefaultChromeOptions();              options.setBinary(getChromeLocation());              driver = new ChromeDriver(options);       }            @Test       public void extensionOptions() {         ChromeOptions options = getDefaultChromeOptions();         Path path = Paths.get("src/test/resources/extensions/webextensions-selenium-example.crx");         File extensionFilePath = new File(path.toUri());              options.addExtensions(extensionFilePath);         options.addArguments("--disable-features=DisableLoadExtensionCommandLineSwitch");              driver = new ChromeDriver(options);         driver.get("https://www.selenium.dev/selenium/web/blank.html");         WebElement injected = driver.findElement(By.id("webextensions-selenium-example"));         Assertions.assertEquals(             "Content injected by webextensions-selenium-example", injected.getText());       }            @Test       public void excludeSwitches() {         ChromeOptions options = getDefaultChromeOptions();              options.setExperimentalOption("excludeSwitches", List.of("disable-popup-blocking"));              driver = new ChromeDriver(options);       }            @Test       public void loggingPreferences() {         ChromeOptions options = getDefaultChromeOptions();         LoggingPreferences logPrefs = new LoggingPreferences();         logPrefs.enable(LogType.PERFORMANCE, Level.ALL);         options.setCapability(ChromeOptions.LOGGING_PREFS, logPrefs);              driver = new ChromeDriver(options);         driver.get("https://www.selenium.dev");              LogEntries logEntries = driver.manage().logs().get(LogType.PERFORMANCE);         Assertions.assertFalse(logEntries.getAll().isEmpty());       }            @Test       public void logsToFile() throws IOException {         File logLocation = getTempFile("logsToFile", ".log");         ChromeDriverService service =             new ChromeDriverService.Builder().withLogFile(logLocation).build();              driver = new ChromeDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         Assertions.assertTrue(fileContent.contains("Starting ChromeDriver"));       }            @Test       public void logsToConsole() throws IOException {         File logLocation = getTempFile("logsToConsole", ".log");         System.setOut(new PrintStream(logLocation));              ChromeDriverService service =             new ChromeDriverService.Builder().withLogOutput(System.out).build();              driver = new ChromeDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         Assertions.assertTrue(fileContent.contains("Starting ChromeDriver"));       }            @Test       public void logsWithLevel() throws IOException {         File logLocation = getTempFile("logsWithLevel", ".log");         System.setProperty(             ChromeDriverService.CHROME_DRIVER_LOG_PROPERTY, logLocation.getAbsolutePath());              ChromeDriverService service =             new ChromeDriverService.Builder().withLogLevel(ChromiumDriverLogLevel.DEBUG).build();              driver = new ChromeDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         Assertions.assertTrue(fileContent.contains("[DEBUG]:"));       }            @Test       public void configureDriverLogs() throws IOException {         File logLocation = getTempFile("configureDriverLogs", ".log");         System.setProperty(             ChromeDriverService.CHROME_DRIVER_LOG_PROPERTY, logLocation.getAbsolutePath());         System.setProperty(             ChromeDriverService.CHROME_DRIVER_LOG_LEVEL_PROPERTY,             ChromiumDriverLogLevel.DEBUG.toString());              ChromeDriverService service =             new ChromeDriverService.Builder().withAppendLog(true).withReadableTimestamp(true).build();              driver = new ChromeDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         Pattern pattern = Pattern.compile("\\[\\d\\d-\\d\\d-\\d\\d\\d\\d", Pattern.CASE_INSENSITIVE);         Assertions.assertTrue(pattern.matcher(fileContent).find());       }            @Test       public void disableBuildChecks() throws IOException {         File logLocation = getTempFile("disableBuildChecks", ".log");         System.setProperty(             ChromeDriverService.CHROME_DRIVER_LOG_PROPERTY, logLocation.getAbsolutePath());         System.setProperty(             ChromeDriverService.CHROME_DRIVER_LOG_LEVEL_PROPERTY,             ChromiumDriverLogLevel.WARNING.toString());              ChromeDriverService service =             new ChromeDriverService.Builder().withBuildCheckDisabled(true).build();              driver = new ChromeDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         String expected =             "[WARNING]: You are using an unsupported command-line switch: --disable-build-check";         Assertions.assertTrue(fileContent.contains(expected));       }            private File getChromeLocation() {         ChromeOptions options = getDefaultChromeOptions();         options.setBrowserVersion("stable");         DriverFinder finder = new DriverFinder(ChromeDriverService.createDefaultService(), options);         return new File(finder.getBrowserPath());       }            @Test       public void setPermission() {         ChromeDriver driver = new ChromeDriver();         driver.get("https://www.selenium.dev");              driver.setPermission("camera", "denied");              // Verify the permission state is 'denied'         String script = "return navigator.permissions.query({ name: 'camera' })" +                 "    .then(permissionStatus => permissionStatus.state);";         String permissionState = (String) driver.executeScript(script);              Assertions.assertEquals("denied", permissionState);         driver.quit();       }            @Test       public void setNetworkConditions() {         driver = new ChromeDriver();              ChromiumNetworkConditions networkConditions = new ChromiumNetworkConditions();         networkConditions.setOffline(false);         networkConditions.setLatency(java.time.Duration.ofMillis(20)); // 20 ms of latency         networkConditions.setDownloadThroughput(2000 * 1024 / 8); // 2000 kbps         networkConditions.setUploadThroughput(2000 * 1024 / 8);   // 2000 kbps              ((ChromeDriver) driver).setNetworkConditions(networkConditions);              driver.get("https://www.selenium.dev");              // Assert the network conditions are set as expected         ChromiumNetworkConditions actualConditions = ((ChromeDriver) driver).getNetworkConditions();         Assertions.assertAll(             () -> Assertions.assertEquals(networkConditions.getOffline(), actualConditions.getOffline()),             () -> Assertions.assertEquals(networkConditions.getLatency(), actualConditions.getLatency()),             () -> Assertions.assertEquals(networkConditions.getDownloadThroughput(), actualConditions.getDownloadThroughput()),             () -> Assertions.assertEquals(networkConditions.getUploadThroughput(), actualConditions.getUploadThroughput())         );         ((ChromeDriver) driver).deleteNetworkConditions();         driver.quit();       }            @Test       public void castFeatures() {         ChromeDriver driver = new ChromeDriver();              List<Map<String, String>> sinks = driver.getCastSinks();         if (!sinks.isEmpty()) {           String sinkName = sinks.get(0).get("name");           driver.startTabMirroring(sinkName);           driver.stopCasting(sinkName);         }              driver.quit();       }            @Test       public void getBrowserLogs() {         ChromeDriver driver = new ChromeDriver();         driver.get("https://www.selenium.dev/selenium/web/bidi/logEntryAdded.html");         WebElement consoleLogButton = driver.findElement(By.id("consoleError"));         consoleLogButton.click();              LogEntries logs = driver.manage().logs().get(LogType.BROWSER);              // Assert that at least one log contains the expected message         boolean logFound = false;         for (LogEntry log : logs) {           if (log.getMessage().contains("I am console error")) {             logFound = true;             break;           }         }              Assertions.assertTrue(logFound, "No matching log message found.");         driver.quit();       }     }                        options.add_experimental_option('excludeSwitches', ['disable-popup-blocking'])

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk//examples/python/tests/browsers/test_chrome.py#L62)

##### /examples/python/tests/browsers/test\_chrome.py

Copy  Close               import os     import re     import subprocess     import pytest     from selenium import webdriver     from selenium.webdriver.common.by import By          def test_basic_options():         options = get_default_chrome_options()         driver = webdriver.Chrome(options=options)              driver.quit()               def test_args():         options = get_default_chrome_options()              options.add_argument("--start-maximized")              driver = webdriver.Chrome(options=options)         driver.get('http://selenium.dev')              driver.quit()               def test_set_browser_location(chrome_bin):         options = get_default_chrome_options()              options.binary_location = chrome_bin              driver = webdriver.Chrome(options=options)              driver.quit()               def test_add_extension():         options = get_default_chrome_options()         extension_file_path = os.path.abspath("tests/extensions/webextensions-selenium-example.crx")              options.add_extension(extension_file_path)              driver = webdriver.Chrome(options=options)         driver.get("https://www.selenium.dev/selenium/web/blank.html")              driver.quit()               def test_keep_browser_open():         options = get_default_chrome_options()              options.add_experimental_option("detach", True)              driver = webdriver.Chrome(options=options)         driver.get('http://selenium.dev')              driver.quit()               def test_exclude_switches():         options = get_default_chrome_options()              options.add_experimental_option('excludeSwitches', ['disable-popup-blocking'])              driver = webdriver.Chrome(options=options)         driver.get('http://selenium.dev')              driver.quit()               def test_log_to_file(log_path):         service = webdriver.ChromeService(log_output=log_path)              driver = webdriver.Chrome(service=service)              with open(log_path, 'r') as fp:             assert "Starting ChromeDriver" in fp.readline()              driver.quit()               def test_log_to_stdout(capfd):         service = webdriver.ChromeService(log_output=subprocess.STDOUT)              driver = webdriver.Chrome(service=service)              out, err = capfd.readouterr()         assert "Starting ChromeDriver" in out              driver.quit()               def test_log_level(capfd):         service = webdriver.ChromeService(service_args=['--log-level=DEBUG'], log_output=subprocess.STDOUT)              driver = webdriver.Chrome(service=service)              out, err = capfd.readouterr()         assert '[DEBUG]' in err              driver.quit()               def test_log_features(log_path):         service = webdriver.ChromeService(service_args=['--append-log', '--readable-timestamp'], log_output=log_path)              driver = webdriver.Chrome(service=service)              with open(log_path, 'r') as f:             assert re.match(r"\[\d\d-\d\d-\d\d\d\d", f.read())              driver.quit()               def test_build_checks(capfd):         service = webdriver.ChromeService(service_args=['--disable-build-check'], log_output=subprocess.STDOUT)              driver = webdriver.Chrome(service=service)              expected = "[WARNING]: You are using an unsupported command-line switch: --disable-build-check"         out, err = capfd.readouterr()         assert expected in err              driver.quit()               def test_set_network_conditions():         driver = webdriver.Chrome()              network_conditions = {             "offline": False,             "latency": 20,  # 20 ms of latency             "download_throughput": 2000 * 1024 / 8,  # 2000 kbps             "upload_throughput": 2000 * 1024 / 8,    # 2000 kbps         }         driver.set_network_conditions(**network_conditions)              driver.get("https://www.selenium.dev")              # check whether the network conditions are set         assert driver.get_network_conditions() == network_conditions              driver.quit()               def test_set_permissions():         driver = webdriver.Chrome()         driver.get('https://www.selenium.dev')              driver.set_permissions('camera', 'denied')              assert get_permission_state(driver, 'camera') == 'denied'         driver.quit()               def get_permission_state(driver, name):         """Helper function to query the permission state."""         script = """         const callback = arguments[arguments.length - 1];         navigator.permissions.query({name: arguments[0]}).then(permissionStatus => {             callback(permissionStatus.state);         });         """         return driver.execute_async_script(script, name)               def test_cast_features():         driver = webdriver.Chrome()              try:             sinks = driver.get_sinks()             if sinks:                 sink_name = sinks[0]['name']                 driver.start_tab_mirroring(sink_name)                 driver.stop_casting(sink_name)             else:                 pytest.skip("No available Cast sinks to test with.")         finally:             driver.quit()               def test_get_browser_logs():         driver = webdriver.Chrome()         driver.get("https://www.selenium.dev/selenium/web/bidi/logEntryAdded.html")         driver.find_element(By.ID, "consoleError").click()              logs = driver.get_log("browser")              # Assert that at least one log contains the expected message         assert any("I am console error" in log['message'] for log in logs), "No matching log message found."         driver.quit()          def get_default_chrome_options():         options = webdriver.ChromeOptions()         options.add_argument("--no-sandbox")         return options                                options.AddExcludedArgument("disable-popup-blocking");

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/dotnet/SeleniumDocs/Browsers/ChromeTest.cs#L82)

##### examples/dotnet/SeleniumDocs/Browsers/ChromeTest.cs

Copy  Close               using System;     using System.IO;     using System.Linq;     using System.Text.RegularExpressions;     using Microsoft.VisualStudio.TestTools.UnitTesting;     using OpenQA.Selenium;     using OpenQA.Selenium.Chrome;          namespace SeleniumDocs.Browsers     {         [TestClass]         public class ChromeTest         {             private ChromeDriver driver;             private string _logLocation;                  [TestCleanup]             public void Cleanup()             {                 if (_logLocation != null && File.Exists(_logLocation))                 {                     File.Delete(_logLocation);                 }                 driver.Quit();             }                  [TestMethod]             public void BasicOptions()             {                 var options = new ChromeOptions();                 driver = new ChromeDriver(options);             }                  [TestMethod]             public void Arguments()             {                 var options = new ChromeOptions();                      options.AddArgument("--start-maximized");                      driver = new ChromeDriver(options);             }                  [TestMethod]             public void SetBrowserLocation()             {                 string userDataDir = System.IO.Path.Combine(System.IO.Path.GetTempPath(), System.IO.Path.GetRandomFileName());                 System.IO.Directory.CreateDirectory(userDataDir);                 var options = new ChromeOptions();                 options.AddArgument($"--user-data-dir={userDataDir}");                 options.AddArgument("--no-sandbox");                 options.AddArgument("--disable-dev-shm-usage");                      options.BinaryLocation = GetChromeLocation();                      driver = new ChromeDriver(options);             }                  [TestMethod]             public void InstallExtension()             {                 var options = new ChromeOptions();                 var baseDir = AppDomain.CurrentDomain.BaseDirectory;                 var extensionFilePath = Path.Combine(baseDir, "../../../Extensions/webextensions-selenium-example.crx");                      options.AddExtension(extensionFilePath);                 options.AddArgument("--disable-features=DisableLoadExtensionCommandLineSwitch");                      driver = new ChromeDriver(options);                      driver.Url = "https://www.selenium.dev/selenium/web/blank.html";                      IWebElement injected = driver.FindElement(By.Id("webextensions-selenium-example"));                 Assert.AreEqual("Content injected by webextensions-selenium-example", injected.Text);             }                  [TestMethod]             public void ExcludeSwitch()             {                 var options = new ChromeOptions();                      options.AddExcludedArgument("disable-popup-blocking");                      driver = new ChromeDriver(options);             }                  [TestMethod]             public void LogsToFile()             {                 var service = ChromeDriverService.CreateDefaultService();                      service.LogPath = GetLogLocation();                      driver = new ChromeDriver(service);                 driver.Quit(); // Close the Service log file before reading                 var lines = File.ReadLines(GetLogLocation());                 Assert.IsNotNull(lines.FirstOrDefault(line => line.Contains("Starting ChromeDriver")));             }                  [TestMethod]             [Ignore("Not implemented")]             public void LogsToConsole()             {                 var stringWriter = new StringWriter();                 var originalOutput = Console.Out;                 Console.SetOut(stringWriter);                      var service = ChromeDriverService.CreateDefaultService();                      //service.LogToConsole = true;                      driver = new ChromeDriver(service);                      Assert.IsTrue(stringWriter.ToString().Contains("Starting ChromeDriver"));                 Console.SetOut(originalOutput);                 stringWriter.Dispose();             }                  [TestMethod]             [Ignore("Not implemented")]             public void LogsLevel()             {                 var service = ChromeDriverService.CreateDefaultService();                 service.LogPath = GetLogLocation();                      // service.LogLevel = ChromiumDriverLogLevel.Debug                      driver = new ChromeDriver(service);                      driver.Quit(); // Close the Service log file before reading                 var lines = File.ReadLines(GetLogLocation());                 Assert.IsNotNull(lines.FirstOrDefault(line => line.Contains("[DEBUG]:")));             }                  [TestMethod]             [Ignore("Not implemented")]             public void ConfigureDriverLogs()             {                 var service = ChromeDriverService.CreateDefaultService();                 service.LogPath = GetLogLocation();                 service.EnableVerboseLogging = true;                      service.EnableAppendLog = true;                 // service.readableTimeStamp = true;                      driver = new ChromeDriver(service);                      driver.Quit(); // Close the Service log file before reading                 var lines = File.ReadLines(GetLogLocation());                 var regex = new Regex(@"\[\d\d-\d\d-\d\d\d\d");                 Assert.IsNotNull(lines.FirstOrDefault(line => regex.Matches("").Count > 0));             }                  [TestMethod]             public void DisableBuildCheck()             {                 var service = ChromeDriverService.CreateDefaultService();                 service.LogPath = GetLogLocation();                 service.EnableVerboseLogging = true;                      service.DisableBuildCheck = true;                      driver = new ChromeDriver(service);                 driver.Quit(); // Close the Service log file before reading                 var expected = "[WARNING]: You are using an unsupported command-line switch: --disable-build-check";                 var lines = File.ReadLines(GetLogLocation());                 Assert.IsNotNull(lines.FirstOrDefault(line => line.Contains(expected)));             }                  private string GetLogLocation()             {                 if (_logLocation == null || !File.Exists(_logLocation))                 {                     _logLocation = Path.GetTempFileName();                 }                      return _logLocation;             }                  private static string GetChromeLocation()             {                 var options = new ChromeOptions                 {                     BrowserVersion = "stable"                 };                 return new DriverFinder(options).GetBrowserPath();             }         }     }     

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk//examples/ruby/spec/browsers/chrome_spec.rb#L57)

##### /examples/ruby/spec/browsers/chrome\_spec.rb

Copy  Close               # frozen_string_literal: true          require 'spec_helper'          RSpec.describe 'Chrome' do       describe 'Options' do         let(:chrome_location) { driver_finder && ENV.fetch('CHROME_BIN', nil) }              it 'basic options' do           options = Selenium::WebDriver::Options.chrome           @driver = Selenium::WebDriver.for :chrome, options: options         end              it 'add arguments' do           options = Selenium::WebDriver::Options.chrome                options.args << '--start-maximized'                @driver = Selenium::WebDriver.for :chrome, options: options         end              it 'sets location of binary' do           user_data_dir = Dir.mktmpdir('chrome-profile-')           options = Selenium::WebDriver::Options.chrome           options.add_argument("--user-data-dir=#{user_data_dir}")           options.add_argument('--no-sandbox')           options.add_argument('--disable-dev-shm-usage')                options.binary = chrome_location                @driver = Selenium::WebDriver.for :chrome, options: options         end              it 'add extensions' do           extension_file_path = File.expand_path('../spec_support/extensions/webextensions-selenium-example.crx', __dir__)           options = Selenium::WebDriver::Options.chrome                options.add_extension(extension_file_path)           options.add_argument('--disable-features=DisableLoadExtensionCommandLineSwitch')                @driver = Selenium::WebDriver.for :chrome, options: options           @driver.get('https://www.selenium.dev/selenium/web/blank.html')           injected = @driver.find_element(:id, 'webextensions-selenium-example')           expect(injected.text).to eq 'Content injected by webextensions-selenium-example'         end              it 'keeps browser open' do           options = Selenium::WebDriver::Options.chrome                options.detach = true                @driver = Selenium::WebDriver.for :chrome, options: options         end              it 'excludes switches' do           options = Selenium::WebDriver::Options.chrome                options.exclude_switches << 'disable-popup-blocking'                @driver = Selenium::WebDriver.for :chrome, options: options         end       end            describe 'Service' do         let(:file_name) { File.expand_path('chromedriver.log') }              after { FileUtils.rm_f(file_name) }              it 'logs to file' do           service = Selenium::WebDriver::Service.chrome                service.log = file_name                @driver = Selenium::WebDriver.for :chrome, service: service           expect(File.readlines(file_name).first).to include('Starting ChromeDriver')         end              it 'logs to console' do           service = Selenium::WebDriver::Service.chrome                service.log = $stdout                expect {             @driver = Selenium::WebDriver.for :chrome, service: service           }.to output(/Starting ChromeDriver/).to_stdout_from_any_process         end              it 'sets log level' do           service = Selenium::WebDriver::Service.chrome           service.log = file_name                service.args << '--log-level=DEBUG'                @driver = Selenium::WebDriver.for :chrome, service: service           expect(File.readlines(file_name).grep(/\[DEBUG\]:/).any?).to eq true         end              it 'sets log features' do           args = ["--log-path=#{file_name}", '--verbose']           service = Selenium::WebDriver::Service.chrome(args: args)                service.args << '--append-log'           service.args << '--readable-timestamp'                @driver = Selenium::WebDriver.for :chrome, service: service                expect(File.readlines(file_name).grep(/\[\d\d-\d\d-\d\d\d\d/).any?).to eq true         end              it 'disables build checks' do           service = Selenium::WebDriver::Service.chrome log: file_name, args: ['--verbose']                service.args << '--disable-build-check'                @driver = Selenium::WebDriver.for :chrome, service: service           warning = /\[WARNING\]: You are using an unsupported command-line switch: --disable-build-check/           expect(File.readlines(file_name).grep(warning).any?).to eq true         end       end            describe 'Special Features' do         it 'casts' do           @driver = Selenium::WebDriver.for :chrome           sinks = @driver.cast_sinks           unless sinks.empty?             device_name = sinks.first['name']             @driver.start_cast_tab_mirroring(device_name)             expect { @driver.stop_casting(device_name) }.not_to raise_exception           end         end              it 'gets and sets network conditions' do           @driver = Selenium::WebDriver.for :chrome           @driver.network_conditions = {offline: false, latency: 100, throughput: 200}           expect(@driver.network_conditions).to eq(             'offline' => false,             'latency' => 100,             'download_throughput' => 200,             'upload_throughput' => 200           )         end              it 'gets the browser logs' do           @driver = Selenium::WebDriver.for :chrome           @driver.navigate.to 'https://www.selenium.dev/selenium/web/'           sleep 1           logs = @driver.logs.get(:browser)                expect(logs.first.message).to include 'Failed to load resource'         end              it 'sets permissions' do           @driver = Selenium::WebDriver.for :chrome           @driver.navigate.to 'https://www.selenium.dev/selenium/web/'           @driver.add_permission('camera', 'denied')           @driver.add_permissions('clipboard-read' => 'denied', 'clipboard-write' => 'prompt')           expect(permission('camera')).to eq('denied')           expect(permission('clipboard-read')).to eq('denied')           expect(permission('clipboard-write')).to eq('prompt')         end       end            def driver_finder         options = Selenium::WebDriver::Options.chrome(browser_version: 'stable')         service = Selenium::WebDriver::Service.chrome         finder = Selenium::WebDriver::DriverFinder.new(options, service)         ENV['CHROMEDRIVER_BIN'] = finder.driver_path         ENV['CHROME_BIN'] = finder.browser_path       end            def permission(name)         @driver.execute_async_script('callback = arguments[arguments.length - 1];' \                                      'callback(navigator.permissions.query({name: arguments[0]}));', name)['state']       end     end                        let driver = new Builder()           .forBrowser(Browser.CHROME)           .setChromeOptions(options.excludeSwitches('enable-automation'))           .build();

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk//examples/javascript/test/browser/chromeSpecificCaps.spec.js#L19-L22)

##### /examples/javascript/test/browser/chromeSpecificCaps.spec.js

Copy  Close               const Chrome = require('selenium-webdriver/chrome');     const { Browser, Builder } = require("selenium-webdriver");     const options = new Chrome.Options();                    describe('Should be able to Test Command line arguments', function () {       it('headless', async function () {         let driver = new Builder()           .forBrowser(Browser.CHROME)           .setChromeOptions(options.addArguments('--headless=new'))           .build();              await driver.get('https://www.selenium.dev/selenium/web/blank.html');         await driver.quit();       });            it('exclude switches', async function () {         let driver = new Builder()           .forBrowser(Browser.CHROME)           .setChromeOptions(options.excludeSwitches('enable-automation'))           .build();              await driver.get('https://www.selenium.dev/selenium/web/blank.html');         await driver.quit();       });            it('Keep browser open - set detach to true ', async function () {         let driver = new Builder()           .forBrowser(Browser.CHROME)           .setChromeOptions(options.detachDriver(true))           .build();              await driver.get('https://www.selenium.dev/selenium/web/blank.html');              // As tests runs in ci, quitting the driver instance to avoid any failures         await driver.quit();       });            xit('Start browser from specified location ', async function () {         let driver = new Builder()           .forBrowser(Browser.CHROME)           .setChromeOptions(options.setChromeBinaryPath(`Path to chrome binary`))           .build();              await driver.get('https://www.selenium.dev/selenium/web/blank.html');         await driver.quit();       });            it('Basic Chrome test', async function () {         const Options = new Chrome.Options();         let driver = new Builder()           .forBrowser(Browser.CHROME)           .setChromeOptions(Options)           .build();              await driver.get('https://www.selenium.dev/selenium/web/blank.html');         await driver.quit();       });            it('Add Extension', async function () {         const options = new Chrome.Options();         let driver = new Builder()           .forBrowser(Browser.CHROME)           .setChromeOptions(options.addExtensions(['./test/resources/extensions/webextensions-selenium-example.crx']))           .build();              await driver.get('https://www.selenium.dev/selenium/web/blank.html');         await driver.quit();       });     });

[Add Example](https://www.selenium.dev/documentation/about/contributing/#creating-examples)

## Service

Examples for creating a default Service object, and for setting driver location and port can be found on the [Driver Service](https://www.selenium.dev/documentation/webdriver/drivers/service/) page.

### Log output

Getting driver logs can be helpful for debugging issues. The Service class lets you direct where the logs will go. Logging output is ignored unless the user directs it somewhere.

#### File output

To change the logging output to save to a specific file:

  * Java   * Python   * CSharp   * Ruby   * JavaScript   * Kotlin

                  ChromeDriverService service =             new ChromeDriverService.Builder().withLogFile(logLocation).build();

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/java/src/test/java/dev/selenium/browsers/ChromeTest.java#L100-L101)

##### examples/java/src/test/java/dev/selenium/browsers/ChromeTest.java

Copy  Close               package dev.selenium.browsers;          import dev.selenium.BaseTest;     import java.io.File;     import java.io.IOException;     import java.io.PrintStream;     import java.nio.file.Files;     import java.nio.file.Path;     import java.nio.file.Paths;     import java.util.List;     import java.util.Map;     import java.util.logging.Level;     import java.util.regex.Pattern;     import org.junit.jupiter.api.AfterEach;     import org.junit.jupiter.api.Assertions;     import org.junit.jupiter.api.Test;     import org.openqa.selenium.By;     import org.openqa.selenium.WebElement;     import org.openqa.selenium.chrome.ChromeDriver;     import org.openqa.selenium.chrome.ChromeDriverService;     import org.openqa.selenium.chrome.ChromeOptions;     import org.openqa.selenium.chromium.ChromiumDriverLogLevel;     import org.openqa.selenium.chromium.ChromiumNetworkConditions;     import org.openqa.selenium.logging.*;     import org.openqa.selenium.remote.service.DriverFinder;          public class ChromeTest extends BaseTest {       @AfterEach       public void clearProperties() {         System.clearProperty(ChromeDriverService.CHROME_DRIVER_LOG_PROPERTY);         System.clearProperty(ChromeDriverService.CHROME_DRIVER_LOG_LEVEL_PROPERTY);       }            @Test       public void basicOptions() {         ChromeOptions options = getDefaultChromeOptions();         driver = new ChromeDriver(options);       }            @Test       public void arguments() {         ChromeOptions options = getDefaultChromeOptions();              options.addArguments("--start-maximized");              driver = new ChromeDriver(options);       }            @Test       public void setBrowserLocation() {         ChromeOptions options = getDefaultChromeOptions();              options.setBinary(getChromeLocation());              driver = new ChromeDriver(options);       }            @Test       public void extensionOptions() {         ChromeOptions options = getDefaultChromeOptions();         Path path = Paths.get("src/test/resources/extensions/webextensions-selenium-example.crx");         File extensionFilePath = new File(path.toUri());              options.addExtensions(extensionFilePath);         options.addArguments("--disable-features=DisableLoadExtensionCommandLineSwitch");              driver = new ChromeDriver(options);         driver.get("https://www.selenium.dev/selenium/web/blank.html");         WebElement injected = driver.findElement(By.id("webextensions-selenium-example"));         Assertions.assertEquals(             "Content injected by webextensions-selenium-example", injected.getText());       }            @Test       public void excludeSwitches() {         ChromeOptions options = getDefaultChromeOptions();              options.setExperimentalOption("excludeSwitches", List.of("disable-popup-blocking"));              driver = new ChromeDriver(options);       }            @Test       public void loggingPreferences() {         ChromeOptions options = getDefaultChromeOptions();         LoggingPreferences logPrefs = new LoggingPreferences();         logPrefs.enable(LogType.PERFORMANCE, Level.ALL);         options.setCapability(ChromeOptions.LOGGING_PREFS, logPrefs);              driver = new ChromeDriver(options);         driver.get("https://www.selenium.dev");              LogEntries logEntries = driver.manage().logs().get(LogType.PERFORMANCE);         Assertions.assertFalse(logEntries.getAll().isEmpty());       }            @Test       public void logsToFile() throws IOException {         File logLocation = getTempFile("logsToFile", ".log");         ChromeDriverService service =             new ChromeDriverService.Builder().withLogFile(logLocation).build();              driver = new ChromeDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         Assertions.assertTrue(fileContent.contains("Starting ChromeDriver"));       }            @Test       public void logsToConsole() throws IOException {         File logLocation = getTempFile("logsToConsole", ".log");         System.setOut(new PrintStream(logLocation));              ChromeDriverService service =             new ChromeDriverService.Builder().withLogOutput(System.out).build();              driver = new ChromeDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         Assertions.assertTrue(fileContent.contains("Starting ChromeDriver"));       }            @Test       public void logsWithLevel() throws IOException {         File logLocation = getTempFile("logsWithLevel", ".log");         System.setProperty(             ChromeDriverService.CHROME_DRIVER_LOG_PROPERTY, logLocation.getAbsolutePath());              ChromeDriverService service =             new ChromeDriverService.Builder().withLogLevel(ChromiumDriverLogLevel.DEBUG).build();              driver = new ChromeDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         Assertions.assertTrue(fileContent.contains("[DEBUG]:"));       }            @Test       public void configureDriverLogs() throws IOException {         File logLocation = getTempFile("configureDriverLogs", ".log");         System.setProperty(             ChromeDriverService.CHROME_DRIVER_LOG_PROPERTY, logLocation.getAbsolutePath());         System.setProperty(             ChromeDriverService.CHROME_DRIVER_LOG_LEVEL_PROPERTY,             ChromiumDriverLogLevel.DEBUG.toString());              ChromeDriverService service =             new ChromeDriverService.Builder().withAppendLog(true).withReadableTimestamp(true).build();              driver = new ChromeDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         Pattern pattern = Pattern.compile("\\[\\d\\d-\\d\\d-\\d\\d\\d\\d", Pattern.CASE_INSENSITIVE);         Assertions.assertTrue(pattern.matcher(fileContent).find());       }            @Test       public void disableBuildChecks() throws IOException {         File logLocation = getTempFile("disableBuildChecks", ".log");         System.setProperty(             ChromeDriverService.CHROME_DRIVER_LOG_PROPERTY, logLocation.getAbsolutePath());         System.setProperty(             ChromeDriverService.CHROME_DRIVER_LOG_LEVEL_PROPERTY,             ChromiumDriverLogLevel.WARNING.toString());              ChromeDriverService service =             new ChromeDriverService.Builder().withBuildCheckDisabled(true).build();              driver = new ChromeDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         String expected =             "[WARNING]: You are using an unsupported command-line switch: --disable-build-check";         Assertions.assertTrue(fileContent.contains(expected));       }            private File getChromeLocation() {         ChromeOptions options = getDefaultChromeOptions();         options.setBrowserVersion("stable");         DriverFinder finder = new DriverFinder(ChromeDriverService.createDefaultService(), options);         return new File(finder.getBrowserPath());       }            @Test       public void setPermission() {         ChromeDriver driver = new ChromeDriver();         driver.get("https://www.selenium.dev");              driver.setPermission("camera", "denied");              // Verify the permission state is 'denied'         String script = "return navigator.permissions.query({ name: 'camera' })" +                 "    .then(permissionStatus => permissionStatus.state);";         String permissionState = (String) driver.executeScript(script);              Assertions.assertEquals("denied", permissionState);         driver.quit();       }            @Test       public void setNetworkConditions() {         driver = new ChromeDriver();              ChromiumNetworkConditions networkConditions = new ChromiumNetworkConditions();         networkConditions.setOffline(false);         networkConditions.setLatency(java.time.Duration.ofMillis(20)); // 20 ms of latency         networkConditions.setDownloadThroughput(2000 * 1024 / 8); // 2000 kbps         networkConditions.setUploadThroughput(2000 * 1024 / 8);   // 2000 kbps              ((ChromeDriver) driver).setNetworkConditions(networkConditions);              driver.get("https://www.selenium.dev");              // Assert the network conditions are set as expected         ChromiumNetworkConditions actualConditions = ((ChromeDriver) driver).getNetworkConditions();         Assertions.assertAll(             () -> Assertions.assertEquals(networkConditions.getOffline(), actualConditions.getOffline()),             () -> Assertions.assertEquals(networkConditions.getLatency(), actualConditions.getLatency()),             () -> Assertions.assertEquals(networkConditions.getDownloadThroughput(), actualConditions.getDownloadThroughput()),             () -> Assertions.assertEquals(networkConditions.getUploadThroughput(), actualConditions.getUploadThroughput())         );         ((ChromeDriver) driver).deleteNetworkConditions();         driver.quit();       }            @Test       public void castFeatures() {         ChromeDriver driver = new ChromeDriver();              List<Map<String, String>> sinks = driver.getCastSinks();         if (!sinks.isEmpty()) {           String sinkName = sinks.get(0).get("name");           driver.startTabMirroring(sinkName);           driver.stopCasting(sinkName);         }              driver.quit();       }            @Test       public void getBrowserLogs() {         ChromeDriver driver = new ChromeDriver();         driver.get("https://www.selenium.dev/selenium/web/bidi/logEntryAdded.html");         WebElement consoleLogButton = driver.findElement(By.id("consoleError"));         consoleLogButton.click();              LogEntries logs = driver.manage().logs().get(LogType.BROWSER);              // Assert that at least one log contains the expected message         boolean logFound = false;         for (LogEntry log : logs) {           if (log.getMessage().contains("I am console error")) {             logFound = true;             break;           }         }              Assertions.assertTrue(logFound, "No matching log message found.");         driver.quit();       }     }     

**Note** : Java also allows setting file output by System Property:   Property key: `ChromeDriverService.CHROME_DRIVER_LOG_PROPERTY`   Property value: String representing path to log file

[Selenium v4.11](https://github.com/SeleniumHQ/selenium/releases/tag/selenium-4.11.0)                   service = webdriver.ChromeService(log_output=log_path)

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/python/tests/browsers/test_chrome.py#L71)

##### examples/python/tests/browsers/test\_chrome.py

Copy  Close               import os     import re     import subprocess     import pytest     from selenium import webdriver     from selenium.webdriver.common.by import By          def test_basic_options():         options = get_default_chrome_options()         driver = webdriver.Chrome(options=options)              driver.quit()               def test_args():         options = get_default_chrome_options()              options.add_argument("--start-maximized")              driver = webdriver.Chrome(options=options)         driver.get('http://selenium.dev')              driver.quit()               def test_set_browser_location(chrome_bin):         options = get_default_chrome_options()              options.binary_location = chrome_bin              driver = webdriver.Chrome(options=options)              driver.quit()               def test_add_extension():         options = get_default_chrome_options()         extension_file_path = os.path.abspath("tests/extensions/webextensions-selenium-example.crx")              options.add_extension(extension_file_path)              driver = webdriver.Chrome(options=options)         driver.get("https://www.selenium.dev/selenium/web/blank.html")              driver.quit()               def test_keep_browser_open():         options = get_default_chrome_options()              options.add_experimental_option("detach", True)              driver = webdriver.Chrome(options=options)         driver.get('http://selenium.dev')              driver.quit()               def test_exclude_switches():         options = get_default_chrome_options()              options.add_experimental_option('excludeSwitches', ['disable-popup-blocking'])              driver = webdriver.Chrome(options=options)         driver.get('http://selenium.dev')              driver.quit()               def test_log_to_file(log_path):         service = webdriver.ChromeService(log_output=log_path)              driver = webdriver.Chrome(service=service)              with open(log_path, 'r') as fp:             assert "Starting ChromeDriver" in fp.readline()              driver.quit()               def test_log_to_stdout(capfd):         service = webdriver.ChromeService(log_output=subprocess.STDOUT)              driver = webdriver.Chrome(service=service)              out, err = capfd.readouterr()         assert "Starting ChromeDriver" in out              driver.quit()               def test_log_level(capfd):         service = webdriver.ChromeService(service_args=['--log-level=DEBUG'], log_output=subprocess.STDOUT)              driver = webdriver.Chrome(service=service)              out, err = capfd.readouterr()         assert '[DEBUG]' in err              driver.quit()               def test_log_features(log_path):         service = webdriver.ChromeService(service_args=['--append-log', '--readable-timestamp'], log_output=log_path)              driver = webdriver.Chrome(service=service)              with open(log_path, 'r') as f:             assert re.match(r"\[\d\d-\d\d-\d\d\d\d", f.read())              driver.quit()               def test_build_checks(capfd):         service = webdriver.ChromeService(service_args=['--disable-build-check'], log_output=subprocess.STDOUT)              driver = webdriver.Chrome(service=service)              expected = "[WARNING]: You are using an unsupported command-line switch: --disable-build-check"         out, err = capfd.readouterr()         assert expected in err              driver.quit()               def test_set_network_conditions():         driver = webdriver.Chrome()              network_conditions = {             "offline": False,             "latency": 20,  # 20 ms of latency             "download_throughput": 2000 * 1024 / 8,  # 2000 kbps             "upload_throughput": 2000 * 1024 / 8,    # 2000 kbps         }         driver.set_network_conditions(**network_conditions)              driver.get("https://www.selenium.dev")              # check whether the network conditions are set         assert driver.get_network_conditions() == network_conditions              driver.quit()               def test_set_permissions():         driver = webdriver.Chrome()         driver.get('https://www.selenium.dev')              driver.set_permissions('camera', 'denied')              assert get_permission_state(driver, 'camera') == 'denied'         driver.quit()               def get_permission_state(driver, name):         """Helper function to query the permission state."""         script = """         const callback = arguments[arguments.length - 1];         navigator.permissions.query({name: arguments[0]}).then(permissionStatus => {             callback(permissionStatus.state);         });         """         return driver.execute_async_script(script, name)               def test_cast_features():         driver = webdriver.Chrome()              try:             sinks = driver.get_sinks()             if sinks:                 sink_name = sinks[0]['name']                 driver.start_tab_mirroring(sink_name)                 driver.stop_casting(sink_name)             else:                 pytest.skip("No available Cast sinks to test with.")         finally:             driver.quit()               def test_get_browser_logs():         driver = webdriver.Chrome()         driver.get("https://www.selenium.dev/selenium/web/bidi/logEntryAdded.html")         driver.find_element(By.ID, "consoleError").click()              logs = driver.get_log("browser")              # Assert that at least one log contains the expected message         assert any("I am console error" in log['message'] for log in logs), "No matching log message found."         driver.quit()          def get_default_chrome_options():         options = webdriver.ChromeOptions()         options.add_argument("--no-sandbox")         return options     

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/dotnet/SeleniumDocs/Browsers/ChromeTest.cs#L86)

##### examples/dotnet/SeleniumDocs/Browsers/ChromeTest.cs

Copy  Close               using System;     using System.IO;     using System.Linq;     using System.Text.RegularExpressions;     using Microsoft.VisualStudio.TestTools.UnitTesting;     using OpenQA.Selenium;     using OpenQA.Selenium.Chrome;          namespace SeleniumDocs.Browsers     {         [TestClass]         public class ChromeTest         {             private ChromeDriver driver;             private string _logLocation;                  [TestCleanup]             public void Cleanup()             {                 if (_logLocation != null && File.Exists(_logLocation))                 {                     File.Delete(_logLocation);                 }                 driver.Quit();             }                  [TestMethod]             public void BasicOptions()             {                 var options = new ChromeOptions();                 driver = new ChromeDriver(options);             }                  [TestMethod]             public void Arguments()             {                 var options = new ChromeOptions();                      options.AddArgument("--start-maximized");                      driver = new ChromeDriver(options);             }                  [TestMethod]             public void SetBrowserLocation()             {                 string userDataDir = System.IO.Path.Combine(System.IO.Path.GetTempPath(), System.IO.Path.GetRandomFileName());                 System.IO.Directory.CreateDirectory(userDataDir);                 var options = new ChromeOptions();                 options.AddArgument($"--user-data-dir={userDataDir}");                 options.AddArgument("--no-sandbox");                 options.AddArgument("--disable-dev-shm-usage");                      options.BinaryLocation = GetChromeLocation();                      driver = new ChromeDriver(options);             }                  [TestMethod]             public void InstallExtension()             {                 var options = new ChromeOptions();                 var baseDir = AppDomain.CurrentDomain.BaseDirectory;                 var extensionFilePath = Path.Combine(baseDir, "../../../Extensions/webextensions-selenium-example.crx");                      options.AddExtension(extensionFilePath);                 options.AddArgument("--disable-features=DisableLoadExtensionCommandLineSwitch");                      driver = new ChromeDriver(options);                      driver.Url = "https://www.selenium.dev/selenium/web/blank.html";                      IWebElement injected = driver.FindElement(By.Id("webextensions-selenium-example"));                 Assert.AreEqual("Content injected by webextensions-selenium-example", injected.Text);             }                  [TestMethod]             public void ExcludeSwitch()             {                 var options = new ChromeOptions();                      options.AddExcludedArgument("disable-popup-blocking");                      driver = new ChromeDriver(options);             }                  [TestMethod]             public void LogsToFile()             {                 var service = ChromeDriverService.CreateDefaultService();                      service.LogPath = GetLogLocation();                      driver = new ChromeDriver(service);                 driver.Quit(); // Close the Service log file before reading                 var lines = File.ReadLines(GetLogLocation());                 Assert.IsNotNull(lines.FirstOrDefault(line => line.Contains("Starting ChromeDriver")));             }                  [TestMethod]             [Ignore("Not implemented")]             public void LogsToConsole()             {                 var stringWriter = new StringWriter();                 var originalOutput = Console.Out;                 Console.SetOut(stringWriter);                      var service = ChromeDriverService.CreateDefaultService();                      //service.LogToConsole = true;                      driver = new ChromeDriver(service);                      Assert.IsTrue(stringWriter.ToString().Contains("Starting ChromeDriver"));                 Console.SetOut(originalOutput);                 stringWriter.Dispose();             }                  [TestMethod]             [Ignore("Not implemented")]             public void LogsLevel()             {                 var service = ChromeDriverService.CreateDefaultService();                 service.LogPath = GetLogLocation();                      // service.LogLevel = ChromiumDriverLogLevel.Debug                      driver = new ChromeDriver(service);                      driver.Quit(); // Close the Service log file before reading                 var lines = File.ReadLines(GetLogLocation());                 Assert.IsNotNull(lines.FirstOrDefault(line => line.Contains("[DEBUG]:")));             }                  [TestMethod]             [Ignore("Not implemented")]             public void ConfigureDriverLogs()             {                 var service = ChromeDriverService.CreateDefaultService();                 service.LogPath = GetLogLocation();                 service.EnableVerboseLogging = true;                      service.EnableAppendLog = true;                 // service.readableTimeStamp = true;                      driver = new ChromeDriver(service);                      driver.Quit(); // Close the Service log file before reading                 var lines = File.ReadLines(GetLogLocation());                 var regex = new Regex(@"\[\d\d-\d\d-\d\d\d\d");                 Assert.IsNotNull(lines.FirstOrDefault(line => regex.Matches("").Count > 0));             }                  [TestMethod]             public void DisableBuildCheck()             {                 var service = ChromeDriverService.CreateDefaultService();                 service.LogPath = GetLogLocation();                 service.EnableVerboseLogging = true;                      service.DisableBuildCheck = true;                      driver = new ChromeDriver(service);                 driver.Quit(); // Close the Service log file before reading                 var expected = "[WARNING]: You are using an unsupported command-line switch: --disable-build-check";                 var lines = File.ReadLines(GetLogLocation());                 Assert.IsNotNull(lines.FirstOrDefault(line => line.Contains(expected)));             }                  private string GetLogLocation()             {                 if (_logLocation == null || !File.Exists(_logLocation))                 {                     _logLocation = Path.GetTempFileName();                 }                      return _logLocation;             }                  private static string GetChromeLocation()             {                 var options = new ChromeOptions                 {                     BrowserVersion = "stable"                 };                 return new DriverFinder(options).GetBrowserPath();             }         }     }     

[Selenium v4.10](https://github.com/SeleniumHQ/selenium/releases/tag/selenium-4.10.0)

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/ruby/spec/browsers/chrome_spec.rb#L71)

##### examples/ruby/spec/browsers/chrome\_spec.rb

Copy  Close               # frozen_string_literal: true          require 'spec_helper'          RSpec.describe 'Chrome' do       describe 'Options' do         let(:chrome_location) { driver_finder && ENV.fetch('CHROME_BIN', nil) }              it 'basic options' do           options = Selenium::WebDriver::Options.chrome           @driver = Selenium::WebDriver.for :chrome, options: options         end              it 'add arguments' do           options = Selenium::WebDriver::Options.chrome                options.args << '--start-maximized'                @driver = Selenium::WebDriver.for :chrome, options: options         end              it 'sets location of binary' do           user_data_dir = Dir.mktmpdir('chrome-profile-')           options = Selenium::WebDriver::Options.chrome           options.add_argument("--user-data-dir=#{user_data_dir}")           options.add_argument('--no-sandbox')           options.add_argument('--disable-dev-shm-usage')                options.binary = chrome_location                @driver = Selenium::WebDriver.for :chrome, options: options         end              it 'add extensions' do           extension_file_path = File.expand_path('../spec_support/extensions/webextensions-selenium-example.crx', __dir__)           options = Selenium::WebDriver::Options.chrome                options.add_extension(extension_file_path)           options.add_argument('--disable-features=DisableLoadExtensionCommandLineSwitch')                @driver = Selenium::WebDriver.for :chrome, options: options           @driver.get('https://www.selenium.dev/selenium/web/blank.html')           injected = @driver.find_element(:id, 'webextensions-selenium-example')           expect(injected.text).to eq 'Content injected by webextensions-selenium-example'         end              it 'keeps browser open' do           options = Selenium::WebDriver::Options.chrome                options.detach = true                @driver = Selenium::WebDriver.for :chrome, options: options         end              it 'excludes switches' do           options = Selenium::WebDriver::Options.chrome                options.exclude_switches << 'disable-popup-blocking'                @driver = Selenium::WebDriver.for :chrome, options: options         end       end            describe 'Service' do         let(:file_name) { File.expand_path('chromedriver.log') }              after { FileUtils.rm_f(file_name) }              it 'logs to file' do           service = Selenium::WebDriver::Service.chrome                service.log = file_name                @driver = Selenium::WebDriver.for :chrome, service: service           expect(File.readlines(file_name).first).to include('Starting ChromeDriver')         end              it 'logs to console' do           service = Selenium::WebDriver::Service.chrome                service.log = $stdout                expect {             @driver = Selenium::WebDriver.for :chrome, service: service           }.to output(/Starting ChromeDriver/).to_stdout_from_any_process         end              it 'sets log level' do           service = Selenium::WebDriver::Service.chrome           service.log = file_name                service.args << '--log-level=DEBUG'                @driver = Selenium::WebDriver.for :chrome, service: service           expect(File.readlines(file_name).grep(/\[DEBUG\]:/).any?).to eq true         end              it 'sets log features' do           args = ["--log-path=#{file_name}", '--verbose']           service = Selenium::WebDriver::Service.chrome(args: args)                service.args << '--append-log'           service.args << '--readable-timestamp'                @driver = Selenium::WebDriver.for :chrome, service: service                expect(File.readlines(file_name).grep(/\[\d\d-\d\d-\d\d\d\d/).any?).to eq true         end              it 'disables build checks' do           service = Selenium::WebDriver::Service.chrome log: file_name, args: ['--verbose']                service.args << '--disable-build-check'                @driver = Selenium::WebDriver.for :chrome, service: service           warning = /\[WARNING\]: You are using an unsupported command-line switch: --disable-build-check/           expect(File.readlines(file_name).grep(warning).any?).to eq true         end       end            describe 'Special Features' do         it 'casts' do           @driver = Selenium::WebDriver.for :chrome           sinks = @driver.cast_sinks           unless sinks.empty?             device_name = sinks.first['name']             @driver.start_cast_tab_mirroring(device_name)             expect { @driver.stop_casting(device_name) }.not_to raise_exception           end         end              it 'gets and sets network conditions' do           @driver = Selenium::WebDriver.for :chrome           @driver.network_conditions = {offline: false, latency: 100, throughput: 200}           expect(@driver.network_conditions).to eq(             'offline' => false,             'latency' => 100,             'download_throughput' => 200,             'upload_throughput' => 200           )         end              it 'gets the browser logs' do           @driver = Selenium::WebDriver.for :chrome           @driver.navigate.to 'https://www.selenium.dev/selenium/web/'           sleep 1           logs = @driver.logs.get(:browser)                expect(logs.first.message).to include 'Failed to load resource'         end              it 'sets permissions' do           @driver = Selenium::WebDriver.for :chrome           @driver.navigate.to 'https://www.selenium.dev/selenium/web/'           @driver.add_permission('camera', 'denied')           @driver.add_permissions('clipboard-read' => 'denied', 'clipboard-write' => 'prompt')           expect(permission('camera')).to eq('denied')           expect(permission('clipboard-read')).to eq('denied')           expect(permission('clipboard-write')).to eq('prompt')         end       end            def driver_finder         options = Selenium::WebDriver::Options.chrome(browser_version: 'stable')         service = Selenium::WebDriver::Service.chrome         finder = Selenium::WebDriver::DriverFinder.new(options, service)         ENV['CHROMEDRIVER_BIN'] = finder.driver_path         ENV['CHROME_BIN'] = finder.browser_path       end            def permission(name)         @driver.execute_async_script('callback = arguments[arguments.length - 1];' \                                      'callback(navigator.permissions.query({name: arguments[0]}));', name)['state']       end     end     

[Add Example](https://www.selenium.dev/documentation/about/contributing/#creating-examples)

[Add Example](https://www.selenium.dev/documentation/about/contributing/#creating-examples)

#### Console output

To change the logging output to display in the console as STDOUT:

  * Java   * Python   * CSharp   * Ruby   * JavaScript   * Kotlin

[Selenium v4.10](https://github.com/SeleniumHQ/selenium/releases/tag/selenium-4.10.0)                   ChromeDriverService service =             new ChromeDriverService.Builder().withLogOutput(System.out).build();

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/java/src/test/java/dev/selenium/browsers/ChromeTest.java#L114-L115)

##### examples/java/src/test/java/dev/selenium/browsers/ChromeTest.java

Copy  Close               package dev.selenium.browsers;          import dev.selenium.BaseTest;     import java.io.File;     import java.io.IOException;     import java.io.PrintStream;     import java.nio.file.Files;     import java.nio.file.Path;     import java.nio.file.Paths;     import java.util.List;     import java.util.Map;     import java.util.logging.Level;     import java.util.regex.Pattern;     import org.junit.jupiter.api.AfterEach;     import org.junit.jupiter.api.Assertions;     import org.junit.jupiter.api.Test;     import org.openqa.selenium.By;     import org.openqa.selenium.WebElement;     import org.openqa.selenium.chrome.ChromeDriver;     import org.openqa.selenium.chrome.ChromeDriverService;     import org.openqa.selenium.chrome.ChromeOptions;     import org.openqa.selenium.chromium.ChromiumDriverLogLevel;     import org.openqa.selenium.chromium.ChromiumNetworkConditions;     import org.openqa.selenium.logging.*;     import org.openqa.selenium.remote.service.DriverFinder;          public class ChromeTest extends BaseTest {       @AfterEach       public void clearProperties() {         System.clearProperty(ChromeDriverService.CHROME_DRIVER_LOG_PROPERTY);         System.clearProperty(ChromeDriverService.CHROME_DRIVER_LOG_LEVEL_PROPERTY);       }            @Test       public void basicOptions() {         ChromeOptions options = getDefaultChromeOptions();         driver = new ChromeDriver(options);       }            @Test       public void arguments() {         ChromeOptions options = getDefaultChromeOptions();              options.addArguments("--start-maximized");              driver = new ChromeDriver(options);       }            @Test       public void setBrowserLocation() {         ChromeOptions options = getDefaultChromeOptions();              options.setBinary(getChromeLocation());              driver = new ChromeDriver(options);       }            @Test       public void extensionOptions() {         ChromeOptions options = getDefaultChromeOptions();         Path path = Paths.get("src/test/resources/extensions/webextensions-selenium-example.crx");         File extensionFilePath = new File(path.toUri());              options.addExtensions(extensionFilePath);         options.addArguments("--disable-features=DisableLoadExtensionCommandLineSwitch");              driver = new ChromeDriver(options);         driver.get("https://www.selenium.dev/selenium/web/blank.html");         WebElement injected = driver.findElement(By.id("webextensions-selenium-example"));         Assertions.assertEquals(             "Content injected by webextensions-selenium-example", injected.getText());       }            @Test       public void excludeSwitches() {         ChromeOptions options = getDefaultChromeOptions();              options.setExperimentalOption("excludeSwitches", List.of("disable-popup-blocking"));              driver = new ChromeDriver(options);       }            @Test       public void loggingPreferences() {         ChromeOptions options = getDefaultChromeOptions();         LoggingPreferences logPrefs = new LoggingPreferences();         logPrefs.enable(LogType.PERFORMANCE, Level.ALL);         options.setCapability(ChromeOptions.LOGGING_PREFS, logPrefs);              driver = new ChromeDriver(options);         driver.get("https://www.selenium.dev");              LogEntries logEntries = driver.manage().logs().get(LogType.PERFORMANCE);         Assertions.assertFalse(logEntries.getAll().isEmpty());       }            @Test       public void logsToFile() throws IOException {         File logLocation = getTempFile("logsToFile", ".log");         ChromeDriverService service =             new ChromeDriverService.Builder().withLogFile(logLocation).build();              driver = new ChromeDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         Assertions.assertTrue(fileContent.contains("Starting ChromeDriver"));       }            @Test       public void logsToConsole() throws IOException {         File logLocation = getTempFile("logsToConsole", ".log");         System.setOut(new PrintStream(logLocation));              ChromeDriverService service =             new ChromeDriverService.Builder().withLogOutput(System.out).build();              driver = new ChromeDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         Assertions.assertTrue(fileContent.contains("Starting ChromeDriver"));       }            @Test       public void logsWithLevel() throws IOException {         File logLocation = getTempFile("logsWithLevel", ".log");         System.setProperty(             ChromeDriverService.CHROME_DRIVER_LOG_PROPERTY, logLocation.getAbsolutePath());              ChromeDriverService service =             new ChromeDriverService.Builder().withLogLevel(ChromiumDriverLogLevel.DEBUG).build();              driver = new ChromeDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         Assertions.assertTrue(fileContent.contains("[DEBUG]:"));       }            @Test       public void configureDriverLogs() throws IOException {         File logLocation = getTempFile("configureDriverLogs", ".log");         System.setProperty(             ChromeDriverService.CHROME_DRIVER_LOG_PROPERTY, logLocation.getAbsolutePath());         System.setProperty(             ChromeDriverService.CHROME_DRIVER_LOG_LEVEL_PROPERTY,             ChromiumDriverLogLevel.DEBUG.toString());              ChromeDriverService service =             new ChromeDriverService.Builder().withAppendLog(true).withReadableTimestamp(true).build();              driver = new ChromeDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         Pattern pattern = Pattern.compile("\\[\\d\\d-\\d\\d-\\d\\d\\d\\d", Pattern.CASE_INSENSITIVE);         Assertions.assertTrue(pattern.matcher(fileContent).find());       }            @Test       public void disableBuildChecks() throws IOException {         File logLocation = getTempFile("disableBuildChecks", ".log");         System.setProperty(             ChromeDriverService.CHROME_DRIVER_LOG_PROPERTY, logLocation.getAbsolutePath());         System.setProperty(             ChromeDriverService.CHROME_DRIVER_LOG_LEVEL_PROPERTY,             ChromiumDriverLogLevel.WARNING.toString());              ChromeDriverService service =             new ChromeDriverService.Builder().withBuildCheckDisabled(true).build();              driver = new ChromeDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         String expected =             "[WARNING]: You are using an unsupported command-line switch: --disable-build-check";         Assertions.assertTrue(fileContent.contains(expected));       }            private File getChromeLocation() {         ChromeOptions options = getDefaultChromeOptions();         options.setBrowserVersion("stable");         DriverFinder finder = new DriverFinder(ChromeDriverService.createDefaultService(), options);         return new File(finder.getBrowserPath());       }            @Test       public void setPermission() {         ChromeDriver driver = new ChromeDriver();         driver.get("https://www.selenium.dev");              driver.setPermission("camera", "denied");              // Verify the permission state is 'denied'         String script = "return navigator.permissions.query({ name: 'camera' })" +                 "    .then(permissionStatus => permissionStatus.state);";         String permissionState = (String) driver.executeScript(script);              Assertions.assertEquals("denied", permissionState);         driver.quit();       }            @Test       public void setNetworkConditions() {         driver = new ChromeDriver();              ChromiumNetworkConditions networkConditions = new ChromiumNetworkConditions();         networkConditions.setOffline(false);         networkConditions.setLatency(java.time.Duration.ofMillis(20)); // 20 ms of latency         networkConditions.setDownloadThroughput(2000 * 1024 / 8); // 2000 kbps         networkConditions.setUploadThroughput(2000 * 1024 / 8);   // 2000 kbps              ((ChromeDriver) driver).setNetworkConditions(networkConditions);              driver.get("https://www.selenium.dev");              // Assert the network conditions are set as expected         ChromiumNetworkConditions actualConditions = ((ChromeDriver) driver).getNetworkConditions();         Assertions.assertAll(             () -> Assertions.assertEquals(networkConditions.getOffline(), actualConditions.getOffline()),             () -> Assertions.assertEquals(networkConditions.getLatency(), actualConditions.getLatency()),             () -> Assertions.assertEquals(networkConditions.getDownloadThroughput(), actualConditions.getDownloadThroughput()),             () -> Assertions.assertEquals(networkConditions.getUploadThroughput(), actualConditions.getUploadThroughput())         );         ((ChromeDriver) driver).deleteNetworkConditions();         driver.quit();       }            @Test       public void castFeatures() {         ChromeDriver driver = new ChromeDriver();              List<Map<String, String>> sinks = driver.getCastSinks();         if (!sinks.isEmpty()) {           String sinkName = sinks.get(0).get("name");           driver.startTabMirroring(sinkName);           driver.stopCasting(sinkName);         }              driver.quit();       }            @Test       public void getBrowserLogs() {         ChromeDriver driver = new ChromeDriver();         driver.get("https://www.selenium.dev/selenium/web/bidi/logEntryAdded.html");         WebElement consoleLogButton = driver.findElement(By.id("consoleError"));         consoleLogButton.click();              LogEntries logs = driver.manage().logs().get(LogType.BROWSER);              // Assert that at least one log contains the expected message         boolean logFound = false;         for (LogEntry log : logs) {           if (log.getMessage().contains("I am console error")) {             logFound = true;             break;           }         }              Assertions.assertTrue(logFound, "No matching log message found.");         driver.quit();       }     }     

**Note** : Java also allows setting console output by System Property;   Property key: `ChromeDriverService.CHROME_DRIVER_LOG_PROPERTY`   Property value: `DriverService.LOG_STDOUT` or `DriverService.LOG_STDERR`

[Selenium v4.11](https://github.com/SeleniumHQ/selenium/releases/tag/selenium-4.11.0)                   service = webdriver.ChromeService(log_output=subprocess.STDOUT)

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/python/tests/browsers/test_chrome.py#L82)

##### examples/python/tests/browsers/test\_chrome.py

Copy  Close               import os     import re     import subprocess     import pytest     from selenium import webdriver     from selenium.webdriver.common.by import By          def test_basic_options():         options = get_default_chrome_options()         driver = webdriver.Chrome(options=options)              driver.quit()               def test_args():         options = get_default_chrome_options()              options.add_argument("--start-maximized")              driver = webdriver.Chrome(options=options)         driver.get('http://selenium.dev')              driver.quit()               def test_set_browser_location(chrome_bin):         options = get_default_chrome_options()              options.binary_location = chrome_bin              driver = webdriver.Chrome(options=options)              driver.quit()               def test_add_extension():         options = get_default_chrome_options()         extension_file_path = os.path.abspath("tests/extensions/webextensions-selenium-example.crx")              options.add_extension(extension_file_path)              driver = webdriver.Chrome(options=options)         driver.get("https://www.selenium.dev/selenium/web/blank.html")              driver.quit()               def test_keep_browser_open():         options = get_default_chrome_options()              options.add_experimental_option("detach", True)              driver = webdriver.Chrome(options=options)         driver.get('http://selenium.dev')              driver.quit()               def test_exclude_switches():         options = get_default_chrome_options()              options.add_experimental_option('excludeSwitches', ['disable-popup-blocking'])              driver = webdriver.Chrome(options=options)         driver.get('http://selenium.dev')              driver.quit()               def test_log_to_file(log_path):         service = webdriver.ChromeService(log_output=log_path)              driver = webdriver.Chrome(service=service)              with open(log_path, 'r') as fp:             assert "Starting ChromeDriver" in fp.readline()              driver.quit()               def test_log_to_stdout(capfd):         service = webdriver.ChromeService(log_output=subprocess.STDOUT)              driver = webdriver.Chrome(service=service)              out, err = capfd.readouterr()         assert "Starting ChromeDriver" in out              driver.quit()               def test_log_level(capfd):         service = webdriver.ChromeService(service_args=['--log-level=DEBUG'], log_output=subprocess.STDOUT)              driver = webdriver.Chrome(service=service)              out, err = capfd.readouterr()         assert '[DEBUG]' in err              driver.quit()               def test_log_features(log_path):         service = webdriver.ChromeService(service_args=['--append-log', '--readable-timestamp'], log_output=log_path)              driver = webdriver.Chrome(service=service)              with open(log_path, 'r') as f:             assert re.match(r"\[\d\d-\d\d-\d\d\d\d", f.read())              driver.quit()               def test_build_checks(capfd):         service = webdriver.ChromeService(service_args=['--disable-build-check'], log_output=subprocess.STDOUT)              driver = webdriver.Chrome(service=service)              expected = "[WARNING]: You are using an unsupported command-line switch: --disable-build-check"         out, err = capfd.readouterr()         assert expected in err              driver.quit()               def test_set_network_conditions():         driver = webdriver.Chrome()              network_conditions = {             "offline": False,             "latency": 20,  # 20 ms of latency             "download_throughput": 2000 * 1024 / 8,  # 2000 kbps             "upload_throughput": 2000 * 1024 / 8,    # 2000 kbps         }         driver.set_network_conditions(**network_conditions)              driver.get("https://www.selenium.dev")              # check whether the network conditions are set         assert driver.get_network_conditions() == network_conditions              driver.quit()               def test_set_permissions():         driver = webdriver.Chrome()         driver.get('https://www.selenium.dev')              driver.set_permissions('camera', 'denied')              assert get_permission_state(driver, 'camera') == 'denied'         driver.quit()               def get_permission_state(driver, name):         """Helper function to query the permission state."""         script = """         const callback = arguments[arguments.length - 1];         navigator.permissions.query({name: arguments[0]}).then(permissionStatus => {             callback(permissionStatus.state);         });         """         return driver.execute_async_script(script, name)               def test_cast_features():         driver = webdriver.Chrome()              try:             sinks = driver.get_sinks()             if sinks:                 sink_name = sinks[0]['name']                 driver.start_tab_mirroring(sink_name)                 driver.stop_casting(sink_name)             else:                 pytest.skip("No available Cast sinks to test with.")         finally:             driver.quit()               def test_get_browser_logs():         driver = webdriver.Chrome()         driver.get("https://www.selenium.dev/selenium/web/bidi/logEntryAdded.html")         driver.find_element(By.ID, "consoleError").click()              logs = driver.get_log("browser")              # Assert that at least one log contains the expected message         assert any("I am console error" in log['message'] for log in logs), "No matching log message found."         driver.quit()          def get_default_chrome_options():         options = webdriver.ChromeOptions()         options.add_argument("--no-sandbox")         return options     

[Implementation Missing](https://github.com/SeleniumHQ/selenium)

`$stdout` and `$stderr` are both valid values

[Selenium v4.10](https://github.com/SeleniumHQ/selenium/releases/tag/selenium-4.10.0)

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/ruby/spec/browsers/chrome_spec.rb#L80)

##### examples/ruby/spec/browsers/chrome\_spec.rb

Copy  Close               # frozen_string_literal: true          require 'spec_helper'          RSpec.describe 'Chrome' do       describe 'Options' do         let(:chrome_location) { driver_finder && ENV.fetch('CHROME_BIN', nil) }              it 'basic options' do           options = Selenium::WebDriver::Options.chrome           @driver = Selenium::WebDriver.for :chrome, options: options         end              it 'add arguments' do           options = Selenium::WebDriver::Options.chrome                options.args << '--start-maximized'                @driver = Selenium::WebDriver.for :chrome, options: options         end              it 'sets location of binary' do           user_data_dir = Dir.mktmpdir('chrome-profile-')           options = Selenium::WebDriver::Options.chrome           options.add_argument("--user-data-dir=#{user_data_dir}")           options.add_argument('--no-sandbox')           options.add_argument('--disable-dev-shm-usage')                options.binary = chrome_location                @driver = Selenium::WebDriver.for :chrome, options: options         end              it 'add extensions' do           extension_file_path = File.expand_path('../spec_support/extensions/webextensions-selenium-example.crx', __dir__)           options = Selenium::WebDriver::Options.chrome                options.add_extension(extension_file_path)           options.add_argument('--disable-features=DisableLoadExtensionCommandLineSwitch')                @driver = Selenium::WebDriver.for :chrome, options: options           @driver.get('https://www.selenium.dev/selenium/web/blank.html')           injected = @driver.find_element(:id, 'webextensions-selenium-example')           expect(injected.text).to eq 'Content injected by webextensions-selenium-example'         end              it 'keeps browser open' do           options = Selenium::WebDriver::Options.chrome                options.detach = true                @driver = Selenium::WebDriver.for :chrome, options: options         end              it 'excludes switches' do           options = Selenium::WebDriver::Options.chrome                options.exclude_switches << 'disable-popup-blocking'                @driver = Selenium::WebDriver.for :chrome, options: options         end       end            describe 'Service' do         let(:file_name) { File.expand_path('chromedriver.log') }              after { FileUtils.rm_f(file_name) }              it 'logs to file' do           service = Selenium::WebDriver::Service.chrome                service.log = file_name                @driver = Selenium::WebDriver.for :chrome, service: service           expect(File.readlines(file_name).first).to include('Starting ChromeDriver')         end              it 'logs to console' do           service = Selenium::WebDriver::Service.chrome                service.log = $stdout                expect {             @driver = Selenium::WebDriver.for :chrome, service: service           }.to output(/Starting ChromeDriver/).to_stdout_from_any_process         end              it 'sets log level' do           service = Selenium::WebDriver::Service.chrome           service.log = file_name                service.args << '--log-level=DEBUG'                @driver = Selenium::WebDriver.for :chrome, service: service           expect(File.readlines(file_name).grep(/\[DEBUG\]:/).any?).to eq true         end              it 'sets log features' do           args = ["--log-path=#{file_name}", '--verbose']           service = Selenium::WebDriver::Service.chrome(args: args)                service.args << '--append-log'           service.args << '--readable-timestamp'                @driver = Selenium::WebDriver.for :chrome, service: service                expect(File.readlines(file_name).grep(/\[\d\d-\d\d-\d\d\d\d/).any?).to eq true         end              it 'disables build checks' do           service = Selenium::WebDriver::Service.chrome log: file_name, args: ['--verbose']                service.args << '--disable-build-check'                @driver = Selenium::WebDriver.for :chrome, service: service           warning = /\[WARNING\]: You are using an unsupported command-line switch: --disable-build-check/           expect(File.readlines(file_name).grep(warning).any?).to eq true         end       end            describe 'Special Features' do         it 'casts' do           @driver = Selenium::WebDriver.for :chrome           sinks = @driver.cast_sinks           unless sinks.empty?             device_name = sinks.first['name']             @driver.start_cast_tab_mirroring(device_name)             expect { @driver.stop_casting(device_name) }.not_to raise_exception           end         end              it 'gets and sets network conditions' do           @driver = Selenium::WebDriver.for :chrome           @driver.network_conditions = {offline: false, latency: 100, throughput: 200}           expect(@driver.network_conditions).to eq(             'offline' => false,             'latency' => 100,             'download_throughput' => 200,             'upload_throughput' => 200           )         end              it 'gets the browser logs' do           @driver = Selenium::WebDriver.for :chrome           @driver.navigate.to 'https://www.selenium.dev/selenium/web/'           sleep 1           logs = @driver.logs.get(:browser)                expect(logs.first.message).to include 'Failed to load resource'         end              it 'sets permissions' do           @driver = Selenium::WebDriver.for :chrome           @driver.navigate.to 'https://www.selenium.dev/selenium/web/'           @driver.add_permission('camera', 'denied')           @driver.add_permissions('clipboard-read' => 'denied', 'clipboard-write' => 'prompt')           expect(permission('camera')).to eq('denied')           expect(permission('clipboard-read')).to eq('denied')           expect(permission('clipboard-write')).to eq('prompt')         end       end            def driver_finder         options = Selenium::WebDriver::Options.chrome(browser_version: 'stable')         service = Selenium::WebDriver::Service.chrome         finder = Selenium::WebDriver::DriverFinder.new(options, service)         ENV['CHROMEDRIVER_BIN'] = finder.driver_path         ENV['CHROME_BIN'] = finder.browser_path       end            def permission(name)         @driver.execute_async_script('callback = arguments[arguments.length - 1];' \                                      'callback(navigator.permissions.query({name: arguments[0]}));', name)['state']       end     end     

[Add Example](https://www.selenium.dev/documentation/about/contributing/#creating-examples)

[Add Example](https://www.selenium.dev/documentation/about/contributing/#creating-examples)

### Log level

There are 6 available log levels: `ALL`, `DEBUG`, `INFO`, `WARNING`, `SEVERE`, and `OFF`. Note that `--verbose` is equivalent to `--log-level=ALL` and `--silent` is equivalent to `--log-level=OFF`, so this example is just setting the log level generically:

  * Java   * Python   * CSharp   * Ruby   * JavaScript   * Kotlin

[Selenium v4.8](https://github.com/SeleniumHQ/selenium/releases/tag/selenium-4.8.0)                   ChromeDriverService service =             new ChromeDriverService.Builder().withLogLevel(ChromiumDriverLogLevel.DEBUG).build();

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/java/src/test/java/dev/selenium/browsers/ChromeTest.java#L129-L130)

##### examples/java/src/test/java/dev/selenium/browsers/ChromeTest.java

Copy  Close               package dev.selenium.browsers;          import dev.selenium.BaseTest;     import java.io.File;     import java.io.IOException;     import java.io.PrintStream;     import java.nio.file.Files;     import java.nio.file.Path;     import java.nio.file.Paths;     import java.util.List;     import java.util.Map;     import java.util.logging.Level;     import java.util.regex.Pattern;     import org.junit.jupiter.api.AfterEach;     import org.junit.jupiter.api.Assertions;     import org.junit.jupiter.api.Test;     import org.openqa.selenium.By;     import org.openqa.selenium.WebElement;     import org.openqa.selenium.chrome.ChromeDriver;     import org.openqa.selenium.chrome.ChromeDriverService;     import org.openqa.selenium.chrome.ChromeOptions;     import org.openqa.selenium.chromium.ChromiumDriverLogLevel;     import org.openqa.selenium.chromium.ChromiumNetworkConditions;     import org.openqa.selenium.logging.*;     import org.openqa.selenium.remote.service.DriverFinder;          public class ChromeTest extends BaseTest {       @AfterEach       public void clearProperties() {         System.clearProperty(ChromeDriverService.CHROME_DRIVER_LOG_PROPERTY);         System.clearProperty(ChromeDriverService.CHROME_DRIVER_LOG_LEVEL_PROPERTY);       }            @Test       public void basicOptions() {         ChromeOptions options = getDefaultChromeOptions();         driver = new ChromeDriver(options);       }            @Test       public void arguments() {         ChromeOptions options = getDefaultChromeOptions();              options.addArguments("--start-maximized");              driver = new ChromeDriver(options);       }            @Test       public void setBrowserLocation() {         ChromeOptions options = getDefaultChromeOptions();              options.setBinary(getChromeLocation());              driver = new ChromeDriver(options);       }            @Test       public void extensionOptions() {         ChromeOptions options = getDefaultChromeOptions();         Path path = Paths.get("src/test/resources/extensions/webextensions-selenium-example.crx");         File extensionFilePath = new File(path.toUri());              options.addExtensions(extensionFilePath);         options.addArguments("--disable-features=DisableLoadExtensionCommandLineSwitch");              driver = new ChromeDriver(options);         driver.get("https://www.selenium.dev/selenium/web/blank.html");         WebElement injected = driver.findElement(By.id("webextensions-selenium-example"));         Assertions.assertEquals(             "Content injected by webextensions-selenium-example", injected.getText());       }            @Test       public void excludeSwitches() {         ChromeOptions options = getDefaultChromeOptions();              options.setExperimentalOption("excludeSwitches", List.of("disable-popup-blocking"));              driver = new ChromeDriver(options);       }            @Test       public void loggingPreferences() {         ChromeOptions options = getDefaultChromeOptions();         LoggingPreferences logPrefs = new LoggingPreferences();         logPrefs.enable(LogType.PERFORMANCE, Level.ALL);         options.setCapability(ChromeOptions.LOGGING_PREFS, logPrefs);              driver = new ChromeDriver(options);         driver.get("https://www.selenium.dev");              LogEntries logEntries = driver.manage().logs().get(LogType.PERFORMANCE);         Assertions.assertFalse(logEntries.getAll().isEmpty());       }            @Test       public void logsToFile() throws IOException {         File logLocation = getTempFile("logsToFile", ".log");         ChromeDriverService service =             new ChromeDriverService.Builder().withLogFile(logLocation).build();              driver = new ChromeDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         Assertions.assertTrue(fileContent.contains("Starting ChromeDriver"));       }            @Test       public void logsToConsole() throws IOException {         File logLocation = getTempFile("logsToConsole", ".log");         System.setOut(new PrintStream(logLocation));              ChromeDriverService service =             new ChromeDriverService.Builder().withLogOutput(System.out).build();              driver = new ChromeDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         Assertions.assertTrue(fileContent.contains("Starting ChromeDriver"));       }            @Test       public void logsWithLevel() throws IOException {         File logLocation = getTempFile("logsWithLevel", ".log");         System.setProperty(             ChromeDriverService.CHROME_DRIVER_LOG_PROPERTY, logLocation.getAbsolutePath());              ChromeDriverService service =             new ChromeDriverService.Builder().withLogLevel(ChromiumDriverLogLevel.DEBUG).build();              driver = new ChromeDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         Assertions.assertTrue(fileContent.contains("[DEBUG]:"));       }            @Test       public void configureDriverLogs() throws IOException {         File logLocation = getTempFile("configureDriverLogs", ".log");         System.setProperty(             ChromeDriverService.CHROME_DRIVER_LOG_PROPERTY, logLocation.getAbsolutePath());         System.setProperty(             ChromeDriverService.CHROME_DRIVER_LOG_LEVEL_PROPERTY,             ChromiumDriverLogLevel.DEBUG.toString());              ChromeDriverService service =             new ChromeDriverService.Builder().withAppendLog(true).withReadableTimestamp(true).build();              driver = new ChromeDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         Pattern pattern = Pattern.compile("\\[\\d\\d-\\d\\d-\\d\\d\\d\\d", Pattern.CASE_INSENSITIVE);         Assertions.assertTrue(pattern.matcher(fileContent).find());       }            @Test       public void disableBuildChecks() throws IOException {         File logLocation = getTempFile("disableBuildChecks", ".log");         System.setProperty(             ChromeDriverService.CHROME_DRIVER_LOG_PROPERTY, logLocation.getAbsolutePath());         System.setProperty(             ChromeDriverService.CHROME_DRIVER_LOG_LEVEL_PROPERTY,             ChromiumDriverLogLevel.WARNING.toString());              ChromeDriverService service =             new ChromeDriverService.Builder().withBuildCheckDisabled(true).build();              driver = new ChromeDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         String expected =             "[WARNING]: You are using an unsupported command-line switch: --disable-build-check";         Assertions.assertTrue(fileContent.contains(expected));       }            private File getChromeLocation() {         ChromeOptions options = getDefaultChromeOptions();         options.setBrowserVersion("stable");         DriverFinder finder = new DriverFinder(ChromeDriverService.createDefaultService(), options);         return new File(finder.getBrowserPath());       }            @Test       public void setPermission() {         ChromeDriver driver = new ChromeDriver();         driver.get("https://www.selenium.dev");              driver.setPermission("camera", "denied");              // Verify the permission state is 'denied'         String script = "return navigator.permissions.query({ name: 'camera' })" +                 "    .then(permissionStatus => permissionStatus.state);";         String permissionState = (String) driver.executeScript(script);              Assertions.assertEquals("denied", permissionState);         driver.quit();       }            @Test       public void setNetworkConditions() {         driver = new ChromeDriver();              ChromiumNetworkConditions networkConditions = new ChromiumNetworkConditions();         networkConditions.setOffline(false);         networkConditions.setLatency(java.time.Duration.ofMillis(20)); // 20 ms of latency         networkConditions.setDownloadThroughput(2000 * 1024 / 8); // 2000 kbps         networkConditions.setUploadThroughput(2000 * 1024 / 8);   // 2000 kbps              ((ChromeDriver) driver).setNetworkConditions(networkConditions);              driver.get("https://www.selenium.dev");              // Assert the network conditions are set as expected         ChromiumNetworkConditions actualConditions = ((ChromeDriver) driver).getNetworkConditions();         Assertions.assertAll(             () -> Assertions.assertEquals(networkConditions.getOffline(), actualConditions.getOffline()),             () -> Assertions.assertEquals(networkConditions.getLatency(), actualConditions.getLatency()),             () -> Assertions.assertEquals(networkConditions.getDownloadThroughput(), actualConditions.getDownloadThroughput()),             () -> Assertions.assertEquals(networkConditions.getUploadThroughput(), actualConditions.getUploadThroughput())         );         ((ChromeDriver) driver).deleteNetworkConditions();         driver.quit();       }            @Test       public void castFeatures() {         ChromeDriver driver = new ChromeDriver();              List<Map<String, String>> sinks = driver.getCastSinks();         if (!sinks.isEmpty()) {           String sinkName = sinks.get(0).get("name");           driver.startTabMirroring(sinkName);           driver.stopCasting(sinkName);         }              driver.quit();       }            @Test       public void getBrowserLogs() {         ChromeDriver driver = new ChromeDriver();         driver.get("https://www.selenium.dev/selenium/web/bidi/logEntryAdded.html");         WebElement consoleLogButton = driver.findElement(By.id("consoleError"));         consoleLogButton.click();              LogEntries logs = driver.manage().logs().get(LogType.BROWSER);              // Assert that at least one log contains the expected message         boolean logFound = false;         for (LogEntry log : logs) {           if (log.getMessage().contains("I am console error")) {             logFound = true;             break;           }         }              Assertions.assertTrue(logFound, "No matching log message found.");         driver.quit();       }     }     

**Note** : Java also allows setting log level by System Property:   Property key: `ChromeDriverService.CHROME_DRIVER_LOG_LEVEL_PROPERTY`   Property value: String representation of `ChromiumDriverLogLevel` enum

[Selenium v4.11](https://github.com/SeleniumHQ/selenium/releases/tag/selenium-4.11.0)                   service = webdriver.ChromeService(service_args=['--log-level=DEBUG'], log_output=subprocess.STDOUT)

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/python/tests/browsers/test_chrome.py#L93)

##### examples/python/tests/browsers/test\_chrome.py

Copy  Close               import os     import re     import subprocess     import pytest     from selenium import webdriver     from selenium.webdriver.common.by import By          def test_basic_options():         options = get_default_chrome_options()         driver = webdriver.Chrome(options=options)              driver.quit()               def test_args():         options = get_default_chrome_options()              options.add_argument("--start-maximized")              driver = webdriver.Chrome(options=options)         driver.get('http://selenium.dev')              driver.quit()               def test_set_browser_location(chrome_bin):         options = get_default_chrome_options()              options.binary_location = chrome_bin              driver = webdriver.Chrome(options=options)              driver.quit()               def test_add_extension():         options = get_default_chrome_options()         extension_file_path = os.path.abspath("tests/extensions/webextensions-selenium-example.crx")              options.add_extension(extension_file_path)              driver = webdriver.Chrome(options=options)         driver.get("https://www.selenium.dev/selenium/web/blank.html")              driver.quit()               def test_keep_browser_open():         options = get_default_chrome_options()              options.add_experimental_option("detach", True)              driver = webdriver.Chrome(options=options)         driver.get('http://selenium.dev')              driver.quit()               def test_exclude_switches():         options = get_default_chrome_options()              options.add_experimental_option('excludeSwitches', ['disable-popup-blocking'])              driver = webdriver.Chrome(options=options)         driver.get('http://selenium.dev')              driver.quit()               def test_log_to_file(log_path):         service = webdriver.ChromeService(log_output=log_path)              driver = webdriver.Chrome(service=service)              with open(log_path, 'r') as fp:             assert "Starting ChromeDriver" in fp.readline()              driver.quit()               def test_log_to_stdout(capfd):         service = webdriver.ChromeService(log_output=subprocess.STDOUT)              driver = webdriver.Chrome(service=service)              out, err = capfd.readouterr()         assert "Starting ChromeDriver" in out              driver.quit()               def test_log_level(capfd):         service = webdriver.ChromeService(service_args=['--log-level=DEBUG'], log_output=subprocess.STDOUT)              driver = webdriver.Chrome(service=service)              out, err = capfd.readouterr()         assert '[DEBUG]' in err              driver.quit()               def test_log_features(log_path):         service = webdriver.ChromeService(service_args=['--append-log', '--readable-timestamp'], log_output=log_path)              driver = webdriver.Chrome(service=service)              with open(log_path, 'r') as f:             assert re.match(r"\[\d\d-\d\d-\d\d\d\d", f.read())              driver.quit()               def test_build_checks(capfd):         service = webdriver.ChromeService(service_args=['--disable-build-check'], log_output=subprocess.STDOUT)              driver = webdriver.Chrome(service=service)              expected = "[WARNING]: You are using an unsupported command-line switch: --disable-build-check"         out, err = capfd.readouterr()         assert expected in err              driver.quit()               def test_set_network_conditions():         driver = webdriver.Chrome()              network_conditions = {             "offline": False,             "latency": 20,  # 20 ms of latency             "download_throughput": 2000 * 1024 / 8,  # 2000 kbps             "upload_throughput": 2000 * 1024 / 8,    # 2000 kbps         }         driver.set_network_conditions(**network_conditions)              driver.get("https://www.selenium.dev")              # check whether the network conditions are set         assert driver.get_network_conditions() == network_conditions              driver.quit()               def test_set_permissions():         driver = webdriver.Chrome()         driver.get('https://www.selenium.dev')              driver.set_permissions('camera', 'denied')              assert get_permission_state(driver, 'camera') == 'denied'         driver.quit()               def get_permission_state(driver, name):         """Helper function to query the permission state."""         script = """         const callback = arguments[arguments.length - 1];         navigator.permissions.query({name: arguments[0]}).then(permissionStatus => {             callback(permissionStatus.state);         });         """         return driver.execute_async_script(script, name)               def test_cast_features():         driver = webdriver.Chrome()              try:             sinks = driver.get_sinks()             if sinks:                 sink_name = sinks[0]['name']                 driver.start_tab_mirroring(sink_name)                 driver.stop_casting(sink_name)             else:                 pytest.skip("No available Cast sinks to test with.")         finally:             driver.quit()               def test_get_browser_logs():         driver = webdriver.Chrome()         driver.get("https://www.selenium.dev/selenium/web/bidi/logEntryAdded.html")         driver.find_element(By.ID, "consoleError").click()              logs = driver.get_log("browser")              # Assert that at least one log contains the expected message         assert any("I am console error" in log['message'] for log in logs), "No matching log message found."         driver.quit()          def get_default_chrome_options():         options = webdriver.ChromeOptions()         options.add_argument("--no-sandbox")         return options     

[Implementation Missing](https://github.com/SeleniumHQ/selenium)

[Selenium v4.10](https://github.com/SeleniumHQ/selenium/releases/tag/selenium-4.10.0)

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/ruby/spec/browsers/chrome_spec.rb#L91)

##### examples/ruby/spec/browsers/chrome\_spec.rb

Copy  Close               # frozen_string_literal: true          require 'spec_helper'          RSpec.describe 'Chrome' do       describe 'Options' do         let(:chrome_location) { driver_finder && ENV.fetch('CHROME_BIN', nil) }              it 'basic options' do           options = Selenium::WebDriver::Options.chrome           @driver = Selenium::WebDriver.for :chrome, options: options         end              it 'add arguments' do           options = Selenium::WebDriver::Options.chrome                options.args << '--start-maximized'                @driver = Selenium::WebDriver.for :chrome, options: options         end              it 'sets location of binary' do           user_data_dir = Dir.mktmpdir('chrome-profile-')           options = Selenium::WebDriver::Options.chrome           options.add_argument("--user-data-dir=#{user_data_dir}")           options.add_argument('--no-sandbox')           options.add_argument('--disable-dev-shm-usage')                options.binary = chrome_location                @driver = Selenium::WebDriver.for :chrome, options: options         end              it 'add extensions' do           extension_file_path = File.expand_path('../spec_support/extensions/webextensions-selenium-example.crx', __dir__)           options = Selenium::WebDriver::Options.chrome                options.add_extension(extension_file_path)           options.add_argument('--disable-features=DisableLoadExtensionCommandLineSwitch')                @driver = Selenium::WebDriver.for :chrome, options: options           @driver.get('https://www.selenium.dev/selenium/web/blank.html')           injected = @driver.find_element(:id, 'webextensions-selenium-example')           expect(injected.text).to eq 'Content injected by webextensions-selenium-example'         end              it 'keeps browser open' do           options = Selenium::WebDriver::Options.chrome                options.detach = true                @driver = Selenium::WebDriver.for :chrome, options: options         end              it 'excludes switches' do           options = Selenium::WebDriver::Options.chrome                options.exclude_switches << 'disable-popup-blocking'                @driver = Selenium::WebDriver.for :chrome, options: options         end       end            describe 'Service' do         let(:file_name) { File.expand_path('chromedriver.log') }              after { FileUtils.rm_f(file_name) }              it 'logs to file' do           service = Selenium::WebDriver::Service.chrome                service.log = file_name                @driver = Selenium::WebDriver.for :chrome, service: service           expect(File.readlines(file_name).first).to include('Starting ChromeDriver')         end              it 'logs to console' do           service = Selenium::WebDriver::Service.chrome                service.log = $stdout                expect {             @driver = Selenium::WebDriver.for :chrome, service: service           }.to output(/Starting ChromeDriver/).to_stdout_from_any_process         end              it 'sets log level' do           service = Selenium::WebDriver::Service.chrome           service.log = file_name                service.args << '--log-level=DEBUG'                @driver = Selenium::WebDriver.for :chrome, service: service           expect(File.readlines(file_name).grep(/\[DEBUG\]:/).any?).to eq true         end              it 'sets log features' do           args = ["--log-path=#{file_name}", '--verbose']           service = Selenium::WebDriver::Service.chrome(args: args)                service.args << '--append-log'           service.args << '--readable-timestamp'                @driver = Selenium::WebDriver.for :chrome, service: service                expect(File.readlines(file_name).grep(/\[\d\d-\d\d-\d\d\d\d/).any?).to eq true         end              it 'disables build checks' do           service = Selenium::WebDriver::Service.chrome log: file_name, args: ['--verbose']                service.args << '--disable-build-check'                @driver = Selenium::WebDriver.for :chrome, service: service           warning = /\[WARNING\]: You are using an unsupported command-line switch: --disable-build-check/           expect(File.readlines(file_name).grep(warning).any?).to eq true         end       end            describe 'Special Features' do         it 'casts' do           @driver = Selenium::WebDriver.for :chrome           sinks = @driver.cast_sinks           unless sinks.empty?             device_name = sinks.first['name']             @driver.start_cast_tab_mirroring(device_name)             expect { @driver.stop_casting(device_name) }.not_to raise_exception           end         end              it 'gets and sets network conditions' do           @driver = Selenium::WebDriver.for :chrome           @driver.network_conditions = {offline: false, latency: 100, throughput: 200}           expect(@driver.network_conditions).to eq(             'offline' => false,             'latency' => 100,             'download_throughput' => 200,             'upload_throughput' => 200           )         end              it 'gets the browser logs' do           @driver = Selenium::WebDriver.for :chrome           @driver.navigate.to 'https://www.selenium.dev/selenium/web/'           sleep 1           logs = @driver.logs.get(:browser)                expect(logs.first.message).to include 'Failed to load resource'         end              it 'sets permissions' do           @driver = Selenium::WebDriver.for :chrome           @driver.navigate.to 'https://www.selenium.dev/selenium/web/'           @driver.add_permission('camera', 'denied')           @driver.add_permissions('clipboard-read' => 'denied', 'clipboard-write' => 'prompt')           expect(permission('camera')).to eq('denied')           expect(permission('clipboard-read')).to eq('denied')           expect(permission('clipboard-write')).to eq('prompt')         end       end            def driver_finder         options = Selenium::WebDriver::Options.chrome(browser_version: 'stable')         service = Selenium::WebDriver::Service.chrome         finder = Selenium::WebDriver::DriverFinder.new(options, service)         ENV['CHROMEDRIVER_BIN'] = finder.driver_path         ENV['CHROME_BIN'] = finder.browser_path       end            def permission(name)         @driver.execute_async_script('callback = arguments[arguments.length - 1];' \                                      'callback(navigator.permissions.query({name: arguments[0]}));', name)['state']       end     end     

[Add Example](https://www.selenium.dev/documentation/about/contributing/#creating-examples)

[Add Example](https://www.selenium.dev/documentation/about/contributing/#creating-examples)

### Log file features

There are 2 features that are only available when logging to a file:

  * append log   * readable timestamps

To use them, you need to also explicitly specify the log path and log level. The log output will be managed by the driver, not the process, so minor differences may be seen.

  * Java   * Python   * CSharp   * Ruby   * JavaScript   * Kotlin

[Selenium v4.8](https://github.com/SeleniumHQ/selenium/releases/tag/selenium-4.8.0)                   ChromeDriverService service =             new ChromeDriverService.Builder().withAppendLog(true).withReadableTimestamp(true).build();

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/java/src/test/java/dev/selenium/browsers/ChromeTest.java#L147-L148)

##### examples/java/src/test/java/dev/selenium/browsers/ChromeTest.java

Copy  Close               package dev.selenium.browsers;          import dev.selenium.BaseTest;     import java.io.File;     import java.io.IOException;     import java.io.PrintStream;     import java.nio.file.Files;     import java.nio.file.Path;     import java.nio.file.Paths;     import java.util.List;     import java.util.Map;     import java.util.logging.Level;     import java.util.regex.Pattern;     import org.junit.jupiter.api.AfterEach;     import org.junit.jupiter.api.Assertions;     import org.junit.jupiter.api.Test;     import org.openqa.selenium.By;     import org.openqa.selenium.WebElement;     import org.openqa.selenium.chrome.ChromeDriver;     import org.openqa.selenium.chrome.ChromeDriverService;     import org.openqa.selenium.chrome.ChromeOptions;     import org.openqa.selenium.chromium.ChromiumDriverLogLevel;     import org.openqa.selenium.chromium.ChromiumNetworkConditions;     import org.openqa.selenium.logging.*;     import org.openqa.selenium.remote.service.DriverFinder;          public class ChromeTest extends BaseTest {       @AfterEach       public void clearProperties() {         System.clearProperty(ChromeDriverService.CHROME_DRIVER_LOG_PROPERTY);         System.clearProperty(ChromeDriverService.CHROME_DRIVER_LOG_LEVEL_PROPERTY);       }            @Test       public void basicOptions() {         ChromeOptions options = getDefaultChromeOptions();         driver = new ChromeDriver(options);       }            @Test       public void arguments() {         ChromeOptions options = getDefaultChromeOptions();              options.addArguments("--start-maximized");              driver = new ChromeDriver(options);       }            @Test       public void setBrowserLocation() {         ChromeOptions options = getDefaultChromeOptions();              options.setBinary(getChromeLocation());              driver = new ChromeDriver(options);       }            @Test       public void extensionOptions() {         ChromeOptions options = getDefaultChromeOptions();         Path path = Paths.get("src/test/resources/extensions/webextensions-selenium-example.crx");         File extensionFilePath = new File(path.toUri());              options.addExtensions(extensionFilePath);         options.addArguments("--disable-features=DisableLoadExtensionCommandLineSwitch");              driver = new ChromeDriver(options);         driver.get("https://www.selenium.dev/selenium/web/blank.html");         WebElement injected = driver.findElement(By.id("webextensions-selenium-example"));         Assertions.assertEquals(             "Content injected by webextensions-selenium-example", injected.getText());       }            @Test       public void excludeSwitches() {         ChromeOptions options = getDefaultChromeOptions();              options.setExperimentalOption("excludeSwitches", List.of("disable-popup-blocking"));              driver = new ChromeDriver(options);       }            @Test       public void loggingPreferences() {         ChromeOptions options = getDefaultChromeOptions();         LoggingPreferences logPrefs = new LoggingPreferences();         logPrefs.enable(LogType.PERFORMANCE, Level.ALL);         options.setCapability(ChromeOptions.LOGGING_PREFS, logPrefs);              driver = new ChromeDriver(options);         driver.get("https://www.selenium.dev");              LogEntries logEntries = driver.manage().logs().get(LogType.PERFORMANCE);         Assertions.assertFalse(logEntries.getAll().isEmpty());       }            @Test       public void logsToFile() throws IOException {         File logLocation = getTempFile("logsToFile", ".log");         ChromeDriverService service =             new ChromeDriverService.Builder().withLogFile(logLocation).build();              driver = new ChromeDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         Assertions.assertTrue(fileContent.contains("Starting ChromeDriver"));       }            @Test       public void logsToConsole() throws IOException {         File logLocation = getTempFile("logsToConsole", ".log");         System.setOut(new PrintStream(logLocation));              ChromeDriverService service =             new ChromeDriverService.Builder().withLogOutput(System.out).build();              driver = new ChromeDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         Assertions.assertTrue(fileContent.contains("Starting ChromeDriver"));       }            @Test       public void logsWithLevel() throws IOException {         File logLocation = getTempFile("logsWithLevel", ".log");         System.setProperty(             ChromeDriverService.CHROME_DRIVER_LOG_PROPERTY, logLocation.getAbsolutePath());              ChromeDriverService service =             new ChromeDriverService.Builder().withLogLevel(ChromiumDriverLogLevel.DEBUG).build();              driver = new ChromeDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         Assertions.assertTrue(fileContent.contains("[DEBUG]:"));       }            @Test       public void configureDriverLogs() throws IOException {         File logLocation = getTempFile("configureDriverLogs", ".log");         System.setProperty(             ChromeDriverService.CHROME_DRIVER_LOG_PROPERTY, logLocation.getAbsolutePath());         System.setProperty(             ChromeDriverService.CHROME_DRIVER_LOG_LEVEL_PROPERTY,             ChromiumDriverLogLevel.DEBUG.toString());              ChromeDriverService service =             new ChromeDriverService.Builder().withAppendLog(true).withReadableTimestamp(true).build();              driver = new ChromeDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         Pattern pattern = Pattern.compile("\\[\\d\\d-\\d\\d-\\d\\d\\d\\d", Pattern.CASE_INSENSITIVE);         Assertions.assertTrue(pattern.matcher(fileContent).find());       }            @Test       public void disableBuildChecks() throws IOException {         File logLocation = getTempFile("disableBuildChecks", ".log");         System.setProperty(             ChromeDriverService.CHROME_DRIVER_LOG_PROPERTY, logLocation.getAbsolutePath());         System.setProperty(             ChromeDriverService.CHROME_DRIVER_LOG_LEVEL_PROPERTY,             ChromiumDriverLogLevel.WARNING.toString());              ChromeDriverService service =             new ChromeDriverService.Builder().withBuildCheckDisabled(true).build();              driver = new ChromeDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         String expected =             "[WARNING]: You are using an unsupported command-line switch: --disable-build-check";         Assertions.assertTrue(fileContent.contains(expected));       }            private File getChromeLocation() {         ChromeOptions options = getDefaultChromeOptions();         options.setBrowserVersion("stable");         DriverFinder finder = new DriverFinder(ChromeDriverService.createDefaultService(), options);         return new File(finder.getBrowserPath());       }            @Test       public void setPermission() {         ChromeDriver driver = new ChromeDriver();         driver.get("https://www.selenium.dev");              driver.setPermission("camera", "denied");              // Verify the permission state is 'denied'         String script = "return navigator.permissions.query({ name: 'camera' })" +                 "    .then(permissionStatus => permissionStatus.state);";         String permissionState = (String) driver.executeScript(script);              Assertions.assertEquals("denied", permissionState);         driver.quit();       }            @Test       public void setNetworkConditions() {         driver = new ChromeDriver();              ChromiumNetworkConditions networkConditions = new ChromiumNetworkConditions();         networkConditions.setOffline(false);         networkConditions.setLatency(java.time.Duration.ofMillis(20)); // 20 ms of latency         networkConditions.setDownloadThroughput(2000 * 1024 / 8); // 2000 kbps         networkConditions.setUploadThroughput(2000 * 1024 / 8);   // 2000 kbps              ((ChromeDriver) driver).setNetworkConditions(networkConditions);              driver.get("https://www.selenium.dev");              // Assert the network conditions are set as expected         ChromiumNetworkConditions actualConditions = ((ChromeDriver) driver).getNetworkConditions();         Assertions.assertAll(             () -> Assertions.assertEquals(networkConditions.getOffline(), actualConditions.getOffline()),             () -> Assertions.assertEquals(networkConditions.getLatency(), actualConditions.getLatency()),             () -> Assertions.assertEquals(networkConditions.getDownloadThroughput(), actualConditions.getDownloadThroughput()),             () -> Assertions.assertEquals(networkConditions.getUploadThroughput(), actualConditions.getUploadThroughput())         );         ((ChromeDriver) driver).deleteNetworkConditions();         driver.quit();       }            @Test       public void castFeatures() {         ChromeDriver driver = new ChromeDriver();              List<Map<String, String>> sinks = driver.getCastSinks();         if (!sinks.isEmpty()) {           String sinkName = sinks.get(0).get("name");           driver.startTabMirroring(sinkName);           driver.stopCasting(sinkName);         }              driver.quit();       }            @Test       public void getBrowserLogs() {         ChromeDriver driver = new ChromeDriver();         driver.get("https://www.selenium.dev/selenium/web/bidi/logEntryAdded.html");         WebElement consoleLogButton = driver.findElement(By.id("consoleError"));         consoleLogButton.click();              LogEntries logs = driver.manage().logs().get(LogType.BROWSER);              // Assert that at least one log contains the expected message         boolean logFound = false;         for (LogEntry log : logs) {           if (log.getMessage().contains("I am console error")) {             logFound = true;             break;           }         }              Assertions.assertTrue(logFound, "No matching log message found.");         driver.quit();       }     }     

**Note** : Java also allows toggling these features by System Property:   Property keys: `ChromeDriverService.CHROME_DRIVER_APPEND_LOG_PROPERTY` and `ChromeDriverService.CHROME_DRIVER_READABLE_TIMESTAMP`   Property value: `"true"` or `"false"`                   service = webdriver.ChromeService(service_args=['--append-log', '--readable-timestamp'], log_output=log_path)

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/python/tests/browsers/test_chrome.py#L104)

##### examples/python/tests/browsers/test\_chrome.py

Copy  Close               import os     import re     import subprocess     import pytest     from selenium import webdriver     from selenium.webdriver.common.by import By          def test_basic_options():         options = get_default_chrome_options()         driver = webdriver.Chrome(options=options)              driver.quit()               def test_args():         options = get_default_chrome_options()              options.add_argument("--start-maximized")              driver = webdriver.Chrome(options=options)         driver.get('http://selenium.dev')              driver.quit()               def test_set_browser_location(chrome_bin):         options = get_default_chrome_options()              options.binary_location = chrome_bin              driver = webdriver.Chrome(options=options)              driver.quit()               def test_add_extension():         options = get_default_chrome_options()         extension_file_path = os.path.abspath("tests/extensions/webextensions-selenium-example.crx")              options.add_extension(extension_file_path)              driver = webdriver.Chrome(options=options)         driver.get("https://www.selenium.dev/selenium/web/blank.html")              driver.quit()               def test_keep_browser_open():         options = get_default_chrome_options()              options.add_experimental_option("detach", True)              driver = webdriver.Chrome(options=options)         driver.get('http://selenium.dev')              driver.quit()               def test_exclude_switches():         options = get_default_chrome_options()              options.add_experimental_option('excludeSwitches', ['disable-popup-blocking'])              driver = webdriver.Chrome(options=options)         driver.get('http://selenium.dev')              driver.quit()               def test_log_to_file(log_path):         service = webdriver.ChromeService(log_output=log_path)              driver = webdriver.Chrome(service=service)              with open(log_path, 'r') as fp:             assert "Starting ChromeDriver" in fp.readline()              driver.quit()               def test_log_to_stdout(capfd):         service = webdriver.ChromeService(log_output=subprocess.STDOUT)              driver = webdriver.Chrome(service=service)              out, err = capfd.readouterr()         assert "Starting ChromeDriver" in out              driver.quit()               def test_log_level(capfd):         service = webdriver.ChromeService(service_args=['--log-level=DEBUG'], log_output=subprocess.STDOUT)              driver = webdriver.Chrome(service=service)              out, err = capfd.readouterr()         assert '[DEBUG]' in err              driver.quit()               def test_log_features(log_path):         service = webdriver.ChromeService(service_args=['--append-log', '--readable-timestamp'], log_output=log_path)              driver = webdriver.Chrome(service=service)              with open(log_path, 'r') as f:             assert re.match(r"\[\d\d-\d\d-\d\d\d\d", f.read())              driver.quit()               def test_build_checks(capfd):         service = webdriver.ChromeService(service_args=['--disable-build-check'], log_output=subprocess.STDOUT)              driver = webdriver.Chrome(service=service)              expected = "[WARNING]: You are using an unsupported command-line switch: --disable-build-check"         out, err = capfd.readouterr()         assert expected in err              driver.quit()               def test_set_network_conditions():         driver = webdriver.Chrome()              network_conditions = {             "offline": False,             "latency": 20,  # 20 ms of latency             "download_throughput": 2000 * 1024 / 8,  # 2000 kbps             "upload_throughput": 2000 * 1024 / 8,    # 2000 kbps         }         driver.set_network_conditions(**network_conditions)              driver.get("https://www.selenium.dev")              # check whether the network conditions are set         assert driver.get_network_conditions() == network_conditions              driver.quit()               def test_set_permissions():         driver = webdriver.Chrome()         driver.get('https://www.selenium.dev')              driver.set_permissions('camera', 'denied')              assert get_permission_state(driver, 'camera') == 'denied'         driver.quit()               def get_permission_state(driver, name):         """Helper function to query the permission state."""         script = """         const callback = arguments[arguments.length - 1];         navigator.permissions.query({name: arguments[0]}).then(permissionStatus => {             callback(permissionStatus.state);         });         """         return driver.execute_async_script(script, name)               def test_cast_features():         driver = webdriver.Chrome()              try:             sinks = driver.get_sinks()             if sinks:                 sink_name = sinks[0]['name']                 driver.start_tab_mirroring(sink_name)                 driver.stop_casting(sink_name)             else:                 pytest.skip("No available Cast sinks to test with.")         finally:             driver.quit()               def test_get_browser_logs():         driver = webdriver.Chrome()         driver.get("https://www.selenium.dev/selenium/web/bidi/logEntryAdded.html")         driver.find_element(By.ID, "consoleError").click()              logs = driver.get_log("browser")              # Assert that at least one log contains the expected message         assert any("I am console error" in log['message'] for log in logs), "No matching log message found."         driver.quit()          def get_default_chrome_options():         options = webdriver.ChromeOptions()         options.add_argument("--no-sandbox")         return options     

[Implementation Missing](https://github.com/SeleniumHQ/selenium)

[Selenium v4.8](https://github.com/SeleniumHQ/selenium/releases/tag/selenium-4.8.0)                     service.args << '--append-log'

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/ruby/spec/browsers/chrome_spec.rb#L101-L102)

##### examples/ruby/spec/browsers/chrome\_spec.rb

Copy  Close               # frozen_string_literal: true          require 'spec_helper'          RSpec.describe 'Chrome' do       describe 'Options' do         let(:chrome_location) { driver_finder && ENV.fetch('CHROME_BIN', nil) }              it 'basic options' do           options = Selenium::WebDriver::Options.chrome           @driver = Selenium::WebDriver.for :chrome, options: options         end              it 'add arguments' do           options = Selenium::WebDriver::Options.chrome                options.args << '--start-maximized'                @driver = Selenium::WebDriver.for :chrome, options: options         end              it 'sets location of binary' do           user_data_dir = Dir.mktmpdir('chrome-profile-')           options = Selenium::WebDriver::Options.chrome           options.add_argument("--user-data-dir=#{user_data_dir}")           options.add_argument('--no-sandbox')           options.add_argument('--disable-dev-shm-usage')                options.binary = chrome_location                @driver = Selenium::WebDriver.for :chrome, options: options         end              it 'add extensions' do           extension_file_path = File.expand_path('../spec_support/extensions/webextensions-selenium-example.crx', __dir__)           options = Selenium::WebDriver::Options.chrome                options.add_extension(extension_file_path)           options.add_argument('--disable-features=DisableLoadExtensionCommandLineSwitch')                @driver = Selenium::WebDriver.for :chrome, options: options           @driver.get('https://www.selenium.dev/selenium/web/blank.html')           injected = @driver.find_element(:id, 'webextensions-selenium-example')           expect(injected.text).to eq 'Content injected by webextensions-selenium-example'         end              it 'keeps browser open' do           options = Selenium::WebDriver::Options.chrome                options.detach = true                @driver = Selenium::WebDriver.for :chrome, options: options         end              it 'excludes switches' do           options = Selenium::WebDriver::Options.chrome                options.exclude_switches << 'disable-popup-blocking'                @driver = Selenium::WebDriver.for :chrome, options: options         end       end            describe 'Service' do         let(:file_name) { File.expand_path('chromedriver.log') }              after { FileUtils.rm_f(file_name) }              it 'logs to file' do           service = Selenium::WebDriver::Service.chrome                service.log = file_name                @driver = Selenium::WebDriver.for :chrome, service: service           expect(File.readlines(file_name).first).to include('Starting ChromeDriver')         end              it 'logs to console' do           service = Selenium::WebDriver::Service.chrome                service.log = $stdout                expect {             @driver = Selenium::WebDriver.for :chrome, service: service           }.to output(/Starting ChromeDriver/).to_stdout_from_any_process         end              it 'sets log level' do           service = Selenium::WebDriver::Service.chrome           service.log = file_name                service.args << '--log-level=DEBUG'                @driver = Selenium::WebDriver.for :chrome, service: service           expect(File.readlines(file_name).grep(/\[DEBUG\]:/).any?).to eq true         end              it 'sets log features' do           args = ["--log-path=#{file_name}", '--verbose']           service = Selenium::WebDriver::Service.chrome(args: args)                service.args << '--append-log'           service.args << '--readable-timestamp'                @driver = Selenium::WebDriver.for :chrome, service: service                expect(File.readlines(file_name).grep(/\[\d\d-\d\d-\d\d\d\d/).any?).to eq true         end              it 'disables build checks' do           service = Selenium::WebDriver::Service.chrome log: file_name, args: ['--verbose']                service.args << '--disable-build-check'                @driver = Selenium::WebDriver.for :chrome, service: service           warning = /\[WARNING\]: You are using an unsupported command-line switch: --disable-build-check/           expect(File.readlines(file_name).grep(warning).any?).to eq true         end       end            describe 'Special Features' do         it 'casts' do           @driver = Selenium::WebDriver.for :chrome           sinks = @driver.cast_sinks           unless sinks.empty?             device_name = sinks.first['name']             @driver.start_cast_tab_mirroring(device_name)             expect { @driver.stop_casting(device_name) }.not_to raise_exception           end         end              it 'gets and sets network conditions' do           @driver = Selenium::WebDriver.for :chrome           @driver.network_conditions = {offline: false, latency: 100, throughput: 200}           expect(@driver.network_conditions).to eq(             'offline' => false,             'latency' => 100,             'download_throughput' => 200,             'upload_throughput' => 200           )         end              it 'gets the browser logs' do           @driver = Selenium::WebDriver.for :chrome           @driver.navigate.to 'https://www.selenium.dev/selenium/web/'           sleep 1           logs = @driver.logs.get(:browser)                expect(logs.first.message).to include 'Failed to load resource'         end              it 'sets permissions' do           @driver = Selenium::WebDriver.for :chrome           @driver.navigate.to 'https://www.selenium.dev/selenium/web/'           @driver.add_permission('camera', 'denied')           @driver.add_permissions('clipboard-read' => 'denied', 'clipboard-write' => 'prompt')           expect(permission('camera')).to eq('denied')           expect(permission('clipboard-read')).to eq('denied')           expect(permission('clipboard-write')).to eq('prompt')         end       end            def driver_finder         options = Selenium::WebDriver::Options.chrome(browser_version: 'stable')         service = Selenium::WebDriver::Service.chrome         finder = Selenium::WebDriver::DriverFinder.new(options, service)         ENV['CHROMEDRIVER_BIN'] = finder.driver_path         ENV['CHROME_BIN'] = finder.browser_path       end            def permission(name)         @driver.execute_async_script('callback = arguments[arguments.length - 1];' \                                      'callback(navigator.permissions.query({name: arguments[0]}));', name)['state']       end     end     

[Add Example](https://www.selenium.dev/documentation/about/contributing/#creating-examples)

[Add Example](https://www.selenium.dev/documentation/about/contributing/#creating-examples)

### Disabling build check

Chromedriver and Chrome browser versions should match, and if they don’t the driver will error. If you disable the build check, you can force the driver to be used with any version of Chrome. Note that this is an unsupported feature, and bugs will not be investigated.

  * Java   * Python   * CSharp   * Ruby   * JavaScript   * Kotlin

[Selenium v4.8](https://github.com/SeleniumHQ/selenium/releases/tag/selenium-4.8.0)                   ChromeDriverService service =             new ChromeDriverService.Builder().withBuildCheckDisabled(true).build();

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/java/src/test/java/dev/selenium/browsers/ChromeTest.java#L166-L167)

##### examples/java/src/test/java/dev/selenium/browsers/ChromeTest.java

Copy  Close               package dev.selenium.browsers;          import dev.selenium.BaseTest;     import java.io.File;     import java.io.IOException;     import java.io.PrintStream;     import java.nio.file.Files;     import java.nio.file.Path;     import java.nio.file.Paths;     import java.util.List;     import java.util.Map;     import java.util.logging.Level;     import java.util.regex.Pattern;     import org.junit.jupiter.api.AfterEach;     import org.junit.jupiter.api.Assertions;     import org.junit.jupiter.api.Test;     import org.openqa.selenium.By;     import org.openqa.selenium.WebElement;     import org.openqa.selenium.chrome.ChromeDriver;     import org.openqa.selenium.chrome.ChromeDriverService;     import org.openqa.selenium.chrome.ChromeOptions;     import org.openqa.selenium.chromium.ChromiumDriverLogLevel;     import org.openqa.selenium.chromium.ChromiumNetworkConditions;     import org.openqa.selenium.logging.*;     import org.openqa.selenium.remote.service.DriverFinder;          public class ChromeTest extends BaseTest {       @AfterEach       public void clearProperties() {         System.clearProperty(ChromeDriverService.CHROME_DRIVER_LOG_PROPERTY);         System.clearProperty(ChromeDriverService.CHROME_DRIVER_LOG_LEVEL_PROPERTY);       }            @Test       public void basicOptions() {         ChromeOptions options = getDefaultChromeOptions();         driver = new ChromeDriver(options);       }            @Test       public void arguments() {         ChromeOptions options = getDefaultChromeOptions();              options.addArguments("--start-maximized");              driver = new ChromeDriver(options);       }            @Test       public void setBrowserLocation() {         ChromeOptions options = getDefaultChromeOptions();              options.setBinary(getChromeLocation());              driver = new ChromeDriver(options);       }            @Test       public void extensionOptions() {         ChromeOptions options = getDefaultChromeOptions();         Path path = Paths.get("src/test/resources/extensions/webextensions-selenium-example.crx");         File extensionFilePath = new File(path.toUri());              options.addExtensions(extensionFilePath);         options.addArguments("--disable-features=DisableLoadExtensionCommandLineSwitch");              driver = new ChromeDriver(options);         driver.get("https://www.selenium.dev/selenium/web/blank.html");         WebElement injected = driver.findElement(By.id("webextensions-selenium-example"));         Assertions.assertEquals(             "Content injected by webextensions-selenium-example", injected.getText());       }            @Test       public void excludeSwitches() {         ChromeOptions options = getDefaultChromeOptions();              options.setExperimentalOption("excludeSwitches", List.of("disable-popup-blocking"));              driver = new ChromeDriver(options);       }            @Test       public void loggingPreferences() {         ChromeOptions options = getDefaultChromeOptions();         LoggingPreferences logPrefs = new LoggingPreferences();         logPrefs.enable(LogType.PERFORMANCE, Level.ALL);         options.setCapability(ChromeOptions.LOGGING_PREFS, logPrefs);              driver = new ChromeDriver(options);         driver.get("https://www.selenium.dev");              LogEntries logEntries = driver.manage().logs().get(LogType.PERFORMANCE);         Assertions.assertFalse(logEntries.getAll().isEmpty());       }            @Test       public void logsToFile() throws IOException {         File logLocation = getTempFile("logsToFile", ".log");         ChromeDriverService service =             new ChromeDriverService.Builder().withLogFile(logLocation).build();              driver = new ChromeDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         Assertions.assertTrue(fileContent.contains("Starting ChromeDriver"));       }            @Test       public void logsToConsole() throws IOException {         File logLocation = getTempFile("logsToConsole", ".log");         System.setOut(new PrintStream(logLocation));              ChromeDriverService service =             new ChromeDriverService.Builder().withLogOutput(System.out).build();              driver = new ChromeDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         Assertions.assertTrue(fileContent.contains("Starting ChromeDriver"));       }            @Test       public void logsWithLevel() throws IOException {         File logLocation = getTempFile("logsWithLevel", ".log");         System.setProperty(             ChromeDriverService.CHROME_DRIVER_LOG_PROPERTY, logLocation.getAbsolutePath());              ChromeDriverService service =             new ChromeDriverService.Builder().withLogLevel(ChromiumDriverLogLevel.DEBUG).build();              driver = new ChromeDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         Assertions.assertTrue(fileContent.contains("[DEBUG]:"));       }            @Test       public void configureDriverLogs() throws IOException {         File logLocation = getTempFile("configureDriverLogs", ".log");         System.setProperty(             ChromeDriverService.CHROME_DRIVER_LOG_PROPERTY, logLocation.getAbsolutePath());         System.setProperty(             ChromeDriverService.CHROME_DRIVER_LOG_LEVEL_PROPERTY,             ChromiumDriverLogLevel.DEBUG.toString());              ChromeDriverService service =             new ChromeDriverService.Builder().withAppendLog(true).withReadableTimestamp(true).build();              driver = new ChromeDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         Pattern pattern = Pattern.compile("\\[\\d\\d-\\d\\d-\\d\\d\\d\\d", Pattern.CASE_INSENSITIVE);         Assertions.assertTrue(pattern.matcher(fileContent).find());       }            @Test       public void disableBuildChecks() throws IOException {         File logLocation = getTempFile("disableBuildChecks", ".log");         System.setProperty(             ChromeDriverService.CHROME_DRIVER_LOG_PROPERTY, logLocation.getAbsolutePath());         System.setProperty(             ChromeDriverService.CHROME_DRIVER_LOG_LEVEL_PROPERTY,             ChromiumDriverLogLevel.WARNING.toString());              ChromeDriverService service =             new ChromeDriverService.Builder().withBuildCheckDisabled(true).build();              driver = new ChromeDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         String expected =             "[WARNING]: You are using an unsupported command-line switch: --disable-build-check";         Assertions.assertTrue(fileContent.contains(expected));       }            private File getChromeLocation() {         ChromeOptions options = getDefaultChromeOptions();         options.setBrowserVersion("stable");         DriverFinder finder = new DriverFinder(ChromeDriverService.createDefaultService(), options);         return new File(finder.getBrowserPath());       }            @Test       public void setPermission() {         ChromeDriver driver = new ChromeDriver();         driver.get("https://www.selenium.dev");              driver.setPermission("camera", "denied");              // Verify the permission state is 'denied'         String script = "return navigator.permissions.query({ name: 'camera' })" +                 "    .then(permissionStatus => permissionStatus.state);";         String permissionState = (String) driver.executeScript(script);              Assertions.assertEquals("denied", permissionState);         driver.quit();       }            @Test       public void setNetworkConditions() {         driver = new ChromeDriver();              ChromiumNetworkConditions networkConditions = new ChromiumNetworkConditions();         networkConditions.setOffline(false);         networkConditions.setLatency(java.time.Duration.ofMillis(20)); // 20 ms of latency         networkConditions.setDownloadThroughput(2000 * 1024 / 8); // 2000 kbps         networkConditions.setUploadThroughput(2000 * 1024 / 8);   // 2000 kbps              ((ChromeDriver) driver).setNetworkConditions(networkConditions);              driver.get("https://www.selenium.dev");              // Assert the network conditions are set as expected         ChromiumNetworkConditions actualConditions = ((ChromeDriver) driver).getNetworkConditions();         Assertions.assertAll(             () -> Assertions.assertEquals(networkConditions.getOffline(), actualConditions.getOffline()),             () -> Assertions.assertEquals(networkConditions.getLatency(), actualConditions.getLatency()),             () -> Assertions.assertEquals(networkConditions.getDownloadThroughput(), actualConditions.getDownloadThroughput()),             () -> Assertions.assertEquals(networkConditions.getUploadThroughput(), actualConditions.getUploadThroughput())         );         ((ChromeDriver) driver).deleteNetworkConditions();         driver.quit();       }            @Test       public void castFeatures() {         ChromeDriver driver = new ChromeDriver();              List<Map<String, String>> sinks = driver.getCastSinks();         if (!sinks.isEmpty()) {           String sinkName = sinks.get(0).get("name");           driver.startTabMirroring(sinkName);           driver.stopCasting(sinkName);         }              driver.quit();       }            @Test       public void getBrowserLogs() {         ChromeDriver driver = new ChromeDriver();         driver.get("https://www.selenium.dev/selenium/web/bidi/logEntryAdded.html");         WebElement consoleLogButton = driver.findElement(By.id("consoleError"));         consoleLogButton.click();              LogEntries logs = driver.manage().logs().get(LogType.BROWSER);              // Assert that at least one log contains the expected message         boolean logFound = false;         for (LogEntry log : logs) {           if (log.getMessage().contains("I am console error")) {             logFound = true;             break;           }         }              Assertions.assertTrue(logFound, "No matching log message found.");         driver.quit();       }     }     

**Note** : Java also allows disabling build checks by System Property:   Property key: `ChromeDriverService.CHROME_DRIVER_DISABLE_BUILD_CHECK`   Property value: `"true"` or `"false"`

[Selenium v4.11](https://github.com/SeleniumHQ/selenium/releases/tag/selenium-4.11.0)                   service = webdriver.ChromeService(service_args=['--disable-build-check'], log_output=subprocess.STDOUT)

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/python/tests/browsers/test_chrome.py#L115)

##### examples/python/tests/browsers/test\_chrome.py

Copy  Close               import os     import re     import subprocess     import pytest     from selenium import webdriver     from selenium.webdriver.common.by import By          def test_basic_options():         options = get_default_chrome_options()         driver = webdriver.Chrome(options=options)              driver.quit()               def test_args():         options = get_default_chrome_options()              options.add_argument("--start-maximized")              driver = webdriver.Chrome(options=options)         driver.get('http://selenium.dev')              driver.quit()               def test_set_browser_location(chrome_bin):         options = get_default_chrome_options()              options.binary_location = chrome_bin              driver = webdriver.Chrome(options=options)              driver.quit()               def test_add_extension():         options = get_default_chrome_options()         extension_file_path = os.path.abspath("tests/extensions/webextensions-selenium-example.crx")              options.add_extension(extension_file_path)              driver = webdriver.Chrome(options=options)         driver.get("https://www.selenium.dev/selenium/web/blank.html")              driver.quit()               def test_keep_browser_open():         options = get_default_chrome_options()              options.add_experimental_option("detach", True)              driver = webdriver.Chrome(options=options)         driver.get('http://selenium.dev')              driver.quit()               def test_exclude_switches():         options = get_default_chrome_options()              options.add_experimental_option('excludeSwitches', ['disable-popup-blocking'])              driver = webdriver.Chrome(options=options)         driver.get('http://selenium.dev')              driver.quit()               def test_log_to_file(log_path):         service = webdriver.ChromeService(log_output=log_path)              driver = webdriver.Chrome(service=service)              with open(log_path, 'r') as fp:             assert "Starting ChromeDriver" in fp.readline()              driver.quit()               def test_log_to_stdout(capfd):         service = webdriver.ChromeService(log_output=subprocess.STDOUT)              driver = webdriver.Chrome(service=service)              out, err = capfd.readouterr()         assert "Starting ChromeDriver" in out              driver.quit()               def test_log_level(capfd):         service = webdriver.ChromeService(service_args=['--log-level=DEBUG'], log_output=subprocess.STDOUT)              driver = webdriver.Chrome(service=service)              out, err = capfd.readouterr()         assert '[DEBUG]' in err              driver.quit()               def test_log_features(log_path):         service = webdriver.ChromeService(service_args=['--append-log', '--readable-timestamp'], log_output=log_path)              driver = webdriver.Chrome(service=service)              with open(log_path, 'r') as f:             assert re.match(r"\[\d\d-\d\d-\d\d\d\d", f.read())              driver.quit()               def test_build_checks(capfd):         service = webdriver.ChromeService(service_args=['--disable-build-check'], log_output=subprocess.STDOUT)              driver = webdriver.Chrome(service=service)              expected = "[WARNING]: You are using an unsupported command-line switch: --disable-build-check"         out, err = capfd.readouterr()         assert expected in err              driver.quit()               def test_set_network_conditions():         driver = webdriver.Chrome()              network_conditions = {             "offline": False,             "latency": 20,  # 20 ms of latency             "download_throughput": 2000 * 1024 / 8,  # 2000 kbps             "upload_throughput": 2000 * 1024 / 8,    # 2000 kbps         }         driver.set_network_conditions(**network_conditions)              driver.get("https://www.selenium.dev")              # check whether the network conditions are set         assert driver.get_network_conditions() == network_conditions              driver.quit()               def test_set_permissions():         driver = webdriver.Chrome()         driver.get('https://www.selenium.dev')              driver.set_permissions('camera', 'denied')              assert get_permission_state(driver, 'camera') == 'denied'         driver.quit()               def get_permission_state(driver, name):         """Helper function to query the permission state."""         script = """         const callback = arguments[arguments.length - 1];         navigator.permissions.query({name: arguments[0]}).then(permissionStatus => {             callback(permissionStatus.state);         });         """         return driver.execute_async_script(script, name)               def test_cast_features():         driver = webdriver.Chrome()              try:             sinks = driver.get_sinks()             if sinks:                 sink_name = sinks[0]['name']                 driver.start_tab_mirroring(sink_name)                 driver.stop_casting(sink_name)             else:                 pytest.skip("No available Cast sinks to test with.")         finally:             driver.quit()               def test_get_browser_logs():         driver = webdriver.Chrome()         driver.get("https://www.selenium.dev/selenium/web/bidi/logEntryAdded.html")         driver.find_element(By.ID, "consoleError").click()              logs = driver.get_log("browser")              # Assert that at least one log contains the expected message         assert any("I am console error" in log['message'] for log in logs), "No matching log message found."         driver.quit()          def get_default_chrome_options():         options = webdriver.ChromeOptions()         options.add_argument("--no-sandbox")         return options                            public void DisableBuildCheck()

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/dotnet/SeleniumDocs/Browsers/ChromeTest.cs#L155)

##### examples/dotnet/SeleniumDocs/Browsers/ChromeTest.cs

Copy  Close               using System;     using System.IO;     using System.Linq;     using System.Text.RegularExpressions;     using Microsoft.VisualStudio.TestTools.UnitTesting;     using OpenQA.Selenium;     using OpenQA.Selenium.Chrome;          namespace SeleniumDocs.Browsers     {         [TestClass]         public class ChromeTest         {             private ChromeDriver driver;             private string _logLocation;                  [TestCleanup]             public void Cleanup()             {                 if (_logLocation != null && File.Exists(_logLocation))                 {                     File.Delete(_logLocation);                 }                 driver.Quit();             }                  [TestMethod]             public void BasicOptions()             {                 var options = new ChromeOptions();                 driver = new ChromeDriver(options);             }                  [TestMethod]             public void Arguments()             {                 var options = new ChromeOptions();                      options.AddArgument("--start-maximized");                      driver = new ChromeDriver(options);             }                  [TestMethod]             public void SetBrowserLocation()             {                 string userDataDir = System.IO.Path.Combine(System.IO.Path.GetTempPath(), System.IO.Path.GetRandomFileName());                 System.IO.Directory.CreateDirectory(userDataDir);                 var options = new ChromeOptions();                 options.AddArgument($"--user-data-dir={userDataDir}");                 options.AddArgument("--no-sandbox");                 options.AddArgument("--disable-dev-shm-usage");                      options.BinaryLocation = GetChromeLocation();                      driver = new ChromeDriver(options);             }                  [TestMethod]             public void InstallExtension()             {                 var options = new ChromeOptions();                 var baseDir = AppDomain.CurrentDomain.BaseDirectory;                 var extensionFilePath = Path.Combine(baseDir, "../../../Extensions/webextensions-selenium-example.crx");                      options.AddExtension(extensionFilePath);                 options.AddArgument("--disable-features=DisableLoadExtensionCommandLineSwitch");                      driver = new ChromeDriver(options);                      driver.Url = "https://www.selenium.dev/selenium/web/blank.html";                      IWebElement injected = driver.FindElement(By.Id("webextensions-selenium-example"));                 Assert.AreEqual("Content injected by webextensions-selenium-example", injected.Text);             }                  [TestMethod]             public void ExcludeSwitch()             {                 var options = new ChromeOptions();                      options.AddExcludedArgument("disable-popup-blocking");                      driver = new ChromeDriver(options);             }                  [TestMethod]             public void LogsToFile()             {                 var service = ChromeDriverService.CreateDefaultService();                      service.LogPath = GetLogLocation();                      driver = new ChromeDriver(service);                 driver.Quit(); // Close the Service log file before reading                 var lines = File.ReadLines(GetLogLocation());                 Assert.IsNotNull(lines.FirstOrDefault(line => line.Contains("Starting ChromeDriver")));             }                  [TestMethod]             [Ignore("Not implemented")]             public void LogsToConsole()             {                 var stringWriter = new StringWriter();                 var originalOutput = Console.Out;                 Console.SetOut(stringWriter);                      var service = ChromeDriverService.CreateDefaultService();                      //service.LogToConsole = true;                      driver = new ChromeDriver(service);                      Assert.IsTrue(stringWriter.ToString().Contains("Starting ChromeDriver"));                 Console.SetOut(originalOutput);                 stringWriter.Dispose();             }                  [TestMethod]             [Ignore("Not implemented")]             public void LogsLevel()             {                 var service = ChromeDriverService.CreateDefaultService();                 service.LogPath = GetLogLocation();                      // service.LogLevel = ChromiumDriverLogLevel.Debug                      driver = new ChromeDriver(service);                      driver.Quit(); // Close the Service log file before reading                 var lines = File.ReadLines(GetLogLocation());                 Assert.IsNotNull(lines.FirstOrDefault(line => line.Contains("[DEBUG]:")));             }                  [TestMethod]             [Ignore("Not implemented")]             public void ConfigureDriverLogs()             {                 var service = ChromeDriverService.CreateDefaultService();                 service.LogPath = GetLogLocation();                 service.EnableVerboseLogging = true;                      service.EnableAppendLog = true;                 // service.readableTimeStamp = true;                      driver = new ChromeDriver(service);                      driver.Quit(); // Close the Service log file before reading                 var lines = File.ReadLines(GetLogLocation());                 var regex = new Regex(@"\[\d\d-\d\d-\d\d\d\d");                 Assert.IsNotNull(lines.FirstOrDefault(line => regex.Matches("").Count > 0));             }                  [TestMethod]             public void DisableBuildCheck()             {                 var service = ChromeDriverService.CreateDefaultService();                 service.LogPath = GetLogLocation();                 service.EnableVerboseLogging = true;                      service.DisableBuildCheck = true;                      driver = new ChromeDriver(service);                 driver.Quit(); // Close the Service log file before reading                 var expected = "[WARNING]: You are using an unsupported command-line switch: --disable-build-check";                 var lines = File.ReadLines(GetLogLocation());                 Assert.IsNotNull(lines.FirstOrDefault(line => line.Contains(expected)));             }                  private string GetLogLocation()             {                 if (_logLocation == null || !File.Exists(_logLocation))                 {                     _logLocation = Path.GetTempFileName();                 }                      return _logLocation;             }                  private static string GetChromeLocation()             {                 var options = new ChromeOptions                 {                     BrowserVersion = "stable"                 };                 return new DriverFinder(options).GetBrowserPath();             }         }     }     

[Selenium v4.8](https://github.com/SeleniumHQ/selenium/releases/tag/selenium-4.8.0)

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/ruby/spec/browsers/chrome_spec.rb#L112)

##### examples/ruby/spec/browsers/chrome\_spec.rb

Copy  Close               # frozen_string_literal: true          require 'spec_helper'          RSpec.describe 'Chrome' do       describe 'Options' do         let(:chrome_location) { driver_finder && ENV.fetch('CHROME_BIN', nil) }              it 'basic options' do           options = Selenium::WebDriver::Options.chrome           @driver = Selenium::WebDriver.for :chrome, options: options         end              it 'add arguments' do           options = Selenium::WebDriver::Options.chrome                options.args << '--start-maximized'                @driver = Selenium::WebDriver.for :chrome, options: options         end              it 'sets location of binary' do           user_data_dir = Dir.mktmpdir('chrome-profile-')           options = Selenium::WebDriver::Options.chrome           options.add_argument("--user-data-dir=#{user_data_dir}")           options.add_argument('--no-sandbox')           options.add_argument('--disable-dev-shm-usage')                options.binary = chrome_location                @driver = Selenium::WebDriver.for :chrome, options: options         end              it 'add extensions' do           extension_file_path = File.expand_path('../spec_support/extensions/webextensions-selenium-example.crx', __dir__)           options = Selenium::WebDriver::Options.chrome                options.add_extension(extension_file_path)           options.add_argument('--disable-features=DisableLoadExtensionCommandLineSwitch')                @driver = Selenium::WebDriver.for :chrome, options: options           @driver.get('https://www.selenium.dev/selenium/web/blank.html')           injected = @driver.find_element(:id, 'webextensions-selenium-example')           expect(injected.text).to eq 'Content injected by webextensions-selenium-example'         end              it 'keeps browser open' do           options = Selenium::WebDriver::Options.chrome                options.detach = true                @driver = Selenium::WebDriver.for :chrome, options: options         end              it 'excludes switches' do           options = Selenium::WebDriver::Options.chrome                options.exclude_switches << 'disable-popup-blocking'                @driver = Selenium::WebDriver.for :chrome, options: options         end       end            describe 'Service' do         let(:file_name) { File.expand_path('chromedriver.log') }              after { FileUtils.rm_f(file_name) }              it 'logs to file' do           service = Selenium::WebDriver::Service.chrome                service.log = file_name                @driver = Selenium::WebDriver.for :chrome, service: service           expect(File.readlines(file_name).first).to include('Starting ChromeDriver')         end              it 'logs to console' do           service = Selenium::WebDriver::Service.chrome                service.log = $stdout                expect {             @driver = Selenium::WebDriver.for :chrome, service: service           }.to output(/Starting ChromeDriver/).to_stdout_from_any_process         end              it 'sets log level' do           service = Selenium::WebDriver::Service.chrome           service.log = file_name                service.args << '--log-level=DEBUG'                @driver = Selenium::WebDriver.for :chrome, service: service           expect(File.readlines(file_name).grep(/\[DEBUG\]:/).any?).to eq true         end              it 'sets log features' do           args = ["--log-path=#{file_name}", '--verbose']           service = Selenium::WebDriver::Service.chrome(args: args)                service.args << '--append-log'           service.args << '--readable-timestamp'                @driver = Selenium::WebDriver.for :chrome, service: service                expect(File.readlines(file_name).grep(/\[\d\d-\d\d-\d\d\d\d/).any?).to eq true         end              it 'disables build checks' do           service = Selenium::WebDriver::Service.chrome log: file_name, args: ['--verbose']                service.args << '--disable-build-check'                @driver = Selenium::WebDriver.for :chrome, service: service           warning = /\[WARNING\]: You are using an unsupported command-line switch: --disable-build-check/           expect(File.readlines(file_name).grep(warning).any?).to eq true         end       end            describe 'Special Features' do         it 'casts' do           @driver = Selenium::WebDriver.for :chrome           sinks = @driver.cast_sinks           unless sinks.empty?             device_name = sinks.first['name']             @driver.start_cast_tab_mirroring(device_name)             expect { @driver.stop_casting(device_name) }.not_to raise_exception           end         end              it 'gets and sets network conditions' do           @driver = Selenium::WebDriver.for :chrome           @driver.network_conditions = {offline: false, latency: 100, throughput: 200}           expect(@driver.network_conditions).to eq(             'offline' => false,             'latency' => 100,             'download_throughput' => 200,             'upload_throughput' => 200           )         end              it 'gets the browser logs' do           @driver = Selenium::WebDriver.for :chrome           @driver.navigate.to 'https://www.selenium.dev/selenium/web/'           sleep 1           logs = @driver.logs.get(:browser)                expect(logs.first.message).to include 'Failed to load resource'         end              it 'sets permissions' do           @driver = Selenium::WebDriver.for :chrome           @driver.navigate.to 'https://www.selenium.dev/selenium/web/'           @driver.add_permission('camera', 'denied')           @driver.add_permissions('clipboard-read' => 'denied', 'clipboard-write' => 'prompt')           expect(permission('camera')).to eq('denied')           expect(permission('clipboard-read')).to eq('denied')           expect(permission('clipboard-write')).to eq('prompt')         end       end            def driver_finder         options = Selenium::WebDriver::Options.chrome(browser_version: 'stable')         service = Selenium::WebDriver::Service.chrome         finder = Selenium::WebDriver::DriverFinder.new(options, service)         ENV['CHROMEDRIVER_BIN'] = finder.driver_path         ENV['CHROME_BIN'] = finder.browser_path       end            def permission(name)         @driver.execute_async_script('callback = arguments[arguments.length - 1];' \                                      'callback(navigator.permissions.query({name: arguments[0]}));', name)['state']       end     end     

[Add Example](https://www.selenium.dev/documentation/about/contributing/#creating-examples)

[Add Example](https://www.selenium.dev/documentation/about/contributing/#creating-examples)

## Special Features

Some browsers have implemented additional features that are unique to them.

### Casting

You can drive Chrome Cast devices, including sharing tabs

  * Java   * Python   * CSharp   * Ruby   * JavaScript   * Kotlin

                  List<Map<String, String>> sinks = driver.getCastSinks();         if (!sinks.isEmpty()) {           String sinkName = sinks.get(0).get("name");           driver.startTabMirroring(sinkName);           driver.stopCasting(sinkName);         }

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/java/src/test/java/dev/selenium/browsers/ChromeTest.java#L230-L235)

##### examples/java/src/test/java/dev/selenium/browsers/ChromeTest.java

Copy  Close               package dev.selenium.browsers;          import dev.selenium.BaseTest;     import java.io.File;     import java.io.IOException;     import java.io.PrintStream;     import java.nio.file.Files;     import java.nio.file.Path;     import java.nio.file.Paths;     import java.util.List;     import java.util.Map;     import java.util.logging.Level;     import java.util.regex.Pattern;     import org.junit.jupiter.api.AfterEach;     import org.junit.jupiter.api.Assertions;     import org.junit.jupiter.api.Test;     import org.openqa.selenium.By;     import org.openqa.selenium.WebElement;     import org.openqa.selenium.chrome.ChromeDriver;     import org.openqa.selenium.chrome.ChromeDriverService;     import org.openqa.selenium.chrome.ChromeOptions;     import org.openqa.selenium.chromium.ChromiumDriverLogLevel;     import org.openqa.selenium.chromium.ChromiumNetworkConditions;     import org.openqa.selenium.logging.*;     import org.openqa.selenium.remote.service.DriverFinder;          public class ChromeTest extends BaseTest {       @AfterEach       public void clearProperties() {         System.clearProperty(ChromeDriverService.CHROME_DRIVER_LOG_PROPERTY);         System.clearProperty(ChromeDriverService.CHROME_DRIVER_LOG_LEVEL_PROPERTY);       }            @Test       public void basicOptions() {         ChromeOptions options = getDefaultChromeOptions();         driver = new ChromeDriver(options);       }            @Test       public void arguments() {         ChromeOptions options = getDefaultChromeOptions();              options.addArguments("--start-maximized");              driver = new ChromeDriver(options);       }            @Test       public void setBrowserLocation() {         ChromeOptions options = getDefaultChromeOptions();              options.setBinary(getChromeLocation());              driver = new ChromeDriver(options);       }            @Test       public void extensionOptions() {         ChromeOptions options = getDefaultChromeOptions();         Path path = Paths.get("src/test/resources/extensions/webextensions-selenium-example.crx");         File extensionFilePath = new File(path.toUri());              options.addExtensions(extensionFilePath);         options.addArguments("--disable-features=DisableLoadExtensionCommandLineSwitch");              driver = new ChromeDriver(options);         driver.get("https://www.selenium.dev/selenium/web/blank.html");         WebElement injected = driver.findElement(By.id("webextensions-selenium-example"));         Assertions.assertEquals(             "Content injected by webextensions-selenium-example", injected.getText());       }            @Test       public void excludeSwitches() {         ChromeOptions options = getDefaultChromeOptions();              options.setExperimentalOption("excludeSwitches", List.of("disable-popup-blocking"));              driver = new ChromeDriver(options);       }            @Test       public void loggingPreferences() {         ChromeOptions options = getDefaultChromeOptions();         LoggingPreferences logPrefs = new LoggingPreferences();         logPrefs.enable(LogType.PERFORMANCE, Level.ALL);         options.setCapability(ChromeOptions.LOGGING_PREFS, logPrefs);              driver = new ChromeDriver(options);         driver.get("https://www.selenium.dev");              LogEntries logEntries = driver.manage().logs().get(LogType.PERFORMANCE);         Assertions.assertFalse(logEntries.getAll().isEmpty());       }            @Test       public void logsToFile() throws IOException {         File logLocation = getTempFile("logsToFile", ".log");         ChromeDriverService service =             new ChromeDriverService.Builder().withLogFile(logLocation).build();              driver = new ChromeDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         Assertions.assertTrue(fileContent.contains("Starting ChromeDriver"));       }            @Test       public void logsToConsole() throws IOException {         File logLocation = getTempFile("logsToConsole", ".log");         System.setOut(new PrintStream(logLocation));              ChromeDriverService service =             new ChromeDriverService.Builder().withLogOutput(System.out).build();              driver = new ChromeDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         Assertions.assertTrue(fileContent.contains("Starting ChromeDriver"));       }            @Test       public void logsWithLevel() throws IOException {         File logLocation = getTempFile("logsWithLevel", ".log");         System.setProperty(             ChromeDriverService.CHROME_DRIVER_LOG_PROPERTY, logLocation.getAbsolutePath());              ChromeDriverService service =             new ChromeDriverService.Builder().withLogLevel(ChromiumDriverLogLevel.DEBUG).build();              driver = new ChromeDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         Assertions.assertTrue(fileContent.contains("[DEBUG]:"));       }            @Test       public void configureDriverLogs() throws IOException {         File logLocation = getTempFile("configureDriverLogs", ".log");         System.setProperty(             ChromeDriverService.CHROME_DRIVER_LOG_PROPERTY, logLocation.getAbsolutePath());         System.setProperty(             ChromeDriverService.CHROME_DRIVER_LOG_LEVEL_PROPERTY,             ChromiumDriverLogLevel.DEBUG.toString());              ChromeDriverService service =             new ChromeDriverService.Builder().withAppendLog(true).withReadableTimestamp(true).build();              driver = new ChromeDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         Pattern pattern = Pattern.compile("\\[\\d\\d-\\d\\d-\\d\\d\\d\\d", Pattern.CASE_INSENSITIVE);         Assertions.assertTrue(pattern.matcher(fileContent).find());       }            @Test       public void disableBuildChecks() throws IOException {         File logLocation = getTempFile("disableBuildChecks", ".log");         System.setProperty(             ChromeDriverService.CHROME_DRIVER_LOG_PROPERTY, logLocation.getAbsolutePath());         System.setProperty(             ChromeDriverService.CHROME_DRIVER_LOG_LEVEL_PROPERTY,             ChromiumDriverLogLevel.WARNING.toString());              ChromeDriverService service =             new ChromeDriverService.Builder().withBuildCheckDisabled(true).build();              driver = new ChromeDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         String expected =             "[WARNING]: You are using an unsupported command-line switch: --disable-build-check";         Assertions.assertTrue(fileContent.contains(expected));       }            private File getChromeLocation() {         ChromeOptions options = getDefaultChromeOptions();         options.setBrowserVersion("stable");         DriverFinder finder = new DriverFinder(ChromeDriverService.createDefaultService(), options);         return new File(finder.getBrowserPath());       }            @Test       public void setPermission() {         ChromeDriver driver = new ChromeDriver();         driver.get("https://www.selenium.dev");              driver.setPermission("camera", "denied");              // Verify the permission state is 'denied'         String script = "return navigator.permissions.query({ name: 'camera' })" +                 "    .then(permissionStatus => permissionStatus.state);";         String permissionState = (String) driver.executeScript(script);              Assertions.assertEquals("denied", permissionState);         driver.quit();       }            @Test       public void setNetworkConditions() {         driver = new ChromeDriver();              ChromiumNetworkConditions networkConditions = new ChromiumNetworkConditions();         networkConditions.setOffline(false);         networkConditions.setLatency(java.time.Duration.ofMillis(20)); // 20 ms of latency         networkConditions.setDownloadThroughput(2000 * 1024 / 8); // 2000 kbps         networkConditions.setUploadThroughput(2000 * 1024 / 8);   // 2000 kbps              ((ChromeDriver) driver).setNetworkConditions(networkConditions);              driver.get("https://www.selenium.dev");              // Assert the network conditions are set as expected         ChromiumNetworkConditions actualConditions = ((ChromeDriver) driver).getNetworkConditions();         Assertions.assertAll(             () -> Assertions.assertEquals(networkConditions.getOffline(), actualConditions.getOffline()),             () -> Assertions.assertEquals(networkConditions.getLatency(), actualConditions.getLatency()),             () -> Assertions.assertEquals(networkConditions.getDownloadThroughput(), actualConditions.getDownloadThroughput()),             () -> Assertions.assertEquals(networkConditions.getUploadThroughput(), actualConditions.getUploadThroughput())         );         ((ChromeDriver) driver).deleteNetworkConditions();         driver.quit();       }            @Test       public void castFeatures() {         ChromeDriver driver = new ChromeDriver();              List<Map<String, String>> sinks = driver.getCastSinks();         if (!sinks.isEmpty()) {           String sinkName = sinks.get(0).get("name");           driver.startTabMirroring(sinkName);           driver.stopCasting(sinkName);         }              driver.quit();       }            @Test       public void getBrowserLogs() {         ChromeDriver driver = new ChromeDriver();         driver.get("https://www.selenium.dev/selenium/web/bidi/logEntryAdded.html");         WebElement consoleLogButton = driver.findElement(By.id("consoleError"));         consoleLogButton.click();              LogEntries logs = driver.manage().logs().get(LogType.BROWSER);              // Assert that at least one log contains the expected message         boolean logFound = false;         for (LogEntry log : logs) {           if (log.getMessage().contains("I am console error")) {             logFound = true;             break;           }         }              Assertions.assertTrue(logFound, "No matching log message found.");         driver.quit();       }     }                            sinks = driver.get_sinks()             if sinks:                 sink_name = sinks[0]['name']                 driver.start_tab_mirroring(sink_name)                 driver.stop_casting(sink_name)

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk//examples/python/tests/browsers/test_chrome.py#L170-L174)

##### /examples/python/tests/browsers/test\_chrome.py

Copy  Close               import os     import re     import subprocess     import pytest     from selenium import webdriver     from selenium.webdriver.common.by import By          def test_basic_options():         options = get_default_chrome_options()         driver = webdriver.Chrome(options=options)              driver.quit()               def test_args():         options = get_default_chrome_options()              options.add_argument("--start-maximized")              driver = webdriver.Chrome(options=options)         driver.get('http://selenium.dev')              driver.quit()               def test_set_browser_location(chrome_bin):         options = get_default_chrome_options()              options.binary_location = chrome_bin              driver = webdriver.Chrome(options=options)              driver.quit()               def test_add_extension():         options = get_default_chrome_options()         extension_file_path = os.path.abspath("tests/extensions/webextensions-selenium-example.crx")              options.add_extension(extension_file_path)              driver = webdriver.Chrome(options=options)         driver.get("https://www.selenium.dev/selenium/web/blank.html")              driver.quit()               def test_keep_browser_open():         options = get_default_chrome_options()              options.add_experimental_option("detach", True)              driver = webdriver.Chrome(options=options)         driver.get('http://selenium.dev')              driver.quit()               def test_exclude_switches():         options = get_default_chrome_options()              options.add_experimental_option('excludeSwitches', ['disable-popup-blocking'])              driver = webdriver.Chrome(options=options)         driver.get('http://selenium.dev')              driver.quit()               def test_log_to_file(log_path):         service = webdriver.ChromeService(log_output=log_path)              driver = webdriver.Chrome(service=service)              with open(log_path, 'r') as fp:             assert "Starting ChromeDriver" in fp.readline()              driver.quit()               def test_log_to_stdout(capfd):         service = webdriver.ChromeService(log_output=subprocess.STDOUT)              driver = webdriver.Chrome(service=service)              out, err = capfd.readouterr()         assert "Starting ChromeDriver" in out              driver.quit()               def test_log_level(capfd):         service = webdriver.ChromeService(service_args=['--log-level=DEBUG'], log_output=subprocess.STDOUT)              driver = webdriver.Chrome(service=service)              out, err = capfd.readouterr()         assert '[DEBUG]' in err              driver.quit()               def test_log_features(log_path):         service = webdriver.ChromeService(service_args=['--append-log', '--readable-timestamp'], log_output=log_path)              driver = webdriver.Chrome(service=service)              with open(log_path, 'r') as f:             assert re.match(r"\[\d\d-\d\d-\d\d\d\d", f.read())              driver.quit()               def test_build_checks(capfd):         service = webdriver.ChromeService(service_args=['--disable-build-check'], log_output=subprocess.STDOUT)              driver = webdriver.Chrome(service=service)              expected = "[WARNING]: You are using an unsupported command-line switch: --disable-build-check"         out, err = capfd.readouterr()         assert expected in err              driver.quit()               def test_set_network_conditions():         driver = webdriver.Chrome()              network_conditions = {             "offline": False,             "latency": 20,  # 20 ms of latency             "download_throughput": 2000 * 1024 / 8,  # 2000 kbps             "upload_throughput": 2000 * 1024 / 8,    # 2000 kbps         }         driver.set_network_conditions(**network_conditions)              driver.get("https://www.selenium.dev")              # check whether the network conditions are set         assert driver.get_network_conditions() == network_conditions              driver.quit()               def test_set_permissions():         driver = webdriver.Chrome()         driver.get('https://www.selenium.dev')              driver.set_permissions('camera', 'denied')              assert get_permission_state(driver, 'camera') == 'denied'         driver.quit()               def get_permission_state(driver, name):         """Helper function to query the permission state."""         script = """         const callback = arguments[arguments.length - 1];         navigator.permissions.query({name: arguments[0]}).then(permissionStatus => {             callback(permissionStatus.state);         });         """         return driver.execute_async_script(script, name)               def test_cast_features():         driver = webdriver.Chrome()              try:             sinks = driver.get_sinks()             if sinks:                 sink_name = sinks[0]['name']                 driver.start_tab_mirroring(sink_name)                 driver.stop_casting(sink_name)             else:                 pytest.skip("No available Cast sinks to test with.")         finally:             driver.quit()               def test_get_browser_logs():         driver = webdriver.Chrome()         driver.get("https://www.selenium.dev/selenium/web/bidi/logEntryAdded.html")         driver.find_element(By.ID, "consoleError").click()              logs = driver.get_log("browser")              # Assert that at least one log contains the expected message         assert any("I am console error" in log['message'] for log in logs), "No matching log message found."         driver.quit()          def get_default_chrome_options():         options = webdriver.ChromeOptions()         options.add_argument("--no-sandbox")         return options     

[Add Example](https://www.selenium.dev/documentation/about/contributing/#creating-examples)                     @driver = Selenium::WebDriver.for :chrome           sinks = @driver.cast_sinks           unless sinks.empty?             device_name = sinks.first['name']             @driver.start_cast_tab_mirroring(device_name)             expect { @driver.stop_casting(device_name) }.not_to raise_exception

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk//examples/ruby/spec/browsers/chrome_spec.rb#L123-L128)

##### /examples/ruby/spec/browsers/chrome\_spec.rb

Copy  Close               # frozen_string_literal: true          require 'spec_helper'          RSpec.describe 'Chrome' do       describe 'Options' do         let(:chrome_location) { driver_finder && ENV.fetch('CHROME_BIN', nil) }              it 'basic options' do           options = Selenium::WebDriver::Options.chrome           @driver = Selenium::WebDriver.for :chrome, options: options         end              it 'add arguments' do           options = Selenium::WebDriver::Options.chrome                options.args << '--start-maximized'                @driver = Selenium::WebDriver.for :chrome, options: options         end              it 'sets location of binary' do           user_data_dir = Dir.mktmpdir('chrome-profile-')           options = Selenium::WebDriver::Options.chrome           options.add_argument("--user-data-dir=#{user_data_dir}")           options.add_argument('--no-sandbox')           options.add_argument('--disable-dev-shm-usage')                options.binary = chrome_location                @driver = Selenium::WebDriver.for :chrome, options: options         end              it 'add extensions' do           extension_file_path = File.expand_path('../spec_support/extensions/webextensions-selenium-example.crx', __dir__)           options = Selenium::WebDriver::Options.chrome                options.add_extension(extension_file_path)           options.add_argument('--disable-features=DisableLoadExtensionCommandLineSwitch')                @driver = Selenium::WebDriver.for :chrome, options: options           @driver.get('https://www.selenium.dev/selenium/web/blank.html')           injected = @driver.find_element(:id, 'webextensions-selenium-example')           expect(injected.text).to eq 'Content injected by webextensions-selenium-example'         end              it 'keeps browser open' do           options = Selenium::WebDriver::Options.chrome                options.detach = true                @driver = Selenium::WebDriver.for :chrome, options: options         end              it 'excludes switches' do           options = Selenium::WebDriver::Options.chrome                options.exclude_switches << 'disable-popup-blocking'                @driver = Selenium::WebDriver.for :chrome, options: options         end       end            describe 'Service' do         let(:file_name) { File.expand_path('chromedriver.log') }              after { FileUtils.rm_f(file_name) }              it 'logs to file' do           service = Selenium::WebDriver::Service.chrome                service.log = file_name                @driver = Selenium::WebDriver.for :chrome, service: service           expect(File.readlines(file_name).first).to include('Starting ChromeDriver')         end              it 'logs to console' do           service = Selenium::WebDriver::Service.chrome                service.log = $stdout                expect {             @driver = Selenium::WebDriver.for :chrome, service: service           }.to output(/Starting ChromeDriver/).to_stdout_from_any_process         end              it 'sets log level' do           service = Selenium::WebDriver::Service.chrome           service.log = file_name                service.args << '--log-level=DEBUG'                @driver = Selenium::WebDriver.for :chrome, service: service           expect(File.readlines(file_name).grep(/\[DEBUG\]:/).any?).to eq true         end              it 'sets log features' do           args = ["--log-path=#{file_name}", '--verbose']           service = Selenium::WebDriver::Service.chrome(args: args)                service.args << '--append-log'           service.args << '--readable-timestamp'                @driver = Selenium::WebDriver.for :chrome, service: service                expect(File.readlines(file_name).grep(/\[\d\d-\d\d-\d\d\d\d/).any?).to eq true         end              it 'disables build checks' do           service = Selenium::WebDriver::Service.chrome log: file_name, args: ['--verbose']                service.args << '--disable-build-check'                @driver = Selenium::WebDriver.for :chrome, service: service           warning = /\[WARNING\]: You are using an unsupported command-line switch: --disable-build-check/           expect(File.readlines(file_name).grep(warning).any?).to eq true         end       end            describe 'Special Features' do         it 'casts' do           @driver = Selenium::WebDriver.for :chrome           sinks = @driver.cast_sinks           unless sinks.empty?             device_name = sinks.first['name']             @driver.start_cast_tab_mirroring(device_name)             expect { @driver.stop_casting(device_name) }.not_to raise_exception           end         end              it 'gets and sets network conditions' do           @driver = Selenium::WebDriver.for :chrome           @driver.network_conditions = {offline: false, latency: 100, throughput: 200}           expect(@driver.network_conditions).to eq(             'offline' => false,             'latency' => 100,             'download_throughput' => 200,             'upload_throughput' => 200           )         end              it 'gets the browser logs' do           @driver = Selenium::WebDriver.for :chrome           @driver.navigate.to 'https://www.selenium.dev/selenium/web/'           sleep 1           logs = @driver.logs.get(:browser)                expect(logs.first.message).to include 'Failed to load resource'         end              it 'sets permissions' do           @driver = Selenium::WebDriver.for :chrome           @driver.navigate.to 'https://www.selenium.dev/selenium/web/'           @driver.add_permission('camera', 'denied')           @driver.add_permissions('clipboard-read' => 'denied', 'clipboard-write' => 'prompt')           expect(permission('camera')).to eq('denied')           expect(permission('clipboard-read')).to eq('denied')           expect(permission('clipboard-write')).to eq('prompt')         end       end            def driver_finder         options = Selenium::WebDriver::Options.chrome(browser_version: 'stable')         service = Selenium::WebDriver::Service.chrome         finder = Selenium::WebDriver::DriverFinder.new(options, service)         ENV['CHROMEDRIVER_BIN'] = finder.driver_path         ENV['CHROME_BIN'] = finder.browser_path       end            def permission(name)         @driver.execute_async_script('callback = arguments[arguments.length - 1];' \                                      'callback(navigator.permissions.query({name: arguments[0]}));', name)['state']       end     end     

[Add Example](https://www.selenium.dev/documentation/about/contributing/#creating-examples)

[Add Example](https://www.selenium.dev/documentation/about/contributing/#creating-examples)

### Network conditions

You can simulate various network conditions.

  * Java   * Python   * CSharp   * Ruby   * JavaScript   * Kotlin

                  ChromiumNetworkConditions networkConditions = new ChromiumNetworkConditions();         networkConditions.setOffline(false);         networkConditions.setLatency(java.time.Duration.ofMillis(20)); // 20 ms of latency         networkConditions.setDownloadThroughput(2000 * 1024 / 8); // 2000 kbps         networkConditions.setUploadThroughput(2000 * 1024 / 8);   // 2000 kbps              ((ChromeDriver) driver).setNetworkConditions(networkConditions);

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/java/src/test/java/dev/selenium/browsers/ChromeTest.java#L204-L210)

##### examples/java/src/test/java/dev/selenium/browsers/ChromeTest.java

Copy  Close               package dev.selenium.browsers;          import dev.selenium.BaseTest;     import java.io.File;     import java.io.IOException;     import java.io.PrintStream;     import java.nio.file.Files;     import java.nio.file.Path;     import java.nio.file.Paths;     import java.util.List;     import java.util.Map;     import java.util.logging.Level;     import java.util.regex.Pattern;     import org.junit.jupiter.api.AfterEach;     import org.junit.jupiter.api.Assertions;     import org.junit.jupiter.api.Test;     import org.openqa.selenium.By;     import org.openqa.selenium.WebElement;     import org.openqa.selenium.chrome.ChromeDriver;     import org.openqa.selenium.chrome.ChromeDriverService;     import org.openqa.selenium.chrome.ChromeOptions;     import org.openqa.selenium.chromium.ChromiumDriverLogLevel;     import org.openqa.selenium.chromium.ChromiumNetworkConditions;     import org.openqa.selenium.logging.*;     import org.openqa.selenium.remote.service.DriverFinder;          public class ChromeTest extends BaseTest {       @AfterEach       public void clearProperties() {         System.clearProperty(ChromeDriverService.CHROME_DRIVER_LOG_PROPERTY);         System.clearProperty(ChromeDriverService.CHROME_DRIVER_LOG_LEVEL_PROPERTY);       }            @Test       public void basicOptions() {         ChromeOptions options = getDefaultChromeOptions();         driver = new ChromeDriver(options);       }            @Test       public void arguments() {         ChromeOptions options = getDefaultChromeOptions();              options.addArguments("--start-maximized");              driver = new ChromeDriver(options);       }            @Test       public void setBrowserLocation() {         ChromeOptions options = getDefaultChromeOptions();              options.setBinary(getChromeLocation());              driver = new ChromeDriver(options);       }            @Test       public void extensionOptions() {         ChromeOptions options = getDefaultChromeOptions();         Path path = Paths.get("src/test/resources/extensions/webextensions-selenium-example.crx");         File extensionFilePath = new File(path.toUri());              options.addExtensions(extensionFilePath);         options.addArguments("--disable-features=DisableLoadExtensionCommandLineSwitch");              driver = new ChromeDriver(options);         driver.get("https://www.selenium.dev/selenium/web/blank.html");         WebElement injected = driver.findElement(By.id("webextensions-selenium-example"));         Assertions.assertEquals(             "Content injected by webextensions-selenium-example", injected.getText());       }            @Test       public void excludeSwitches() {         ChromeOptions options = getDefaultChromeOptions();              options.setExperimentalOption("excludeSwitches", List.of("disable-popup-blocking"));              driver = new ChromeDriver(options);       }            @Test       public void loggingPreferences() {         ChromeOptions options = getDefaultChromeOptions();         LoggingPreferences logPrefs = new LoggingPreferences();         logPrefs.enable(LogType.PERFORMANCE, Level.ALL);         options.setCapability(ChromeOptions.LOGGING_PREFS, logPrefs);              driver = new ChromeDriver(options);         driver.get("https://www.selenium.dev");              LogEntries logEntries = driver.manage().logs().get(LogType.PERFORMANCE);         Assertions.assertFalse(logEntries.getAll().isEmpty());       }            @Test       public void logsToFile() throws IOException {         File logLocation = getTempFile("logsToFile", ".log");         ChromeDriverService service =             new ChromeDriverService.Builder().withLogFile(logLocation).build();              driver = new ChromeDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         Assertions.assertTrue(fileContent.contains("Starting ChromeDriver"));       }            @Test       public void logsToConsole() throws IOException {         File logLocation = getTempFile("logsToConsole", ".log");         System.setOut(new PrintStream(logLocation));              ChromeDriverService service =             new ChromeDriverService.Builder().withLogOutput(System.out).build();              driver = new ChromeDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         Assertions.assertTrue(fileContent.contains("Starting ChromeDriver"));       }            @Test       public void logsWithLevel() throws IOException {         File logLocation = getTempFile("logsWithLevel", ".log");         System.setProperty(             ChromeDriverService.CHROME_DRIVER_LOG_PROPERTY, logLocation.getAbsolutePath());              ChromeDriverService service =             new ChromeDriverService.Builder().withLogLevel(ChromiumDriverLogLevel.DEBUG).build();              driver = new ChromeDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         Assertions.assertTrue(fileContent.contains("[DEBUG]:"));       }            @Test       public void configureDriverLogs() throws IOException {         File logLocation = getTempFile("configureDriverLogs", ".log");         System.setProperty(             ChromeDriverService.CHROME_DRIVER_LOG_PROPERTY, logLocation.getAbsolutePath());         System.setProperty(             ChromeDriverService.CHROME_DRIVER_LOG_LEVEL_PROPERTY,             ChromiumDriverLogLevel.DEBUG.toString());              ChromeDriverService service =             new ChromeDriverService.Builder().withAppendLog(true).withReadableTimestamp(true).build();              driver = new ChromeDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         Pattern pattern = Pattern.compile("\\[\\d\\d-\\d\\d-\\d\\d\\d\\d", Pattern.CASE_INSENSITIVE);         Assertions.assertTrue(pattern.matcher(fileContent).find());       }            @Test       public void disableBuildChecks() throws IOException {         File logLocation = getTempFile("disableBuildChecks", ".log");         System.setProperty(             ChromeDriverService.CHROME_DRIVER_LOG_PROPERTY, logLocation.getAbsolutePath());         System.setProperty(             ChromeDriverService.CHROME_DRIVER_LOG_LEVEL_PROPERTY,             ChromiumDriverLogLevel.WARNING.toString());              ChromeDriverService service =             new ChromeDriverService.Builder().withBuildCheckDisabled(true).build();              driver = new ChromeDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         String expected =             "[WARNING]: You are using an unsupported command-line switch: --disable-build-check";         Assertions.assertTrue(fileContent.contains(expected));       }            private File getChromeLocation() {         ChromeOptions options = getDefaultChromeOptions();         options.setBrowserVersion("stable");         DriverFinder finder = new DriverFinder(ChromeDriverService.createDefaultService(), options);         return new File(finder.getBrowserPath());       }            @Test       public void setPermission() {         ChromeDriver driver = new ChromeDriver();         driver.get("https://www.selenium.dev");              driver.setPermission("camera", "denied");              // Verify the permission state is 'denied'         String script = "return navigator.permissions.query({ name: 'camera' })" +                 "    .then(permissionStatus => permissionStatus.state);";         String permissionState = (String) driver.executeScript(script);              Assertions.assertEquals("denied", permissionState);         driver.quit();       }            @Test       public void setNetworkConditions() {         driver = new ChromeDriver();              ChromiumNetworkConditions networkConditions = new ChromiumNetworkConditions();         networkConditions.setOffline(false);         networkConditions.setLatency(java.time.Duration.ofMillis(20)); // 20 ms of latency         networkConditions.setDownloadThroughput(2000 * 1024 / 8); // 2000 kbps         networkConditions.setUploadThroughput(2000 * 1024 / 8);   // 2000 kbps              ((ChromeDriver) driver).setNetworkConditions(networkConditions);              driver.get("https://www.selenium.dev");              // Assert the network conditions are set as expected         ChromiumNetworkConditions actualConditions = ((ChromeDriver) driver).getNetworkConditions();         Assertions.assertAll(             () -> Assertions.assertEquals(networkConditions.getOffline(), actualConditions.getOffline()),             () -> Assertions.assertEquals(networkConditions.getLatency(), actualConditions.getLatency()),             () -> Assertions.assertEquals(networkConditions.getDownloadThroughput(), actualConditions.getDownloadThroughput()),             () -> Assertions.assertEquals(networkConditions.getUploadThroughput(), actualConditions.getUploadThroughput())         );         ((ChromeDriver) driver).deleteNetworkConditions();         driver.quit();       }            @Test       public void castFeatures() {         ChromeDriver driver = new ChromeDriver();              List<Map<String, String>> sinks = driver.getCastSinks();         if (!sinks.isEmpty()) {           String sinkName = sinks.get(0).get("name");           driver.startTabMirroring(sinkName);           driver.stopCasting(sinkName);         }              driver.quit();       }            @Test       public void getBrowserLogs() {         ChromeDriver driver = new ChromeDriver();         driver.get("https://www.selenium.dev/selenium/web/bidi/logEntryAdded.html");         WebElement consoleLogButton = driver.findElement(By.id("consoleError"));         consoleLogButton.click();              LogEntries logs = driver.manage().logs().get(LogType.BROWSER);              // Assert that at least one log contains the expected message         boolean logFound = false;         for (LogEntry log : logs) {           if (log.getMessage().contains("I am console error")) {             logFound = true;             break;           }         }              Assertions.assertTrue(logFound, "No matching log message found.");         driver.quit();       }     }                        network_conditions = {             "offline": False,             "latency": 20,  # 20 ms of latency             "download_throughput": 2000 * 1024 / 8,  # 2000 kbps             "upload_throughput": 2000 * 1024 / 8,    # 2000 kbps         }         driver.set_network_conditions(**network_conditions)

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk//examples/python/tests/browsers/test_chrome.py#L129-L135)

##### /examples/python/tests/browsers/test\_chrome.py

Copy  Close               import os     import re     import subprocess     import pytest     from selenium import webdriver     from selenium.webdriver.common.by import By          def test_basic_options():         options = get_default_chrome_options()         driver = webdriver.Chrome(options=options)              driver.quit()               def test_args():         options = get_default_chrome_options()              options.add_argument("--start-maximized")              driver = webdriver.Chrome(options=options)         driver.get('http://selenium.dev')              driver.quit()               def test_set_browser_location(chrome_bin):         options = get_default_chrome_options()              options.binary_location = chrome_bin              driver = webdriver.Chrome(options=options)              driver.quit()               def test_add_extension():         options = get_default_chrome_options()         extension_file_path = os.path.abspath("tests/extensions/webextensions-selenium-example.crx")              options.add_extension(extension_file_path)              driver = webdriver.Chrome(options=options)         driver.get("https://www.selenium.dev/selenium/web/blank.html")              driver.quit()               def test_keep_browser_open():         options = get_default_chrome_options()              options.add_experimental_option("detach", True)              driver = webdriver.Chrome(options=options)         driver.get('http://selenium.dev')              driver.quit()               def test_exclude_switches():         options = get_default_chrome_options()              options.add_experimental_option('excludeSwitches', ['disable-popup-blocking'])              driver = webdriver.Chrome(options=options)         driver.get('http://selenium.dev')              driver.quit()               def test_log_to_file(log_path):         service = webdriver.ChromeService(log_output=log_path)              driver = webdriver.Chrome(service=service)              with open(log_path, 'r') as fp:             assert "Starting ChromeDriver" in fp.readline()              driver.quit()               def test_log_to_stdout(capfd):         service = webdriver.ChromeService(log_output=subprocess.STDOUT)              driver = webdriver.Chrome(service=service)              out, err = capfd.readouterr()         assert "Starting ChromeDriver" in out              driver.quit()               def test_log_level(capfd):         service = webdriver.ChromeService(service_args=['--log-level=DEBUG'], log_output=subprocess.STDOUT)              driver = webdriver.Chrome(service=service)              out, err = capfd.readouterr()         assert '[DEBUG]' in err              driver.quit()               def test_log_features(log_path):         service = webdriver.ChromeService(service_args=['--append-log', '--readable-timestamp'], log_output=log_path)              driver = webdriver.Chrome(service=service)              with open(log_path, 'r') as f:             assert re.match(r"\[\d\d-\d\d-\d\d\d\d", f.read())              driver.quit()               def test_build_checks(capfd):         service = webdriver.ChromeService(service_args=['--disable-build-check'], log_output=subprocess.STDOUT)              driver = webdriver.Chrome(service=service)              expected = "[WARNING]: You are using an unsupported command-line switch: --disable-build-check"         out, err = capfd.readouterr()         assert expected in err              driver.quit()               def test_set_network_conditions():         driver = webdriver.Chrome()              network_conditions = {             "offline": False,             "latency": 20,  # 20 ms of latency             "download_throughput": 2000 * 1024 / 8,  # 2000 kbps             "upload_throughput": 2000 * 1024 / 8,    # 2000 kbps         }         driver.set_network_conditions(**network_conditions)              driver.get("https://www.selenium.dev")              # check whether the network conditions are set         assert driver.get_network_conditions() == network_conditions              driver.quit()               def test_set_permissions():         driver = webdriver.Chrome()         driver.get('https://www.selenium.dev')              driver.set_permissions('camera', 'denied')              assert get_permission_state(driver, 'camera') == 'denied'         driver.quit()               def get_permission_state(driver, name):         """Helper function to query the permission state."""         script = """         const callback = arguments[arguments.length - 1];         navigator.permissions.query({name: arguments[0]}).then(permissionStatus => {             callback(permissionStatus.state);         });         """         return driver.execute_async_script(script, name)               def test_cast_features():         driver = webdriver.Chrome()              try:             sinks = driver.get_sinks()             if sinks:                 sink_name = sinks[0]['name']                 driver.start_tab_mirroring(sink_name)                 driver.stop_casting(sink_name)             else:                 pytest.skip("No available Cast sinks to test with.")         finally:             driver.quit()               def test_get_browser_logs():         driver = webdriver.Chrome()         driver.get("https://www.selenium.dev/selenium/web/bidi/logEntryAdded.html")         driver.find_element(By.ID, "consoleError").click()              logs = driver.get_log("browser")              # Assert that at least one log contains the expected message         assert any("I am console error" in log['message'] for log in logs), "No matching log message found."         driver.quit()          def get_default_chrome_options():         options = webdriver.ChromeOptions()         options.add_argument("--no-sandbox")         return options     

[Add Example](https://www.selenium.dev/documentation/about/contributing/#creating-examples)                     @driver = Selenium::WebDriver.for :chrome

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk//examples/ruby/spec/browsers/chrome_spec.rb#L133)

##### /examples/ruby/spec/browsers/chrome\_spec.rb

Copy  Close               # frozen_string_literal: true          require 'spec_helper'          RSpec.describe 'Chrome' do       describe 'Options' do         let(:chrome_location) { driver_finder && ENV.fetch('CHROME_BIN', nil) }              it 'basic options' do           options = Selenium::WebDriver::Options.chrome           @driver = Selenium::WebDriver.for :chrome, options: options         end              it 'add arguments' do           options = Selenium::WebDriver::Options.chrome                options.args << '--start-maximized'                @driver = Selenium::WebDriver.for :chrome, options: options         end              it 'sets location of binary' do           user_data_dir = Dir.mktmpdir('chrome-profile-')           options = Selenium::WebDriver::Options.chrome           options.add_argument("--user-data-dir=#{user_data_dir}")           options.add_argument('--no-sandbox')           options.add_argument('--disable-dev-shm-usage')                options.binary = chrome_location                @driver = Selenium::WebDriver.for :chrome, options: options         end              it 'add extensions' do           extension_file_path = File.expand_path('../spec_support/extensions/webextensions-selenium-example.crx', __dir__)           options = Selenium::WebDriver::Options.chrome                options.add_extension(extension_file_path)           options.add_argument('--disable-features=DisableLoadExtensionCommandLineSwitch')                @driver = Selenium::WebDriver.for :chrome, options: options           @driver.get('https://www.selenium.dev/selenium/web/blank.html')           injected = @driver.find_element(:id, 'webextensions-selenium-example')           expect(injected.text).to eq 'Content injected by webextensions-selenium-example'         end              it 'keeps browser open' do           options = Selenium::WebDriver::Options.chrome                options.detach = true                @driver = Selenium::WebDriver.for :chrome, options: options         end              it 'excludes switches' do           options = Selenium::WebDriver::Options.chrome                options.exclude_switches << 'disable-popup-blocking'                @driver = Selenium::WebDriver.for :chrome, options: options         end       end            describe 'Service' do         let(:file_name) { File.expand_path('chromedriver.log') }              after { FileUtils.rm_f(file_name) }              it 'logs to file' do           service = Selenium::WebDriver::Service.chrome                service.log = file_name                @driver = Selenium::WebDriver.for :chrome, service: service           expect(File.readlines(file_name).first).to include('Starting ChromeDriver')         end              it 'logs to console' do           service = Selenium::WebDriver::Service.chrome                service.log = $stdout                expect {             @driver = Selenium::WebDriver.for :chrome, service: service           }.to output(/Starting ChromeDriver/).to_stdout_from_any_process         end              it 'sets log level' do           service = Selenium::WebDriver::Service.chrome           service.log = file_name                service.args << '--log-level=DEBUG'                @driver = Selenium::WebDriver.for :chrome, service: service           expect(File.readlines(file_name).grep(/\[DEBUG\]:/).any?).to eq true         end              it 'sets log features' do           args = ["--log-path=#{file_name}", '--verbose']           service = Selenium::WebDriver::Service.chrome(args: args)                service.args << '--append-log'           service.args << '--readable-timestamp'                @driver = Selenium::WebDriver.for :chrome, service: service                expect(File.readlines(file_name).grep(/\[\d\d-\d\d-\d\d\d\d/).any?).to eq true         end              it 'disables build checks' do           service = Selenium::WebDriver::Service.chrome log: file_name, args: ['--verbose']                service.args << '--disable-build-check'                @driver = Selenium::WebDriver.for :chrome, service: service           warning = /\[WARNING\]: You are using an unsupported command-line switch: --disable-build-check/           expect(File.readlines(file_name).grep(warning).any?).to eq true         end       end            describe 'Special Features' do         it 'casts' do           @driver = Selenium::WebDriver.for :chrome           sinks = @driver.cast_sinks           unless sinks.empty?             device_name = sinks.first['name']             @driver.start_cast_tab_mirroring(device_name)             expect { @driver.stop_casting(device_name) }.not_to raise_exception           end         end              it 'gets and sets network conditions' do           @driver = Selenium::WebDriver.for :chrome           @driver.network_conditions = {offline: false, latency: 100, throughput: 200}           expect(@driver.network_conditions).to eq(             'offline' => false,             'latency' => 100,             'download_throughput' => 200,             'upload_throughput' => 200           )         end              it 'gets the browser logs' do           @driver = Selenium::WebDriver.for :chrome           @driver.navigate.to 'https://www.selenium.dev/selenium/web/'           sleep 1           logs = @driver.logs.get(:browser)                expect(logs.first.message).to include 'Failed to load resource'         end              it 'sets permissions' do           @driver = Selenium::WebDriver.for :chrome           @driver.navigate.to 'https://www.selenium.dev/selenium/web/'           @driver.add_permission('camera', 'denied')           @driver.add_permissions('clipboard-read' => 'denied', 'clipboard-write' => 'prompt')           expect(permission('camera')).to eq('denied')           expect(permission('clipboard-read')).to eq('denied')           expect(permission('clipboard-write')).to eq('prompt')         end       end            def driver_finder         options = Selenium::WebDriver::Options.chrome(browser_version: 'stable')         service = Selenium::WebDriver::Service.chrome         finder = Selenium::WebDriver::DriverFinder.new(options, service)         ENV['CHROMEDRIVER_BIN'] = finder.driver_path         ENV['CHROME_BIN'] = finder.browser_path       end            def permission(name)         @driver.execute_async_script('callback = arguments[arguments.length - 1];' \                                      'callback(navigator.permissions.query({name: arguments[0]}));', name)['state']       end     end     

[Add Example](https://www.selenium.dev/documentation/about/contributing/#creating-examples)

[Add Example](https://www.selenium.dev/documentation/about/contributing/#creating-examples)

### Logs

  * Java   * Python   * CSharp   * Ruby   * JavaScript   * Kotlin

                  LogEntries logs = driver.manage().logs().get(LogType.BROWSER);

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/java/src/test/java/dev/selenium/browsers/ChromeTest.java#L247)

##### examples/java/src/test/java/dev/selenium/browsers/ChromeTest.java

Copy  Close               package dev.selenium.browsers;          import dev.selenium.BaseTest;     import java.io.File;     import java.io.IOException;     import java.io.PrintStream;     import java.nio.file.Files;     import java.nio.file.Path;     import java.nio.file.Paths;     import java.util.List;     import java.util.Map;     import java.util.logging.Level;     import java.util.regex.Pattern;     import org.junit.jupiter.api.AfterEach;     import org.junit.jupiter.api.Assertions;     import org.junit.jupiter.api.Test;     import org.openqa.selenium.By;     import org.openqa.selenium.WebElement;     import org.openqa.selenium.chrome.ChromeDriver;     import org.openqa.selenium.chrome.ChromeDriverService;     import org.openqa.selenium.chrome.ChromeOptions;     import org.openqa.selenium.chromium.ChromiumDriverLogLevel;     import org.openqa.selenium.chromium.ChromiumNetworkConditions;     import org.openqa.selenium.logging.*;     import org.openqa.selenium.remote.service.DriverFinder;          public class ChromeTest extends BaseTest {       @AfterEach       public void clearProperties() {         System.clearProperty(ChromeDriverService.CHROME_DRIVER_LOG_PROPERTY);         System.clearProperty(ChromeDriverService.CHROME_DRIVER_LOG_LEVEL_PROPERTY);       }            @Test       public void basicOptions() {         ChromeOptions options = getDefaultChromeOptions();         driver = new ChromeDriver(options);       }            @Test       public void arguments() {         ChromeOptions options = getDefaultChromeOptions();              options.addArguments("--start-maximized");              driver = new ChromeDriver(options);       }            @Test       public void setBrowserLocation() {         ChromeOptions options = getDefaultChromeOptions();              options.setBinary(getChromeLocation());              driver = new ChromeDriver(options);       }            @Test       public void extensionOptions() {         ChromeOptions options = getDefaultChromeOptions();         Path path = Paths.get("src/test/resources/extensions/webextensions-selenium-example.crx");         File extensionFilePath = new File(path.toUri());              options.addExtensions(extensionFilePath);         options.addArguments("--disable-features=DisableLoadExtensionCommandLineSwitch");              driver = new ChromeDriver(options);         driver.get("https://www.selenium.dev/selenium/web/blank.html");         WebElement injected = driver.findElement(By.id("webextensions-selenium-example"));         Assertions.assertEquals(             "Content injected by webextensions-selenium-example", injected.getText());       }            @Test       public void excludeSwitches() {         ChromeOptions options = getDefaultChromeOptions();              options.setExperimentalOption("excludeSwitches", List.of("disable-popup-blocking"));              driver = new ChromeDriver(options);       }            @Test       public void loggingPreferences() {         ChromeOptions options = getDefaultChromeOptions();         LoggingPreferences logPrefs = new LoggingPreferences();         logPrefs.enable(LogType.PERFORMANCE, Level.ALL);         options.setCapability(ChromeOptions.LOGGING_PREFS, logPrefs);              driver = new ChromeDriver(options);         driver.get("https://www.selenium.dev");              LogEntries logEntries = driver.manage().logs().get(LogType.PERFORMANCE);         Assertions.assertFalse(logEntries.getAll().isEmpty());       }            @Test       public void logsToFile() throws IOException {         File logLocation = getTempFile("logsToFile", ".log");         ChromeDriverService service =             new ChromeDriverService.Builder().withLogFile(logLocation).build();              driver = new ChromeDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         Assertions.assertTrue(fileContent.contains("Starting ChromeDriver"));       }            @Test       public void logsToConsole() throws IOException {         File logLocation = getTempFile("logsToConsole", ".log");         System.setOut(new PrintStream(logLocation));              ChromeDriverService service =             new ChromeDriverService.Builder().withLogOutput(System.out).build();              driver = new ChromeDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         Assertions.assertTrue(fileContent.contains("Starting ChromeDriver"));       }            @Test       public void logsWithLevel() throws IOException {         File logLocation = getTempFile("logsWithLevel", ".log");         System.setProperty(             ChromeDriverService.CHROME_DRIVER_LOG_PROPERTY, logLocation.getAbsolutePath());              ChromeDriverService service =             new ChromeDriverService.Builder().withLogLevel(ChromiumDriverLogLevel.DEBUG).build();              driver = new ChromeDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         Assertions.assertTrue(fileContent.contains("[DEBUG]:"));       }            @Test       public void configureDriverLogs() throws IOException {         File logLocation = getTempFile("configureDriverLogs", ".log");         System.setProperty(             ChromeDriverService.CHROME_DRIVER_LOG_PROPERTY, logLocation.getAbsolutePath());         System.setProperty(             ChromeDriverService.CHROME_DRIVER_LOG_LEVEL_PROPERTY,             ChromiumDriverLogLevel.DEBUG.toString());              ChromeDriverService service =             new ChromeDriverService.Builder().withAppendLog(true).withReadableTimestamp(true).build();              driver = new ChromeDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         Pattern pattern = Pattern.compile("\\[\\d\\d-\\d\\d-\\d\\d\\d\\d", Pattern.CASE_INSENSITIVE);         Assertions.assertTrue(pattern.matcher(fileContent).find());       }            @Test       public void disableBuildChecks() throws IOException {         File logLocation = getTempFile("disableBuildChecks", ".log");         System.setProperty(             ChromeDriverService.CHROME_DRIVER_LOG_PROPERTY, logLocation.getAbsolutePath());         System.setProperty(             ChromeDriverService.CHROME_DRIVER_LOG_LEVEL_PROPERTY,             ChromiumDriverLogLevel.WARNING.toString());              ChromeDriverService service =             new ChromeDriverService.Builder().withBuildCheckDisabled(true).build();              driver = new ChromeDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         String expected =             "[WARNING]: You are using an unsupported command-line switch: --disable-build-check";         Assertions.assertTrue(fileContent.contains(expected));       }            private File getChromeLocation() {         ChromeOptions options = getDefaultChromeOptions();         options.setBrowserVersion("stable");         DriverFinder finder = new DriverFinder(ChromeDriverService.createDefaultService(), options);         return new File(finder.getBrowserPath());       }            @Test       public void setPermission() {         ChromeDriver driver = new ChromeDriver();         driver.get("https://www.selenium.dev");              driver.setPermission("camera", "denied");              // Verify the permission state is 'denied'         String script = "return navigator.permissions.query({ name: 'camera' })" +                 "    .then(permissionStatus => permissionStatus.state);";         String permissionState = (String) driver.executeScript(script);              Assertions.assertEquals("denied", permissionState);         driver.quit();       }            @Test       public void setNetworkConditions() {         driver = new ChromeDriver();              ChromiumNetworkConditions networkConditions = new ChromiumNetworkConditions();         networkConditions.setOffline(false);         networkConditions.setLatency(java.time.Duration.ofMillis(20)); // 20 ms of latency         networkConditions.setDownloadThroughput(2000 * 1024 / 8); // 2000 kbps         networkConditions.setUploadThroughput(2000 * 1024 / 8);   // 2000 kbps              ((ChromeDriver) driver).setNetworkConditions(networkConditions);              driver.get("https://www.selenium.dev");              // Assert the network conditions are set as expected         ChromiumNetworkConditions actualConditions = ((ChromeDriver) driver).getNetworkConditions();         Assertions.assertAll(             () -> Assertions.assertEquals(networkConditions.getOffline(), actualConditions.getOffline()),             () -> Assertions.assertEquals(networkConditions.getLatency(), actualConditions.getLatency()),             () -> Assertions.assertEquals(networkConditions.getDownloadThroughput(), actualConditions.getDownloadThroughput()),             () -> Assertions.assertEquals(networkConditions.getUploadThroughput(), actualConditions.getUploadThroughput())         );         ((ChromeDriver) driver).deleteNetworkConditions();         driver.quit();       }            @Test       public void castFeatures() {         ChromeDriver driver = new ChromeDriver();              List<Map<String, String>> sinks = driver.getCastSinks();         if (!sinks.isEmpty()) {           String sinkName = sinks.get(0).get("name");           driver.startTabMirroring(sinkName);           driver.stopCasting(sinkName);         }              driver.quit();       }            @Test       public void getBrowserLogs() {         ChromeDriver driver = new ChromeDriver();         driver.get("https://www.selenium.dev/selenium/web/bidi/logEntryAdded.html");         WebElement consoleLogButton = driver.findElement(By.id("consoleError"));         consoleLogButton.click();              LogEntries logs = driver.manage().logs().get(LogType.BROWSER);              // Assert that at least one log contains the expected message         boolean logFound = false;         for (LogEntry log : logs) {           if (log.getMessage().contains("I am console error")) {             logFound = true;             break;           }         }              Assertions.assertTrue(logFound, "No matching log message found.");         driver.quit();       }     }                        logs = driver.get_log("browser")

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk//examples/python/tests/browsers/test_chrome.py#L186)

##### /examples/python/tests/browsers/test\_chrome.py

Copy  Close               import os     import re     import subprocess     import pytest     from selenium import webdriver     from selenium.webdriver.common.by import By          def test_basic_options():         options = get_default_chrome_options()         driver = webdriver.Chrome(options=options)              driver.quit()               def test_args():         options = get_default_chrome_options()              options.add_argument("--start-maximized")              driver = webdriver.Chrome(options=options)         driver.get('http://selenium.dev')              driver.quit()               def test_set_browser_location(chrome_bin):         options = get_default_chrome_options()              options.binary_location = chrome_bin              driver = webdriver.Chrome(options=options)              driver.quit()               def test_add_extension():         options = get_default_chrome_options()         extension_file_path = os.path.abspath("tests/extensions/webextensions-selenium-example.crx")              options.add_extension(extension_file_path)              driver = webdriver.Chrome(options=options)         driver.get("https://www.selenium.dev/selenium/web/blank.html")              driver.quit()               def test_keep_browser_open():         options = get_default_chrome_options()              options.add_experimental_option("detach", True)              driver = webdriver.Chrome(options=options)         driver.get('http://selenium.dev')              driver.quit()               def test_exclude_switches():         options = get_default_chrome_options()              options.add_experimental_option('excludeSwitches', ['disable-popup-blocking'])              driver = webdriver.Chrome(options=options)         driver.get('http://selenium.dev')              driver.quit()               def test_log_to_file(log_path):         service = webdriver.ChromeService(log_output=log_path)              driver = webdriver.Chrome(service=service)              with open(log_path, 'r') as fp:             assert "Starting ChromeDriver" in fp.readline()              driver.quit()               def test_log_to_stdout(capfd):         service = webdriver.ChromeService(log_output=subprocess.STDOUT)              driver = webdriver.Chrome(service=service)              out, err = capfd.readouterr()         assert "Starting ChromeDriver" in out              driver.quit()               def test_log_level(capfd):         service = webdriver.ChromeService(service_args=['--log-level=DEBUG'], log_output=subprocess.STDOUT)              driver = webdriver.Chrome(service=service)              out, err = capfd.readouterr()         assert '[DEBUG]' in err              driver.quit()               def test_log_features(log_path):         service = webdriver.ChromeService(service_args=['--append-log', '--readable-timestamp'], log_output=log_path)              driver = webdriver.Chrome(service=service)              with open(log_path, 'r') as f:             assert re.match(r"\[\d\d-\d\d-\d\d\d\d", f.read())              driver.quit()               def test_build_checks(capfd):         service = webdriver.ChromeService(service_args=['--disable-build-check'], log_output=subprocess.STDOUT)              driver = webdriver.Chrome(service=service)              expected = "[WARNING]: You are using an unsupported command-line switch: --disable-build-check"         out, err = capfd.readouterr()         assert expected in err              driver.quit()               def test_set_network_conditions():         driver = webdriver.Chrome()              network_conditions = {             "offline": False,             "latency": 20,  # 20 ms of latency             "download_throughput": 2000 * 1024 / 8,  # 2000 kbps             "upload_throughput": 2000 * 1024 / 8,    # 2000 kbps         }         driver.set_network_conditions(**network_conditions)              driver.get("https://www.selenium.dev")              # check whether the network conditions are set         assert driver.get_network_conditions() == network_conditions              driver.quit()               def test_set_permissions():         driver = webdriver.Chrome()         driver.get('https://www.selenium.dev')              driver.set_permissions('camera', 'denied')              assert get_permission_state(driver, 'camera') == 'denied'         driver.quit()               def get_permission_state(driver, name):         """Helper function to query the permission state."""         script = """         const callback = arguments[arguments.length - 1];         navigator.permissions.query({name: arguments[0]}).then(permissionStatus => {             callback(permissionStatus.state);         });         """         return driver.execute_async_script(script, name)               def test_cast_features():         driver = webdriver.Chrome()              try:             sinks = driver.get_sinks()             if sinks:                 sink_name = sinks[0]['name']                 driver.start_tab_mirroring(sink_name)                 driver.stop_casting(sink_name)             else:                 pytest.skip("No available Cast sinks to test with.")         finally:             driver.quit()               def test_get_browser_logs():         driver = webdriver.Chrome()         driver.get("https://www.selenium.dev/selenium/web/bidi/logEntryAdded.html")         driver.find_element(By.ID, "consoleError").click()              logs = driver.get_log("browser")              # Assert that at least one log contains the expected message         assert any("I am console error" in log['message'] for log in logs), "No matching log message found."         driver.quit()          def get_default_chrome_options():         options = webdriver.ChromeOptions()         options.add_argument("--no-sandbox")         return options     

[Add Example](https://www.selenium.dev/documentation/about/contributing/#creating-examples)                     @driver.navigate.to 'https://www.selenium.dev/selenium/web/'

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk//examples/ruby/spec/browsers/chrome_spec.rb#L145)

##### /examples/ruby/spec/browsers/chrome\_spec.rb

Copy  Close               # frozen_string_literal: true          require 'spec_helper'          RSpec.describe 'Chrome' do       describe 'Options' do         let(:chrome_location) { driver_finder && ENV.fetch('CHROME_BIN', nil) }              it 'basic options' do           options = Selenium::WebDriver::Options.chrome           @driver = Selenium::WebDriver.for :chrome, options: options         end              it 'add arguments' do           options = Selenium::WebDriver::Options.chrome                options.args << '--start-maximized'                @driver = Selenium::WebDriver.for :chrome, options: options         end              it 'sets location of binary' do           user_data_dir = Dir.mktmpdir('chrome-profile-')           options = Selenium::WebDriver::Options.chrome           options.add_argument("--user-data-dir=#{user_data_dir}")           options.add_argument('--no-sandbox')           options.add_argument('--disable-dev-shm-usage')                options.binary = chrome_location                @driver = Selenium::WebDriver.for :chrome, options: options         end              it 'add extensions' do           extension_file_path = File.expand_path('../spec_support/extensions/webextensions-selenium-example.crx', __dir__)           options = Selenium::WebDriver::Options.chrome                options.add_extension(extension_file_path)           options.add_argument('--disable-features=DisableLoadExtensionCommandLineSwitch')                @driver = Selenium::WebDriver.for :chrome, options: options           @driver.get('https://www.selenium.dev/selenium/web/blank.html')           injected = @driver.find_element(:id, 'webextensions-selenium-example')           expect(injected.text).to eq 'Content injected by webextensions-selenium-example'         end              it 'keeps browser open' do           options = Selenium::WebDriver::Options.chrome                options.detach = true                @driver = Selenium::WebDriver.for :chrome, options: options         end              it 'excludes switches' do           options = Selenium::WebDriver::Options.chrome                options.exclude_switches << 'disable-popup-blocking'                @driver = Selenium::WebDriver.for :chrome, options: options         end       end            describe 'Service' do         let(:file_name) { File.expand_path('chromedriver.log') }              after { FileUtils.rm_f(file_name) }              it 'logs to file' do           service = Selenium::WebDriver::Service.chrome                service.log = file_name                @driver = Selenium::WebDriver.for :chrome, service: service           expect(File.readlines(file_name).first).to include('Starting ChromeDriver')         end              it 'logs to console' do           service = Selenium::WebDriver::Service.chrome                service.log = $stdout                expect {             @driver = Selenium::WebDriver.for :chrome, service: service           }.to output(/Starting ChromeDriver/).to_stdout_from_any_process         end              it 'sets log level' do           service = Selenium::WebDriver::Service.chrome           service.log = file_name                service.args << '--log-level=DEBUG'                @driver = Selenium::WebDriver.for :chrome, service: service           expect(File.readlines(file_name).grep(/\[DEBUG\]:/).any?).to eq true         end              it 'sets log features' do           args = ["--log-path=#{file_name}", '--verbose']           service = Selenium::WebDriver::Service.chrome(args: args)                service.args << '--append-log'           service.args << '--readable-timestamp'                @driver = Selenium::WebDriver.for :chrome, service: service                expect(File.readlines(file_name).grep(/\[\d\d-\d\d-\d\d\d\d/).any?).to eq true         end              it 'disables build checks' do           service = Selenium::WebDriver::Service.chrome log: file_name, args: ['--verbose']                service.args << '--disable-build-check'                @driver = Selenium::WebDriver.for :chrome, service: service           warning = /\[WARNING\]: You are using an unsupported command-line switch: --disable-build-check/           expect(File.readlines(file_name).grep(warning).any?).to eq true         end       end            describe 'Special Features' do         it 'casts' do           @driver = Selenium::WebDriver.for :chrome           sinks = @driver.cast_sinks           unless sinks.empty?             device_name = sinks.first['name']             @driver.start_cast_tab_mirroring(device_name)             expect { @driver.stop_casting(device_name) }.not_to raise_exception           end         end              it 'gets and sets network conditions' do           @driver = Selenium::WebDriver.for :chrome           @driver.network_conditions = {offline: false, latency: 100, throughput: 200}           expect(@driver.network_conditions).to eq(             'offline' => false,             'latency' => 100,             'download_throughput' => 200,             'upload_throughput' => 200           )         end              it 'gets the browser logs' do           @driver = Selenium::WebDriver.for :chrome           @driver.navigate.to 'https://www.selenium.dev/selenium/web/'           sleep 1           logs = @driver.logs.get(:browser)                expect(logs.first.message).to include 'Failed to load resource'         end              it 'sets permissions' do           @driver = Selenium::WebDriver.for :chrome           @driver.navigate.to 'https://www.selenium.dev/selenium/web/'           @driver.add_permission('camera', 'denied')           @driver.add_permissions('clipboard-read' => 'denied', 'clipboard-write' => 'prompt')           expect(permission('camera')).to eq('denied')           expect(permission('clipboard-read')).to eq('denied')           expect(permission('clipboard-write')).to eq('prompt')         end       end            def driver_finder         options = Selenium::WebDriver::Options.chrome(browser_version: 'stable')         service = Selenium::WebDriver::Service.chrome         finder = Selenium::WebDriver::DriverFinder.new(options, service)         ENV['CHROMEDRIVER_BIN'] = finder.driver_path         ENV['CHROME_BIN'] = finder.browser_path       end            def permission(name)         @driver.execute_async_script('callback = arguments[arguments.length - 1];' \                                      'callback(navigator.permissions.query({name: arguments[0]}));', name)['state']       end     end     

[Add Example](https://www.selenium.dev/documentation/about/contributing/#creating-examples)

[Add Example](https://www.selenium.dev/documentation/about/contributing/#creating-examples)

### Permissions

  * Java   * Python   * CSharp   * Ruby   * JavaScript   * Kotlin

                  driver.setPermission("camera", "denied");

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/java/src/test/java/dev/selenium/browsers/ChromeTest.java#L189)

##### examples/java/src/test/java/dev/selenium/browsers/ChromeTest.java

Copy  Close               package dev.selenium.browsers;          import dev.selenium.BaseTest;     import java.io.File;     import java.io.IOException;     import java.io.PrintStream;     import java.nio.file.Files;     import java.nio.file.Path;     import java.nio.file.Paths;     import java.util.List;     import java.util.Map;     import java.util.logging.Level;     import java.util.regex.Pattern;     import org.junit.jupiter.api.AfterEach;     import org.junit.jupiter.api.Assertions;     import org.junit.jupiter.api.Test;     import org.openqa.selenium.By;     import org.openqa.selenium.WebElement;     import org.openqa.selenium.chrome.ChromeDriver;     import org.openqa.selenium.chrome.ChromeDriverService;     import org.openqa.selenium.chrome.ChromeOptions;     import org.openqa.selenium.chromium.ChromiumDriverLogLevel;     import org.openqa.selenium.chromium.ChromiumNetworkConditions;     import org.openqa.selenium.logging.*;     import org.openqa.selenium.remote.service.DriverFinder;          public class ChromeTest extends BaseTest {       @AfterEach       public void clearProperties() {         System.clearProperty(ChromeDriverService.CHROME_DRIVER_LOG_PROPERTY);         System.clearProperty(ChromeDriverService.CHROME_DRIVER_LOG_LEVEL_PROPERTY);       }            @Test       public void basicOptions() {         ChromeOptions options = getDefaultChromeOptions();         driver = new ChromeDriver(options);       }            @Test       public void arguments() {         ChromeOptions options = getDefaultChromeOptions();              options.addArguments("--start-maximized");              driver = new ChromeDriver(options);       }            @Test       public void setBrowserLocation() {         ChromeOptions options = getDefaultChromeOptions();              options.setBinary(getChromeLocation());              driver = new ChromeDriver(options);       }            @Test       public void extensionOptions() {         ChromeOptions options = getDefaultChromeOptions();         Path path = Paths.get("src/test/resources/extensions/webextensions-selenium-example.crx");         File extensionFilePath = new File(path.toUri());              options.addExtensions(extensionFilePath);         options.addArguments("--disable-features=DisableLoadExtensionCommandLineSwitch");              driver = new ChromeDriver(options);         driver.get("https://www.selenium.dev/selenium/web/blank.html");         WebElement injected = driver.findElement(By.id("webextensions-selenium-example"));         Assertions.assertEquals(             "Content injected by webextensions-selenium-example", injected.getText());       }            @Test       public void excludeSwitches() {         ChromeOptions options = getDefaultChromeOptions();              options.setExperimentalOption("excludeSwitches", List.of("disable-popup-blocking"));              driver = new ChromeDriver(options);       }            @Test       public void loggingPreferences() {         ChromeOptions options = getDefaultChromeOptions();         LoggingPreferences logPrefs = new LoggingPreferences();         logPrefs.enable(LogType.PERFORMANCE, Level.ALL);         options.setCapability(ChromeOptions.LOGGING_PREFS, logPrefs);              driver = new ChromeDriver(options);         driver.get("https://www.selenium.dev");              LogEntries logEntries = driver.manage().logs().get(LogType.PERFORMANCE);         Assertions.assertFalse(logEntries.getAll().isEmpty());       }            @Test       public void logsToFile() throws IOException {         File logLocation = getTempFile("logsToFile", ".log");         ChromeDriverService service =             new ChromeDriverService.Builder().withLogFile(logLocation).build();              driver = new ChromeDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         Assertions.assertTrue(fileContent.contains("Starting ChromeDriver"));       }            @Test       public void logsToConsole() throws IOException {         File logLocation = getTempFile("logsToConsole", ".log");         System.setOut(new PrintStream(logLocation));              ChromeDriverService service =             new ChromeDriverService.Builder().withLogOutput(System.out).build();              driver = new ChromeDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         Assertions.assertTrue(fileContent.contains("Starting ChromeDriver"));       }            @Test       public void logsWithLevel() throws IOException {         File logLocation = getTempFile("logsWithLevel", ".log");         System.setProperty(             ChromeDriverService.CHROME_DRIVER_LOG_PROPERTY, logLocation.getAbsolutePath());              ChromeDriverService service =             new ChromeDriverService.Builder().withLogLevel(ChromiumDriverLogLevel.DEBUG).build();              driver = new ChromeDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         Assertions.assertTrue(fileContent.contains("[DEBUG]:"));       }            @Test       public void configureDriverLogs() throws IOException {         File logLocation = getTempFile("configureDriverLogs", ".log");         System.setProperty(             ChromeDriverService.CHROME_DRIVER_LOG_PROPERTY, logLocation.getAbsolutePath());         System.setProperty(             ChromeDriverService.CHROME_DRIVER_LOG_LEVEL_PROPERTY,             ChromiumDriverLogLevel.DEBUG.toString());              ChromeDriverService service =             new ChromeDriverService.Builder().withAppendLog(true).withReadableTimestamp(true).build();              driver = new ChromeDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         Pattern pattern = Pattern.compile("\\[\\d\\d-\\d\\d-\\d\\d\\d\\d", Pattern.CASE_INSENSITIVE);         Assertions.assertTrue(pattern.matcher(fileContent).find());       }            @Test       public void disableBuildChecks() throws IOException {         File logLocation = getTempFile("disableBuildChecks", ".log");         System.setProperty(             ChromeDriverService.CHROME_DRIVER_LOG_PROPERTY, logLocation.getAbsolutePath());         System.setProperty(             ChromeDriverService.CHROME_DRIVER_LOG_LEVEL_PROPERTY,             ChromiumDriverLogLevel.WARNING.toString());              ChromeDriverService service =             new ChromeDriverService.Builder().withBuildCheckDisabled(true).build();              driver = new ChromeDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         String expected =             "[WARNING]: You are using an unsupported command-line switch: --disable-build-check";         Assertions.assertTrue(fileContent.contains(expected));       }            private File getChromeLocation() {         ChromeOptions options = getDefaultChromeOptions();         options.setBrowserVersion("stable");         DriverFinder finder = new DriverFinder(ChromeDriverService.createDefaultService(), options);         return new File(finder.getBrowserPath());       }            @Test       public void setPermission() {         ChromeDriver driver = new ChromeDriver();         driver.get("https://www.selenium.dev");              driver.setPermission("camera", "denied");              // Verify the permission state is 'denied'         String script = "return navigator.permissions.query({ name: 'camera' })" +                 "    .then(permissionStatus => permissionStatus.state);";         String permissionState = (String) driver.executeScript(script);              Assertions.assertEquals("denied", permissionState);         driver.quit();       }            @Test       public void setNetworkConditions() {         driver = new ChromeDriver();              ChromiumNetworkConditions networkConditions = new ChromiumNetworkConditions();         networkConditions.setOffline(false);         networkConditions.setLatency(java.time.Duration.ofMillis(20)); // 20 ms of latency         networkConditions.setDownloadThroughput(2000 * 1024 / 8); // 2000 kbps         networkConditions.setUploadThroughput(2000 * 1024 / 8);   // 2000 kbps              ((ChromeDriver) driver).setNetworkConditions(networkConditions);              driver.get("https://www.selenium.dev");              // Assert the network conditions are set as expected         ChromiumNetworkConditions actualConditions = ((ChromeDriver) driver).getNetworkConditions();         Assertions.assertAll(             () -> Assertions.assertEquals(networkConditions.getOffline(), actualConditions.getOffline()),             () -> Assertions.assertEquals(networkConditions.getLatency(), actualConditions.getLatency()),             () -> Assertions.assertEquals(networkConditions.getDownloadThroughput(), actualConditions.getDownloadThroughput()),             () -> Assertions.assertEquals(networkConditions.getUploadThroughput(), actualConditions.getUploadThroughput())         );         ((ChromeDriver) driver).deleteNetworkConditions();         driver.quit();       }            @Test       public void castFeatures() {         ChromeDriver driver = new ChromeDriver();              List<Map<String, String>> sinks = driver.getCastSinks();         if (!sinks.isEmpty()) {           String sinkName = sinks.get(0).get("name");           driver.startTabMirroring(sinkName);           driver.stopCasting(sinkName);         }              driver.quit();       }            @Test       public void getBrowserLogs() {         ChromeDriver driver = new ChromeDriver();         driver.get("https://www.selenium.dev/selenium/web/bidi/logEntryAdded.html");         WebElement consoleLogButton = driver.findElement(By.id("consoleError"));         consoleLogButton.click();              LogEntries logs = driver.manage().logs().get(LogType.BROWSER);              // Assert that at least one log contains the expected message         boolean logFound = false;         for (LogEntry log : logs) {           if (log.getMessage().contains("I am console error")) {             logFound = true;             break;           }         }              Assertions.assertTrue(logFound, "No matching log message found.");         driver.quit();       }     }                        driver.set_permissions('camera', 'denied')

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk//examples/python/tests/browsers/test_chrome.py#L149)

##### /examples/python/tests/browsers/test\_chrome.py

Copy  Close               import os     import re     import subprocess     import pytest     from selenium import webdriver     from selenium.webdriver.common.by import By          def test_basic_options():         options = get_default_chrome_options()         driver = webdriver.Chrome(options=options)              driver.quit()               def test_args():         options = get_default_chrome_options()              options.add_argument("--start-maximized")              driver = webdriver.Chrome(options=options)         driver.get('http://selenium.dev')              driver.quit()               def test_set_browser_location(chrome_bin):         options = get_default_chrome_options()              options.binary_location = chrome_bin              driver = webdriver.Chrome(options=options)              driver.quit()               def test_add_extension():         options = get_default_chrome_options()         extension_file_path = os.path.abspath("tests/extensions/webextensions-selenium-example.crx")              options.add_extension(extension_file_path)              driver = webdriver.Chrome(options=options)         driver.get("https://www.selenium.dev/selenium/web/blank.html")              driver.quit()               def test_keep_browser_open():         options = get_default_chrome_options()              options.add_experimental_option("detach", True)              driver = webdriver.Chrome(options=options)         driver.get('http://selenium.dev')              driver.quit()               def test_exclude_switches():         options = get_default_chrome_options()              options.add_experimental_option('excludeSwitches', ['disable-popup-blocking'])              driver = webdriver.Chrome(options=options)         driver.get('http://selenium.dev')              driver.quit()               def test_log_to_file(log_path):         service = webdriver.ChromeService(log_output=log_path)              driver = webdriver.Chrome(service=service)              with open(log_path, 'r') as fp:             assert "Starting ChromeDriver" in fp.readline()              driver.quit()               def test_log_to_stdout(capfd):         service = webdriver.ChromeService(log_output=subprocess.STDOUT)              driver = webdriver.Chrome(service=service)              out, err = capfd.readouterr()         assert "Starting ChromeDriver" in out              driver.quit()               def test_log_level(capfd):         service = webdriver.ChromeService(service_args=['--log-level=DEBUG'], log_output=subprocess.STDOUT)              driver = webdriver.Chrome(service=service)              out, err = capfd.readouterr()         assert '[DEBUG]' in err              driver.quit()               def test_log_features(log_path):         service = webdriver.ChromeService(service_args=['--append-log', '--readable-timestamp'], log_output=log_path)              driver = webdriver.Chrome(service=service)              with open(log_path, 'r') as f:             assert re.match(r"\[\d\d-\d\d-\d\d\d\d", f.read())              driver.quit()               def test_build_checks(capfd):         service = webdriver.ChromeService(service_args=['--disable-build-check'], log_output=subprocess.STDOUT)              driver = webdriver.Chrome(service=service)              expected = "[WARNING]: You are using an unsupported command-line switch: --disable-build-check"         out, err = capfd.readouterr()         assert expected in err              driver.quit()               def test_set_network_conditions():         driver = webdriver.Chrome()              network_conditions = {             "offline": False,             "latency": 20,  # 20 ms of latency             "download_throughput": 2000 * 1024 / 8,  # 2000 kbps             "upload_throughput": 2000 * 1024 / 8,    # 2000 kbps         }         driver.set_network_conditions(**network_conditions)              driver.get("https://www.selenium.dev")              # check whether the network conditions are set         assert driver.get_network_conditions() == network_conditions              driver.quit()               def test_set_permissions():         driver = webdriver.Chrome()         driver.get('https://www.selenium.dev')              driver.set_permissions('camera', 'denied')              assert get_permission_state(driver, 'camera') == 'denied'         driver.quit()               def get_permission_state(driver, name):         """Helper function to query the permission state."""         script = """         const callback = arguments[arguments.length - 1];         navigator.permissions.query({name: arguments[0]}).then(permissionStatus => {             callback(permissionStatus.state);         });         """         return driver.execute_async_script(script, name)               def test_cast_features():         driver = webdriver.Chrome()              try:             sinks = driver.get_sinks()             if sinks:                 sink_name = sinks[0]['name']                 driver.start_tab_mirroring(sink_name)                 driver.stop_casting(sink_name)             else:                 pytest.skip("No available Cast sinks to test with.")         finally:             driver.quit()               def test_get_browser_logs():         driver = webdriver.Chrome()         driver.get("https://www.selenium.dev/selenium/web/bidi/logEntryAdded.html")         driver.find_element(By.ID, "consoleError").click()              logs = driver.get_log("browser")              # Assert that at least one log contains the expected message         assert any("I am console error" in log['message'] for log in logs), "No matching log message found."         driver.quit()          def get_default_chrome_options():         options = webdriver.ChromeOptions()         options.add_argument("--no-sandbox")         return options     

[Add Example](https://www.selenium.dev/documentation/about/contributing/#creating-examples)                     @driver = Selenium::WebDriver.for :chrome           @driver.navigate.to 'https://www.selenium.dev/selenium/web/'

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk//examples/ruby/spec/browsers/chrome_spec.rb#L153-L154)

##### /examples/ruby/spec/browsers/chrome\_spec.rb

Copy  Close               # frozen_string_literal: true          require 'spec_helper'          RSpec.describe 'Chrome' do       describe 'Options' do         let(:chrome_location) { driver_finder && ENV.fetch('CHROME_BIN', nil) }              it 'basic options' do           options = Selenium::WebDriver::Options.chrome           @driver = Selenium::WebDriver.for :chrome, options: options         end              it 'add arguments' do           options = Selenium::WebDriver::Options.chrome                options.args << '--start-maximized'                @driver = Selenium::WebDriver.for :chrome, options: options         end              it 'sets location of binary' do           user_data_dir = Dir.mktmpdir('chrome-profile-')           options = Selenium::WebDriver::Options.chrome           options.add_argument("--user-data-dir=#{user_data_dir}")           options.add_argument('--no-sandbox')           options.add_argument('--disable-dev-shm-usage')                options.binary = chrome_location                @driver = Selenium::WebDriver.for :chrome, options: options         end              it 'add extensions' do           extension_file_path = File.expand_path('../spec_support/extensions/webextensions-selenium-example.crx', __dir__)           options = Selenium::WebDriver::Options.chrome                options.add_extension(extension_file_path)           options.add_argument('--disable-features=DisableLoadExtensionCommandLineSwitch')                @driver = Selenium::WebDriver.for :chrome, options: options           @driver.get('https://www.selenium.dev/selenium/web/blank.html')           injected = @driver.find_element(:id, 'webextensions-selenium-example')           expect(injected.text).to eq 'Content injected by webextensions-selenium-example'         end              it 'keeps browser open' do           options = Selenium::WebDriver::Options.chrome                options.detach = true                @driver = Selenium::WebDriver.for :chrome, options: options         end              it 'excludes switches' do           options = Selenium::WebDriver::Options.chrome                options.exclude_switches << 'disable-popup-blocking'                @driver = Selenium::WebDriver.for :chrome, options: options         end       end            describe 'Service' do         let(:file_name) { File.expand_path('chromedriver.log') }              after { FileUtils.rm_f(file_name) }              it 'logs to file' do           service = Selenium::WebDriver::Service.chrome                service.log = file_name                @driver = Selenium::WebDriver.for :chrome, service: service           expect(File.readlines(file_name).first).to include('Starting ChromeDriver')         end              it 'logs to console' do           service = Selenium::WebDriver::Service.chrome                service.log = $stdout                expect {             @driver = Selenium::WebDriver.for :chrome, service: service           }.to output(/Starting ChromeDriver/).to_stdout_from_any_process         end              it 'sets log level' do           service = Selenium::WebDriver::Service.chrome           service.log = file_name                service.args << '--log-level=DEBUG'                @driver = Selenium::WebDriver.for :chrome, service: service           expect(File.readlines(file_name).grep(/\[DEBUG\]:/).any?).to eq true         end              it 'sets log features' do           args = ["--log-path=#{file_name}", '--verbose']           service = Selenium::WebDriver::Service.chrome(args: args)                service.args << '--append-log'           service.args << '--readable-timestamp'                @driver = Selenium::WebDriver.for :chrome, service: service                expect(File.readlines(file_name).grep(/\[\d\d-\d\d-\d\d\d\d/).any?).to eq true         end              it 'disables build checks' do           service = Selenium::WebDriver::Service.chrome log: file_name, args: ['--verbose']                service.args << '--disable-build-check'                @driver = Selenium::WebDriver.for :chrome, service: service           warning = /\[WARNING\]: You are using an unsupported command-line switch: --disable-build-check/           expect(File.readlines(file_name).grep(warning).any?).to eq true         end       end            describe 'Special Features' do         it 'casts' do           @driver = Selenium::WebDriver.for :chrome           sinks = @driver.cast_sinks           unless sinks.empty?             device_name = sinks.first['name']             @driver.start_cast_tab_mirroring(device_name)             expect { @driver.stop_casting(device_name) }.not_to raise_exception           end         end              it 'gets and sets network conditions' do           @driver = Selenium::WebDriver.for :chrome           @driver.network_conditions = {offline: false, latency: 100, throughput: 200}           expect(@driver.network_conditions).to eq(             'offline' => false,             'latency' => 100,             'download_throughput' => 200,             'upload_throughput' => 200           )         end              it 'gets the browser logs' do           @driver = Selenium::WebDriver.for :chrome           @driver.navigate.to 'https://www.selenium.dev/selenium/web/'           sleep 1           logs = @driver.logs.get(:browser)                expect(logs.first.message).to include 'Failed to load resource'         end              it 'sets permissions' do           @driver = Selenium::WebDriver.for :chrome           @driver.navigate.to 'https://www.selenium.dev/selenium/web/'           @driver.add_permission('camera', 'denied')           @driver.add_permissions('clipboard-read' => 'denied', 'clipboard-write' => 'prompt')           expect(permission('camera')).to eq('denied')           expect(permission('clipboard-read')).to eq('denied')           expect(permission('clipboard-write')).to eq('prompt')         end       end            def driver_finder         options = Selenium::WebDriver::Options.chrome(browser_version: 'stable')         service = Selenium::WebDriver::Service.chrome         finder = Selenium::WebDriver::DriverFinder.new(options, service)         ENV['CHROMEDRIVER_BIN'] = finder.driver_path         ENV['CHROME_BIN'] = finder.browser_path       end            def permission(name)         @driver.execute_async_script('callback = arguments[arguments.length - 1];' \                                      'callback(navigator.permissions.query({name: arguments[0]}));', name)['state']       end     end     

[Add Example](https://www.selenium.dev/documentation/about/contributing/#creating-examples)

[Add Example](https://www.selenium.dev/documentation/about/contributing/#creating-examples)

### DevTools

See the [Chrome DevTools](https://www.selenium.dev/documentation/webdriver/bidi/cdp/) section for more information about using Chrome DevTools

# 2 - Edge specific functionality

These are capabilities and features specific to Microsoft Edge browsers.

Microsoft Edge is implemented with Chromium, with the earliest supported version of v79. Similar to Chrome, the major version number of edgedriver must match the major version of the Edge browser.

## Options

Capabilities common to all browsers are described on the [Options page](https://www.selenium.dev/documentation/webdriver/drivers/options/).

Capabilities unique to Chromium are documented at Google’s page for [Capabilities & ChromeOptions](https://chromedriver.chromium.org/capabilities)

Starting an Edge session with basic defined options looks like this:

  * Java   * Python   * CSharp   * Ruby   * JavaScript   * Kotlin

                  EdgeOptions options = getDefaultEdgeOptions();         driver = new EdgeDriver(options);

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk//examples/java/src/test/java/dev/selenium/browsers/EdgeTest.java#L38-L39)

##### /examples/java/src/test/java/dev/selenium/browsers/EdgeTest.java

Copy  Close               package dev.selenium.browsers;          import dev.selenium.BaseTest;     import java.io.File;     import java.io.IOException;     import java.io.PrintStream;     import java.nio.file.Files;     import java.nio.file.Path;     import java.nio.file.Paths;     import java.util.List;     import java.util.Map;     import java.util.logging.Level;     import java.util.regex.Pattern;     import org.junit.jupiter.api.AfterEach;     import org.junit.jupiter.api.Assertions;     import org.junit.jupiter.api.Test;     import org.openqa.selenium.By;     import org.openqa.selenium.WebElement;     import org.openqa.selenium.chromium.ChromiumDriverLogLevel;     import org.openqa.selenium.chromium.ChromiumNetworkConditions;     import org.openqa.selenium.edge.EdgeDriver;     import org.openqa.selenium.edge.EdgeDriverService;     import org.openqa.selenium.edge.EdgeOptions;     import org.openqa.selenium.logging.*;     import org.openqa.selenium.remote.service.DriverFinder;                    public class EdgeTest extends BaseTest {       @AfterEach       public void clearProperties() {         System.clearProperty(EdgeDriverService.EDGE_DRIVER_LOG_PROPERTY);         System.clearProperty(EdgeDriverService.EDGE_DRIVER_LOG_LEVEL_PROPERTY);       }            @Test       public void basicOptions() {         EdgeOptions options = getDefaultEdgeOptions();         driver = new EdgeDriver(options);       }            @Test       public void arguments() {         EdgeOptions options = getDefaultEdgeOptions();              options.addArguments("--start-maximized");              driver = new EdgeDriver(options);       }            @Test       public void setBrowserLocation() {         EdgeOptions options = getDefaultEdgeOptions();              options.setBinary(getEdgeLocation());              driver = new EdgeDriver(options);       }            @Test       public void extensionOptions() {         EdgeOptions options = getDefaultEdgeOptions();         Path path = Paths.get("src/test/resources/extensions/webextensions-selenium-example.crx");         File extensionFilePath = new File(path.toUri());              options.addExtensions(extensionFilePath);              driver = new EdgeDriver(options);         driver.get("https://www.selenium.dev/selenium/web/blank.html");         WebElement injected = driver.findElement(By.id("webextensions-selenium-example"));         Assertions.assertEquals(             "Content injected by webextensions-selenium-example", injected.getText());       }            @Test       public void excludeSwitches() {         EdgeOptions options = getDefaultEdgeOptions();              options.setExperimentalOption("excludeSwitches", List.of("disable-popup-blocking"));              driver = new EdgeDriver(options);       }            @Test       public void loggingPreferences() {         EdgeOptions options = getDefaultEdgeOptions();         LoggingPreferences logPrefs = new LoggingPreferences();         logPrefs.enable(LogType.PERFORMANCE, Level.ALL);         options.setCapability(EdgeOptions.LOGGING_PREFS, logPrefs);              driver = new EdgeDriver(options);         driver.get("https://www.selenium.dev");              LogEntries logEntries = driver.manage().logs().get(LogType.PERFORMANCE);         Assertions.assertFalse(logEntries.getAll().isEmpty());       }            @Test       public void logsToFile() throws IOException {         File logLocation = getTempFile("logsToFile", ".log");         EdgeDriverService service = new EdgeDriverService.Builder().withLogFile(logLocation).build();              driver = new EdgeDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         Assertions.assertTrue(fileContent.contains("Starting Microsoft Edge WebDriver"));       }            @Test       public void logsToConsole() throws IOException {         File logLocation = getTempFile("logsToConsole", ".log");         System.setOut(new PrintStream(logLocation));              EdgeDriverService service = new EdgeDriverService.Builder().withLogOutput(System.out).build();              driver = new EdgeDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         Assertions.assertTrue(fileContent.contains("Starting Microsoft Edge WebDriver"));       }            @Test       public void logsWithLevel() throws IOException {         File logLocation = getTempFile("logsWithLevel", ".log");         System.setProperty(EdgeDriverService.EDGE_DRIVER_LOG_PROPERTY, logLocation.getAbsolutePath());              EdgeDriverService service =             new EdgeDriverService.Builder().withLoglevel(ChromiumDriverLogLevel.DEBUG).build();              driver = new EdgeDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         Assertions.assertTrue(fileContent.contains("[DEBUG]:"));       }            @Test       public void configureDriverLogs() throws IOException {         File logLocation = getTempFile("configureDriverLogs", ".log");         System.setProperty(EdgeDriverService.EDGE_DRIVER_LOG_PROPERTY, logLocation.getAbsolutePath());         System.setProperty(             EdgeDriverService.EDGE_DRIVER_LOG_LEVEL_PROPERTY, ChromiumDriverLogLevel.DEBUG.toString());              EdgeDriverService service =             new EdgeDriverService.Builder().withAppendLog(true).withReadableTimestamp(true).build();              driver = new EdgeDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         Pattern pattern = Pattern.compile("\\[\\d\\d-\\d\\d-\\d\\d\\d\\d", Pattern.CASE_INSENSITIVE);         Assertions.assertTrue(pattern.matcher(fileContent).find());       }            @Test       public void disableBuildChecks() throws IOException {         File logLocation = getTempFile("disableBuildChecks", ".log");         System.setProperty(EdgeDriverService.EDGE_DRIVER_LOG_PROPERTY, logLocation.getAbsolutePath());         System.setProperty(             EdgeDriverService.EDGE_DRIVER_LOG_LEVEL_PROPERTY,             ChromiumDriverLogLevel.WARNING.toString());              EdgeDriverService service =             new EdgeDriverService.Builder().withBuildCheckDisabled(true).build();              driver = new EdgeDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         String expected =             "[WARNING]: You are using an unsupported command-line switch: --disable-build-check";         Assertions.assertTrue(fileContent.contains(expected));       }            private File getEdgeLocation() {         EdgeOptions options = getDefaultEdgeOptions();         options.setBrowserVersion("stable");         DriverFinder finder = new DriverFinder(EdgeDriverService.createDefaultService(), options);         return new File(finder.getBrowserPath());       }            @Test       public void setPermissions() {         EdgeDriver driver = new EdgeDriver();         driver.get("https://www.selenium.dev");              driver.setPermission("camera", "denied");              // Verify the permission state is 'denied'         String script = "return navigator.permissions.query({ name: 'camera' })" +                 "    .then(permissionStatus => permissionStatus.state);";         String permissionState = (String) driver.executeScript(script);              Assertions.assertEquals("denied", permissionState);         driver.quit();       }            @Test       public void setNetworkConditions() {         driver = new EdgeDriver();              ChromiumNetworkConditions networkConditions = new ChromiumNetworkConditions();         networkConditions.setOffline(false);         networkConditions.setLatency(java.time.Duration.ofMillis(20)); // 20 ms of latency         networkConditions.setDownloadThroughput(2000 * 1024 / 8); // 2000 kbps         networkConditions.setUploadThroughput(2000 * 1024 / 8);   // 2000 kbps              ((EdgeDriver) driver).setNetworkConditions(networkConditions);              driver.get("https://www.selenium.dev");              // Assert the network conditions are set as expected         ChromiumNetworkConditions actualConditions = ((EdgeDriver) driver).getNetworkConditions();         Assertions.assertAll(                 () -> Assertions.assertEquals(networkConditions.getOffline(), actualConditions.getOffline()),                 () -> Assertions.assertEquals(networkConditions.getLatency(), actualConditions.getLatency()),                 () -> Assertions.assertEquals(networkConditions.getDownloadThroughput(), actualConditions.getDownloadThroughput()),                 () -> Assertions.assertEquals(networkConditions.getUploadThroughput(), actualConditions.getUploadThroughput())         );         ((EdgeDriver) driver).deleteNetworkConditions();         driver.quit();       }            @Test       public void castFeatures() {         EdgeDriver driver = new EdgeDriver();              List<Map<String, String>> sinks = driver.getCastSinks();         if (!sinks.isEmpty()) {           String sinkName = sinks.get(0).get("name");           driver.startTabMirroring(sinkName);           driver.stopCasting(sinkName);         }              driver.quit();       }            @Test       public void getBrowserLogs() {         EdgeDriver driver = new EdgeDriver();         driver.get("https://www.selenium.dev/selenium/web/bidi/logEntryAdded.html");         WebElement consoleLogButton = driver.findElement(By.id("consoleError"));         consoleLogButton.click();              LogEntries logs = driver.manage().logs().get(LogType.BROWSER);              // Assert that at least one log contains the expected message         boolean logFound = false;         for (LogEntry log : logs) {           if (log.getMessage().contains("I am console error")) {             logFound = true;             break;           }         }              Assertions.assertTrue(logFound, "No matching log message found.");         driver.quit();       }     }                        options = get_default_edge_options()         driver = webdriver.Edge(options=options)

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk//examples/python/tests/browsers/test_edge.py#L9-L10)

##### /examples/python/tests/browsers/test\_edge.py

Copy  Close               import os     import re     import subprocess     import pytest     from selenium import webdriver     from selenium.webdriver.common.by import By          def test_basic_options():         options = get_default_edge_options()         driver = webdriver.Edge(options=options)              driver.quit()               def test_args():         options = get_default_edge_options()              options.add_argument("--start-maximized")              driver = webdriver.Edge(options=options)         driver.get('http://selenium.dev')              driver.quit()               def test_set_browser_location(edge_bin):         options = get_default_edge_options()              options.binary_location = edge_bin              driver = webdriver.Edge(options=options)              driver.quit()               def test_add_extension():         options = get_default_edge_options()         extension_file_path = os.path.abspath("tests/extensions/webextensions-selenium-example.crx")              options.add_extension(extension_file_path)              driver = webdriver.Edge(options=options)         driver.get("https://www.selenium.dev/selenium/web/blank.html")              driver.quit()               def test_keep_browser_open():         options = get_default_edge_options()              options.add_experimental_option("detach", True)              driver = webdriver.Edge(options=options)         driver.get('http://selenium.dev')              driver.quit()               def test_exclude_switches():         options = get_default_edge_options()              options.add_experimental_option('excludeSwitches', ['disable-popup-blocking'])              driver = webdriver.Edge(options=options)         driver.get('http://selenium.dev')              driver.quit()               def test_log_to_file(log_path):         service = webdriver.EdgeService(log_output=log_path)              driver = webdriver.Edge(service=service)              with open(log_path, 'r') as fp:             assert "Starting Microsoft Edge WebDriver" in fp.readline()              driver.quit()               def test_log_to_stdout(capfd):         service = webdriver.EdgeService(log_output=subprocess.STDOUT)              driver = webdriver.Edge(service=service)              out, err = capfd.readouterr()         assert "Starting Microsoft Edge WebDriver" in out              driver.quit()               def test_log_level(log_path):         service = webdriver.EdgeService(service_args=['--log-level=DEBUG'], log_output=log_path)              driver = webdriver.Edge(service=service)              with open(log_path, 'r') as f:             assert '[DEBUG]' in f.read()              driver.quit()               def test_log_features(log_path):         service = webdriver.EdgeService(service_args=['--append-log', '--readable-timestamp'], log_output=log_path)              driver = webdriver.Edge(service=service)              with open(log_path, 'r') as f:             assert re.match(r"\[\d\d-\d\d-\d\d\d\d", f.read())              driver.quit()               def test_build_checks(log_path):         service = webdriver.EdgeService(service_args=['--disable-build-check'], log_output=log_path)              driver = webdriver.Edge(service=service)              expected = "[WARNING]: You are using an unsupported command-line switch: --disable-build-check"         with open(log_path, 'r') as f:             assert expected in f.read()              driver.quit()               def test_set_network_conditions():         driver = webdriver.Edge()              network_conditions = {             "offline": False,             "latency": 20,  # 20 ms of latency             "download_throughput": 2000 * 1024 / 8,  # 2000 kbps             "upload_throughput": 2000 * 1024 / 8,    # 2000 kbps         }         driver.set_network_conditions(**network_conditions)              driver.get("https://www.selenium.dev")              # check whether the network conditions are set         assert driver.get_network_conditions() == network_conditions              driver.quit()               def test_set_permissions():         driver = webdriver.Edge()         driver.get('https://www.selenium.dev')              driver.set_permissions('camera', 'denied')              assert get_permission_state(driver, 'camera') == 'denied'         driver.quit()               def get_permission_state(driver, name):         """Helper function to query the permission state."""         script = """         const callback = arguments[arguments.length - 1];         navigator.permissions.query({name: arguments[0]}).then(permissionStatus => {             callback(permissionStatus.state);         });         """         return driver.execute_async_script(script, name)               def test_cast_features():         driver = webdriver.Edge()              try:             sinks = driver.get_sinks()             if sinks:                 sink_name = sinks[0]['name']                 driver.start_tab_mirroring(sink_name)                 driver.stop_casting(sink_name)             else:                 pytest.skip("No available Cast sinks to test with.")         finally:             driver.quit()               def test_get_browser_logs():         driver = webdriver.Edge()         driver.get("https://www.selenium.dev/selenium/web/bidi/logEntryAdded.html")         driver.find_element(By.ID, "consoleError").click()              logs = driver.get_log("browser")              # Assert that at least one log contains the expected message         assert any("I am console error" in log['message'] for log in logs), "No matching log message found."         driver.quit()          def get_default_edge_options():         options = webdriver.EdgeOptions()         options.add_argument("--no-sandbox")         return options                                var options = new EdgeOptions();                 driver = new EdgeDriver(options);

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk//examples/dotnet/SeleniumDocs/Browsers/EdgeTest.cs#L30-L31)

##### /examples/dotnet/SeleniumDocs/Browsers/EdgeTest.cs

Copy  Close               using System;     using System.IO;     using System.Linq;     using System.Text.RegularExpressions;     using Microsoft.VisualStudio.TestTools.UnitTesting;     using OpenQA.Selenium;     using OpenQA.Selenium.Edge;          namespace SeleniumDocs.Browsers     {         [TestClass]         public class EdgeTest         {             private EdgeDriver driver;             private string _logLocation;                  [TestCleanup]             public void Cleanup()             {                 if (_logLocation != null && File.Exists(_logLocation))                 {                     File.Delete(_logLocation);                 }                 driver.Quit();             }                  [TestMethod]             public void BasicOptions()             {                 var options = new EdgeOptions();                 driver = new EdgeDriver(options);             }                  [TestMethod]             public void Arguments()             {                 var options = new EdgeOptions();                      options.AddArgument("--start-maximized");                          driver = new EdgeDriver(options);             }                  [TestMethod]             public void SetBrowserLocation()             {                 var options = new EdgeOptions();                      options.BinaryLocation = GetEdgeLocation();                          driver = new EdgeDriver(options);             }                  [TestMethod]             public void InstallExtension()             {                 var options = new EdgeOptions();                 var baseDir = AppDomain.CurrentDomain.BaseDirectory;                 var extensionFilePath = Path.Combine(baseDir, "../../../Extensions/webextensions-selenium-example.crx");                      options.AddExtension(extensionFilePath);                      driver = new EdgeDriver(options);                      driver.Url = "https://www.selenium.dev/selenium/web/blank.html";                      IWebElement injected = driver.FindElement(By.Id("webextensions-selenium-example"));                 Assert.AreEqual("Content injected by webextensions-selenium-example", injected.Text);             }                  [TestMethod]             public void ExcludeSwitch()             {                 var options = new EdgeOptions();                      options.AddExcludedArgument("disable-popup-blocking");                      driver = new EdgeDriver(options);             }                  [TestMethod]             public void LogsToFile()             {                 var service = EdgeDriverService.CreateDefaultService();                      service.LogPath = GetLogLocation();                      driver = new EdgeDriver(service);                 driver.Quit(); // Close the Service log file before reading                 var lines = File.ReadLines(GetLogLocation());                 Assert.IsNotNull(lines.FirstOrDefault(line => line.Contains("Starting Microsoft Edge WebDriver")));             }                  [TestMethod]             [Ignore("Not implemented")]             public void LogsToConsole()             {                 var stringWriter = new StringWriter();                 var originalOutput = Console.Out;                 Console.SetOut(stringWriter);                      var service = EdgeDriverService.CreateDefaultService();                      //service.LogToConsole = true;                      driver = new EdgeDriver(service);                      Assert.IsTrue(stringWriter.ToString().Contains("Starting Microsoft Edge WebDriver"));                 Console.SetOut(originalOutput);                 stringWriter.Dispose();             }                  [TestMethod]             [Ignore("Not implemented")]             public void LogsLevel()             {                 var service = EdgeDriverService.CreateDefaultService();                 service.LogPath = GetLogLocation();                      // service.LogLevel = ChromiumDriverLogLevel.Debug                       driver = new EdgeDriver(service);                      driver.Quit(); // Close the Service log file before reading                 var lines = File.ReadLines(GetLogLocation());                 Assert.IsNotNull(lines.FirstOrDefault(line => line.Contains("[DEBUG]:")));             }                  [TestMethod]             [Ignore("Not implemented")]             public void ConfigureDriverLogs()             {                 var service = EdgeDriverService.CreateDefaultService();                 service.LogPath = GetLogLocation();                 service.EnableVerboseLogging = true;                      service.EnableAppendLog = true;                 // service.readableTimeStamp = true;                      driver = new EdgeDriver(service);                      driver.Quit(); // Close the Service log file before reading                 var lines = File.ReadLines(GetLogLocation());                 var regex = new Regex(@"\[\d\d-\d\d-\d\d\d\d");                 Assert.IsNotNull(lines.FirstOrDefault(line => regex.Matches("").Count > 0));             }                  [TestMethod]             public void DisableBuildCheck()             {                 var service = EdgeDriverService.CreateDefaultService();                 service.LogPath = GetLogLocation();                 service.EnableVerboseLogging = true;                      service.DisableBuildCheck = true;                      driver = new EdgeDriver(service);                 driver.Quit(); // Close the Service log file before reading                 var expected = "[WARNING]: You are using an unsupported command-line switch: --disable-build-check";                 var lines = File.ReadLines(GetLogLocation());                 Assert.IsNotNull(lines.FirstOrDefault(line => line.Contains(expected)));             }                          private string GetLogLocation()             {                 if (_logLocation == null || !File.Exists(_logLocation))                 {                     _logLocation = Path.GetTempFileName();                 }                      return _logLocation;             }                  private static string GetEdgeLocation()             {                 var options = new EdgeOptions                 {                     BrowserVersion = "stable"                 };                 return new DriverFinder(options).GetBrowserPath();             }         }     }                     options = Selenium::WebDriver::Options.edge           @driver = Selenium::WebDriver.for :edge, options: options

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk//examples/ruby/spec/browsers/edge_spec.rb#L10-L11)

##### /examples/ruby/spec/browsers/edge\_spec.rb

Copy  Close               # frozen_string_literal: true          require 'spec_helper'          RSpec.describe 'Edge' do       describe 'Options' do         let(:edge_location) { driver_finder && ENV.fetch('EDGE_BIN', nil) }              it 'basic options' do           options = Selenium::WebDriver::Options.edge           @driver = Selenium::WebDriver.for :edge, options: options         end              it 'add arguments' do           options = Selenium::WebDriver::Options.edge                options.args << '--start-maximized'                @driver = Selenium::WebDriver.for :edge, options: options         end              it 'sets location of binary' do           options = Selenium::WebDriver::Options.edge                options.binary = edge_location                @driver = Selenium::WebDriver.for :edge, options: options         end              it 'add extensions' do           extension_file_path = File.expand_path('../spec_support/extensions/webextensions-selenium-example.crx', __dir__)           options = Selenium::WebDriver::Options.edge                options.add_extension(extension_file_path)                @driver = Selenium::WebDriver.for :edge, options: options           @driver.get('https://www.selenium.dev/selenium/web/blank.html')           injected = @driver.find_element(:id, 'webextensions-selenium-example')           expect(injected.text).to eq 'Content injected by webextensions-selenium-example'         end              it 'keeps browser open' do           options = Selenium::WebDriver::Options.edge                options.detach = true                @driver = Selenium::WebDriver.for :edge, options: options         end              it 'excludes switches' do           options = Selenium::WebDriver::Options.edge                options.exclude_switches << 'disable-popup-blocking'                @driver = Selenium::WebDriver.for :edge, options: options         end       end            describe 'Service' do         let(:file_name) { File.expand_path('msedgedriver.log') }              after { FileUtils.rm_f(file_name) }              it 'logs to file' do           service = Selenium::WebDriver::Service.edge                service.log = file_name                @driver = Selenium::WebDriver.for :edge, service: service           expect(File.readlines(file_name).first).to include('Starting Microsoft Edge WebDriver')         end              it 'logs to console' do           service = Selenium::WebDriver::Service.edge                service.log = $stdout                expect {             @driver = Selenium::WebDriver.for :edge, service: service           }.to output(/Starting Microsoft Edge WebDriver/).to_stdout_from_any_process         end              it 'sets log level' do           service = Selenium::WebDriver::Service.edge           service.log = file_name                service.args << '--log-level=DEBUG'                @driver = Selenium::WebDriver.for :edge, service: service           expect(File.readlines(file_name).grep(/\[DEBUG\]:/).any?).to eq true         end              it 'sets log features' do           args = ["--log-path=#{file_name}", '--verbose']           service = Selenium::WebDriver::Service.edge(args: args)                service.args << '--append-log'           service.args << '--readable-timestamp'                @driver = Selenium::WebDriver.for :edge, service: service                expect(File.readlines(file_name).grep(/\[\d\d-\d\d-\d\d\d\d/).any?).to eq true         end              it 'disables build checks' do           service = Selenium::WebDriver::Service.edge log: file_name, args: ['--verbose']                service.args << '--disable-build-check'                @driver = Selenium::WebDriver.for :edge, service: service           warning = /\[WARNING\]: You are using an unsupported command-line switch: --disable-build-check/           expect(File.readlines(file_name).grep(warning).any?).to eq true         end       end            describe 'Special Features' do         it 'casts' do           @driver = Selenium::WebDriver.for :edge           sinks = @driver.cast_sinks           unless sinks.empty?             device_name = sinks.first['name']             @driver.start_cast_tab_mirroring(device_name)             expect { @driver.stop_casting(device_name) }.not_to raise_exception           end         end              it 'gets and sets network conditions' do           @driver = Selenium::WebDriver.for :edge           @driver.network_conditions = {offline: false, latency: 100, throughput: 200}           expect(@driver.network_conditions).to eq(             'offline' => false,             'latency' => 100,             'download_throughput' => 200,             'upload_throughput' => 200           )         end              it 'gets the browser logs' do           @driver = Selenium::WebDriver.for :edge           @driver.navigate.to 'https://www.selenium.dev/selenium/web/'           sleep 1           logs = @driver.logs.get(:browser)                expect(logs.first.message).to include 'Failed to load resource'         end              it 'sets permissions' do           @driver = Selenium::WebDriver.for :edge           @driver.navigate.to 'https://www.selenium.dev/selenium/web/'           @driver.add_permission('camera', 'denied')           @driver.add_permissions('clipboard-read' => 'denied', 'clipboard-write' => 'prompt')           expect(permission('camera')).to eq('denied')           expect(permission('clipboard-read')).to eq('denied')           expect(permission('clipboard-write')).to eq('prompt')         end       end            def driver_finder         options = Selenium::WebDriver::Options.edge(browser_version: 'stable')         service = Selenium::WebDriver::Service.edge         finder = Selenium::WebDriver::DriverFinder.new(options, service)         ENV['EDGEDRIVER_BIN'] = finder.driver_path         ENV['EDGE_BIN'] = finder.browser_path       end            def permission(name)         @driver.execute_async_script('callback = arguments[arguments.length - 1];' \                                      'callback(navigator.permissions.query({name: arguments[0]}));', name)['state']       end     end                        let options = new edge.Options();         driver = new Builder()           .forBrowser(Browser.EDGE)           .setEdgeOptions(options)           .build();

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk//examples/javascript/test/getting_started/openEdgeTest.spec.js#L11-L15)

##### /examples/javascript/test/getting\_started/openEdgeTest.spec.js

Copy  Close               const {Browser, Builder} = require('selenium-webdriver');     const edge = require('selenium-webdriver/edge');               describe('Open Edge', function () {       let driver;                      before(async function () {         let options = new edge.Options();         driver = new Builder()           .forBrowser(Browser.EDGE)           .setEdgeOptions(options)           .build();       });            after(async () => await driver.quit());            it('Basic Edge test', async function () {         await driver.get('https://www.selenium.dev/selenium/web/blank.html');       });     });     

[Add Example](https://www.selenium.dev/documentation/about/contributing/#creating-examples)

### Arguments

The `args` parameter is for a list of command line switches to be used when starting the browser. There are two excellent resources for investigating these arguments:

  * [Chrome Flags for Tooling](https://github.com/GoogleChrome/chrome-launcher/blob/main/docs/chrome-flags-for-tools.md)   * [List of Chromium Command Line Switches](https://peter.sh/experiments/chromium-command-line-switches/)

Commonly used args include `--start-maximized`, `--headless=new` and `--user-data-dir=...`

Add an argument to options:

  * Java   * Python   * CSharp   * Ruby   * JavaScript   * Kotlin

                  options.addArguments("--start-maximized");

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk//examples/java/src/test/java/dev/selenium/browsers/EdgeTest.java#L46)

##### /examples/java/src/test/java/dev/selenium/browsers/EdgeTest.java

Copy  Close               package dev.selenium.browsers;          import dev.selenium.BaseTest;     import java.io.File;     import java.io.IOException;     import java.io.PrintStream;     import java.nio.file.Files;     import java.nio.file.Path;     import java.nio.file.Paths;     import java.util.List;     import java.util.Map;     import java.util.logging.Level;     import java.util.regex.Pattern;     import org.junit.jupiter.api.AfterEach;     import org.junit.jupiter.api.Assertions;     import org.junit.jupiter.api.Test;     import org.openqa.selenium.By;     import org.openqa.selenium.WebElement;     import org.openqa.selenium.chromium.ChromiumDriverLogLevel;     import org.openqa.selenium.chromium.ChromiumNetworkConditions;     import org.openqa.selenium.edge.EdgeDriver;     import org.openqa.selenium.edge.EdgeDriverService;     import org.openqa.selenium.edge.EdgeOptions;     import org.openqa.selenium.logging.*;     import org.openqa.selenium.remote.service.DriverFinder;                    public class EdgeTest extends BaseTest {       @AfterEach       public void clearProperties() {         System.clearProperty(EdgeDriverService.EDGE_DRIVER_LOG_PROPERTY);         System.clearProperty(EdgeDriverService.EDGE_DRIVER_LOG_LEVEL_PROPERTY);       }            @Test       public void basicOptions() {         EdgeOptions options = getDefaultEdgeOptions();         driver = new EdgeDriver(options);       }            @Test       public void arguments() {         EdgeOptions options = getDefaultEdgeOptions();              options.addArguments("--start-maximized");              driver = new EdgeDriver(options);       }            @Test       public void setBrowserLocation() {         EdgeOptions options = getDefaultEdgeOptions();              options.setBinary(getEdgeLocation());              driver = new EdgeDriver(options);       }            @Test       public void extensionOptions() {         EdgeOptions options = getDefaultEdgeOptions();         Path path = Paths.get("src/test/resources/extensions/webextensions-selenium-example.crx");         File extensionFilePath = new File(path.toUri());              options.addExtensions(extensionFilePath);              driver = new EdgeDriver(options);         driver.get("https://www.selenium.dev/selenium/web/blank.html");         WebElement injected = driver.findElement(By.id("webextensions-selenium-example"));         Assertions.assertEquals(             "Content injected by webextensions-selenium-example", injected.getText());       }            @Test       public void excludeSwitches() {         EdgeOptions options = getDefaultEdgeOptions();              options.setExperimentalOption("excludeSwitches", List.of("disable-popup-blocking"));              driver = new EdgeDriver(options);       }            @Test       public void loggingPreferences() {         EdgeOptions options = getDefaultEdgeOptions();         LoggingPreferences logPrefs = new LoggingPreferences();         logPrefs.enable(LogType.PERFORMANCE, Level.ALL);         options.setCapability(EdgeOptions.LOGGING_PREFS, logPrefs);              driver = new EdgeDriver(options);         driver.get("https://www.selenium.dev");              LogEntries logEntries = driver.manage().logs().get(LogType.PERFORMANCE);         Assertions.assertFalse(logEntries.getAll().isEmpty());       }            @Test       public void logsToFile() throws IOException {         File logLocation = getTempFile("logsToFile", ".log");         EdgeDriverService service = new EdgeDriverService.Builder().withLogFile(logLocation).build();              driver = new EdgeDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         Assertions.assertTrue(fileContent.contains("Starting Microsoft Edge WebDriver"));       }            @Test       public void logsToConsole() throws IOException {         File logLocation = getTempFile("logsToConsole", ".log");         System.setOut(new PrintStream(logLocation));              EdgeDriverService service = new EdgeDriverService.Builder().withLogOutput(System.out).build();              driver = new EdgeDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         Assertions.assertTrue(fileContent.contains("Starting Microsoft Edge WebDriver"));       }            @Test       public void logsWithLevel() throws IOException {         File logLocation = getTempFile("logsWithLevel", ".log");         System.setProperty(EdgeDriverService.EDGE_DRIVER_LOG_PROPERTY, logLocation.getAbsolutePath());              EdgeDriverService service =             new EdgeDriverService.Builder().withLoglevel(ChromiumDriverLogLevel.DEBUG).build();              driver = new EdgeDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         Assertions.assertTrue(fileContent.contains("[DEBUG]:"));       }            @Test       public void configureDriverLogs() throws IOException {         File logLocation = getTempFile("configureDriverLogs", ".log");         System.setProperty(EdgeDriverService.EDGE_DRIVER_LOG_PROPERTY, logLocation.getAbsolutePath());         System.setProperty(             EdgeDriverService.EDGE_DRIVER_LOG_LEVEL_PROPERTY, ChromiumDriverLogLevel.DEBUG.toString());              EdgeDriverService service =             new EdgeDriverService.Builder().withAppendLog(true).withReadableTimestamp(true).build();              driver = new EdgeDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         Pattern pattern = Pattern.compile("\\[\\d\\d-\\d\\d-\\d\\d\\d\\d", Pattern.CASE_INSENSITIVE);         Assertions.assertTrue(pattern.matcher(fileContent).find());       }            @Test       public void disableBuildChecks() throws IOException {         File logLocation = getTempFile("disableBuildChecks", ".log");         System.setProperty(EdgeDriverService.EDGE_DRIVER_LOG_PROPERTY, logLocation.getAbsolutePath());         System.setProperty(             EdgeDriverService.EDGE_DRIVER_LOG_LEVEL_PROPERTY,             ChromiumDriverLogLevel.WARNING.toString());              EdgeDriverService service =             new EdgeDriverService.Builder().withBuildCheckDisabled(true).build();              driver = new EdgeDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         String expected =             "[WARNING]: You are using an unsupported command-line switch: --disable-build-check";         Assertions.assertTrue(fileContent.contains(expected));       }            private File getEdgeLocation() {         EdgeOptions options = getDefaultEdgeOptions();         options.setBrowserVersion("stable");         DriverFinder finder = new DriverFinder(EdgeDriverService.createDefaultService(), options);         return new File(finder.getBrowserPath());       }            @Test       public void setPermissions() {         EdgeDriver driver = new EdgeDriver();         driver.get("https://www.selenium.dev");              driver.setPermission("camera", "denied");              // Verify the permission state is 'denied'         String script = "return navigator.permissions.query({ name: 'camera' })" +                 "    .then(permissionStatus => permissionStatus.state);";         String permissionState = (String) driver.executeScript(script);              Assertions.assertEquals("denied", permissionState);         driver.quit();       }            @Test       public void setNetworkConditions() {         driver = new EdgeDriver();              ChromiumNetworkConditions networkConditions = new ChromiumNetworkConditions();         networkConditions.setOffline(false);         networkConditions.setLatency(java.time.Duration.ofMillis(20)); // 20 ms of latency         networkConditions.setDownloadThroughput(2000 * 1024 / 8); // 2000 kbps         networkConditions.setUploadThroughput(2000 * 1024 / 8);   // 2000 kbps              ((EdgeDriver) driver).setNetworkConditions(networkConditions);              driver.get("https://www.selenium.dev");              // Assert the network conditions are set as expected         ChromiumNetworkConditions actualConditions = ((EdgeDriver) driver).getNetworkConditions();         Assertions.assertAll(                 () -> Assertions.assertEquals(networkConditions.getOffline(), actualConditions.getOffline()),                 () -> Assertions.assertEquals(networkConditions.getLatency(), actualConditions.getLatency()),                 () -> Assertions.assertEquals(networkConditions.getDownloadThroughput(), actualConditions.getDownloadThroughput()),                 () -> Assertions.assertEquals(networkConditions.getUploadThroughput(), actualConditions.getUploadThroughput())         );         ((EdgeDriver) driver).deleteNetworkConditions();         driver.quit();       }            @Test       public void castFeatures() {         EdgeDriver driver = new EdgeDriver();              List<Map<String, String>> sinks = driver.getCastSinks();         if (!sinks.isEmpty()) {           String sinkName = sinks.get(0).get("name");           driver.startTabMirroring(sinkName);           driver.stopCasting(sinkName);         }              driver.quit();       }            @Test       public void getBrowserLogs() {         EdgeDriver driver = new EdgeDriver();         driver.get("https://www.selenium.dev/selenium/web/bidi/logEntryAdded.html");         WebElement consoleLogButton = driver.findElement(By.id("consoleError"));         consoleLogButton.click();              LogEntries logs = driver.manage().logs().get(LogType.BROWSER);              // Assert that at least one log contains the expected message         boolean logFound = false;         for (LogEntry log : logs) {           if (log.getMessage().contains("I am console error")) {             logFound = true;             break;           }         }              Assertions.assertTrue(logFound, "No matching log message found.");         driver.quit();       }     }                        options.add_argument("--start-maximized")

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk//examples/python/tests/browsers/test_edge.py#L18)

##### /examples/python/tests/browsers/test\_edge.py

Copy  Close               import os     import re     import subprocess     import pytest     from selenium import webdriver     from selenium.webdriver.common.by import By          def test_basic_options():         options = get_default_edge_options()         driver = webdriver.Edge(options=options)              driver.quit()               def test_args():         options = get_default_edge_options()              options.add_argument("--start-maximized")              driver = webdriver.Edge(options=options)         driver.get('http://selenium.dev')              driver.quit()               def test_set_browser_location(edge_bin):         options = get_default_edge_options()              options.binary_location = edge_bin              driver = webdriver.Edge(options=options)              driver.quit()               def test_add_extension():         options = get_default_edge_options()         extension_file_path = os.path.abspath("tests/extensions/webextensions-selenium-example.crx")              options.add_extension(extension_file_path)              driver = webdriver.Edge(options=options)         driver.get("https://www.selenium.dev/selenium/web/blank.html")              driver.quit()               def test_keep_browser_open():         options = get_default_edge_options()              options.add_experimental_option("detach", True)              driver = webdriver.Edge(options=options)         driver.get('http://selenium.dev')              driver.quit()               def test_exclude_switches():         options = get_default_edge_options()              options.add_experimental_option('excludeSwitches', ['disable-popup-blocking'])              driver = webdriver.Edge(options=options)         driver.get('http://selenium.dev')              driver.quit()               def test_log_to_file(log_path):         service = webdriver.EdgeService(log_output=log_path)              driver = webdriver.Edge(service=service)              with open(log_path, 'r') as fp:             assert "Starting Microsoft Edge WebDriver" in fp.readline()              driver.quit()               def test_log_to_stdout(capfd):         service = webdriver.EdgeService(log_output=subprocess.STDOUT)              driver = webdriver.Edge(service=service)              out, err = capfd.readouterr()         assert "Starting Microsoft Edge WebDriver" in out              driver.quit()               def test_log_level(log_path):         service = webdriver.EdgeService(service_args=['--log-level=DEBUG'], log_output=log_path)              driver = webdriver.Edge(service=service)              with open(log_path, 'r') as f:             assert '[DEBUG]' in f.read()              driver.quit()               def test_log_features(log_path):         service = webdriver.EdgeService(service_args=['--append-log', '--readable-timestamp'], log_output=log_path)              driver = webdriver.Edge(service=service)              with open(log_path, 'r') as f:             assert re.match(r"\[\d\d-\d\d-\d\d\d\d", f.read())              driver.quit()               def test_build_checks(log_path):         service = webdriver.EdgeService(service_args=['--disable-build-check'], log_output=log_path)              driver = webdriver.Edge(service=service)              expected = "[WARNING]: You are using an unsupported command-line switch: --disable-build-check"         with open(log_path, 'r') as f:             assert expected in f.read()              driver.quit()               def test_set_network_conditions():         driver = webdriver.Edge()              network_conditions = {             "offline": False,             "latency": 20,  # 20 ms of latency             "download_throughput": 2000 * 1024 / 8,  # 2000 kbps             "upload_throughput": 2000 * 1024 / 8,    # 2000 kbps         }         driver.set_network_conditions(**network_conditions)              driver.get("https://www.selenium.dev")              # check whether the network conditions are set         assert driver.get_network_conditions() == network_conditions              driver.quit()               def test_set_permissions():         driver = webdriver.Edge()         driver.get('https://www.selenium.dev')              driver.set_permissions('camera', 'denied')              assert get_permission_state(driver, 'camera') == 'denied'         driver.quit()               def get_permission_state(driver, name):         """Helper function to query the permission state."""         script = """         const callback = arguments[arguments.length - 1];         navigator.permissions.query({name: arguments[0]}).then(permissionStatus => {             callback(permissionStatus.state);         });         """         return driver.execute_async_script(script, name)               def test_cast_features():         driver = webdriver.Edge()              try:             sinks = driver.get_sinks()             if sinks:                 sink_name = sinks[0]['name']                 driver.start_tab_mirroring(sink_name)                 driver.stop_casting(sink_name)             else:                 pytest.skip("No available Cast sinks to test with.")         finally:             driver.quit()               def test_get_browser_logs():         driver = webdriver.Edge()         driver.get("https://www.selenium.dev/selenium/web/bidi/logEntryAdded.html")         driver.find_element(By.ID, "consoleError").click()              logs = driver.get_log("browser")              # Assert that at least one log contains the expected message         assert any("I am console error" in log['message'] for log in logs), "No matching log message found."         driver.quit()          def get_default_edge_options():         options = webdriver.EdgeOptions()         options.add_argument("--no-sandbox")         return options                                options.AddArgument("--start-maximized");

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk//examples/dotnet/SeleniumDocs/Browsers/EdgeTest.cs#L39)

##### /examples/dotnet/SeleniumDocs/Browsers/EdgeTest.cs

Copy  Close               using System;     using System.IO;     using System.Linq;     using System.Text.RegularExpressions;     using Microsoft.VisualStudio.TestTools.UnitTesting;     using OpenQA.Selenium;     using OpenQA.Selenium.Edge;          namespace SeleniumDocs.Browsers     {         [TestClass]         public class EdgeTest         {             private EdgeDriver driver;             private string _logLocation;                  [TestCleanup]             public void Cleanup()             {                 if (_logLocation != null && File.Exists(_logLocation))                 {                     File.Delete(_logLocation);                 }                 driver.Quit();             }                  [TestMethod]             public void BasicOptions()             {                 var options = new EdgeOptions();                 driver = new EdgeDriver(options);             }                  [TestMethod]             public void Arguments()             {                 var options = new EdgeOptions();                      options.AddArgument("--start-maximized");                          driver = new EdgeDriver(options);             }                  [TestMethod]             public void SetBrowserLocation()             {                 var options = new EdgeOptions();                      options.BinaryLocation = GetEdgeLocation();                          driver = new EdgeDriver(options);             }                  [TestMethod]             public void InstallExtension()             {                 var options = new EdgeOptions();                 var baseDir = AppDomain.CurrentDomain.BaseDirectory;                 var extensionFilePath = Path.Combine(baseDir, "../../../Extensions/webextensions-selenium-example.crx");                      options.AddExtension(extensionFilePath);                      driver = new EdgeDriver(options);                      driver.Url = "https://www.selenium.dev/selenium/web/blank.html";                      IWebElement injected = driver.FindElement(By.Id("webextensions-selenium-example"));                 Assert.AreEqual("Content injected by webextensions-selenium-example", injected.Text);             }                  [TestMethod]             public void ExcludeSwitch()             {                 var options = new EdgeOptions();                      options.AddExcludedArgument("disable-popup-blocking");                      driver = new EdgeDriver(options);             }                  [TestMethod]             public void LogsToFile()             {                 var service = EdgeDriverService.CreateDefaultService();                      service.LogPath = GetLogLocation();                      driver = new EdgeDriver(service);                 driver.Quit(); // Close the Service log file before reading                 var lines = File.ReadLines(GetLogLocation());                 Assert.IsNotNull(lines.FirstOrDefault(line => line.Contains("Starting Microsoft Edge WebDriver")));             }                  [TestMethod]             [Ignore("Not implemented")]             public void LogsToConsole()             {                 var stringWriter = new StringWriter();                 var originalOutput = Console.Out;                 Console.SetOut(stringWriter);                      var service = EdgeDriverService.CreateDefaultService();                      //service.LogToConsole = true;                      driver = new EdgeDriver(service);                      Assert.IsTrue(stringWriter.ToString().Contains("Starting Microsoft Edge WebDriver"));                 Console.SetOut(originalOutput);                 stringWriter.Dispose();             }                  [TestMethod]             [Ignore("Not implemented")]             public void LogsLevel()             {                 var service = EdgeDriverService.CreateDefaultService();                 service.LogPath = GetLogLocation();                      // service.LogLevel = ChromiumDriverLogLevel.Debug                       driver = new EdgeDriver(service);                      driver.Quit(); // Close the Service log file before reading                 var lines = File.ReadLines(GetLogLocation());                 Assert.IsNotNull(lines.FirstOrDefault(line => line.Contains("[DEBUG]:")));             }                  [TestMethod]             [Ignore("Not implemented")]             public void ConfigureDriverLogs()             {                 var service = EdgeDriverService.CreateDefaultService();                 service.LogPath = GetLogLocation();                 service.EnableVerboseLogging = true;                      service.EnableAppendLog = true;                 // service.readableTimeStamp = true;                      driver = new EdgeDriver(service);                      driver.Quit(); // Close the Service log file before reading                 var lines = File.ReadLines(GetLogLocation());                 var regex = new Regex(@"\[\d\d-\d\d-\d\d\d\d");                 Assert.IsNotNull(lines.FirstOrDefault(line => regex.Matches("").Count > 0));             }                  [TestMethod]             public void DisableBuildCheck()             {                 var service = EdgeDriverService.CreateDefaultService();                 service.LogPath = GetLogLocation();                 service.EnableVerboseLogging = true;                      service.DisableBuildCheck = true;                      driver = new EdgeDriver(service);                 driver.Quit(); // Close the Service log file before reading                 var expected = "[WARNING]: You are using an unsupported command-line switch: --disable-build-check";                 var lines = File.ReadLines(GetLogLocation());                 Assert.IsNotNull(lines.FirstOrDefault(line => line.Contains(expected)));             }                          private string GetLogLocation()             {                 if (_logLocation == null || !File.Exists(_logLocation))                 {                     _logLocation = Path.GetTempFileName();                 }                      return _logLocation;             }                  private static string GetEdgeLocation()             {                 var options = new EdgeOptions                 {                     BrowserVersion = "stable"                 };                 return new DriverFinder(options).GetBrowserPath();             }         }     }                     options.args << '--start-maximized'

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk//examples/ruby/spec/browsers/edge_spec.rb#L17)

##### /examples/ruby/spec/browsers/edge\_spec.rb

Copy  Close               # frozen_string_literal: true          require 'spec_helper'          RSpec.describe 'Edge' do       describe 'Options' do         let(:edge_location) { driver_finder && ENV.fetch('EDGE_BIN', nil) }              it 'basic options' do           options = Selenium::WebDriver::Options.edge           @driver = Selenium::WebDriver.for :edge, options: options         end              it 'add arguments' do           options = Selenium::WebDriver::Options.edge                options.args << '--start-maximized'                @driver = Selenium::WebDriver.for :edge, options: options         end              it 'sets location of binary' do           options = Selenium::WebDriver::Options.edge                options.binary = edge_location                @driver = Selenium::WebDriver.for :edge, options: options         end              it 'add extensions' do           extension_file_path = File.expand_path('../spec_support/extensions/webextensions-selenium-example.crx', __dir__)           options = Selenium::WebDriver::Options.edge                options.add_extension(extension_file_path)                @driver = Selenium::WebDriver.for :edge, options: options           @driver.get('https://www.selenium.dev/selenium/web/blank.html')           injected = @driver.find_element(:id, 'webextensions-selenium-example')           expect(injected.text).to eq 'Content injected by webextensions-selenium-example'         end              it 'keeps browser open' do           options = Selenium::WebDriver::Options.edge                options.detach = true                @driver = Selenium::WebDriver.for :edge, options: options         end              it 'excludes switches' do           options = Selenium::WebDriver::Options.edge                options.exclude_switches << 'disable-popup-blocking'                @driver = Selenium::WebDriver.for :edge, options: options         end       end            describe 'Service' do         let(:file_name) { File.expand_path('msedgedriver.log') }              after { FileUtils.rm_f(file_name) }              it 'logs to file' do           service = Selenium::WebDriver::Service.edge                service.log = file_name                @driver = Selenium::WebDriver.for :edge, service: service           expect(File.readlines(file_name).first).to include('Starting Microsoft Edge WebDriver')         end              it 'logs to console' do           service = Selenium::WebDriver::Service.edge                service.log = $stdout                expect {             @driver = Selenium::WebDriver.for :edge, service: service           }.to output(/Starting Microsoft Edge WebDriver/).to_stdout_from_any_process         end              it 'sets log level' do           service = Selenium::WebDriver::Service.edge           service.log = file_name                service.args << '--log-level=DEBUG'                @driver = Selenium::WebDriver.for :edge, service: service           expect(File.readlines(file_name).grep(/\[DEBUG\]:/).any?).to eq true         end              it 'sets log features' do           args = ["--log-path=#{file_name}", '--verbose']           service = Selenium::WebDriver::Service.edge(args: args)                service.args << '--append-log'           service.args << '--readable-timestamp'                @driver = Selenium::WebDriver.for :edge, service: service                expect(File.readlines(file_name).grep(/\[\d\d-\d\d-\d\d\d\d/).any?).to eq true         end              it 'disables build checks' do           service = Selenium::WebDriver::Service.edge log: file_name, args: ['--verbose']                service.args << '--disable-build-check'                @driver = Selenium::WebDriver.for :edge, service: service           warning = /\[WARNING\]: You are using an unsupported command-line switch: --disable-build-check/           expect(File.readlines(file_name).grep(warning).any?).to eq true         end       end            describe 'Special Features' do         it 'casts' do           @driver = Selenium::WebDriver.for :edge           sinks = @driver.cast_sinks           unless sinks.empty?             device_name = sinks.first['name']             @driver.start_cast_tab_mirroring(device_name)             expect { @driver.stop_casting(device_name) }.not_to raise_exception           end         end              it 'gets and sets network conditions' do           @driver = Selenium::WebDriver.for :edge           @driver.network_conditions = {offline: false, latency: 100, throughput: 200}           expect(@driver.network_conditions).to eq(             'offline' => false,             'latency' => 100,             'download_throughput' => 200,             'upload_throughput' => 200           )         end              it 'gets the browser logs' do           @driver = Selenium::WebDriver.for :edge           @driver.navigate.to 'https://www.selenium.dev/selenium/web/'           sleep 1           logs = @driver.logs.get(:browser)                expect(logs.first.message).to include 'Failed to load resource'         end              it 'sets permissions' do           @driver = Selenium::WebDriver.for :edge           @driver.navigate.to 'https://www.selenium.dev/selenium/web/'           @driver.add_permission('camera', 'denied')           @driver.add_permissions('clipboard-read' => 'denied', 'clipboard-write' => 'prompt')           expect(permission('camera')).to eq('denied')           expect(permission('clipboard-read')).to eq('denied')           expect(permission('clipboard-write')).to eq('prompt')         end       end            def driver_finder         options = Selenium::WebDriver::Options.edge(browser_version: 'stable')         service = Selenium::WebDriver::Service.edge         finder = Selenium::WebDriver::DriverFinder.new(options, service)         ENV['EDGEDRIVER_BIN'] = finder.driver_path         ENV['EDGE_BIN'] = finder.browser_path       end            def permission(name)         @driver.execute_async_script('callback = arguments[arguments.length - 1];' \                                      'callback(navigator.permissions.query({name: arguments[0]}));', name)['state']       end     end                          .setEdgeOptions(options.addArguments('--headless=new'))

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk//examples/javascript/test/browser/edgeSpecificCaps.spec.js#L12)

##### /examples/javascript/test/browser/edgeSpecificCaps.spec.js

Copy  Close               const {Browser, By, Builder } = require('selenium-webdriver');     const edge = require('selenium-webdriver/edge');     const options = new edge.Options();     const assert = require("assert");                    describe('Should be able to Test Command line arguments', function () {       it('headless', async function () {         let driver = new Builder()           .forBrowser(Browser.EDGE)           .setEdgeOptions(options.addArguments('--headless=new'))           .build();              await driver.get('https://www.selenium.dev/selenium/web/blank.html');         await driver.quit();       });            it('exclude switches', async function () {         let driver = new Builder()           .forBrowser(Browser.EDGE)           .setEdgeOptions(options.excludeSwitches('enable-automation'))           .build();              await driver.get('https://www.selenium.dev/selenium/web/blank.html');         await driver.quit();       });            it('Keep browser open - set detach to true ', async function () {         let driver = new Builder()           .forBrowser(Browser.EDGE)           .setEdgeOptions(options.detachDriver(true))           .build();              await driver.get('https://www.selenium.dev/selenium/web/blank.html');              // As tests runs in ci, quitting the driver instance to avoid any failures         await driver.quit();       });            it('Basic edge test', async function () {         const Options = new edge.Options();         let driver = new Builder()           .forBrowser(Browser.EDGE)           .setEdgeOptions(Options)           .build();              await driver.get('https://www.selenium.dev/selenium/web/blank.html');         await driver.quit();       });            it('Add Extension', async function () {         let driver = new Builder()           .forBrowser(Browser.EDGE)           .setEdgeOptions(options.addExtensions(['./test/resources/extensions/webextensions-selenium-example.crx']))           .build();              await driver.get('https://www.selenium.dev/selenium/web/blank.html');         let injected = await driver.findElement(By.id('webextensions-selenium-example'));         assert.equal(await injected.getText(), `Content injected by webextensions-selenium-example`)         await driver.quit();       });     });

[Add Example](https://www.selenium.dev/documentation/about/contributing/#creating-examples)

### Start browser in a specified location

The `binary` parameter takes the path of an alternate location of browser to use. With this parameter you can use chromedriver to drive various Chromium based browsers.

Add a browser location to options:

  * Java   * Python   * CSharp   * Ruby   * JavaScript   * Kotlin

                  options.setBinary(getEdgeLocation());

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk//examples/java/src/test/java/dev/selenium/browsers/EdgeTest.java#L55)

##### /examples/java/src/test/java/dev/selenium/browsers/EdgeTest.java

Copy  Close               package dev.selenium.browsers;          import dev.selenium.BaseTest;     import java.io.File;     import java.io.IOException;     import java.io.PrintStream;     import java.nio.file.Files;     import java.nio.file.Path;     import java.nio.file.Paths;     import java.util.List;     import java.util.Map;     import java.util.logging.Level;     import java.util.regex.Pattern;     import org.junit.jupiter.api.AfterEach;     import org.junit.jupiter.api.Assertions;     import org.junit.jupiter.api.Test;     import org.openqa.selenium.By;     import org.openqa.selenium.WebElement;     import org.openqa.selenium.chromium.ChromiumDriverLogLevel;     import org.openqa.selenium.chromium.ChromiumNetworkConditions;     import org.openqa.selenium.edge.EdgeDriver;     import org.openqa.selenium.edge.EdgeDriverService;     import org.openqa.selenium.edge.EdgeOptions;     import org.openqa.selenium.logging.*;     import org.openqa.selenium.remote.service.DriverFinder;                    public class EdgeTest extends BaseTest {       @AfterEach       public void clearProperties() {         System.clearProperty(EdgeDriverService.EDGE_DRIVER_LOG_PROPERTY);         System.clearProperty(EdgeDriverService.EDGE_DRIVER_LOG_LEVEL_PROPERTY);       }            @Test       public void basicOptions() {         EdgeOptions options = getDefaultEdgeOptions();         driver = new EdgeDriver(options);       }            @Test       public void arguments() {         EdgeOptions options = getDefaultEdgeOptions();              options.addArguments("--start-maximized");              driver = new EdgeDriver(options);       }            @Test       public void setBrowserLocation() {         EdgeOptions options = getDefaultEdgeOptions();              options.setBinary(getEdgeLocation());              driver = new EdgeDriver(options);       }            @Test       public void extensionOptions() {         EdgeOptions options = getDefaultEdgeOptions();         Path path = Paths.get("src/test/resources/extensions/webextensions-selenium-example.crx");         File extensionFilePath = new File(path.toUri());              options.addExtensions(extensionFilePath);              driver = new EdgeDriver(options);         driver.get("https://www.selenium.dev/selenium/web/blank.html");         WebElement injected = driver.findElement(By.id("webextensions-selenium-example"));         Assertions.assertEquals(             "Content injected by webextensions-selenium-example", injected.getText());       }            @Test       public void excludeSwitches() {         EdgeOptions options = getDefaultEdgeOptions();              options.setExperimentalOption("excludeSwitches", List.of("disable-popup-blocking"));              driver = new EdgeDriver(options);       }            @Test       public void loggingPreferences() {         EdgeOptions options = getDefaultEdgeOptions();         LoggingPreferences logPrefs = new LoggingPreferences();         logPrefs.enable(LogType.PERFORMANCE, Level.ALL);         options.setCapability(EdgeOptions.LOGGING_PREFS, logPrefs);              driver = new EdgeDriver(options);         driver.get("https://www.selenium.dev");              LogEntries logEntries = driver.manage().logs().get(LogType.PERFORMANCE);         Assertions.assertFalse(logEntries.getAll().isEmpty());       }            @Test       public void logsToFile() throws IOException {         File logLocation = getTempFile("logsToFile", ".log");         EdgeDriverService service = new EdgeDriverService.Builder().withLogFile(logLocation).build();              driver = new EdgeDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         Assertions.assertTrue(fileContent.contains("Starting Microsoft Edge WebDriver"));       }            @Test       public void logsToConsole() throws IOException {         File logLocation = getTempFile("logsToConsole", ".log");         System.setOut(new PrintStream(logLocation));              EdgeDriverService service = new EdgeDriverService.Builder().withLogOutput(System.out).build();              driver = new EdgeDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         Assertions.assertTrue(fileContent.contains("Starting Microsoft Edge WebDriver"));       }            @Test       public void logsWithLevel() throws IOException {         File logLocation = getTempFile("logsWithLevel", ".log");         System.setProperty(EdgeDriverService.EDGE_DRIVER_LOG_PROPERTY, logLocation.getAbsolutePath());              EdgeDriverService service =             new EdgeDriverService.Builder().withLoglevel(ChromiumDriverLogLevel.DEBUG).build();              driver = new EdgeDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         Assertions.assertTrue(fileContent.contains("[DEBUG]:"));       }            @Test       public void configureDriverLogs() throws IOException {         File logLocation = getTempFile("configureDriverLogs", ".log");         System.setProperty(EdgeDriverService.EDGE_DRIVER_LOG_PROPERTY, logLocation.getAbsolutePath());         System.setProperty(             EdgeDriverService.EDGE_DRIVER_LOG_LEVEL_PROPERTY, ChromiumDriverLogLevel.DEBUG.toString());              EdgeDriverService service =             new EdgeDriverService.Builder().withAppendLog(true).withReadableTimestamp(true).build();              driver = new EdgeDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         Pattern pattern = Pattern.compile("\\[\\d\\d-\\d\\d-\\d\\d\\d\\d", Pattern.CASE_INSENSITIVE);         Assertions.assertTrue(pattern.matcher(fileContent).find());       }            @Test       public void disableBuildChecks() throws IOException {         File logLocation = getTempFile("disableBuildChecks", ".log");         System.setProperty(EdgeDriverService.EDGE_DRIVER_LOG_PROPERTY, logLocation.getAbsolutePath());         System.setProperty(             EdgeDriverService.EDGE_DRIVER_LOG_LEVEL_PROPERTY,             ChromiumDriverLogLevel.WARNING.toString());              EdgeDriverService service =             new EdgeDriverService.Builder().withBuildCheckDisabled(true).build();              driver = new EdgeDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         String expected =             "[WARNING]: You are using an unsupported command-line switch: --disable-build-check";         Assertions.assertTrue(fileContent.contains(expected));       }            private File getEdgeLocation() {         EdgeOptions options = getDefaultEdgeOptions();         options.setBrowserVersion("stable");         DriverFinder finder = new DriverFinder(EdgeDriverService.createDefaultService(), options);         return new File(finder.getBrowserPath());       }            @Test       public void setPermissions() {         EdgeDriver driver = new EdgeDriver();         driver.get("https://www.selenium.dev");              driver.setPermission("camera", "denied");              // Verify the permission state is 'denied'         String script = "return navigator.permissions.query({ name: 'camera' })" +                 "    .then(permissionStatus => permissionStatus.state);";         String permissionState = (String) driver.executeScript(script);              Assertions.assertEquals("denied", permissionState);         driver.quit();       }            @Test       public void setNetworkConditions() {         driver = new EdgeDriver();              ChromiumNetworkConditions networkConditions = new ChromiumNetworkConditions();         networkConditions.setOffline(false);         networkConditions.setLatency(java.time.Duration.ofMillis(20)); // 20 ms of latency         networkConditions.setDownloadThroughput(2000 * 1024 / 8); // 2000 kbps         networkConditions.setUploadThroughput(2000 * 1024 / 8);   // 2000 kbps              ((EdgeDriver) driver).setNetworkConditions(networkConditions);              driver.get("https://www.selenium.dev");              // Assert the network conditions are set as expected         ChromiumNetworkConditions actualConditions = ((EdgeDriver) driver).getNetworkConditions();         Assertions.assertAll(                 () -> Assertions.assertEquals(networkConditions.getOffline(), actualConditions.getOffline()),                 () -> Assertions.assertEquals(networkConditions.getLatency(), actualConditions.getLatency()),                 () -> Assertions.assertEquals(networkConditions.getDownloadThroughput(), actualConditions.getDownloadThroughput()),                 () -> Assertions.assertEquals(networkConditions.getUploadThroughput(), actualConditions.getUploadThroughput())         );         ((EdgeDriver) driver).deleteNetworkConditions();         driver.quit();       }            @Test       public void castFeatures() {         EdgeDriver driver = new EdgeDriver();              List<Map<String, String>> sinks = driver.getCastSinks();         if (!sinks.isEmpty()) {           String sinkName = sinks.get(0).get("name");           driver.startTabMirroring(sinkName);           driver.stopCasting(sinkName);         }              driver.quit();       }            @Test       public void getBrowserLogs() {         EdgeDriver driver = new EdgeDriver();         driver.get("https://www.selenium.dev/selenium/web/bidi/logEntryAdded.html");         WebElement consoleLogButton = driver.findElement(By.id("consoleError"));         consoleLogButton.click();              LogEntries logs = driver.manage().logs().get(LogType.BROWSER);              // Assert that at least one log contains the expected message         boolean logFound = false;         for (LogEntry log : logs) {           if (log.getMessage().contains("I am console error")) {             logFound = true;             break;           }         }              Assertions.assertTrue(logFound, "No matching log message found.");         driver.quit();       }     }                        options.binary_location = edge_bin

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk//examples/python/tests/browsers/test_edge.py#L29)

##### /examples/python/tests/browsers/test\_edge.py

Copy  Close               import os     import re     import subprocess     import pytest     from selenium import webdriver     from selenium.webdriver.common.by import By          def test_basic_options():         options = get_default_edge_options()         driver = webdriver.Edge(options=options)              driver.quit()               def test_args():         options = get_default_edge_options()              options.add_argument("--start-maximized")              driver = webdriver.Edge(options=options)         driver.get('http://selenium.dev')              driver.quit()               def test_set_browser_location(edge_bin):         options = get_default_edge_options()              options.binary_location = edge_bin              driver = webdriver.Edge(options=options)              driver.quit()               def test_add_extension():         options = get_default_edge_options()         extension_file_path = os.path.abspath("tests/extensions/webextensions-selenium-example.crx")              options.add_extension(extension_file_path)              driver = webdriver.Edge(options=options)         driver.get("https://www.selenium.dev/selenium/web/blank.html")              driver.quit()               def test_keep_browser_open():         options = get_default_edge_options()              options.add_experimental_option("detach", True)              driver = webdriver.Edge(options=options)         driver.get('http://selenium.dev')              driver.quit()               def test_exclude_switches():         options = get_default_edge_options()              options.add_experimental_option('excludeSwitches', ['disable-popup-blocking'])              driver = webdriver.Edge(options=options)         driver.get('http://selenium.dev')              driver.quit()               def test_log_to_file(log_path):         service = webdriver.EdgeService(log_output=log_path)              driver = webdriver.Edge(service=service)              with open(log_path, 'r') as fp:             assert "Starting Microsoft Edge WebDriver" in fp.readline()              driver.quit()               def test_log_to_stdout(capfd):         service = webdriver.EdgeService(log_output=subprocess.STDOUT)              driver = webdriver.Edge(service=service)              out, err = capfd.readouterr()         assert "Starting Microsoft Edge WebDriver" in out              driver.quit()               def test_log_level(log_path):         service = webdriver.EdgeService(service_args=['--log-level=DEBUG'], log_output=log_path)              driver = webdriver.Edge(service=service)              with open(log_path, 'r') as f:             assert '[DEBUG]' in f.read()              driver.quit()               def test_log_features(log_path):         service = webdriver.EdgeService(service_args=['--append-log', '--readable-timestamp'], log_output=log_path)              driver = webdriver.Edge(service=service)              with open(log_path, 'r') as f:             assert re.match(r"\[\d\d-\d\d-\d\d\d\d", f.read())              driver.quit()               def test_build_checks(log_path):         service = webdriver.EdgeService(service_args=['--disable-build-check'], log_output=log_path)              driver = webdriver.Edge(service=service)              expected = "[WARNING]: You are using an unsupported command-line switch: --disable-build-check"         with open(log_path, 'r') as f:             assert expected in f.read()              driver.quit()               def test_set_network_conditions():         driver = webdriver.Edge()              network_conditions = {             "offline": False,             "latency": 20,  # 20 ms of latency             "download_throughput": 2000 * 1024 / 8,  # 2000 kbps             "upload_throughput": 2000 * 1024 / 8,    # 2000 kbps         }         driver.set_network_conditions(**network_conditions)              driver.get("https://www.selenium.dev")              # check whether the network conditions are set         assert driver.get_network_conditions() == network_conditions              driver.quit()               def test_set_permissions():         driver = webdriver.Edge()         driver.get('https://www.selenium.dev')              driver.set_permissions('camera', 'denied')              assert get_permission_state(driver, 'camera') == 'denied'         driver.quit()               def get_permission_state(driver, name):         """Helper function to query the permission state."""         script = """         const callback = arguments[arguments.length - 1];         navigator.permissions.query({name: arguments[0]}).then(permissionStatus => {             callback(permissionStatus.state);         });         """         return driver.execute_async_script(script, name)               def test_cast_features():         driver = webdriver.Edge()              try:             sinks = driver.get_sinks()             if sinks:                 sink_name = sinks[0]['name']                 driver.start_tab_mirroring(sink_name)                 driver.stop_casting(sink_name)             else:                 pytest.skip("No available Cast sinks to test with.")         finally:             driver.quit()               def test_get_browser_logs():         driver = webdriver.Edge()         driver.get("https://www.selenium.dev/selenium/web/bidi/logEntryAdded.html")         driver.find_element(By.ID, "consoleError").click()              logs = driver.get_log("browser")              # Assert that at least one log contains the expected message         assert any("I am console error" in log['message'] for log in logs), "No matching log message found."         driver.quit()          def get_default_edge_options():         options = webdriver.EdgeOptions()         options.add_argument("--no-sandbox")         return options                                options.BinaryLocation = GetEdgeLocation();

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk//examples/dotnet/SeleniumDocs/Browsers/EdgeTest.cs#L49)

##### /examples/dotnet/SeleniumDocs/Browsers/EdgeTest.cs

Copy  Close               using System;     using System.IO;     using System.Linq;     using System.Text.RegularExpressions;     using Microsoft.VisualStudio.TestTools.UnitTesting;     using OpenQA.Selenium;     using OpenQA.Selenium.Edge;          namespace SeleniumDocs.Browsers     {         [TestClass]         public class EdgeTest         {             private EdgeDriver driver;             private string _logLocation;                  [TestCleanup]             public void Cleanup()             {                 if (_logLocation != null && File.Exists(_logLocation))                 {                     File.Delete(_logLocation);                 }                 driver.Quit();             }                  [TestMethod]             public void BasicOptions()             {                 var options = new EdgeOptions();                 driver = new EdgeDriver(options);             }                  [TestMethod]             public void Arguments()             {                 var options = new EdgeOptions();                      options.AddArgument("--start-maximized");                          driver = new EdgeDriver(options);             }                  [TestMethod]             public void SetBrowserLocation()             {                 var options = new EdgeOptions();                      options.BinaryLocation = GetEdgeLocation();                          driver = new EdgeDriver(options);             }                  [TestMethod]             public void InstallExtension()             {                 var options = new EdgeOptions();                 var baseDir = AppDomain.CurrentDomain.BaseDirectory;                 var extensionFilePath = Path.Combine(baseDir, "../../../Extensions/webextensions-selenium-example.crx");                      options.AddExtension(extensionFilePath);                      driver = new EdgeDriver(options);                      driver.Url = "https://www.selenium.dev/selenium/web/blank.html";                      IWebElement injected = driver.FindElement(By.Id("webextensions-selenium-example"));                 Assert.AreEqual("Content injected by webextensions-selenium-example", injected.Text);             }                  [TestMethod]             public void ExcludeSwitch()             {                 var options = new EdgeOptions();                      options.AddExcludedArgument("disable-popup-blocking");                      driver = new EdgeDriver(options);             }                  [TestMethod]             public void LogsToFile()             {                 var service = EdgeDriverService.CreateDefaultService();                      service.LogPath = GetLogLocation();                      driver = new EdgeDriver(service);                 driver.Quit(); // Close the Service log file before reading                 var lines = File.ReadLines(GetLogLocation());                 Assert.IsNotNull(lines.FirstOrDefault(line => line.Contains("Starting Microsoft Edge WebDriver")));             }                  [TestMethod]             [Ignore("Not implemented")]             public void LogsToConsole()             {                 var stringWriter = new StringWriter();                 var originalOutput = Console.Out;                 Console.SetOut(stringWriter);                      var service = EdgeDriverService.CreateDefaultService();                      //service.LogToConsole = true;                      driver = new EdgeDriver(service);                      Assert.IsTrue(stringWriter.ToString().Contains("Starting Microsoft Edge WebDriver"));                 Console.SetOut(originalOutput);                 stringWriter.Dispose();             }                  [TestMethod]             [Ignore("Not implemented")]             public void LogsLevel()             {                 var service = EdgeDriverService.CreateDefaultService();                 service.LogPath = GetLogLocation();                      // service.LogLevel = ChromiumDriverLogLevel.Debug                       driver = new EdgeDriver(service);                      driver.Quit(); // Close the Service log file before reading                 var lines = File.ReadLines(GetLogLocation());                 Assert.IsNotNull(lines.FirstOrDefault(line => line.Contains("[DEBUG]:")));             }                  [TestMethod]             [Ignore("Not implemented")]             public void ConfigureDriverLogs()             {                 var service = EdgeDriverService.CreateDefaultService();                 service.LogPath = GetLogLocation();                 service.EnableVerboseLogging = true;                      service.EnableAppendLog = true;                 // service.readableTimeStamp = true;                      driver = new EdgeDriver(service);                      driver.Quit(); // Close the Service log file before reading                 var lines = File.ReadLines(GetLogLocation());                 var regex = new Regex(@"\[\d\d-\d\d-\d\d\d\d");                 Assert.IsNotNull(lines.FirstOrDefault(line => regex.Matches("").Count > 0));             }                  [TestMethod]             public void DisableBuildCheck()             {                 var service = EdgeDriverService.CreateDefaultService();                 service.LogPath = GetLogLocation();                 service.EnableVerboseLogging = true;                      service.DisableBuildCheck = true;                      driver = new EdgeDriver(service);                 driver.Quit(); // Close the Service log file before reading                 var expected = "[WARNING]: You are using an unsupported command-line switch: --disable-build-check";                 var lines = File.ReadLines(GetLogLocation());                 Assert.IsNotNull(lines.FirstOrDefault(line => line.Contains(expected)));             }                          private string GetLogLocation()             {                 if (_logLocation == null || !File.Exists(_logLocation))                 {                     _logLocation = Path.GetTempFileName();                 }                      return _logLocation;             }                  private static string GetEdgeLocation()             {                 var options = new EdgeOptions                 {                     BrowserVersion = "stable"                 };                 return new DriverFinder(options).GetBrowserPath();             }         }     }                     options.binary = edge_location

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk//examples/ruby/spec/browsers/edge_spec.rb#L25)

##### /examples/ruby/spec/browsers/edge\_spec.rb

Copy  Close               # frozen_string_literal: true          require 'spec_helper'          RSpec.describe 'Edge' do       describe 'Options' do         let(:edge_location) { driver_finder && ENV.fetch('EDGE_BIN', nil) }              it 'basic options' do           options = Selenium::WebDriver::Options.edge           @driver = Selenium::WebDriver.for :edge, options: options         end              it 'add arguments' do           options = Selenium::WebDriver::Options.edge                options.args << '--start-maximized'                @driver = Selenium::WebDriver.for :edge, options: options         end              it 'sets location of binary' do           options = Selenium::WebDriver::Options.edge                options.binary = edge_location                @driver = Selenium::WebDriver.for :edge, options: options         end              it 'add extensions' do           extension_file_path = File.expand_path('../spec_support/extensions/webextensions-selenium-example.crx', __dir__)           options = Selenium::WebDriver::Options.edge                options.add_extension(extension_file_path)                @driver = Selenium::WebDriver.for :edge, options: options           @driver.get('https://www.selenium.dev/selenium/web/blank.html')           injected = @driver.find_element(:id, 'webextensions-selenium-example')           expect(injected.text).to eq 'Content injected by webextensions-selenium-example'         end              it 'keeps browser open' do           options = Selenium::WebDriver::Options.edge                options.detach = true                @driver = Selenium::WebDriver.for :edge, options: options         end              it 'excludes switches' do           options = Selenium::WebDriver::Options.edge                options.exclude_switches << 'disable-popup-blocking'                @driver = Selenium::WebDriver.for :edge, options: options         end       end            describe 'Service' do         let(:file_name) { File.expand_path('msedgedriver.log') }              after { FileUtils.rm_f(file_name) }              it 'logs to file' do           service = Selenium::WebDriver::Service.edge                service.log = file_name                @driver = Selenium::WebDriver.for :edge, service: service           expect(File.readlines(file_name).first).to include('Starting Microsoft Edge WebDriver')         end              it 'logs to console' do           service = Selenium::WebDriver::Service.edge                service.log = $stdout                expect {             @driver = Selenium::WebDriver.for :edge, service: service           }.to output(/Starting Microsoft Edge WebDriver/).to_stdout_from_any_process         end              it 'sets log level' do           service = Selenium::WebDriver::Service.edge           service.log = file_name                service.args << '--log-level=DEBUG'                @driver = Selenium::WebDriver.for :edge, service: service           expect(File.readlines(file_name).grep(/\[DEBUG\]:/).any?).to eq true         end              it 'sets log features' do           args = ["--log-path=#{file_name}", '--verbose']           service = Selenium::WebDriver::Service.edge(args: args)                service.args << '--append-log'           service.args << '--readable-timestamp'                @driver = Selenium::WebDriver.for :edge, service: service                expect(File.readlines(file_name).grep(/\[\d\d-\d\d-\d\d\d\d/).any?).to eq true         end              it 'disables build checks' do           service = Selenium::WebDriver::Service.edge log: file_name, args: ['--verbose']                service.args << '--disable-build-check'                @driver = Selenium::WebDriver.for :edge, service: service           warning = /\[WARNING\]: You are using an unsupported command-line switch: --disable-build-check/           expect(File.readlines(file_name).grep(warning).any?).to eq true         end       end            describe 'Special Features' do         it 'casts' do           @driver = Selenium::WebDriver.for :edge           sinks = @driver.cast_sinks           unless sinks.empty?             device_name = sinks.first['name']             @driver.start_cast_tab_mirroring(device_name)             expect { @driver.stop_casting(device_name) }.not_to raise_exception           end         end              it 'gets and sets network conditions' do           @driver = Selenium::WebDriver.for :edge           @driver.network_conditions = {offline: false, latency: 100, throughput: 200}           expect(@driver.network_conditions).to eq(             'offline' => false,             'latency' => 100,             'download_throughput' => 200,             'upload_throughput' => 200           )         end              it 'gets the browser logs' do           @driver = Selenium::WebDriver.for :edge           @driver.navigate.to 'https://www.selenium.dev/selenium/web/'           sleep 1           logs = @driver.logs.get(:browser)                expect(logs.first.message).to include 'Failed to load resource'         end              it 'sets permissions' do           @driver = Selenium::WebDriver.for :edge           @driver.navigate.to 'https://www.selenium.dev/selenium/web/'           @driver.add_permission('camera', 'denied')           @driver.add_permissions('clipboard-read' => 'denied', 'clipboard-write' => 'prompt')           expect(permission('camera')).to eq('denied')           expect(permission('clipboard-read')).to eq('denied')           expect(permission('clipboard-write')).to eq('prompt')         end       end            def driver_finder         options = Selenium::WebDriver::Options.edge(browser_version: 'stable')         service = Selenium::WebDriver::Service.edge         finder = Selenium::WebDriver::DriverFinder.new(options, service)         ENV['EDGEDRIVER_BIN'] = finder.driver_path         ENV['EDGE_BIN'] = finder.browser_path       end            def permission(name)         @driver.execute_async_script('callback = arguments[arguments.length - 1];' \                                      'callback(navigator.permissions.query({name: arguments[0]}));', name)['state']       end     end     

[Add Example](https://www.selenium.dev/documentation/about/contributing/#creating-examples)

[Add Example](https://www.selenium.dev/documentation/about/contributing/#creating-examples)

### Add extensions

The `extensions` parameter accepts crx files. As for unpacked directories, please use the `load-extension` argument instead, as mentioned in [this post](https://chromedriver.chromium.org/extensions).

Add an extension to options:

  * Java   * Python   * CSharp   * Ruby   * JavaScript   * Kotlin

                  options.addExtensions(extensionFilePath);

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk//examples/java/src/test/java/dev/selenium/browsers/EdgeTest.java#L66)

##### /examples/java/src/test/java/dev/selenium/browsers/EdgeTest.java

Copy  Close               package dev.selenium.browsers;          import dev.selenium.BaseTest;     import java.io.File;     import java.io.IOException;     import java.io.PrintStream;     import java.nio.file.Files;     import java.nio.file.Path;     import java.nio.file.Paths;     import java.util.List;     import java.util.Map;     import java.util.logging.Level;     import java.util.regex.Pattern;     import org.junit.jupiter.api.AfterEach;     import org.junit.jupiter.api.Assertions;     import org.junit.jupiter.api.Test;     import org.openqa.selenium.By;     import org.openqa.selenium.WebElement;     import org.openqa.selenium.chromium.ChromiumDriverLogLevel;     import org.openqa.selenium.chromium.ChromiumNetworkConditions;     import org.openqa.selenium.edge.EdgeDriver;     import org.openqa.selenium.edge.EdgeDriverService;     import org.openqa.selenium.edge.EdgeOptions;     import org.openqa.selenium.logging.*;     import org.openqa.selenium.remote.service.DriverFinder;                    public class EdgeTest extends BaseTest {       @AfterEach       public void clearProperties() {         System.clearProperty(EdgeDriverService.EDGE_DRIVER_LOG_PROPERTY);         System.clearProperty(EdgeDriverService.EDGE_DRIVER_LOG_LEVEL_PROPERTY);       }            @Test       public void basicOptions() {         EdgeOptions options = getDefaultEdgeOptions();         driver = new EdgeDriver(options);       }            @Test       public void arguments() {         EdgeOptions options = getDefaultEdgeOptions();              options.addArguments("--start-maximized");              driver = new EdgeDriver(options);       }            @Test       public void setBrowserLocation() {         EdgeOptions options = getDefaultEdgeOptions();              options.setBinary(getEdgeLocation());              driver = new EdgeDriver(options);       }            @Test       public void extensionOptions() {         EdgeOptions options = getDefaultEdgeOptions();         Path path = Paths.get("src/test/resources/extensions/webextensions-selenium-example.crx");         File extensionFilePath = new File(path.toUri());              options.addExtensions(extensionFilePath);              driver = new EdgeDriver(options);         driver.get("https://www.selenium.dev/selenium/web/blank.html");         WebElement injected = driver.findElement(By.id("webextensions-selenium-example"));         Assertions.assertEquals(             "Content injected by webextensions-selenium-example", injected.getText());       }            @Test       public void excludeSwitches() {         EdgeOptions options = getDefaultEdgeOptions();              options.setExperimentalOption("excludeSwitches", List.of("disable-popup-blocking"));              driver = new EdgeDriver(options);       }            @Test       public void loggingPreferences() {         EdgeOptions options = getDefaultEdgeOptions();         LoggingPreferences logPrefs = new LoggingPreferences();         logPrefs.enable(LogType.PERFORMANCE, Level.ALL);         options.setCapability(EdgeOptions.LOGGING_PREFS, logPrefs);              driver = new EdgeDriver(options);         driver.get("https://www.selenium.dev");              LogEntries logEntries = driver.manage().logs().get(LogType.PERFORMANCE);         Assertions.assertFalse(logEntries.getAll().isEmpty());       }            @Test       public void logsToFile() throws IOException {         File logLocation = getTempFile("logsToFile", ".log");         EdgeDriverService service = new EdgeDriverService.Builder().withLogFile(logLocation).build();              driver = new EdgeDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         Assertions.assertTrue(fileContent.contains("Starting Microsoft Edge WebDriver"));       }            @Test       public void logsToConsole() throws IOException {         File logLocation = getTempFile("logsToConsole", ".log");         System.setOut(new PrintStream(logLocation));              EdgeDriverService service = new EdgeDriverService.Builder().withLogOutput(System.out).build();              driver = new EdgeDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         Assertions.assertTrue(fileContent.contains("Starting Microsoft Edge WebDriver"));       }            @Test       public void logsWithLevel() throws IOException {         File logLocation = getTempFile("logsWithLevel", ".log");         System.setProperty(EdgeDriverService.EDGE_DRIVER_LOG_PROPERTY, logLocation.getAbsolutePath());              EdgeDriverService service =             new EdgeDriverService.Builder().withLoglevel(ChromiumDriverLogLevel.DEBUG).build();              driver = new EdgeDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         Assertions.assertTrue(fileContent.contains("[DEBUG]:"));       }            @Test       public void configureDriverLogs() throws IOException {         File logLocation = getTempFile("configureDriverLogs", ".log");         System.setProperty(EdgeDriverService.EDGE_DRIVER_LOG_PROPERTY, logLocation.getAbsolutePath());         System.setProperty(             EdgeDriverService.EDGE_DRIVER_LOG_LEVEL_PROPERTY, ChromiumDriverLogLevel.DEBUG.toString());              EdgeDriverService service =             new EdgeDriverService.Builder().withAppendLog(true).withReadableTimestamp(true).build();              driver = new EdgeDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         Pattern pattern = Pattern.compile("\\[\\d\\d-\\d\\d-\\d\\d\\d\\d", Pattern.CASE_INSENSITIVE);         Assertions.assertTrue(pattern.matcher(fileContent).find());       }            @Test       public void disableBuildChecks() throws IOException {         File logLocation = getTempFile("disableBuildChecks", ".log");         System.setProperty(EdgeDriverService.EDGE_DRIVER_LOG_PROPERTY, logLocation.getAbsolutePath());         System.setProperty(             EdgeDriverService.EDGE_DRIVER_LOG_LEVEL_PROPERTY,             ChromiumDriverLogLevel.WARNING.toString());              EdgeDriverService service =             new EdgeDriverService.Builder().withBuildCheckDisabled(true).build();              driver = new EdgeDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         String expected =             "[WARNING]: You are using an unsupported command-line switch: --disable-build-check";         Assertions.assertTrue(fileContent.contains(expected));       }            private File getEdgeLocation() {         EdgeOptions options = getDefaultEdgeOptions();         options.setBrowserVersion("stable");         DriverFinder finder = new DriverFinder(EdgeDriverService.createDefaultService(), options);         return new File(finder.getBrowserPath());       }            @Test       public void setPermissions() {         EdgeDriver driver = new EdgeDriver();         driver.get("https://www.selenium.dev");              driver.setPermission("camera", "denied");              // Verify the permission state is 'denied'         String script = "return navigator.permissions.query({ name: 'camera' })" +                 "    .then(permissionStatus => permissionStatus.state);";         String permissionState = (String) driver.executeScript(script);              Assertions.assertEquals("denied", permissionState);         driver.quit();       }            @Test       public void setNetworkConditions() {         driver = new EdgeDriver();              ChromiumNetworkConditions networkConditions = new ChromiumNetworkConditions();         networkConditions.setOffline(false);         networkConditions.setLatency(java.time.Duration.ofMillis(20)); // 20 ms of latency         networkConditions.setDownloadThroughput(2000 * 1024 / 8); // 2000 kbps         networkConditions.setUploadThroughput(2000 * 1024 / 8);   // 2000 kbps              ((EdgeDriver) driver).setNetworkConditions(networkConditions);              driver.get("https://www.selenium.dev");              // Assert the network conditions are set as expected         ChromiumNetworkConditions actualConditions = ((EdgeDriver) driver).getNetworkConditions();         Assertions.assertAll(                 () -> Assertions.assertEquals(networkConditions.getOffline(), actualConditions.getOffline()),                 () -> Assertions.assertEquals(networkConditions.getLatency(), actualConditions.getLatency()),                 () -> Assertions.assertEquals(networkConditions.getDownloadThroughput(), actualConditions.getDownloadThroughput()),                 () -> Assertions.assertEquals(networkConditions.getUploadThroughput(), actualConditions.getUploadThroughput())         );         ((EdgeDriver) driver).deleteNetworkConditions();         driver.quit();       }            @Test       public void castFeatures() {         EdgeDriver driver = new EdgeDriver();              List<Map<String, String>> sinks = driver.getCastSinks();         if (!sinks.isEmpty()) {           String sinkName = sinks.get(0).get("name");           driver.startTabMirroring(sinkName);           driver.stopCasting(sinkName);         }              driver.quit();       }            @Test       public void getBrowserLogs() {         EdgeDriver driver = new EdgeDriver();         driver.get("https://www.selenium.dev/selenium/web/bidi/logEntryAdded.html");         WebElement consoleLogButton = driver.findElement(By.id("consoleError"));         consoleLogButton.click();              LogEntries logs = driver.manage().logs().get(LogType.BROWSER);              // Assert that at least one log contains the expected message         boolean logFound = false;         for (LogEntry log : logs) {           if (log.getMessage().contains("I am console error")) {             logFound = true;             break;           }         }              Assertions.assertTrue(logFound, "No matching log message found.");         driver.quit();       }     }                        options.add_extension(extension_file_path)

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk//examples/python/tests/browsers/test_edge.py#L40)

##### /examples/python/tests/browsers/test\_edge.py

Copy  Close               import os     import re     import subprocess     import pytest     from selenium import webdriver     from selenium.webdriver.common.by import By          def test_basic_options():         options = get_default_edge_options()         driver = webdriver.Edge(options=options)              driver.quit()               def test_args():         options = get_default_edge_options()              options.add_argument("--start-maximized")              driver = webdriver.Edge(options=options)         driver.get('http://selenium.dev')              driver.quit()               def test_set_browser_location(edge_bin):         options = get_default_edge_options()              options.binary_location = edge_bin              driver = webdriver.Edge(options=options)              driver.quit()               def test_add_extension():         options = get_default_edge_options()         extension_file_path = os.path.abspath("tests/extensions/webextensions-selenium-example.crx")              options.add_extension(extension_file_path)              driver = webdriver.Edge(options=options)         driver.get("https://www.selenium.dev/selenium/web/blank.html")              driver.quit()               def test_keep_browser_open():         options = get_default_edge_options()              options.add_experimental_option("detach", True)              driver = webdriver.Edge(options=options)         driver.get('http://selenium.dev')              driver.quit()               def test_exclude_switches():         options = get_default_edge_options()              options.add_experimental_option('excludeSwitches', ['disable-popup-blocking'])              driver = webdriver.Edge(options=options)         driver.get('http://selenium.dev')              driver.quit()               def test_log_to_file(log_path):         service = webdriver.EdgeService(log_output=log_path)              driver = webdriver.Edge(service=service)              with open(log_path, 'r') as fp:             assert "Starting Microsoft Edge WebDriver" in fp.readline()              driver.quit()               def test_log_to_stdout(capfd):         service = webdriver.EdgeService(log_output=subprocess.STDOUT)              driver = webdriver.Edge(service=service)              out, err = capfd.readouterr()         assert "Starting Microsoft Edge WebDriver" in out              driver.quit()               def test_log_level(log_path):         service = webdriver.EdgeService(service_args=['--log-level=DEBUG'], log_output=log_path)              driver = webdriver.Edge(service=service)              with open(log_path, 'r') as f:             assert '[DEBUG]' in f.read()              driver.quit()               def test_log_features(log_path):         service = webdriver.EdgeService(service_args=['--append-log', '--readable-timestamp'], log_output=log_path)              driver = webdriver.Edge(service=service)              with open(log_path, 'r') as f:             assert re.match(r"\[\d\d-\d\d-\d\d\d\d", f.read())              driver.quit()               def test_build_checks(log_path):         service = webdriver.EdgeService(service_args=['--disable-build-check'], log_output=log_path)              driver = webdriver.Edge(service=service)              expected = "[WARNING]: You are using an unsupported command-line switch: --disable-build-check"         with open(log_path, 'r') as f:             assert expected in f.read()              driver.quit()               def test_set_network_conditions():         driver = webdriver.Edge()              network_conditions = {             "offline": False,             "latency": 20,  # 20 ms of latency             "download_throughput": 2000 * 1024 / 8,  # 2000 kbps             "upload_throughput": 2000 * 1024 / 8,    # 2000 kbps         }         driver.set_network_conditions(**network_conditions)              driver.get("https://www.selenium.dev")              # check whether the network conditions are set         assert driver.get_network_conditions() == network_conditions              driver.quit()               def test_set_permissions():         driver = webdriver.Edge()         driver.get('https://www.selenium.dev')              driver.set_permissions('camera', 'denied')              assert get_permission_state(driver, 'camera') == 'denied'         driver.quit()               def get_permission_state(driver, name):         """Helper function to query the permission state."""         script = """         const callback = arguments[arguments.length - 1];         navigator.permissions.query({name: arguments[0]}).then(permissionStatus => {             callback(permissionStatus.state);         });         """         return driver.execute_async_script(script, name)               def test_cast_features():         driver = webdriver.Edge()              try:             sinks = driver.get_sinks()             if sinks:                 sink_name = sinks[0]['name']                 driver.start_tab_mirroring(sink_name)                 driver.stop_casting(sink_name)             else:                 pytest.skip("No available Cast sinks to test with.")         finally:             driver.quit()               def test_get_browser_logs():         driver = webdriver.Edge()         driver.get("https://www.selenium.dev/selenium/web/bidi/logEntryAdded.html")         driver.find_element(By.ID, "consoleError").click()              logs = driver.get_log("browser")              # Assert that at least one log contains the expected message         assert any("I am console error" in log['message'] for log in logs), "No matching log message found."         driver.quit()          def get_default_edge_options():         options = webdriver.EdgeOptions()         options.add_argument("--no-sandbox")         return options                                options.AddExtension(extensionFilePath);

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk//examples/dotnet/SeleniumDocs/Browsers/EdgeTest.cs#L61)

##### /examples/dotnet/SeleniumDocs/Browsers/EdgeTest.cs

Copy  Close               using System;     using System.IO;     using System.Linq;     using System.Text.RegularExpressions;     using Microsoft.VisualStudio.TestTools.UnitTesting;     using OpenQA.Selenium;     using OpenQA.Selenium.Edge;          namespace SeleniumDocs.Browsers     {         [TestClass]         public class EdgeTest         {             private EdgeDriver driver;             private string _logLocation;                  [TestCleanup]             public void Cleanup()             {                 if (_logLocation != null && File.Exists(_logLocation))                 {                     File.Delete(_logLocation);                 }                 driver.Quit();             }                  [TestMethod]             public void BasicOptions()             {                 var options = new EdgeOptions();                 driver = new EdgeDriver(options);             }                  [TestMethod]             public void Arguments()             {                 var options = new EdgeOptions();                      options.AddArgument("--start-maximized");                          driver = new EdgeDriver(options);             }                  [TestMethod]             public void SetBrowserLocation()             {                 var options = new EdgeOptions();                      options.BinaryLocation = GetEdgeLocation();                          driver = new EdgeDriver(options);             }                  [TestMethod]             public void InstallExtension()             {                 var options = new EdgeOptions();                 var baseDir = AppDomain.CurrentDomain.BaseDirectory;                 var extensionFilePath = Path.Combine(baseDir, "../../../Extensions/webextensions-selenium-example.crx");                      options.AddExtension(extensionFilePath);                      driver = new EdgeDriver(options);                      driver.Url = "https://www.selenium.dev/selenium/web/blank.html";                      IWebElement injected = driver.FindElement(By.Id("webextensions-selenium-example"));                 Assert.AreEqual("Content injected by webextensions-selenium-example", injected.Text);             }                  [TestMethod]             public void ExcludeSwitch()             {                 var options = new EdgeOptions();                      options.AddExcludedArgument("disable-popup-blocking");                      driver = new EdgeDriver(options);             }                  [TestMethod]             public void LogsToFile()             {                 var service = EdgeDriverService.CreateDefaultService();                      service.LogPath = GetLogLocation();                      driver = new EdgeDriver(service);                 driver.Quit(); // Close the Service log file before reading                 var lines = File.ReadLines(GetLogLocation());                 Assert.IsNotNull(lines.FirstOrDefault(line => line.Contains("Starting Microsoft Edge WebDriver")));             }                  [TestMethod]             [Ignore("Not implemented")]             public void LogsToConsole()             {                 var stringWriter = new StringWriter();                 var originalOutput = Console.Out;                 Console.SetOut(stringWriter);                      var service = EdgeDriverService.CreateDefaultService();                      //service.LogToConsole = true;                      driver = new EdgeDriver(service);                      Assert.IsTrue(stringWriter.ToString().Contains("Starting Microsoft Edge WebDriver"));                 Console.SetOut(originalOutput);                 stringWriter.Dispose();             }                  [TestMethod]             [Ignore("Not implemented")]             public void LogsLevel()             {                 var service = EdgeDriverService.CreateDefaultService();                 service.LogPath = GetLogLocation();                      // service.LogLevel = ChromiumDriverLogLevel.Debug                       driver = new EdgeDriver(service);                      driver.Quit(); // Close the Service log file before reading                 var lines = File.ReadLines(GetLogLocation());                 Assert.IsNotNull(lines.FirstOrDefault(line => line.Contains("[DEBUG]:")));             }                  [TestMethod]             [Ignore("Not implemented")]             public void ConfigureDriverLogs()             {                 var service = EdgeDriverService.CreateDefaultService();                 service.LogPath = GetLogLocation();                 service.EnableVerboseLogging = true;                      service.EnableAppendLog = true;                 // service.readableTimeStamp = true;                      driver = new EdgeDriver(service);                      driver.Quit(); // Close the Service log file before reading                 var lines = File.ReadLines(GetLogLocation());                 var regex = new Regex(@"\[\d\d-\d\d-\d\d\d\d");                 Assert.IsNotNull(lines.FirstOrDefault(line => regex.Matches("").Count > 0));             }                  [TestMethod]             public void DisableBuildCheck()             {                 var service = EdgeDriverService.CreateDefaultService();                 service.LogPath = GetLogLocation();                 service.EnableVerboseLogging = true;                      service.DisableBuildCheck = true;                      driver = new EdgeDriver(service);                 driver.Quit(); // Close the Service log file before reading                 var expected = "[WARNING]: You are using an unsupported command-line switch: --disable-build-check";                 var lines = File.ReadLines(GetLogLocation());                 Assert.IsNotNull(lines.FirstOrDefault(line => line.Contains(expected)));             }                          private string GetLogLocation()             {                 if (_logLocation == null || !File.Exists(_logLocation))                 {                     _logLocation = Path.GetTempFileName();                 }                      return _logLocation;             }                  private static string GetEdgeLocation()             {                 var options = new EdgeOptions                 {                     BrowserVersion = "stable"                 };                 return new DriverFinder(options).GetBrowserPath();             }         }     }                     options.add_extension(extension_file_path)

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk//examples/ruby/spec/browsers/edge_spec.rb#L34)

##### /examples/ruby/spec/browsers/edge\_spec.rb

Copy  Close               # frozen_string_literal: true          require 'spec_helper'          RSpec.describe 'Edge' do       describe 'Options' do         let(:edge_location) { driver_finder && ENV.fetch('EDGE_BIN', nil) }              it 'basic options' do           options = Selenium::WebDriver::Options.edge           @driver = Selenium::WebDriver.for :edge, options: options         end              it 'add arguments' do           options = Selenium::WebDriver::Options.edge                options.args << '--start-maximized'                @driver = Selenium::WebDriver.for :edge, options: options         end              it 'sets location of binary' do           options = Selenium::WebDriver::Options.edge                options.binary = edge_location                @driver = Selenium::WebDriver.for :edge, options: options         end              it 'add extensions' do           extension_file_path = File.expand_path('../spec_support/extensions/webextensions-selenium-example.crx', __dir__)           options = Selenium::WebDriver::Options.edge                options.add_extension(extension_file_path)                @driver = Selenium::WebDriver.for :edge, options: options           @driver.get('https://www.selenium.dev/selenium/web/blank.html')           injected = @driver.find_element(:id, 'webextensions-selenium-example')           expect(injected.text).to eq 'Content injected by webextensions-selenium-example'         end              it 'keeps browser open' do           options = Selenium::WebDriver::Options.edge                options.detach = true                @driver = Selenium::WebDriver.for :edge, options: options         end              it 'excludes switches' do           options = Selenium::WebDriver::Options.edge                options.exclude_switches << 'disable-popup-blocking'                @driver = Selenium::WebDriver.for :edge, options: options         end       end            describe 'Service' do         let(:file_name) { File.expand_path('msedgedriver.log') }              after { FileUtils.rm_f(file_name) }              it 'logs to file' do           service = Selenium::WebDriver::Service.edge                service.log = file_name                @driver = Selenium::WebDriver.for :edge, service: service           expect(File.readlines(file_name).first).to include('Starting Microsoft Edge WebDriver')         end              it 'logs to console' do           service = Selenium::WebDriver::Service.edge                service.log = $stdout                expect {             @driver = Selenium::WebDriver.for :edge, service: service           }.to output(/Starting Microsoft Edge WebDriver/).to_stdout_from_any_process         end              it 'sets log level' do           service = Selenium::WebDriver::Service.edge           service.log = file_name                service.args << '--log-level=DEBUG'                @driver = Selenium::WebDriver.for :edge, service: service           expect(File.readlines(file_name).grep(/\[DEBUG\]:/).any?).to eq true         end              it 'sets log features' do           args = ["--log-path=#{file_name}", '--verbose']           service = Selenium::WebDriver::Service.edge(args: args)                service.args << '--append-log'           service.args << '--readable-timestamp'                @driver = Selenium::WebDriver.for :edge, service: service                expect(File.readlines(file_name).grep(/\[\d\d-\d\d-\d\d\d\d/).any?).to eq true         end              it 'disables build checks' do           service = Selenium::WebDriver::Service.edge log: file_name, args: ['--verbose']                service.args << '--disable-build-check'                @driver = Selenium::WebDriver.for :edge, service: service           warning = /\[WARNING\]: You are using an unsupported command-line switch: --disable-build-check/           expect(File.readlines(file_name).grep(warning).any?).to eq true         end       end            describe 'Special Features' do         it 'casts' do           @driver = Selenium::WebDriver.for :edge           sinks = @driver.cast_sinks           unless sinks.empty?             device_name = sinks.first['name']             @driver.start_cast_tab_mirroring(device_name)             expect { @driver.stop_casting(device_name) }.not_to raise_exception           end         end              it 'gets and sets network conditions' do           @driver = Selenium::WebDriver.for :edge           @driver.network_conditions = {offline: false, latency: 100, throughput: 200}           expect(@driver.network_conditions).to eq(             'offline' => false,             'latency' => 100,             'download_throughput' => 200,             'upload_throughput' => 200           )         end              it 'gets the browser logs' do           @driver = Selenium::WebDriver.for :edge           @driver.navigate.to 'https://www.selenium.dev/selenium/web/'           sleep 1           logs = @driver.logs.get(:browser)                expect(logs.first.message).to include 'Failed to load resource'         end              it 'sets permissions' do           @driver = Selenium::WebDriver.for :edge           @driver.navigate.to 'https://www.selenium.dev/selenium/web/'           @driver.add_permission('camera', 'denied')           @driver.add_permissions('clipboard-read' => 'denied', 'clipboard-write' => 'prompt')           expect(permission('camera')).to eq('denied')           expect(permission('clipboard-read')).to eq('denied')           expect(permission('clipboard-write')).to eq('prompt')         end       end            def driver_finder         options = Selenium::WebDriver::Options.edge(browser_version: 'stable')         service = Selenium::WebDriver::Service.edge         finder = Selenium::WebDriver::DriverFinder.new(options, service)         ENV['EDGEDRIVER_BIN'] = finder.driver_path         ENV['EDGE_BIN'] = finder.browser_path       end            def permission(name)         @driver.execute_async_script('callback = arguments[arguments.length - 1];' \                                      'callback(navigator.permissions.query({name: arguments[0]}));', name)['state']       end     end                          .setEdgeOptions(options.addExtensions(['./test/resources/extensions/webextensions-selenium-example.crx']))

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk//examples/javascript/test/browser/edgeSpecificCaps.spec.js#L55)

##### /examples/javascript/test/browser/edgeSpecificCaps.spec.js

Copy  Close               const {Browser, By, Builder } = require('selenium-webdriver');     const edge = require('selenium-webdriver/edge');     const options = new edge.Options();     const assert = require("assert");                    describe('Should be able to Test Command line arguments', function () {       it('headless', async function () {         let driver = new Builder()           .forBrowser(Browser.EDGE)           .setEdgeOptions(options.addArguments('--headless=new'))           .build();              await driver.get('https://www.selenium.dev/selenium/web/blank.html');         await driver.quit();       });            it('exclude switches', async function () {         let driver = new Builder()           .forBrowser(Browser.EDGE)           .setEdgeOptions(options.excludeSwitches('enable-automation'))           .build();              await driver.get('https://www.selenium.dev/selenium/web/blank.html');         await driver.quit();       });            it('Keep browser open - set detach to true ', async function () {         let driver = new Builder()           .forBrowser(Browser.EDGE)           .setEdgeOptions(options.detachDriver(true))           .build();              await driver.get('https://www.selenium.dev/selenium/web/blank.html');              // As tests runs in ci, quitting the driver instance to avoid any failures         await driver.quit();       });            it('Basic edge test', async function () {         const Options = new edge.Options();         let driver = new Builder()           .forBrowser(Browser.EDGE)           .setEdgeOptions(Options)           .build();              await driver.get('https://www.selenium.dev/selenium/web/blank.html');         await driver.quit();       });            it('Add Extension', async function () {         let driver = new Builder()           .forBrowser(Browser.EDGE)           .setEdgeOptions(options.addExtensions(['./test/resources/extensions/webextensions-selenium-example.crx']))           .build();              await driver.get('https://www.selenium.dev/selenium/web/blank.html');         let injected = await driver.findElement(By.id('webextensions-selenium-example'));         assert.equal(await injected.getText(), `Content injected by webextensions-selenium-example`)         await driver.quit();       });     });

[Add Example](https://www.selenium.dev/documentation/about/contributing/#creating-examples)

### Keeping browser open

Setting the `detach` parameter to true will keep the browser open after the process has ended, so long as the quit command is not sent to the driver.

  * Java   * Python   * CSharp   * Ruby   * JavaScript   * Kotlin

**Note** : This is already the default behavior in Java.                   options.add_experimental_option("detach", True)

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk//examples/python/tests/browsers/test_edge.py#L51)

##### /examples/python/tests/browsers/test\_edge.py

Copy  Close               import os     import re     import subprocess     import pytest     from selenium import webdriver     from selenium.webdriver.common.by import By          def test_basic_options():         options = get_default_edge_options()         driver = webdriver.Edge(options=options)              driver.quit()               def test_args():         options = get_default_edge_options()              options.add_argument("--start-maximized")              driver = webdriver.Edge(options=options)         driver.get('http://selenium.dev')              driver.quit()               def test_set_browser_location(edge_bin):         options = get_default_edge_options()              options.binary_location = edge_bin              driver = webdriver.Edge(options=options)              driver.quit()               def test_add_extension():         options = get_default_edge_options()         extension_file_path = os.path.abspath("tests/extensions/webextensions-selenium-example.crx")              options.add_extension(extension_file_path)              driver = webdriver.Edge(options=options)         driver.get("https://www.selenium.dev/selenium/web/blank.html")              driver.quit()               def test_keep_browser_open():         options = get_default_edge_options()              options.add_experimental_option("detach", True)              driver = webdriver.Edge(options=options)         driver.get('http://selenium.dev')              driver.quit()               def test_exclude_switches():         options = get_default_edge_options()              options.add_experimental_option('excludeSwitches', ['disable-popup-blocking'])              driver = webdriver.Edge(options=options)         driver.get('http://selenium.dev')              driver.quit()               def test_log_to_file(log_path):         service = webdriver.EdgeService(log_output=log_path)              driver = webdriver.Edge(service=service)              with open(log_path, 'r') as fp:             assert "Starting Microsoft Edge WebDriver" in fp.readline()              driver.quit()               def test_log_to_stdout(capfd):         service = webdriver.EdgeService(log_output=subprocess.STDOUT)              driver = webdriver.Edge(service=service)              out, err = capfd.readouterr()         assert "Starting Microsoft Edge WebDriver" in out              driver.quit()               def test_log_level(log_path):         service = webdriver.EdgeService(service_args=['--log-level=DEBUG'], log_output=log_path)              driver = webdriver.Edge(service=service)              with open(log_path, 'r') as f:             assert '[DEBUG]' in f.read()              driver.quit()               def test_log_features(log_path):         service = webdriver.EdgeService(service_args=['--append-log', '--readable-timestamp'], log_output=log_path)              driver = webdriver.Edge(service=service)              with open(log_path, 'r') as f:             assert re.match(r"\[\d\d-\d\d-\d\d\d\d", f.read())              driver.quit()               def test_build_checks(log_path):         service = webdriver.EdgeService(service_args=['--disable-build-check'], log_output=log_path)              driver = webdriver.Edge(service=service)              expected = "[WARNING]: You are using an unsupported command-line switch: --disable-build-check"         with open(log_path, 'r') as f:             assert expected in f.read()              driver.quit()               def test_set_network_conditions():         driver = webdriver.Edge()              network_conditions = {             "offline": False,             "latency": 20,  # 20 ms of latency             "download_throughput": 2000 * 1024 / 8,  # 2000 kbps             "upload_throughput": 2000 * 1024 / 8,    # 2000 kbps         }         driver.set_network_conditions(**network_conditions)              driver.get("https://www.selenium.dev")              # check whether the network conditions are set         assert driver.get_network_conditions() == network_conditions              driver.quit()               def test_set_permissions():         driver = webdriver.Edge()         driver.get('https://www.selenium.dev')              driver.set_permissions('camera', 'denied')              assert get_permission_state(driver, 'camera') == 'denied'         driver.quit()               def get_permission_state(driver, name):         """Helper function to query the permission state."""         script = """         const callback = arguments[arguments.length - 1];         navigator.permissions.query({name: arguments[0]}).then(permissionStatus => {             callback(permissionStatus.state);         });         """         return driver.execute_async_script(script, name)               def test_cast_features():         driver = webdriver.Edge()              try:             sinks = driver.get_sinks()             if sinks:                 sink_name = sinks[0]['name']                 driver.start_tab_mirroring(sink_name)                 driver.stop_casting(sink_name)             else:                 pytest.skip("No available Cast sinks to test with.")         finally:             driver.quit()               def test_get_browser_logs():         driver = webdriver.Edge()         driver.get("https://www.selenium.dev/selenium/web/bidi/logEntryAdded.html")         driver.find_element(By.ID, "consoleError").click()              logs = driver.get_log("browser")              # Assert that at least one log contains the expected message         assert any("I am console error" in log['message'] for log in logs), "No matching log message found."         driver.quit()          def get_default_edge_options():         options = webdriver.EdgeOptions()         options.add_argument("--no-sandbox")         return options     

**Note** : This is already the default behavior in .NET.                     options.detach = true

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk//examples/ruby/spec/browsers/edge_spec.rb#L45)

##### /examples/ruby/spec/browsers/edge\_spec.rb

Copy  Close               # frozen_string_literal: true          require 'spec_helper'          RSpec.describe 'Edge' do       describe 'Options' do         let(:edge_location) { driver_finder && ENV.fetch('EDGE_BIN', nil) }              it 'basic options' do           options = Selenium::WebDriver::Options.edge           @driver = Selenium::WebDriver.for :edge, options: options         end              it 'add arguments' do           options = Selenium::WebDriver::Options.edge                options.args << '--start-maximized'                @driver = Selenium::WebDriver.for :edge, options: options         end              it 'sets location of binary' do           options = Selenium::WebDriver::Options.edge                options.binary = edge_location                @driver = Selenium::WebDriver.for :edge, options: options         end              it 'add extensions' do           extension_file_path = File.expand_path('../spec_support/extensions/webextensions-selenium-example.crx', __dir__)           options = Selenium::WebDriver::Options.edge                options.add_extension(extension_file_path)                @driver = Selenium::WebDriver.for :edge, options: options           @driver.get('https://www.selenium.dev/selenium/web/blank.html')           injected = @driver.find_element(:id, 'webextensions-selenium-example')           expect(injected.text).to eq 'Content injected by webextensions-selenium-example'         end              it 'keeps browser open' do           options = Selenium::WebDriver::Options.edge                options.detach = true                @driver = Selenium::WebDriver.for :edge, options: options         end              it 'excludes switches' do           options = Selenium::WebDriver::Options.edge                options.exclude_switches << 'disable-popup-blocking'                @driver = Selenium::WebDriver.for :edge, options: options         end       end            describe 'Service' do         let(:file_name) { File.expand_path('msedgedriver.log') }              after { FileUtils.rm_f(file_name) }              it 'logs to file' do           service = Selenium::WebDriver::Service.edge                service.log = file_name                @driver = Selenium::WebDriver.for :edge, service: service           expect(File.readlines(file_name).first).to include('Starting Microsoft Edge WebDriver')         end              it 'logs to console' do           service = Selenium::WebDriver::Service.edge                service.log = $stdout                expect {             @driver = Selenium::WebDriver.for :edge, service: service           }.to output(/Starting Microsoft Edge WebDriver/).to_stdout_from_any_process         end              it 'sets log level' do           service = Selenium::WebDriver::Service.edge           service.log = file_name                service.args << '--log-level=DEBUG'                @driver = Selenium::WebDriver.for :edge, service: service           expect(File.readlines(file_name).grep(/\[DEBUG\]:/).any?).to eq true         end              it 'sets log features' do           args = ["--log-path=#{file_name}", '--verbose']           service = Selenium::WebDriver::Service.edge(args: args)                service.args << '--append-log'           service.args << '--readable-timestamp'                @driver = Selenium::WebDriver.for :edge, service: service                expect(File.readlines(file_name).grep(/\[\d\d-\d\d-\d\d\d\d/).any?).to eq true         end              it 'disables build checks' do           service = Selenium::WebDriver::Service.edge log: file_name, args: ['--verbose']                service.args << '--disable-build-check'                @driver = Selenium::WebDriver.for :edge, service: service           warning = /\[WARNING\]: You are using an unsupported command-line switch: --disable-build-check/           expect(File.readlines(file_name).grep(warning).any?).to eq true         end       end            describe 'Special Features' do         it 'casts' do           @driver = Selenium::WebDriver.for :edge           sinks = @driver.cast_sinks           unless sinks.empty?             device_name = sinks.first['name']             @driver.start_cast_tab_mirroring(device_name)             expect { @driver.stop_casting(device_name) }.not_to raise_exception           end         end              it 'gets and sets network conditions' do           @driver = Selenium::WebDriver.for :edge           @driver.network_conditions = {offline: false, latency: 100, throughput: 200}           expect(@driver.network_conditions).to eq(             'offline' => false,             'latency' => 100,             'download_throughput' => 200,             'upload_throughput' => 200           )         end              it 'gets the browser logs' do           @driver = Selenium::WebDriver.for :edge           @driver.navigate.to 'https://www.selenium.dev/selenium/web/'           sleep 1           logs = @driver.logs.get(:browser)                expect(logs.first.message).to include 'Failed to load resource'         end              it 'sets permissions' do           @driver = Selenium::WebDriver.for :edge           @driver.navigate.to 'https://www.selenium.dev/selenium/web/'           @driver.add_permission('camera', 'denied')           @driver.add_permissions('clipboard-read' => 'denied', 'clipboard-write' => 'prompt')           expect(permission('camera')).to eq('denied')           expect(permission('clipboard-read')).to eq('denied')           expect(permission('clipboard-write')).to eq('prompt')         end       end            def driver_finder         options = Selenium::WebDriver::Options.edge(browser_version: 'stable')         service = Selenium::WebDriver::Service.edge         finder = Selenium::WebDriver::DriverFinder.new(options, service)         ENV['EDGEDRIVER_BIN'] = finder.driver_path         ENV['EDGE_BIN'] = finder.browser_path       end            def permission(name)         @driver.execute_async_script('callback = arguments[arguments.length - 1];' \                                      'callback(navigator.permissions.query({name: arguments[0]}));', name)['state']       end     end                          .setEdgeOptions(options.detachDriver(true))

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk//examples/javascript/test/browser/edgeSpecificCaps.spec.js#L32)

##### /examples/javascript/test/browser/edgeSpecificCaps.spec.js

Copy  Close               const {Browser, By, Builder } = require('selenium-webdriver');     const edge = require('selenium-webdriver/edge');     const options = new edge.Options();     const assert = require("assert");                    describe('Should be able to Test Command line arguments', function () {       it('headless', async function () {         let driver = new Builder()           .forBrowser(Browser.EDGE)           .setEdgeOptions(options.addArguments('--headless=new'))           .build();              await driver.get('https://www.selenium.dev/selenium/web/blank.html');         await driver.quit();       });            it('exclude switches', async function () {         let driver = new Builder()           .forBrowser(Browser.EDGE)           .setEdgeOptions(options.excludeSwitches('enable-automation'))           .build();              await driver.get('https://www.selenium.dev/selenium/web/blank.html');         await driver.quit();       });            it('Keep browser open - set detach to true ', async function () {         let driver = new Builder()           .forBrowser(Browser.EDGE)           .setEdgeOptions(options.detachDriver(true))           .build();              await driver.get('https://www.selenium.dev/selenium/web/blank.html');              // As tests runs in ci, quitting the driver instance to avoid any failures         await driver.quit();       });            it('Basic edge test', async function () {         const Options = new edge.Options();         let driver = new Builder()           .forBrowser(Browser.EDGE)           .setEdgeOptions(Options)           .build();              await driver.get('https://www.selenium.dev/selenium/web/blank.html');         await driver.quit();       });            it('Add Extension', async function () {         let driver = new Builder()           .forBrowser(Browser.EDGE)           .setEdgeOptions(options.addExtensions(['./test/resources/extensions/webextensions-selenium-example.crx']))           .build();              await driver.get('https://www.selenium.dev/selenium/web/blank.html');         let injected = await driver.findElement(By.id('webextensions-selenium-example'));         assert.equal(await injected.getText(), `Content injected by webextensions-selenium-example`)         await driver.quit();       });     });

[Add Example](https://www.selenium.dev/documentation/about/contributing/#creating-examples)

### Excluding arguments

MSEdgedriver has several default arguments it uses to start the browser. If you do not want those arguments added, pass them into `excludeSwitches`. A common example is to turn the popup blocker back on. A full list of default arguments can be parsed from the [Chromium Source Code](https://source.chromium.org/chromium/chromium/src/+/main:chrome/test/chromedriver/chrome_launcher.cc)

Set excluded arguments on options:

  * Java   * Python   * CSharp   * Ruby   * JavaScript   * Kotlin

                  options.setExperimentalOption("excludeSwitches", List.of("disable-popup-blocking"));

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk//examples/java/src/test/java/dev/selenium/browsers/EdgeTest.java#L79)

##### /examples/java/src/test/java/dev/selenium/browsers/EdgeTest.java

Copy  Close               package dev.selenium.browsers;          import dev.selenium.BaseTest;     import java.io.File;     import java.io.IOException;     import java.io.PrintStream;     import java.nio.file.Files;     import java.nio.file.Path;     import java.nio.file.Paths;     import java.util.List;     import java.util.Map;     import java.util.logging.Level;     import java.util.regex.Pattern;     import org.junit.jupiter.api.AfterEach;     import org.junit.jupiter.api.Assertions;     import org.junit.jupiter.api.Test;     import org.openqa.selenium.By;     import org.openqa.selenium.WebElement;     import org.openqa.selenium.chromium.ChromiumDriverLogLevel;     import org.openqa.selenium.chromium.ChromiumNetworkConditions;     import org.openqa.selenium.edge.EdgeDriver;     import org.openqa.selenium.edge.EdgeDriverService;     import org.openqa.selenium.edge.EdgeOptions;     import org.openqa.selenium.logging.*;     import org.openqa.selenium.remote.service.DriverFinder;                    public class EdgeTest extends BaseTest {       @AfterEach       public void clearProperties() {         System.clearProperty(EdgeDriverService.EDGE_DRIVER_LOG_PROPERTY);         System.clearProperty(EdgeDriverService.EDGE_DRIVER_LOG_LEVEL_PROPERTY);       }            @Test       public void basicOptions() {         EdgeOptions options = getDefaultEdgeOptions();         driver = new EdgeDriver(options);       }            @Test       public void arguments() {         EdgeOptions options = getDefaultEdgeOptions();              options.addArguments("--start-maximized");              driver = new EdgeDriver(options);       }            @Test       public void setBrowserLocation() {         EdgeOptions options = getDefaultEdgeOptions();              options.setBinary(getEdgeLocation());              driver = new EdgeDriver(options);       }            @Test       public void extensionOptions() {         EdgeOptions options = getDefaultEdgeOptions();         Path path = Paths.get("src/test/resources/extensions/webextensions-selenium-example.crx");         File extensionFilePath = new File(path.toUri());              options.addExtensions(extensionFilePath);              driver = new EdgeDriver(options);         driver.get("https://www.selenium.dev/selenium/web/blank.html");         WebElement injected = driver.findElement(By.id("webextensions-selenium-example"));         Assertions.assertEquals(             "Content injected by webextensions-selenium-example", injected.getText());       }            @Test       public void excludeSwitches() {         EdgeOptions options = getDefaultEdgeOptions();              options.setExperimentalOption("excludeSwitches", List.of("disable-popup-blocking"));              driver = new EdgeDriver(options);       }            @Test       public void loggingPreferences() {         EdgeOptions options = getDefaultEdgeOptions();         LoggingPreferences logPrefs = new LoggingPreferences();         logPrefs.enable(LogType.PERFORMANCE, Level.ALL);         options.setCapability(EdgeOptions.LOGGING_PREFS, logPrefs);              driver = new EdgeDriver(options);         driver.get("https://www.selenium.dev");              LogEntries logEntries = driver.manage().logs().get(LogType.PERFORMANCE);         Assertions.assertFalse(logEntries.getAll().isEmpty());       }            @Test       public void logsToFile() throws IOException {         File logLocation = getTempFile("logsToFile", ".log");         EdgeDriverService service = new EdgeDriverService.Builder().withLogFile(logLocation).build();              driver = new EdgeDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         Assertions.assertTrue(fileContent.contains("Starting Microsoft Edge WebDriver"));       }            @Test       public void logsToConsole() throws IOException {         File logLocation = getTempFile("logsToConsole", ".log");         System.setOut(new PrintStream(logLocation));              EdgeDriverService service = new EdgeDriverService.Builder().withLogOutput(System.out).build();              driver = new EdgeDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         Assertions.assertTrue(fileContent.contains("Starting Microsoft Edge WebDriver"));       }            @Test       public void logsWithLevel() throws IOException {         File logLocation = getTempFile("logsWithLevel", ".log");         System.setProperty(EdgeDriverService.EDGE_DRIVER_LOG_PROPERTY, logLocation.getAbsolutePath());              EdgeDriverService service =             new EdgeDriverService.Builder().withLoglevel(ChromiumDriverLogLevel.DEBUG).build();              driver = new EdgeDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         Assertions.assertTrue(fileContent.contains("[DEBUG]:"));       }            @Test       public void configureDriverLogs() throws IOException {         File logLocation = getTempFile("configureDriverLogs", ".log");         System.setProperty(EdgeDriverService.EDGE_DRIVER_LOG_PROPERTY, logLocation.getAbsolutePath());         System.setProperty(             EdgeDriverService.EDGE_DRIVER_LOG_LEVEL_PROPERTY, ChromiumDriverLogLevel.DEBUG.toString());              EdgeDriverService service =             new EdgeDriverService.Builder().withAppendLog(true).withReadableTimestamp(true).build();              driver = new EdgeDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         Pattern pattern = Pattern.compile("\\[\\d\\d-\\d\\d-\\d\\d\\d\\d", Pattern.CASE_INSENSITIVE);         Assertions.assertTrue(pattern.matcher(fileContent).find());       }            @Test       public void disableBuildChecks() throws IOException {         File logLocation = getTempFile("disableBuildChecks", ".log");         System.setProperty(EdgeDriverService.EDGE_DRIVER_LOG_PROPERTY, logLocation.getAbsolutePath());         System.setProperty(             EdgeDriverService.EDGE_DRIVER_LOG_LEVEL_PROPERTY,             ChromiumDriverLogLevel.WARNING.toString());              EdgeDriverService service =             new EdgeDriverService.Builder().withBuildCheckDisabled(true).build();              driver = new EdgeDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         String expected =             "[WARNING]: You are using an unsupported command-line switch: --disable-build-check";         Assertions.assertTrue(fileContent.contains(expected));       }            private File getEdgeLocation() {         EdgeOptions options = getDefaultEdgeOptions();         options.setBrowserVersion("stable");         DriverFinder finder = new DriverFinder(EdgeDriverService.createDefaultService(), options);         return new File(finder.getBrowserPath());       }            @Test       public void setPermissions() {         EdgeDriver driver = new EdgeDriver();         driver.get("https://www.selenium.dev");              driver.setPermission("camera", "denied");              // Verify the permission state is 'denied'         String script = "return navigator.permissions.query({ name: 'camera' })" +                 "    .then(permissionStatus => permissionStatus.state);";         String permissionState = (String) driver.executeScript(script);              Assertions.assertEquals("denied", permissionState);         driver.quit();       }            @Test       public void setNetworkConditions() {         driver = new EdgeDriver();              ChromiumNetworkConditions networkConditions = new ChromiumNetworkConditions();         networkConditions.setOffline(false);         networkConditions.setLatency(java.time.Duration.ofMillis(20)); // 20 ms of latency         networkConditions.setDownloadThroughput(2000 * 1024 / 8); // 2000 kbps         networkConditions.setUploadThroughput(2000 * 1024 / 8);   // 2000 kbps              ((EdgeDriver) driver).setNetworkConditions(networkConditions);              driver.get("https://www.selenium.dev");              // Assert the network conditions are set as expected         ChromiumNetworkConditions actualConditions = ((EdgeDriver) driver).getNetworkConditions();         Assertions.assertAll(                 () -> Assertions.assertEquals(networkConditions.getOffline(), actualConditions.getOffline()),                 () -> Assertions.assertEquals(networkConditions.getLatency(), actualConditions.getLatency()),                 () -> Assertions.assertEquals(networkConditions.getDownloadThroughput(), actualConditions.getDownloadThroughput()),                 () -> Assertions.assertEquals(networkConditions.getUploadThroughput(), actualConditions.getUploadThroughput())         );         ((EdgeDriver) driver).deleteNetworkConditions();         driver.quit();       }            @Test       public void castFeatures() {         EdgeDriver driver = new EdgeDriver();              List<Map<String, String>> sinks = driver.getCastSinks();         if (!sinks.isEmpty()) {           String sinkName = sinks.get(0).get("name");           driver.startTabMirroring(sinkName);           driver.stopCasting(sinkName);         }              driver.quit();       }            @Test       public void getBrowserLogs() {         EdgeDriver driver = new EdgeDriver();         driver.get("https://www.selenium.dev/selenium/web/bidi/logEntryAdded.html");         WebElement consoleLogButton = driver.findElement(By.id("consoleError"));         consoleLogButton.click();              LogEntries logs = driver.manage().logs().get(LogType.BROWSER);              // Assert that at least one log contains the expected message         boolean logFound = false;         for (LogEntry log : logs) {           if (log.getMessage().contains("I am console error")) {             logFound = true;             break;           }         }              Assertions.assertTrue(logFound, "No matching log message found.");         driver.quit();       }     }                        options.add_experimental_option('excludeSwitches', ['disable-popup-blocking'])

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk//examples/python/tests/browsers/test_edge.py#L62)

##### /examples/python/tests/browsers/test\_edge.py

Copy  Close               import os     import re     import subprocess     import pytest     from selenium import webdriver     from selenium.webdriver.common.by import By          def test_basic_options():         options = get_default_edge_options()         driver = webdriver.Edge(options=options)              driver.quit()               def test_args():         options = get_default_edge_options()              options.add_argument("--start-maximized")              driver = webdriver.Edge(options=options)         driver.get('http://selenium.dev')              driver.quit()               def test_set_browser_location(edge_bin):         options = get_default_edge_options()              options.binary_location = edge_bin              driver = webdriver.Edge(options=options)              driver.quit()               def test_add_extension():         options = get_default_edge_options()         extension_file_path = os.path.abspath("tests/extensions/webextensions-selenium-example.crx")              options.add_extension(extension_file_path)              driver = webdriver.Edge(options=options)         driver.get("https://www.selenium.dev/selenium/web/blank.html")              driver.quit()               def test_keep_browser_open():         options = get_default_edge_options()              options.add_experimental_option("detach", True)              driver = webdriver.Edge(options=options)         driver.get('http://selenium.dev')              driver.quit()               def test_exclude_switches():         options = get_default_edge_options()              options.add_experimental_option('excludeSwitches', ['disable-popup-blocking'])              driver = webdriver.Edge(options=options)         driver.get('http://selenium.dev')              driver.quit()               def test_log_to_file(log_path):         service = webdriver.EdgeService(log_output=log_path)              driver = webdriver.Edge(service=service)              with open(log_path, 'r') as fp:             assert "Starting Microsoft Edge WebDriver" in fp.readline()              driver.quit()               def test_log_to_stdout(capfd):         service = webdriver.EdgeService(log_output=subprocess.STDOUT)              driver = webdriver.Edge(service=service)              out, err = capfd.readouterr()         assert "Starting Microsoft Edge WebDriver" in out              driver.quit()               def test_log_level(log_path):         service = webdriver.EdgeService(service_args=['--log-level=DEBUG'], log_output=log_path)              driver = webdriver.Edge(service=service)              with open(log_path, 'r') as f:             assert '[DEBUG]' in f.read()              driver.quit()               def test_log_features(log_path):         service = webdriver.EdgeService(service_args=['--append-log', '--readable-timestamp'], log_output=log_path)              driver = webdriver.Edge(service=service)              with open(log_path, 'r') as f:             assert re.match(r"\[\d\d-\d\d-\d\d\d\d", f.read())              driver.quit()               def test_build_checks(log_path):         service = webdriver.EdgeService(service_args=['--disable-build-check'], log_output=log_path)              driver = webdriver.Edge(service=service)              expected = "[WARNING]: You are using an unsupported command-line switch: --disable-build-check"         with open(log_path, 'r') as f:             assert expected in f.read()              driver.quit()               def test_set_network_conditions():         driver = webdriver.Edge()              network_conditions = {             "offline": False,             "latency": 20,  # 20 ms of latency             "download_throughput": 2000 * 1024 / 8,  # 2000 kbps             "upload_throughput": 2000 * 1024 / 8,    # 2000 kbps         }         driver.set_network_conditions(**network_conditions)              driver.get("https://www.selenium.dev")              # check whether the network conditions are set         assert driver.get_network_conditions() == network_conditions              driver.quit()               def test_set_permissions():         driver = webdriver.Edge()         driver.get('https://www.selenium.dev')              driver.set_permissions('camera', 'denied')              assert get_permission_state(driver, 'camera') == 'denied'         driver.quit()               def get_permission_state(driver, name):         """Helper function to query the permission state."""         script = """         const callback = arguments[arguments.length - 1];         navigator.permissions.query({name: arguments[0]}).then(permissionStatus => {             callback(permissionStatus.state);         });         """         return driver.execute_async_script(script, name)               def test_cast_features():         driver = webdriver.Edge()              try:             sinks = driver.get_sinks()             if sinks:                 sink_name = sinks[0]['name']                 driver.start_tab_mirroring(sink_name)                 driver.stop_casting(sink_name)             else:                 pytest.skip("No available Cast sinks to test with.")         finally:             driver.quit()               def test_get_browser_logs():         driver = webdriver.Edge()         driver.get("https://www.selenium.dev/selenium/web/bidi/logEntryAdded.html")         driver.find_element(By.ID, "consoleError").click()              logs = driver.get_log("browser")              # Assert that at least one log contains the expected message         assert any("I am console error" in log['message'] for log in logs), "No matching log message found."         driver.quit()          def get_default_edge_options():         options = webdriver.EdgeOptions()         options.add_argument("--no-sandbox")         return options                                options.AddExcludedArgument("disable-popup-blocking");

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk//examples/dotnet/SeleniumDocs/Browsers/EdgeTest.cs#L76)

##### /examples/dotnet/SeleniumDocs/Browsers/EdgeTest.cs

Copy  Close               using System;     using System.IO;     using System.Linq;     using System.Text.RegularExpressions;     using Microsoft.VisualStudio.TestTools.UnitTesting;     using OpenQA.Selenium;     using OpenQA.Selenium.Edge;          namespace SeleniumDocs.Browsers     {         [TestClass]         public class EdgeTest         {             private EdgeDriver driver;             private string _logLocation;                  [TestCleanup]             public void Cleanup()             {                 if (_logLocation != null && File.Exists(_logLocation))                 {                     File.Delete(_logLocation);                 }                 driver.Quit();             }                  [TestMethod]             public void BasicOptions()             {                 var options = new EdgeOptions();                 driver = new EdgeDriver(options);             }                  [TestMethod]             public void Arguments()             {                 var options = new EdgeOptions();                      options.AddArgument("--start-maximized");                          driver = new EdgeDriver(options);             }                  [TestMethod]             public void SetBrowserLocation()             {                 var options = new EdgeOptions();                      options.BinaryLocation = GetEdgeLocation();                          driver = new EdgeDriver(options);             }                  [TestMethod]             public void InstallExtension()             {                 var options = new EdgeOptions();                 var baseDir = AppDomain.CurrentDomain.BaseDirectory;                 var extensionFilePath = Path.Combine(baseDir, "../../../Extensions/webextensions-selenium-example.crx");                      options.AddExtension(extensionFilePath);                      driver = new EdgeDriver(options);                      driver.Url = "https://www.selenium.dev/selenium/web/blank.html";                      IWebElement injected = driver.FindElement(By.Id("webextensions-selenium-example"));                 Assert.AreEqual("Content injected by webextensions-selenium-example", injected.Text);             }                  [TestMethod]             public void ExcludeSwitch()             {                 var options = new EdgeOptions();                      options.AddExcludedArgument("disable-popup-blocking");                      driver = new EdgeDriver(options);             }                  [TestMethod]             public void LogsToFile()             {                 var service = EdgeDriverService.CreateDefaultService();                      service.LogPath = GetLogLocation();                      driver = new EdgeDriver(service);                 driver.Quit(); // Close the Service log file before reading                 var lines = File.ReadLines(GetLogLocation());                 Assert.IsNotNull(lines.FirstOrDefault(line => line.Contains("Starting Microsoft Edge WebDriver")));             }                  [TestMethod]             [Ignore("Not implemented")]             public void LogsToConsole()             {                 var stringWriter = new StringWriter();                 var originalOutput = Console.Out;                 Console.SetOut(stringWriter);                      var service = EdgeDriverService.CreateDefaultService();                      //service.LogToConsole = true;                      driver = new EdgeDriver(service);                      Assert.IsTrue(stringWriter.ToString().Contains("Starting Microsoft Edge WebDriver"));                 Console.SetOut(originalOutput);                 stringWriter.Dispose();             }                  [TestMethod]             [Ignore("Not implemented")]             public void LogsLevel()             {                 var service = EdgeDriverService.CreateDefaultService();                 service.LogPath = GetLogLocation();                      // service.LogLevel = ChromiumDriverLogLevel.Debug                       driver = new EdgeDriver(service);                      driver.Quit(); // Close the Service log file before reading                 var lines = File.ReadLines(GetLogLocation());                 Assert.IsNotNull(lines.FirstOrDefault(line => line.Contains("[DEBUG]:")));             }                  [TestMethod]             [Ignore("Not implemented")]             public void ConfigureDriverLogs()             {                 var service = EdgeDriverService.CreateDefaultService();                 service.LogPath = GetLogLocation();                 service.EnableVerboseLogging = true;                      service.EnableAppendLog = true;                 // service.readableTimeStamp = true;                      driver = new EdgeDriver(service);                      driver.Quit(); // Close the Service log file before reading                 var lines = File.ReadLines(GetLogLocation());                 var regex = new Regex(@"\[\d\d-\d\d-\d\d\d\d");                 Assert.IsNotNull(lines.FirstOrDefault(line => regex.Matches("").Count > 0));             }                  [TestMethod]             public void DisableBuildCheck()             {                 var service = EdgeDriverService.CreateDefaultService();                 service.LogPath = GetLogLocation();                 service.EnableVerboseLogging = true;                      service.DisableBuildCheck = true;                      driver = new EdgeDriver(service);                 driver.Quit(); // Close the Service log file before reading                 var expected = "[WARNING]: You are using an unsupported command-line switch: --disable-build-check";                 var lines = File.ReadLines(GetLogLocation());                 Assert.IsNotNull(lines.FirstOrDefault(line => line.Contains(expected)));             }                          private string GetLogLocation()             {                 if (_logLocation == null || !File.Exists(_logLocation))                 {                     _logLocation = Path.GetTempFileName();                 }                      return _logLocation;             }                  private static string GetEdgeLocation()             {                 var options = new EdgeOptions                 {                     BrowserVersion = "stable"                 };                 return new DriverFinder(options).GetBrowserPath();             }         }     }                     options.exclude_switches << 'disable-popup-blocking'

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk//examples/ruby/spec/browsers/edge_spec.rb#L53)

##### /examples/ruby/spec/browsers/edge\_spec.rb

Copy  Close               # frozen_string_literal: true          require 'spec_helper'          RSpec.describe 'Edge' do       describe 'Options' do         let(:edge_location) { driver_finder && ENV.fetch('EDGE_BIN', nil) }              it 'basic options' do           options = Selenium::WebDriver::Options.edge           @driver = Selenium::WebDriver.for :edge, options: options         end              it 'add arguments' do           options = Selenium::WebDriver::Options.edge                options.args << '--start-maximized'                @driver = Selenium::WebDriver.for :edge, options: options         end              it 'sets location of binary' do           options = Selenium::WebDriver::Options.edge                options.binary = edge_location                @driver = Selenium::WebDriver.for :edge, options: options         end              it 'add extensions' do           extension_file_path = File.expand_path('../spec_support/extensions/webextensions-selenium-example.crx', __dir__)           options = Selenium::WebDriver::Options.edge                options.add_extension(extension_file_path)                @driver = Selenium::WebDriver.for :edge, options: options           @driver.get('https://www.selenium.dev/selenium/web/blank.html')           injected = @driver.find_element(:id, 'webextensions-selenium-example')           expect(injected.text).to eq 'Content injected by webextensions-selenium-example'         end              it 'keeps browser open' do           options = Selenium::WebDriver::Options.edge                options.detach = true                @driver = Selenium::WebDriver.for :edge, options: options         end              it 'excludes switches' do           options = Selenium::WebDriver::Options.edge                options.exclude_switches << 'disable-popup-blocking'                @driver = Selenium::WebDriver.for :edge, options: options         end       end            describe 'Service' do         let(:file_name) { File.expand_path('msedgedriver.log') }              after { FileUtils.rm_f(file_name) }              it 'logs to file' do           service = Selenium::WebDriver::Service.edge                service.log = file_name                @driver = Selenium::WebDriver.for :edge, service: service           expect(File.readlines(file_name).first).to include('Starting Microsoft Edge WebDriver')         end              it 'logs to console' do           service = Selenium::WebDriver::Service.edge                service.log = $stdout                expect {             @driver = Selenium::WebDriver.for :edge, service: service           }.to output(/Starting Microsoft Edge WebDriver/).to_stdout_from_any_process         end              it 'sets log level' do           service = Selenium::WebDriver::Service.edge           service.log = file_name                service.args << '--log-level=DEBUG'                @driver = Selenium::WebDriver.for :edge, service: service           expect(File.readlines(file_name).grep(/\[DEBUG\]:/).any?).to eq true         end              it 'sets log features' do           args = ["--log-path=#{file_name}", '--verbose']           service = Selenium::WebDriver::Service.edge(args: args)                service.args << '--append-log'           service.args << '--readable-timestamp'                @driver = Selenium::WebDriver.for :edge, service: service                expect(File.readlines(file_name).grep(/\[\d\d-\d\d-\d\d\d\d/).any?).to eq true         end              it 'disables build checks' do           service = Selenium::WebDriver::Service.edge log: file_name, args: ['--verbose']                service.args << '--disable-build-check'                @driver = Selenium::WebDriver.for :edge, service: service           warning = /\[WARNING\]: You are using an unsupported command-line switch: --disable-build-check/           expect(File.readlines(file_name).grep(warning).any?).to eq true         end       end            describe 'Special Features' do         it 'casts' do           @driver = Selenium::WebDriver.for :edge           sinks = @driver.cast_sinks           unless sinks.empty?             device_name = sinks.first['name']             @driver.start_cast_tab_mirroring(device_name)             expect { @driver.stop_casting(device_name) }.not_to raise_exception           end         end              it 'gets and sets network conditions' do           @driver = Selenium::WebDriver.for :edge           @driver.network_conditions = {offline: false, latency: 100, throughput: 200}           expect(@driver.network_conditions).to eq(             'offline' => false,             'latency' => 100,             'download_throughput' => 200,             'upload_throughput' => 200           )         end              it 'gets the browser logs' do           @driver = Selenium::WebDriver.for :edge           @driver.navigate.to 'https://www.selenium.dev/selenium/web/'           sleep 1           logs = @driver.logs.get(:browser)                expect(logs.first.message).to include 'Failed to load resource'         end              it 'sets permissions' do           @driver = Selenium::WebDriver.for :edge           @driver.navigate.to 'https://www.selenium.dev/selenium/web/'           @driver.add_permission('camera', 'denied')           @driver.add_permissions('clipboard-read' => 'denied', 'clipboard-write' => 'prompt')           expect(permission('camera')).to eq('denied')           expect(permission('clipboard-read')).to eq('denied')           expect(permission('clipboard-write')).to eq('prompt')         end       end            def driver_finder         options = Selenium::WebDriver::Options.edge(browser_version: 'stable')         service = Selenium::WebDriver::Service.edge         finder = Selenium::WebDriver::DriverFinder.new(options, service)         ENV['EDGEDRIVER_BIN'] = finder.driver_path         ENV['EDGE_BIN'] = finder.browser_path       end            def permission(name)         @driver.execute_async_script('callback = arguments[arguments.length - 1];' \                                      'callback(navigator.permissions.query({name: arguments[0]}));', name)['state']       end     end                          .setEdgeOptions(options.excludeSwitches('enable-automation'))

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk//examples/javascript/test/browser/edgeSpecificCaps.spec.js#L22)

##### /examples/javascript/test/browser/edgeSpecificCaps.spec.js

Copy  Close               const {Browser, By, Builder } = require('selenium-webdriver');     const edge = require('selenium-webdriver/edge');     const options = new edge.Options();     const assert = require("assert");                    describe('Should be able to Test Command line arguments', function () {       it('headless', async function () {         let driver = new Builder()           .forBrowser(Browser.EDGE)           .setEdgeOptions(options.addArguments('--headless=new'))           .build();              await driver.get('https://www.selenium.dev/selenium/web/blank.html');         await driver.quit();       });            it('exclude switches', async function () {         let driver = new Builder()           .forBrowser(Browser.EDGE)           .setEdgeOptions(options.excludeSwitches('enable-automation'))           .build();              await driver.get('https://www.selenium.dev/selenium/web/blank.html');         await driver.quit();       });            it('Keep browser open - set detach to true ', async function () {         let driver = new Builder()           .forBrowser(Browser.EDGE)           .setEdgeOptions(options.detachDriver(true))           .build();              await driver.get('https://www.selenium.dev/selenium/web/blank.html');              // As tests runs in ci, quitting the driver instance to avoid any failures         await driver.quit();       });            it('Basic edge test', async function () {         const Options = new edge.Options();         let driver = new Builder()           .forBrowser(Browser.EDGE)           .setEdgeOptions(Options)           .build();              await driver.get('https://www.selenium.dev/selenium/web/blank.html');         await driver.quit();       });            it('Add Extension', async function () {         let driver = new Builder()           .forBrowser(Browser.EDGE)           .setEdgeOptions(options.addExtensions(['./test/resources/extensions/webextensions-selenium-example.crx']))           .build();              await driver.get('https://www.selenium.dev/selenium/web/blank.html');         let injected = await driver.findElement(By.id('webextensions-selenium-example'));         assert.equal(await injected.getText(), `Content injected by webextensions-selenium-example`)         await driver.quit();       });     });

[Add Example](https://www.selenium.dev/documentation/about/contributing/#creating-examples)

## Service

Examples for creating a default Service object, and for setting driver location and port can be found on the [Driver Service](https://www.selenium.dev/documentation/webdriver/drivers/service/) page.

### Log output

Getting driver logs can be helpful for debugging issues. The Service class lets you direct where the logs will go. Logging output is ignored unless the user directs it somewhere.

#### File output

To change the logging output to save to a specific file:

  * Java   * Python   * CSharp   * Ruby   * JavaScript   * Kotlin

[Selenium v4.10](https://github.com/SeleniumHQ/selenium/releases/tag/selenium-4.10.0)                   EdgeDriverService service = new EdgeDriverService.Builder().withLogFile(logLocation).build();

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/java/src/test/java/dev/selenium/browsers/EdgeTest.java#L101)

##### examples/java/src/test/java/dev/selenium/browsers/EdgeTest.java

Copy  Close               package dev.selenium.browsers;          import dev.selenium.BaseTest;     import java.io.File;     import java.io.IOException;     import java.io.PrintStream;     import java.nio.file.Files;     import java.nio.file.Path;     import java.nio.file.Paths;     import java.util.List;     import java.util.Map;     import java.util.logging.Level;     import java.util.regex.Pattern;     import org.junit.jupiter.api.AfterEach;     import org.junit.jupiter.api.Assertions;     import org.junit.jupiter.api.Test;     import org.openqa.selenium.By;     import org.openqa.selenium.WebElement;     import org.openqa.selenium.chromium.ChromiumDriverLogLevel;     import org.openqa.selenium.chromium.ChromiumNetworkConditions;     import org.openqa.selenium.edge.EdgeDriver;     import org.openqa.selenium.edge.EdgeDriverService;     import org.openqa.selenium.edge.EdgeOptions;     import org.openqa.selenium.logging.*;     import org.openqa.selenium.remote.service.DriverFinder;                    public class EdgeTest extends BaseTest {       @AfterEach       public void clearProperties() {         System.clearProperty(EdgeDriverService.EDGE_DRIVER_LOG_PROPERTY);         System.clearProperty(EdgeDriverService.EDGE_DRIVER_LOG_LEVEL_PROPERTY);       }            @Test       public void basicOptions() {         EdgeOptions options = getDefaultEdgeOptions();         driver = new EdgeDriver(options);       }            @Test       public void arguments() {         EdgeOptions options = getDefaultEdgeOptions();              options.addArguments("--start-maximized");              driver = new EdgeDriver(options);       }            @Test       public void setBrowserLocation() {         EdgeOptions options = getDefaultEdgeOptions();              options.setBinary(getEdgeLocation());              driver = new EdgeDriver(options);       }            @Test       public void extensionOptions() {         EdgeOptions options = getDefaultEdgeOptions();         Path path = Paths.get("src/test/resources/extensions/webextensions-selenium-example.crx");         File extensionFilePath = new File(path.toUri());              options.addExtensions(extensionFilePath);              driver = new EdgeDriver(options);         driver.get("https://www.selenium.dev/selenium/web/blank.html");         WebElement injected = driver.findElement(By.id("webextensions-selenium-example"));         Assertions.assertEquals(             "Content injected by webextensions-selenium-example", injected.getText());       }            @Test       public void excludeSwitches() {         EdgeOptions options = getDefaultEdgeOptions();              options.setExperimentalOption("excludeSwitches", List.of("disable-popup-blocking"));              driver = new EdgeDriver(options);       }            @Test       public void loggingPreferences() {         EdgeOptions options = getDefaultEdgeOptions();         LoggingPreferences logPrefs = new LoggingPreferences();         logPrefs.enable(LogType.PERFORMANCE, Level.ALL);         options.setCapability(EdgeOptions.LOGGING_PREFS, logPrefs);              driver = new EdgeDriver(options);         driver.get("https://www.selenium.dev");              LogEntries logEntries = driver.manage().logs().get(LogType.PERFORMANCE);         Assertions.assertFalse(logEntries.getAll().isEmpty());       }            @Test       public void logsToFile() throws IOException {         File logLocation = getTempFile("logsToFile", ".log");         EdgeDriverService service = new EdgeDriverService.Builder().withLogFile(logLocation).build();              driver = new EdgeDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         Assertions.assertTrue(fileContent.contains("Starting Microsoft Edge WebDriver"));       }            @Test       public void logsToConsole() throws IOException {         File logLocation = getTempFile("logsToConsole", ".log");         System.setOut(new PrintStream(logLocation));              EdgeDriverService service = new EdgeDriverService.Builder().withLogOutput(System.out).build();              driver = new EdgeDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         Assertions.assertTrue(fileContent.contains("Starting Microsoft Edge WebDriver"));       }            @Test       public void logsWithLevel() throws IOException {         File logLocation = getTempFile("logsWithLevel", ".log");         System.setProperty(EdgeDriverService.EDGE_DRIVER_LOG_PROPERTY, logLocation.getAbsolutePath());              EdgeDriverService service =             new EdgeDriverService.Builder().withLoglevel(ChromiumDriverLogLevel.DEBUG).build();              driver = new EdgeDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         Assertions.assertTrue(fileContent.contains("[DEBUG]:"));       }            @Test       public void configureDriverLogs() throws IOException {         File logLocation = getTempFile("configureDriverLogs", ".log");         System.setProperty(EdgeDriverService.EDGE_DRIVER_LOG_PROPERTY, logLocation.getAbsolutePath());         System.setProperty(             EdgeDriverService.EDGE_DRIVER_LOG_LEVEL_PROPERTY, ChromiumDriverLogLevel.DEBUG.toString());              EdgeDriverService service =             new EdgeDriverService.Builder().withAppendLog(true).withReadableTimestamp(true).build();              driver = new EdgeDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         Pattern pattern = Pattern.compile("\\[\\d\\d-\\d\\d-\\d\\d\\d\\d", Pattern.CASE_INSENSITIVE);         Assertions.assertTrue(pattern.matcher(fileContent).find());       }            @Test       public void disableBuildChecks() throws IOException {         File logLocation = getTempFile("disableBuildChecks", ".log");         System.setProperty(EdgeDriverService.EDGE_DRIVER_LOG_PROPERTY, logLocation.getAbsolutePath());         System.setProperty(             EdgeDriverService.EDGE_DRIVER_LOG_LEVEL_PROPERTY,             ChromiumDriverLogLevel.WARNING.toString());              EdgeDriverService service =             new EdgeDriverService.Builder().withBuildCheckDisabled(true).build();              driver = new EdgeDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         String expected =             "[WARNING]: You are using an unsupported command-line switch: --disable-build-check";         Assertions.assertTrue(fileContent.contains(expected));       }            private File getEdgeLocation() {         EdgeOptions options = getDefaultEdgeOptions();         options.setBrowserVersion("stable");         DriverFinder finder = new DriverFinder(EdgeDriverService.createDefaultService(), options);         return new File(finder.getBrowserPath());       }            @Test       public void setPermissions() {         EdgeDriver driver = new EdgeDriver();         driver.get("https://www.selenium.dev");              driver.setPermission("camera", "denied");              // Verify the permission state is 'denied'         String script = "return navigator.permissions.query({ name: 'camera' })" +                 "    .then(permissionStatus => permissionStatus.state);";         String permissionState = (String) driver.executeScript(script);              Assertions.assertEquals("denied", permissionState);         driver.quit();       }            @Test       public void setNetworkConditions() {         driver = new EdgeDriver();              ChromiumNetworkConditions networkConditions = new ChromiumNetworkConditions();         networkConditions.setOffline(false);         networkConditions.setLatency(java.time.Duration.ofMillis(20)); // 20 ms of latency         networkConditions.setDownloadThroughput(2000 * 1024 / 8); // 2000 kbps         networkConditions.setUploadThroughput(2000 * 1024 / 8);   // 2000 kbps              ((EdgeDriver) driver).setNetworkConditions(networkConditions);              driver.get("https://www.selenium.dev");              // Assert the network conditions are set as expected         ChromiumNetworkConditions actualConditions = ((EdgeDriver) driver).getNetworkConditions();         Assertions.assertAll(                 () -> Assertions.assertEquals(networkConditions.getOffline(), actualConditions.getOffline()),                 () -> Assertions.assertEquals(networkConditions.getLatency(), actualConditions.getLatency()),                 () -> Assertions.assertEquals(networkConditions.getDownloadThroughput(), actualConditions.getDownloadThroughput()),                 () -> Assertions.assertEquals(networkConditions.getUploadThroughput(), actualConditions.getUploadThroughput())         );         ((EdgeDriver) driver).deleteNetworkConditions();         driver.quit();       }            @Test       public void castFeatures() {         EdgeDriver driver = new EdgeDriver();              List<Map<String, String>> sinks = driver.getCastSinks();         if (!sinks.isEmpty()) {           String sinkName = sinks.get(0).get("name");           driver.startTabMirroring(sinkName);           driver.stopCasting(sinkName);         }              driver.quit();       }            @Test       public void getBrowserLogs() {         EdgeDriver driver = new EdgeDriver();         driver.get("https://www.selenium.dev/selenium/web/bidi/logEntryAdded.html");         WebElement consoleLogButton = driver.findElement(By.id("consoleError"));         consoleLogButton.click();              LogEntries logs = driver.manage().logs().get(LogType.BROWSER);              // Assert that at least one log contains the expected message         boolean logFound = false;         for (LogEntry log : logs) {           if (log.getMessage().contains("I am console error")) {             logFound = true;             break;           }         }              Assertions.assertTrue(logFound, "No matching log message found.");         driver.quit();       }     }     

**Note** : Java also allows setting file output by System Property:   Property key: `EdgeDriverService.EDGE_DRIVER_LOG_PROPERTY`   Property value: String representing path to log file                   service = webdriver.EdgeService(log_output=log_path)

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/python/tests/browsers/test_edge.py#L71)

##### examples/python/tests/browsers/test\_edge.py

Copy  Close               import os     import re     import subprocess     import pytest     from selenium import webdriver     from selenium.webdriver.common.by import By          def test_basic_options():         options = get_default_edge_options()         driver = webdriver.Edge(options=options)              driver.quit()               def test_args():         options = get_default_edge_options()              options.add_argument("--start-maximized")              driver = webdriver.Edge(options=options)         driver.get('http://selenium.dev')              driver.quit()               def test_set_browser_location(edge_bin):         options = get_default_edge_options()              options.binary_location = edge_bin              driver = webdriver.Edge(options=options)              driver.quit()               def test_add_extension():         options = get_default_edge_options()         extension_file_path = os.path.abspath("tests/extensions/webextensions-selenium-example.crx")              options.add_extension(extension_file_path)              driver = webdriver.Edge(options=options)         driver.get("https://www.selenium.dev/selenium/web/blank.html")              driver.quit()               def test_keep_browser_open():         options = get_default_edge_options()              options.add_experimental_option("detach", True)              driver = webdriver.Edge(options=options)         driver.get('http://selenium.dev')              driver.quit()               def test_exclude_switches():         options = get_default_edge_options()              options.add_experimental_option('excludeSwitches', ['disable-popup-blocking'])              driver = webdriver.Edge(options=options)         driver.get('http://selenium.dev')              driver.quit()               def test_log_to_file(log_path):         service = webdriver.EdgeService(log_output=log_path)              driver = webdriver.Edge(service=service)              with open(log_path, 'r') as fp:             assert "Starting Microsoft Edge WebDriver" in fp.readline()              driver.quit()               def test_log_to_stdout(capfd):         service = webdriver.EdgeService(log_output=subprocess.STDOUT)              driver = webdriver.Edge(service=service)              out, err = capfd.readouterr()         assert "Starting Microsoft Edge WebDriver" in out              driver.quit()               def test_log_level(log_path):         service = webdriver.EdgeService(service_args=['--log-level=DEBUG'], log_output=log_path)              driver = webdriver.Edge(service=service)              with open(log_path, 'r') as f:             assert '[DEBUG]' in f.read()              driver.quit()               def test_log_features(log_path):         service = webdriver.EdgeService(service_args=['--append-log', '--readable-timestamp'], log_output=log_path)              driver = webdriver.Edge(service=service)              with open(log_path, 'r') as f:             assert re.match(r"\[\d\d-\d\d-\d\d\d\d", f.read())              driver.quit()               def test_build_checks(log_path):         service = webdriver.EdgeService(service_args=['--disable-build-check'], log_output=log_path)              driver = webdriver.Edge(service=service)              expected = "[WARNING]: You are using an unsupported command-line switch: --disable-build-check"         with open(log_path, 'r') as f:             assert expected in f.read()              driver.quit()               def test_set_network_conditions():         driver = webdriver.Edge()              network_conditions = {             "offline": False,             "latency": 20,  # 20 ms of latency             "download_throughput": 2000 * 1024 / 8,  # 2000 kbps             "upload_throughput": 2000 * 1024 / 8,    # 2000 kbps         }         driver.set_network_conditions(**network_conditions)              driver.get("https://www.selenium.dev")              # check whether the network conditions are set         assert driver.get_network_conditions() == network_conditions              driver.quit()               def test_set_permissions():         driver = webdriver.Edge()         driver.get('https://www.selenium.dev')              driver.set_permissions('camera', 'denied')              assert get_permission_state(driver, 'camera') == 'denied'         driver.quit()               def get_permission_state(driver, name):         """Helper function to query the permission state."""         script = """         const callback = arguments[arguments.length - 1];         navigator.permissions.query({name: arguments[0]}).then(permissionStatus => {             callback(permissionStatus.state);         });         """         return driver.execute_async_script(script, name)               def test_cast_features():         driver = webdriver.Edge()              try:             sinks = driver.get_sinks()             if sinks:                 sink_name = sinks[0]['name']                 driver.start_tab_mirroring(sink_name)                 driver.stop_casting(sink_name)             else:                 pytest.skip("No available Cast sinks to test with.")         finally:             driver.quit()               def test_get_browser_logs():         driver = webdriver.Edge()         driver.get("https://www.selenium.dev/selenium/web/bidi/logEntryAdded.html")         driver.find_element(By.ID, "consoleError").click()              logs = driver.get_log("browser")              # Assert that at least one log contains the expected message         assert any("I am console error" in log['message'] for log in logs), "No matching log message found."         driver.quit()          def get_default_edge_options():         options = webdriver.EdgeOptions()         options.add_argument("--no-sandbox")         return options                                service.LogPath = GetLogLocation();

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/dotnet/SeleniumDocs/Browsers/EdgeTest.cs#L86)

##### examples/dotnet/SeleniumDocs/Browsers/EdgeTest.cs

Copy  Close               using System;     using System.IO;     using System.Linq;     using System.Text.RegularExpressions;     using Microsoft.VisualStudio.TestTools.UnitTesting;     using OpenQA.Selenium;     using OpenQA.Selenium.Edge;          namespace SeleniumDocs.Browsers     {         [TestClass]         public class EdgeTest         {             private EdgeDriver driver;             private string _logLocation;                  [TestCleanup]             public void Cleanup()             {                 if (_logLocation != null && File.Exists(_logLocation))                 {                     File.Delete(_logLocation);                 }                 driver.Quit();             }                  [TestMethod]             public void BasicOptions()             {                 var options = new EdgeOptions();                 driver = new EdgeDriver(options);             }                  [TestMethod]             public void Arguments()             {                 var options = new EdgeOptions();                      options.AddArgument("--start-maximized");                          driver = new EdgeDriver(options);             }                  [TestMethod]             public void SetBrowserLocation()             {                 var options = new EdgeOptions();                      options.BinaryLocation = GetEdgeLocation();                          driver = new EdgeDriver(options);             }                  [TestMethod]             public void InstallExtension()             {                 var options = new EdgeOptions();                 var baseDir = AppDomain.CurrentDomain.BaseDirectory;                 var extensionFilePath = Path.Combine(baseDir, "../../../Extensions/webextensions-selenium-example.crx");                      options.AddExtension(extensionFilePath);                      driver = new EdgeDriver(options);                      driver.Url = "https://www.selenium.dev/selenium/web/blank.html";                      IWebElement injected = driver.FindElement(By.Id("webextensions-selenium-example"));                 Assert.AreEqual("Content injected by webextensions-selenium-example", injected.Text);             }                  [TestMethod]             public void ExcludeSwitch()             {                 var options = new EdgeOptions();                      options.AddExcludedArgument("disable-popup-blocking");                      driver = new EdgeDriver(options);             }                  [TestMethod]             public void LogsToFile()             {                 var service = EdgeDriverService.CreateDefaultService();                      service.LogPath = GetLogLocation();                      driver = new EdgeDriver(service);                 driver.Quit(); // Close the Service log file before reading                 var lines = File.ReadLines(GetLogLocation());                 Assert.IsNotNull(lines.FirstOrDefault(line => line.Contains("Starting Microsoft Edge WebDriver")));             }                  [TestMethod]             [Ignore("Not implemented")]             public void LogsToConsole()             {                 var stringWriter = new StringWriter();                 var originalOutput = Console.Out;                 Console.SetOut(stringWriter);                      var service = EdgeDriverService.CreateDefaultService();                      //service.LogToConsole = true;                      driver = new EdgeDriver(service);                      Assert.IsTrue(stringWriter.ToString().Contains("Starting Microsoft Edge WebDriver"));                 Console.SetOut(originalOutput);                 stringWriter.Dispose();             }                  [TestMethod]             [Ignore("Not implemented")]             public void LogsLevel()             {                 var service = EdgeDriverService.CreateDefaultService();                 service.LogPath = GetLogLocation();                      // service.LogLevel = ChromiumDriverLogLevel.Debug                       driver = new EdgeDriver(service);                      driver.Quit(); // Close the Service log file before reading                 var lines = File.ReadLines(GetLogLocation());                 Assert.IsNotNull(lines.FirstOrDefault(line => line.Contains("[DEBUG]:")));             }                  [TestMethod]             [Ignore("Not implemented")]             public void ConfigureDriverLogs()             {                 var service = EdgeDriverService.CreateDefaultService();                 service.LogPath = GetLogLocation();                 service.EnableVerboseLogging = true;                      service.EnableAppendLog = true;                 // service.readableTimeStamp = true;                      driver = new EdgeDriver(service);                      driver.Quit(); // Close the Service log file before reading                 var lines = File.ReadLines(GetLogLocation());                 var regex = new Regex(@"\[\d\d-\d\d-\d\d\d\d");                 Assert.IsNotNull(lines.FirstOrDefault(line => regex.Matches("").Count > 0));             }                  [TestMethod]             public void DisableBuildCheck()             {                 var service = EdgeDriverService.CreateDefaultService();                 service.LogPath = GetLogLocation();                 service.EnableVerboseLogging = true;                      service.DisableBuildCheck = true;                      driver = new EdgeDriver(service);                 driver.Quit(); // Close the Service log file before reading                 var expected = "[WARNING]: You are using an unsupported command-line switch: --disable-build-check";                 var lines = File.ReadLines(GetLogLocation());                 Assert.IsNotNull(lines.FirstOrDefault(line => line.Contains(expected)));             }                          private string GetLogLocation()             {                 if (_logLocation == null || !File.Exists(_logLocation))                 {                     _logLocation = Path.GetTempFileName();                 }                      return _logLocation;             }                  private static string GetEdgeLocation()             {                 var options = new EdgeOptions                 {                     BrowserVersion = "stable"                 };                 return new DriverFinder(options).GetBrowserPath();             }         }     }

[Selenium v4.10](https://github.com/SeleniumHQ/selenium/releases/tag/selenium-4.10.0)                     service.log = file_name

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/ruby/spec/browsers/edge_spec.rb#L67)

##### examples/ruby/spec/browsers/edge\_spec.rb

Copy  Close               # frozen_string_literal: true          require 'spec_helper'          RSpec.describe 'Edge' do       describe 'Options' do         let(:edge_location) { driver_finder && ENV.fetch('EDGE_BIN', nil) }              it 'basic options' do           options = Selenium::WebDriver::Options.edge           @driver = Selenium::WebDriver.for :edge, options: options         end              it 'add arguments' do           options = Selenium::WebDriver::Options.edge                options.args << '--start-maximized'                @driver = Selenium::WebDriver.for :edge, options: options         end              it 'sets location of binary' do           options = Selenium::WebDriver::Options.edge                options.binary = edge_location                @driver = Selenium::WebDriver.for :edge, options: options         end              it 'add extensions' do           extension_file_path = File.expand_path('../spec_support/extensions/webextensions-selenium-example.crx', __dir__)           options = Selenium::WebDriver::Options.edge                options.add_extension(extension_file_path)                @driver = Selenium::WebDriver.for :edge, options: options           @driver.get('https://www.selenium.dev/selenium/web/blank.html')           injected = @driver.find_element(:id, 'webextensions-selenium-example')           expect(injected.text).to eq 'Content injected by webextensions-selenium-example'         end              it 'keeps browser open' do           options = Selenium::WebDriver::Options.edge                options.detach = true                @driver = Selenium::WebDriver.for :edge, options: options         end              it 'excludes switches' do           options = Selenium::WebDriver::Options.edge                options.exclude_switches << 'disable-popup-blocking'                @driver = Selenium::WebDriver.for :edge, options: options         end       end            describe 'Service' do         let(:file_name) { File.expand_path('msedgedriver.log') }              after { FileUtils.rm_f(file_name) }              it 'logs to file' do           service = Selenium::WebDriver::Service.edge                service.log = file_name                @driver = Selenium::WebDriver.for :edge, service: service           expect(File.readlines(file_name).first).to include('Starting Microsoft Edge WebDriver')         end              it 'logs to console' do           service = Selenium::WebDriver::Service.edge                service.log = $stdout                expect {             @driver = Selenium::WebDriver.for :edge, service: service           }.to output(/Starting Microsoft Edge WebDriver/).to_stdout_from_any_process         end              it 'sets log level' do           service = Selenium::WebDriver::Service.edge           service.log = file_name                service.args << '--log-level=DEBUG'                @driver = Selenium::WebDriver.for :edge, service: service           expect(File.readlines(file_name).grep(/\[DEBUG\]:/).any?).to eq true         end              it 'sets log features' do           args = ["--log-path=#{file_name}", '--verbose']           service = Selenium::WebDriver::Service.edge(args: args)                service.args << '--append-log'           service.args << '--readable-timestamp'                @driver = Selenium::WebDriver.for :edge, service: service                expect(File.readlines(file_name).grep(/\[\d\d-\d\d-\d\d\d\d/).any?).to eq true         end              it 'disables build checks' do           service = Selenium::WebDriver::Service.edge log: file_name, args: ['--verbose']                service.args << '--disable-build-check'                @driver = Selenium::WebDriver.for :edge, service: service           warning = /\[WARNING\]: You are using an unsupported command-line switch: --disable-build-check/           expect(File.readlines(file_name).grep(warning).any?).to eq true         end       end            describe 'Special Features' do         it 'casts' do           @driver = Selenium::WebDriver.for :edge           sinks = @driver.cast_sinks           unless sinks.empty?             device_name = sinks.first['name']             @driver.start_cast_tab_mirroring(device_name)             expect { @driver.stop_casting(device_name) }.not_to raise_exception           end         end              it 'gets and sets network conditions' do           @driver = Selenium::WebDriver.for :edge           @driver.network_conditions = {offline: false, latency: 100, throughput: 200}           expect(@driver.network_conditions).to eq(             'offline' => false,             'latency' => 100,             'download_throughput' => 200,             'upload_throughput' => 200           )         end              it 'gets the browser logs' do           @driver = Selenium::WebDriver.for :edge           @driver.navigate.to 'https://www.selenium.dev/selenium/web/'           sleep 1           logs = @driver.logs.get(:browser)                expect(logs.first.message).to include 'Failed to load resource'         end              it 'sets permissions' do           @driver = Selenium::WebDriver.for :edge           @driver.navigate.to 'https://www.selenium.dev/selenium/web/'           @driver.add_permission('camera', 'denied')           @driver.add_permissions('clipboard-read' => 'denied', 'clipboard-write' => 'prompt')           expect(permission('camera')).to eq('denied')           expect(permission('clipboard-read')).to eq('denied')           expect(permission('clipboard-write')).to eq('prompt')         end       end            def driver_finder         options = Selenium::WebDriver::Options.edge(browser_version: 'stable')         service = Selenium::WebDriver::Service.edge         finder = Selenium::WebDriver::DriverFinder.new(options, service)         ENV['EDGEDRIVER_BIN'] = finder.driver_path         ENV['EDGE_BIN'] = finder.browser_path       end            def permission(name)         @driver.execute_async_script('callback = arguments[arguments.length - 1];' \                                      'callback(navigator.permissions.query({name: arguments[0]}));', name)['state']       end     end     

[Add Example](https://www.selenium.dev/documentation/about/contributing/#creating-examples)

[Add Example](https://www.selenium.dev/documentation/about/contributing/#creating-examples)

#### Console output

To change the logging output to display in the console as STDOUT:

  * Java   * Python   * CSharp   * Ruby   * JavaScript   * Kotlin

[Selenium v4.10](https://github.com/SeleniumHQ/selenium/releases/tag/selenium-4.10.0)                   EdgeDriverService service = new EdgeDriverService.Builder().withLogOutput(System.out).build();

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/java/src/test/java/dev/selenium/browsers/EdgeTest.java#L114)

##### examples/java/src/test/java/dev/selenium/browsers/EdgeTest.java

Copy  Close               package dev.selenium.browsers;          import dev.selenium.BaseTest;     import java.io.File;     import java.io.IOException;     import java.io.PrintStream;     import java.nio.file.Files;     import java.nio.file.Path;     import java.nio.file.Paths;     import java.util.List;     import java.util.Map;     import java.util.logging.Level;     import java.util.regex.Pattern;     import org.junit.jupiter.api.AfterEach;     import org.junit.jupiter.api.Assertions;     import org.junit.jupiter.api.Test;     import org.openqa.selenium.By;     import org.openqa.selenium.WebElement;     import org.openqa.selenium.chromium.ChromiumDriverLogLevel;     import org.openqa.selenium.chromium.ChromiumNetworkConditions;     import org.openqa.selenium.edge.EdgeDriver;     import org.openqa.selenium.edge.EdgeDriverService;     import org.openqa.selenium.edge.EdgeOptions;     import org.openqa.selenium.logging.*;     import org.openqa.selenium.remote.service.DriverFinder;                    public class EdgeTest extends BaseTest {       @AfterEach       public void clearProperties() {         System.clearProperty(EdgeDriverService.EDGE_DRIVER_LOG_PROPERTY);         System.clearProperty(EdgeDriverService.EDGE_DRIVER_LOG_LEVEL_PROPERTY);       }            @Test       public void basicOptions() {         EdgeOptions options = getDefaultEdgeOptions();         driver = new EdgeDriver(options);       }            @Test       public void arguments() {         EdgeOptions options = getDefaultEdgeOptions();              options.addArguments("--start-maximized");              driver = new EdgeDriver(options);       }            @Test       public void setBrowserLocation() {         EdgeOptions options = getDefaultEdgeOptions();              options.setBinary(getEdgeLocation());              driver = new EdgeDriver(options);       }            @Test       public void extensionOptions() {         EdgeOptions options = getDefaultEdgeOptions();         Path path = Paths.get("src/test/resources/extensions/webextensions-selenium-example.crx");         File extensionFilePath = new File(path.toUri());              options.addExtensions(extensionFilePath);              driver = new EdgeDriver(options);         driver.get("https://www.selenium.dev/selenium/web/blank.html");         WebElement injected = driver.findElement(By.id("webextensions-selenium-example"));         Assertions.assertEquals(             "Content injected by webextensions-selenium-example", injected.getText());       }            @Test       public void excludeSwitches() {         EdgeOptions options = getDefaultEdgeOptions();              options.setExperimentalOption("excludeSwitches", List.of("disable-popup-blocking"));              driver = new EdgeDriver(options);       }            @Test       public void loggingPreferences() {         EdgeOptions options = getDefaultEdgeOptions();         LoggingPreferences logPrefs = new LoggingPreferences();         logPrefs.enable(LogType.PERFORMANCE, Level.ALL);         options.setCapability(EdgeOptions.LOGGING_PREFS, logPrefs);              driver = new EdgeDriver(options);         driver.get("https://www.selenium.dev");              LogEntries logEntries = driver.manage().logs().get(LogType.PERFORMANCE);         Assertions.assertFalse(logEntries.getAll().isEmpty());       }            @Test       public void logsToFile() throws IOException {         File logLocation = getTempFile("logsToFile", ".log");         EdgeDriverService service = new EdgeDriverService.Builder().withLogFile(logLocation).build();              driver = new EdgeDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         Assertions.assertTrue(fileContent.contains("Starting Microsoft Edge WebDriver"));       }            @Test       public void logsToConsole() throws IOException {         File logLocation = getTempFile("logsToConsole", ".log");         System.setOut(new PrintStream(logLocation));              EdgeDriverService service = new EdgeDriverService.Builder().withLogOutput(System.out).build();              driver = new EdgeDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         Assertions.assertTrue(fileContent.contains("Starting Microsoft Edge WebDriver"));       }            @Test       public void logsWithLevel() throws IOException {         File logLocation = getTempFile("logsWithLevel", ".log");         System.setProperty(EdgeDriverService.EDGE_DRIVER_LOG_PROPERTY, logLocation.getAbsolutePath());              EdgeDriverService service =             new EdgeDriverService.Builder().withLoglevel(ChromiumDriverLogLevel.DEBUG).build();              driver = new EdgeDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         Assertions.assertTrue(fileContent.contains("[DEBUG]:"));       }            @Test       public void configureDriverLogs() throws IOException {         File logLocation = getTempFile("configureDriverLogs", ".log");         System.setProperty(EdgeDriverService.EDGE_DRIVER_LOG_PROPERTY, logLocation.getAbsolutePath());         System.setProperty(             EdgeDriverService.EDGE_DRIVER_LOG_LEVEL_PROPERTY, ChromiumDriverLogLevel.DEBUG.toString());              EdgeDriverService service =             new EdgeDriverService.Builder().withAppendLog(true).withReadableTimestamp(true).build();              driver = new EdgeDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         Pattern pattern = Pattern.compile("\\[\\d\\d-\\d\\d-\\d\\d\\d\\d", Pattern.CASE_INSENSITIVE);         Assertions.assertTrue(pattern.matcher(fileContent).find());       }            @Test       public void disableBuildChecks() throws IOException {         File logLocation = getTempFile("disableBuildChecks", ".log");         System.setProperty(EdgeDriverService.EDGE_DRIVER_LOG_PROPERTY, logLocation.getAbsolutePath());         System.setProperty(             EdgeDriverService.EDGE_DRIVER_LOG_LEVEL_PROPERTY,             ChromiumDriverLogLevel.WARNING.toString());              EdgeDriverService service =             new EdgeDriverService.Builder().withBuildCheckDisabled(true).build();              driver = new EdgeDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         String expected =             "[WARNING]: You are using an unsupported command-line switch: --disable-build-check";         Assertions.assertTrue(fileContent.contains(expected));       }            private File getEdgeLocation() {         EdgeOptions options = getDefaultEdgeOptions();         options.setBrowserVersion("stable");         DriverFinder finder = new DriverFinder(EdgeDriverService.createDefaultService(), options);         return new File(finder.getBrowserPath());       }            @Test       public void setPermissions() {         EdgeDriver driver = new EdgeDriver();         driver.get("https://www.selenium.dev");              driver.setPermission("camera", "denied");              // Verify the permission state is 'denied'         String script = "return navigator.permissions.query({ name: 'camera' })" +                 "    .then(permissionStatus => permissionStatus.state);";         String permissionState = (String) driver.executeScript(script);              Assertions.assertEquals("denied", permissionState);         driver.quit();       }            @Test       public void setNetworkConditions() {         driver = new EdgeDriver();              ChromiumNetworkConditions networkConditions = new ChromiumNetworkConditions();         networkConditions.setOffline(false);         networkConditions.setLatency(java.time.Duration.ofMillis(20)); // 20 ms of latency         networkConditions.setDownloadThroughput(2000 * 1024 / 8); // 2000 kbps         networkConditions.setUploadThroughput(2000 * 1024 / 8);   // 2000 kbps              ((EdgeDriver) driver).setNetworkConditions(networkConditions);              driver.get("https://www.selenium.dev");              // Assert the network conditions are set as expected         ChromiumNetworkConditions actualConditions = ((EdgeDriver) driver).getNetworkConditions();         Assertions.assertAll(                 () -> Assertions.assertEquals(networkConditions.getOffline(), actualConditions.getOffline()),                 () -> Assertions.assertEquals(networkConditions.getLatency(), actualConditions.getLatency()),                 () -> Assertions.assertEquals(networkConditions.getDownloadThroughput(), actualConditions.getDownloadThroughput()),                 () -> Assertions.assertEquals(networkConditions.getUploadThroughput(), actualConditions.getUploadThroughput())         );         ((EdgeDriver) driver).deleteNetworkConditions();         driver.quit();       }            @Test       public void castFeatures() {         EdgeDriver driver = new EdgeDriver();              List<Map<String, String>> sinks = driver.getCastSinks();         if (!sinks.isEmpty()) {           String sinkName = sinks.get(0).get("name");           driver.startTabMirroring(sinkName);           driver.stopCasting(sinkName);         }              driver.quit();       }            @Test       public void getBrowserLogs() {         EdgeDriver driver = new EdgeDriver();         driver.get("https://www.selenium.dev/selenium/web/bidi/logEntryAdded.html");         WebElement consoleLogButton = driver.findElement(By.id("consoleError"));         consoleLogButton.click();              LogEntries logs = driver.manage().logs().get(LogType.BROWSER);              // Assert that at least one log contains the expected message         boolean logFound = false;         for (LogEntry log : logs) {           if (log.getMessage().contains("I am console error")) {             logFound = true;             break;           }         }              Assertions.assertTrue(logFound, "No matching log message found.");         driver.quit();       }     }     

**Note** : Java also allows setting console output by System Property;   Property key: `EdgeDriverService.EDGE_DRIVER_LOG_PROPERTY`   Property value: `DriverService.LOG_STDOUT` or `DriverService.LOG_STDERR`

[Selenium v4.11](https://github.com/SeleniumHQ/selenium/releases/tag/selenium-4.11.0)                   service = webdriver.EdgeService(log_output=subprocess.STDOUT)

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/python/tests/browsers/test_edge.py#L82)

##### examples/python/tests/browsers/test\_edge.py

Copy  Close               import os     import re     import subprocess     import pytest     from selenium import webdriver     from selenium.webdriver.common.by import By          def test_basic_options():         options = get_default_edge_options()         driver = webdriver.Edge(options=options)              driver.quit()               def test_args():         options = get_default_edge_options()              options.add_argument("--start-maximized")              driver = webdriver.Edge(options=options)         driver.get('http://selenium.dev')              driver.quit()               def test_set_browser_location(edge_bin):         options = get_default_edge_options()              options.binary_location = edge_bin              driver = webdriver.Edge(options=options)              driver.quit()               def test_add_extension():         options = get_default_edge_options()         extension_file_path = os.path.abspath("tests/extensions/webextensions-selenium-example.crx")              options.add_extension(extension_file_path)              driver = webdriver.Edge(options=options)         driver.get("https://www.selenium.dev/selenium/web/blank.html")              driver.quit()               def test_keep_browser_open():         options = get_default_edge_options()              options.add_experimental_option("detach", True)              driver = webdriver.Edge(options=options)         driver.get('http://selenium.dev')              driver.quit()               def test_exclude_switches():         options = get_default_edge_options()              options.add_experimental_option('excludeSwitches', ['disable-popup-blocking'])              driver = webdriver.Edge(options=options)         driver.get('http://selenium.dev')              driver.quit()               def test_log_to_file(log_path):         service = webdriver.EdgeService(log_output=log_path)              driver = webdriver.Edge(service=service)              with open(log_path, 'r') as fp:             assert "Starting Microsoft Edge WebDriver" in fp.readline()              driver.quit()               def test_log_to_stdout(capfd):         service = webdriver.EdgeService(log_output=subprocess.STDOUT)              driver = webdriver.Edge(service=service)              out, err = capfd.readouterr()         assert "Starting Microsoft Edge WebDriver" in out              driver.quit()               def test_log_level(log_path):         service = webdriver.EdgeService(service_args=['--log-level=DEBUG'], log_output=log_path)              driver = webdriver.Edge(service=service)              with open(log_path, 'r') as f:             assert '[DEBUG]' in f.read()              driver.quit()               def test_log_features(log_path):         service = webdriver.EdgeService(service_args=['--append-log', '--readable-timestamp'], log_output=log_path)              driver = webdriver.Edge(service=service)              with open(log_path, 'r') as f:             assert re.match(r"\[\d\d-\d\d-\d\d\d\d", f.read())              driver.quit()               def test_build_checks(log_path):         service = webdriver.EdgeService(service_args=['--disable-build-check'], log_output=log_path)              driver = webdriver.Edge(service=service)              expected = "[WARNING]: You are using an unsupported command-line switch: --disable-build-check"         with open(log_path, 'r') as f:             assert expected in f.read()              driver.quit()               def test_set_network_conditions():         driver = webdriver.Edge()              network_conditions = {             "offline": False,             "latency": 20,  # 20 ms of latency             "download_throughput": 2000 * 1024 / 8,  # 2000 kbps             "upload_throughput": 2000 * 1024 / 8,    # 2000 kbps         }         driver.set_network_conditions(**network_conditions)              driver.get("https://www.selenium.dev")              # check whether the network conditions are set         assert driver.get_network_conditions() == network_conditions              driver.quit()               def test_set_permissions():         driver = webdriver.Edge()         driver.get('https://www.selenium.dev')              driver.set_permissions('camera', 'denied')              assert get_permission_state(driver, 'camera') == 'denied'         driver.quit()               def get_permission_state(driver, name):         """Helper function to query the permission state."""         script = """         const callback = arguments[arguments.length - 1];         navigator.permissions.query({name: arguments[0]}).then(permissionStatus => {             callback(permissionStatus.state);         });         """         return driver.execute_async_script(script, name)               def test_cast_features():         driver = webdriver.Edge()              try:             sinks = driver.get_sinks()             if sinks:                 sink_name = sinks[0]['name']                 driver.start_tab_mirroring(sink_name)                 driver.stop_casting(sink_name)             else:                 pytest.skip("No available Cast sinks to test with.")         finally:             driver.quit()               def test_get_browser_logs():         driver = webdriver.Edge()         driver.get("https://www.selenium.dev/selenium/web/bidi/logEntryAdded.html")         driver.find_element(By.ID, "consoleError").click()              logs = driver.get_log("browser")              # Assert that at least one log contains the expected message         assert any("I am console error" in log['message'] for log in logs), "No matching log message found."         driver.quit()          def get_default_edge_options():         options = webdriver.EdgeOptions()         options.add_argument("--no-sandbox")         return options     

[Implementation Missing](https://github.com/SeleniumHQ/selenium)

`$stdout` and `$stderr` are both valid values

[Selenium v4.10](https://github.com/SeleniumHQ/selenium/releases/tag/selenium-4.10.0)                     service.log = $stdout

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/ruby/spec/browsers/edge_spec.rb#L76)

##### examples/ruby/spec/browsers/edge\_spec.rb

Copy  Close               # frozen_string_literal: true          require 'spec_helper'          RSpec.describe 'Edge' do       describe 'Options' do         let(:edge_location) { driver_finder && ENV.fetch('EDGE_BIN', nil) }              it 'basic options' do           options = Selenium::WebDriver::Options.edge           @driver = Selenium::WebDriver.for :edge, options: options         end              it 'add arguments' do           options = Selenium::WebDriver::Options.edge                options.args << '--start-maximized'                @driver = Selenium::WebDriver.for :edge, options: options         end              it 'sets location of binary' do           options = Selenium::WebDriver::Options.edge                options.binary = edge_location                @driver = Selenium::WebDriver.for :edge, options: options         end              it 'add extensions' do           extension_file_path = File.expand_path('../spec_support/extensions/webextensions-selenium-example.crx', __dir__)           options = Selenium::WebDriver::Options.edge                options.add_extension(extension_file_path)                @driver = Selenium::WebDriver.for :edge, options: options           @driver.get('https://www.selenium.dev/selenium/web/blank.html')           injected = @driver.find_element(:id, 'webextensions-selenium-example')           expect(injected.text).to eq 'Content injected by webextensions-selenium-example'         end              it 'keeps browser open' do           options = Selenium::WebDriver::Options.edge                options.detach = true                @driver = Selenium::WebDriver.for :edge, options: options         end              it 'excludes switches' do           options = Selenium::WebDriver::Options.edge                options.exclude_switches << 'disable-popup-blocking'                @driver = Selenium::WebDriver.for :edge, options: options         end       end            describe 'Service' do         let(:file_name) { File.expand_path('msedgedriver.log') }              after { FileUtils.rm_f(file_name) }              it 'logs to file' do           service = Selenium::WebDriver::Service.edge                service.log = file_name                @driver = Selenium::WebDriver.for :edge, service: service           expect(File.readlines(file_name).first).to include('Starting Microsoft Edge WebDriver')         end              it 'logs to console' do           service = Selenium::WebDriver::Service.edge                service.log = $stdout                expect {             @driver = Selenium::WebDriver.for :edge, service: service           }.to output(/Starting Microsoft Edge WebDriver/).to_stdout_from_any_process         end              it 'sets log level' do           service = Selenium::WebDriver::Service.edge           service.log = file_name                service.args << '--log-level=DEBUG'                @driver = Selenium::WebDriver.for :edge, service: service           expect(File.readlines(file_name).grep(/\[DEBUG\]:/).any?).to eq true         end              it 'sets log features' do           args = ["--log-path=#{file_name}", '--verbose']           service = Selenium::WebDriver::Service.edge(args: args)                service.args << '--append-log'           service.args << '--readable-timestamp'                @driver = Selenium::WebDriver.for :edge, service: service                expect(File.readlines(file_name).grep(/\[\d\d-\d\d-\d\d\d\d/).any?).to eq true         end              it 'disables build checks' do           service = Selenium::WebDriver::Service.edge log: file_name, args: ['--verbose']                service.args << '--disable-build-check'                @driver = Selenium::WebDriver.for :edge, service: service           warning = /\[WARNING\]: You are using an unsupported command-line switch: --disable-build-check/           expect(File.readlines(file_name).grep(warning).any?).to eq true         end       end            describe 'Special Features' do         it 'casts' do           @driver = Selenium::WebDriver.for :edge           sinks = @driver.cast_sinks           unless sinks.empty?             device_name = sinks.first['name']             @driver.start_cast_tab_mirroring(device_name)             expect { @driver.stop_casting(device_name) }.not_to raise_exception           end         end              it 'gets and sets network conditions' do           @driver = Selenium::WebDriver.for :edge           @driver.network_conditions = {offline: false, latency: 100, throughput: 200}           expect(@driver.network_conditions).to eq(             'offline' => false,             'latency' => 100,             'download_throughput' => 200,             'upload_throughput' => 200           )         end              it 'gets the browser logs' do           @driver = Selenium::WebDriver.for :edge           @driver.navigate.to 'https://www.selenium.dev/selenium/web/'           sleep 1           logs = @driver.logs.get(:browser)                expect(logs.first.message).to include 'Failed to load resource'         end              it 'sets permissions' do           @driver = Selenium::WebDriver.for :edge           @driver.navigate.to 'https://www.selenium.dev/selenium/web/'           @driver.add_permission('camera', 'denied')           @driver.add_permissions('clipboard-read' => 'denied', 'clipboard-write' => 'prompt')           expect(permission('camera')).to eq('denied')           expect(permission('clipboard-read')).to eq('denied')           expect(permission('clipboard-write')).to eq('prompt')         end       end            def driver_finder         options = Selenium::WebDriver::Options.edge(browser_version: 'stable')         service = Selenium::WebDriver::Service.edge         finder = Selenium::WebDriver::DriverFinder.new(options, service)         ENV['EDGEDRIVER_BIN'] = finder.driver_path         ENV['EDGE_BIN'] = finder.browser_path       end            def permission(name)         @driver.execute_async_script('callback = arguments[arguments.length - 1];' \                                      'callback(navigator.permissions.query({name: arguments[0]}));', name)['state']       end     end     

[Add Example](https://www.selenium.dev/documentation/about/contributing/#creating-examples)

[Add Example](https://www.selenium.dev/documentation/about/contributing/#creating-examples)

### Log level

There are 6 available log levels: `ALL`, `DEBUG`, `INFO`, `WARNING`, `SEVERE`, and `OFF`. Note that `--verbose` is equivalent to `--log-level=ALL` and `--silent` is equivalent to `--log-level=OFF`, so this example is just setting the log level generically:

  * Java   * Python   * CSharp   * Ruby   * JavaScript   * Kotlin

[Selenium v4.8](https://github.com/SeleniumHQ/selenium/releases/tag/selenium-4.8.0)                   EdgeDriverService service =             new EdgeDriverService.Builder().withLoglevel(ChromiumDriverLogLevel.DEBUG).build();

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/java/src/test/java/dev/selenium/browsers/EdgeTest.java#L127-L128)

##### examples/java/src/test/java/dev/selenium/browsers/EdgeTest.java

Copy  Close               package dev.selenium.browsers;          import dev.selenium.BaseTest;     import java.io.File;     import java.io.IOException;     import java.io.PrintStream;     import java.nio.file.Files;     import java.nio.file.Path;     import java.nio.file.Paths;     import java.util.List;     import java.util.Map;     import java.util.logging.Level;     import java.util.regex.Pattern;     import org.junit.jupiter.api.AfterEach;     import org.junit.jupiter.api.Assertions;     import org.junit.jupiter.api.Test;     import org.openqa.selenium.By;     import org.openqa.selenium.WebElement;     import org.openqa.selenium.chromium.ChromiumDriverLogLevel;     import org.openqa.selenium.chromium.ChromiumNetworkConditions;     import org.openqa.selenium.edge.EdgeDriver;     import org.openqa.selenium.edge.EdgeDriverService;     import org.openqa.selenium.edge.EdgeOptions;     import org.openqa.selenium.logging.*;     import org.openqa.selenium.remote.service.DriverFinder;                    public class EdgeTest extends BaseTest {       @AfterEach       public void clearProperties() {         System.clearProperty(EdgeDriverService.EDGE_DRIVER_LOG_PROPERTY);         System.clearProperty(EdgeDriverService.EDGE_DRIVER_LOG_LEVEL_PROPERTY);       }            @Test       public void basicOptions() {         EdgeOptions options = getDefaultEdgeOptions();         driver = new EdgeDriver(options);       }            @Test       public void arguments() {         EdgeOptions options = getDefaultEdgeOptions();              options.addArguments("--start-maximized");              driver = new EdgeDriver(options);       }            @Test       public void setBrowserLocation() {         EdgeOptions options = getDefaultEdgeOptions();              options.setBinary(getEdgeLocation());              driver = new EdgeDriver(options);       }            @Test       public void extensionOptions() {         EdgeOptions options = getDefaultEdgeOptions();         Path path = Paths.get("src/test/resources/extensions/webextensions-selenium-example.crx");         File extensionFilePath = new File(path.toUri());              options.addExtensions(extensionFilePath);              driver = new EdgeDriver(options);         driver.get("https://www.selenium.dev/selenium/web/blank.html");         WebElement injected = driver.findElement(By.id("webextensions-selenium-example"));         Assertions.assertEquals(             "Content injected by webextensions-selenium-example", injected.getText());       }            @Test       public void excludeSwitches() {         EdgeOptions options = getDefaultEdgeOptions();              options.setExperimentalOption("excludeSwitches", List.of("disable-popup-blocking"));              driver = new EdgeDriver(options);       }            @Test       public void loggingPreferences() {         EdgeOptions options = getDefaultEdgeOptions();         LoggingPreferences logPrefs = new LoggingPreferences();         logPrefs.enable(LogType.PERFORMANCE, Level.ALL);         options.setCapability(EdgeOptions.LOGGING_PREFS, logPrefs);              driver = new EdgeDriver(options);         driver.get("https://www.selenium.dev");              LogEntries logEntries = driver.manage().logs().get(LogType.PERFORMANCE);         Assertions.assertFalse(logEntries.getAll().isEmpty());       }            @Test       public void logsToFile() throws IOException {         File logLocation = getTempFile("logsToFile", ".log");         EdgeDriverService service = new EdgeDriverService.Builder().withLogFile(logLocation).build();              driver = new EdgeDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         Assertions.assertTrue(fileContent.contains("Starting Microsoft Edge WebDriver"));       }            @Test       public void logsToConsole() throws IOException {         File logLocation = getTempFile("logsToConsole", ".log");         System.setOut(new PrintStream(logLocation));              EdgeDriverService service = new EdgeDriverService.Builder().withLogOutput(System.out).build();              driver = new EdgeDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         Assertions.assertTrue(fileContent.contains("Starting Microsoft Edge WebDriver"));       }            @Test       public void logsWithLevel() throws IOException {         File logLocation = getTempFile("logsWithLevel", ".log");         System.setProperty(EdgeDriverService.EDGE_DRIVER_LOG_PROPERTY, logLocation.getAbsolutePath());              EdgeDriverService service =             new EdgeDriverService.Builder().withLoglevel(ChromiumDriverLogLevel.DEBUG).build();              driver = new EdgeDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         Assertions.assertTrue(fileContent.contains("[DEBUG]:"));       }            @Test       public void configureDriverLogs() throws IOException {         File logLocation = getTempFile("configureDriverLogs", ".log");         System.setProperty(EdgeDriverService.EDGE_DRIVER_LOG_PROPERTY, logLocation.getAbsolutePath());         System.setProperty(             EdgeDriverService.EDGE_DRIVER_LOG_LEVEL_PROPERTY, ChromiumDriverLogLevel.DEBUG.toString());              EdgeDriverService service =             new EdgeDriverService.Builder().withAppendLog(true).withReadableTimestamp(true).build();              driver = new EdgeDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         Pattern pattern = Pattern.compile("\\[\\d\\d-\\d\\d-\\d\\d\\d\\d", Pattern.CASE_INSENSITIVE);         Assertions.assertTrue(pattern.matcher(fileContent).find());       }            @Test       public void disableBuildChecks() throws IOException {         File logLocation = getTempFile("disableBuildChecks", ".log");         System.setProperty(EdgeDriverService.EDGE_DRIVER_LOG_PROPERTY, logLocation.getAbsolutePath());         System.setProperty(             EdgeDriverService.EDGE_DRIVER_LOG_LEVEL_PROPERTY,             ChromiumDriverLogLevel.WARNING.toString());              EdgeDriverService service =             new EdgeDriverService.Builder().withBuildCheckDisabled(true).build();              driver = new EdgeDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         String expected =             "[WARNING]: You are using an unsupported command-line switch: --disable-build-check";         Assertions.assertTrue(fileContent.contains(expected));       }            private File getEdgeLocation() {         EdgeOptions options = getDefaultEdgeOptions();         options.setBrowserVersion("stable");         DriverFinder finder = new DriverFinder(EdgeDriverService.createDefaultService(), options);         return new File(finder.getBrowserPath());       }            @Test       public void setPermissions() {         EdgeDriver driver = new EdgeDriver();         driver.get("https://www.selenium.dev");              driver.setPermission("camera", "denied");              // Verify the permission state is 'denied'         String script = "return navigator.permissions.query({ name: 'camera' })" +                 "    .then(permissionStatus => permissionStatus.state);";         String permissionState = (String) driver.executeScript(script);              Assertions.assertEquals("denied", permissionState);         driver.quit();       }            @Test       public void setNetworkConditions() {         driver = new EdgeDriver();              ChromiumNetworkConditions networkConditions = new ChromiumNetworkConditions();         networkConditions.setOffline(false);         networkConditions.setLatency(java.time.Duration.ofMillis(20)); // 20 ms of latency         networkConditions.setDownloadThroughput(2000 * 1024 / 8); // 2000 kbps         networkConditions.setUploadThroughput(2000 * 1024 / 8);   // 2000 kbps              ((EdgeDriver) driver).setNetworkConditions(networkConditions);              driver.get("https://www.selenium.dev");              // Assert the network conditions are set as expected         ChromiumNetworkConditions actualConditions = ((EdgeDriver) driver).getNetworkConditions();         Assertions.assertAll(                 () -> Assertions.assertEquals(networkConditions.getOffline(), actualConditions.getOffline()),                 () -> Assertions.assertEquals(networkConditions.getLatency(), actualConditions.getLatency()),                 () -> Assertions.assertEquals(networkConditions.getDownloadThroughput(), actualConditions.getDownloadThroughput()),                 () -> Assertions.assertEquals(networkConditions.getUploadThroughput(), actualConditions.getUploadThroughput())         );         ((EdgeDriver) driver).deleteNetworkConditions();         driver.quit();       }            @Test       public void castFeatures() {         EdgeDriver driver = new EdgeDriver();              List<Map<String, String>> sinks = driver.getCastSinks();         if (!sinks.isEmpty()) {           String sinkName = sinks.get(0).get("name");           driver.startTabMirroring(sinkName);           driver.stopCasting(sinkName);         }              driver.quit();       }            @Test       public void getBrowserLogs() {         EdgeDriver driver = new EdgeDriver();         driver.get("https://www.selenium.dev/selenium/web/bidi/logEntryAdded.html");         WebElement consoleLogButton = driver.findElement(By.id("consoleError"));         consoleLogButton.click();              LogEntries logs = driver.manage().logs().get(LogType.BROWSER);              // Assert that at least one log contains the expected message         boolean logFound = false;         for (LogEntry log : logs) {           if (log.getMessage().contains("I am console error")) {             logFound = true;             break;           }         }              Assertions.assertTrue(logFound, "No matching log message found.");         driver.quit();       }     }     

**Note** : Java also allows setting log level by System Property:   Property key: `EdgeDriverService.EDGE_DRIVER_LOG_LEVEL_PROPERTY`   Property value: String representation of `ChromiumDriverLogLevel` enum                   service = webdriver.EdgeService(service_args=['--log-level=DEBUG'], log_output=log_path)

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/python/tests/browsers/test_edge.py#L93)

##### examples/python/tests/browsers/test\_edge.py

Copy  Close               import os     import re     import subprocess     import pytest     from selenium import webdriver     from selenium.webdriver.common.by import By          def test_basic_options():         options = get_default_edge_options()         driver = webdriver.Edge(options=options)              driver.quit()               def test_args():         options = get_default_edge_options()              options.add_argument("--start-maximized")              driver = webdriver.Edge(options=options)         driver.get('http://selenium.dev')              driver.quit()               def test_set_browser_location(edge_bin):         options = get_default_edge_options()              options.binary_location = edge_bin              driver = webdriver.Edge(options=options)              driver.quit()               def test_add_extension():         options = get_default_edge_options()         extension_file_path = os.path.abspath("tests/extensions/webextensions-selenium-example.crx")              options.add_extension(extension_file_path)              driver = webdriver.Edge(options=options)         driver.get("https://www.selenium.dev/selenium/web/blank.html")              driver.quit()               def test_keep_browser_open():         options = get_default_edge_options()              options.add_experimental_option("detach", True)              driver = webdriver.Edge(options=options)         driver.get('http://selenium.dev')              driver.quit()               def test_exclude_switches():         options = get_default_edge_options()              options.add_experimental_option('excludeSwitches', ['disable-popup-blocking'])              driver = webdriver.Edge(options=options)         driver.get('http://selenium.dev')              driver.quit()               def test_log_to_file(log_path):         service = webdriver.EdgeService(log_output=log_path)              driver = webdriver.Edge(service=service)              with open(log_path, 'r') as fp:             assert "Starting Microsoft Edge WebDriver" in fp.readline()              driver.quit()               def test_log_to_stdout(capfd):         service = webdriver.EdgeService(log_output=subprocess.STDOUT)              driver = webdriver.Edge(service=service)              out, err = capfd.readouterr()         assert "Starting Microsoft Edge WebDriver" in out              driver.quit()               def test_log_level(log_path):         service = webdriver.EdgeService(service_args=['--log-level=DEBUG'], log_output=log_path)              driver = webdriver.Edge(service=service)              with open(log_path, 'r') as f:             assert '[DEBUG]' in f.read()              driver.quit()               def test_log_features(log_path):         service = webdriver.EdgeService(service_args=['--append-log', '--readable-timestamp'], log_output=log_path)              driver = webdriver.Edge(service=service)              with open(log_path, 'r') as f:             assert re.match(r"\[\d\d-\d\d-\d\d\d\d", f.read())              driver.quit()               def test_build_checks(log_path):         service = webdriver.EdgeService(service_args=['--disable-build-check'], log_output=log_path)              driver = webdriver.Edge(service=service)              expected = "[WARNING]: You are using an unsupported command-line switch: --disable-build-check"         with open(log_path, 'r') as f:             assert expected in f.read()              driver.quit()               def test_set_network_conditions():         driver = webdriver.Edge()              network_conditions = {             "offline": False,             "latency": 20,  # 20 ms of latency             "download_throughput": 2000 * 1024 / 8,  # 2000 kbps             "upload_throughput": 2000 * 1024 / 8,    # 2000 kbps         }         driver.set_network_conditions(**network_conditions)              driver.get("https://www.selenium.dev")              # check whether the network conditions are set         assert driver.get_network_conditions() == network_conditions              driver.quit()               def test_set_permissions():         driver = webdriver.Edge()         driver.get('https://www.selenium.dev')              driver.set_permissions('camera', 'denied')              assert get_permission_state(driver, 'camera') == 'denied'         driver.quit()               def get_permission_state(driver, name):         """Helper function to query the permission state."""         script = """         const callback = arguments[arguments.length - 1];         navigator.permissions.query({name: arguments[0]}).then(permissionStatus => {             callback(permissionStatus.state);         });         """         return driver.execute_async_script(script, name)               def test_cast_features():         driver = webdriver.Edge()              try:             sinks = driver.get_sinks()             if sinks:                 sink_name = sinks[0]['name']                 driver.start_tab_mirroring(sink_name)                 driver.stop_casting(sink_name)             else:                 pytest.skip("No available Cast sinks to test with.")         finally:             driver.quit()               def test_get_browser_logs():         driver = webdriver.Edge()         driver.get("https://www.selenium.dev/selenium/web/bidi/logEntryAdded.html")         driver.find_element(By.ID, "consoleError").click()              logs = driver.get_log("browser")              # Assert that at least one log contains the expected message         assert any("I am console error" in log['message'] for log in logs), "No matching log message found."         driver.quit()          def get_default_edge_options():         options = webdriver.EdgeOptions()         options.add_argument("--no-sandbox")         return options     

[Implementation Missing](https://github.com/SeleniumHQ/selenium)

[Selenium v4.10](https://github.com/SeleniumHQ/selenium/releases/tag/selenium-4.10.0)                     service.args << '--log-level=DEBUG'

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/ruby/spec/browsers/edge_spec.rb#L87)

##### examples/ruby/spec/browsers/edge\_spec.rb

Copy  Close               # frozen_string_literal: true          require 'spec_helper'          RSpec.describe 'Edge' do       describe 'Options' do         let(:edge_location) { driver_finder && ENV.fetch('EDGE_BIN', nil) }              it 'basic options' do           options = Selenium::WebDriver::Options.edge           @driver = Selenium::WebDriver.for :edge, options: options         end              it 'add arguments' do           options = Selenium::WebDriver::Options.edge                options.args << '--start-maximized'                @driver = Selenium::WebDriver.for :edge, options: options         end              it 'sets location of binary' do           options = Selenium::WebDriver::Options.edge                options.binary = edge_location                @driver = Selenium::WebDriver.for :edge, options: options         end              it 'add extensions' do           extension_file_path = File.expand_path('../spec_support/extensions/webextensions-selenium-example.crx', __dir__)           options = Selenium::WebDriver::Options.edge                options.add_extension(extension_file_path)                @driver = Selenium::WebDriver.for :edge, options: options           @driver.get('https://www.selenium.dev/selenium/web/blank.html')           injected = @driver.find_element(:id, 'webextensions-selenium-example')           expect(injected.text).to eq 'Content injected by webextensions-selenium-example'         end              it 'keeps browser open' do           options = Selenium::WebDriver::Options.edge                options.detach = true                @driver = Selenium::WebDriver.for :edge, options: options         end              it 'excludes switches' do           options = Selenium::WebDriver::Options.edge                options.exclude_switches << 'disable-popup-blocking'                @driver = Selenium::WebDriver.for :edge, options: options         end       end            describe 'Service' do         let(:file_name) { File.expand_path('msedgedriver.log') }              after { FileUtils.rm_f(file_name) }              it 'logs to file' do           service = Selenium::WebDriver::Service.edge                service.log = file_name                @driver = Selenium::WebDriver.for :edge, service: service           expect(File.readlines(file_name).first).to include('Starting Microsoft Edge WebDriver')         end              it 'logs to console' do           service = Selenium::WebDriver::Service.edge                service.log = $stdout                expect {             @driver = Selenium::WebDriver.for :edge, service: service           }.to output(/Starting Microsoft Edge WebDriver/).to_stdout_from_any_process         end              it 'sets log level' do           service = Selenium::WebDriver::Service.edge           service.log = file_name                service.args << '--log-level=DEBUG'                @driver = Selenium::WebDriver.for :edge, service: service           expect(File.readlines(file_name).grep(/\[DEBUG\]:/).any?).to eq true         end              it 'sets log features' do           args = ["--log-path=#{file_name}", '--verbose']           service = Selenium::WebDriver::Service.edge(args: args)                service.args << '--append-log'           service.args << '--readable-timestamp'                @driver = Selenium::WebDriver.for :edge, service: service                expect(File.readlines(file_name).grep(/\[\d\d-\d\d-\d\d\d\d/).any?).to eq true         end              it 'disables build checks' do           service = Selenium::WebDriver::Service.edge log: file_name, args: ['--verbose']                service.args << '--disable-build-check'                @driver = Selenium::WebDriver.for :edge, service: service           warning = /\[WARNING\]: You are using an unsupported command-line switch: --disable-build-check/           expect(File.readlines(file_name).grep(warning).any?).to eq true         end       end            describe 'Special Features' do         it 'casts' do           @driver = Selenium::WebDriver.for :edge           sinks = @driver.cast_sinks           unless sinks.empty?             device_name = sinks.first['name']             @driver.start_cast_tab_mirroring(device_name)             expect { @driver.stop_casting(device_name) }.not_to raise_exception           end         end              it 'gets and sets network conditions' do           @driver = Selenium::WebDriver.for :edge           @driver.network_conditions = {offline: false, latency: 100, throughput: 200}           expect(@driver.network_conditions).to eq(             'offline' => false,             'latency' => 100,             'download_throughput' => 200,             'upload_throughput' => 200           )         end              it 'gets the browser logs' do           @driver = Selenium::WebDriver.for :edge           @driver.navigate.to 'https://www.selenium.dev/selenium/web/'           sleep 1           logs = @driver.logs.get(:browser)                expect(logs.first.message).to include 'Failed to load resource'         end              it 'sets permissions' do           @driver = Selenium::WebDriver.for :edge           @driver.navigate.to 'https://www.selenium.dev/selenium/web/'           @driver.add_permission('camera', 'denied')           @driver.add_permissions('clipboard-read' => 'denied', 'clipboard-write' => 'prompt')           expect(permission('camera')).to eq('denied')           expect(permission('clipboard-read')).to eq('denied')           expect(permission('clipboard-write')).to eq('prompt')         end       end            def driver_finder         options = Selenium::WebDriver::Options.edge(browser_version: 'stable')         service = Selenium::WebDriver::Service.edge         finder = Selenium::WebDriver::DriverFinder.new(options, service)         ENV['EDGEDRIVER_BIN'] = finder.driver_path         ENV['EDGE_BIN'] = finder.browser_path       end            def permission(name)         @driver.execute_async_script('callback = arguments[arguments.length - 1];' \                                      'callback(navigator.permissions.query({name: arguments[0]}));', name)['state']       end     end     

[Add Example](https://www.selenium.dev/documentation/about/contributing/#creating-examples)

[Add Example](https://www.selenium.dev/documentation/about/contributing/#creating-examples)

### Log file features

There are 2 features that are only available when logging to a file:

  * append log   * readable timestamps

To use them, you need to also explicitly specify the log path and log level. The log output will be managed by the driver, not the process, so minor differences may be seen.

  * Java   * Python   * CSharp   * Ruby   * JavaScript   * Kotlin

[Selenium v4.8](https://github.com/SeleniumHQ/selenium/releases/tag/selenium-4.8.0)                   EdgeDriverService service =             new EdgeDriverService.Builder().withAppendLog(true).withReadableTimestamp(true).build();

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/java/src/test/java/dev/selenium/browsers/EdgeTest.java#L143-L144)

##### examples/java/src/test/java/dev/selenium/browsers/EdgeTest.java

Copy  Close               package dev.selenium.browsers;          import dev.selenium.BaseTest;     import java.io.File;     import java.io.IOException;     import java.io.PrintStream;     import java.nio.file.Files;     import java.nio.file.Path;     import java.nio.file.Paths;     import java.util.List;     import java.util.Map;     import java.util.logging.Level;     import java.util.regex.Pattern;     import org.junit.jupiter.api.AfterEach;     import org.junit.jupiter.api.Assertions;     import org.junit.jupiter.api.Test;     import org.openqa.selenium.By;     import org.openqa.selenium.WebElement;     import org.openqa.selenium.chromium.ChromiumDriverLogLevel;     import org.openqa.selenium.chromium.ChromiumNetworkConditions;     import org.openqa.selenium.edge.EdgeDriver;     import org.openqa.selenium.edge.EdgeDriverService;     import org.openqa.selenium.edge.EdgeOptions;     import org.openqa.selenium.logging.*;     import org.openqa.selenium.remote.service.DriverFinder;                    public class EdgeTest extends BaseTest {       @AfterEach       public void clearProperties() {         System.clearProperty(EdgeDriverService.EDGE_DRIVER_LOG_PROPERTY);         System.clearProperty(EdgeDriverService.EDGE_DRIVER_LOG_LEVEL_PROPERTY);       }            @Test       public void basicOptions() {         EdgeOptions options = getDefaultEdgeOptions();         driver = new EdgeDriver(options);       }            @Test       public void arguments() {         EdgeOptions options = getDefaultEdgeOptions();              options.addArguments("--start-maximized");              driver = new EdgeDriver(options);       }            @Test       public void setBrowserLocation() {         EdgeOptions options = getDefaultEdgeOptions();              options.setBinary(getEdgeLocation());              driver = new EdgeDriver(options);       }            @Test       public void extensionOptions() {         EdgeOptions options = getDefaultEdgeOptions();         Path path = Paths.get("src/test/resources/extensions/webextensions-selenium-example.crx");         File extensionFilePath = new File(path.toUri());              options.addExtensions(extensionFilePath);              driver = new EdgeDriver(options);         driver.get("https://www.selenium.dev/selenium/web/blank.html");         WebElement injected = driver.findElement(By.id("webextensions-selenium-example"));         Assertions.assertEquals(             "Content injected by webextensions-selenium-example", injected.getText());       }            @Test       public void excludeSwitches() {         EdgeOptions options = getDefaultEdgeOptions();              options.setExperimentalOption("excludeSwitches", List.of("disable-popup-blocking"));              driver = new EdgeDriver(options);       }            @Test       public void loggingPreferences() {         EdgeOptions options = getDefaultEdgeOptions();         LoggingPreferences logPrefs = new LoggingPreferences();         logPrefs.enable(LogType.PERFORMANCE, Level.ALL);         options.setCapability(EdgeOptions.LOGGING_PREFS, logPrefs);              driver = new EdgeDriver(options);         driver.get("https://www.selenium.dev");              LogEntries logEntries = driver.manage().logs().get(LogType.PERFORMANCE);         Assertions.assertFalse(logEntries.getAll().isEmpty());       }            @Test       public void logsToFile() throws IOException {         File logLocation = getTempFile("logsToFile", ".log");         EdgeDriverService service = new EdgeDriverService.Builder().withLogFile(logLocation).build();              driver = new EdgeDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         Assertions.assertTrue(fileContent.contains("Starting Microsoft Edge WebDriver"));       }            @Test       public void logsToConsole() throws IOException {         File logLocation = getTempFile("logsToConsole", ".log");         System.setOut(new PrintStream(logLocation));              EdgeDriverService service = new EdgeDriverService.Builder().withLogOutput(System.out).build();              driver = new EdgeDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         Assertions.assertTrue(fileContent.contains("Starting Microsoft Edge WebDriver"));       }            @Test       public void logsWithLevel() throws IOException {         File logLocation = getTempFile("logsWithLevel", ".log");         System.setProperty(EdgeDriverService.EDGE_DRIVER_LOG_PROPERTY, logLocation.getAbsolutePath());              EdgeDriverService service =             new EdgeDriverService.Builder().withLoglevel(ChromiumDriverLogLevel.DEBUG).build();              driver = new EdgeDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         Assertions.assertTrue(fileContent.contains("[DEBUG]:"));       }            @Test       public void configureDriverLogs() throws IOException {         File logLocation = getTempFile("configureDriverLogs", ".log");         System.setProperty(EdgeDriverService.EDGE_DRIVER_LOG_PROPERTY, logLocation.getAbsolutePath());         System.setProperty(             EdgeDriverService.EDGE_DRIVER_LOG_LEVEL_PROPERTY, ChromiumDriverLogLevel.DEBUG.toString());              EdgeDriverService service =             new EdgeDriverService.Builder().withAppendLog(true).withReadableTimestamp(true).build();              driver = new EdgeDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         Pattern pattern = Pattern.compile("\\[\\d\\d-\\d\\d-\\d\\d\\d\\d", Pattern.CASE_INSENSITIVE);         Assertions.assertTrue(pattern.matcher(fileContent).find());       }            @Test       public void disableBuildChecks() throws IOException {         File logLocation = getTempFile("disableBuildChecks", ".log");         System.setProperty(EdgeDriverService.EDGE_DRIVER_LOG_PROPERTY, logLocation.getAbsolutePath());         System.setProperty(             EdgeDriverService.EDGE_DRIVER_LOG_LEVEL_PROPERTY,             ChromiumDriverLogLevel.WARNING.toString());              EdgeDriverService service =             new EdgeDriverService.Builder().withBuildCheckDisabled(true).build();              driver = new EdgeDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         String expected =             "[WARNING]: You are using an unsupported command-line switch: --disable-build-check";         Assertions.assertTrue(fileContent.contains(expected));       }            private File getEdgeLocation() {         EdgeOptions options = getDefaultEdgeOptions();         options.setBrowserVersion("stable");         DriverFinder finder = new DriverFinder(EdgeDriverService.createDefaultService(), options);         return new File(finder.getBrowserPath());       }            @Test       public void setPermissions() {         EdgeDriver driver = new EdgeDriver();         driver.get("https://www.selenium.dev");              driver.setPermission("camera", "denied");              // Verify the permission state is 'denied'         String script = "return navigator.permissions.query({ name: 'camera' })" +                 "    .then(permissionStatus => permissionStatus.state);";         String permissionState = (String) driver.executeScript(script);              Assertions.assertEquals("denied", permissionState);         driver.quit();       }            @Test       public void setNetworkConditions() {         driver = new EdgeDriver();              ChromiumNetworkConditions networkConditions = new ChromiumNetworkConditions();         networkConditions.setOffline(false);         networkConditions.setLatency(java.time.Duration.ofMillis(20)); // 20 ms of latency         networkConditions.setDownloadThroughput(2000 * 1024 / 8); // 2000 kbps         networkConditions.setUploadThroughput(2000 * 1024 / 8);   // 2000 kbps              ((EdgeDriver) driver).setNetworkConditions(networkConditions);              driver.get("https://www.selenium.dev");              // Assert the network conditions are set as expected         ChromiumNetworkConditions actualConditions = ((EdgeDriver) driver).getNetworkConditions();         Assertions.assertAll(                 () -> Assertions.assertEquals(networkConditions.getOffline(), actualConditions.getOffline()),                 () -> Assertions.assertEquals(networkConditions.getLatency(), actualConditions.getLatency()),                 () -> Assertions.assertEquals(networkConditions.getDownloadThroughput(), actualConditions.getDownloadThroughput()),                 () -> Assertions.assertEquals(networkConditions.getUploadThroughput(), actualConditions.getUploadThroughput())         );         ((EdgeDriver) driver).deleteNetworkConditions();         driver.quit();       }            @Test       public void castFeatures() {         EdgeDriver driver = new EdgeDriver();              List<Map<String, String>> sinks = driver.getCastSinks();         if (!sinks.isEmpty()) {           String sinkName = sinks.get(0).get("name");           driver.startTabMirroring(sinkName);           driver.stopCasting(sinkName);         }              driver.quit();       }            @Test       public void getBrowserLogs() {         EdgeDriver driver = new EdgeDriver();         driver.get("https://www.selenium.dev/selenium/web/bidi/logEntryAdded.html");         WebElement consoleLogButton = driver.findElement(By.id("consoleError"));         consoleLogButton.click();              LogEntries logs = driver.manage().logs().get(LogType.BROWSER);              // Assert that at least one log contains the expected message         boolean logFound = false;         for (LogEntry log : logs) {           if (log.getMessage().contains("I am console error")) {             logFound = true;             break;           }         }              Assertions.assertTrue(logFound, "No matching log message found.");         driver.quit();       }     }     

**Note** : Java also allows toggling these features by System Property:   Property keys: `EdgeDriverService.EDGE_DRIVER_APPEND_LOG_PROPERTY` and `EdgeDriverService.EDGE_DRIVER_READABLE_TIMESTAMP`   Property value: `"true"` or `"false"`                   service = webdriver.EdgeService(service_args=['--append-log', '--readable-timestamp'], log_output=log_path)

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/python/tests/browsers/test_edge.py#L104)

##### examples/python/tests/browsers/test\_edge.py

Copy  Close               import os     import re     import subprocess     import pytest     from selenium import webdriver     from selenium.webdriver.common.by import By          def test_basic_options():         options = get_default_edge_options()         driver = webdriver.Edge(options=options)              driver.quit()               def test_args():         options = get_default_edge_options()              options.add_argument("--start-maximized")              driver = webdriver.Edge(options=options)         driver.get('http://selenium.dev')              driver.quit()               def test_set_browser_location(edge_bin):         options = get_default_edge_options()              options.binary_location = edge_bin              driver = webdriver.Edge(options=options)              driver.quit()               def test_add_extension():         options = get_default_edge_options()         extension_file_path = os.path.abspath("tests/extensions/webextensions-selenium-example.crx")              options.add_extension(extension_file_path)              driver = webdriver.Edge(options=options)         driver.get("https://www.selenium.dev/selenium/web/blank.html")              driver.quit()               def test_keep_browser_open():         options = get_default_edge_options()              options.add_experimental_option("detach", True)              driver = webdriver.Edge(options=options)         driver.get('http://selenium.dev')              driver.quit()               def test_exclude_switches():         options = get_default_edge_options()              options.add_experimental_option('excludeSwitches', ['disable-popup-blocking'])              driver = webdriver.Edge(options=options)         driver.get('http://selenium.dev')              driver.quit()               def test_log_to_file(log_path):         service = webdriver.EdgeService(log_output=log_path)              driver = webdriver.Edge(service=service)              with open(log_path, 'r') as fp:             assert "Starting Microsoft Edge WebDriver" in fp.readline()              driver.quit()               def test_log_to_stdout(capfd):         service = webdriver.EdgeService(log_output=subprocess.STDOUT)              driver = webdriver.Edge(service=service)              out, err = capfd.readouterr()         assert "Starting Microsoft Edge WebDriver" in out              driver.quit()               def test_log_level(log_path):         service = webdriver.EdgeService(service_args=['--log-level=DEBUG'], log_output=log_path)              driver = webdriver.Edge(service=service)              with open(log_path, 'r') as f:             assert '[DEBUG]' in f.read()              driver.quit()               def test_log_features(log_path):         service = webdriver.EdgeService(service_args=['--append-log', '--readable-timestamp'], log_output=log_path)              driver = webdriver.Edge(service=service)              with open(log_path, 'r') as f:             assert re.match(r"\[\d\d-\d\d-\d\d\d\d", f.read())              driver.quit()               def test_build_checks(log_path):         service = webdriver.EdgeService(service_args=['--disable-build-check'], log_output=log_path)              driver = webdriver.Edge(service=service)              expected = "[WARNING]: You are using an unsupported command-line switch: --disable-build-check"         with open(log_path, 'r') as f:             assert expected in f.read()              driver.quit()               def test_set_network_conditions():         driver = webdriver.Edge()              network_conditions = {             "offline": False,             "latency": 20,  # 20 ms of latency             "download_throughput": 2000 * 1024 / 8,  # 2000 kbps             "upload_throughput": 2000 * 1024 / 8,    # 2000 kbps         }         driver.set_network_conditions(**network_conditions)              driver.get("https://www.selenium.dev")              # check whether the network conditions are set         assert driver.get_network_conditions() == network_conditions              driver.quit()               def test_set_permissions():         driver = webdriver.Edge()         driver.get('https://www.selenium.dev')              driver.set_permissions('camera', 'denied')              assert get_permission_state(driver, 'camera') == 'denied'         driver.quit()               def get_permission_state(driver, name):         """Helper function to query the permission state."""         script = """         const callback = arguments[arguments.length - 1];         navigator.permissions.query({name: arguments[0]}).then(permissionStatus => {             callback(permissionStatus.state);         });         """         return driver.execute_async_script(script, name)               def test_cast_features():         driver = webdriver.Edge()              try:             sinks = driver.get_sinks()             if sinks:                 sink_name = sinks[0]['name']                 driver.start_tab_mirroring(sink_name)                 driver.stop_casting(sink_name)             else:                 pytest.skip("No available Cast sinks to test with.")         finally:             driver.quit()               def test_get_browser_logs():         driver = webdriver.Edge()         driver.get("https://www.selenium.dev/selenium/web/bidi/logEntryAdded.html")         driver.find_element(By.ID, "consoleError").click()              logs = driver.get_log("browser")              # Assert that at least one log contains the expected message         assert any("I am console error" in log['message'] for log in logs), "No matching log message found."         driver.quit()          def get_default_edge_options():         options = webdriver.EdgeOptions()         options.add_argument("--no-sandbox")         return options     

[Implementation Missing](https://github.com/SeleniumHQ/selenium)

[Selenium v4.8](https://github.com/SeleniumHQ/selenium/releases/tag/selenium-4.8.0)                     service.args << '--append-log'           service.args << '--readable-timestamp'

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/ruby/spec/browsers/edge_spec.rb#L97-L98)

##### examples/ruby/spec/browsers/edge\_spec.rb

Copy  Close               # frozen_string_literal: true          require 'spec_helper'          RSpec.describe 'Edge' do       describe 'Options' do         let(:edge_location) { driver_finder && ENV.fetch('EDGE_BIN', nil) }              it 'basic options' do           options = Selenium::WebDriver::Options.edge           @driver = Selenium::WebDriver.for :edge, options: options         end              it 'add arguments' do           options = Selenium::WebDriver::Options.edge                options.args << '--start-maximized'                @driver = Selenium::WebDriver.for :edge, options: options         end              it 'sets location of binary' do           options = Selenium::WebDriver::Options.edge                options.binary = edge_location                @driver = Selenium::WebDriver.for :edge, options: options         end              it 'add extensions' do           extension_file_path = File.expand_path('../spec_support/extensions/webextensions-selenium-example.crx', __dir__)           options = Selenium::WebDriver::Options.edge                options.add_extension(extension_file_path)                @driver = Selenium::WebDriver.for :edge, options: options           @driver.get('https://www.selenium.dev/selenium/web/blank.html')           injected = @driver.find_element(:id, 'webextensions-selenium-example')           expect(injected.text).to eq 'Content injected by webextensions-selenium-example'         end              it 'keeps browser open' do           options = Selenium::WebDriver::Options.edge                options.detach = true                @driver = Selenium::WebDriver.for :edge, options: options         end              it 'excludes switches' do           options = Selenium::WebDriver::Options.edge                options.exclude_switches << 'disable-popup-blocking'                @driver = Selenium::WebDriver.for :edge, options: options         end       end            describe 'Service' do         let(:file_name) { File.expand_path('msedgedriver.log') }              after { FileUtils.rm_f(file_name) }              it 'logs to file' do           service = Selenium::WebDriver::Service.edge                service.log = file_name                @driver = Selenium::WebDriver.for :edge, service: service           expect(File.readlines(file_name).first).to include('Starting Microsoft Edge WebDriver')         end              it 'logs to console' do           service = Selenium::WebDriver::Service.edge                service.log = $stdout                expect {             @driver = Selenium::WebDriver.for :edge, service: service           }.to output(/Starting Microsoft Edge WebDriver/).to_stdout_from_any_process         end              it 'sets log level' do           service = Selenium::WebDriver::Service.edge           service.log = file_name                service.args << '--log-level=DEBUG'                @driver = Selenium::WebDriver.for :edge, service: service           expect(File.readlines(file_name).grep(/\[DEBUG\]:/).any?).to eq true         end              it 'sets log features' do           args = ["--log-path=#{file_name}", '--verbose']           service = Selenium::WebDriver::Service.edge(args: args)                service.args << '--append-log'           service.args << '--readable-timestamp'                @driver = Selenium::WebDriver.for :edge, service: service                expect(File.readlines(file_name).grep(/\[\d\d-\d\d-\d\d\d\d/).any?).to eq true         end              it 'disables build checks' do           service = Selenium::WebDriver::Service.edge log: file_name, args: ['--verbose']                service.args << '--disable-build-check'                @driver = Selenium::WebDriver.for :edge, service: service           warning = /\[WARNING\]: You are using an unsupported command-line switch: --disable-build-check/           expect(File.readlines(file_name).grep(warning).any?).to eq true         end       end            describe 'Special Features' do         it 'casts' do           @driver = Selenium::WebDriver.for :edge           sinks = @driver.cast_sinks           unless sinks.empty?             device_name = sinks.first['name']             @driver.start_cast_tab_mirroring(device_name)             expect { @driver.stop_casting(device_name) }.not_to raise_exception           end         end              it 'gets and sets network conditions' do           @driver = Selenium::WebDriver.for :edge           @driver.network_conditions = {offline: false, latency: 100, throughput: 200}           expect(@driver.network_conditions).to eq(             'offline' => false,             'latency' => 100,             'download_throughput' => 200,             'upload_throughput' => 200           )         end              it 'gets the browser logs' do           @driver = Selenium::WebDriver.for :edge           @driver.navigate.to 'https://www.selenium.dev/selenium/web/'           sleep 1           logs = @driver.logs.get(:browser)                expect(logs.first.message).to include 'Failed to load resource'         end              it 'sets permissions' do           @driver = Selenium::WebDriver.for :edge           @driver.navigate.to 'https://www.selenium.dev/selenium/web/'           @driver.add_permission('camera', 'denied')           @driver.add_permissions('clipboard-read' => 'denied', 'clipboard-write' => 'prompt')           expect(permission('camera')).to eq('denied')           expect(permission('clipboard-read')).to eq('denied')           expect(permission('clipboard-write')).to eq('prompt')         end       end            def driver_finder         options = Selenium::WebDriver::Options.edge(browser_version: 'stable')         service = Selenium::WebDriver::Service.edge         finder = Selenium::WebDriver::DriverFinder.new(options, service)         ENV['EDGEDRIVER_BIN'] = finder.driver_path         ENV['EDGE_BIN'] = finder.browser_path       end            def permission(name)         @driver.execute_async_script('callback = arguments[arguments.length - 1];' \                                      'callback(navigator.permissions.query({name: arguments[0]}));', name)['state']       end     end     

[Add Example](https://www.selenium.dev/documentation/about/contributing/#creating-examples)

[Add Example](https://www.selenium.dev/documentation/about/contributing/#creating-examples)

### Disabling build check

Edge browser and msedgedriver versions should match, and if they don’t the driver will error. If you disable the build check, you can force the driver to be used with any version of Edge. Note that this is an unsupported feature, and bugs will not be investigated.

  * Java   * Python   * CSharp   * Ruby   * JavaScript   * Kotlin

[Selenium v4.8](https://github.com/SeleniumHQ/selenium/releases/tag/selenium-4.8.0)                   EdgeDriverService service =             new EdgeDriverService.Builder().withBuildCheckDisabled(true).build();

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/java/src/test/java/dev/selenium/browsers/EdgeTest.java#L161-L162)

##### examples/java/src/test/java/dev/selenium/browsers/EdgeTest.java

Copy  Close               package dev.selenium.browsers;          import dev.selenium.BaseTest;     import java.io.File;     import java.io.IOException;     import java.io.PrintStream;     import java.nio.file.Files;     import java.nio.file.Path;     import java.nio.file.Paths;     import java.util.List;     import java.util.Map;     import java.util.logging.Level;     import java.util.regex.Pattern;     import org.junit.jupiter.api.AfterEach;     import org.junit.jupiter.api.Assertions;     import org.junit.jupiter.api.Test;     import org.openqa.selenium.By;     import org.openqa.selenium.WebElement;     import org.openqa.selenium.chromium.ChromiumDriverLogLevel;     import org.openqa.selenium.chromium.ChromiumNetworkConditions;     import org.openqa.selenium.edge.EdgeDriver;     import org.openqa.selenium.edge.EdgeDriverService;     import org.openqa.selenium.edge.EdgeOptions;     import org.openqa.selenium.logging.*;     import org.openqa.selenium.remote.service.DriverFinder;                    public class EdgeTest extends BaseTest {       @AfterEach       public void clearProperties() {         System.clearProperty(EdgeDriverService.EDGE_DRIVER_LOG_PROPERTY);         System.clearProperty(EdgeDriverService.EDGE_DRIVER_LOG_LEVEL_PROPERTY);       }            @Test       public void basicOptions() {         EdgeOptions options = getDefaultEdgeOptions();         driver = new EdgeDriver(options);       }            @Test       public void arguments() {         EdgeOptions options = getDefaultEdgeOptions();              options.addArguments("--start-maximized");              driver = new EdgeDriver(options);       }            @Test       public void setBrowserLocation() {         EdgeOptions options = getDefaultEdgeOptions();              options.setBinary(getEdgeLocation());              driver = new EdgeDriver(options);       }            @Test       public void extensionOptions() {         EdgeOptions options = getDefaultEdgeOptions();         Path path = Paths.get("src/test/resources/extensions/webextensions-selenium-example.crx");         File extensionFilePath = new File(path.toUri());              options.addExtensions(extensionFilePath);              driver = new EdgeDriver(options);         driver.get("https://www.selenium.dev/selenium/web/blank.html");         WebElement injected = driver.findElement(By.id("webextensions-selenium-example"));         Assertions.assertEquals(             "Content injected by webextensions-selenium-example", injected.getText());       }            @Test       public void excludeSwitches() {         EdgeOptions options = getDefaultEdgeOptions();              options.setExperimentalOption("excludeSwitches", List.of("disable-popup-blocking"));              driver = new EdgeDriver(options);       }            @Test       public void loggingPreferences() {         EdgeOptions options = getDefaultEdgeOptions();         LoggingPreferences logPrefs = new LoggingPreferences();         logPrefs.enable(LogType.PERFORMANCE, Level.ALL);         options.setCapability(EdgeOptions.LOGGING_PREFS, logPrefs);              driver = new EdgeDriver(options);         driver.get("https://www.selenium.dev");              LogEntries logEntries = driver.manage().logs().get(LogType.PERFORMANCE);         Assertions.assertFalse(logEntries.getAll().isEmpty());       }            @Test       public void logsToFile() throws IOException {         File logLocation = getTempFile("logsToFile", ".log");         EdgeDriverService service = new EdgeDriverService.Builder().withLogFile(logLocation).build();              driver = new EdgeDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         Assertions.assertTrue(fileContent.contains("Starting Microsoft Edge WebDriver"));       }            @Test       public void logsToConsole() throws IOException {         File logLocation = getTempFile("logsToConsole", ".log");         System.setOut(new PrintStream(logLocation));              EdgeDriverService service = new EdgeDriverService.Builder().withLogOutput(System.out).build();              driver = new EdgeDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         Assertions.assertTrue(fileContent.contains("Starting Microsoft Edge WebDriver"));       }            @Test       public void logsWithLevel() throws IOException {         File logLocation = getTempFile("logsWithLevel", ".log");         System.setProperty(EdgeDriverService.EDGE_DRIVER_LOG_PROPERTY, logLocation.getAbsolutePath());              EdgeDriverService service =             new EdgeDriverService.Builder().withLoglevel(ChromiumDriverLogLevel.DEBUG).build();              driver = new EdgeDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         Assertions.assertTrue(fileContent.contains("[DEBUG]:"));       }            @Test       public void configureDriverLogs() throws IOException {         File logLocation = getTempFile("configureDriverLogs", ".log");         System.setProperty(EdgeDriverService.EDGE_DRIVER_LOG_PROPERTY, logLocation.getAbsolutePath());         System.setProperty(             EdgeDriverService.EDGE_DRIVER_LOG_LEVEL_PROPERTY, ChromiumDriverLogLevel.DEBUG.toString());              EdgeDriverService service =             new EdgeDriverService.Builder().withAppendLog(true).withReadableTimestamp(true).build();              driver = new EdgeDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         Pattern pattern = Pattern.compile("\\[\\d\\d-\\d\\d-\\d\\d\\d\\d", Pattern.CASE_INSENSITIVE);         Assertions.assertTrue(pattern.matcher(fileContent).find());       }            @Test       public void disableBuildChecks() throws IOException {         File logLocation = getTempFile("disableBuildChecks", ".log");         System.setProperty(EdgeDriverService.EDGE_DRIVER_LOG_PROPERTY, logLocation.getAbsolutePath());         System.setProperty(             EdgeDriverService.EDGE_DRIVER_LOG_LEVEL_PROPERTY,             ChromiumDriverLogLevel.WARNING.toString());              EdgeDriverService service =             new EdgeDriverService.Builder().withBuildCheckDisabled(true).build();              driver = new EdgeDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         String expected =             "[WARNING]: You are using an unsupported command-line switch: --disable-build-check";         Assertions.assertTrue(fileContent.contains(expected));       }            private File getEdgeLocation() {         EdgeOptions options = getDefaultEdgeOptions();         options.setBrowserVersion("stable");         DriverFinder finder = new DriverFinder(EdgeDriverService.createDefaultService(), options);         return new File(finder.getBrowserPath());       }            @Test       public void setPermissions() {         EdgeDriver driver = new EdgeDriver();         driver.get("https://www.selenium.dev");              driver.setPermission("camera", "denied");              // Verify the permission state is 'denied'         String script = "return navigator.permissions.query({ name: 'camera' })" +                 "    .then(permissionStatus => permissionStatus.state);";         String permissionState = (String) driver.executeScript(script);              Assertions.assertEquals("denied", permissionState);         driver.quit();       }            @Test       public void setNetworkConditions() {         driver = new EdgeDriver();              ChromiumNetworkConditions networkConditions = new ChromiumNetworkConditions();         networkConditions.setOffline(false);         networkConditions.setLatency(java.time.Duration.ofMillis(20)); // 20 ms of latency         networkConditions.setDownloadThroughput(2000 * 1024 / 8); // 2000 kbps         networkConditions.setUploadThroughput(2000 * 1024 / 8);   // 2000 kbps              ((EdgeDriver) driver).setNetworkConditions(networkConditions);              driver.get("https://www.selenium.dev");              // Assert the network conditions are set as expected         ChromiumNetworkConditions actualConditions = ((EdgeDriver) driver).getNetworkConditions();         Assertions.assertAll(                 () -> Assertions.assertEquals(networkConditions.getOffline(), actualConditions.getOffline()),                 () -> Assertions.assertEquals(networkConditions.getLatency(), actualConditions.getLatency()),                 () -> Assertions.assertEquals(networkConditions.getDownloadThroughput(), actualConditions.getDownloadThroughput()),                 () -> Assertions.assertEquals(networkConditions.getUploadThroughput(), actualConditions.getUploadThroughput())         );         ((EdgeDriver) driver).deleteNetworkConditions();         driver.quit();       }            @Test       public void castFeatures() {         EdgeDriver driver = new EdgeDriver();              List<Map<String, String>> sinks = driver.getCastSinks();         if (!sinks.isEmpty()) {           String sinkName = sinks.get(0).get("name");           driver.startTabMirroring(sinkName);           driver.stopCasting(sinkName);         }              driver.quit();       }            @Test       public void getBrowserLogs() {         EdgeDriver driver = new EdgeDriver();         driver.get("https://www.selenium.dev/selenium/web/bidi/logEntryAdded.html");         WebElement consoleLogButton = driver.findElement(By.id("consoleError"));         consoleLogButton.click();              LogEntries logs = driver.manage().logs().get(LogType.BROWSER);              // Assert that at least one log contains the expected message         boolean logFound = false;         for (LogEntry log : logs) {           if (log.getMessage().contains("I am console error")) {             logFound = true;             break;           }         }              Assertions.assertTrue(logFound, "No matching log message found.");         driver.quit();       }     }     

**Note** : Java also allows disabling build checks by System Property:   Property key: `EdgeDriverService.EDGE_DRIVER_DISABLE_BUILD_CHECK`   Property value: `"true"` or `"false"`                   service = webdriver.EdgeService(service_args=['--disable-build-check'], log_output=log_path)

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/python/tests/browsers/test_edge.py#L115)

##### examples/python/tests/browsers/test\_edge.py

Copy  Close               import os     import re     import subprocess     import pytest     from selenium import webdriver     from selenium.webdriver.common.by import By          def test_basic_options():         options = get_default_edge_options()         driver = webdriver.Edge(options=options)              driver.quit()               def test_args():         options = get_default_edge_options()              options.add_argument("--start-maximized")              driver = webdriver.Edge(options=options)         driver.get('http://selenium.dev')              driver.quit()               def test_set_browser_location(edge_bin):         options = get_default_edge_options()              options.binary_location = edge_bin              driver = webdriver.Edge(options=options)              driver.quit()               def test_add_extension():         options = get_default_edge_options()         extension_file_path = os.path.abspath("tests/extensions/webextensions-selenium-example.crx")              options.add_extension(extension_file_path)              driver = webdriver.Edge(options=options)         driver.get("https://www.selenium.dev/selenium/web/blank.html")              driver.quit()               def test_keep_browser_open():         options = get_default_edge_options()              options.add_experimental_option("detach", True)              driver = webdriver.Edge(options=options)         driver.get('http://selenium.dev')              driver.quit()               def test_exclude_switches():         options = get_default_edge_options()              options.add_experimental_option('excludeSwitches', ['disable-popup-blocking'])              driver = webdriver.Edge(options=options)         driver.get('http://selenium.dev')              driver.quit()               def test_log_to_file(log_path):         service = webdriver.EdgeService(log_output=log_path)              driver = webdriver.Edge(service=service)              with open(log_path, 'r') as fp:             assert "Starting Microsoft Edge WebDriver" in fp.readline()              driver.quit()               def test_log_to_stdout(capfd):         service = webdriver.EdgeService(log_output=subprocess.STDOUT)              driver = webdriver.Edge(service=service)              out, err = capfd.readouterr()         assert "Starting Microsoft Edge WebDriver" in out              driver.quit()               def test_log_level(log_path):         service = webdriver.EdgeService(service_args=['--log-level=DEBUG'], log_output=log_path)              driver = webdriver.Edge(service=service)              with open(log_path, 'r') as f:             assert '[DEBUG]' in f.read()              driver.quit()               def test_log_features(log_path):         service = webdriver.EdgeService(service_args=['--append-log', '--readable-timestamp'], log_output=log_path)              driver = webdriver.Edge(service=service)              with open(log_path, 'r') as f:             assert re.match(r"\[\d\d-\d\d-\d\d\d\d", f.read())              driver.quit()               def test_build_checks(log_path):         service = webdriver.EdgeService(service_args=['--disable-build-check'], log_output=log_path)              driver = webdriver.Edge(service=service)              expected = "[WARNING]: You are using an unsupported command-line switch: --disable-build-check"         with open(log_path, 'r') as f:             assert expected in f.read()              driver.quit()               def test_set_network_conditions():         driver = webdriver.Edge()              network_conditions = {             "offline": False,             "latency": 20,  # 20 ms of latency             "download_throughput": 2000 * 1024 / 8,  # 2000 kbps             "upload_throughput": 2000 * 1024 / 8,    # 2000 kbps         }         driver.set_network_conditions(**network_conditions)              driver.get("https://www.selenium.dev")              # check whether the network conditions are set         assert driver.get_network_conditions() == network_conditions              driver.quit()               def test_set_permissions():         driver = webdriver.Edge()         driver.get('https://www.selenium.dev')              driver.set_permissions('camera', 'denied')              assert get_permission_state(driver, 'camera') == 'denied'         driver.quit()               def get_permission_state(driver, name):         """Helper function to query the permission state."""         script = """         const callback = arguments[arguments.length - 1];         navigator.permissions.query({name: arguments[0]}).then(permissionStatus => {             callback(permissionStatus.state);         });         """         return driver.execute_async_script(script, name)               def test_cast_features():         driver = webdriver.Edge()              try:             sinks = driver.get_sinks()             if sinks:                 sink_name = sinks[0]['name']                 driver.start_tab_mirroring(sink_name)                 driver.stop_casting(sink_name)             else:                 pytest.skip("No available Cast sinks to test with.")         finally:             driver.quit()               def test_get_browser_logs():         driver = webdriver.Edge()         driver.get("https://www.selenium.dev/selenium/web/bidi/logEntryAdded.html")         driver.find_element(By.ID, "consoleError").click()              logs = driver.get_log("browser")              # Assert that at least one log contains the expected message         assert any("I am console error" in log['message'] for log in logs), "No matching log message found."         driver.quit()          def get_default_edge_options():         options = webdriver.EdgeOptions()         options.add_argument("--no-sandbox")         return options                                service.DisableBuildCheck = true;

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/dotnet/SeleniumDocs/Browsers/EdgeTest.cs#L155)

##### examples/dotnet/SeleniumDocs/Browsers/EdgeTest.cs

Copy  Close               using System;     using System.IO;     using System.Linq;     using System.Text.RegularExpressions;     using Microsoft.VisualStudio.TestTools.UnitTesting;     using OpenQA.Selenium;     using OpenQA.Selenium.Edge;          namespace SeleniumDocs.Browsers     {         [TestClass]         public class EdgeTest         {             private EdgeDriver driver;             private string _logLocation;                  [TestCleanup]             public void Cleanup()             {                 if (_logLocation != null && File.Exists(_logLocation))                 {                     File.Delete(_logLocation);                 }                 driver.Quit();             }                  [TestMethod]             public void BasicOptions()             {                 var options = new EdgeOptions();                 driver = new EdgeDriver(options);             }                  [TestMethod]             public void Arguments()             {                 var options = new EdgeOptions();                      options.AddArgument("--start-maximized");                          driver = new EdgeDriver(options);             }                  [TestMethod]             public void SetBrowserLocation()             {                 var options = new EdgeOptions();                      options.BinaryLocation = GetEdgeLocation();                          driver = new EdgeDriver(options);             }                  [TestMethod]             public void InstallExtension()             {                 var options = new EdgeOptions();                 var baseDir = AppDomain.CurrentDomain.BaseDirectory;                 var extensionFilePath = Path.Combine(baseDir, "../../../Extensions/webextensions-selenium-example.crx");                      options.AddExtension(extensionFilePath);                      driver = new EdgeDriver(options);                      driver.Url = "https://www.selenium.dev/selenium/web/blank.html";                      IWebElement injected = driver.FindElement(By.Id("webextensions-selenium-example"));                 Assert.AreEqual("Content injected by webextensions-selenium-example", injected.Text);             }                  [TestMethod]             public void ExcludeSwitch()             {                 var options = new EdgeOptions();                      options.AddExcludedArgument("disable-popup-blocking");                      driver = new EdgeDriver(options);             }                  [TestMethod]             public void LogsToFile()             {                 var service = EdgeDriverService.CreateDefaultService();                      service.LogPath = GetLogLocation();                      driver = new EdgeDriver(service);                 driver.Quit(); // Close the Service log file before reading                 var lines = File.ReadLines(GetLogLocation());                 Assert.IsNotNull(lines.FirstOrDefault(line => line.Contains("Starting Microsoft Edge WebDriver")));             }                  [TestMethod]             [Ignore("Not implemented")]             public void LogsToConsole()             {                 var stringWriter = new StringWriter();                 var originalOutput = Console.Out;                 Console.SetOut(stringWriter);                      var service = EdgeDriverService.CreateDefaultService();                      //service.LogToConsole = true;                      driver = new EdgeDriver(service);                      Assert.IsTrue(stringWriter.ToString().Contains("Starting Microsoft Edge WebDriver"));                 Console.SetOut(originalOutput);                 stringWriter.Dispose();             }                  [TestMethod]             [Ignore("Not implemented")]             public void LogsLevel()             {                 var service = EdgeDriverService.CreateDefaultService();                 service.LogPath = GetLogLocation();                      // service.LogLevel = ChromiumDriverLogLevel.Debug                       driver = new EdgeDriver(service);                      driver.Quit(); // Close the Service log file before reading                 var lines = File.ReadLines(GetLogLocation());                 Assert.IsNotNull(lines.FirstOrDefault(line => line.Contains("[DEBUG]:")));             }                  [TestMethod]             [Ignore("Not implemented")]             public void ConfigureDriverLogs()             {                 var service = EdgeDriverService.CreateDefaultService();                 service.LogPath = GetLogLocation();                 service.EnableVerboseLogging = true;                      service.EnableAppendLog = true;                 // service.readableTimeStamp = true;                      driver = new EdgeDriver(service);                      driver.Quit(); // Close the Service log file before reading                 var lines = File.ReadLines(GetLogLocation());                 var regex = new Regex(@"\[\d\d-\d\d-\d\d\d\d");                 Assert.IsNotNull(lines.FirstOrDefault(line => regex.Matches("").Count > 0));             }                  [TestMethod]             public void DisableBuildCheck()             {                 var service = EdgeDriverService.CreateDefaultService();                 service.LogPath = GetLogLocation();                 service.EnableVerboseLogging = true;                      service.DisableBuildCheck = true;                      driver = new EdgeDriver(service);                 driver.Quit(); // Close the Service log file before reading                 var expected = "[WARNING]: You are using an unsupported command-line switch: --disable-build-check";                 var lines = File.ReadLines(GetLogLocation());                 Assert.IsNotNull(lines.FirstOrDefault(line => line.Contains(expected)));             }                          private string GetLogLocation()             {                 if (_logLocation == null || !File.Exists(_logLocation))                 {                     _logLocation = Path.GetTempFileName();                 }                      return _logLocation;             }                  private static string GetEdgeLocation()             {                 var options = new EdgeOptions                 {                     BrowserVersion = "stable"                 };                 return new DriverFinder(options).GetBrowserPath();             }         }     }

[Selenium v4.8](https://github.com/SeleniumHQ/selenium/releases/tag/selenium-4.8.0)                     service.args << '--disable-build-check'

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/ruby/spec/browsers/edge_spec.rb#L108)

##### examples/ruby/spec/browsers/edge\_spec.rb

Copy  Close               # frozen_string_literal: true          require 'spec_helper'          RSpec.describe 'Edge' do       describe 'Options' do         let(:edge_location) { driver_finder && ENV.fetch('EDGE_BIN', nil) }              it 'basic options' do           options = Selenium::WebDriver::Options.edge           @driver = Selenium::WebDriver.for :edge, options: options         end              it 'add arguments' do           options = Selenium::WebDriver::Options.edge                options.args << '--start-maximized'                @driver = Selenium::WebDriver.for :edge, options: options         end              it 'sets location of binary' do           options = Selenium::WebDriver::Options.edge                options.binary = edge_location                @driver = Selenium::WebDriver.for :edge, options: options         end              it 'add extensions' do           extension_file_path = File.expand_path('../spec_support/extensions/webextensions-selenium-example.crx', __dir__)           options = Selenium::WebDriver::Options.edge                options.add_extension(extension_file_path)                @driver = Selenium::WebDriver.for :edge, options: options           @driver.get('https://www.selenium.dev/selenium/web/blank.html')           injected = @driver.find_element(:id, 'webextensions-selenium-example')           expect(injected.text).to eq 'Content injected by webextensions-selenium-example'         end              it 'keeps browser open' do           options = Selenium::WebDriver::Options.edge                options.detach = true                @driver = Selenium::WebDriver.for :edge, options: options         end              it 'excludes switches' do           options = Selenium::WebDriver::Options.edge                options.exclude_switches << 'disable-popup-blocking'                @driver = Selenium::WebDriver.for :edge, options: options         end       end            describe 'Service' do         let(:file_name) { File.expand_path('msedgedriver.log') }              after { FileUtils.rm_f(file_name) }              it 'logs to file' do           service = Selenium::WebDriver::Service.edge                service.log = file_name                @driver = Selenium::WebDriver.for :edge, service: service           expect(File.readlines(file_name).first).to include('Starting Microsoft Edge WebDriver')         end              it 'logs to console' do           service = Selenium::WebDriver::Service.edge                service.log = $stdout                expect {             @driver = Selenium::WebDriver.for :edge, service: service           }.to output(/Starting Microsoft Edge WebDriver/).to_stdout_from_any_process         end              it 'sets log level' do           service = Selenium::WebDriver::Service.edge           service.log = file_name                service.args << '--log-level=DEBUG'                @driver = Selenium::WebDriver.for :edge, service: service           expect(File.readlines(file_name).grep(/\[DEBUG\]:/).any?).to eq true         end              it 'sets log features' do           args = ["--log-path=#{file_name}", '--verbose']           service = Selenium::WebDriver::Service.edge(args: args)                service.args << '--append-log'           service.args << '--readable-timestamp'                @driver = Selenium::WebDriver.for :edge, service: service                expect(File.readlines(file_name).grep(/\[\d\d-\d\d-\d\d\d\d/).any?).to eq true         end              it 'disables build checks' do           service = Selenium::WebDriver::Service.edge log: file_name, args: ['--verbose']                service.args << '--disable-build-check'                @driver = Selenium::WebDriver.for :edge, service: service           warning = /\[WARNING\]: You are using an unsupported command-line switch: --disable-build-check/           expect(File.readlines(file_name).grep(warning).any?).to eq true         end       end            describe 'Special Features' do         it 'casts' do           @driver = Selenium::WebDriver.for :edge           sinks = @driver.cast_sinks           unless sinks.empty?             device_name = sinks.first['name']             @driver.start_cast_tab_mirroring(device_name)             expect { @driver.stop_casting(device_name) }.not_to raise_exception           end         end              it 'gets and sets network conditions' do           @driver = Selenium::WebDriver.for :edge           @driver.network_conditions = {offline: false, latency: 100, throughput: 200}           expect(@driver.network_conditions).to eq(             'offline' => false,             'latency' => 100,             'download_throughput' => 200,             'upload_throughput' => 200           )         end              it 'gets the browser logs' do           @driver = Selenium::WebDriver.for :edge           @driver.navigate.to 'https://www.selenium.dev/selenium/web/'           sleep 1           logs = @driver.logs.get(:browser)                expect(logs.first.message).to include 'Failed to load resource'         end              it 'sets permissions' do           @driver = Selenium::WebDriver.for :edge           @driver.navigate.to 'https://www.selenium.dev/selenium/web/'           @driver.add_permission('camera', 'denied')           @driver.add_permissions('clipboard-read' => 'denied', 'clipboard-write' => 'prompt')           expect(permission('camera')).to eq('denied')           expect(permission('clipboard-read')).to eq('denied')           expect(permission('clipboard-write')).to eq('prompt')         end       end            def driver_finder         options = Selenium::WebDriver::Options.edge(browser_version: 'stable')         service = Selenium::WebDriver::Service.edge         finder = Selenium::WebDriver::DriverFinder.new(options, service)         ENV['EDGEDRIVER_BIN'] = finder.driver_path         ENV['EDGE_BIN'] = finder.browser_path       end            def permission(name)         @driver.execute_async_script('callback = arguments[arguments.length - 1];' \                                      'callback(navigator.permissions.query({name: arguments[0]}));', name)['state']       end     end     

[Add Example](https://www.selenium.dev/documentation/about/contributing/#creating-examples)

[Add Example](https://www.selenium.dev/documentation/about/contributing/#creating-examples)

## Internet Explorer Mode

Microsoft Edge can be driven in “Internet Explorer Compatibility Mode”, which uses the Internet Explorer Driver classes in conjunction with Microsoft Edge. Read the [Internet Explorer page](https://www.selenium.dev/documentation/webdriver/browsers/internet_explorer/) for more details.

## Special Features

Some browsers have implemented additional features that are unique to them.

### Casting

You can drive Chrome Cast devices with Edge, including sharing tabs

  * Java   * Python   * CSharp   * Ruby   * JavaScript   * Kotlin

                  List<Map<String, String>> sinks = driver.getCastSinks();         if (!sinks.isEmpty()) {           String sinkName = sinks.get(0).get("name");           driver.startTabMirroring(sinkName);           driver.stopCasting(sinkName);         }

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/java/src/test/java/dev/selenium/browsers/EdgeTest.java#L225-L230)

##### examples/java/src/test/java/dev/selenium/browsers/EdgeTest.java

Copy  Close               package dev.selenium.browsers;          import dev.selenium.BaseTest;     import java.io.File;     import java.io.IOException;     import java.io.PrintStream;     import java.nio.file.Files;     import java.nio.file.Path;     import java.nio.file.Paths;     import java.util.List;     import java.util.Map;     import java.util.logging.Level;     import java.util.regex.Pattern;     import org.junit.jupiter.api.AfterEach;     import org.junit.jupiter.api.Assertions;     import org.junit.jupiter.api.Test;     import org.openqa.selenium.By;     import org.openqa.selenium.WebElement;     import org.openqa.selenium.chromium.ChromiumDriverLogLevel;     import org.openqa.selenium.chromium.ChromiumNetworkConditions;     import org.openqa.selenium.edge.EdgeDriver;     import org.openqa.selenium.edge.EdgeDriverService;     import org.openqa.selenium.edge.EdgeOptions;     import org.openqa.selenium.logging.*;     import org.openqa.selenium.remote.service.DriverFinder;                    public class EdgeTest extends BaseTest {       @AfterEach       public void clearProperties() {         System.clearProperty(EdgeDriverService.EDGE_DRIVER_LOG_PROPERTY);         System.clearProperty(EdgeDriverService.EDGE_DRIVER_LOG_LEVEL_PROPERTY);       }            @Test       public void basicOptions() {         EdgeOptions options = getDefaultEdgeOptions();         driver = new EdgeDriver(options);       }            @Test       public void arguments() {         EdgeOptions options = getDefaultEdgeOptions();              options.addArguments("--start-maximized");              driver = new EdgeDriver(options);       }            @Test       public void setBrowserLocation() {         EdgeOptions options = getDefaultEdgeOptions();              options.setBinary(getEdgeLocation());              driver = new EdgeDriver(options);       }            @Test       public void extensionOptions() {         EdgeOptions options = getDefaultEdgeOptions();         Path path = Paths.get("src/test/resources/extensions/webextensions-selenium-example.crx");         File extensionFilePath = new File(path.toUri());              options.addExtensions(extensionFilePath);              driver = new EdgeDriver(options);         driver.get("https://www.selenium.dev/selenium/web/blank.html");         WebElement injected = driver.findElement(By.id("webextensions-selenium-example"));         Assertions.assertEquals(             "Content injected by webextensions-selenium-example", injected.getText());       }            @Test       public void excludeSwitches() {         EdgeOptions options = getDefaultEdgeOptions();              options.setExperimentalOption("excludeSwitches", List.of("disable-popup-blocking"));              driver = new EdgeDriver(options);       }            @Test       public void loggingPreferences() {         EdgeOptions options = getDefaultEdgeOptions();         LoggingPreferences logPrefs = new LoggingPreferences();         logPrefs.enable(LogType.PERFORMANCE, Level.ALL);         options.setCapability(EdgeOptions.LOGGING_PREFS, logPrefs);              driver = new EdgeDriver(options);         driver.get("https://www.selenium.dev");              LogEntries logEntries = driver.manage().logs().get(LogType.PERFORMANCE);         Assertions.assertFalse(logEntries.getAll().isEmpty());       }            @Test       public void logsToFile() throws IOException {         File logLocation = getTempFile("logsToFile", ".log");         EdgeDriverService service = new EdgeDriverService.Builder().withLogFile(logLocation).build();              driver = new EdgeDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         Assertions.assertTrue(fileContent.contains("Starting Microsoft Edge WebDriver"));       }            @Test       public void logsToConsole() throws IOException {         File logLocation = getTempFile("logsToConsole", ".log");         System.setOut(new PrintStream(logLocation));              EdgeDriverService service = new EdgeDriverService.Builder().withLogOutput(System.out).build();              driver = new EdgeDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         Assertions.assertTrue(fileContent.contains("Starting Microsoft Edge WebDriver"));       }            @Test       public void logsWithLevel() throws IOException {         File logLocation = getTempFile("logsWithLevel", ".log");         System.setProperty(EdgeDriverService.EDGE_DRIVER_LOG_PROPERTY, logLocation.getAbsolutePath());              EdgeDriverService service =             new EdgeDriverService.Builder().withLoglevel(ChromiumDriverLogLevel.DEBUG).build();              driver = new EdgeDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         Assertions.assertTrue(fileContent.contains("[DEBUG]:"));       }            @Test       public void configureDriverLogs() throws IOException {         File logLocation = getTempFile("configureDriverLogs", ".log");         System.setProperty(EdgeDriverService.EDGE_DRIVER_LOG_PROPERTY, logLocation.getAbsolutePath());         System.setProperty(             EdgeDriverService.EDGE_DRIVER_LOG_LEVEL_PROPERTY, ChromiumDriverLogLevel.DEBUG.toString());              EdgeDriverService service =             new EdgeDriverService.Builder().withAppendLog(true).withReadableTimestamp(true).build();              driver = new EdgeDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         Pattern pattern = Pattern.compile("\\[\\d\\d-\\d\\d-\\d\\d\\d\\d", Pattern.CASE_INSENSITIVE);         Assertions.assertTrue(pattern.matcher(fileContent).find());       }            @Test       public void disableBuildChecks() throws IOException {         File logLocation = getTempFile("disableBuildChecks", ".log");         System.setProperty(EdgeDriverService.EDGE_DRIVER_LOG_PROPERTY, logLocation.getAbsolutePath());         System.setProperty(             EdgeDriverService.EDGE_DRIVER_LOG_LEVEL_PROPERTY,             ChromiumDriverLogLevel.WARNING.toString());              EdgeDriverService service =             new EdgeDriverService.Builder().withBuildCheckDisabled(true).build();              driver = new EdgeDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         String expected =             "[WARNING]: You are using an unsupported command-line switch: --disable-build-check";         Assertions.assertTrue(fileContent.contains(expected));       }            private File getEdgeLocation() {         EdgeOptions options = getDefaultEdgeOptions();         options.setBrowserVersion("stable");         DriverFinder finder = new DriverFinder(EdgeDriverService.createDefaultService(), options);         return new File(finder.getBrowserPath());       }            @Test       public void setPermissions() {         EdgeDriver driver = new EdgeDriver();         driver.get("https://www.selenium.dev");              driver.setPermission("camera", "denied");              // Verify the permission state is 'denied'         String script = "return navigator.permissions.query({ name: 'camera' })" +                 "    .then(permissionStatus => permissionStatus.state);";         String permissionState = (String) driver.executeScript(script);              Assertions.assertEquals("denied", permissionState);         driver.quit();       }            @Test       public void setNetworkConditions() {         driver = new EdgeDriver();              ChromiumNetworkConditions networkConditions = new ChromiumNetworkConditions();         networkConditions.setOffline(false);         networkConditions.setLatency(java.time.Duration.ofMillis(20)); // 20 ms of latency         networkConditions.setDownloadThroughput(2000 * 1024 / 8); // 2000 kbps         networkConditions.setUploadThroughput(2000 * 1024 / 8);   // 2000 kbps              ((EdgeDriver) driver).setNetworkConditions(networkConditions);              driver.get("https://www.selenium.dev");              // Assert the network conditions are set as expected         ChromiumNetworkConditions actualConditions = ((EdgeDriver) driver).getNetworkConditions();         Assertions.assertAll(                 () -> Assertions.assertEquals(networkConditions.getOffline(), actualConditions.getOffline()),                 () -> Assertions.assertEquals(networkConditions.getLatency(), actualConditions.getLatency()),                 () -> Assertions.assertEquals(networkConditions.getDownloadThroughput(), actualConditions.getDownloadThroughput()),                 () -> Assertions.assertEquals(networkConditions.getUploadThroughput(), actualConditions.getUploadThroughput())         );         ((EdgeDriver) driver).deleteNetworkConditions();         driver.quit();       }            @Test       public void castFeatures() {         EdgeDriver driver = new EdgeDriver();              List<Map<String, String>> sinks = driver.getCastSinks();         if (!sinks.isEmpty()) {           String sinkName = sinks.get(0).get("name");           driver.startTabMirroring(sinkName);           driver.stopCasting(sinkName);         }              driver.quit();       }            @Test       public void getBrowserLogs() {         EdgeDriver driver = new EdgeDriver();         driver.get("https://www.selenium.dev/selenium/web/bidi/logEntryAdded.html");         WebElement consoleLogButton = driver.findElement(By.id("consoleError"));         consoleLogButton.click();              LogEntries logs = driver.manage().logs().get(LogType.BROWSER);              // Assert that at least one log contains the expected message         boolean logFound = false;         for (LogEntry log : logs) {           if (log.getMessage().contains("I am console error")) {             logFound = true;             break;           }         }              Assertions.assertTrue(logFound, "No matching log message found.");         driver.quit();       }     }                            sinks = driver.get_sinks()             if sinks:                 sink_name = sinks[0]['name']                 driver.start_tab_mirroring(sink_name)                 driver.stop_casting(sink_name)

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk//examples/python/tests/browsers/test_edge.py#L170-L174)

##### /examples/python/tests/browsers/test\_edge.py

Copy  Close               import os     import re     import subprocess     import pytest     from selenium import webdriver     from selenium.webdriver.common.by import By          def test_basic_options():         options = get_default_edge_options()         driver = webdriver.Edge(options=options)              driver.quit()               def test_args():         options = get_default_edge_options()              options.add_argument("--start-maximized")              driver = webdriver.Edge(options=options)         driver.get('http://selenium.dev')              driver.quit()               def test_set_browser_location(edge_bin):         options = get_default_edge_options()              options.binary_location = edge_bin              driver = webdriver.Edge(options=options)              driver.quit()               def test_add_extension():         options = get_default_edge_options()         extension_file_path = os.path.abspath("tests/extensions/webextensions-selenium-example.crx")              options.add_extension(extension_file_path)              driver = webdriver.Edge(options=options)         driver.get("https://www.selenium.dev/selenium/web/blank.html")              driver.quit()               def test_keep_browser_open():         options = get_default_edge_options()              options.add_experimental_option("detach", True)              driver = webdriver.Edge(options=options)         driver.get('http://selenium.dev')              driver.quit()               def test_exclude_switches():         options = get_default_edge_options()              options.add_experimental_option('excludeSwitches', ['disable-popup-blocking'])              driver = webdriver.Edge(options=options)         driver.get('http://selenium.dev')              driver.quit()               def test_log_to_file(log_path):         service = webdriver.EdgeService(log_output=log_path)              driver = webdriver.Edge(service=service)              with open(log_path, 'r') as fp:             assert "Starting Microsoft Edge WebDriver" in fp.readline()              driver.quit()               def test_log_to_stdout(capfd):         service = webdriver.EdgeService(log_output=subprocess.STDOUT)              driver = webdriver.Edge(service=service)              out, err = capfd.readouterr()         assert "Starting Microsoft Edge WebDriver" in out              driver.quit()               def test_log_level(log_path):         service = webdriver.EdgeService(service_args=['--log-level=DEBUG'], log_output=log_path)              driver = webdriver.Edge(service=service)              with open(log_path, 'r') as f:             assert '[DEBUG]' in f.read()              driver.quit()               def test_log_features(log_path):         service = webdriver.EdgeService(service_args=['--append-log', '--readable-timestamp'], log_output=log_path)              driver = webdriver.Edge(service=service)              with open(log_path, 'r') as f:             assert re.match(r"\[\d\d-\d\d-\d\d\d\d", f.read())              driver.quit()               def test_build_checks(log_path):         service = webdriver.EdgeService(service_args=['--disable-build-check'], log_output=log_path)              driver = webdriver.Edge(service=service)              expected = "[WARNING]: You are using an unsupported command-line switch: --disable-build-check"         with open(log_path, 'r') as f:             assert expected in f.read()              driver.quit()               def test_set_network_conditions():         driver = webdriver.Edge()              network_conditions = {             "offline": False,             "latency": 20,  # 20 ms of latency             "download_throughput": 2000 * 1024 / 8,  # 2000 kbps             "upload_throughput": 2000 * 1024 / 8,    # 2000 kbps         }         driver.set_network_conditions(**network_conditions)              driver.get("https://www.selenium.dev")              # check whether the network conditions are set         assert driver.get_network_conditions() == network_conditions              driver.quit()               def test_set_permissions():         driver = webdriver.Edge()         driver.get('https://www.selenium.dev')              driver.set_permissions('camera', 'denied')              assert get_permission_state(driver, 'camera') == 'denied'         driver.quit()               def get_permission_state(driver, name):         """Helper function to query the permission state."""         script = """         const callback = arguments[arguments.length - 1];         navigator.permissions.query({name: arguments[0]}).then(permissionStatus => {             callback(permissionStatus.state);         });         """         return driver.execute_async_script(script, name)               def test_cast_features():         driver = webdriver.Edge()              try:             sinks = driver.get_sinks()             if sinks:                 sink_name = sinks[0]['name']                 driver.start_tab_mirroring(sink_name)                 driver.stop_casting(sink_name)             else:                 pytest.skip("No available Cast sinks to test with.")         finally:             driver.quit()               def test_get_browser_logs():         driver = webdriver.Edge()         driver.get("https://www.selenium.dev/selenium/web/bidi/logEntryAdded.html")         driver.find_element(By.ID, "consoleError").click()              logs = driver.get_log("browser")              # Assert that at least one log contains the expected message         assert any("I am console error" in log['message'] for log in logs), "No matching log message found."         driver.quit()          def get_default_edge_options():         options = webdriver.EdgeOptions()         options.add_argument("--no-sandbox")         return options     

[Add Example](https://www.selenium.dev/documentation/about/contributing/#creating-examples)                     sinks = @driver.cast_sinks           unless sinks.empty?             device_name = sinks.first['name']             @driver.start_cast_tab_mirroring(device_name)             expect { @driver.stop_casting(device_name) }.not_to raise_exception

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk//examples/ruby/spec/browsers/edge_spec.rb#L119-L123)

##### /examples/ruby/spec/browsers/edge\_spec.rb

Copy  Close               # frozen_string_literal: true          require 'spec_helper'          RSpec.describe 'Edge' do       describe 'Options' do         let(:edge_location) { driver_finder && ENV.fetch('EDGE_BIN', nil) }              it 'basic options' do           options = Selenium::WebDriver::Options.edge           @driver = Selenium::WebDriver.for :edge, options: options         end              it 'add arguments' do           options = Selenium::WebDriver::Options.edge                options.args << '--start-maximized'                @driver = Selenium::WebDriver.for :edge, options: options         end              it 'sets location of binary' do           options = Selenium::WebDriver::Options.edge                options.binary = edge_location                @driver = Selenium::WebDriver.for :edge, options: options         end              it 'add extensions' do           extension_file_path = File.expand_path('../spec_support/extensions/webextensions-selenium-example.crx', __dir__)           options = Selenium::WebDriver::Options.edge                options.add_extension(extension_file_path)                @driver = Selenium::WebDriver.for :edge, options: options           @driver.get('https://www.selenium.dev/selenium/web/blank.html')           injected = @driver.find_element(:id, 'webextensions-selenium-example')           expect(injected.text).to eq 'Content injected by webextensions-selenium-example'         end              it 'keeps browser open' do           options = Selenium::WebDriver::Options.edge                options.detach = true                @driver = Selenium::WebDriver.for :edge, options: options         end              it 'excludes switches' do           options = Selenium::WebDriver::Options.edge                options.exclude_switches << 'disable-popup-blocking'                @driver = Selenium::WebDriver.for :edge, options: options         end       end            describe 'Service' do         let(:file_name) { File.expand_path('msedgedriver.log') }              after { FileUtils.rm_f(file_name) }              it 'logs to file' do           service = Selenium::WebDriver::Service.edge                service.log = file_name                @driver = Selenium::WebDriver.for :edge, service: service           expect(File.readlines(file_name).first).to include('Starting Microsoft Edge WebDriver')         end              it 'logs to console' do           service = Selenium::WebDriver::Service.edge                service.log = $stdout                expect {             @driver = Selenium::WebDriver.for :edge, service: service           }.to output(/Starting Microsoft Edge WebDriver/).to_stdout_from_any_process         end              it 'sets log level' do           service = Selenium::WebDriver::Service.edge           service.log = file_name                service.args << '--log-level=DEBUG'                @driver = Selenium::WebDriver.for :edge, service: service           expect(File.readlines(file_name).grep(/\[DEBUG\]:/).any?).to eq true         end              it 'sets log features' do           args = ["--log-path=#{file_name}", '--verbose']           service = Selenium::WebDriver::Service.edge(args: args)                service.args << '--append-log'           service.args << '--readable-timestamp'                @driver = Selenium::WebDriver.for :edge, service: service                expect(File.readlines(file_name).grep(/\[\d\d-\d\d-\d\d\d\d/).any?).to eq true         end              it 'disables build checks' do           service = Selenium::WebDriver::Service.edge log: file_name, args: ['--verbose']                service.args << '--disable-build-check'                @driver = Selenium::WebDriver.for :edge, service: service           warning = /\[WARNING\]: You are using an unsupported command-line switch: --disable-build-check/           expect(File.readlines(file_name).grep(warning).any?).to eq true         end       end            describe 'Special Features' do         it 'casts' do           @driver = Selenium::WebDriver.for :edge           sinks = @driver.cast_sinks           unless sinks.empty?             device_name = sinks.first['name']             @driver.start_cast_tab_mirroring(device_name)             expect { @driver.stop_casting(device_name) }.not_to raise_exception           end         end              it 'gets and sets network conditions' do           @driver = Selenium::WebDriver.for :edge           @driver.network_conditions = {offline: false, latency: 100, throughput: 200}           expect(@driver.network_conditions).to eq(             'offline' => false,             'latency' => 100,             'download_throughput' => 200,             'upload_throughput' => 200           )         end              it 'gets the browser logs' do           @driver = Selenium::WebDriver.for :edge           @driver.navigate.to 'https://www.selenium.dev/selenium/web/'           sleep 1           logs = @driver.logs.get(:browser)                expect(logs.first.message).to include 'Failed to load resource'         end              it 'sets permissions' do           @driver = Selenium::WebDriver.for :edge           @driver.navigate.to 'https://www.selenium.dev/selenium/web/'           @driver.add_permission('camera', 'denied')           @driver.add_permissions('clipboard-read' => 'denied', 'clipboard-write' => 'prompt')           expect(permission('camera')).to eq('denied')           expect(permission('clipboard-read')).to eq('denied')           expect(permission('clipboard-write')).to eq('prompt')         end       end            def driver_finder         options = Selenium::WebDriver::Options.edge(browser_version: 'stable')         service = Selenium::WebDriver::Service.edge         finder = Selenium::WebDriver::DriverFinder.new(options, service)         ENV['EDGEDRIVER_BIN'] = finder.driver_path         ENV['EDGE_BIN'] = finder.browser_path       end            def permission(name)         @driver.execute_async_script('callback = arguments[arguments.length - 1];' \                                      'callback(navigator.permissions.query({name: arguments[0]}));', name)['state']       end     end     

[Add Example](https://www.selenium.dev/documentation/about/contributing/#creating-examples)

[Add Example](https://www.selenium.dev/documentation/about/contributing/#creating-examples)

### Network conditions

You can simulate various network conditions.

  * Java   * Python   * CSharp   * Ruby   * JavaScript   * Kotlin

                  ChromiumNetworkConditions networkConditions = new ChromiumNetworkConditions();         networkConditions.setOffline(false);         networkConditions.setLatency(java.time.Duration.ofMillis(20)); // 20 ms of latency         networkConditions.setDownloadThroughput(2000 * 1024 / 8); // 2000 kbps         networkConditions.setUploadThroughput(2000 * 1024 / 8);   // 2000 kbps     

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/java/src/test/java/dev/selenium/browsers/EdgeTest.java#L198-L204)

##### examples/java/src/test/java/dev/selenium/browsers/EdgeTest.java

Copy  Close               package dev.selenium.browsers;          import dev.selenium.BaseTest;     import java.io.File;     import java.io.IOException;     import java.io.PrintStream;     import java.nio.file.Files;     import java.nio.file.Path;     import java.nio.file.Paths;     import java.util.List;     import java.util.Map;     import java.util.logging.Level;     import java.util.regex.Pattern;     import org.junit.jupiter.api.AfterEach;     import org.junit.jupiter.api.Assertions;     import org.junit.jupiter.api.Test;     import org.openqa.selenium.By;     import org.openqa.selenium.WebElement;     import org.openqa.selenium.chromium.ChromiumDriverLogLevel;     import org.openqa.selenium.chromium.ChromiumNetworkConditions;     import org.openqa.selenium.edge.EdgeDriver;     import org.openqa.selenium.edge.EdgeDriverService;     import org.openqa.selenium.edge.EdgeOptions;     import org.openqa.selenium.logging.*;     import org.openqa.selenium.remote.service.DriverFinder;                    public class EdgeTest extends BaseTest {       @AfterEach       public void clearProperties() {         System.clearProperty(EdgeDriverService.EDGE_DRIVER_LOG_PROPERTY);         System.clearProperty(EdgeDriverService.EDGE_DRIVER_LOG_LEVEL_PROPERTY);       }            @Test       public void basicOptions() {         EdgeOptions options = getDefaultEdgeOptions();         driver = new EdgeDriver(options);       }            @Test       public void arguments() {         EdgeOptions options = getDefaultEdgeOptions();              options.addArguments("--start-maximized");              driver = new EdgeDriver(options);       }            @Test       public void setBrowserLocation() {         EdgeOptions options = getDefaultEdgeOptions();              options.setBinary(getEdgeLocation());              driver = new EdgeDriver(options);       }            @Test       public void extensionOptions() {         EdgeOptions options = getDefaultEdgeOptions();         Path path = Paths.get("src/test/resources/extensions/webextensions-selenium-example.crx");         File extensionFilePath = new File(path.toUri());              options.addExtensions(extensionFilePath);              driver = new EdgeDriver(options);         driver.get("https://www.selenium.dev/selenium/web/blank.html");         WebElement injected = driver.findElement(By.id("webextensions-selenium-example"));         Assertions.assertEquals(             "Content injected by webextensions-selenium-example", injected.getText());       }            @Test       public void excludeSwitches() {         EdgeOptions options = getDefaultEdgeOptions();              options.setExperimentalOption("excludeSwitches", List.of("disable-popup-blocking"));              driver = new EdgeDriver(options);       }            @Test       public void loggingPreferences() {         EdgeOptions options = getDefaultEdgeOptions();         LoggingPreferences logPrefs = new LoggingPreferences();         logPrefs.enable(LogType.PERFORMANCE, Level.ALL);         options.setCapability(EdgeOptions.LOGGING_PREFS, logPrefs);              driver = new EdgeDriver(options);         driver.get("https://www.selenium.dev");              LogEntries logEntries = driver.manage().logs().get(LogType.PERFORMANCE);         Assertions.assertFalse(logEntries.getAll().isEmpty());       }            @Test       public void logsToFile() throws IOException {         File logLocation = getTempFile("logsToFile", ".log");         EdgeDriverService service = new EdgeDriverService.Builder().withLogFile(logLocation).build();              driver = new EdgeDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         Assertions.assertTrue(fileContent.contains("Starting Microsoft Edge WebDriver"));       }            @Test       public void logsToConsole() throws IOException {         File logLocation = getTempFile("logsToConsole", ".log");         System.setOut(new PrintStream(logLocation));              EdgeDriverService service = new EdgeDriverService.Builder().withLogOutput(System.out).build();              driver = new EdgeDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         Assertions.assertTrue(fileContent.contains("Starting Microsoft Edge WebDriver"));       }            @Test       public void logsWithLevel() throws IOException {         File logLocation = getTempFile("logsWithLevel", ".log");         System.setProperty(EdgeDriverService.EDGE_DRIVER_LOG_PROPERTY, logLocation.getAbsolutePath());              EdgeDriverService service =             new EdgeDriverService.Builder().withLoglevel(ChromiumDriverLogLevel.DEBUG).build();              driver = new EdgeDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         Assertions.assertTrue(fileContent.contains("[DEBUG]:"));       }            @Test       public void configureDriverLogs() throws IOException {         File logLocation = getTempFile("configureDriverLogs", ".log");         System.setProperty(EdgeDriverService.EDGE_DRIVER_LOG_PROPERTY, logLocation.getAbsolutePath());         System.setProperty(             EdgeDriverService.EDGE_DRIVER_LOG_LEVEL_PROPERTY, ChromiumDriverLogLevel.DEBUG.toString());              EdgeDriverService service =             new EdgeDriverService.Builder().withAppendLog(true).withReadableTimestamp(true).build();              driver = new EdgeDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         Pattern pattern = Pattern.compile("\\[\\d\\d-\\d\\d-\\d\\d\\d\\d", Pattern.CASE_INSENSITIVE);         Assertions.assertTrue(pattern.matcher(fileContent).find());       }            @Test       public void disableBuildChecks() throws IOException {         File logLocation = getTempFile("disableBuildChecks", ".log");         System.setProperty(EdgeDriverService.EDGE_DRIVER_LOG_PROPERTY, logLocation.getAbsolutePath());         System.setProperty(             EdgeDriverService.EDGE_DRIVER_LOG_LEVEL_PROPERTY,             ChromiumDriverLogLevel.WARNING.toString());              EdgeDriverService service =             new EdgeDriverService.Builder().withBuildCheckDisabled(true).build();              driver = new EdgeDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         String expected =             "[WARNING]: You are using an unsupported command-line switch: --disable-build-check";         Assertions.assertTrue(fileContent.contains(expected));       }            private File getEdgeLocation() {         EdgeOptions options = getDefaultEdgeOptions();         options.setBrowserVersion("stable");         DriverFinder finder = new DriverFinder(EdgeDriverService.createDefaultService(), options);         return new File(finder.getBrowserPath());       }            @Test       public void setPermissions() {         EdgeDriver driver = new EdgeDriver();         driver.get("https://www.selenium.dev");              driver.setPermission("camera", "denied");              // Verify the permission state is 'denied'         String script = "return navigator.permissions.query({ name: 'camera' })" +                 "    .then(permissionStatus => permissionStatus.state);";         String permissionState = (String) driver.executeScript(script);              Assertions.assertEquals("denied", permissionState);         driver.quit();       }            @Test       public void setNetworkConditions() {         driver = new EdgeDriver();              ChromiumNetworkConditions networkConditions = new ChromiumNetworkConditions();         networkConditions.setOffline(false);         networkConditions.setLatency(java.time.Duration.ofMillis(20)); // 20 ms of latency         networkConditions.setDownloadThroughput(2000 * 1024 / 8); // 2000 kbps         networkConditions.setUploadThroughput(2000 * 1024 / 8);   // 2000 kbps              ((EdgeDriver) driver).setNetworkConditions(networkConditions);              driver.get("https://www.selenium.dev");              // Assert the network conditions are set as expected         ChromiumNetworkConditions actualConditions = ((EdgeDriver) driver).getNetworkConditions();         Assertions.assertAll(                 () -> Assertions.assertEquals(networkConditions.getOffline(), actualConditions.getOffline()),                 () -> Assertions.assertEquals(networkConditions.getLatency(), actualConditions.getLatency()),                 () -> Assertions.assertEquals(networkConditions.getDownloadThroughput(), actualConditions.getDownloadThroughput()),                 () -> Assertions.assertEquals(networkConditions.getUploadThroughput(), actualConditions.getUploadThroughput())         );         ((EdgeDriver) driver).deleteNetworkConditions();         driver.quit();       }            @Test       public void castFeatures() {         EdgeDriver driver = new EdgeDriver();              List<Map<String, String>> sinks = driver.getCastSinks();         if (!sinks.isEmpty()) {           String sinkName = sinks.get(0).get("name");           driver.startTabMirroring(sinkName);           driver.stopCasting(sinkName);         }              driver.quit();       }            @Test       public void getBrowserLogs() {         EdgeDriver driver = new EdgeDriver();         driver.get("https://www.selenium.dev/selenium/web/bidi/logEntryAdded.html");         WebElement consoleLogButton = driver.findElement(By.id("consoleError"));         consoleLogButton.click();              LogEntries logs = driver.manage().logs().get(LogType.BROWSER);              // Assert that at least one log contains the expected message         boolean logFound = false;         for (LogEntry log : logs) {           if (log.getMessage().contains("I am console error")) {             logFound = true;             break;           }         }              Assertions.assertTrue(logFound, "No matching log message found.");         driver.quit();       }     }                        network_conditions = {             "offline": False,             "latency": 20,  # 20 ms of latency             "download_throughput": 2000 * 1024 / 8,  # 2000 kbps             "upload_throughput": 2000 * 1024 / 8,    # 2000 kbps         }         driver.set_network_conditions(**network_conditions)

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk//examples/python/tests/browsers/test_edge.py#L129-L135)

##### /examples/python/tests/browsers/test\_edge.py

Copy  Close               import os     import re     import subprocess     import pytest     from selenium import webdriver     from selenium.webdriver.common.by import By          def test_basic_options():         options = get_default_edge_options()         driver = webdriver.Edge(options=options)              driver.quit()               def test_args():         options = get_default_edge_options()              options.add_argument("--start-maximized")              driver = webdriver.Edge(options=options)         driver.get('http://selenium.dev')              driver.quit()               def test_set_browser_location(edge_bin):         options = get_default_edge_options()              options.binary_location = edge_bin              driver = webdriver.Edge(options=options)              driver.quit()               def test_add_extension():         options = get_default_edge_options()         extension_file_path = os.path.abspath("tests/extensions/webextensions-selenium-example.crx")              options.add_extension(extension_file_path)              driver = webdriver.Edge(options=options)         driver.get("https://www.selenium.dev/selenium/web/blank.html")              driver.quit()               def test_keep_browser_open():         options = get_default_edge_options()              options.add_experimental_option("detach", True)              driver = webdriver.Edge(options=options)         driver.get('http://selenium.dev')              driver.quit()               def test_exclude_switches():         options = get_default_edge_options()              options.add_experimental_option('excludeSwitches', ['disable-popup-blocking'])              driver = webdriver.Edge(options=options)         driver.get('http://selenium.dev')              driver.quit()               def test_log_to_file(log_path):         service = webdriver.EdgeService(log_output=log_path)              driver = webdriver.Edge(service=service)              with open(log_path, 'r') as fp:             assert "Starting Microsoft Edge WebDriver" in fp.readline()              driver.quit()               def test_log_to_stdout(capfd):         service = webdriver.EdgeService(log_output=subprocess.STDOUT)              driver = webdriver.Edge(service=service)              out, err = capfd.readouterr()         assert "Starting Microsoft Edge WebDriver" in out              driver.quit()               def test_log_level(log_path):         service = webdriver.EdgeService(service_args=['--log-level=DEBUG'], log_output=log_path)              driver = webdriver.Edge(service=service)              with open(log_path, 'r') as f:             assert '[DEBUG]' in f.read()              driver.quit()               def test_log_features(log_path):         service = webdriver.EdgeService(service_args=['--append-log', '--readable-timestamp'], log_output=log_path)              driver = webdriver.Edge(service=service)              with open(log_path, 'r') as f:             assert re.match(r"\[\d\d-\d\d-\d\d\d\d", f.read())              driver.quit()               def test_build_checks(log_path):         service = webdriver.EdgeService(service_args=['--disable-build-check'], log_output=log_path)              driver = webdriver.Edge(service=service)              expected = "[WARNING]: You are using an unsupported command-line switch: --disable-build-check"         with open(log_path, 'r') as f:             assert expected in f.read()              driver.quit()               def test_set_network_conditions():         driver = webdriver.Edge()              network_conditions = {             "offline": False,             "latency": 20,  # 20 ms of latency             "download_throughput": 2000 * 1024 / 8,  # 2000 kbps             "upload_throughput": 2000 * 1024 / 8,    # 2000 kbps         }         driver.set_network_conditions(**network_conditions)              driver.get("https://www.selenium.dev")              # check whether the network conditions are set         assert driver.get_network_conditions() == network_conditions              driver.quit()               def test_set_permissions():         driver = webdriver.Edge()         driver.get('https://www.selenium.dev')              driver.set_permissions('camera', 'denied')              assert get_permission_state(driver, 'camera') == 'denied'         driver.quit()               def get_permission_state(driver, name):         """Helper function to query the permission state."""         script = """         const callback = arguments[arguments.length - 1];         navigator.permissions.query({name: arguments[0]}).then(permissionStatus => {             callback(permissionStatus.state);         });         """         return driver.execute_async_script(script, name)               def test_cast_features():         driver = webdriver.Edge()              try:             sinks = driver.get_sinks()             if sinks:                 sink_name = sinks[0]['name']                 driver.start_tab_mirroring(sink_name)                 driver.stop_casting(sink_name)             else:                 pytest.skip("No available Cast sinks to test with.")         finally:             driver.quit()               def test_get_browser_logs():         driver = webdriver.Edge()         driver.get("https://www.selenium.dev/selenium/web/bidi/logEntryAdded.html")         driver.find_element(By.ID, "consoleError").click()              logs = driver.get_log("browser")              # Assert that at least one log contains the expected message         assert any("I am console error" in log['message'] for log in logs), "No matching log message found."         driver.quit()          def get_default_edge_options():         options = webdriver.EdgeOptions()         options.add_argument("--no-sandbox")         return options     

[Add Example](https://www.selenium.dev/documentation/about/contributing/#creating-examples)                     @driver.network_conditions = {offline: false, latency: 100, throughput: 200}

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk//examples/ruby/spec/browsers/edge_spec.rb#L129)

##### /examples/ruby/spec/browsers/edge\_spec.rb

Copy  Close               # frozen_string_literal: true          require 'spec_helper'          RSpec.describe 'Edge' do       describe 'Options' do         let(:edge_location) { driver_finder && ENV.fetch('EDGE_BIN', nil) }              it 'basic options' do           options = Selenium::WebDriver::Options.edge           @driver = Selenium::WebDriver.for :edge, options: options         end              it 'add arguments' do           options = Selenium::WebDriver::Options.edge                options.args << '--start-maximized'                @driver = Selenium::WebDriver.for :edge, options: options         end              it 'sets location of binary' do           options = Selenium::WebDriver::Options.edge                options.binary = edge_location                @driver = Selenium::WebDriver.for :edge, options: options         end              it 'add extensions' do           extension_file_path = File.expand_path('../spec_support/extensions/webextensions-selenium-example.crx', __dir__)           options = Selenium::WebDriver::Options.edge                options.add_extension(extension_file_path)                @driver = Selenium::WebDriver.for :edge, options: options           @driver.get('https://www.selenium.dev/selenium/web/blank.html')           injected = @driver.find_element(:id, 'webextensions-selenium-example')           expect(injected.text).to eq 'Content injected by webextensions-selenium-example'         end              it 'keeps browser open' do           options = Selenium::WebDriver::Options.edge                options.detach = true                @driver = Selenium::WebDriver.for :edge, options: options         end              it 'excludes switches' do           options = Selenium::WebDriver::Options.edge                options.exclude_switches << 'disable-popup-blocking'                @driver = Selenium::WebDriver.for :edge, options: options         end       end            describe 'Service' do         let(:file_name) { File.expand_path('msedgedriver.log') }              after { FileUtils.rm_f(file_name) }              it 'logs to file' do           service = Selenium::WebDriver::Service.edge                service.log = file_name                @driver = Selenium::WebDriver.for :edge, service: service           expect(File.readlines(file_name).first).to include('Starting Microsoft Edge WebDriver')         end              it 'logs to console' do           service = Selenium::WebDriver::Service.edge                service.log = $stdout                expect {             @driver = Selenium::WebDriver.for :edge, service: service           }.to output(/Starting Microsoft Edge WebDriver/).to_stdout_from_any_process         end              it 'sets log level' do           service = Selenium::WebDriver::Service.edge           service.log = file_name                service.args << '--log-level=DEBUG'                @driver = Selenium::WebDriver.for :edge, service: service           expect(File.readlines(file_name).grep(/\[DEBUG\]:/).any?).to eq true         end              it 'sets log features' do           args = ["--log-path=#{file_name}", '--verbose']           service = Selenium::WebDriver::Service.edge(args: args)                service.args << '--append-log'           service.args << '--readable-timestamp'                @driver = Selenium::WebDriver.for :edge, service: service                expect(File.readlines(file_name).grep(/\[\d\d-\d\d-\d\d\d\d/).any?).to eq true         end              it 'disables build checks' do           service = Selenium::WebDriver::Service.edge log: file_name, args: ['--verbose']                service.args << '--disable-build-check'                @driver = Selenium::WebDriver.for :edge, service: service           warning = /\[WARNING\]: You are using an unsupported command-line switch: --disable-build-check/           expect(File.readlines(file_name).grep(warning).any?).to eq true         end       end            describe 'Special Features' do         it 'casts' do           @driver = Selenium::WebDriver.for :edge           sinks = @driver.cast_sinks           unless sinks.empty?             device_name = sinks.first['name']             @driver.start_cast_tab_mirroring(device_name)             expect { @driver.stop_casting(device_name) }.not_to raise_exception           end         end              it 'gets and sets network conditions' do           @driver = Selenium::WebDriver.for :edge           @driver.network_conditions = {offline: false, latency: 100, throughput: 200}           expect(@driver.network_conditions).to eq(             'offline' => false,             'latency' => 100,             'download_throughput' => 200,             'upload_throughput' => 200           )         end              it 'gets the browser logs' do           @driver = Selenium::WebDriver.for :edge           @driver.navigate.to 'https://www.selenium.dev/selenium/web/'           sleep 1           logs = @driver.logs.get(:browser)                expect(logs.first.message).to include 'Failed to load resource'         end              it 'sets permissions' do           @driver = Selenium::WebDriver.for :edge           @driver.navigate.to 'https://www.selenium.dev/selenium/web/'           @driver.add_permission('camera', 'denied')           @driver.add_permissions('clipboard-read' => 'denied', 'clipboard-write' => 'prompt')           expect(permission('camera')).to eq('denied')           expect(permission('clipboard-read')).to eq('denied')           expect(permission('clipboard-write')).to eq('prompt')         end       end            def driver_finder         options = Selenium::WebDriver::Options.edge(browser_version: 'stable')         service = Selenium::WebDriver::Service.edge         finder = Selenium::WebDriver::DriverFinder.new(options, service)         ENV['EDGEDRIVER_BIN'] = finder.driver_path         ENV['EDGE_BIN'] = finder.browser_path       end            def permission(name)         @driver.execute_async_script('callback = arguments[arguments.length - 1];' \                                      'callback(navigator.permissions.query({name: arguments[0]}));', name)['state']       end     end     

[Add Example](https://www.selenium.dev/documentation/about/contributing/#creating-examples)

[Add Example](https://www.selenium.dev/documentation/about/contributing/#creating-examples)

### Logs

  * Java   * Python   * CSharp   * Ruby   * JavaScript   * Kotlin

                  LogEntries logs = driver.manage().logs().get(LogType.BROWSER);

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/java/src/test/java/dev/selenium/browsers/EdgeTest.java#L242)

##### examples/java/src/test/java/dev/selenium/browsers/EdgeTest.java

Copy  Close               package dev.selenium.browsers;          import dev.selenium.BaseTest;     import java.io.File;     import java.io.IOException;     import java.io.PrintStream;     import java.nio.file.Files;     import java.nio.file.Path;     import java.nio.file.Paths;     import java.util.List;     import java.util.Map;     import java.util.logging.Level;     import java.util.regex.Pattern;     import org.junit.jupiter.api.AfterEach;     import org.junit.jupiter.api.Assertions;     import org.junit.jupiter.api.Test;     import org.openqa.selenium.By;     import org.openqa.selenium.WebElement;     import org.openqa.selenium.chromium.ChromiumDriverLogLevel;     import org.openqa.selenium.chromium.ChromiumNetworkConditions;     import org.openqa.selenium.edge.EdgeDriver;     import org.openqa.selenium.edge.EdgeDriverService;     import org.openqa.selenium.edge.EdgeOptions;     import org.openqa.selenium.logging.*;     import org.openqa.selenium.remote.service.DriverFinder;                    public class EdgeTest extends BaseTest {       @AfterEach       public void clearProperties() {         System.clearProperty(EdgeDriverService.EDGE_DRIVER_LOG_PROPERTY);         System.clearProperty(EdgeDriverService.EDGE_DRIVER_LOG_LEVEL_PROPERTY);       }            @Test       public void basicOptions() {         EdgeOptions options = getDefaultEdgeOptions();         driver = new EdgeDriver(options);       }            @Test       public void arguments() {         EdgeOptions options = getDefaultEdgeOptions();              options.addArguments("--start-maximized");              driver = new EdgeDriver(options);       }            @Test       public void setBrowserLocation() {         EdgeOptions options = getDefaultEdgeOptions();              options.setBinary(getEdgeLocation());              driver = new EdgeDriver(options);       }            @Test       public void extensionOptions() {         EdgeOptions options = getDefaultEdgeOptions();         Path path = Paths.get("src/test/resources/extensions/webextensions-selenium-example.crx");         File extensionFilePath = new File(path.toUri());              options.addExtensions(extensionFilePath);              driver = new EdgeDriver(options);         driver.get("https://www.selenium.dev/selenium/web/blank.html");         WebElement injected = driver.findElement(By.id("webextensions-selenium-example"));         Assertions.assertEquals(             "Content injected by webextensions-selenium-example", injected.getText());       }            @Test       public void excludeSwitches() {         EdgeOptions options = getDefaultEdgeOptions();              options.setExperimentalOption("excludeSwitches", List.of("disable-popup-blocking"));              driver = new EdgeDriver(options);       }            @Test       public void loggingPreferences() {         EdgeOptions options = getDefaultEdgeOptions();         LoggingPreferences logPrefs = new LoggingPreferences();         logPrefs.enable(LogType.PERFORMANCE, Level.ALL);         options.setCapability(EdgeOptions.LOGGING_PREFS, logPrefs);              driver = new EdgeDriver(options);         driver.get("https://www.selenium.dev");              LogEntries logEntries = driver.manage().logs().get(LogType.PERFORMANCE);         Assertions.assertFalse(logEntries.getAll().isEmpty());       }            @Test       public void logsToFile() throws IOException {         File logLocation = getTempFile("logsToFile", ".log");         EdgeDriverService service = new EdgeDriverService.Builder().withLogFile(logLocation).build();              driver = new EdgeDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         Assertions.assertTrue(fileContent.contains("Starting Microsoft Edge WebDriver"));       }            @Test       public void logsToConsole() throws IOException {         File logLocation = getTempFile("logsToConsole", ".log");         System.setOut(new PrintStream(logLocation));              EdgeDriverService service = new EdgeDriverService.Builder().withLogOutput(System.out).build();              driver = new EdgeDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         Assertions.assertTrue(fileContent.contains("Starting Microsoft Edge WebDriver"));       }            @Test       public void logsWithLevel() throws IOException {         File logLocation = getTempFile("logsWithLevel", ".log");         System.setProperty(EdgeDriverService.EDGE_DRIVER_LOG_PROPERTY, logLocation.getAbsolutePath());              EdgeDriverService service =             new EdgeDriverService.Builder().withLoglevel(ChromiumDriverLogLevel.DEBUG).build();              driver = new EdgeDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         Assertions.assertTrue(fileContent.contains("[DEBUG]:"));       }            @Test       public void configureDriverLogs() throws IOException {         File logLocation = getTempFile("configureDriverLogs", ".log");         System.setProperty(EdgeDriverService.EDGE_DRIVER_LOG_PROPERTY, logLocation.getAbsolutePath());         System.setProperty(             EdgeDriverService.EDGE_DRIVER_LOG_LEVEL_PROPERTY, ChromiumDriverLogLevel.DEBUG.toString());              EdgeDriverService service =             new EdgeDriverService.Builder().withAppendLog(true).withReadableTimestamp(true).build();              driver = new EdgeDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         Pattern pattern = Pattern.compile("\\[\\d\\d-\\d\\d-\\d\\d\\d\\d", Pattern.CASE_INSENSITIVE);         Assertions.assertTrue(pattern.matcher(fileContent).find());       }            @Test       public void disableBuildChecks() throws IOException {         File logLocation = getTempFile("disableBuildChecks", ".log");         System.setProperty(EdgeDriverService.EDGE_DRIVER_LOG_PROPERTY, logLocation.getAbsolutePath());         System.setProperty(             EdgeDriverService.EDGE_DRIVER_LOG_LEVEL_PROPERTY,             ChromiumDriverLogLevel.WARNING.toString());              EdgeDriverService service =             new EdgeDriverService.Builder().withBuildCheckDisabled(true).build();              driver = new EdgeDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         String expected =             "[WARNING]: You are using an unsupported command-line switch: --disable-build-check";         Assertions.assertTrue(fileContent.contains(expected));       }            private File getEdgeLocation() {         EdgeOptions options = getDefaultEdgeOptions();         options.setBrowserVersion("stable");         DriverFinder finder = new DriverFinder(EdgeDriverService.createDefaultService(), options);         return new File(finder.getBrowserPath());       }            @Test       public void setPermissions() {         EdgeDriver driver = new EdgeDriver();         driver.get("https://www.selenium.dev");              driver.setPermission("camera", "denied");              // Verify the permission state is 'denied'         String script = "return navigator.permissions.query({ name: 'camera' })" +                 "    .then(permissionStatus => permissionStatus.state);";         String permissionState = (String) driver.executeScript(script);              Assertions.assertEquals("denied", permissionState);         driver.quit();       }            @Test       public void setNetworkConditions() {         driver = new EdgeDriver();              ChromiumNetworkConditions networkConditions = new ChromiumNetworkConditions();         networkConditions.setOffline(false);         networkConditions.setLatency(java.time.Duration.ofMillis(20)); // 20 ms of latency         networkConditions.setDownloadThroughput(2000 * 1024 / 8); // 2000 kbps         networkConditions.setUploadThroughput(2000 * 1024 / 8);   // 2000 kbps              ((EdgeDriver) driver).setNetworkConditions(networkConditions);              driver.get("https://www.selenium.dev");              // Assert the network conditions are set as expected         ChromiumNetworkConditions actualConditions = ((EdgeDriver) driver).getNetworkConditions();         Assertions.assertAll(                 () -> Assertions.assertEquals(networkConditions.getOffline(), actualConditions.getOffline()),                 () -> Assertions.assertEquals(networkConditions.getLatency(), actualConditions.getLatency()),                 () -> Assertions.assertEquals(networkConditions.getDownloadThroughput(), actualConditions.getDownloadThroughput()),                 () -> Assertions.assertEquals(networkConditions.getUploadThroughput(), actualConditions.getUploadThroughput())         );         ((EdgeDriver) driver).deleteNetworkConditions();         driver.quit();       }            @Test       public void castFeatures() {         EdgeDriver driver = new EdgeDriver();              List<Map<String, String>> sinks = driver.getCastSinks();         if (!sinks.isEmpty()) {           String sinkName = sinks.get(0).get("name");           driver.startTabMirroring(sinkName);           driver.stopCasting(sinkName);         }              driver.quit();       }            @Test       public void getBrowserLogs() {         EdgeDriver driver = new EdgeDriver();         driver.get("https://www.selenium.dev/selenium/web/bidi/logEntryAdded.html");         WebElement consoleLogButton = driver.findElement(By.id("consoleError"));         consoleLogButton.click();              LogEntries logs = driver.manage().logs().get(LogType.BROWSER);              // Assert that at least one log contains the expected message         boolean logFound = false;         for (LogEntry log : logs) {           if (log.getMessage().contains("I am console error")) {             logFound = true;             break;           }         }              Assertions.assertTrue(logFound, "No matching log message found.");         driver.quit();       }     }                        logs = driver.get_log("browser")

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk//examples/python/tests/browsers/test_edge.py#L186)

##### /examples/python/tests/browsers/test\_edge.py

Copy  Close               import os     import re     import subprocess     import pytest     from selenium import webdriver     from selenium.webdriver.common.by import By          def test_basic_options():         options = get_default_edge_options()         driver = webdriver.Edge(options=options)              driver.quit()               def test_args():         options = get_default_edge_options()              options.add_argument("--start-maximized")              driver = webdriver.Edge(options=options)         driver.get('http://selenium.dev')              driver.quit()               def test_set_browser_location(edge_bin):         options = get_default_edge_options()              options.binary_location = edge_bin              driver = webdriver.Edge(options=options)              driver.quit()               def test_add_extension():         options = get_default_edge_options()         extension_file_path = os.path.abspath("tests/extensions/webextensions-selenium-example.crx")              options.add_extension(extension_file_path)              driver = webdriver.Edge(options=options)         driver.get("https://www.selenium.dev/selenium/web/blank.html")              driver.quit()               def test_keep_browser_open():         options = get_default_edge_options()              options.add_experimental_option("detach", True)              driver = webdriver.Edge(options=options)         driver.get('http://selenium.dev')              driver.quit()               def test_exclude_switches():         options = get_default_edge_options()              options.add_experimental_option('excludeSwitches', ['disable-popup-blocking'])              driver = webdriver.Edge(options=options)         driver.get('http://selenium.dev')              driver.quit()               def test_log_to_file(log_path):         service = webdriver.EdgeService(log_output=log_path)              driver = webdriver.Edge(service=service)              with open(log_path, 'r') as fp:             assert "Starting Microsoft Edge WebDriver" in fp.readline()              driver.quit()               def test_log_to_stdout(capfd):         service = webdriver.EdgeService(log_output=subprocess.STDOUT)              driver = webdriver.Edge(service=service)              out, err = capfd.readouterr()         assert "Starting Microsoft Edge WebDriver" in out              driver.quit()               def test_log_level(log_path):         service = webdriver.EdgeService(service_args=['--log-level=DEBUG'], log_output=log_path)              driver = webdriver.Edge(service=service)              with open(log_path, 'r') as f:             assert '[DEBUG]' in f.read()              driver.quit()               def test_log_features(log_path):         service = webdriver.EdgeService(service_args=['--append-log', '--readable-timestamp'], log_output=log_path)              driver = webdriver.Edge(service=service)              with open(log_path, 'r') as f:             assert re.match(r"\[\d\d-\d\d-\d\d\d\d", f.read())              driver.quit()               def test_build_checks(log_path):         service = webdriver.EdgeService(service_args=['--disable-build-check'], log_output=log_path)              driver = webdriver.Edge(service=service)              expected = "[WARNING]: You are using an unsupported command-line switch: --disable-build-check"         with open(log_path, 'r') as f:             assert expected in f.read()              driver.quit()               def test_set_network_conditions():         driver = webdriver.Edge()              network_conditions = {             "offline": False,             "latency": 20,  # 20 ms of latency             "download_throughput": 2000 * 1024 / 8,  # 2000 kbps             "upload_throughput": 2000 * 1024 / 8,    # 2000 kbps         }         driver.set_network_conditions(**network_conditions)              driver.get("https://www.selenium.dev")              # check whether the network conditions are set         assert driver.get_network_conditions() == network_conditions              driver.quit()               def test_set_permissions():         driver = webdriver.Edge()         driver.get('https://www.selenium.dev')              driver.set_permissions('camera', 'denied')              assert get_permission_state(driver, 'camera') == 'denied'         driver.quit()               def get_permission_state(driver, name):         """Helper function to query the permission state."""         script = """         const callback = arguments[arguments.length - 1];         navigator.permissions.query({name: arguments[0]}).then(permissionStatus => {             callback(permissionStatus.state);         });         """         return driver.execute_async_script(script, name)               def test_cast_features():         driver = webdriver.Edge()              try:             sinks = driver.get_sinks()             if sinks:                 sink_name = sinks[0]['name']                 driver.start_tab_mirroring(sink_name)                 driver.stop_casting(sink_name)             else:                 pytest.skip("No available Cast sinks to test with.")         finally:             driver.quit()               def test_get_browser_logs():         driver = webdriver.Edge()         driver.get("https://www.selenium.dev/selenium/web/bidi/logEntryAdded.html")         driver.find_element(By.ID, "consoleError").click()              logs = driver.get_log("browser")              # Assert that at least one log contains the expected message         assert any("I am console error" in log['message'] for log in logs), "No matching log message found."         driver.quit()          def get_default_edge_options():         options = webdriver.EdgeOptions()         options.add_argument("--no-sandbox")         return options     

[Add Example](https://www.selenium.dev/documentation/about/contributing/#creating-examples)                     sleep 1

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk//examples/ruby/spec/browsers/edge_spec.rb#L141)

##### /examples/ruby/spec/browsers/edge\_spec.rb

Copy  Close               # frozen_string_literal: true          require 'spec_helper'          RSpec.describe 'Edge' do       describe 'Options' do         let(:edge_location) { driver_finder && ENV.fetch('EDGE_BIN', nil) }              it 'basic options' do           options = Selenium::WebDriver::Options.edge           @driver = Selenium::WebDriver.for :edge, options: options         end              it 'add arguments' do           options = Selenium::WebDriver::Options.edge                options.args << '--start-maximized'                @driver = Selenium::WebDriver.for :edge, options: options         end              it 'sets location of binary' do           options = Selenium::WebDriver::Options.edge                options.binary = edge_location                @driver = Selenium::WebDriver.for :edge, options: options         end              it 'add extensions' do           extension_file_path = File.expand_path('../spec_support/extensions/webextensions-selenium-example.crx', __dir__)           options = Selenium::WebDriver::Options.edge                options.add_extension(extension_file_path)                @driver = Selenium::WebDriver.for :edge, options: options           @driver.get('https://www.selenium.dev/selenium/web/blank.html')           injected = @driver.find_element(:id, 'webextensions-selenium-example')           expect(injected.text).to eq 'Content injected by webextensions-selenium-example'         end              it 'keeps browser open' do           options = Selenium::WebDriver::Options.edge                options.detach = true                @driver = Selenium::WebDriver.for :edge, options: options         end              it 'excludes switches' do           options = Selenium::WebDriver::Options.edge                options.exclude_switches << 'disable-popup-blocking'                @driver = Selenium::WebDriver.for :edge, options: options         end       end            describe 'Service' do         let(:file_name) { File.expand_path('msedgedriver.log') }              after { FileUtils.rm_f(file_name) }              it 'logs to file' do           service = Selenium::WebDriver::Service.edge                service.log = file_name                @driver = Selenium::WebDriver.for :edge, service: service           expect(File.readlines(file_name).first).to include('Starting Microsoft Edge WebDriver')         end              it 'logs to console' do           service = Selenium::WebDriver::Service.edge                service.log = $stdout                expect {             @driver = Selenium::WebDriver.for :edge, service: service           }.to output(/Starting Microsoft Edge WebDriver/).to_stdout_from_any_process         end              it 'sets log level' do           service = Selenium::WebDriver::Service.edge           service.log = file_name                service.args << '--log-level=DEBUG'                @driver = Selenium::WebDriver.for :edge, service: service           expect(File.readlines(file_name).grep(/\[DEBUG\]:/).any?).to eq true         end              it 'sets log features' do           args = ["--log-path=#{file_name}", '--verbose']           service = Selenium::WebDriver::Service.edge(args: args)                service.args << '--append-log'           service.args << '--readable-timestamp'                @driver = Selenium::WebDriver.for :edge, service: service                expect(File.readlines(file_name).grep(/\[\d\d-\d\d-\d\d\d\d/).any?).to eq true         end              it 'disables build checks' do           service = Selenium::WebDriver::Service.edge log: file_name, args: ['--verbose']                service.args << '--disable-build-check'                @driver = Selenium::WebDriver.for :edge, service: service           warning = /\[WARNING\]: You are using an unsupported command-line switch: --disable-build-check/           expect(File.readlines(file_name).grep(warning).any?).to eq true         end       end            describe 'Special Features' do         it 'casts' do           @driver = Selenium::WebDriver.for :edge           sinks = @driver.cast_sinks           unless sinks.empty?             device_name = sinks.first['name']             @driver.start_cast_tab_mirroring(device_name)             expect { @driver.stop_casting(device_name) }.not_to raise_exception           end         end              it 'gets and sets network conditions' do           @driver = Selenium::WebDriver.for :edge           @driver.network_conditions = {offline: false, latency: 100, throughput: 200}           expect(@driver.network_conditions).to eq(             'offline' => false,             'latency' => 100,             'download_throughput' => 200,             'upload_throughput' => 200           )         end              it 'gets the browser logs' do           @driver = Selenium::WebDriver.for :edge           @driver.navigate.to 'https://www.selenium.dev/selenium/web/'           sleep 1           logs = @driver.logs.get(:browser)                expect(logs.first.message).to include 'Failed to load resource'         end              it 'sets permissions' do           @driver = Selenium::WebDriver.for :edge           @driver.navigate.to 'https://www.selenium.dev/selenium/web/'           @driver.add_permission('camera', 'denied')           @driver.add_permissions('clipboard-read' => 'denied', 'clipboard-write' => 'prompt')           expect(permission('camera')).to eq('denied')           expect(permission('clipboard-read')).to eq('denied')           expect(permission('clipboard-write')).to eq('prompt')         end       end            def driver_finder         options = Selenium::WebDriver::Options.edge(browser_version: 'stable')         service = Selenium::WebDriver::Service.edge         finder = Selenium::WebDriver::DriverFinder.new(options, service)         ENV['EDGEDRIVER_BIN'] = finder.driver_path         ENV['EDGE_BIN'] = finder.browser_path       end            def permission(name)         @driver.execute_async_script('callback = arguments[arguments.length - 1];' \                                      'callback(navigator.permissions.query({name: arguments[0]}));', name)['state']       end     end     

[Add Example](https://www.selenium.dev/documentation/about/contributing/#creating-examples)

[Add Example](https://www.selenium.dev/documentation/about/contributing/#creating-examples)

### Permissions

  * Java   * Python   * CSharp   * Ruby   * JavaScript   * Kotlin

                  driver.setPermission("camera", "denied");

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/java/src/test/java/dev/selenium/browsers/EdgeTest.java#L184)

##### examples/java/src/test/java/dev/selenium/browsers/EdgeTest.java

Copy  Close               package dev.selenium.browsers;          import dev.selenium.BaseTest;     import java.io.File;     import java.io.IOException;     import java.io.PrintStream;     import java.nio.file.Files;     import java.nio.file.Path;     import java.nio.file.Paths;     import java.util.List;     import java.util.Map;     import java.util.logging.Level;     import java.util.regex.Pattern;     import org.junit.jupiter.api.AfterEach;     import org.junit.jupiter.api.Assertions;     import org.junit.jupiter.api.Test;     import org.openqa.selenium.By;     import org.openqa.selenium.WebElement;     import org.openqa.selenium.chromium.ChromiumDriverLogLevel;     import org.openqa.selenium.chromium.ChromiumNetworkConditions;     import org.openqa.selenium.edge.EdgeDriver;     import org.openqa.selenium.edge.EdgeDriverService;     import org.openqa.selenium.edge.EdgeOptions;     import org.openqa.selenium.logging.*;     import org.openqa.selenium.remote.service.DriverFinder;                    public class EdgeTest extends BaseTest {       @AfterEach       public void clearProperties() {         System.clearProperty(EdgeDriverService.EDGE_DRIVER_LOG_PROPERTY);         System.clearProperty(EdgeDriverService.EDGE_DRIVER_LOG_LEVEL_PROPERTY);       }            @Test       public void basicOptions() {         EdgeOptions options = getDefaultEdgeOptions();         driver = new EdgeDriver(options);       }            @Test       public void arguments() {         EdgeOptions options = getDefaultEdgeOptions();              options.addArguments("--start-maximized");              driver = new EdgeDriver(options);       }            @Test       public void setBrowserLocation() {         EdgeOptions options = getDefaultEdgeOptions();              options.setBinary(getEdgeLocation());              driver = new EdgeDriver(options);       }            @Test       public void extensionOptions() {         EdgeOptions options = getDefaultEdgeOptions();         Path path = Paths.get("src/test/resources/extensions/webextensions-selenium-example.crx");         File extensionFilePath = new File(path.toUri());              options.addExtensions(extensionFilePath);              driver = new EdgeDriver(options);         driver.get("https://www.selenium.dev/selenium/web/blank.html");         WebElement injected = driver.findElement(By.id("webextensions-selenium-example"));         Assertions.assertEquals(             "Content injected by webextensions-selenium-example", injected.getText());       }            @Test       public void excludeSwitches() {         EdgeOptions options = getDefaultEdgeOptions();              options.setExperimentalOption("excludeSwitches", List.of("disable-popup-blocking"));              driver = new EdgeDriver(options);       }            @Test       public void loggingPreferences() {         EdgeOptions options = getDefaultEdgeOptions();         LoggingPreferences logPrefs = new LoggingPreferences();         logPrefs.enable(LogType.PERFORMANCE, Level.ALL);         options.setCapability(EdgeOptions.LOGGING_PREFS, logPrefs);              driver = new EdgeDriver(options);         driver.get("https://www.selenium.dev");              LogEntries logEntries = driver.manage().logs().get(LogType.PERFORMANCE);         Assertions.assertFalse(logEntries.getAll().isEmpty());       }            @Test       public void logsToFile() throws IOException {         File logLocation = getTempFile("logsToFile", ".log");         EdgeDriverService service = new EdgeDriverService.Builder().withLogFile(logLocation).build();              driver = new EdgeDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         Assertions.assertTrue(fileContent.contains("Starting Microsoft Edge WebDriver"));       }            @Test       public void logsToConsole() throws IOException {         File logLocation = getTempFile("logsToConsole", ".log");         System.setOut(new PrintStream(logLocation));              EdgeDriverService service = new EdgeDriverService.Builder().withLogOutput(System.out).build();              driver = new EdgeDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         Assertions.assertTrue(fileContent.contains("Starting Microsoft Edge WebDriver"));       }            @Test       public void logsWithLevel() throws IOException {         File logLocation = getTempFile("logsWithLevel", ".log");         System.setProperty(EdgeDriverService.EDGE_DRIVER_LOG_PROPERTY, logLocation.getAbsolutePath());              EdgeDriverService service =             new EdgeDriverService.Builder().withLoglevel(ChromiumDriverLogLevel.DEBUG).build();              driver = new EdgeDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         Assertions.assertTrue(fileContent.contains("[DEBUG]:"));       }            @Test       public void configureDriverLogs() throws IOException {         File logLocation = getTempFile("configureDriverLogs", ".log");         System.setProperty(EdgeDriverService.EDGE_DRIVER_LOG_PROPERTY, logLocation.getAbsolutePath());         System.setProperty(             EdgeDriverService.EDGE_DRIVER_LOG_LEVEL_PROPERTY, ChromiumDriverLogLevel.DEBUG.toString());              EdgeDriverService service =             new EdgeDriverService.Builder().withAppendLog(true).withReadableTimestamp(true).build();              driver = new EdgeDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         Pattern pattern = Pattern.compile("\\[\\d\\d-\\d\\d-\\d\\d\\d\\d", Pattern.CASE_INSENSITIVE);         Assertions.assertTrue(pattern.matcher(fileContent).find());       }            @Test       public void disableBuildChecks() throws IOException {         File logLocation = getTempFile("disableBuildChecks", ".log");         System.setProperty(EdgeDriverService.EDGE_DRIVER_LOG_PROPERTY, logLocation.getAbsolutePath());         System.setProperty(             EdgeDriverService.EDGE_DRIVER_LOG_LEVEL_PROPERTY,             ChromiumDriverLogLevel.WARNING.toString());              EdgeDriverService service =             new EdgeDriverService.Builder().withBuildCheckDisabled(true).build();              driver = new EdgeDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         String expected =             "[WARNING]: You are using an unsupported command-line switch: --disable-build-check";         Assertions.assertTrue(fileContent.contains(expected));       }            private File getEdgeLocation() {         EdgeOptions options = getDefaultEdgeOptions();         options.setBrowserVersion("stable");         DriverFinder finder = new DriverFinder(EdgeDriverService.createDefaultService(), options);         return new File(finder.getBrowserPath());       }            @Test       public void setPermissions() {         EdgeDriver driver = new EdgeDriver();         driver.get("https://www.selenium.dev");              driver.setPermission("camera", "denied");              // Verify the permission state is 'denied'         String script = "return navigator.permissions.query({ name: 'camera' })" +                 "    .then(permissionStatus => permissionStatus.state);";         String permissionState = (String) driver.executeScript(script);              Assertions.assertEquals("denied", permissionState);         driver.quit();       }            @Test       public void setNetworkConditions() {         driver = new EdgeDriver();              ChromiumNetworkConditions networkConditions = new ChromiumNetworkConditions();         networkConditions.setOffline(false);         networkConditions.setLatency(java.time.Duration.ofMillis(20)); // 20 ms of latency         networkConditions.setDownloadThroughput(2000 * 1024 / 8); // 2000 kbps         networkConditions.setUploadThroughput(2000 * 1024 / 8);   // 2000 kbps              ((EdgeDriver) driver).setNetworkConditions(networkConditions);              driver.get("https://www.selenium.dev");              // Assert the network conditions are set as expected         ChromiumNetworkConditions actualConditions = ((EdgeDriver) driver).getNetworkConditions();         Assertions.assertAll(                 () -> Assertions.assertEquals(networkConditions.getOffline(), actualConditions.getOffline()),                 () -> Assertions.assertEquals(networkConditions.getLatency(), actualConditions.getLatency()),                 () -> Assertions.assertEquals(networkConditions.getDownloadThroughput(), actualConditions.getDownloadThroughput()),                 () -> Assertions.assertEquals(networkConditions.getUploadThroughput(), actualConditions.getUploadThroughput())         );         ((EdgeDriver) driver).deleteNetworkConditions();         driver.quit();       }            @Test       public void castFeatures() {         EdgeDriver driver = new EdgeDriver();              List<Map<String, String>> sinks = driver.getCastSinks();         if (!sinks.isEmpty()) {           String sinkName = sinks.get(0).get("name");           driver.startTabMirroring(sinkName);           driver.stopCasting(sinkName);         }              driver.quit();       }            @Test       public void getBrowserLogs() {         EdgeDriver driver = new EdgeDriver();         driver.get("https://www.selenium.dev/selenium/web/bidi/logEntryAdded.html");         WebElement consoleLogButton = driver.findElement(By.id("consoleError"));         consoleLogButton.click();              LogEntries logs = driver.manage().logs().get(LogType.BROWSER);              // Assert that at least one log contains the expected message         boolean logFound = false;         for (LogEntry log : logs) {           if (log.getMessage().contains("I am console error")) {             logFound = true;             break;           }         }              Assertions.assertTrue(logFound, "No matching log message found.");         driver.quit();       }     }                        driver.set_permissions('camera', 'denied')

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk//examples/python/tests/browsers/test_edge.py#L149)

##### /examples/python/tests/browsers/test\_edge.py

Copy  Close               import os     import re     import subprocess     import pytest     from selenium import webdriver     from selenium.webdriver.common.by import By          def test_basic_options():         options = get_default_edge_options()         driver = webdriver.Edge(options=options)              driver.quit()               def test_args():         options = get_default_edge_options()              options.add_argument("--start-maximized")              driver = webdriver.Edge(options=options)         driver.get('http://selenium.dev')              driver.quit()               def test_set_browser_location(edge_bin):         options = get_default_edge_options()              options.binary_location = edge_bin              driver = webdriver.Edge(options=options)              driver.quit()               def test_add_extension():         options = get_default_edge_options()         extension_file_path = os.path.abspath("tests/extensions/webextensions-selenium-example.crx")              options.add_extension(extension_file_path)              driver = webdriver.Edge(options=options)         driver.get("https://www.selenium.dev/selenium/web/blank.html")              driver.quit()               def test_keep_browser_open():         options = get_default_edge_options()              options.add_experimental_option("detach", True)              driver = webdriver.Edge(options=options)         driver.get('http://selenium.dev')              driver.quit()               def test_exclude_switches():         options = get_default_edge_options()              options.add_experimental_option('excludeSwitches', ['disable-popup-blocking'])              driver = webdriver.Edge(options=options)         driver.get('http://selenium.dev')              driver.quit()               def test_log_to_file(log_path):         service = webdriver.EdgeService(log_output=log_path)              driver = webdriver.Edge(service=service)              with open(log_path, 'r') as fp:             assert "Starting Microsoft Edge WebDriver" in fp.readline()              driver.quit()               def test_log_to_stdout(capfd):         service = webdriver.EdgeService(log_output=subprocess.STDOUT)              driver = webdriver.Edge(service=service)              out, err = capfd.readouterr()         assert "Starting Microsoft Edge WebDriver" in out              driver.quit()               def test_log_level(log_path):         service = webdriver.EdgeService(service_args=['--log-level=DEBUG'], log_output=log_path)              driver = webdriver.Edge(service=service)              with open(log_path, 'r') as f:             assert '[DEBUG]' in f.read()              driver.quit()               def test_log_features(log_path):         service = webdriver.EdgeService(service_args=['--append-log', '--readable-timestamp'], log_output=log_path)              driver = webdriver.Edge(service=service)              with open(log_path, 'r') as f:             assert re.match(r"\[\d\d-\d\d-\d\d\d\d", f.read())              driver.quit()               def test_build_checks(log_path):         service = webdriver.EdgeService(service_args=['--disable-build-check'], log_output=log_path)              driver = webdriver.Edge(service=service)              expected = "[WARNING]: You are using an unsupported command-line switch: --disable-build-check"         with open(log_path, 'r') as f:             assert expected in f.read()              driver.quit()               def test_set_network_conditions():         driver = webdriver.Edge()              network_conditions = {             "offline": False,             "latency": 20,  # 20 ms of latency             "download_throughput": 2000 * 1024 / 8,  # 2000 kbps             "upload_throughput": 2000 * 1024 / 8,    # 2000 kbps         }         driver.set_network_conditions(**network_conditions)              driver.get("https://www.selenium.dev")              # check whether the network conditions are set         assert driver.get_network_conditions() == network_conditions              driver.quit()               def test_set_permissions():         driver = webdriver.Edge()         driver.get('https://www.selenium.dev')              driver.set_permissions('camera', 'denied')              assert get_permission_state(driver, 'camera') == 'denied'         driver.quit()               def get_permission_state(driver, name):         """Helper function to query the permission state."""         script = """         const callback = arguments[arguments.length - 1];         navigator.permissions.query({name: arguments[0]}).then(permissionStatus => {             callback(permissionStatus.state);         });         """         return driver.execute_async_script(script, name)               def test_cast_features():         driver = webdriver.Edge()              try:             sinks = driver.get_sinks()             if sinks:                 sink_name = sinks[0]['name']                 driver.start_tab_mirroring(sink_name)                 driver.stop_casting(sink_name)             else:                 pytest.skip("No available Cast sinks to test with.")         finally:             driver.quit()               def test_get_browser_logs():         driver = webdriver.Edge()         driver.get("https://www.selenium.dev/selenium/web/bidi/logEntryAdded.html")         driver.find_element(By.ID, "consoleError").click()              logs = driver.get_log("browser")              # Assert that at least one log contains the expected message         assert any("I am console error" in log['message'] for log in logs), "No matching log message found."         driver.quit()          def get_default_edge_options():         options = webdriver.EdgeOptions()         options.add_argument("--no-sandbox")         return options     

[Add Example](https://www.selenium.dev/documentation/about/contributing/#creating-examples)                     @driver.navigate.to 'https://www.selenium.dev/selenium/web/'           @driver.add_permission('camera', 'denied')

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk//examples/ruby/spec/browsers/edge_spec.rb#L149-L150)

##### /examples/ruby/spec/browsers/edge\_spec.rb

Copy  Close               # frozen_string_literal: true          require 'spec_helper'          RSpec.describe 'Edge' do       describe 'Options' do         let(:edge_location) { driver_finder && ENV.fetch('EDGE_BIN', nil) }              it 'basic options' do           options = Selenium::WebDriver::Options.edge           @driver = Selenium::WebDriver.for :edge, options: options         end              it 'add arguments' do           options = Selenium::WebDriver::Options.edge                options.args << '--start-maximized'                @driver = Selenium::WebDriver.for :edge, options: options         end              it 'sets location of binary' do           options = Selenium::WebDriver::Options.edge                options.binary = edge_location                @driver = Selenium::WebDriver.for :edge, options: options         end              it 'add extensions' do           extension_file_path = File.expand_path('../spec_support/extensions/webextensions-selenium-example.crx', __dir__)           options = Selenium::WebDriver::Options.edge                options.add_extension(extension_file_path)                @driver = Selenium::WebDriver.for :edge, options: options           @driver.get('https://www.selenium.dev/selenium/web/blank.html')           injected = @driver.find_element(:id, 'webextensions-selenium-example')           expect(injected.text).to eq 'Content injected by webextensions-selenium-example'         end              it 'keeps browser open' do           options = Selenium::WebDriver::Options.edge                options.detach = true                @driver = Selenium::WebDriver.for :edge, options: options         end              it 'excludes switches' do           options = Selenium::WebDriver::Options.edge                options.exclude_switches << 'disable-popup-blocking'                @driver = Selenium::WebDriver.for :edge, options: options         end       end            describe 'Service' do         let(:file_name) { File.expand_path('msedgedriver.log') }              after { FileUtils.rm_f(file_name) }              it 'logs to file' do           service = Selenium::WebDriver::Service.edge                service.log = file_name                @driver = Selenium::WebDriver.for :edge, service: service           expect(File.readlines(file_name).first).to include('Starting Microsoft Edge WebDriver')         end              it 'logs to console' do           service = Selenium::WebDriver::Service.edge                service.log = $stdout                expect {             @driver = Selenium::WebDriver.for :edge, service: service           }.to output(/Starting Microsoft Edge WebDriver/).to_stdout_from_any_process         end              it 'sets log level' do           service = Selenium::WebDriver::Service.edge           service.log = file_name                service.args << '--log-level=DEBUG'                @driver = Selenium::WebDriver.for :edge, service: service           expect(File.readlines(file_name).grep(/\[DEBUG\]:/).any?).to eq true         end              it 'sets log features' do           args = ["--log-path=#{file_name}", '--verbose']           service = Selenium::WebDriver::Service.edge(args: args)                service.args << '--append-log'           service.args << '--readable-timestamp'                @driver = Selenium::WebDriver.for :edge, service: service                expect(File.readlines(file_name).grep(/\[\d\d-\d\d-\d\d\d\d/).any?).to eq true         end              it 'disables build checks' do           service = Selenium::WebDriver::Service.edge log: file_name, args: ['--verbose']                service.args << '--disable-build-check'                @driver = Selenium::WebDriver.for :edge, service: service           warning = /\[WARNING\]: You are using an unsupported command-line switch: --disable-build-check/           expect(File.readlines(file_name).grep(warning).any?).to eq true         end       end            describe 'Special Features' do         it 'casts' do           @driver = Selenium::WebDriver.for :edge           sinks = @driver.cast_sinks           unless sinks.empty?             device_name = sinks.first['name']             @driver.start_cast_tab_mirroring(device_name)             expect { @driver.stop_casting(device_name) }.not_to raise_exception           end         end              it 'gets and sets network conditions' do           @driver = Selenium::WebDriver.for :edge           @driver.network_conditions = {offline: false, latency: 100, throughput: 200}           expect(@driver.network_conditions).to eq(             'offline' => false,             'latency' => 100,             'download_throughput' => 200,             'upload_throughput' => 200           )         end              it 'gets the browser logs' do           @driver = Selenium::WebDriver.for :edge           @driver.navigate.to 'https://www.selenium.dev/selenium/web/'           sleep 1           logs = @driver.logs.get(:browser)                expect(logs.first.message).to include 'Failed to load resource'         end              it 'sets permissions' do           @driver = Selenium::WebDriver.for :edge           @driver.navigate.to 'https://www.selenium.dev/selenium/web/'           @driver.add_permission('camera', 'denied')           @driver.add_permissions('clipboard-read' => 'denied', 'clipboard-write' => 'prompt')           expect(permission('camera')).to eq('denied')           expect(permission('clipboard-read')).to eq('denied')           expect(permission('clipboard-write')).to eq('prompt')         end       end            def driver_finder         options = Selenium::WebDriver::Options.edge(browser_version: 'stable')         service = Selenium::WebDriver::Service.edge         finder = Selenium::WebDriver::DriverFinder.new(options, service)         ENV['EDGEDRIVER_BIN'] = finder.driver_path         ENV['EDGE_BIN'] = finder.browser_path       end            def permission(name)         @driver.execute_async_script('callback = arguments[arguments.length - 1];' \                                      'callback(navigator.permissions.query({name: arguments[0]}));', name)['state']       end     end     

[Add Example](https://www.selenium.dev/documentation/about/contributing/#creating-examples)

[Add Example](https://www.selenium.dev/documentation/about/contributing/#creating-examples)

### DevTools

See the [Chrome DevTools](https://www.selenium.dev/documentation/webdriver/bidi/cdp/) section for more information about using DevTools in Edge

# 3 - Firefox specific functionality

These are capabilities and features specific to Mozilla Firefox browsers.

Selenium 4 requires Firefox 78 or greater. It is recommended to always use the latest version of geckodriver.

## Options

Capabilities common to all browsers are described on the [Options page](https://www.selenium.dev/documentation/webdriver/drivers/options/).

Capabilities unique to Firefox can be found at Mozilla’s page for [firefoxOptions](https://developer.mozilla.org/en-US/docs/Web/WebDriver/Capabilities/firefoxOptions)

Starting a Firefox session with basic defined options looks like this:

  * Java   * Python   * CSharp   * Ruby   * JavaScript   * Kotlin

                  FirefoxOptions options = new FirefoxOptions();         driver = new FirefoxDriver(options);

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk//examples/java/src/test/java/dev/selenium/browsers/FirefoxTest.java#L36-L37)

##### /examples/java/src/test/java/dev/selenium/browsers/FirefoxTest.java

Copy  Close               package dev.selenium.browsers;          import dev.selenium.BaseTest;     import java.io.File;     import java.io.IOException;     import java.io.PrintStream;     import java.nio.file.Files;     import java.nio.file.Path;     import java.nio.file.Paths;     import org.junit.jupiter.api.AfterEach;     import org.junit.jupiter.api.Assertions;     import org.junit.jupiter.api.Test;     import org.junit.jupiter.api.condition.DisabledOnOs;     import org.junit.jupiter.api.condition.OS;     import org.openqa.selenium.By;     import org.openqa.selenium.OutputType;     import org.openqa.selenium.WebElement;     import org.openqa.selenium.firefox.*;     import org.openqa.selenium.remote.service.DriverFinder;                              public class FirefoxTest extends BaseTest {       private FirefoxDriver driver;            @AfterEach       public void clearProperties() {         System.clearProperty(GeckoDriverService.GECKO_DRIVER_LOG_PROPERTY);         System.clearProperty(GeckoDriverService.GECKO_DRIVER_LOG_LEVEL_PROPERTY);driver.quit();       }            @Test       public void basicOptions() {         FirefoxOptions options = new FirefoxOptions();         driver = new FirefoxDriver(options);       }            @Test       public void arguments() {         FirefoxOptions options = new FirefoxOptions();              options.addArguments("-headless");              driver = new FirefoxDriver(options);       }            @Test       @DisabledOnOs(OS.WINDOWS)       public void setBrowserLocation() {         FirefoxOptions options = new FirefoxOptions();              options.setBinary(getFirefoxLocation());              driver = new FirefoxDriver(options);       }            @Test       public void logsToFile() throws IOException {         File logLocation = getTempFile("logsToFile", ".log");         FirefoxDriverService service =             new GeckoDriverService.Builder().withLogFile(logLocation).build();              driver = new FirefoxDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         Assertions.assertTrue(fileContent.contains("geckodriver	INFO	Listening on"));       }            @Test       public void logsToConsole() throws IOException {         File logLocation = getTempFile("logsToConsole", ".log");         System.setOut(new PrintStream(logLocation));              FirefoxDriverService service =             new GeckoDriverService.Builder().withLogOutput(System.out).build();              driver = new FirefoxDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         Assertions.assertTrue(fileContent.contains("geckodriver	INFO	Listening on"));       }            @Test       public void logsWithLevel() throws IOException {         File logLocation = getTempFile("logsWithLevel", ".log");         System.setProperty(GeckoDriverService.GECKO_DRIVER_LOG_PROPERTY, logLocation.getAbsolutePath());              FirefoxDriverService service =             new GeckoDriverService.Builder().withLogLevel(FirefoxDriverLogLevel.DEBUG).build();              driver = new FirefoxDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         Assertions.assertTrue(fileContent.contains("Marionette\tDEBUG"));       }            @Test       public void stopsTruncatingLogs() throws IOException {         File logLocation = getTempFile("geckodriver-", "log");         System.setProperty(GeckoDriverService.GECKO_DRIVER_LOG_PROPERTY, logLocation.getAbsolutePath());         System.setProperty(             GeckoDriverService.GECKO_DRIVER_LOG_LEVEL_PROPERTY, FirefoxDriverLogLevel.DEBUG.toString());              FirefoxDriverService service =             new GeckoDriverService.Builder().withTruncatedLogs(false).build();              driver = new FirefoxDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         Assertions.assertFalse(fileContent.contains(" ... "));       }            @Test       public void setProfileLocation() {         File profileDirectory = getTempDirectory("profile-");         FirefoxDriverService service =             new GeckoDriverService.Builder().withProfileRoot(profileDirectory).build();              driver = new FirefoxDriver(service);              String location = (String) driver.getCapabilities().getCapability("moz:profile");         Assertions.assertTrue(location.contains(profileDirectory.getAbsolutePath()));       }                 @Test       public void installAddon() {         driver = startFirefoxDriver();         Path xpiPath = Paths.get("src/test/resources/extensions/selenium-example.xpi");              driver.installExtension(xpiPath);              driver.get("https://www.selenium.dev/selenium/web/blank.html");         WebElement injected = driver.findElement(By.id("webextensions-selenium-example"));         Assertions.assertEquals(             "Content injected by webextensions-selenium-example", injected.getText());       }                 @Test       public void uninstallAddon() {         driver = startFirefoxDriver();         Path xpiPath = Paths.get("src/test/resources/extensions/selenium-example.xpi");         String id = driver.installExtension(xpiPath);              driver.uninstallExtension(id);              driver.get("https://www.selenium.dev/selenium/web/blank.html");         Assertions.assertEquals(driver.findElements(By.id("webextensions-selenium-example")).size(), 0);       }                 @Test       public void installUnsignedAddonPath() {         driver = startFirefoxDriver();         Path path = Paths.get("src/test/resources/extensions/selenium-example");              driver.installExtension(path, true);              driver.get("https://www.selenium.dev/selenium/web/blank.html");         WebElement injected = getLocatedElement(driver, By.id("webextensions-selenium-example"));         Assertions.assertEquals(             "Content injected by webextensions-selenium-example", injected.getText());       }            private Path getFirefoxLocation() {         FirefoxOptions options = new FirefoxOptions();         options.setBrowserVersion("stable");         DriverFinder finder = new DriverFinder(GeckoDriverService.createDefaultService(), options);         return Path.of(finder.getBrowserPath());       }            @Test       public void fullPageScreenshot() throws Exception {         driver = startFirefoxDriver();              driver.get("https://www.selenium.dev");              File screenshot = driver.getFullPageScreenshotAs(OutputType.FILE);              File targetFile = new File("full_page_screenshot.png");         Files.move(screenshot.toPath(), targetFile.toPath());              // Verify the screenshot file exists         Assertions.assertTrue(targetFile.exists(), "The full page screenshot file should exist");         Files.deleteIfExists(targetFile.toPath());              driver.quit();       }            @Test       public void setContext() {         driver = startFirefoxDriver(new FirefoxOptions().addArguments("-remote-allow-system-access"));              ((HasContext) driver).setContext(FirefoxCommandContext.CHROME);         driver.executeScript("console.log('Inside Chrome context');");              // Verify the context is back to "content"         Assertions.assertEquals(                 FirefoxCommandContext.CHROME, ((HasContext) driver).getContext(),                 "The context should be 'chrome'"         );              driver.quit();       }            @Test       public void firefoxProfile() {         FirefoxProfile profile = new FirefoxProfile();         FirefoxOptions options = new FirefoxOptions();         profile.setPreference("javascript.enabled", "False");         options.setProfile(profile);              driver = new FirefoxDriver(options);              driver.quit();       }     }                        options = webdriver.FirefoxOptions()         driver = webdriver.Firefox(options=options)

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk//examples/python/tests/browsers/test_firefox.py#L10-L11)

##### /examples/python/tests/browsers/test\_firefox.py

Copy  Close               import os     import subprocess     import sys          import pytest     from selenium import webdriver               def test_basic_options():         options = webdriver.FirefoxOptions()         driver = webdriver.Firefox(options=options)              driver.quit()               def test_arguments():         options = webdriver.FirefoxOptions()              options.add_argument("-headless")              driver = webdriver.Firefox(options=options)         driver.quit()               def test_set_browser_location(firefox_bin):         options = webdriver.FirefoxOptions()              options.binary_location = firefox_bin              driver = webdriver.Firefox(options=options)              driver.quit()               def test_log_to_file(log_path):         service = webdriver.FirefoxService(log_output=log_path, service_args=['--log', 'debug'])              driver = webdriver.Firefox(service=service)         driver.get("https://www.selenium.dev")              with open(log_path, 'r') as fp:             assert "geckodriver	INFO	Listening on" in fp.readline()              driver.quit()               def test_log_to_stdout(capfd):         service = webdriver.FirefoxService(log_output=subprocess.STDOUT)              driver = webdriver.Firefox(service=service)              out, err = capfd.readouterr()         assert "geckodriver	INFO	Listening on" in out              driver.quit()               def test_log_level(log_path):         service = webdriver.FirefoxService(log_output=log_path, service_args=['--log', 'debug'])              driver = webdriver.Firefox(service=service)              with open(log_path, 'r') as f:             assert '\tDEBUG' in f.read()              driver.quit()               def test_log_truncation(log_path):         service = webdriver.FirefoxService(service_args=['--log-no-truncate', '--log', 'debug'], log_output=log_path)              driver = webdriver.Firefox(service=service)              with open(log_path, 'r') as f:             assert ' ... ' not in f.read()              driver.quit()               def test_profile_location(temp_dir):         service = webdriver.FirefoxService(service_args=['--profile-root', temp_dir])              driver = webdriver.Firefox(service=service)         profile_name = driver.capabilities.get('moz:profile').replace('\\', '/').split('/')[-1]              assert profile_name in os.listdir(temp_dir)              driver.quit()               def test_install_addon(firefox_driver, addon_path_xpi):         driver = firefox_driver              driver.install_addon(addon_path_xpi)              driver.get("https://www.selenium.dev/selenium/web/blank.html")         injected = driver.find_element(webdriver.common.by.By.ID, "webextensions-selenium-example")              assert injected.text == "Content injected by webextensions-selenium-example"               def test_uninstall_addon(firefox_driver, addon_path_xpi):         driver = firefox_driver              id = driver.install_addon(addon_path_xpi)         driver.uninstall_addon(id)              driver.get("https://www.selenium.dev/selenium/web/blank.html")         assert len(driver.find_elements(webdriver.common.by.By.ID, "webextensions-selenium-example")) == 0               def test_install_unsigned_addon_directory(firefox_driver, addon_path_dir):         driver = firefox_driver              driver.install_addon(addon_path_dir, temporary=True)              driver.get("https://www.selenium.dev/selenium/web/blank.html")         injected = driver.find_element(webdriver.common.by.By.ID, "webextensions-selenium-example")              assert injected.text == "Content injected by webextensions-selenium-example"               def test_install_unsigned_addon_directory_slash(firefox_driver, addon_path_dir_slash):         driver = firefox_driver              driver.install_addon(addon_path_dir_slash, temporary=True)              driver.get("https://www.selenium.dev/selenium/web/blank.html")         injected = driver.find_element(webdriver.common.by.By.ID, "webextensions-selenium-example")              assert injected.text == "Content injected by webextensions-selenium-example"               def test_full_page_screenshot(firefox_driver):         driver = firefox_driver              driver.get("https://www.selenium.dev")              driver.save_full_page_screenshot("full_page_screenshot.png")              assert os.path.exists("full_page_screenshot.png")              driver.quit()               def test_set_context():         options = webdriver.FirefoxOptions()         options.add_argument("-remote-allow-system-access")         driver = webdriver.Firefox(options=options)              with driver.context(driver.CONTEXT_CHROME):             driver.execute_script("console.log('Inside Chrome context');")              # Check if the context is back to content         assert driver.execute("GET_CONTEXT")["value"] == "content"         driver.quit()               def test_firefox_profile():         from selenium.webdriver.firefox.options import Options         from selenium.webdriver.firefox.firefox_profile import FirefoxProfile              options = Options()         firefox_profile = FirefoxProfile()         firefox_profile.set_preference("javascript.enabled", False)         options.profile = firefox_profile              driver = webdriver.Firefox(options=options)              driver.quit()                                var options = new FirefoxOptions();                 driver = new FirefoxDriver(options);

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk//examples/dotnet/SeleniumDocs/Browsers/FirefoxTest.cs#L34-L35)

##### /examples/dotnet/SeleniumDocs/Browsers/FirefoxTest.cs

Copy  Close               using System;     using System.IO;     using System.Linq;     using Microsoft.VisualStudio.TestTools.UnitTesting;     using OpenQA.Selenium;     using OpenQA.Selenium.Firefox;          namespace SeleniumDocs.Browsers     {         [TestClass]         public class FirefoxTest         {             private FirefoxDriver driver;             private string _logLocation;             private string _tempPath;                  [TestCleanup]             public void Cleanup()             {                 if (_logLocation != null && File.Exists(_logLocation))                 {                     File.Delete(_logLocation);                 }                 if (_tempPath != null && File.Exists(_tempPath))                 {                     File.Delete(_tempPath);                 }                 driver.Quit();             }                  [TestMethod]             public void BasicOptions()             {                 var options = new FirefoxOptions();                 driver = new FirefoxDriver(options);             }                  [TestMethod]             public void Arguments()             {                 var options = new FirefoxOptions();                      options.AddArgument("-headless");                      driver = new FirefoxDriver(options);             }                  [TestMethod]             public void SetBinary()             {                 var options = new FirefoxOptions();                      options.BinaryLocation = GetFirefoxLocation();                      driver = new FirefoxDriver(options);             }                  [TestMethod]             [Ignore("Not implemented")]             public void LogsToFile()             {                 var service = FirefoxDriverService.CreateDefaultService();                 //service.LogFile = _logLocation                      driver = new FirefoxDriver(service);                 var lines = File.ReadLines(GetLogLocation());                 Assert.IsNotNull(lines.FirstOrDefault(line => line.Contains("geckodriver	INFO	Listening on")));             }                  [TestMethod]             [Ignore("Not implemented")]             public void LogsToConsole()             {                 var stringWriter = new StringWriter();                 var originalOutput = Console.Out;                 Console.SetOut(stringWriter);                      var service = FirefoxDriverService.CreateDefaultService();                 //service.LogToConsole = true;                      driver = new FirefoxDriver(service);                 Assert.IsTrue(stringWriter.ToString().Contains("geckodriver	INFO	Listening on"));                 Console.SetOut(originalOutput);                 stringWriter.Dispose();             }                  [TestMethod]             [Ignore("You can set it, just can't see it")]             public void LogsLevel()             {                 var service = FirefoxDriverService.CreateDefaultService();                 //service.LogFile = _logLocation                      service.LogLevel = FirefoxDriverLogLevel.Debug;                      driver = new FirefoxDriver(service);                 var lines = File.ReadLines(GetLogLocation());                 Assert.IsNotNull(lines.FirstOrDefault(line => line.Contains("Marionette\tDEBUG")));             }                  [TestMethod]             [Ignore("Not implemented")]             public void StopsTruncatingLogs()             {                 var service = FirefoxDriverService.CreateDefaultService();                 //service.TruncateLogs = false;                      service.LogLevel = FirefoxDriverLogLevel.Debug;                      driver = new FirefoxDriver(service);                 var lines = File.ReadLines(GetLogLocation());                 Assert.IsNull(lines.FirstOrDefault(line => line.Contains(" ... ")));             }                  [TestMethod]             [Ignore("Not implemented")]             public void SetProfileLocation()             {                 var service = FirefoxDriverService.CreateDefaultService();                 // service.ProfileRoot = GetTempDirectory();                      driver = new FirefoxDriver(service);                      string profile = (string)driver.Capabilities.GetCapability("moz:profile");                 string[] directories = profile.Split("/");                 var dirName = directories.Last();                 Assert.AreEqual(GetTempDirectory() + "/" + dirName, profile);             }                  [TestMethod]             public void InstallAddon()             {                 SetWaitingDriver();                 string baseDir = AppDomain.CurrentDomain.BaseDirectory;                 string extensionFilePath = Path.Combine(baseDir, "../../../Extensions/webextensions-selenium-example.xpi");                      driver.InstallAddOnFromFile(Path.GetFullPath(extensionFilePath));                      driver.Url = "https://www.selenium.dev/selenium/web/blank.html";                 IWebElement injected = driver.FindElement(By.Id("webextensions-selenium-example"));                 Assert.AreEqual("Content injected by webextensions-selenium-example", injected.Text);             }                  [TestMethod]             public void UnInstallAddon()             {                 driver = new FirefoxDriver();                 string baseDir = AppDomain.CurrentDomain.BaseDirectory;                 string extensionFilePath = Path.Combine(baseDir, "../../../Extensions/webextensions-selenium-example.xpi");                 string extensionId = driver.InstallAddOnFromFile(Path.GetFullPath(extensionFilePath));                      driver.UninstallAddOn(extensionId);                      driver.Url = "https://www.selenium.dev/selenium/web/blank.html";                 Assert.AreEqual(driver.FindElements(By.Id("webextensions-selenium-example")).Count, 0);             }                  [TestMethod]             public void InstallUnsignedAddon()             {                 SetWaitingDriver();                 string baseDir = AppDomain.CurrentDomain.BaseDirectory;                 string extensionDirPath = Path.Combine(baseDir, "../../../Extensions/webextensions-selenium-example/");                      driver.InstallAddOnFromDirectory(Path.GetFullPath(extensionDirPath), true);                      driver.Url = "https://www.selenium.dev/selenium/web/blank.html";                 IWebElement injected = driver.FindElement(By.Id("webextensions-selenium-example"));                 Assert.AreEqual("Content injected by webextensions-selenium-example", injected.Text);             }                          private string GetLogLocation()             {                 if (_logLocation != null && !File.Exists(_logLocation))                 {                     _logLocation = Path.GetTempFileName();                 }                      return _logLocation;             }                  private string GetTempDirectory()             {                 if (_tempPath != null && !File.Exists(_tempPath))                 {                     _tempPath = Path.GetTempPath();                 }                      return _tempPath;             }                  private void SetWaitingDriver()             {                 driver = new FirefoxDriver();                 driver.Manage().Timeouts().ImplicitWait = TimeSpan.FromSeconds(2);             }                  private static string GetFirefoxLocation()             {                 var options = new FirefoxOptions()                 {                     BrowserVersion = "stable"                 };                 return new DriverFinder(options).GetBrowserPath();             }         }     }                     options = Selenium::WebDriver::Options.firefox           @driver = Selenium::WebDriver.for :firefox, options: options

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk//examples/ruby/spec/browsers/firefox_spec.rb#L10-L11)

##### /examples/ruby/spec/browsers/firefox\_spec.rb

Copy  Close               # frozen_string_literal: true          require 'spec_helper'          RSpec.describe 'Firefox' do       describe 'Options' do         let(:firefox_location) { driver_finder && ENV.fetch('FIREFOX_BIN', nil) }              it 'basic options' do           options = Selenium::WebDriver::Options.firefox           @driver = Selenium::WebDriver.for :firefox, options: options         end              it 'add arguments' do           options = Selenium::WebDriver::Options.firefox                options.args << '-headless'                @driver = Selenium::WebDriver.for :firefox, options: options         end              it 'sets location of binary' do           options = Selenium::WebDriver::Options.firefox                options.binary = firefox_location                @driver = Selenium::WebDriver.for :firefox, options: options         end       end            describe 'Service' do         let(:file_name) { Tempfile.new('geckodriver').path }         let(:root_directory) { Dir.mktmpdir }              after do           FileUtils.rm_f(file_name)           FileUtils.rm_rf(root_directory)         end              it 'logs to file' do           service = Selenium::WebDriver::Service.firefox                service.log = file_name                @driver = Selenium::WebDriver.for :firefox, service: service           expect(File.readlines(file_name).first).to include("geckodriver\tINFO\tListening on")         end              it 'logs to console' do           service = Selenium::WebDriver::Service.firefox                service.log = $stdout                expect {             @driver = Selenium::WebDriver.for :firefox, service: service           }.to output(/geckodriver	INFO	Listening on/).to_stdout_from_any_process         end              it 'sets log level' do           service = Selenium::WebDriver::Service.firefox           service.log = file_name                service.args += %w[--log debug]                @driver = Selenium::WebDriver.for :firefox, service: service           expect(File.readlines(file_name).grep(/Marionette	DEBUG/).any?).to eq true         end              it 'stops truncating log lines' do           service = Selenium::WebDriver::Service.firefox(log: file_name, args: %w[--log debug])                service.args << '--log-no-truncate'                @driver = Selenium::WebDriver.for :firefox, service: service           expect(File.readlines(file_name).grep(/ \.\.\. /).any?).to eq false         end              it 'sets default profile location' do           service = Selenium::WebDriver::Service.firefox                service.args += ['--profile-root', root_directory]                @driver = Selenium::WebDriver.for :firefox, service: service           profile_location = Dir.new(@driver.capabilities['moz:profile'])           expect(profile_location.path.gsub('\\', '/')).to include(root_directory)         end       end            describe 'Features' do         let(:driver) { start_firefox }              it 'installs addon' do           extension_file_path = File.expand_path('../spec_support/extensions/webextensions-selenium-example.xpi', __dir__)                driver.install_addon(extension_file_path)                driver.get 'https://www.selenium.dev/selenium/web/blank.html'           injected = driver.find_element(id: 'webextensions-selenium-example')           expect(injected.text).to eq 'Content injected by webextensions-selenium-example'         end              it 'uninstalls addon' do           extension_file_path = File.expand_path('../spec_support/extensions/webextensions-selenium-example.xpi', __dir__)           extension_id = driver.install_addon(extension_file_path)                driver.uninstall_addon(extension_id)                driver.get 'https://www.selenium.dev/selenium/web/blank.html'           expect(driver.find_elements(id: 'webextensions-selenium-example')).to be_empty         end              it 'installs unsigned addon' do           extension_dir_path = File.expand_path('../spec_support/extensions/webextensions-selenium-example/', __dir__)                driver.install_addon(extension_dir_path, true)                driver.navigate.to 'https://www.selenium.dev/selenium/web/blank.html'           injected = driver.find_element(id: 'webextensions-selenium-example')           expect(injected.text).to eq 'Content injected by webextensions-selenium-example'         end              it 'takes full page screenshot' do           driver.navigate.to 'https://www.selenium.dev/selenium/web/blank.html'           Dir.mktmpdir('screenshot_test') do |dir|             screenshot = driver.save_full_page_screenshot(File.join(dir, 'screenshot.png'))                  expect(screenshot).to be_a File           end         end              it 'sets the context' do           driver.context = 'content'           expect(driver.context).to eq 'content'         end       end            describe 'Profile' do         it 'creates a new profile' do           profile = Selenium::WebDriver::Firefox::Profile.new           profile['browser.download.dir'] = '/tmp/webdriver-downloads'           options = Selenium::WebDriver::Firefox::Options.new(profile: profile)           expect(options.profile).to eq(profile)         end       end            def driver_finder         options = Selenium::WebDriver::Options.firefox(browser_version: 'stable')         service = Selenium::WebDriver::Service.firefox         finder = Selenium::WebDriver::DriverFinder.new(options, service)         ENV['GECKODRIVER_BIN'] = finder.driver_path         ENV['FIREFOX_BIN'] = finder.browser_path       end     end                        driver = new Builder()           .forBrowser(Browser.FIREFOX)           .setFirefoxOptions(options)           .build();

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk//examples/javascript/test/getting_started/openFirefoxTest.spec.js#L10-L13)

##### /examples/javascript/test/getting\_started/openFirefoxTest.spec.js

Copy  Close               const {Browser, Builder} = require('selenium-webdriver');     const firefox = require('selenium-webdriver/firefox');               describe('Open Firefox', function () {       let driver;            before(async function () {         let options = new firefox.Options();         driver = new Builder()           .forBrowser(Browser.FIREFOX)           .setFirefoxOptions(options)           .build();       });            after(async () => await driver.quit());            it('Basic Firefox test', async function () {         await driver.get('https://www.selenium.dev/selenium/web/blank.html');       });     });

[Add Example](https://www.selenium.dev/documentation/about/contributing/#creating-examples)

### Arguments

The `args` parameter is for a list of Command line switches used when starting the browser.   Commonly used args include `-headless` and `"-profile", "/path/to/profile"`

Add an argument to options:

  * Java   * Python   * CSharp   * Ruby   * JavaScript   * Kotlin

                  options.addArguments("-headless");

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk//examples/java/src/test/java/dev/selenium/browsers/FirefoxTest.java#L44)

##### /examples/java/src/test/java/dev/selenium/browsers/FirefoxTest.java

Copy  Close               package dev.selenium.browsers;          import dev.selenium.BaseTest;     import java.io.File;     import java.io.IOException;     import java.io.PrintStream;     import java.nio.file.Files;     import java.nio.file.Path;     import java.nio.file.Paths;     import org.junit.jupiter.api.AfterEach;     import org.junit.jupiter.api.Assertions;     import org.junit.jupiter.api.Test;     import org.junit.jupiter.api.condition.DisabledOnOs;     import org.junit.jupiter.api.condition.OS;     import org.openqa.selenium.By;     import org.openqa.selenium.OutputType;     import org.openqa.selenium.WebElement;     import org.openqa.selenium.firefox.*;     import org.openqa.selenium.remote.service.DriverFinder;                              public class FirefoxTest extends BaseTest {       private FirefoxDriver driver;            @AfterEach       public void clearProperties() {         System.clearProperty(GeckoDriverService.GECKO_DRIVER_LOG_PROPERTY);         System.clearProperty(GeckoDriverService.GECKO_DRIVER_LOG_LEVEL_PROPERTY);driver.quit();       }            @Test       public void basicOptions() {         FirefoxOptions options = new FirefoxOptions();         driver = new FirefoxDriver(options);       }            @Test       public void arguments() {         FirefoxOptions options = new FirefoxOptions();              options.addArguments("-headless");              driver = new FirefoxDriver(options);       }            @Test       @DisabledOnOs(OS.WINDOWS)       public void setBrowserLocation() {         FirefoxOptions options = new FirefoxOptions();              options.setBinary(getFirefoxLocation());              driver = new FirefoxDriver(options);       }            @Test       public void logsToFile() throws IOException {         File logLocation = getTempFile("logsToFile", ".log");         FirefoxDriverService service =             new GeckoDriverService.Builder().withLogFile(logLocation).build();              driver = new FirefoxDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         Assertions.assertTrue(fileContent.contains("geckodriver	INFO	Listening on"));       }            @Test       public void logsToConsole() throws IOException {         File logLocation = getTempFile("logsToConsole", ".log");         System.setOut(new PrintStream(logLocation));              FirefoxDriverService service =             new GeckoDriverService.Builder().withLogOutput(System.out).build();              driver = new FirefoxDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         Assertions.assertTrue(fileContent.contains("geckodriver	INFO	Listening on"));       }            @Test       public void logsWithLevel() throws IOException {         File logLocation = getTempFile("logsWithLevel", ".log");         System.setProperty(GeckoDriverService.GECKO_DRIVER_LOG_PROPERTY, logLocation.getAbsolutePath());              FirefoxDriverService service =             new GeckoDriverService.Builder().withLogLevel(FirefoxDriverLogLevel.DEBUG).build();              driver = new FirefoxDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         Assertions.assertTrue(fileContent.contains("Marionette\tDEBUG"));       }            @Test       public void stopsTruncatingLogs() throws IOException {         File logLocation = getTempFile("geckodriver-", "log");         System.setProperty(GeckoDriverService.GECKO_DRIVER_LOG_PROPERTY, logLocation.getAbsolutePath());         System.setProperty(             GeckoDriverService.GECKO_DRIVER_LOG_LEVEL_PROPERTY, FirefoxDriverLogLevel.DEBUG.toString());              FirefoxDriverService service =             new GeckoDriverService.Builder().withTruncatedLogs(false).build();              driver = new FirefoxDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         Assertions.assertFalse(fileContent.contains(" ... "));       }            @Test       public void setProfileLocation() {         File profileDirectory = getTempDirectory("profile-");         FirefoxDriverService service =             new GeckoDriverService.Builder().withProfileRoot(profileDirectory).build();              driver = new FirefoxDriver(service);              String location = (String) driver.getCapabilities().getCapability("moz:profile");         Assertions.assertTrue(location.contains(profileDirectory.getAbsolutePath()));       }                 @Test       public void installAddon() {         driver = startFirefoxDriver();         Path xpiPath = Paths.get("src/test/resources/extensions/selenium-example.xpi");              driver.installExtension(xpiPath);              driver.get("https://www.selenium.dev/selenium/web/blank.html");         WebElement injected = driver.findElement(By.id("webextensions-selenium-example"));         Assertions.assertEquals(             "Content injected by webextensions-selenium-example", injected.getText());       }                 @Test       public void uninstallAddon() {         driver = startFirefoxDriver();         Path xpiPath = Paths.get("src/test/resources/extensions/selenium-example.xpi");         String id = driver.installExtension(xpiPath);              driver.uninstallExtension(id);              driver.get("https://www.selenium.dev/selenium/web/blank.html");         Assertions.assertEquals(driver.findElements(By.id("webextensions-selenium-example")).size(), 0);       }                 @Test       public void installUnsignedAddonPath() {         driver = startFirefoxDriver();         Path path = Paths.get("src/test/resources/extensions/selenium-example");              driver.installExtension(path, true);              driver.get("https://www.selenium.dev/selenium/web/blank.html");         WebElement injected = getLocatedElement(driver, By.id("webextensions-selenium-example"));         Assertions.assertEquals(             "Content injected by webextensions-selenium-example", injected.getText());       }            private Path getFirefoxLocation() {         FirefoxOptions options = new FirefoxOptions();         options.setBrowserVersion("stable");         DriverFinder finder = new DriverFinder(GeckoDriverService.createDefaultService(), options);         return Path.of(finder.getBrowserPath());       }            @Test       public void fullPageScreenshot() throws Exception {         driver = startFirefoxDriver();              driver.get("https://www.selenium.dev");              File screenshot = driver.getFullPageScreenshotAs(OutputType.FILE);              File targetFile = new File("full_page_screenshot.png");         Files.move(screenshot.toPath(), targetFile.toPath());              // Verify the screenshot file exists         Assertions.assertTrue(targetFile.exists(), "The full page screenshot file should exist");         Files.deleteIfExists(targetFile.toPath());              driver.quit();       }            @Test       public void setContext() {         driver = startFirefoxDriver(new FirefoxOptions().addArguments("-remote-allow-system-access"));              ((HasContext) driver).setContext(FirefoxCommandContext.CHROME);         driver.executeScript("console.log('Inside Chrome context');");              // Verify the context is back to "content"         Assertions.assertEquals(                 FirefoxCommandContext.CHROME, ((HasContext) driver).getContext(),                 "The context should be 'chrome'"         );              driver.quit();       }            @Test       public void firefoxProfile() {         FirefoxProfile profile = new FirefoxProfile();         FirefoxOptions options = new FirefoxOptions();         profile.setPreference("javascript.enabled", "False");         options.setProfile(profile);              driver = new FirefoxDriver(options);              driver.quit();       }     }                        options.add_argument("-headless")

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk//examples/python/tests/browsers/test_firefox.py#L19)

##### /examples/python/tests/browsers/test\_firefox.py

Copy  Close               import os     import subprocess     import sys          import pytest     from selenium import webdriver               def test_basic_options():         options = webdriver.FirefoxOptions()         driver = webdriver.Firefox(options=options)              driver.quit()               def test_arguments():         options = webdriver.FirefoxOptions()              options.add_argument("-headless")              driver = webdriver.Firefox(options=options)         driver.quit()               def test_set_browser_location(firefox_bin):         options = webdriver.FirefoxOptions()              options.binary_location = firefox_bin              driver = webdriver.Firefox(options=options)              driver.quit()               def test_log_to_file(log_path):         service = webdriver.FirefoxService(log_output=log_path, service_args=['--log', 'debug'])              driver = webdriver.Firefox(service=service)         driver.get("https://www.selenium.dev")              with open(log_path, 'r') as fp:             assert "geckodriver	INFO	Listening on" in fp.readline()              driver.quit()               def test_log_to_stdout(capfd):         service = webdriver.FirefoxService(log_output=subprocess.STDOUT)              driver = webdriver.Firefox(service=service)              out, err = capfd.readouterr()         assert "geckodriver	INFO	Listening on" in out              driver.quit()               def test_log_level(log_path):         service = webdriver.FirefoxService(log_output=log_path, service_args=['--log', 'debug'])              driver = webdriver.Firefox(service=service)              with open(log_path, 'r') as f:             assert '\tDEBUG' in f.read()              driver.quit()               def test_log_truncation(log_path):         service = webdriver.FirefoxService(service_args=['--log-no-truncate', '--log', 'debug'], log_output=log_path)              driver = webdriver.Firefox(service=service)              with open(log_path, 'r') as f:             assert ' ... ' not in f.read()              driver.quit()               def test_profile_location(temp_dir):         service = webdriver.FirefoxService(service_args=['--profile-root', temp_dir])              driver = webdriver.Firefox(service=service)         profile_name = driver.capabilities.get('moz:profile').replace('\\', '/').split('/')[-1]              assert profile_name in os.listdir(temp_dir)              driver.quit()               def test_install_addon(firefox_driver, addon_path_xpi):         driver = firefox_driver              driver.install_addon(addon_path_xpi)              driver.get("https://www.selenium.dev/selenium/web/blank.html")         injected = driver.find_element(webdriver.common.by.By.ID, "webextensions-selenium-example")              assert injected.text == "Content injected by webextensions-selenium-example"               def test_uninstall_addon(firefox_driver, addon_path_xpi):         driver = firefox_driver              id = driver.install_addon(addon_path_xpi)         driver.uninstall_addon(id)              driver.get("https://www.selenium.dev/selenium/web/blank.html")         assert len(driver.find_elements(webdriver.common.by.By.ID, "webextensions-selenium-example")) == 0               def test_install_unsigned_addon_directory(firefox_driver, addon_path_dir):         driver = firefox_driver              driver.install_addon(addon_path_dir, temporary=True)              driver.get("https://www.selenium.dev/selenium/web/blank.html")         injected = driver.find_element(webdriver.common.by.By.ID, "webextensions-selenium-example")              assert injected.text == "Content injected by webextensions-selenium-example"               def test_install_unsigned_addon_directory_slash(firefox_driver, addon_path_dir_slash):         driver = firefox_driver              driver.install_addon(addon_path_dir_slash, temporary=True)              driver.get("https://www.selenium.dev/selenium/web/blank.html")         injected = driver.find_element(webdriver.common.by.By.ID, "webextensions-selenium-example")              assert injected.text == "Content injected by webextensions-selenium-example"               def test_full_page_screenshot(firefox_driver):         driver = firefox_driver              driver.get("https://www.selenium.dev")              driver.save_full_page_screenshot("full_page_screenshot.png")              assert os.path.exists("full_page_screenshot.png")              driver.quit()               def test_set_context():         options = webdriver.FirefoxOptions()         options.add_argument("-remote-allow-system-access")         driver = webdriver.Firefox(options=options)              with driver.context(driver.CONTEXT_CHROME):             driver.execute_script("console.log('Inside Chrome context');")              # Check if the context is back to content         assert driver.execute("GET_CONTEXT")["value"] == "content"         driver.quit()               def test_firefox_profile():         from selenium.webdriver.firefox.options import Options         from selenium.webdriver.firefox.firefox_profile import FirefoxProfile              options = Options()         firefox_profile = FirefoxProfile()         firefox_profile.set_preference("javascript.enabled", False)         options.profile = firefox_profile              driver = webdriver.Firefox(options=options)              driver.quit()                                options.AddArgument("-headless");

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk//examples/dotnet/SeleniumDocs/Browsers/FirefoxTest.cs#L43)

##### /examples/dotnet/SeleniumDocs/Browsers/FirefoxTest.cs

Copy  Close               using System;     using System.IO;     using System.Linq;     using Microsoft.VisualStudio.TestTools.UnitTesting;     using OpenQA.Selenium;     using OpenQA.Selenium.Firefox;          namespace SeleniumDocs.Browsers     {         [TestClass]         public class FirefoxTest         {             private FirefoxDriver driver;             private string _logLocation;             private string _tempPath;                  [TestCleanup]             public void Cleanup()             {                 if (_logLocation != null && File.Exists(_logLocation))                 {                     File.Delete(_logLocation);                 }                 if (_tempPath != null && File.Exists(_tempPath))                 {                     File.Delete(_tempPath);                 }                 driver.Quit();             }                  [TestMethod]             public void BasicOptions()             {                 var options = new FirefoxOptions();                 driver = new FirefoxDriver(options);             }                  [TestMethod]             public void Arguments()             {                 var options = new FirefoxOptions();                      options.AddArgument("-headless");                      driver = new FirefoxDriver(options);             }                  [TestMethod]             public void SetBinary()             {                 var options = new FirefoxOptions();                      options.BinaryLocation = GetFirefoxLocation();                      driver = new FirefoxDriver(options);             }                  [TestMethod]             [Ignore("Not implemented")]             public void LogsToFile()             {                 var service = FirefoxDriverService.CreateDefaultService();                 //service.LogFile = _logLocation                      driver = new FirefoxDriver(service);                 var lines = File.ReadLines(GetLogLocation());                 Assert.IsNotNull(lines.FirstOrDefault(line => line.Contains("geckodriver	INFO	Listening on")));             }                  [TestMethod]             [Ignore("Not implemented")]             public void LogsToConsole()             {                 var stringWriter = new StringWriter();                 var originalOutput = Console.Out;                 Console.SetOut(stringWriter);                      var service = FirefoxDriverService.CreateDefaultService();                 //service.LogToConsole = true;                      driver = new FirefoxDriver(service);                 Assert.IsTrue(stringWriter.ToString().Contains("geckodriver	INFO	Listening on"));                 Console.SetOut(originalOutput);                 stringWriter.Dispose();             }                  [TestMethod]             [Ignore("You can set it, just can't see it")]             public void LogsLevel()             {                 var service = FirefoxDriverService.CreateDefaultService();                 //service.LogFile = _logLocation                      service.LogLevel = FirefoxDriverLogLevel.Debug;                      driver = new FirefoxDriver(service);                 var lines = File.ReadLines(GetLogLocation());                 Assert.IsNotNull(lines.FirstOrDefault(line => line.Contains("Marionette\tDEBUG")));             }                  [TestMethod]             [Ignore("Not implemented")]             public void StopsTruncatingLogs()             {                 var service = FirefoxDriverService.CreateDefaultService();                 //service.TruncateLogs = false;                      service.LogLevel = FirefoxDriverLogLevel.Debug;                      driver = new FirefoxDriver(service);                 var lines = File.ReadLines(GetLogLocation());                 Assert.IsNull(lines.FirstOrDefault(line => line.Contains(" ... ")));             }                  [TestMethod]             [Ignore("Not implemented")]             public void SetProfileLocation()             {                 var service = FirefoxDriverService.CreateDefaultService();                 // service.ProfileRoot = GetTempDirectory();                      driver = new FirefoxDriver(service);                      string profile = (string)driver.Capabilities.GetCapability("moz:profile");                 string[] directories = profile.Split("/");                 var dirName = directories.Last();                 Assert.AreEqual(GetTempDirectory() + "/" + dirName, profile);             }                  [TestMethod]             public void InstallAddon()             {                 SetWaitingDriver();                 string baseDir = AppDomain.CurrentDomain.BaseDirectory;                 string extensionFilePath = Path.Combine(baseDir, "../../../Extensions/webextensions-selenium-example.xpi");                      driver.InstallAddOnFromFile(Path.GetFullPath(extensionFilePath));                      driver.Url = "https://www.selenium.dev/selenium/web/blank.html";                 IWebElement injected = driver.FindElement(By.Id("webextensions-selenium-example"));                 Assert.AreEqual("Content injected by webextensions-selenium-example", injected.Text);             }                  [TestMethod]             public void UnInstallAddon()             {                 driver = new FirefoxDriver();                 string baseDir = AppDomain.CurrentDomain.BaseDirectory;                 string extensionFilePath = Path.Combine(baseDir, "../../../Extensions/webextensions-selenium-example.xpi");                 string extensionId = driver.InstallAddOnFromFile(Path.GetFullPath(extensionFilePath));                      driver.UninstallAddOn(extensionId);                      driver.Url = "https://www.selenium.dev/selenium/web/blank.html";                 Assert.AreEqual(driver.FindElements(By.Id("webextensions-selenium-example")).Count, 0);             }                  [TestMethod]             public void InstallUnsignedAddon()             {                 SetWaitingDriver();                 string baseDir = AppDomain.CurrentDomain.BaseDirectory;                 string extensionDirPath = Path.Combine(baseDir, "../../../Extensions/webextensions-selenium-example/");                      driver.InstallAddOnFromDirectory(Path.GetFullPath(extensionDirPath), true);                      driver.Url = "https://www.selenium.dev/selenium/web/blank.html";                 IWebElement injected = driver.FindElement(By.Id("webextensions-selenium-example"));                 Assert.AreEqual("Content injected by webextensions-selenium-example", injected.Text);             }                          private string GetLogLocation()             {                 if (_logLocation != null && !File.Exists(_logLocation))                 {                     _logLocation = Path.GetTempFileName();                 }                      return _logLocation;             }                  private string GetTempDirectory()             {                 if (_tempPath != null && !File.Exists(_tempPath))                 {                     _tempPath = Path.GetTempPath();                 }                      return _tempPath;             }                  private void SetWaitingDriver()             {                 driver = new FirefoxDriver();                 driver.Manage().Timeouts().ImplicitWait = TimeSpan.FromSeconds(2);             }                  private static string GetFirefoxLocation()             {                 var options = new FirefoxOptions()                 {                     BrowserVersion = "stable"                 };                 return new DriverFinder(options).GetBrowserPath();             }         }     }                     options.args << '-headless'

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk//examples/ruby/spec/browsers/firefox_spec.rb#L17)

##### /examples/ruby/spec/browsers/firefox\_spec.rb

Copy  Close               # frozen_string_literal: true          require 'spec_helper'          RSpec.describe 'Firefox' do       describe 'Options' do         let(:firefox_location) { driver_finder && ENV.fetch('FIREFOX_BIN', nil) }              it 'basic options' do           options = Selenium::WebDriver::Options.firefox           @driver = Selenium::WebDriver.for :firefox, options: options         end              it 'add arguments' do           options = Selenium::WebDriver::Options.firefox                options.args << '-headless'                @driver = Selenium::WebDriver.for :firefox, options: options         end              it 'sets location of binary' do           options = Selenium::WebDriver::Options.firefox                options.binary = firefox_location                @driver = Selenium::WebDriver.for :firefox, options: options         end       end            describe 'Service' do         let(:file_name) { Tempfile.new('geckodriver').path }         let(:root_directory) { Dir.mktmpdir }              after do           FileUtils.rm_f(file_name)           FileUtils.rm_rf(root_directory)         end              it 'logs to file' do           service = Selenium::WebDriver::Service.firefox                service.log = file_name                @driver = Selenium::WebDriver.for :firefox, service: service           expect(File.readlines(file_name).first).to include("geckodriver\tINFO\tListening on")         end              it 'logs to console' do           service = Selenium::WebDriver::Service.firefox                service.log = $stdout                expect {             @driver = Selenium::WebDriver.for :firefox, service: service           }.to output(/geckodriver	INFO	Listening on/).to_stdout_from_any_process         end              it 'sets log level' do           service = Selenium::WebDriver::Service.firefox           service.log = file_name                service.args += %w[--log debug]                @driver = Selenium::WebDriver.for :firefox, service: service           expect(File.readlines(file_name).grep(/Marionette	DEBUG/).any?).to eq true         end              it 'stops truncating log lines' do           service = Selenium::WebDriver::Service.firefox(log: file_name, args: %w[--log debug])                service.args << '--log-no-truncate'                @driver = Selenium::WebDriver.for :firefox, service: service           expect(File.readlines(file_name).grep(/ \.\.\. /).any?).to eq false         end              it 'sets default profile location' do           service = Selenium::WebDriver::Service.firefox                service.args += ['--profile-root', root_directory]                @driver = Selenium::WebDriver.for :firefox, service: service           profile_location = Dir.new(@driver.capabilities['moz:profile'])           expect(profile_location.path.gsub('\\', '/')).to include(root_directory)         end       end            describe 'Features' do         let(:driver) { start_firefox }              it 'installs addon' do           extension_file_path = File.expand_path('../spec_support/extensions/webextensions-selenium-example.xpi', __dir__)                driver.install_addon(extension_file_path)                driver.get 'https://www.selenium.dev/selenium/web/blank.html'           injected = driver.find_element(id: 'webextensions-selenium-example')           expect(injected.text).to eq 'Content injected by webextensions-selenium-example'         end              it 'uninstalls addon' do           extension_file_path = File.expand_path('../spec_support/extensions/webextensions-selenium-example.xpi', __dir__)           extension_id = driver.install_addon(extension_file_path)                driver.uninstall_addon(extension_id)                driver.get 'https://www.selenium.dev/selenium/web/blank.html'           expect(driver.find_elements(id: 'webextensions-selenium-example')).to be_empty         end              it 'installs unsigned addon' do           extension_dir_path = File.expand_path('../spec_support/extensions/webextensions-selenium-example/', __dir__)                driver.install_addon(extension_dir_path, true)                driver.navigate.to 'https://www.selenium.dev/selenium/web/blank.html'           injected = driver.find_element(id: 'webextensions-selenium-example')           expect(injected.text).to eq 'Content injected by webextensions-selenium-example'         end              it 'takes full page screenshot' do           driver.navigate.to 'https://www.selenium.dev/selenium/web/blank.html'           Dir.mktmpdir('screenshot_test') do |dir|             screenshot = driver.save_full_page_screenshot(File.join(dir, 'screenshot.png'))                  expect(screenshot).to be_a File           end         end              it 'sets the context' do           driver.context = 'content'           expect(driver.context).to eq 'content'         end       end            describe 'Profile' do         it 'creates a new profile' do           profile = Selenium::WebDriver::Firefox::Profile.new           profile['browser.download.dir'] = '/tmp/webdriver-downloads'           options = Selenium::WebDriver::Firefox::Options.new(profile: profile)           expect(options.profile).to eq(profile)         end       end            def driver_finder         options = Selenium::WebDriver::Options.firefox(browser_version: 'stable')         service = Selenium::WebDriver::Service.firefox         finder = Selenium::WebDriver::DriverFinder.new(options, service)         ENV['GECKODRIVER_BIN'] = finder.driver_path         ENV['FIREFOX_BIN'] = finder.browser_path       end     end                          .setFirefoxOptions(options.addArguments('--headless'))

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk//examples/javascript/test/browser/firefoxSpecificFunctionalities.spec.js#L12)

##### /examples/javascript/test/browser/firefoxSpecificFunctionalities.spec.js

Copy  Close               const {Browser, By, Builder} = require('selenium-webdriver');     const Firefox = require('selenium-webdriver/firefox');     const options = new Firefox.Options();     const path = require('path');     const assert = require("assert");               describe('Should be able to Test Command line arguments', function () {       it('headless', async function () {         let driver = new Builder()           .forBrowser(Browser.FIREFOX)           .setFirefoxOptions(options.addArguments('--headless'))           .build();              await driver.get('https://www.selenium.dev/selenium/web/blank.html');         await driver.quit();       });            it('Should be able to add extension', async function () {              const xpiPath = path.resolve('./test/resources/extensions/selenium-example.xpi')         let driver = new Builder()           .forBrowser(Browser.FIREFOX)           .build()         let id = await driver.installAddon(xpiPath);         await driver.uninstallAddon(id);                   await driver.get('https://www.selenium.dev/selenium/web/blank.html');         const ele = await driver.findElements(By.id("webextensions-selenium-example"));         assert.equal(ele.length, 0);         await driver.quit();       });            it('Should be able to install unsigned addon', async function () {              const xpiPath = path.resolve('./test/resources/extensions/selenium-example')         let driver = new Builder()           .forBrowser(Browser.FIREFOX)           .build()         let id = await driver.installAddon(xpiPath, true);         await driver.uninstallAddon(id);                   await driver.get('https://www.selenium.dev/selenium/web/blank.html');         const ele = await driver.findElements(By.id("webextensions-selenium-example"));         assert.equal(ele.length, 0);         await driver.quit();       });     });

[Add Example](https://www.selenium.dev/documentation/about/contributing/#creating-examples)

### Start browser in a specified location

The `binary` parameter takes the path of an alternate location of browser to use. For example, with this parameter you can use geckodriver to drive Firefox Nightly instead of the production version when both are present on your computer.

Add a browser location to options:

  * Java   * Python   * CSharp   * Ruby   * JavaScript   * Kotlin

                  options.setBinary(getFirefoxLocation());

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk//examples/java/src/test/java/dev/selenium/browsers/FirefoxTest.java#L54)

##### /examples/java/src/test/java/dev/selenium/browsers/FirefoxTest.java

Copy  Close               package dev.selenium.browsers;          import dev.selenium.BaseTest;     import java.io.File;     import java.io.IOException;     import java.io.PrintStream;     import java.nio.file.Files;     import java.nio.file.Path;     import java.nio.file.Paths;     import org.junit.jupiter.api.AfterEach;     import org.junit.jupiter.api.Assertions;     import org.junit.jupiter.api.Test;     import org.junit.jupiter.api.condition.DisabledOnOs;     import org.junit.jupiter.api.condition.OS;     import org.openqa.selenium.By;     import org.openqa.selenium.OutputType;     import org.openqa.selenium.WebElement;     import org.openqa.selenium.firefox.*;     import org.openqa.selenium.remote.service.DriverFinder;                              public class FirefoxTest extends BaseTest {       private FirefoxDriver driver;            @AfterEach       public void clearProperties() {         System.clearProperty(GeckoDriverService.GECKO_DRIVER_LOG_PROPERTY);         System.clearProperty(GeckoDriverService.GECKO_DRIVER_LOG_LEVEL_PROPERTY);driver.quit();       }            @Test       public void basicOptions() {         FirefoxOptions options = new FirefoxOptions();         driver = new FirefoxDriver(options);       }            @Test       public void arguments() {         FirefoxOptions options = new FirefoxOptions();              options.addArguments("-headless");              driver = new FirefoxDriver(options);       }            @Test       @DisabledOnOs(OS.WINDOWS)       public void setBrowserLocation() {         FirefoxOptions options = new FirefoxOptions();              options.setBinary(getFirefoxLocation());              driver = new FirefoxDriver(options);       }            @Test       public void logsToFile() throws IOException {         File logLocation = getTempFile("logsToFile", ".log");         FirefoxDriverService service =             new GeckoDriverService.Builder().withLogFile(logLocation).build();              driver = new FirefoxDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         Assertions.assertTrue(fileContent.contains("geckodriver	INFO	Listening on"));       }            @Test       public void logsToConsole() throws IOException {         File logLocation = getTempFile("logsToConsole", ".log");         System.setOut(new PrintStream(logLocation));              FirefoxDriverService service =             new GeckoDriverService.Builder().withLogOutput(System.out).build();              driver = new FirefoxDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         Assertions.assertTrue(fileContent.contains("geckodriver	INFO	Listening on"));       }            @Test       public void logsWithLevel() throws IOException {         File logLocation = getTempFile("logsWithLevel", ".log");         System.setProperty(GeckoDriverService.GECKO_DRIVER_LOG_PROPERTY, logLocation.getAbsolutePath());              FirefoxDriverService service =             new GeckoDriverService.Builder().withLogLevel(FirefoxDriverLogLevel.DEBUG).build();              driver = new FirefoxDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         Assertions.assertTrue(fileContent.contains("Marionette\tDEBUG"));       }            @Test       public void stopsTruncatingLogs() throws IOException {         File logLocation = getTempFile("geckodriver-", "log");         System.setProperty(GeckoDriverService.GECKO_DRIVER_LOG_PROPERTY, logLocation.getAbsolutePath());         System.setProperty(             GeckoDriverService.GECKO_DRIVER_LOG_LEVEL_PROPERTY, FirefoxDriverLogLevel.DEBUG.toString());              FirefoxDriverService service =             new GeckoDriverService.Builder().withTruncatedLogs(false).build();              driver = new FirefoxDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         Assertions.assertFalse(fileContent.contains(" ... "));       }            @Test       public void setProfileLocation() {         File profileDirectory = getTempDirectory("profile-");         FirefoxDriverService service =             new GeckoDriverService.Builder().withProfileRoot(profileDirectory).build();              driver = new FirefoxDriver(service);              String location = (String) driver.getCapabilities().getCapability("moz:profile");         Assertions.assertTrue(location.contains(profileDirectory.getAbsolutePath()));       }                 @Test       public void installAddon() {         driver = startFirefoxDriver();         Path xpiPath = Paths.get("src/test/resources/extensions/selenium-example.xpi");              driver.installExtension(xpiPath);              driver.get("https://www.selenium.dev/selenium/web/blank.html");         WebElement injected = driver.findElement(By.id("webextensions-selenium-example"));         Assertions.assertEquals(             "Content injected by webextensions-selenium-example", injected.getText());       }                 @Test       public void uninstallAddon() {         driver = startFirefoxDriver();         Path xpiPath = Paths.get("src/test/resources/extensions/selenium-example.xpi");         String id = driver.installExtension(xpiPath);              driver.uninstallExtension(id);              driver.get("https://www.selenium.dev/selenium/web/blank.html");         Assertions.assertEquals(driver.findElements(By.id("webextensions-selenium-example")).size(), 0);       }                 @Test       public void installUnsignedAddonPath() {         driver = startFirefoxDriver();         Path path = Paths.get("src/test/resources/extensions/selenium-example");              driver.installExtension(path, true);              driver.get("https://www.selenium.dev/selenium/web/blank.html");         WebElement injected = getLocatedElement(driver, By.id("webextensions-selenium-example"));         Assertions.assertEquals(             "Content injected by webextensions-selenium-example", injected.getText());       }            private Path getFirefoxLocation() {         FirefoxOptions options = new FirefoxOptions();         options.setBrowserVersion("stable");         DriverFinder finder = new DriverFinder(GeckoDriverService.createDefaultService(), options);         return Path.of(finder.getBrowserPath());       }            @Test       public void fullPageScreenshot() throws Exception {         driver = startFirefoxDriver();              driver.get("https://www.selenium.dev");              File screenshot = driver.getFullPageScreenshotAs(OutputType.FILE);              File targetFile = new File("full_page_screenshot.png");         Files.move(screenshot.toPath(), targetFile.toPath());              // Verify the screenshot file exists         Assertions.assertTrue(targetFile.exists(), "The full page screenshot file should exist");         Files.deleteIfExists(targetFile.toPath());              driver.quit();       }            @Test       public void setContext() {         driver = startFirefoxDriver(new FirefoxOptions().addArguments("-remote-allow-system-access"));              ((HasContext) driver).setContext(FirefoxCommandContext.CHROME);         driver.executeScript("console.log('Inside Chrome context');");              // Verify the context is back to "content"         Assertions.assertEquals(                 FirefoxCommandContext.CHROME, ((HasContext) driver).getContext(),                 "The context should be 'chrome'"         );              driver.quit();       }            @Test       public void firefoxProfile() {         FirefoxProfile profile = new FirefoxProfile();         FirefoxOptions options = new FirefoxOptions();         profile.setPreference("javascript.enabled", "False");         options.setProfile(profile);              driver = new FirefoxDriver(options);              driver.quit();       }     }                        options.binary_location = firefox_bin

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk//examples/python/tests/browsers/test_firefox.py#L28)

##### /examples/python/tests/browsers/test\_firefox.py

Copy  Close               import os     import subprocess     import sys          import pytest     from selenium import webdriver               def test_basic_options():         options = webdriver.FirefoxOptions()         driver = webdriver.Firefox(options=options)              driver.quit()               def test_arguments():         options = webdriver.FirefoxOptions()              options.add_argument("-headless")              driver = webdriver.Firefox(options=options)         driver.quit()               def test_set_browser_location(firefox_bin):         options = webdriver.FirefoxOptions()              options.binary_location = firefox_bin              driver = webdriver.Firefox(options=options)              driver.quit()               def test_log_to_file(log_path):         service = webdriver.FirefoxService(log_output=log_path, service_args=['--log', 'debug'])              driver = webdriver.Firefox(service=service)         driver.get("https://www.selenium.dev")              with open(log_path, 'r') as fp:             assert "geckodriver	INFO	Listening on" in fp.readline()              driver.quit()               def test_log_to_stdout(capfd):         service = webdriver.FirefoxService(log_output=subprocess.STDOUT)              driver = webdriver.Firefox(service=service)              out, err = capfd.readouterr()         assert "geckodriver	INFO	Listening on" in out              driver.quit()               def test_log_level(log_path):         service = webdriver.FirefoxService(log_output=log_path, service_args=['--log', 'debug'])              driver = webdriver.Firefox(service=service)              with open(log_path, 'r') as f:             assert '\tDEBUG' in f.read()              driver.quit()               def test_log_truncation(log_path):         service = webdriver.FirefoxService(service_args=['--log-no-truncate', '--log', 'debug'], log_output=log_path)              driver = webdriver.Firefox(service=service)              with open(log_path, 'r') as f:             assert ' ... ' not in f.read()              driver.quit()               def test_profile_location(temp_dir):         service = webdriver.FirefoxService(service_args=['--profile-root', temp_dir])              driver = webdriver.Firefox(service=service)         profile_name = driver.capabilities.get('moz:profile').replace('\\', '/').split('/')[-1]              assert profile_name in os.listdir(temp_dir)              driver.quit()               def test_install_addon(firefox_driver, addon_path_xpi):         driver = firefox_driver              driver.install_addon(addon_path_xpi)              driver.get("https://www.selenium.dev/selenium/web/blank.html")         injected = driver.find_element(webdriver.common.by.By.ID, "webextensions-selenium-example")              assert injected.text == "Content injected by webextensions-selenium-example"               def test_uninstall_addon(firefox_driver, addon_path_xpi):         driver = firefox_driver              id = driver.install_addon(addon_path_xpi)         driver.uninstall_addon(id)              driver.get("https://www.selenium.dev/selenium/web/blank.html")         assert len(driver.find_elements(webdriver.common.by.By.ID, "webextensions-selenium-example")) == 0               def test_install_unsigned_addon_directory(firefox_driver, addon_path_dir):         driver = firefox_driver              driver.install_addon(addon_path_dir, temporary=True)              driver.get("https://www.selenium.dev/selenium/web/blank.html")         injected = driver.find_element(webdriver.common.by.By.ID, "webextensions-selenium-example")              assert injected.text == "Content injected by webextensions-selenium-example"               def test_install_unsigned_addon_directory_slash(firefox_driver, addon_path_dir_slash):         driver = firefox_driver              driver.install_addon(addon_path_dir_slash, temporary=True)              driver.get("https://www.selenium.dev/selenium/web/blank.html")         injected = driver.find_element(webdriver.common.by.By.ID, "webextensions-selenium-example")              assert injected.text == "Content injected by webextensions-selenium-example"               def test_full_page_screenshot(firefox_driver):         driver = firefox_driver              driver.get("https://www.selenium.dev")              driver.save_full_page_screenshot("full_page_screenshot.png")              assert os.path.exists("full_page_screenshot.png")              driver.quit()               def test_set_context():         options = webdriver.FirefoxOptions()         options.add_argument("-remote-allow-system-access")         driver = webdriver.Firefox(options=options)              with driver.context(driver.CONTEXT_CHROME):             driver.execute_script("console.log('Inside Chrome context');")              # Check if the context is back to content         assert driver.execute("GET_CONTEXT")["value"] == "content"         driver.quit()               def test_firefox_profile():         from selenium.webdriver.firefox.options import Options         from selenium.webdriver.firefox.firefox_profile import FirefoxProfile              options = Options()         firefox_profile = FirefoxProfile()         firefox_profile.set_preference("javascript.enabled", False)         options.profile = firefox_profile              driver = webdriver.Firefox(options=options)              driver.quit()                                options.BinaryLocation = GetFirefoxLocation();

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk//examples/dotnet/SeleniumDocs/Browsers/FirefoxTest.cs#L53)

##### /examples/dotnet/SeleniumDocs/Browsers/FirefoxTest.cs

Copy  Close               using System;     using System.IO;     using System.Linq;     using Microsoft.VisualStudio.TestTools.UnitTesting;     using OpenQA.Selenium;     using OpenQA.Selenium.Firefox;          namespace SeleniumDocs.Browsers     {         [TestClass]         public class FirefoxTest         {             private FirefoxDriver driver;             private string _logLocation;             private string _tempPath;                  [TestCleanup]             public void Cleanup()             {                 if (_logLocation != null && File.Exists(_logLocation))                 {                     File.Delete(_logLocation);                 }                 if (_tempPath != null && File.Exists(_tempPath))                 {                     File.Delete(_tempPath);                 }                 driver.Quit();             }                  [TestMethod]             public void BasicOptions()             {                 var options = new FirefoxOptions();                 driver = new FirefoxDriver(options);             }                  [TestMethod]             public void Arguments()             {                 var options = new FirefoxOptions();                      options.AddArgument("-headless");                      driver = new FirefoxDriver(options);             }                  [TestMethod]             public void SetBinary()             {                 var options = new FirefoxOptions();                      options.BinaryLocation = GetFirefoxLocation();                      driver = new FirefoxDriver(options);             }                  [TestMethod]             [Ignore("Not implemented")]             public void LogsToFile()             {                 var service = FirefoxDriverService.CreateDefaultService();                 //service.LogFile = _logLocation                      driver = new FirefoxDriver(service);                 var lines = File.ReadLines(GetLogLocation());                 Assert.IsNotNull(lines.FirstOrDefault(line => line.Contains("geckodriver	INFO	Listening on")));             }                  [TestMethod]             [Ignore("Not implemented")]             public void LogsToConsole()             {                 var stringWriter = new StringWriter();                 var originalOutput = Console.Out;                 Console.SetOut(stringWriter);                      var service = FirefoxDriverService.CreateDefaultService();                 //service.LogToConsole = true;                      driver = new FirefoxDriver(service);                 Assert.IsTrue(stringWriter.ToString().Contains("geckodriver	INFO	Listening on"));                 Console.SetOut(originalOutput);                 stringWriter.Dispose();             }                  [TestMethod]             [Ignore("You can set it, just can't see it")]             public void LogsLevel()             {                 var service = FirefoxDriverService.CreateDefaultService();                 //service.LogFile = _logLocation                      service.LogLevel = FirefoxDriverLogLevel.Debug;                      driver = new FirefoxDriver(service);                 var lines = File.ReadLines(GetLogLocation());                 Assert.IsNotNull(lines.FirstOrDefault(line => line.Contains("Marionette\tDEBUG")));             }                  [TestMethod]             [Ignore("Not implemented")]             public void StopsTruncatingLogs()             {                 var service = FirefoxDriverService.CreateDefaultService();                 //service.TruncateLogs = false;                      service.LogLevel = FirefoxDriverLogLevel.Debug;                      driver = new FirefoxDriver(service);                 var lines = File.ReadLines(GetLogLocation());                 Assert.IsNull(lines.FirstOrDefault(line => line.Contains(" ... ")));             }                  [TestMethod]             [Ignore("Not implemented")]             public void SetProfileLocation()             {                 var service = FirefoxDriverService.CreateDefaultService();                 // service.ProfileRoot = GetTempDirectory();                      driver = new FirefoxDriver(service);                      string profile = (string)driver.Capabilities.GetCapability("moz:profile");                 string[] directories = profile.Split("/");                 var dirName = directories.Last();                 Assert.AreEqual(GetTempDirectory() + "/" + dirName, profile);             }                  [TestMethod]             public void InstallAddon()             {                 SetWaitingDriver();                 string baseDir = AppDomain.CurrentDomain.BaseDirectory;                 string extensionFilePath = Path.Combine(baseDir, "../../../Extensions/webextensions-selenium-example.xpi");                      driver.InstallAddOnFromFile(Path.GetFullPath(extensionFilePath));                      driver.Url = "https://www.selenium.dev/selenium/web/blank.html";                 IWebElement injected = driver.FindElement(By.Id("webextensions-selenium-example"));                 Assert.AreEqual("Content injected by webextensions-selenium-example", injected.Text);             }                  [TestMethod]             public void UnInstallAddon()             {                 driver = new FirefoxDriver();                 string baseDir = AppDomain.CurrentDomain.BaseDirectory;                 string extensionFilePath = Path.Combine(baseDir, "../../../Extensions/webextensions-selenium-example.xpi");                 string extensionId = driver.InstallAddOnFromFile(Path.GetFullPath(extensionFilePath));                      driver.UninstallAddOn(extensionId);                      driver.Url = "https://www.selenium.dev/selenium/web/blank.html";                 Assert.AreEqual(driver.FindElements(By.Id("webextensions-selenium-example")).Count, 0);             }                  [TestMethod]             public void InstallUnsignedAddon()             {                 SetWaitingDriver();                 string baseDir = AppDomain.CurrentDomain.BaseDirectory;                 string extensionDirPath = Path.Combine(baseDir, "../../../Extensions/webextensions-selenium-example/");                      driver.InstallAddOnFromDirectory(Path.GetFullPath(extensionDirPath), true);                      driver.Url = "https://www.selenium.dev/selenium/web/blank.html";                 IWebElement injected = driver.FindElement(By.Id("webextensions-selenium-example"));                 Assert.AreEqual("Content injected by webextensions-selenium-example", injected.Text);             }                          private string GetLogLocation()             {                 if (_logLocation != null && !File.Exists(_logLocation))                 {                     _logLocation = Path.GetTempFileName();                 }                      return _logLocation;             }                  private string GetTempDirectory()             {                 if (_tempPath != null && !File.Exists(_tempPath))                 {                     _tempPath = Path.GetTempPath();                 }                      return _tempPath;             }                  private void SetWaitingDriver()             {                 driver = new FirefoxDriver();                 driver.Manage().Timeouts().ImplicitWait = TimeSpan.FromSeconds(2);             }                  private static string GetFirefoxLocation()             {                 var options = new FirefoxOptions()                 {                     BrowserVersion = "stable"                 };                 return new DriverFinder(options).GetBrowserPath();             }         }     }                     options.binary = firefox_location

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk//examples/ruby/spec/browsers/firefox_spec.rb#L25)

##### /examples/ruby/spec/browsers/firefox\_spec.rb

Copy  Close               # frozen_string_literal: true          require 'spec_helper'          RSpec.describe 'Firefox' do       describe 'Options' do         let(:firefox_location) { driver_finder && ENV.fetch('FIREFOX_BIN', nil) }              it 'basic options' do           options = Selenium::WebDriver::Options.firefox           @driver = Selenium::WebDriver.for :firefox, options: options         end              it 'add arguments' do           options = Selenium::WebDriver::Options.firefox                options.args << '-headless'                @driver = Selenium::WebDriver.for :firefox, options: options         end              it 'sets location of binary' do           options = Selenium::WebDriver::Options.firefox                options.binary = firefox_location                @driver = Selenium::WebDriver.for :firefox, options: options         end       end            describe 'Service' do         let(:file_name) { Tempfile.new('geckodriver').path }         let(:root_directory) { Dir.mktmpdir }              after do           FileUtils.rm_f(file_name)           FileUtils.rm_rf(root_directory)         end              it 'logs to file' do           service = Selenium::WebDriver::Service.firefox                service.log = file_name                @driver = Selenium::WebDriver.for :firefox, service: service           expect(File.readlines(file_name).first).to include("geckodriver\tINFO\tListening on")         end              it 'logs to console' do           service = Selenium::WebDriver::Service.firefox                service.log = $stdout                expect {             @driver = Selenium::WebDriver.for :firefox, service: service           }.to output(/geckodriver	INFO	Listening on/).to_stdout_from_any_process         end              it 'sets log level' do           service = Selenium::WebDriver::Service.firefox           service.log = file_name                service.args += %w[--log debug]                @driver = Selenium::WebDriver.for :firefox, service: service           expect(File.readlines(file_name).grep(/Marionette	DEBUG/).any?).to eq true         end              it 'stops truncating log lines' do           service = Selenium::WebDriver::Service.firefox(log: file_name, args: %w[--log debug])                service.args << '--log-no-truncate'                @driver = Selenium::WebDriver.for :firefox, service: service           expect(File.readlines(file_name).grep(/ \.\.\. /).any?).to eq false         end              it 'sets default profile location' do           service = Selenium::WebDriver::Service.firefox                service.args += ['--profile-root', root_directory]                @driver = Selenium::WebDriver.for :firefox, service: service           profile_location = Dir.new(@driver.capabilities['moz:profile'])           expect(profile_location.path.gsub('\\', '/')).to include(root_directory)         end       end            describe 'Features' do         let(:driver) { start_firefox }              it 'installs addon' do           extension_file_path = File.expand_path('../spec_support/extensions/webextensions-selenium-example.xpi', __dir__)                driver.install_addon(extension_file_path)                driver.get 'https://www.selenium.dev/selenium/web/blank.html'           injected = driver.find_element(id: 'webextensions-selenium-example')           expect(injected.text).to eq 'Content injected by webextensions-selenium-example'         end              it 'uninstalls addon' do           extension_file_path = File.expand_path('../spec_support/extensions/webextensions-selenium-example.xpi', __dir__)           extension_id = driver.install_addon(extension_file_path)                driver.uninstall_addon(extension_id)                driver.get 'https://www.selenium.dev/selenium/web/blank.html'           expect(driver.find_elements(id: 'webextensions-selenium-example')).to be_empty         end              it 'installs unsigned addon' do           extension_dir_path = File.expand_path('../spec_support/extensions/webextensions-selenium-example/', __dir__)                driver.install_addon(extension_dir_path, true)                driver.navigate.to 'https://www.selenium.dev/selenium/web/blank.html'           injected = driver.find_element(id: 'webextensions-selenium-example')           expect(injected.text).to eq 'Content injected by webextensions-selenium-example'         end              it 'takes full page screenshot' do           driver.navigate.to 'https://www.selenium.dev/selenium/web/blank.html'           Dir.mktmpdir('screenshot_test') do |dir|             screenshot = driver.save_full_page_screenshot(File.join(dir, 'screenshot.png'))                  expect(screenshot).to be_a File           end         end              it 'sets the context' do           driver.context = 'content'           expect(driver.context).to eq 'content'         end       end            describe 'Profile' do         it 'creates a new profile' do           profile = Selenium::WebDriver::Firefox::Profile.new           profile['browser.download.dir'] = '/tmp/webdriver-downloads'           options = Selenium::WebDriver::Firefox::Options.new(profile: profile)           expect(options.profile).to eq(profile)         end       end            def driver_finder         options = Selenium::WebDriver::Options.firefox(browser_version: 'stable')         service = Selenium::WebDriver::Service.firefox         finder = Selenium::WebDriver::DriverFinder.new(options, service)         ENV['GECKODRIVER_BIN'] = finder.driver_path         ENV['FIREFOX_BIN'] = finder.browser_path       end     end     

[Add Example](https://www.selenium.dev/documentation/about/contributing/#creating-examples)

[Add Example](https://www.selenium.dev/documentation/about/contributing/#creating-examples)

### Profiles

There are several ways to work with Firefox profiles.

[Move Code](https://www.selenium.dev/documentation/about/contributing/#moving-examples)

  * Java   * Python   * CSharp   * Ruby   * JavaScript   * Kotlin

                  FirefoxProfile profile = new FirefoxProfile();         FirefoxOptions options = new FirefoxOptions();         profile.setPreference("javascript.enabled", "False");         options.setProfile(profile);              driver = new FirefoxDriver(options);

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk//examples/java/src/test/java/dev/selenium/browsers/FirefoxTest.java#L211-L216)

##### /examples/java/src/test/java/dev/selenium/browsers/FirefoxTest.java

Copy  Close               package dev.selenium.browsers;          import dev.selenium.BaseTest;     import java.io.File;     import java.io.IOException;     import java.io.PrintStream;     import java.nio.file.Files;     import java.nio.file.Path;     import java.nio.file.Paths;     import org.junit.jupiter.api.AfterEach;     import org.junit.jupiter.api.Assertions;     import org.junit.jupiter.api.Test;     import org.junit.jupiter.api.condition.DisabledOnOs;     import org.junit.jupiter.api.condition.OS;     import org.openqa.selenium.By;     import org.openqa.selenium.OutputType;     import org.openqa.selenium.WebElement;     import org.openqa.selenium.firefox.*;     import org.openqa.selenium.remote.service.DriverFinder;                              public class FirefoxTest extends BaseTest {       private FirefoxDriver driver;            @AfterEach       public void clearProperties() {         System.clearProperty(GeckoDriverService.GECKO_DRIVER_LOG_PROPERTY);         System.clearProperty(GeckoDriverService.GECKO_DRIVER_LOG_LEVEL_PROPERTY);driver.quit();       }            @Test       public void basicOptions() {         FirefoxOptions options = new FirefoxOptions();         driver = new FirefoxDriver(options);       }            @Test       public void arguments() {         FirefoxOptions options = new FirefoxOptions();              options.addArguments("-headless");              driver = new FirefoxDriver(options);       }            @Test       @DisabledOnOs(OS.WINDOWS)       public void setBrowserLocation() {         FirefoxOptions options = new FirefoxOptions();              options.setBinary(getFirefoxLocation());              driver = new FirefoxDriver(options);       }            @Test       public void logsToFile() throws IOException {         File logLocation = getTempFile("logsToFile", ".log");         FirefoxDriverService service =             new GeckoDriverService.Builder().withLogFile(logLocation).build();              driver = new FirefoxDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         Assertions.assertTrue(fileContent.contains("geckodriver	INFO	Listening on"));       }            @Test       public void logsToConsole() throws IOException {         File logLocation = getTempFile("logsToConsole", ".log");         System.setOut(new PrintStream(logLocation));              FirefoxDriverService service =             new GeckoDriverService.Builder().withLogOutput(System.out).build();              driver = new FirefoxDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         Assertions.assertTrue(fileContent.contains("geckodriver	INFO	Listening on"));       }            @Test       public void logsWithLevel() throws IOException {         File logLocation = getTempFile("logsWithLevel", ".log");         System.setProperty(GeckoDriverService.GECKO_DRIVER_LOG_PROPERTY, logLocation.getAbsolutePath());              FirefoxDriverService service =             new GeckoDriverService.Builder().withLogLevel(FirefoxDriverLogLevel.DEBUG).build();              driver = new FirefoxDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         Assertions.assertTrue(fileContent.contains("Marionette\tDEBUG"));       }            @Test       public void stopsTruncatingLogs() throws IOException {         File logLocation = getTempFile("geckodriver-", "log");         System.setProperty(GeckoDriverService.GECKO_DRIVER_LOG_PROPERTY, logLocation.getAbsolutePath());         System.setProperty(             GeckoDriverService.GECKO_DRIVER_LOG_LEVEL_PROPERTY, FirefoxDriverLogLevel.DEBUG.toString());              FirefoxDriverService service =             new GeckoDriverService.Builder().withTruncatedLogs(false).build();              driver = new FirefoxDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         Assertions.assertFalse(fileContent.contains(" ... "));       }            @Test       public void setProfileLocation() {         File profileDirectory = getTempDirectory("profile-");         FirefoxDriverService service =             new GeckoDriverService.Builder().withProfileRoot(profileDirectory).build();              driver = new FirefoxDriver(service);              String location = (String) driver.getCapabilities().getCapability("moz:profile");         Assertions.assertTrue(location.contains(profileDirectory.getAbsolutePath()));       }                 @Test       public void installAddon() {         driver = startFirefoxDriver();         Path xpiPath = Paths.get("src/test/resources/extensions/selenium-example.xpi");              driver.installExtension(xpiPath);              driver.get("https://www.selenium.dev/selenium/web/blank.html");         WebElement injected = driver.findElement(By.id("webextensions-selenium-example"));         Assertions.assertEquals(             "Content injected by webextensions-selenium-example", injected.getText());       }                 @Test       public void uninstallAddon() {         driver = startFirefoxDriver();         Path xpiPath = Paths.get("src/test/resources/extensions/selenium-example.xpi");         String id = driver.installExtension(xpiPath);              driver.uninstallExtension(id);              driver.get("https://www.selenium.dev/selenium/web/blank.html");         Assertions.assertEquals(driver.findElements(By.id("webextensions-selenium-example")).size(), 0);       }                 @Test       public void installUnsignedAddonPath() {         driver = startFirefoxDriver();         Path path = Paths.get("src/test/resources/extensions/selenium-example");              driver.installExtension(path, true);              driver.get("https://www.selenium.dev/selenium/web/blank.html");         WebElement injected = getLocatedElement(driver, By.id("webextensions-selenium-example"));         Assertions.assertEquals(             "Content injected by webextensions-selenium-example", injected.getText());       }            private Path getFirefoxLocation() {         FirefoxOptions options = new FirefoxOptions();         options.setBrowserVersion("stable");         DriverFinder finder = new DriverFinder(GeckoDriverService.createDefaultService(), options);         return Path.of(finder.getBrowserPath());       }            @Test       public void fullPageScreenshot() throws Exception {         driver = startFirefoxDriver();              driver.get("https://www.selenium.dev");              File screenshot = driver.getFullPageScreenshotAs(OutputType.FILE);              File targetFile = new File("full_page_screenshot.png");         Files.move(screenshot.toPath(), targetFile.toPath());              // Verify the screenshot file exists         Assertions.assertTrue(targetFile.exists(), "The full page screenshot file should exist");         Files.deleteIfExists(targetFile.toPath());              driver.quit();       }            @Test       public void setContext() {         driver = startFirefoxDriver(new FirefoxOptions().addArguments("-remote-allow-system-access"));              ((HasContext) driver).setContext(FirefoxCommandContext.CHROME);         driver.executeScript("console.log('Inside Chrome context');");              // Verify the context is back to "content"         Assertions.assertEquals(                 FirefoxCommandContext.CHROME, ((HasContext) driver).getContext(),                 "The context should be 'chrome'"         );              driver.quit();       }            @Test       public void firefoxProfile() {         FirefoxProfile profile = new FirefoxProfile();         FirefoxOptions options = new FirefoxOptions();         profile.setPreference("javascript.enabled", "False");         options.setProfile(profile);              driver = new FirefoxDriver(options);              driver.quit();       }     }                        from selenium.webdriver.firefox.options import Options         from selenium.webdriver.firefox.firefox_profile import FirefoxProfile              options = Options()         firefox_profile = FirefoxProfile()         firefox_profile.set_preference("javascript.enabled", False)         options.profile = firefox_profile              driver = webdriver.Firefox(options=options)

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk//examples/python/tests/browsers/test_firefox.py#L160-L168)

##### /examples/python/tests/browsers/test\_firefox.py

Copy  Close               import os     import subprocess     import sys          import pytest     from selenium import webdriver               def test_basic_options():         options = webdriver.FirefoxOptions()         driver = webdriver.Firefox(options=options)              driver.quit()               def test_arguments():         options = webdriver.FirefoxOptions()              options.add_argument("-headless")              driver = webdriver.Firefox(options=options)         driver.quit()               def test_set_browser_location(firefox_bin):         options = webdriver.FirefoxOptions()              options.binary_location = firefox_bin              driver = webdriver.Firefox(options=options)              driver.quit()               def test_log_to_file(log_path):         service = webdriver.FirefoxService(log_output=log_path, service_args=['--log', 'debug'])              driver = webdriver.Firefox(service=service)         driver.get("https://www.selenium.dev")              with open(log_path, 'r') as fp:             assert "geckodriver	INFO	Listening on" in fp.readline()              driver.quit()               def test_log_to_stdout(capfd):         service = webdriver.FirefoxService(log_output=subprocess.STDOUT)              driver = webdriver.Firefox(service=service)              out, err = capfd.readouterr()         assert "geckodriver	INFO	Listening on" in out              driver.quit()               def test_log_level(log_path):         service = webdriver.FirefoxService(log_output=log_path, service_args=['--log', 'debug'])              driver = webdriver.Firefox(service=service)              with open(log_path, 'r') as f:             assert '\tDEBUG' in f.read()              driver.quit()               def test_log_truncation(log_path):         service = webdriver.FirefoxService(service_args=['--log-no-truncate', '--log', 'debug'], log_output=log_path)              driver = webdriver.Firefox(service=service)              with open(log_path, 'r') as f:             assert ' ... ' not in f.read()              driver.quit()               def test_profile_location(temp_dir):         service = webdriver.FirefoxService(service_args=['--profile-root', temp_dir])              driver = webdriver.Firefox(service=service)         profile_name = driver.capabilities.get('moz:profile').replace('\\', '/').split('/')[-1]              assert profile_name in os.listdir(temp_dir)              driver.quit()               def test_install_addon(firefox_driver, addon_path_xpi):         driver = firefox_driver              driver.install_addon(addon_path_xpi)              driver.get("https://www.selenium.dev/selenium/web/blank.html")         injected = driver.find_element(webdriver.common.by.By.ID, "webextensions-selenium-example")              assert injected.text == "Content injected by webextensions-selenium-example"               def test_uninstall_addon(firefox_driver, addon_path_xpi):         driver = firefox_driver              id = driver.install_addon(addon_path_xpi)         driver.uninstall_addon(id)              driver.get("https://www.selenium.dev/selenium/web/blank.html")         assert len(driver.find_elements(webdriver.common.by.By.ID, "webextensions-selenium-example")) == 0               def test_install_unsigned_addon_directory(firefox_driver, addon_path_dir):         driver = firefox_driver              driver.install_addon(addon_path_dir, temporary=True)              driver.get("https://www.selenium.dev/selenium/web/blank.html")         injected = driver.find_element(webdriver.common.by.By.ID, "webextensions-selenium-example")              assert injected.text == "Content injected by webextensions-selenium-example"               def test_install_unsigned_addon_directory_slash(firefox_driver, addon_path_dir_slash):         driver = firefox_driver              driver.install_addon(addon_path_dir_slash, temporary=True)              driver.get("https://www.selenium.dev/selenium/web/blank.html")         injected = driver.find_element(webdriver.common.by.By.ID, "webextensions-selenium-example")              assert injected.text == "Content injected by webextensions-selenium-example"               def test_full_page_screenshot(firefox_driver):         driver = firefox_driver              driver.get("https://www.selenium.dev")              driver.save_full_page_screenshot("full_page_screenshot.png")              assert os.path.exists("full_page_screenshot.png")              driver.quit()               def test_set_context():         options = webdriver.FirefoxOptions()         options.add_argument("-remote-allow-system-access")         driver = webdriver.Firefox(options=options)              with driver.context(driver.CONTEXT_CHROME):             driver.execute_script("console.log('Inside Chrome context');")              # Check if the context is back to content         assert driver.execute("GET_CONTEXT")["value"] == "content"         driver.quit()               def test_firefox_profile():         from selenium.webdriver.firefox.options import Options         from selenium.webdriver.firefox.firefox_profile import FirefoxProfile              options = Options()         firefox_profile = FirefoxProfile()         firefox_profile.set_preference("javascript.enabled", False)         options.profile = firefox_profile              driver = webdriver.Firefox(options=options)              driver.quit()                    var options = new FirefoxOptions();     var profile = new FirefoxProfile();     options.Profile = profile;     var driver = new FirefoxDriver(options);                            profile = Selenium::WebDriver::Firefox::Profile.new             profile['browser.download.dir'] = '/tmp/webdriver-downloads'             options = Selenium::WebDriver::Firefox::Options.new(profile: profile)

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk//examples/ruby/spec/browsers/firefox_spec.rb#L139-L141)

##### /examples/ruby/spec/browsers/firefox\_spec.rb

Copy  Close               # frozen_string_literal: true              require 'spec_helper'              RSpec.describe 'Firefox' do         describe 'Options' do           let(:firefox_location) { driver_finder && ENV.fetch('FIREFOX_BIN', nil) }                  it 'basic options' do             options = Selenium::WebDriver::Options.firefox             @driver = Selenium::WebDriver.for :firefox, options: options           end                  it 'add arguments' do             options = Selenium::WebDriver::Options.firefox                    options.args << '-headless'                    @driver = Selenium::WebDriver.for :firefox, options: options           end                  it 'sets location of binary' do             options = Selenium::WebDriver::Options.firefox                    options.binary = firefox_location                    @driver = Selenium::WebDriver.for :firefox, options: options           end         end                describe 'Service' do           let(:file_name) { Tempfile.new('geckodriver').path }           let(:root_directory) { Dir.mktmpdir }                  after do             FileUtils.rm_f(file_name)             FileUtils.rm_rf(root_directory)           end                  it 'logs to file' do             service = Selenium::WebDriver::Service.firefox                    service.log = file_name                    @driver = Selenium::WebDriver.for :firefox, service: service             expect(File.readlines(file_name).first).to include("geckodriver\tINFO\tListening on")           end                  it 'logs to console' do             service = Selenium::WebDriver::Service.firefox                    service.log = $stdout                    expect {               @driver = Selenium::WebDriver.for :firefox, service: service             }.to output(/geckodriver	INFO	Listening on/).to_stdout_from_any_process           end                  it 'sets log level' do             service = Selenium::WebDriver::Service.firefox             service.log = file_name                    service.args += %w[--log debug]                    @driver = Selenium::WebDriver.for :firefox, service: service             expect(File.readlines(file_name).grep(/Marionette	DEBUG/).any?).to eq true           end                  it 'stops truncating log lines' do             service = Selenium::WebDriver::Service.firefox(log: file_name, args: %w[--log debug])                    service.args << '--log-no-truncate'                    @driver = Selenium::WebDriver.for :firefox, service: service             expect(File.readlines(file_name).grep(/ \.\.\. /).any?).to eq false           end                  it 'sets default profile location' do             service = Selenium::WebDriver::Service.firefox                    service.args += ['--profile-root', root_directory]                    @driver = Selenium::WebDriver.for :firefox, service: service             profile_location = Dir.new(@driver.capabilities['moz:profile'])             expect(profile_location.path.gsub('\\', '/')).to include(root_directory)           end         end                describe 'Features' do           let(:driver) { start_firefox }                  it 'installs addon' do             extension_file_path = File.expand_path('../spec_support/extensions/webextensions-selenium-example.xpi', __dir__)                    driver.install_addon(extension_file_path)                    driver.get 'https://www.selenium.dev/selenium/web/blank.html'             injected = driver.find_element(id: 'webextensions-selenium-example')             expect(injected.text).to eq 'Content injected by webextensions-selenium-example'           end                  it 'uninstalls addon' do             extension_file_path = File.expand_path('../spec_support/extensions/webextensions-selenium-example.xpi', __dir__)             extension_id = driver.install_addon(extension_file_path)                    driver.uninstall_addon(extension_id)                    driver.get 'https://www.selenium.dev/selenium/web/blank.html'             expect(driver.find_elements(id: 'webextensions-selenium-example')).to be_empty           end                  it 'installs unsigned addon' do             extension_dir_path = File.expand_path('../spec_support/extensions/webextensions-selenium-example/', __dir__)                    driver.install_addon(extension_dir_path, true)                    driver.navigate.to 'https://www.selenium.dev/selenium/web/blank.html'             injected = driver.find_element(id: 'webextensions-selenium-example')             expect(injected.text).to eq 'Content injected by webextensions-selenium-example'           end                  it 'takes full page screenshot' do             driver.navigate.to 'https://www.selenium.dev/selenium/web/blank.html'             Dir.mktmpdir('screenshot_test') do |dir|               screenshot = driver.save_full_page_screenshot(File.join(dir, 'screenshot.png'))                      expect(screenshot).to be_a File             end           end                  it 'sets the context' do             driver.context = 'content'             expect(driver.context).to eq 'content'           end         end                describe 'Profile' do           it 'creates a new profile' do             profile = Selenium::WebDriver::Firefox::Profile.new             profile['browser.download.dir'] = '/tmp/webdriver-downloads'             options = Selenium::WebDriver::Firefox::Options.new(profile: profile)             expect(options.profile).to eq(profile)           end         end                def driver_finder           options = Selenium::WebDriver::Options.firefox(browser_version: 'stable')           service = Selenium::WebDriver::Service.firefox           finder = Selenium::WebDriver::DriverFinder.new(options, service)           ENV['GECKODRIVER_BIN'] = finder.driver_path           ENV['FIREFOX_BIN'] = finder.browser_path         end       end                      const { Builder } = require("selenium-webdriver");     const firefox = require('selenium-webdriver/firefox');          const options = new firefox.Options();     let profile = '/path to custom profile';     options.setProfile(profile);     const driver = new Builder()         .forBrowser('firefox')         .setFirefoxOptions(options)         .build();                           val options = FirefoxOptions()     options.profile = FirefoxProfile()     driver = FirefoxDriver(options)       

**Note** : Whether you create an empty `FirefoxProfile` or point it to the directory of your own profile, Selenium will create a temporary directory to store either the data of the new profile or a copy of your existing one. Every time you run your program, a different temporary directory will be created. These directories are not cleaned up explicitly by Selenium, they should eventually get removed by the operating system. However, if you want to remove the copy manually \(e.g. if your profile is large in size\), the path of the copy is exposed by the `FirefoxProfile` object. Check the language specific implementation to see how to retrieve that location.

If you want to use an existing Firefox profile, you can pass in the path to that profile. Please refer to the official [Firefox documentation](https://support.mozilla.org/en-US/kb/profiles-where-firefox-stores-user-data#w_how-do-i-find-my-profile) for instructions on how to find the directory of your profile.

## Service

Service settings common to all browsers are described on the [Service page](https://www.selenium.dev/documentation/webdriver/drivers/service/).

### Log output

Getting driver logs can be helpful for debugging various issues. The Service class lets you direct where the logs will go. Logging output is ignored unless the user directs it somewhere.

#### File output

To change the logging output to save to a specific file:

  * Java   * Python   * CSharp   * Ruby   * JavaScript   * Kotlin

                  FirefoxDriverService service =             new GeckoDriverService.Builder().withLogFile(logLocation).build();

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/java/src/test/java/dev/selenium/browsers/FirefoxTest.java#L62-L63)

##### examples/java/src/test/java/dev/selenium/browsers/FirefoxTest.java

Copy  Close               package dev.selenium.browsers;          import dev.selenium.BaseTest;     import java.io.File;     import java.io.IOException;     import java.io.PrintStream;     import java.nio.file.Files;     import java.nio.file.Path;     import java.nio.file.Paths;     import org.junit.jupiter.api.AfterEach;     import org.junit.jupiter.api.Assertions;     import org.junit.jupiter.api.Test;     import org.junit.jupiter.api.condition.DisabledOnOs;     import org.junit.jupiter.api.condition.OS;     import org.openqa.selenium.By;     import org.openqa.selenium.OutputType;     import org.openqa.selenium.WebElement;     import org.openqa.selenium.firefox.*;     import org.openqa.selenium.remote.service.DriverFinder;                              public class FirefoxTest extends BaseTest {       private FirefoxDriver driver;            @AfterEach       public void clearProperties() {         System.clearProperty(GeckoDriverService.GECKO_DRIVER_LOG_PROPERTY);         System.clearProperty(GeckoDriverService.GECKO_DRIVER_LOG_LEVEL_PROPERTY);driver.quit();       }            @Test       public void basicOptions() {         FirefoxOptions options = new FirefoxOptions();         driver = new FirefoxDriver(options);       }            @Test       public void arguments() {         FirefoxOptions options = new FirefoxOptions();              options.addArguments("-headless");              driver = new FirefoxDriver(options);       }            @Test       @DisabledOnOs(OS.WINDOWS)       public void setBrowserLocation() {         FirefoxOptions options = new FirefoxOptions();              options.setBinary(getFirefoxLocation());              driver = new FirefoxDriver(options);       }            @Test       public void logsToFile() throws IOException {         File logLocation = getTempFile("logsToFile", ".log");         FirefoxDriverService service =             new GeckoDriverService.Builder().withLogFile(logLocation).build();              driver = new FirefoxDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         Assertions.assertTrue(fileContent.contains("geckodriver	INFO	Listening on"));       }            @Test       public void logsToConsole() throws IOException {         File logLocation = getTempFile("logsToConsole", ".log");         System.setOut(new PrintStream(logLocation));              FirefoxDriverService service =             new GeckoDriverService.Builder().withLogOutput(System.out).build();              driver = new FirefoxDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         Assertions.assertTrue(fileContent.contains("geckodriver	INFO	Listening on"));       }            @Test       public void logsWithLevel() throws IOException {         File logLocation = getTempFile("logsWithLevel", ".log");         System.setProperty(GeckoDriverService.GECKO_DRIVER_LOG_PROPERTY, logLocation.getAbsolutePath());              FirefoxDriverService service =             new GeckoDriverService.Builder().withLogLevel(FirefoxDriverLogLevel.DEBUG).build();              driver = new FirefoxDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         Assertions.assertTrue(fileContent.contains("Marionette\tDEBUG"));       }            @Test       public void stopsTruncatingLogs() throws IOException {         File logLocation = getTempFile("geckodriver-", "log");         System.setProperty(GeckoDriverService.GECKO_DRIVER_LOG_PROPERTY, logLocation.getAbsolutePath());         System.setProperty(             GeckoDriverService.GECKO_DRIVER_LOG_LEVEL_PROPERTY, FirefoxDriverLogLevel.DEBUG.toString());              FirefoxDriverService service =             new GeckoDriverService.Builder().withTruncatedLogs(false).build();              driver = new FirefoxDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         Assertions.assertFalse(fileContent.contains(" ... "));       }            @Test       public void setProfileLocation() {         File profileDirectory = getTempDirectory("profile-");         FirefoxDriverService service =             new GeckoDriverService.Builder().withProfileRoot(profileDirectory).build();              driver = new FirefoxDriver(service);              String location = (String) driver.getCapabilities().getCapability("moz:profile");         Assertions.assertTrue(location.contains(profileDirectory.getAbsolutePath()));       }                 @Test       public void installAddon() {         driver = startFirefoxDriver();         Path xpiPath = Paths.get("src/test/resources/extensions/selenium-example.xpi");              driver.installExtension(xpiPath);              driver.get("https://www.selenium.dev/selenium/web/blank.html");         WebElement injected = driver.findElement(By.id("webextensions-selenium-example"));         Assertions.assertEquals(             "Content injected by webextensions-selenium-example", injected.getText());       }                 @Test       public void uninstallAddon() {         driver = startFirefoxDriver();         Path xpiPath = Paths.get("src/test/resources/extensions/selenium-example.xpi");         String id = driver.installExtension(xpiPath);              driver.uninstallExtension(id);              driver.get("https://www.selenium.dev/selenium/web/blank.html");         Assertions.assertEquals(driver.findElements(By.id("webextensions-selenium-example")).size(), 0);       }                 @Test       public void installUnsignedAddonPath() {         driver = startFirefoxDriver();         Path path = Paths.get("src/test/resources/extensions/selenium-example");              driver.installExtension(path, true);              driver.get("https://www.selenium.dev/selenium/web/blank.html");         WebElement injected = getLocatedElement(driver, By.id("webextensions-selenium-example"));         Assertions.assertEquals(             "Content injected by webextensions-selenium-example", injected.getText());       }            private Path getFirefoxLocation() {         FirefoxOptions options = new FirefoxOptions();         options.setBrowserVersion("stable");         DriverFinder finder = new DriverFinder(GeckoDriverService.createDefaultService(), options);         return Path.of(finder.getBrowserPath());       }            @Test       public void fullPageScreenshot() throws Exception {         driver = startFirefoxDriver();              driver.get("https://www.selenium.dev");              File screenshot = driver.getFullPageScreenshotAs(OutputType.FILE);              File targetFile = new File("full_page_screenshot.png");         Files.move(screenshot.toPath(), targetFile.toPath());              // Verify the screenshot file exists         Assertions.assertTrue(targetFile.exists(), "The full page screenshot file should exist");         Files.deleteIfExists(targetFile.toPath());              driver.quit();       }            @Test       public void setContext() {         driver = startFirefoxDriver(new FirefoxOptions().addArguments("-remote-allow-system-access"));              ((HasContext) driver).setContext(FirefoxCommandContext.CHROME);         driver.executeScript("console.log('Inside Chrome context');");              // Verify the context is back to "content"         Assertions.assertEquals(                 FirefoxCommandContext.CHROME, ((HasContext) driver).getContext(),                 "The context should be 'chrome'"         );              driver.quit();       }            @Test       public void firefoxProfile() {         FirefoxProfile profile = new FirefoxProfile();         FirefoxOptions options = new FirefoxOptions();         profile.setPreference("javascript.enabled", "False");         options.setProfile(profile);              driver = new FirefoxDriver(options);              driver.quit();       }     }     

**Note** : Java also allows setting file output by System Property:   Property key: `GeckoDriverService.GECKO_DRIVER_LOG_PROPERTY`   Property value: String representing path to log file

[Selenium v4.11](https://github.com/SeleniumHQ/selenium/releases/tag/selenium-4.11.0)                   service = webdriver.FirefoxService(log_output=log_path, service_args=['--log', 'debug'])

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk//examples/python/tests/browsers/test_firefox.py#L36)

##### /examples/python/tests/browsers/test\_firefox.py

Copy  Close               import os     import subprocess     import sys          import pytest     from selenium import webdriver               def test_basic_options():         options = webdriver.FirefoxOptions()         driver = webdriver.Firefox(options=options)              driver.quit()               def test_arguments():         options = webdriver.FirefoxOptions()              options.add_argument("-headless")              driver = webdriver.Firefox(options=options)         driver.quit()               def test_set_browser_location(firefox_bin):         options = webdriver.FirefoxOptions()              options.binary_location = firefox_bin              driver = webdriver.Firefox(options=options)              driver.quit()               def test_log_to_file(log_path):         service = webdriver.FirefoxService(log_output=log_path, service_args=['--log', 'debug'])              driver = webdriver.Firefox(service=service)         driver.get("https://www.selenium.dev")              with open(log_path, 'r') as fp:             assert "geckodriver	INFO	Listening on" in fp.readline()              driver.quit()               def test_log_to_stdout(capfd):         service = webdriver.FirefoxService(log_output=subprocess.STDOUT)              driver = webdriver.Firefox(service=service)              out, err = capfd.readouterr()         assert "geckodriver	INFO	Listening on" in out              driver.quit()               def test_log_level(log_path):         service = webdriver.FirefoxService(log_output=log_path, service_args=['--log', 'debug'])              driver = webdriver.Firefox(service=service)              with open(log_path, 'r') as f:             assert '\tDEBUG' in f.read()              driver.quit()               def test_log_truncation(log_path):         service = webdriver.FirefoxService(service_args=['--log-no-truncate', '--log', 'debug'], log_output=log_path)              driver = webdriver.Firefox(service=service)              with open(log_path, 'r') as f:             assert ' ... ' not in f.read()              driver.quit()               def test_profile_location(temp_dir):         service = webdriver.FirefoxService(service_args=['--profile-root', temp_dir])              driver = webdriver.Firefox(service=service)         profile_name = driver.capabilities.get('moz:profile').replace('\\', '/').split('/')[-1]              assert profile_name in os.listdir(temp_dir)              driver.quit()               def test_install_addon(firefox_driver, addon_path_xpi):         driver = firefox_driver              driver.install_addon(addon_path_xpi)              driver.get("https://www.selenium.dev/selenium/web/blank.html")         injected = driver.find_element(webdriver.common.by.By.ID, "webextensions-selenium-example")              assert injected.text == "Content injected by webextensions-selenium-example"               def test_uninstall_addon(firefox_driver, addon_path_xpi):         driver = firefox_driver              id = driver.install_addon(addon_path_xpi)         driver.uninstall_addon(id)              driver.get("https://www.selenium.dev/selenium/web/blank.html")         assert len(driver.find_elements(webdriver.common.by.By.ID, "webextensions-selenium-example")) == 0               def test_install_unsigned_addon_directory(firefox_driver, addon_path_dir):         driver = firefox_driver              driver.install_addon(addon_path_dir, temporary=True)              driver.get("https://www.selenium.dev/selenium/web/blank.html")         injected = driver.find_element(webdriver.common.by.By.ID, "webextensions-selenium-example")              assert injected.text == "Content injected by webextensions-selenium-example"               def test_install_unsigned_addon_directory_slash(firefox_driver, addon_path_dir_slash):         driver = firefox_driver              driver.install_addon(addon_path_dir_slash, temporary=True)              driver.get("https://www.selenium.dev/selenium/web/blank.html")         injected = driver.find_element(webdriver.common.by.By.ID, "webextensions-selenium-example")              assert injected.text == "Content injected by webextensions-selenium-example"               def test_full_page_screenshot(firefox_driver):         driver = firefox_driver              driver.get("https://www.selenium.dev")              driver.save_full_page_screenshot("full_page_screenshot.png")              assert os.path.exists("full_page_screenshot.png")              driver.quit()               def test_set_context():         options = webdriver.FirefoxOptions()         options.add_argument("-remote-allow-system-access")         driver = webdriver.Firefox(options=options)              with driver.context(driver.CONTEXT_CHROME):             driver.execute_script("console.log('Inside Chrome context');")              # Check if the context is back to content         assert driver.execute("GET_CONTEXT")["value"] == "content"         driver.quit()               def test_firefox_profile():         from selenium.webdriver.firefox.options import Options         from selenium.webdriver.firefox.firefox_profile import FirefoxProfile              options = Options()         firefox_profile = FirefoxProfile()         firefox_profile.set_preference("javascript.enabled", False)         options.profile = firefox_profile              driver = webdriver.Firefox(options=options)              driver.quit()     

[Implementation Missing](https://github.com/SeleniumHQ/selenium)

[Selenium v4.10](https://github.com/SeleniumHQ/selenium/releases/tag/selenium-4.10.0)                     service.log = file_name

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/ruby/spec/browsers/firefox_spec.rb#L43)

##### examples/ruby/spec/browsers/firefox\_spec.rb

Copy  Close               # frozen_string_literal: true          require 'spec_helper'          RSpec.describe 'Firefox' do       describe 'Options' do         let(:firefox_location) { driver_finder && ENV.fetch('FIREFOX_BIN', nil) }              it 'basic options' do           options = Selenium::WebDriver::Options.firefox           @driver = Selenium::WebDriver.for :firefox, options: options         end              it 'add arguments' do           options = Selenium::WebDriver::Options.firefox                options.args << '-headless'                @driver = Selenium::WebDriver.for :firefox, options: options         end              it 'sets location of binary' do           options = Selenium::WebDriver::Options.firefox                options.binary = firefox_location                @driver = Selenium::WebDriver.for :firefox, options: options         end       end            describe 'Service' do         let(:file_name) { Tempfile.new('geckodriver').path }         let(:root_directory) { Dir.mktmpdir }              after do           FileUtils.rm_f(file_name)           FileUtils.rm_rf(root_directory)         end              it 'logs to file' do           service = Selenium::WebDriver::Service.firefox                service.log = file_name                @driver = Selenium::WebDriver.for :firefox, service: service           expect(File.readlines(file_name).first).to include("geckodriver\tINFO\tListening on")         end              it 'logs to console' do           service = Selenium::WebDriver::Service.firefox                service.log = $stdout                expect {             @driver = Selenium::WebDriver.for :firefox, service: service           }.to output(/geckodriver	INFO	Listening on/).to_stdout_from_any_process         end              it 'sets log level' do           service = Selenium::WebDriver::Service.firefox           service.log = file_name                service.args += %w[--log debug]                @driver = Selenium::WebDriver.for :firefox, service: service           expect(File.readlines(file_name).grep(/Marionette	DEBUG/).any?).to eq true         end              it 'stops truncating log lines' do           service = Selenium::WebDriver::Service.firefox(log: file_name, args: %w[--log debug])                service.args << '--log-no-truncate'                @driver = Selenium::WebDriver.for :firefox, service: service           expect(File.readlines(file_name).grep(/ \.\.\. /).any?).to eq false         end              it 'sets default profile location' do           service = Selenium::WebDriver::Service.firefox                service.args += ['--profile-root', root_directory]                @driver = Selenium::WebDriver.for :firefox, service: service           profile_location = Dir.new(@driver.capabilities['moz:profile'])           expect(profile_location.path.gsub('\\', '/')).to include(root_directory)         end       end            describe 'Features' do         let(:driver) { start_firefox }              it 'installs addon' do           extension_file_path = File.expand_path('../spec_support/extensions/webextensions-selenium-example.xpi', __dir__)                driver.install_addon(extension_file_path)                driver.get 'https://www.selenium.dev/selenium/web/blank.html'           injected = driver.find_element(id: 'webextensions-selenium-example')           expect(injected.text).to eq 'Content injected by webextensions-selenium-example'         end              it 'uninstalls addon' do           extension_file_path = File.expand_path('../spec_support/extensions/webextensions-selenium-example.xpi', __dir__)           extension_id = driver.install_addon(extension_file_path)                driver.uninstall_addon(extension_id)                driver.get 'https://www.selenium.dev/selenium/web/blank.html'           expect(driver.find_elements(id: 'webextensions-selenium-example')).to be_empty         end              it 'installs unsigned addon' do           extension_dir_path = File.expand_path('../spec_support/extensions/webextensions-selenium-example/', __dir__)                driver.install_addon(extension_dir_path, true)                driver.navigate.to 'https://www.selenium.dev/selenium/web/blank.html'           injected = driver.find_element(id: 'webextensions-selenium-example')           expect(injected.text).to eq 'Content injected by webextensions-selenium-example'         end              it 'takes full page screenshot' do           driver.navigate.to 'https://www.selenium.dev/selenium/web/blank.html'           Dir.mktmpdir('screenshot_test') do |dir|             screenshot = driver.save_full_page_screenshot(File.join(dir, 'screenshot.png'))                  expect(screenshot).to be_a File           end         end              it 'sets the context' do           driver.context = 'content'           expect(driver.context).to eq 'content'         end       end            describe 'Profile' do         it 'creates a new profile' do           profile = Selenium::WebDriver::Firefox::Profile.new           profile['browser.download.dir'] = '/tmp/webdriver-downloads'           options = Selenium::WebDriver::Firefox::Options.new(profile: profile)           expect(options.profile).to eq(profile)         end       end            def driver_finder         options = Selenium::WebDriver::Options.firefox(browser_version: 'stable')         service = Selenium::WebDriver::Service.firefox         finder = Selenium::WebDriver::DriverFinder.new(options, service)         ENV['GECKODRIVER_BIN'] = finder.driver_path         ENV['FIREFOX_BIN'] = finder.browser_path       end     end     

[Add Example](https://www.selenium.dev/documentation/about/contributing/#creating-examples)

[Add Example](https://www.selenium.dev/documentation/about/contributing/#creating-examples)

#### Console output

To change the logging output to display in the console:

  * Java   * Python   * CSharp   * Ruby   * JavaScript   * Kotlin

[Selenium v4.10](https://github.com/SeleniumHQ/selenium/releases/tag/selenium-4.10.0)                   FirefoxDriverService service =             new GeckoDriverService.Builder().withLogOutput(System.out).build();

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/java/src/test/java/dev/selenium/browsers/FirefoxTest.java#L76-L77)

##### examples/java/src/test/java/dev/selenium/browsers/FirefoxTest.java

Copy  Close               package dev.selenium.browsers;          import dev.selenium.BaseTest;     import java.io.File;     import java.io.IOException;     import java.io.PrintStream;     import java.nio.file.Files;     import java.nio.file.Path;     import java.nio.file.Paths;     import org.junit.jupiter.api.AfterEach;     import org.junit.jupiter.api.Assertions;     import org.junit.jupiter.api.Test;     import org.junit.jupiter.api.condition.DisabledOnOs;     import org.junit.jupiter.api.condition.OS;     import org.openqa.selenium.By;     import org.openqa.selenium.OutputType;     import org.openqa.selenium.WebElement;     import org.openqa.selenium.firefox.*;     import org.openqa.selenium.remote.service.DriverFinder;                              public class FirefoxTest extends BaseTest {       private FirefoxDriver driver;            @AfterEach       public void clearProperties() {         System.clearProperty(GeckoDriverService.GECKO_DRIVER_LOG_PROPERTY);         System.clearProperty(GeckoDriverService.GECKO_DRIVER_LOG_LEVEL_PROPERTY);driver.quit();       }            @Test       public void basicOptions() {         FirefoxOptions options = new FirefoxOptions();         driver = new FirefoxDriver(options);       }            @Test       public void arguments() {         FirefoxOptions options = new FirefoxOptions();              options.addArguments("-headless");              driver = new FirefoxDriver(options);       }            @Test       @DisabledOnOs(OS.WINDOWS)       public void setBrowserLocation() {         FirefoxOptions options = new FirefoxOptions();              options.setBinary(getFirefoxLocation());              driver = new FirefoxDriver(options);       }            @Test       public void logsToFile() throws IOException {         File logLocation = getTempFile("logsToFile", ".log");         FirefoxDriverService service =             new GeckoDriverService.Builder().withLogFile(logLocation).build();              driver = new FirefoxDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         Assertions.assertTrue(fileContent.contains("geckodriver	INFO	Listening on"));       }            @Test       public void logsToConsole() throws IOException {         File logLocation = getTempFile("logsToConsole", ".log");         System.setOut(new PrintStream(logLocation));              FirefoxDriverService service =             new GeckoDriverService.Builder().withLogOutput(System.out).build();              driver = new FirefoxDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         Assertions.assertTrue(fileContent.contains("geckodriver	INFO	Listening on"));       }            @Test       public void logsWithLevel() throws IOException {         File logLocation = getTempFile("logsWithLevel", ".log");         System.setProperty(GeckoDriverService.GECKO_DRIVER_LOG_PROPERTY, logLocation.getAbsolutePath());              FirefoxDriverService service =             new GeckoDriverService.Builder().withLogLevel(FirefoxDriverLogLevel.DEBUG).build();              driver = new FirefoxDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         Assertions.assertTrue(fileContent.contains("Marionette\tDEBUG"));       }            @Test       public void stopsTruncatingLogs() throws IOException {         File logLocation = getTempFile("geckodriver-", "log");         System.setProperty(GeckoDriverService.GECKO_DRIVER_LOG_PROPERTY, logLocation.getAbsolutePath());         System.setProperty(             GeckoDriverService.GECKO_DRIVER_LOG_LEVEL_PROPERTY, FirefoxDriverLogLevel.DEBUG.toString());              FirefoxDriverService service =             new GeckoDriverService.Builder().withTruncatedLogs(false).build();              driver = new FirefoxDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         Assertions.assertFalse(fileContent.contains(" ... "));       }            @Test       public void setProfileLocation() {         File profileDirectory = getTempDirectory("profile-");         FirefoxDriverService service =             new GeckoDriverService.Builder().withProfileRoot(profileDirectory).build();              driver = new FirefoxDriver(service);              String location = (String) driver.getCapabilities().getCapability("moz:profile");         Assertions.assertTrue(location.contains(profileDirectory.getAbsolutePath()));       }                 @Test       public void installAddon() {         driver = startFirefoxDriver();         Path xpiPath = Paths.get("src/test/resources/extensions/selenium-example.xpi");              driver.installExtension(xpiPath);              driver.get("https://www.selenium.dev/selenium/web/blank.html");         WebElement injected = driver.findElement(By.id("webextensions-selenium-example"));         Assertions.assertEquals(             "Content injected by webextensions-selenium-example", injected.getText());       }                 @Test       public void uninstallAddon() {         driver = startFirefoxDriver();         Path xpiPath = Paths.get("src/test/resources/extensions/selenium-example.xpi");         String id = driver.installExtension(xpiPath);              driver.uninstallExtension(id);              driver.get("https://www.selenium.dev/selenium/web/blank.html");         Assertions.assertEquals(driver.findElements(By.id("webextensions-selenium-example")).size(), 0);       }                 @Test       public void installUnsignedAddonPath() {         driver = startFirefoxDriver();         Path path = Paths.get("src/test/resources/extensions/selenium-example");              driver.installExtension(path, true);              driver.get("https://www.selenium.dev/selenium/web/blank.html");         WebElement injected = getLocatedElement(driver, By.id("webextensions-selenium-example"));         Assertions.assertEquals(             "Content injected by webextensions-selenium-example", injected.getText());       }            private Path getFirefoxLocation() {         FirefoxOptions options = new FirefoxOptions();         options.setBrowserVersion("stable");         DriverFinder finder = new DriverFinder(GeckoDriverService.createDefaultService(), options);         return Path.of(finder.getBrowserPath());       }            @Test       public void fullPageScreenshot() throws Exception {         driver = startFirefoxDriver();              driver.get("https://www.selenium.dev");              File screenshot = driver.getFullPageScreenshotAs(OutputType.FILE);              File targetFile = new File("full_page_screenshot.png");         Files.move(screenshot.toPath(), targetFile.toPath());              // Verify the screenshot file exists         Assertions.assertTrue(targetFile.exists(), "The full page screenshot file should exist");         Files.deleteIfExists(targetFile.toPath());              driver.quit();       }            @Test       public void setContext() {         driver = startFirefoxDriver(new FirefoxOptions().addArguments("-remote-allow-system-access"));              ((HasContext) driver).setContext(FirefoxCommandContext.CHROME);         driver.executeScript("console.log('Inside Chrome context');");              // Verify the context is back to "content"         Assertions.assertEquals(                 FirefoxCommandContext.CHROME, ((HasContext) driver).getContext(),                 "The context should be 'chrome'"         );              driver.quit();       }            @Test       public void firefoxProfile() {         FirefoxProfile profile = new FirefoxProfile();         FirefoxOptions options = new FirefoxOptions();         profile.setPreference("javascript.enabled", "False");         options.setProfile(profile);              driver = new FirefoxDriver(options);              driver.quit();       }     }     

**Note** : Java also allows setting console output by System Property;   Property key: `GeckoDriverService.GECKO_DRIVER_LOG_PROPERTY`   Property value: `DriverService.LOG_STDOUT` or `DriverService.LOG_STDERR`

[Selenium v4.11](https://github.com/SeleniumHQ/selenium/releases/tag/selenium-4.11.0)                   service = webdriver.FirefoxService(log_output=subprocess.STDOUT)

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk//examples/python/tests/browsers/test_firefox.py#L48)

##### /examples/python/tests/browsers/test\_firefox.py

Copy  Close               import os     import subprocess     import sys          import pytest     from selenium import webdriver               def test_basic_options():         options = webdriver.FirefoxOptions()         driver = webdriver.Firefox(options=options)              driver.quit()               def test_arguments():         options = webdriver.FirefoxOptions()              options.add_argument("-headless")              driver = webdriver.Firefox(options=options)         driver.quit()               def test_set_browser_location(firefox_bin):         options = webdriver.FirefoxOptions()              options.binary_location = firefox_bin              driver = webdriver.Firefox(options=options)              driver.quit()               def test_log_to_file(log_path):         service = webdriver.FirefoxService(log_output=log_path, service_args=['--log', 'debug'])              driver = webdriver.Firefox(service=service)         driver.get("https://www.selenium.dev")              with open(log_path, 'r') as fp:             assert "geckodriver	INFO	Listening on" in fp.readline()              driver.quit()               def test_log_to_stdout(capfd):         service = webdriver.FirefoxService(log_output=subprocess.STDOUT)              driver = webdriver.Firefox(service=service)              out, err = capfd.readouterr()         assert "geckodriver	INFO	Listening on" in out              driver.quit()               def test_log_level(log_path):         service = webdriver.FirefoxService(log_output=log_path, service_args=['--log', 'debug'])              driver = webdriver.Firefox(service=service)              with open(log_path, 'r') as f:             assert '\tDEBUG' in f.read()              driver.quit()               def test_log_truncation(log_path):         service = webdriver.FirefoxService(service_args=['--log-no-truncate', '--log', 'debug'], log_output=log_path)              driver = webdriver.Firefox(service=service)              with open(log_path, 'r') as f:             assert ' ... ' not in f.read()              driver.quit()               def test_profile_location(temp_dir):         service = webdriver.FirefoxService(service_args=['--profile-root', temp_dir])              driver = webdriver.Firefox(service=service)         profile_name = driver.capabilities.get('moz:profile').replace('\\', '/').split('/')[-1]              assert profile_name in os.listdir(temp_dir)              driver.quit()               def test_install_addon(firefox_driver, addon_path_xpi):         driver = firefox_driver              driver.install_addon(addon_path_xpi)              driver.get("https://www.selenium.dev/selenium/web/blank.html")         injected = driver.find_element(webdriver.common.by.By.ID, "webextensions-selenium-example")              assert injected.text == "Content injected by webextensions-selenium-example"               def test_uninstall_addon(firefox_driver, addon_path_xpi):         driver = firefox_driver              id = driver.install_addon(addon_path_xpi)         driver.uninstall_addon(id)              driver.get("https://www.selenium.dev/selenium/web/blank.html")         assert len(driver.find_elements(webdriver.common.by.By.ID, "webextensions-selenium-example")) == 0               def test_install_unsigned_addon_directory(firefox_driver, addon_path_dir):         driver = firefox_driver              driver.install_addon(addon_path_dir, temporary=True)              driver.get("https://www.selenium.dev/selenium/web/blank.html")         injected = driver.find_element(webdriver.common.by.By.ID, "webextensions-selenium-example")              assert injected.text == "Content injected by webextensions-selenium-example"               def test_install_unsigned_addon_directory_slash(firefox_driver, addon_path_dir_slash):         driver = firefox_driver              driver.install_addon(addon_path_dir_slash, temporary=True)              driver.get("https://www.selenium.dev/selenium/web/blank.html")         injected = driver.find_element(webdriver.common.by.By.ID, "webextensions-selenium-example")              assert injected.text == "Content injected by webextensions-selenium-example"               def test_full_page_screenshot(firefox_driver):         driver = firefox_driver              driver.get("https://www.selenium.dev")              driver.save_full_page_screenshot("full_page_screenshot.png")              assert os.path.exists("full_page_screenshot.png")              driver.quit()               def test_set_context():         options = webdriver.FirefoxOptions()         options.add_argument("-remote-allow-system-access")         driver = webdriver.Firefox(options=options)              with driver.context(driver.CONTEXT_CHROME):             driver.execute_script("console.log('Inside Chrome context');")              # Check if the context is back to content         assert driver.execute("GET_CONTEXT")["value"] == "content"         driver.quit()               def test_firefox_profile():         from selenium.webdriver.firefox.options import Options         from selenium.webdriver.firefox.firefox_profile import FirefoxProfile              options = Options()         firefox_profile = FirefoxProfile()         firefox_profile.set_preference("javascript.enabled", False)         options.profile = firefox_profile              driver = webdriver.Firefox(options=options)              driver.quit()     

[Implementation Missing](https://github.com/SeleniumHQ/selenium)

[Selenium v4.10](https://github.com/SeleniumHQ/selenium/releases/tag/selenium-4.10.0)                     service.log = $stdout

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/ruby/spec/browsers/firefox_spec.rb#L52)

##### examples/ruby/spec/browsers/firefox\_spec.rb

Copy  Close               # frozen_string_literal: true          require 'spec_helper'          RSpec.describe 'Firefox' do       describe 'Options' do         let(:firefox_location) { driver_finder && ENV.fetch('FIREFOX_BIN', nil) }              it 'basic options' do           options = Selenium::WebDriver::Options.firefox           @driver = Selenium::WebDriver.for :firefox, options: options         end              it 'add arguments' do           options = Selenium::WebDriver::Options.firefox                options.args << '-headless'                @driver = Selenium::WebDriver.for :firefox, options: options         end              it 'sets location of binary' do           options = Selenium::WebDriver::Options.firefox                options.binary = firefox_location                @driver = Selenium::WebDriver.for :firefox, options: options         end       end            describe 'Service' do         let(:file_name) { Tempfile.new('geckodriver').path }         let(:root_directory) { Dir.mktmpdir }              after do           FileUtils.rm_f(file_name)           FileUtils.rm_rf(root_directory)         end              it 'logs to file' do           service = Selenium::WebDriver::Service.firefox                service.log = file_name                @driver = Selenium::WebDriver.for :firefox, service: service           expect(File.readlines(file_name).first).to include("geckodriver\tINFO\tListening on")         end              it 'logs to console' do           service = Selenium::WebDriver::Service.firefox                service.log = $stdout                expect {             @driver = Selenium::WebDriver.for :firefox, service: service           }.to output(/geckodriver	INFO	Listening on/).to_stdout_from_any_process         end              it 'sets log level' do           service = Selenium::WebDriver::Service.firefox           service.log = file_name                service.args += %w[--log debug]                @driver = Selenium::WebDriver.for :firefox, service: service           expect(File.readlines(file_name).grep(/Marionette	DEBUG/).any?).to eq true         end              it 'stops truncating log lines' do           service = Selenium::WebDriver::Service.firefox(log: file_name, args: %w[--log debug])                service.args << '--log-no-truncate'                @driver = Selenium::WebDriver.for :firefox, service: service           expect(File.readlines(file_name).grep(/ \.\.\. /).any?).to eq false         end              it 'sets default profile location' do           service = Selenium::WebDriver::Service.firefox                service.args += ['--profile-root', root_directory]                @driver = Selenium::WebDriver.for :firefox, service: service           profile_location = Dir.new(@driver.capabilities['moz:profile'])           expect(profile_location.path.gsub('\\', '/')).to include(root_directory)         end       end            describe 'Features' do         let(:driver) { start_firefox }              it 'installs addon' do           extension_file_path = File.expand_path('../spec_support/extensions/webextensions-selenium-example.xpi', __dir__)                driver.install_addon(extension_file_path)                driver.get 'https://www.selenium.dev/selenium/web/blank.html'           injected = driver.find_element(id: 'webextensions-selenium-example')           expect(injected.text).to eq 'Content injected by webextensions-selenium-example'         end              it 'uninstalls addon' do           extension_file_path = File.expand_path('../spec_support/extensions/webextensions-selenium-example.xpi', __dir__)           extension_id = driver.install_addon(extension_file_path)                driver.uninstall_addon(extension_id)                driver.get 'https://www.selenium.dev/selenium/web/blank.html'           expect(driver.find_elements(id: 'webextensions-selenium-example')).to be_empty         end              it 'installs unsigned addon' do           extension_dir_path = File.expand_path('../spec_support/extensions/webextensions-selenium-example/', __dir__)                driver.install_addon(extension_dir_path, true)                driver.navigate.to 'https://www.selenium.dev/selenium/web/blank.html'           injected = driver.find_element(id: 'webextensions-selenium-example')           expect(injected.text).to eq 'Content injected by webextensions-selenium-example'         end              it 'takes full page screenshot' do           driver.navigate.to 'https://www.selenium.dev/selenium/web/blank.html'           Dir.mktmpdir('screenshot_test') do |dir|             screenshot = driver.save_full_page_screenshot(File.join(dir, 'screenshot.png'))                  expect(screenshot).to be_a File           end         end              it 'sets the context' do           driver.context = 'content'           expect(driver.context).to eq 'content'         end       end            describe 'Profile' do         it 'creates a new profile' do           profile = Selenium::WebDriver::Firefox::Profile.new           profile['browser.download.dir'] = '/tmp/webdriver-downloads'           options = Selenium::WebDriver::Firefox::Options.new(profile: profile)           expect(options.profile).to eq(profile)         end       end            def driver_finder         options = Selenium::WebDriver::Options.firefox(browser_version: 'stable')         service = Selenium::WebDriver::Service.firefox         finder = Selenium::WebDriver::DriverFinder.new(options, service)         ENV['GECKODRIVER_BIN'] = finder.driver_path         ENV['FIREFOX_BIN'] = finder.browser_path       end     end     

[Add Example](https://www.selenium.dev/documentation/about/contributing/#creating-examples)

[Add Example](https://www.selenium.dev/documentation/about/contributing/#creating-examples)

### Log level

There are 7 available log levels: `fatal`, `error`, `warn`, `info`, `config`, `debug`, `trace`. If logging is specified the level defaults to `info`.

Note that `-v` is equivalent to `-log debug` and `-vv` is equivalent to `log trace`, so this examples is just for setting the log level generically:

  * Java   * Python   * CSharp   * Ruby   * JavaScript   * Kotlin

[Selenium v4.10](https://github.com/SeleniumHQ/selenium/releases/tag/selenium-4.10.0)                   FirefoxDriverService service =             new GeckoDriverService.Builder().withLogLevel(FirefoxDriverLogLevel.DEBUG).build();

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/java/src/test/java/dev/selenium/browsers/FirefoxTest.java#L90-L91)

##### examples/java/src/test/java/dev/selenium/browsers/FirefoxTest.java

Copy  Close               package dev.selenium.browsers;          import dev.selenium.BaseTest;     import java.io.File;     import java.io.IOException;     import java.io.PrintStream;     import java.nio.file.Files;     import java.nio.file.Path;     import java.nio.file.Paths;     import org.junit.jupiter.api.AfterEach;     import org.junit.jupiter.api.Assertions;     import org.junit.jupiter.api.Test;     import org.junit.jupiter.api.condition.DisabledOnOs;     import org.junit.jupiter.api.condition.OS;     import org.openqa.selenium.By;     import org.openqa.selenium.OutputType;     import org.openqa.selenium.WebElement;     import org.openqa.selenium.firefox.*;     import org.openqa.selenium.remote.service.DriverFinder;                              public class FirefoxTest extends BaseTest {       private FirefoxDriver driver;            @AfterEach       public void clearProperties() {         System.clearProperty(GeckoDriverService.GECKO_DRIVER_LOG_PROPERTY);         System.clearProperty(GeckoDriverService.GECKO_DRIVER_LOG_LEVEL_PROPERTY);driver.quit();       }            @Test       public void basicOptions() {         FirefoxOptions options = new FirefoxOptions();         driver = new FirefoxDriver(options);       }            @Test       public void arguments() {         FirefoxOptions options = new FirefoxOptions();              options.addArguments("-headless");              driver = new FirefoxDriver(options);       }            @Test       @DisabledOnOs(OS.WINDOWS)       public void setBrowserLocation() {         FirefoxOptions options = new FirefoxOptions();              options.setBinary(getFirefoxLocation());              driver = new FirefoxDriver(options);       }            @Test       public void logsToFile() throws IOException {         File logLocation = getTempFile("logsToFile", ".log");         FirefoxDriverService service =             new GeckoDriverService.Builder().withLogFile(logLocation).build();              driver = new FirefoxDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         Assertions.assertTrue(fileContent.contains("geckodriver	INFO	Listening on"));       }            @Test       public void logsToConsole() throws IOException {         File logLocation = getTempFile("logsToConsole", ".log");         System.setOut(new PrintStream(logLocation));              FirefoxDriverService service =             new GeckoDriverService.Builder().withLogOutput(System.out).build();              driver = new FirefoxDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         Assertions.assertTrue(fileContent.contains("geckodriver	INFO	Listening on"));       }            @Test       public void logsWithLevel() throws IOException {         File logLocation = getTempFile("logsWithLevel", ".log");         System.setProperty(GeckoDriverService.GECKO_DRIVER_LOG_PROPERTY, logLocation.getAbsolutePath());              FirefoxDriverService service =             new GeckoDriverService.Builder().withLogLevel(FirefoxDriverLogLevel.DEBUG).build();              driver = new FirefoxDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         Assertions.assertTrue(fileContent.contains("Marionette\tDEBUG"));       }            @Test       public void stopsTruncatingLogs() throws IOException {         File logLocation = getTempFile("geckodriver-", "log");         System.setProperty(GeckoDriverService.GECKO_DRIVER_LOG_PROPERTY, logLocation.getAbsolutePath());         System.setProperty(             GeckoDriverService.GECKO_DRIVER_LOG_LEVEL_PROPERTY, FirefoxDriverLogLevel.DEBUG.toString());              FirefoxDriverService service =             new GeckoDriverService.Builder().withTruncatedLogs(false).build();              driver = new FirefoxDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         Assertions.assertFalse(fileContent.contains(" ... "));       }            @Test       public void setProfileLocation() {         File profileDirectory = getTempDirectory("profile-");         FirefoxDriverService service =             new GeckoDriverService.Builder().withProfileRoot(profileDirectory).build();              driver = new FirefoxDriver(service);              String location = (String) driver.getCapabilities().getCapability("moz:profile");         Assertions.assertTrue(location.contains(profileDirectory.getAbsolutePath()));       }                 @Test       public void installAddon() {         driver = startFirefoxDriver();         Path xpiPath = Paths.get("src/test/resources/extensions/selenium-example.xpi");              driver.installExtension(xpiPath);              driver.get("https://www.selenium.dev/selenium/web/blank.html");         WebElement injected = driver.findElement(By.id("webextensions-selenium-example"));         Assertions.assertEquals(             "Content injected by webextensions-selenium-example", injected.getText());       }                 @Test       public void uninstallAddon() {         driver = startFirefoxDriver();         Path xpiPath = Paths.get("src/test/resources/extensions/selenium-example.xpi");         String id = driver.installExtension(xpiPath);              driver.uninstallExtension(id);              driver.get("https://www.selenium.dev/selenium/web/blank.html");         Assertions.assertEquals(driver.findElements(By.id("webextensions-selenium-example")).size(), 0);       }                 @Test       public void installUnsignedAddonPath() {         driver = startFirefoxDriver();         Path path = Paths.get("src/test/resources/extensions/selenium-example");              driver.installExtension(path, true);              driver.get("https://www.selenium.dev/selenium/web/blank.html");         WebElement injected = getLocatedElement(driver, By.id("webextensions-selenium-example"));         Assertions.assertEquals(             "Content injected by webextensions-selenium-example", injected.getText());       }            private Path getFirefoxLocation() {         FirefoxOptions options = new FirefoxOptions();         options.setBrowserVersion("stable");         DriverFinder finder = new DriverFinder(GeckoDriverService.createDefaultService(), options);         return Path.of(finder.getBrowserPath());       }            @Test       public void fullPageScreenshot() throws Exception {         driver = startFirefoxDriver();              driver.get("https://www.selenium.dev");              File screenshot = driver.getFullPageScreenshotAs(OutputType.FILE);              File targetFile = new File("full_page_screenshot.png");         Files.move(screenshot.toPath(), targetFile.toPath());              // Verify the screenshot file exists         Assertions.assertTrue(targetFile.exists(), "The full page screenshot file should exist");         Files.deleteIfExists(targetFile.toPath());              driver.quit();       }            @Test       public void setContext() {         driver = startFirefoxDriver(new FirefoxOptions().addArguments("-remote-allow-system-access"));              ((HasContext) driver).setContext(FirefoxCommandContext.CHROME);         driver.executeScript("console.log('Inside Chrome context');");              // Verify the context is back to "content"         Assertions.assertEquals(                 FirefoxCommandContext.CHROME, ((HasContext) driver).getContext(),                 "The context should be 'chrome'"         );              driver.quit();       }            @Test       public void firefoxProfile() {         FirefoxProfile profile = new FirefoxProfile();         FirefoxOptions options = new FirefoxOptions();         profile.setPreference("javascript.enabled", "False");         options.setProfile(profile);              driver = new FirefoxDriver(options);              driver.quit();       }     }     

**Note** : Java also allows setting log level by System Property:   Property key: `GeckoDriverService.GECKO_DRIVER_LOG_LEVEL_PROPERTY`   Property value: String representation of `FirefoxDriverLogLevel` enum

[Selenium v4.11](https://github.com/SeleniumHQ/selenium/releases/tag/selenium-4.11.0)                   service = webdriver.FirefoxService(log_output=log_path, service_args=['--log', 'debug'])

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk//examples/python/tests/browsers/test_firefox.py#L59)

##### /examples/python/tests/browsers/test\_firefox.py

Copy  Close               import os     import subprocess     import sys          import pytest     from selenium import webdriver               def test_basic_options():         options = webdriver.FirefoxOptions()         driver = webdriver.Firefox(options=options)              driver.quit()               def test_arguments():         options = webdriver.FirefoxOptions()              options.add_argument("-headless")              driver = webdriver.Firefox(options=options)         driver.quit()               def test_set_browser_location(firefox_bin):         options = webdriver.FirefoxOptions()              options.binary_location = firefox_bin              driver = webdriver.Firefox(options=options)              driver.quit()               def test_log_to_file(log_path):         service = webdriver.FirefoxService(log_output=log_path, service_args=['--log', 'debug'])              driver = webdriver.Firefox(service=service)         driver.get("https://www.selenium.dev")              with open(log_path, 'r') as fp:             assert "geckodriver	INFO	Listening on" in fp.readline()              driver.quit()               def test_log_to_stdout(capfd):         service = webdriver.FirefoxService(log_output=subprocess.STDOUT)              driver = webdriver.Firefox(service=service)              out, err = capfd.readouterr()         assert "geckodriver	INFO	Listening on" in out              driver.quit()               def test_log_level(log_path):         service = webdriver.FirefoxService(log_output=log_path, service_args=['--log', 'debug'])              driver = webdriver.Firefox(service=service)              with open(log_path, 'r') as f:             assert '\tDEBUG' in f.read()              driver.quit()               def test_log_truncation(log_path):         service = webdriver.FirefoxService(service_args=['--log-no-truncate', '--log', 'debug'], log_output=log_path)              driver = webdriver.Firefox(service=service)              with open(log_path, 'r') as f:             assert ' ... ' not in f.read()              driver.quit()               def test_profile_location(temp_dir):         service = webdriver.FirefoxService(service_args=['--profile-root', temp_dir])              driver = webdriver.Firefox(service=service)         profile_name = driver.capabilities.get('moz:profile').replace('\\', '/').split('/')[-1]              assert profile_name in os.listdir(temp_dir)              driver.quit()               def test_install_addon(firefox_driver, addon_path_xpi):         driver = firefox_driver              driver.install_addon(addon_path_xpi)              driver.get("https://www.selenium.dev/selenium/web/blank.html")         injected = driver.find_element(webdriver.common.by.By.ID, "webextensions-selenium-example")              assert injected.text == "Content injected by webextensions-selenium-example"               def test_uninstall_addon(firefox_driver, addon_path_xpi):         driver = firefox_driver              id = driver.install_addon(addon_path_xpi)         driver.uninstall_addon(id)              driver.get("https://www.selenium.dev/selenium/web/blank.html")         assert len(driver.find_elements(webdriver.common.by.By.ID, "webextensions-selenium-example")) == 0               def test_install_unsigned_addon_directory(firefox_driver, addon_path_dir):         driver = firefox_driver              driver.install_addon(addon_path_dir, temporary=True)              driver.get("https://www.selenium.dev/selenium/web/blank.html")         injected = driver.find_element(webdriver.common.by.By.ID, "webextensions-selenium-example")              assert injected.text == "Content injected by webextensions-selenium-example"               def test_install_unsigned_addon_directory_slash(firefox_driver, addon_path_dir_slash):         driver = firefox_driver              driver.install_addon(addon_path_dir_slash, temporary=True)              driver.get("https://www.selenium.dev/selenium/web/blank.html")         injected = driver.find_element(webdriver.common.by.By.ID, "webextensions-selenium-example")              assert injected.text == "Content injected by webextensions-selenium-example"               def test_full_page_screenshot(firefox_driver):         driver = firefox_driver              driver.get("https://www.selenium.dev")              driver.save_full_page_screenshot("full_page_screenshot.png")              assert os.path.exists("full_page_screenshot.png")              driver.quit()               def test_set_context():         options = webdriver.FirefoxOptions()         options.add_argument("-remote-allow-system-access")         driver = webdriver.Firefox(options=options)              with driver.context(driver.CONTEXT_CHROME):             driver.execute_script("console.log('Inside Chrome context');")              # Check if the context is back to content         assert driver.execute("GET_CONTEXT")["value"] == "content"         driver.quit()               def test_firefox_profile():         from selenium.webdriver.firefox.options import Options         from selenium.webdriver.firefox.firefox_profile import FirefoxProfile              options = Options()         firefox_profile = FirefoxProfile()         firefox_profile.set_preference("javascript.enabled", False)         options.profile = firefox_profile              driver = webdriver.Firefox(options=options)              driver.quit()     

[Implementation Missing](https://github.com/SeleniumHQ/selenium)

[Selenium v4.10](https://github.com/SeleniumHQ/selenium/releases/tag/selenium-4.10.0)                     service.args += %w[--log debug]

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/ruby/spec/browsers/firefox_spec.rb#L63)

##### examples/ruby/spec/browsers/firefox\_spec.rb

Copy  Close               # frozen_string_literal: true          require 'spec_helper'          RSpec.describe 'Firefox' do       describe 'Options' do         let(:firefox_location) { driver_finder && ENV.fetch('FIREFOX_BIN', nil) }              it 'basic options' do           options = Selenium::WebDriver::Options.firefox           @driver = Selenium::WebDriver.for :firefox, options: options         end              it 'add arguments' do           options = Selenium::WebDriver::Options.firefox                options.args << '-headless'                @driver = Selenium::WebDriver.for :firefox, options: options         end              it 'sets location of binary' do           options = Selenium::WebDriver::Options.firefox                options.binary = firefox_location                @driver = Selenium::WebDriver.for :firefox, options: options         end       end            describe 'Service' do         let(:file_name) { Tempfile.new('geckodriver').path }         let(:root_directory) { Dir.mktmpdir }              after do           FileUtils.rm_f(file_name)           FileUtils.rm_rf(root_directory)         end              it 'logs to file' do           service = Selenium::WebDriver::Service.firefox                service.log = file_name                @driver = Selenium::WebDriver.for :firefox, service: service           expect(File.readlines(file_name).first).to include("geckodriver\tINFO\tListening on")         end              it 'logs to console' do           service = Selenium::WebDriver::Service.firefox                service.log = $stdout                expect {             @driver = Selenium::WebDriver.for :firefox, service: service           }.to output(/geckodriver	INFO	Listening on/).to_stdout_from_any_process         end              it 'sets log level' do           service = Selenium::WebDriver::Service.firefox           service.log = file_name                service.args += %w[--log debug]                @driver = Selenium::WebDriver.for :firefox, service: service           expect(File.readlines(file_name).grep(/Marionette	DEBUG/).any?).to eq true         end              it 'stops truncating log lines' do           service = Selenium::WebDriver::Service.firefox(log: file_name, args: %w[--log debug])                service.args << '--log-no-truncate'                @driver = Selenium::WebDriver.for :firefox, service: service           expect(File.readlines(file_name).grep(/ \.\.\. /).any?).to eq false         end              it 'sets default profile location' do           service = Selenium::WebDriver::Service.firefox                service.args += ['--profile-root', root_directory]                @driver = Selenium::WebDriver.for :firefox, service: service           profile_location = Dir.new(@driver.capabilities['moz:profile'])           expect(profile_location.path.gsub('\\', '/')).to include(root_directory)         end       end            describe 'Features' do         let(:driver) { start_firefox }              it 'installs addon' do           extension_file_path = File.expand_path('../spec_support/extensions/webextensions-selenium-example.xpi', __dir__)                driver.install_addon(extension_file_path)                driver.get 'https://www.selenium.dev/selenium/web/blank.html'           injected = driver.find_element(id: 'webextensions-selenium-example')           expect(injected.text).to eq 'Content injected by webextensions-selenium-example'         end              it 'uninstalls addon' do           extension_file_path = File.expand_path('../spec_support/extensions/webextensions-selenium-example.xpi', __dir__)           extension_id = driver.install_addon(extension_file_path)                driver.uninstall_addon(extension_id)                driver.get 'https://www.selenium.dev/selenium/web/blank.html'           expect(driver.find_elements(id: 'webextensions-selenium-example')).to be_empty         end              it 'installs unsigned addon' do           extension_dir_path = File.expand_path('../spec_support/extensions/webextensions-selenium-example/', __dir__)                driver.install_addon(extension_dir_path, true)                driver.navigate.to 'https://www.selenium.dev/selenium/web/blank.html'           injected = driver.find_element(id: 'webextensions-selenium-example')           expect(injected.text).to eq 'Content injected by webextensions-selenium-example'         end              it 'takes full page screenshot' do           driver.navigate.to 'https://www.selenium.dev/selenium/web/blank.html'           Dir.mktmpdir('screenshot_test') do |dir|             screenshot = driver.save_full_page_screenshot(File.join(dir, 'screenshot.png'))                  expect(screenshot).to be_a File           end         end              it 'sets the context' do           driver.context = 'content'           expect(driver.context).to eq 'content'         end       end            describe 'Profile' do         it 'creates a new profile' do           profile = Selenium::WebDriver::Firefox::Profile.new           profile['browser.download.dir'] = '/tmp/webdriver-downloads'           options = Selenium::WebDriver::Firefox::Options.new(profile: profile)           expect(options.profile).to eq(profile)         end       end            def driver_finder         options = Selenium::WebDriver::Options.firefox(browser_version: 'stable')         service = Selenium::WebDriver::Service.firefox         finder = Selenium::WebDriver::DriverFinder.new(options, service)         ENV['GECKODRIVER_BIN'] = finder.driver_path         ENV['FIREFOX_BIN'] = finder.browser_path       end     end     

[Add Example](https://www.selenium.dev/documentation/about/contributing/#creating-examples)

[Add Example](https://www.selenium.dev/documentation/about/contributing/#creating-examples)

### Truncated Logs

The driver logs everything that gets sent to it, including string representations of large binaries, so Firefox truncates lines by default. To turn off truncation:

  * Java   * Python   * CSharp   * Ruby   * JavaScript   * Kotlin

[Selenium v4.10](https://github.com/SeleniumHQ/selenium/releases/tag/selenium-4.10.0)                   FirefoxDriverService service =             new GeckoDriverService.Builder().withTruncatedLogs(false).build();

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/java/src/test/java/dev/selenium/browsers/FirefoxTest.java#L106-L107)

##### examples/java/src/test/java/dev/selenium/browsers/FirefoxTest.java

Copy  Close               package dev.selenium.browsers;          import dev.selenium.BaseTest;     import java.io.File;     import java.io.IOException;     import java.io.PrintStream;     import java.nio.file.Files;     import java.nio.file.Path;     import java.nio.file.Paths;     import org.junit.jupiter.api.AfterEach;     import org.junit.jupiter.api.Assertions;     import org.junit.jupiter.api.Test;     import org.junit.jupiter.api.condition.DisabledOnOs;     import org.junit.jupiter.api.condition.OS;     import org.openqa.selenium.By;     import org.openqa.selenium.OutputType;     import org.openqa.selenium.WebElement;     import org.openqa.selenium.firefox.*;     import org.openqa.selenium.remote.service.DriverFinder;                              public class FirefoxTest extends BaseTest {       private FirefoxDriver driver;            @AfterEach       public void clearProperties() {         System.clearProperty(GeckoDriverService.GECKO_DRIVER_LOG_PROPERTY);         System.clearProperty(GeckoDriverService.GECKO_DRIVER_LOG_LEVEL_PROPERTY);driver.quit();       }            @Test       public void basicOptions() {         FirefoxOptions options = new FirefoxOptions();         driver = new FirefoxDriver(options);       }            @Test       public void arguments() {         FirefoxOptions options = new FirefoxOptions();              options.addArguments("-headless");              driver = new FirefoxDriver(options);       }            @Test       @DisabledOnOs(OS.WINDOWS)       public void setBrowserLocation() {         FirefoxOptions options = new FirefoxOptions();              options.setBinary(getFirefoxLocation());              driver = new FirefoxDriver(options);       }            @Test       public void logsToFile() throws IOException {         File logLocation = getTempFile("logsToFile", ".log");         FirefoxDriverService service =             new GeckoDriverService.Builder().withLogFile(logLocation).build();              driver = new FirefoxDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         Assertions.assertTrue(fileContent.contains("geckodriver	INFO	Listening on"));       }            @Test       public void logsToConsole() throws IOException {         File logLocation = getTempFile("logsToConsole", ".log");         System.setOut(new PrintStream(logLocation));              FirefoxDriverService service =             new GeckoDriverService.Builder().withLogOutput(System.out).build();              driver = new FirefoxDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         Assertions.assertTrue(fileContent.contains("geckodriver	INFO	Listening on"));       }            @Test       public void logsWithLevel() throws IOException {         File logLocation = getTempFile("logsWithLevel", ".log");         System.setProperty(GeckoDriverService.GECKO_DRIVER_LOG_PROPERTY, logLocation.getAbsolutePath());              FirefoxDriverService service =             new GeckoDriverService.Builder().withLogLevel(FirefoxDriverLogLevel.DEBUG).build();              driver = new FirefoxDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         Assertions.assertTrue(fileContent.contains("Marionette\tDEBUG"));       }            @Test       public void stopsTruncatingLogs() throws IOException {         File logLocation = getTempFile("geckodriver-", "log");         System.setProperty(GeckoDriverService.GECKO_DRIVER_LOG_PROPERTY, logLocation.getAbsolutePath());         System.setProperty(             GeckoDriverService.GECKO_DRIVER_LOG_LEVEL_PROPERTY, FirefoxDriverLogLevel.DEBUG.toString());              FirefoxDriverService service =             new GeckoDriverService.Builder().withTruncatedLogs(false).build();              driver = new FirefoxDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         Assertions.assertFalse(fileContent.contains(" ... "));       }            @Test       public void setProfileLocation() {         File profileDirectory = getTempDirectory("profile-");         FirefoxDriverService service =             new GeckoDriverService.Builder().withProfileRoot(profileDirectory).build();              driver = new FirefoxDriver(service);              String location = (String) driver.getCapabilities().getCapability("moz:profile");         Assertions.assertTrue(location.contains(profileDirectory.getAbsolutePath()));       }                 @Test       public void installAddon() {         driver = startFirefoxDriver();         Path xpiPath = Paths.get("src/test/resources/extensions/selenium-example.xpi");              driver.installExtension(xpiPath);              driver.get("https://www.selenium.dev/selenium/web/blank.html");         WebElement injected = driver.findElement(By.id("webextensions-selenium-example"));         Assertions.assertEquals(             "Content injected by webextensions-selenium-example", injected.getText());       }                 @Test       public void uninstallAddon() {         driver = startFirefoxDriver();         Path xpiPath = Paths.get("src/test/resources/extensions/selenium-example.xpi");         String id = driver.installExtension(xpiPath);              driver.uninstallExtension(id);              driver.get("https://www.selenium.dev/selenium/web/blank.html");         Assertions.assertEquals(driver.findElements(By.id("webextensions-selenium-example")).size(), 0);       }                 @Test       public void installUnsignedAddonPath() {         driver = startFirefoxDriver();         Path path = Paths.get("src/test/resources/extensions/selenium-example");              driver.installExtension(path, true);              driver.get("https://www.selenium.dev/selenium/web/blank.html");         WebElement injected = getLocatedElement(driver, By.id("webextensions-selenium-example"));         Assertions.assertEquals(             "Content injected by webextensions-selenium-example", injected.getText());       }            private Path getFirefoxLocation() {         FirefoxOptions options = new FirefoxOptions();         options.setBrowserVersion("stable");         DriverFinder finder = new DriverFinder(GeckoDriverService.createDefaultService(), options);         return Path.of(finder.getBrowserPath());       }            @Test       public void fullPageScreenshot() throws Exception {         driver = startFirefoxDriver();              driver.get("https://www.selenium.dev");              File screenshot = driver.getFullPageScreenshotAs(OutputType.FILE);              File targetFile = new File("full_page_screenshot.png");         Files.move(screenshot.toPath(), targetFile.toPath());              // Verify the screenshot file exists         Assertions.assertTrue(targetFile.exists(), "The full page screenshot file should exist");         Files.deleteIfExists(targetFile.toPath());              driver.quit();       }            @Test       public void setContext() {         driver = startFirefoxDriver(new FirefoxOptions().addArguments("-remote-allow-system-access"));              ((HasContext) driver).setContext(FirefoxCommandContext.CHROME);         driver.executeScript("console.log('Inside Chrome context');");              // Verify the context is back to "content"         Assertions.assertEquals(                 FirefoxCommandContext.CHROME, ((HasContext) driver).getContext(),                 "The context should be 'chrome'"         );              driver.quit();       }            @Test       public void firefoxProfile() {         FirefoxProfile profile = new FirefoxProfile();         FirefoxOptions options = new FirefoxOptions();         profile.setPreference("javascript.enabled", "False");         options.setProfile(profile);              driver = new FirefoxDriver(options);              driver.quit();       }     }     

**Note** : Java also allows setting log level by System Property:   Property key: `GeckoDriverService.GECKO_DRIVER_LOG_NO_TRUNCATE`   Property value: `"true"` or `"false"`

[Selenium v4.11](https://github.com/SeleniumHQ/selenium/releases/tag/selenium-4.11.0)                   service = webdriver.FirefoxService(service_args=['--log-no-truncate', '--log', 'debug'], log_output=log_path)

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk//examples/python/tests/browsers/test_firefox.py#L70)

##### /examples/python/tests/browsers/test\_firefox.py

Copy  Close               import os     import subprocess     import sys          import pytest     from selenium import webdriver               def test_basic_options():         options = webdriver.FirefoxOptions()         driver = webdriver.Firefox(options=options)              driver.quit()               def test_arguments():         options = webdriver.FirefoxOptions()              options.add_argument("-headless")              driver = webdriver.Firefox(options=options)         driver.quit()               def test_set_browser_location(firefox_bin):         options = webdriver.FirefoxOptions()              options.binary_location = firefox_bin              driver = webdriver.Firefox(options=options)              driver.quit()               def test_log_to_file(log_path):         service = webdriver.FirefoxService(log_output=log_path, service_args=['--log', 'debug'])              driver = webdriver.Firefox(service=service)         driver.get("https://www.selenium.dev")              with open(log_path, 'r') as fp:             assert "geckodriver	INFO	Listening on" in fp.readline()              driver.quit()               def test_log_to_stdout(capfd):         service = webdriver.FirefoxService(log_output=subprocess.STDOUT)              driver = webdriver.Firefox(service=service)              out, err = capfd.readouterr()         assert "geckodriver	INFO	Listening on" in out              driver.quit()               def test_log_level(log_path):         service = webdriver.FirefoxService(log_output=log_path, service_args=['--log', 'debug'])              driver = webdriver.Firefox(service=service)              with open(log_path, 'r') as f:             assert '\tDEBUG' in f.read()              driver.quit()               def test_log_truncation(log_path):         service = webdriver.FirefoxService(service_args=['--log-no-truncate', '--log', 'debug'], log_output=log_path)              driver = webdriver.Firefox(service=service)              with open(log_path, 'r') as f:             assert ' ... ' not in f.read()              driver.quit()               def test_profile_location(temp_dir):         service = webdriver.FirefoxService(service_args=['--profile-root', temp_dir])              driver = webdriver.Firefox(service=service)         profile_name = driver.capabilities.get('moz:profile').replace('\\', '/').split('/')[-1]              assert profile_name in os.listdir(temp_dir)              driver.quit()               def test_install_addon(firefox_driver, addon_path_xpi):         driver = firefox_driver              driver.install_addon(addon_path_xpi)              driver.get("https://www.selenium.dev/selenium/web/blank.html")         injected = driver.find_element(webdriver.common.by.By.ID, "webextensions-selenium-example")              assert injected.text == "Content injected by webextensions-selenium-example"               def test_uninstall_addon(firefox_driver, addon_path_xpi):         driver = firefox_driver              id = driver.install_addon(addon_path_xpi)         driver.uninstall_addon(id)              driver.get("https://www.selenium.dev/selenium/web/blank.html")         assert len(driver.find_elements(webdriver.common.by.By.ID, "webextensions-selenium-example")) == 0               def test_install_unsigned_addon_directory(firefox_driver, addon_path_dir):         driver = firefox_driver              driver.install_addon(addon_path_dir, temporary=True)              driver.get("https://www.selenium.dev/selenium/web/blank.html")         injected = driver.find_element(webdriver.common.by.By.ID, "webextensions-selenium-example")              assert injected.text == "Content injected by webextensions-selenium-example"               def test_install_unsigned_addon_directory_slash(firefox_driver, addon_path_dir_slash):         driver = firefox_driver              driver.install_addon(addon_path_dir_slash, temporary=True)              driver.get("https://www.selenium.dev/selenium/web/blank.html")         injected = driver.find_element(webdriver.common.by.By.ID, "webextensions-selenium-example")              assert injected.text == "Content injected by webextensions-selenium-example"               def test_full_page_screenshot(firefox_driver):         driver = firefox_driver              driver.get("https://www.selenium.dev")              driver.save_full_page_screenshot("full_page_screenshot.png")              assert os.path.exists("full_page_screenshot.png")              driver.quit()               def test_set_context():         options = webdriver.FirefoxOptions()         options.add_argument("-remote-allow-system-access")         driver = webdriver.Firefox(options=options)              with driver.context(driver.CONTEXT_CHROME):             driver.execute_script("console.log('Inside Chrome context');")              # Check if the context is back to content         assert driver.execute("GET_CONTEXT")["value"] == "content"         driver.quit()               def test_firefox_profile():         from selenium.webdriver.firefox.options import Options         from selenium.webdriver.firefox.firefox_profile import FirefoxProfile              options = Options()         firefox_profile = FirefoxProfile()         firefox_profile.set_preference("javascript.enabled", False)         options.profile = firefox_profile              driver = webdriver.Firefox(options=options)              driver.quit()     

[Implementation Missing](https://github.com/SeleniumHQ/selenium)

[Selenium v4.10](https://github.com/SeleniumHQ/selenium/releases/tag/selenium-4.10.0)                     service.args << '--log-no-truncate'

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/ruby/spec/browsers/firefox_spec.rb#L72)

##### examples/ruby/spec/browsers/firefox\_spec.rb

Copy  Close               # frozen_string_literal: true          require 'spec_helper'          RSpec.describe 'Firefox' do       describe 'Options' do         let(:firefox_location) { driver_finder && ENV.fetch('FIREFOX_BIN', nil) }              it 'basic options' do           options = Selenium::WebDriver::Options.firefox           @driver = Selenium::WebDriver.for :firefox, options: options         end              it 'add arguments' do           options = Selenium::WebDriver::Options.firefox                options.args << '-headless'                @driver = Selenium::WebDriver.for :firefox, options: options         end              it 'sets location of binary' do           options = Selenium::WebDriver::Options.firefox                options.binary = firefox_location                @driver = Selenium::WebDriver.for :firefox, options: options         end       end            describe 'Service' do         let(:file_name) { Tempfile.new('geckodriver').path }         let(:root_directory) { Dir.mktmpdir }              after do           FileUtils.rm_f(file_name)           FileUtils.rm_rf(root_directory)         end              it 'logs to file' do           service = Selenium::WebDriver::Service.firefox                service.log = file_name                @driver = Selenium::WebDriver.for :firefox, service: service           expect(File.readlines(file_name).first).to include("geckodriver\tINFO\tListening on")         end              it 'logs to console' do           service = Selenium::WebDriver::Service.firefox                service.log = $stdout                expect {             @driver = Selenium::WebDriver.for :firefox, service: service           }.to output(/geckodriver	INFO	Listening on/).to_stdout_from_any_process         end              it 'sets log level' do           service = Selenium::WebDriver::Service.firefox           service.log = file_name                service.args += %w[--log debug]                @driver = Selenium::WebDriver.for :firefox, service: service           expect(File.readlines(file_name).grep(/Marionette	DEBUG/).any?).to eq true         end              it 'stops truncating log lines' do           service = Selenium::WebDriver::Service.firefox(log: file_name, args: %w[--log debug])                service.args << '--log-no-truncate'                @driver = Selenium::WebDriver.for :firefox, service: service           expect(File.readlines(file_name).grep(/ \.\.\. /).any?).to eq false         end              it 'sets default profile location' do           service = Selenium::WebDriver::Service.firefox                service.args += ['--profile-root', root_directory]                @driver = Selenium::WebDriver.for :firefox, service: service           profile_location = Dir.new(@driver.capabilities['moz:profile'])           expect(profile_location.path.gsub('\\', '/')).to include(root_directory)         end       end            describe 'Features' do         let(:driver) { start_firefox }              it 'installs addon' do           extension_file_path = File.expand_path('../spec_support/extensions/webextensions-selenium-example.xpi', __dir__)                driver.install_addon(extension_file_path)                driver.get 'https://www.selenium.dev/selenium/web/blank.html'           injected = driver.find_element(id: 'webextensions-selenium-example')           expect(injected.text).to eq 'Content injected by webextensions-selenium-example'         end              it 'uninstalls addon' do           extension_file_path = File.expand_path('../spec_support/extensions/webextensions-selenium-example.xpi', __dir__)           extension_id = driver.install_addon(extension_file_path)                driver.uninstall_addon(extension_id)                driver.get 'https://www.selenium.dev/selenium/web/blank.html'           expect(driver.find_elements(id: 'webextensions-selenium-example')).to be_empty         end              it 'installs unsigned addon' do           extension_dir_path = File.expand_path('../spec_support/extensions/webextensions-selenium-example/', __dir__)                driver.install_addon(extension_dir_path, true)                driver.navigate.to 'https://www.selenium.dev/selenium/web/blank.html'           injected = driver.find_element(id: 'webextensions-selenium-example')           expect(injected.text).to eq 'Content injected by webextensions-selenium-example'         end              it 'takes full page screenshot' do           driver.navigate.to 'https://www.selenium.dev/selenium/web/blank.html'           Dir.mktmpdir('screenshot_test') do |dir|             screenshot = driver.save_full_page_screenshot(File.join(dir, 'screenshot.png'))                  expect(screenshot).to be_a File           end         end              it 'sets the context' do           driver.context = 'content'           expect(driver.context).to eq 'content'         end       end            describe 'Profile' do         it 'creates a new profile' do           profile = Selenium::WebDriver::Firefox::Profile.new           profile['browser.download.dir'] = '/tmp/webdriver-downloads'           options = Selenium::WebDriver::Firefox::Options.new(profile: profile)           expect(options.profile).to eq(profile)         end       end            def driver_finder         options = Selenium::WebDriver::Options.firefox(browser_version: 'stable')         service = Selenium::WebDriver::Service.firefox         finder = Selenium::WebDriver::DriverFinder.new(options, service)         ENV['GECKODRIVER_BIN'] = finder.driver_path         ENV['FIREFOX_BIN'] = finder.browser_path       end     end     

[Add Example](https://www.selenium.dev/documentation/about/contributing/#creating-examples)

[Add Example](https://www.selenium.dev/documentation/about/contributing/#creating-examples)

### Profile Root

The default directory for profiles is the system temporary directory. If you do not have access to that directory, or want profiles to be created some place specific, you can change the profile root directory:

  * Java   * Python   * CSharp   * Ruby   * JavaScript   * Kotlin

[Selenium v4.10](https://github.com/SeleniumHQ/selenium/releases/tag/selenium-4.10.0)                   FirefoxDriverService service =             new GeckoDriverService.Builder().withProfileRoot(profileDirectory).build();

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/java/src/test/java/dev/selenium/browsers/FirefoxTest.java#L118-L119)

##### examples/java/src/test/java/dev/selenium/browsers/FirefoxTest.java

Copy  Close               package dev.selenium.browsers;          import dev.selenium.BaseTest;     import java.io.File;     import java.io.IOException;     import java.io.PrintStream;     import java.nio.file.Files;     import java.nio.file.Path;     import java.nio.file.Paths;     import org.junit.jupiter.api.AfterEach;     import org.junit.jupiter.api.Assertions;     import org.junit.jupiter.api.Test;     import org.junit.jupiter.api.condition.DisabledOnOs;     import org.junit.jupiter.api.condition.OS;     import org.openqa.selenium.By;     import org.openqa.selenium.OutputType;     import org.openqa.selenium.WebElement;     import org.openqa.selenium.firefox.*;     import org.openqa.selenium.remote.service.DriverFinder;                              public class FirefoxTest extends BaseTest {       private FirefoxDriver driver;            @AfterEach       public void clearProperties() {         System.clearProperty(GeckoDriverService.GECKO_DRIVER_LOG_PROPERTY);         System.clearProperty(GeckoDriverService.GECKO_DRIVER_LOG_LEVEL_PROPERTY);driver.quit();       }            @Test       public void basicOptions() {         FirefoxOptions options = new FirefoxOptions();         driver = new FirefoxDriver(options);       }            @Test       public void arguments() {         FirefoxOptions options = new FirefoxOptions();              options.addArguments("-headless");              driver = new FirefoxDriver(options);       }            @Test       @DisabledOnOs(OS.WINDOWS)       public void setBrowserLocation() {         FirefoxOptions options = new FirefoxOptions();              options.setBinary(getFirefoxLocation());              driver = new FirefoxDriver(options);       }            @Test       public void logsToFile() throws IOException {         File logLocation = getTempFile("logsToFile", ".log");         FirefoxDriverService service =             new GeckoDriverService.Builder().withLogFile(logLocation).build();              driver = new FirefoxDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         Assertions.assertTrue(fileContent.contains("geckodriver	INFO	Listening on"));       }            @Test       public void logsToConsole() throws IOException {         File logLocation = getTempFile("logsToConsole", ".log");         System.setOut(new PrintStream(logLocation));              FirefoxDriverService service =             new GeckoDriverService.Builder().withLogOutput(System.out).build();              driver = new FirefoxDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         Assertions.assertTrue(fileContent.contains("geckodriver	INFO	Listening on"));       }            @Test       public void logsWithLevel() throws IOException {         File logLocation = getTempFile("logsWithLevel", ".log");         System.setProperty(GeckoDriverService.GECKO_DRIVER_LOG_PROPERTY, logLocation.getAbsolutePath());              FirefoxDriverService service =             new GeckoDriverService.Builder().withLogLevel(FirefoxDriverLogLevel.DEBUG).build();              driver = new FirefoxDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         Assertions.assertTrue(fileContent.contains("Marionette\tDEBUG"));       }            @Test       public void stopsTruncatingLogs() throws IOException {         File logLocation = getTempFile("geckodriver-", "log");         System.setProperty(GeckoDriverService.GECKO_DRIVER_LOG_PROPERTY, logLocation.getAbsolutePath());         System.setProperty(             GeckoDriverService.GECKO_DRIVER_LOG_LEVEL_PROPERTY, FirefoxDriverLogLevel.DEBUG.toString());              FirefoxDriverService service =             new GeckoDriverService.Builder().withTruncatedLogs(false).build();              driver = new FirefoxDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         Assertions.assertFalse(fileContent.contains(" ... "));       }            @Test       public void setProfileLocation() {         File profileDirectory = getTempDirectory("profile-");         FirefoxDriverService service =             new GeckoDriverService.Builder().withProfileRoot(profileDirectory).build();              driver = new FirefoxDriver(service);              String location = (String) driver.getCapabilities().getCapability("moz:profile");         Assertions.assertTrue(location.contains(profileDirectory.getAbsolutePath()));       }                 @Test       public void installAddon() {         driver = startFirefoxDriver();         Path xpiPath = Paths.get("src/test/resources/extensions/selenium-example.xpi");              driver.installExtension(xpiPath);              driver.get("https://www.selenium.dev/selenium/web/blank.html");         WebElement injected = driver.findElement(By.id("webextensions-selenium-example"));         Assertions.assertEquals(             "Content injected by webextensions-selenium-example", injected.getText());       }                 @Test       public void uninstallAddon() {         driver = startFirefoxDriver();         Path xpiPath = Paths.get("src/test/resources/extensions/selenium-example.xpi");         String id = driver.installExtension(xpiPath);              driver.uninstallExtension(id);              driver.get("https://www.selenium.dev/selenium/web/blank.html");         Assertions.assertEquals(driver.findElements(By.id("webextensions-selenium-example")).size(), 0);       }                 @Test       public void installUnsignedAddonPath() {         driver = startFirefoxDriver();         Path path = Paths.get("src/test/resources/extensions/selenium-example");              driver.installExtension(path, true);              driver.get("https://www.selenium.dev/selenium/web/blank.html");         WebElement injected = getLocatedElement(driver, By.id("webextensions-selenium-example"));         Assertions.assertEquals(             "Content injected by webextensions-selenium-example", injected.getText());       }            private Path getFirefoxLocation() {         FirefoxOptions options = new FirefoxOptions();         options.setBrowserVersion("stable");         DriverFinder finder = new DriverFinder(GeckoDriverService.createDefaultService(), options);         return Path.of(finder.getBrowserPath());       }            @Test       public void fullPageScreenshot() throws Exception {         driver = startFirefoxDriver();              driver.get("https://www.selenium.dev");              File screenshot = driver.getFullPageScreenshotAs(OutputType.FILE);              File targetFile = new File("full_page_screenshot.png");         Files.move(screenshot.toPath(), targetFile.toPath());              // Verify the screenshot file exists         Assertions.assertTrue(targetFile.exists(), "The full page screenshot file should exist");         Files.deleteIfExists(targetFile.toPath());              driver.quit();       }            @Test       public void setContext() {         driver = startFirefoxDriver(new FirefoxOptions().addArguments("-remote-allow-system-access"));              ((HasContext) driver).setContext(FirefoxCommandContext.CHROME);         driver.executeScript("console.log('Inside Chrome context');");              // Verify the context is back to "content"         Assertions.assertEquals(                 FirefoxCommandContext.CHROME, ((HasContext) driver).getContext(),                 "The context should be 'chrome'"         );              driver.quit();       }            @Test       public void firefoxProfile() {         FirefoxProfile profile = new FirefoxProfile();         FirefoxOptions options = new FirefoxOptions();         profile.setPreference("javascript.enabled", "False");         options.setProfile(profile);              driver = new FirefoxDriver(options);              driver.quit();       }     }     

**Note** : Java also allows setting log level by System Property:   Property key: `GeckoDriverService.GECKO_DRIVER_PROFILE_ROOT`   Property value: String representing path to profile root directory                   service = webdriver.FirefoxService(service_args=['--profile-root', temp_dir])

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/python/tests/browsers/test_firefox.py#L81)

##### examples/python/tests/browsers/test\_firefox.py

Copy  Close               import os     import subprocess     import sys          import pytest     from selenium import webdriver               def test_basic_options():         options = webdriver.FirefoxOptions()         driver = webdriver.Firefox(options=options)              driver.quit()               def test_arguments():         options = webdriver.FirefoxOptions()              options.add_argument("-headless")              driver = webdriver.Firefox(options=options)         driver.quit()               def test_set_browser_location(firefox_bin):         options = webdriver.FirefoxOptions()              options.binary_location = firefox_bin              driver = webdriver.Firefox(options=options)              driver.quit()               def test_log_to_file(log_path):         service = webdriver.FirefoxService(log_output=log_path, service_args=['--log', 'debug'])              driver = webdriver.Firefox(service=service)         driver.get("https://www.selenium.dev")              with open(log_path, 'r') as fp:             assert "geckodriver	INFO	Listening on" in fp.readline()              driver.quit()               def test_log_to_stdout(capfd):         service = webdriver.FirefoxService(log_output=subprocess.STDOUT)              driver = webdriver.Firefox(service=service)              out, err = capfd.readouterr()         assert "geckodriver	INFO	Listening on" in out              driver.quit()               def test_log_level(log_path):         service = webdriver.FirefoxService(log_output=log_path, service_args=['--log', 'debug'])              driver = webdriver.Firefox(service=service)              with open(log_path, 'r') as f:             assert '\tDEBUG' in f.read()              driver.quit()               def test_log_truncation(log_path):         service = webdriver.FirefoxService(service_args=['--log-no-truncate', '--log', 'debug'], log_output=log_path)              driver = webdriver.Firefox(service=service)              with open(log_path, 'r') as f:             assert ' ... ' not in f.read()              driver.quit()               def test_profile_location(temp_dir):         service = webdriver.FirefoxService(service_args=['--profile-root', temp_dir])              driver = webdriver.Firefox(service=service)         profile_name = driver.capabilities.get('moz:profile').replace('\\', '/').split('/')[-1]              assert profile_name in os.listdir(temp_dir)              driver.quit()               def test_install_addon(firefox_driver, addon_path_xpi):         driver = firefox_driver              driver.install_addon(addon_path_xpi)              driver.get("https://www.selenium.dev/selenium/web/blank.html")         injected = driver.find_element(webdriver.common.by.By.ID, "webextensions-selenium-example")              assert injected.text == "Content injected by webextensions-selenium-example"               def test_uninstall_addon(firefox_driver, addon_path_xpi):         driver = firefox_driver              id = driver.install_addon(addon_path_xpi)         driver.uninstall_addon(id)              driver.get("https://www.selenium.dev/selenium/web/blank.html")         assert len(driver.find_elements(webdriver.common.by.By.ID, "webextensions-selenium-example")) == 0               def test_install_unsigned_addon_directory(firefox_driver, addon_path_dir):         driver = firefox_driver              driver.install_addon(addon_path_dir, temporary=True)              driver.get("https://www.selenium.dev/selenium/web/blank.html")         injected = driver.find_element(webdriver.common.by.By.ID, "webextensions-selenium-example")              assert injected.text == "Content injected by webextensions-selenium-example"               def test_install_unsigned_addon_directory_slash(firefox_driver, addon_path_dir_slash):         driver = firefox_driver              driver.install_addon(addon_path_dir_slash, temporary=True)              driver.get("https://www.selenium.dev/selenium/web/blank.html")         injected = driver.find_element(webdriver.common.by.By.ID, "webextensions-selenium-example")              assert injected.text == "Content injected by webextensions-selenium-example"               def test_full_page_screenshot(firefox_driver):         driver = firefox_driver              driver.get("https://www.selenium.dev")              driver.save_full_page_screenshot("full_page_screenshot.png")              assert os.path.exists("full_page_screenshot.png")              driver.quit()               def test_set_context():         options = webdriver.FirefoxOptions()         options.add_argument("-remote-allow-system-access")         driver = webdriver.Firefox(options=options)              with driver.context(driver.CONTEXT_CHROME):             driver.execute_script("console.log('Inside Chrome context');")              # Check if the context is back to content         assert driver.execute("GET_CONTEXT")["value"] == "content"         driver.quit()               def test_firefox_profile():         from selenium.webdriver.firefox.options import Options         from selenium.webdriver.firefox.firefox_profile import FirefoxProfile              options = Options()         firefox_profile = FirefoxProfile()         firefox_profile.set_preference("javascript.enabled", False)         options.profile = firefox_profile              driver = webdriver.Firefox(options=options)              driver.quit()     

[Implementation Missing](https://github.com/SeleniumHQ/selenium)

[Selenium v4.8](https://github.com/SeleniumHQ/selenium/releases/tag/selenium-4.8.0)                     service.args += ['--profile-root', root_directory]

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/ruby/spec/browsers/firefox_spec.rb#L81)

##### examples/ruby/spec/browsers/firefox\_spec.rb

Copy  Close               # frozen_string_literal: true          require 'spec_helper'          RSpec.describe 'Firefox' do       describe 'Options' do         let(:firefox_location) { driver_finder && ENV.fetch('FIREFOX_BIN', nil) }              it 'basic options' do           options = Selenium::WebDriver::Options.firefox           @driver = Selenium::WebDriver.for :firefox, options: options         end              it 'add arguments' do           options = Selenium::WebDriver::Options.firefox                options.args << '-headless'                @driver = Selenium::WebDriver.for :firefox, options: options         end              it 'sets location of binary' do           options = Selenium::WebDriver::Options.firefox                options.binary = firefox_location                @driver = Selenium::WebDriver.for :firefox, options: options         end       end            describe 'Service' do         let(:file_name) { Tempfile.new('geckodriver').path }         let(:root_directory) { Dir.mktmpdir }              after do           FileUtils.rm_f(file_name)           FileUtils.rm_rf(root_directory)         end              it 'logs to file' do           service = Selenium::WebDriver::Service.firefox                service.log = file_name                @driver = Selenium::WebDriver.for :firefox, service: service           expect(File.readlines(file_name).first).to include("geckodriver\tINFO\tListening on")         end              it 'logs to console' do           service = Selenium::WebDriver::Service.firefox                service.log = $stdout                expect {             @driver = Selenium::WebDriver.for :firefox, service: service           }.to output(/geckodriver	INFO	Listening on/).to_stdout_from_any_process         end              it 'sets log level' do           service = Selenium::WebDriver::Service.firefox           service.log = file_name                service.args += %w[--log debug]                @driver = Selenium::WebDriver.for :firefox, service: service           expect(File.readlines(file_name).grep(/Marionette	DEBUG/).any?).to eq true         end              it 'stops truncating log lines' do           service = Selenium::WebDriver::Service.firefox(log: file_name, args: %w[--log debug])                service.args << '--log-no-truncate'                @driver = Selenium::WebDriver.for :firefox, service: service           expect(File.readlines(file_name).grep(/ \.\.\. /).any?).to eq false         end              it 'sets default profile location' do           service = Selenium::WebDriver::Service.firefox                service.args += ['--profile-root', root_directory]                @driver = Selenium::WebDriver.for :firefox, service: service           profile_location = Dir.new(@driver.capabilities['moz:profile'])           expect(profile_location.path.gsub('\\', '/')).to include(root_directory)         end       end            describe 'Features' do         let(:driver) { start_firefox }              it 'installs addon' do           extension_file_path = File.expand_path('../spec_support/extensions/webextensions-selenium-example.xpi', __dir__)                driver.install_addon(extension_file_path)                driver.get 'https://www.selenium.dev/selenium/web/blank.html'           injected = driver.find_element(id: 'webextensions-selenium-example')           expect(injected.text).to eq 'Content injected by webextensions-selenium-example'         end              it 'uninstalls addon' do           extension_file_path = File.expand_path('../spec_support/extensions/webextensions-selenium-example.xpi', __dir__)           extension_id = driver.install_addon(extension_file_path)                driver.uninstall_addon(extension_id)                driver.get 'https://www.selenium.dev/selenium/web/blank.html'           expect(driver.find_elements(id: 'webextensions-selenium-example')).to be_empty         end              it 'installs unsigned addon' do           extension_dir_path = File.expand_path('../spec_support/extensions/webextensions-selenium-example/', __dir__)                driver.install_addon(extension_dir_path, true)                driver.navigate.to 'https://www.selenium.dev/selenium/web/blank.html'           injected = driver.find_element(id: 'webextensions-selenium-example')           expect(injected.text).to eq 'Content injected by webextensions-selenium-example'         end              it 'takes full page screenshot' do           driver.navigate.to 'https://www.selenium.dev/selenium/web/blank.html'           Dir.mktmpdir('screenshot_test') do |dir|             screenshot = driver.save_full_page_screenshot(File.join(dir, 'screenshot.png'))                  expect(screenshot).to be_a File           end         end              it 'sets the context' do           driver.context = 'content'           expect(driver.context).to eq 'content'         end       end            describe 'Profile' do         it 'creates a new profile' do           profile = Selenium::WebDriver::Firefox::Profile.new           profile['browser.download.dir'] = '/tmp/webdriver-downloads'           options = Selenium::WebDriver::Firefox::Options.new(profile: profile)           expect(options.profile).to eq(profile)         end       end            def driver_finder         options = Selenium::WebDriver::Options.firefox(browser_version: 'stable')         service = Selenium::WebDriver::Service.firefox         finder = Selenium::WebDriver::DriverFinder.new(options, service)         ENV['GECKODRIVER_BIN'] = finder.driver_path         ENV['FIREFOX_BIN'] = finder.browser_path       end     end     

[Add Example](https://www.selenium.dev/documentation/about/contributing/#creating-examples)

[Add Example](https://www.selenium.dev/documentation/about/contributing/#creating-examples)

## Special Features

Some browsers have implemented additional features that are unique to them.

### Add-ons

Unlike Chrome, Firefox extensions are not added as part of capabilities as mentioned in [this issue](https://github.com/mozilla/geckodriver/issues/1476), they are created after starting the driver.

The following examples are for local webdrivers. For remote webdrivers, please refer to the [Remote WebDriver](https://www.selenium.dev/documentation/webdriver/drivers/remote_webdriver/) page.

#### Installation

A signed xpi file you would get from [Mozilla Addon page](https://addons.mozilla.org/en-US/firefox/)

  * Java   * Python   * CSharp   * Ruby   * JavaScript   * Kotlin

                  driver.installExtension(xpiPath);

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk//examples/java/src/test/java/dev/selenium/browsers/FirefoxTest.java#L133)

##### /examples/java/src/test/java/dev/selenium/browsers/FirefoxTest.java

Copy  Close               package dev.selenium.browsers;          import dev.selenium.BaseTest;     import java.io.File;     import java.io.IOException;     import java.io.PrintStream;     import java.nio.file.Files;     import java.nio.file.Path;     import java.nio.file.Paths;     import org.junit.jupiter.api.AfterEach;     import org.junit.jupiter.api.Assertions;     import org.junit.jupiter.api.Test;     import org.junit.jupiter.api.condition.DisabledOnOs;     import org.junit.jupiter.api.condition.OS;     import org.openqa.selenium.By;     import org.openqa.selenium.OutputType;     import org.openqa.selenium.WebElement;     import org.openqa.selenium.firefox.*;     import org.openqa.selenium.remote.service.DriverFinder;                              public class FirefoxTest extends BaseTest {       private FirefoxDriver driver;            @AfterEach       public void clearProperties() {         System.clearProperty(GeckoDriverService.GECKO_DRIVER_LOG_PROPERTY);         System.clearProperty(GeckoDriverService.GECKO_DRIVER_LOG_LEVEL_PROPERTY);driver.quit();       }            @Test       public void basicOptions() {         FirefoxOptions options = new FirefoxOptions();         driver = new FirefoxDriver(options);       }            @Test       public void arguments() {         FirefoxOptions options = new FirefoxOptions();              options.addArguments("-headless");              driver = new FirefoxDriver(options);       }            @Test       @DisabledOnOs(OS.WINDOWS)       public void setBrowserLocation() {         FirefoxOptions options = new FirefoxOptions();              options.setBinary(getFirefoxLocation());              driver = new FirefoxDriver(options);       }            @Test       public void logsToFile() throws IOException {         File logLocation = getTempFile("logsToFile", ".log");         FirefoxDriverService service =             new GeckoDriverService.Builder().withLogFile(logLocation).build();              driver = new FirefoxDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         Assertions.assertTrue(fileContent.contains("geckodriver	INFO	Listening on"));       }            @Test       public void logsToConsole() throws IOException {         File logLocation = getTempFile("logsToConsole", ".log");         System.setOut(new PrintStream(logLocation));              FirefoxDriverService service =             new GeckoDriverService.Builder().withLogOutput(System.out).build();              driver = new FirefoxDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         Assertions.assertTrue(fileContent.contains("geckodriver	INFO	Listening on"));       }            @Test       public void logsWithLevel() throws IOException {         File logLocation = getTempFile("logsWithLevel", ".log");         System.setProperty(GeckoDriverService.GECKO_DRIVER_LOG_PROPERTY, logLocation.getAbsolutePath());              FirefoxDriverService service =             new GeckoDriverService.Builder().withLogLevel(FirefoxDriverLogLevel.DEBUG).build();              driver = new FirefoxDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         Assertions.assertTrue(fileContent.contains("Marionette\tDEBUG"));       }            @Test       public void stopsTruncatingLogs() throws IOException {         File logLocation = getTempFile("geckodriver-", "log");         System.setProperty(GeckoDriverService.GECKO_DRIVER_LOG_PROPERTY, logLocation.getAbsolutePath());         System.setProperty(             GeckoDriverService.GECKO_DRIVER_LOG_LEVEL_PROPERTY, FirefoxDriverLogLevel.DEBUG.toString());              FirefoxDriverService service =             new GeckoDriverService.Builder().withTruncatedLogs(false).build();              driver = new FirefoxDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         Assertions.assertFalse(fileContent.contains(" ... "));       }            @Test       public void setProfileLocation() {         File profileDirectory = getTempDirectory("profile-");         FirefoxDriverService service =             new GeckoDriverService.Builder().withProfileRoot(profileDirectory).build();              driver = new FirefoxDriver(service);              String location = (String) driver.getCapabilities().getCapability("moz:profile");         Assertions.assertTrue(location.contains(profileDirectory.getAbsolutePath()));       }                 @Test       public void installAddon() {         driver = startFirefoxDriver();         Path xpiPath = Paths.get("src/test/resources/extensions/selenium-example.xpi");              driver.installExtension(xpiPath);              driver.get("https://www.selenium.dev/selenium/web/blank.html");         WebElement injected = driver.findElement(By.id("webextensions-selenium-example"));         Assertions.assertEquals(             "Content injected by webextensions-selenium-example", injected.getText());       }                 @Test       public void uninstallAddon() {         driver = startFirefoxDriver();         Path xpiPath = Paths.get("src/test/resources/extensions/selenium-example.xpi");         String id = driver.installExtension(xpiPath);              driver.uninstallExtension(id);              driver.get("https://www.selenium.dev/selenium/web/blank.html");         Assertions.assertEquals(driver.findElements(By.id("webextensions-selenium-example")).size(), 0);       }                 @Test       public void installUnsignedAddonPath() {         driver = startFirefoxDriver();         Path path = Paths.get("src/test/resources/extensions/selenium-example");              driver.installExtension(path, true);              driver.get("https://www.selenium.dev/selenium/web/blank.html");         WebElement injected = getLocatedElement(driver, By.id("webextensions-selenium-example"));         Assertions.assertEquals(             "Content injected by webextensions-selenium-example", injected.getText());       }            private Path getFirefoxLocation() {         FirefoxOptions options = new FirefoxOptions();         options.setBrowserVersion("stable");         DriverFinder finder = new DriverFinder(GeckoDriverService.createDefaultService(), options);         return Path.of(finder.getBrowserPath());       }            @Test       public void fullPageScreenshot() throws Exception {         driver = startFirefoxDriver();              driver.get("https://www.selenium.dev");              File screenshot = driver.getFullPageScreenshotAs(OutputType.FILE);              File targetFile = new File("full_page_screenshot.png");         Files.move(screenshot.toPath(), targetFile.toPath());              // Verify the screenshot file exists         Assertions.assertTrue(targetFile.exists(), "The full page screenshot file should exist");         Files.deleteIfExists(targetFile.toPath());              driver.quit();       }            @Test       public void setContext() {         driver = startFirefoxDriver(new FirefoxOptions().addArguments("-remote-allow-system-access"));              ((HasContext) driver).setContext(FirefoxCommandContext.CHROME);         driver.executeScript("console.log('Inside Chrome context');");              // Verify the context is back to "content"         Assertions.assertEquals(                 FirefoxCommandContext.CHROME, ((HasContext) driver).getContext(),                 "The context should be 'chrome'"         );              driver.quit();       }            @Test       public void firefoxProfile() {         FirefoxProfile profile = new FirefoxProfile();         FirefoxOptions options = new FirefoxOptions();         profile.setPreference("javascript.enabled", "False");         options.setProfile(profile);              driver = new FirefoxDriver(options);              driver.quit();       }     }                        driver.install_addon(addon_path_xpi)

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk//examples/python/tests/browsers/test_firefox.py#L94)

##### /examples/python/tests/browsers/test\_firefox.py

Copy  Close               import os     import subprocess     import sys          import pytest     from selenium import webdriver               def test_basic_options():         options = webdriver.FirefoxOptions()         driver = webdriver.Firefox(options=options)              driver.quit()               def test_arguments():         options = webdriver.FirefoxOptions()              options.add_argument("-headless")              driver = webdriver.Firefox(options=options)         driver.quit()               def test_set_browser_location(firefox_bin):         options = webdriver.FirefoxOptions()              options.binary_location = firefox_bin              driver = webdriver.Firefox(options=options)              driver.quit()               def test_log_to_file(log_path):         service = webdriver.FirefoxService(log_output=log_path, service_args=['--log', 'debug'])              driver = webdriver.Firefox(service=service)         driver.get("https://www.selenium.dev")              with open(log_path, 'r') as fp:             assert "geckodriver	INFO	Listening on" in fp.readline()              driver.quit()               def test_log_to_stdout(capfd):         service = webdriver.FirefoxService(log_output=subprocess.STDOUT)              driver = webdriver.Firefox(service=service)              out, err = capfd.readouterr()         assert "geckodriver	INFO	Listening on" in out              driver.quit()               def test_log_level(log_path):         service = webdriver.FirefoxService(log_output=log_path, service_args=['--log', 'debug'])              driver = webdriver.Firefox(service=service)              with open(log_path, 'r') as f:             assert '\tDEBUG' in f.read()              driver.quit()               def test_log_truncation(log_path):         service = webdriver.FirefoxService(service_args=['--log-no-truncate', '--log', 'debug'], log_output=log_path)              driver = webdriver.Firefox(service=service)              with open(log_path, 'r') as f:             assert ' ... ' not in f.read()              driver.quit()               def test_profile_location(temp_dir):         service = webdriver.FirefoxService(service_args=['--profile-root', temp_dir])              driver = webdriver.Firefox(service=service)         profile_name = driver.capabilities.get('moz:profile').replace('\\', '/').split('/')[-1]              assert profile_name in os.listdir(temp_dir)              driver.quit()               def test_install_addon(firefox_driver, addon_path_xpi):         driver = firefox_driver              driver.install_addon(addon_path_xpi)              driver.get("https://www.selenium.dev/selenium/web/blank.html")         injected = driver.find_element(webdriver.common.by.By.ID, "webextensions-selenium-example")              assert injected.text == "Content injected by webextensions-selenium-example"               def test_uninstall_addon(firefox_driver, addon_path_xpi):         driver = firefox_driver              id = driver.install_addon(addon_path_xpi)         driver.uninstall_addon(id)              driver.get("https://www.selenium.dev/selenium/web/blank.html")         assert len(driver.find_elements(webdriver.common.by.By.ID, "webextensions-selenium-example")) == 0               def test_install_unsigned_addon_directory(firefox_driver, addon_path_dir):         driver = firefox_driver              driver.install_addon(addon_path_dir, temporary=True)              driver.get("https://www.selenium.dev/selenium/web/blank.html")         injected = driver.find_element(webdriver.common.by.By.ID, "webextensions-selenium-example")              assert injected.text == "Content injected by webextensions-selenium-example"               def test_install_unsigned_addon_directory_slash(firefox_driver, addon_path_dir_slash):         driver = firefox_driver              driver.install_addon(addon_path_dir_slash, temporary=True)              driver.get("https://www.selenium.dev/selenium/web/blank.html")         injected = driver.find_element(webdriver.common.by.By.ID, "webextensions-selenium-example")              assert injected.text == "Content injected by webextensions-selenium-example"               def test_full_page_screenshot(firefox_driver):         driver = firefox_driver              driver.get("https://www.selenium.dev")              driver.save_full_page_screenshot("full_page_screenshot.png")              assert os.path.exists("full_page_screenshot.png")              driver.quit()               def test_set_context():         options = webdriver.FirefoxOptions()         options.add_argument("-remote-allow-system-access")         driver = webdriver.Firefox(options=options)              with driver.context(driver.CONTEXT_CHROME):             driver.execute_script("console.log('Inside Chrome context');")              # Check if the context is back to content         assert driver.execute("GET_CONTEXT")["value"] == "content"         driver.quit()               def test_firefox_profile():         from selenium.webdriver.firefox.options import Options         from selenium.webdriver.firefox.firefox_profile import FirefoxProfile              options = Options()         firefox_profile = FirefoxProfile()         firefox_profile.set_preference("javascript.enabled", False)         options.profile = firefox_profile              driver = webdriver.Firefox(options=options)              driver.quit()                                driver.InstallAddOnFromFile(Path.GetFullPath(extensionFilePath));

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk//examples/dotnet/SeleniumDocs/Browsers/FirefoxTest.cs#L137)

##### /examples/dotnet/SeleniumDocs/Browsers/FirefoxTest.cs

Copy  Close               using System;     using System.IO;     using System.Linq;     using Microsoft.VisualStudio.TestTools.UnitTesting;     using OpenQA.Selenium;     using OpenQA.Selenium.Firefox;          namespace SeleniumDocs.Browsers     {         [TestClass]         public class FirefoxTest         {             private FirefoxDriver driver;             private string _logLocation;             private string _tempPath;                  [TestCleanup]             public void Cleanup()             {                 if (_logLocation != null && File.Exists(_logLocation))                 {                     File.Delete(_logLocation);                 }                 if (_tempPath != null && File.Exists(_tempPath))                 {                     File.Delete(_tempPath);                 }                 driver.Quit();             }                  [TestMethod]             public void BasicOptions()             {                 var options = new FirefoxOptions();                 driver = new FirefoxDriver(options);             }                  [TestMethod]             public void Arguments()             {                 var options = new FirefoxOptions();                      options.AddArgument("-headless");                      driver = new FirefoxDriver(options);             }                  [TestMethod]             public void SetBinary()             {                 var options = new FirefoxOptions();                      options.BinaryLocation = GetFirefoxLocation();                      driver = new FirefoxDriver(options);             }                  [TestMethod]             [Ignore("Not implemented")]             public void LogsToFile()             {                 var service = FirefoxDriverService.CreateDefaultService();                 //service.LogFile = _logLocation                      driver = new FirefoxDriver(service);                 var lines = File.ReadLines(GetLogLocation());                 Assert.IsNotNull(lines.FirstOrDefault(line => line.Contains("geckodriver	INFO	Listening on")));             }                  [TestMethod]             [Ignore("Not implemented")]             public void LogsToConsole()             {                 var stringWriter = new StringWriter();                 var originalOutput = Console.Out;                 Console.SetOut(stringWriter);                      var service = FirefoxDriverService.CreateDefaultService();                 //service.LogToConsole = true;                      driver = new FirefoxDriver(service);                 Assert.IsTrue(stringWriter.ToString().Contains("geckodriver	INFO	Listening on"));                 Console.SetOut(originalOutput);                 stringWriter.Dispose();             }                  [TestMethod]             [Ignore("You can set it, just can't see it")]             public void LogsLevel()             {                 var service = FirefoxDriverService.CreateDefaultService();                 //service.LogFile = _logLocation                      service.LogLevel = FirefoxDriverLogLevel.Debug;                      driver = new FirefoxDriver(service);                 var lines = File.ReadLines(GetLogLocation());                 Assert.IsNotNull(lines.FirstOrDefault(line => line.Contains("Marionette\tDEBUG")));             }                  [TestMethod]             [Ignore("Not implemented")]             public void StopsTruncatingLogs()             {                 var service = FirefoxDriverService.CreateDefaultService();                 //service.TruncateLogs = false;                      service.LogLevel = FirefoxDriverLogLevel.Debug;                      driver = new FirefoxDriver(service);                 var lines = File.ReadLines(GetLogLocation());                 Assert.IsNull(lines.FirstOrDefault(line => line.Contains(" ... ")));             }                  [TestMethod]             [Ignore("Not implemented")]             public void SetProfileLocation()             {                 var service = FirefoxDriverService.CreateDefaultService();                 // service.ProfileRoot = GetTempDirectory();                      driver = new FirefoxDriver(service);                      string profile = (string)driver.Capabilities.GetCapability("moz:profile");                 string[] directories = profile.Split("/");                 var dirName = directories.Last();                 Assert.AreEqual(GetTempDirectory() + "/" + dirName, profile);             }                  [TestMethod]             public void InstallAddon()             {                 SetWaitingDriver();                 string baseDir = AppDomain.CurrentDomain.BaseDirectory;                 string extensionFilePath = Path.Combine(baseDir, "../../../Extensions/webextensions-selenium-example.xpi");                      driver.InstallAddOnFromFile(Path.GetFullPath(extensionFilePath));                      driver.Url = "https://www.selenium.dev/selenium/web/blank.html";                 IWebElement injected = driver.FindElement(By.Id("webextensions-selenium-example"));                 Assert.AreEqual("Content injected by webextensions-selenium-example", injected.Text);             }                  [TestMethod]             public void UnInstallAddon()             {                 driver = new FirefoxDriver();                 string baseDir = AppDomain.CurrentDomain.BaseDirectory;                 string extensionFilePath = Path.Combine(baseDir, "../../../Extensions/webextensions-selenium-example.xpi");                 string extensionId = driver.InstallAddOnFromFile(Path.GetFullPath(extensionFilePath));                      driver.UninstallAddOn(extensionId);                      driver.Url = "https://www.selenium.dev/selenium/web/blank.html";                 Assert.AreEqual(driver.FindElements(By.Id("webextensions-selenium-example")).Count, 0);             }                  [TestMethod]             public void InstallUnsignedAddon()             {                 SetWaitingDriver();                 string baseDir = AppDomain.CurrentDomain.BaseDirectory;                 string extensionDirPath = Path.Combine(baseDir, "../../../Extensions/webextensions-selenium-example/");                      driver.InstallAddOnFromDirectory(Path.GetFullPath(extensionDirPath), true);                      driver.Url = "https://www.selenium.dev/selenium/web/blank.html";                 IWebElement injected = driver.FindElement(By.Id("webextensions-selenium-example"));                 Assert.AreEqual("Content injected by webextensions-selenium-example", injected.Text);             }                          private string GetLogLocation()             {                 if (_logLocation != null && !File.Exists(_logLocation))                 {                     _logLocation = Path.GetTempFileName();                 }                      return _logLocation;             }                  private string GetTempDirectory()             {                 if (_tempPath != null && !File.Exists(_tempPath))                 {                     _tempPath = Path.GetTempPath();                 }                      return _tempPath;             }                  private void SetWaitingDriver()             {                 driver = new FirefoxDriver();                 driver.Manage().Timeouts().ImplicitWait = TimeSpan.FromSeconds(2);             }                  private static string GetFirefoxLocation()             {                 var options = new FirefoxOptions()                 {                     BrowserVersion = "stable"                 };                 return new DriverFinder(options).GetBrowserPath();             }         }     }                     driver.install_addon(extension_file_path)

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk//examples/ruby/spec/browsers/firefox_spec.rb#L95)

##### /examples/ruby/spec/browsers/firefox\_spec.rb

Copy  Close               # frozen_string_literal: true          require 'spec_helper'          RSpec.describe 'Firefox' do       describe 'Options' do         let(:firefox_location) { driver_finder && ENV.fetch('FIREFOX_BIN', nil) }              it 'basic options' do           options = Selenium::WebDriver::Options.firefox           @driver = Selenium::WebDriver.for :firefox, options: options         end              it 'add arguments' do           options = Selenium::WebDriver::Options.firefox                options.args << '-headless'                @driver = Selenium::WebDriver.for :firefox, options: options         end              it 'sets location of binary' do           options = Selenium::WebDriver::Options.firefox                options.binary = firefox_location                @driver = Selenium::WebDriver.for :firefox, options: options         end       end            describe 'Service' do         let(:file_name) { Tempfile.new('geckodriver').path }         let(:root_directory) { Dir.mktmpdir }              after do           FileUtils.rm_f(file_name)           FileUtils.rm_rf(root_directory)         end              it 'logs to file' do           service = Selenium::WebDriver::Service.firefox                service.log = file_name                @driver = Selenium::WebDriver.for :firefox, service: service           expect(File.readlines(file_name).first).to include("geckodriver\tINFO\tListening on")         end              it 'logs to console' do           service = Selenium::WebDriver::Service.firefox                service.log = $stdout                expect {             @driver = Selenium::WebDriver.for :firefox, service: service           }.to output(/geckodriver	INFO	Listening on/).to_stdout_from_any_process         end              it 'sets log level' do           service = Selenium::WebDriver::Service.firefox           service.log = file_name                service.args += %w[--log debug]                @driver = Selenium::WebDriver.for :firefox, service: service           expect(File.readlines(file_name).grep(/Marionette	DEBUG/).any?).to eq true         end              it 'stops truncating log lines' do           service = Selenium::WebDriver::Service.firefox(log: file_name, args: %w[--log debug])                service.args << '--log-no-truncate'                @driver = Selenium::WebDriver.for :firefox, service: service           expect(File.readlines(file_name).grep(/ \.\.\. /).any?).to eq false         end              it 'sets default profile location' do           service = Selenium::WebDriver::Service.firefox                service.args += ['--profile-root', root_directory]                @driver = Selenium::WebDriver.for :firefox, service: service           profile_location = Dir.new(@driver.capabilities['moz:profile'])           expect(profile_location.path.gsub('\\', '/')).to include(root_directory)         end       end            describe 'Features' do         let(:driver) { start_firefox }              it 'installs addon' do           extension_file_path = File.expand_path('../spec_support/extensions/webextensions-selenium-example.xpi', __dir__)                driver.install_addon(extension_file_path)                driver.get 'https://www.selenium.dev/selenium/web/blank.html'           injected = driver.find_element(id: 'webextensions-selenium-example')           expect(injected.text).to eq 'Content injected by webextensions-selenium-example'         end              it 'uninstalls addon' do           extension_file_path = File.expand_path('../spec_support/extensions/webextensions-selenium-example.xpi', __dir__)           extension_id = driver.install_addon(extension_file_path)                driver.uninstall_addon(extension_id)                driver.get 'https://www.selenium.dev/selenium/web/blank.html'           expect(driver.find_elements(id: 'webextensions-selenium-example')).to be_empty         end              it 'installs unsigned addon' do           extension_dir_path = File.expand_path('../spec_support/extensions/webextensions-selenium-example/', __dir__)                driver.install_addon(extension_dir_path, true)                driver.navigate.to 'https://www.selenium.dev/selenium/web/blank.html'           injected = driver.find_element(id: 'webextensions-selenium-example')           expect(injected.text).to eq 'Content injected by webextensions-selenium-example'         end              it 'takes full page screenshot' do           driver.navigate.to 'https://www.selenium.dev/selenium/web/blank.html'           Dir.mktmpdir('screenshot_test') do |dir|             screenshot = driver.save_full_page_screenshot(File.join(dir, 'screenshot.png'))                  expect(screenshot).to be_a File           end         end              it 'sets the context' do           driver.context = 'content'           expect(driver.context).to eq 'content'         end       end            describe 'Profile' do         it 'creates a new profile' do           profile = Selenium::WebDriver::Firefox::Profile.new           profile['browser.download.dir'] = '/tmp/webdriver-downloads'           options = Selenium::WebDriver::Firefox::Options.new(profile: profile)           expect(options.profile).to eq(profile)         end       end            def driver_finder         options = Selenium::WebDriver::Options.firefox(browser_version: 'stable')         service = Selenium::WebDriver::Service.firefox         finder = Selenium::WebDriver::DriverFinder.new(options, service)         ENV['GECKODRIVER_BIN'] = finder.driver_path         ENV['FIREFOX_BIN'] = finder.browser_path       end     end                        let id = await driver.installAddon(xpiPath);

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk//examples/javascript/test/browser/firefoxSpecificFunctionalities.spec.js#L25)

##### /examples/javascript/test/browser/firefoxSpecificFunctionalities.spec.js

Copy  Close               const {Browser, By, Builder} = require('selenium-webdriver');     const Firefox = require('selenium-webdriver/firefox');     const options = new Firefox.Options();     const path = require('path');     const assert = require("assert");               describe('Should be able to Test Command line arguments', function () {       it('headless', async function () {         let driver = new Builder()           .forBrowser(Browser.FIREFOX)           .setFirefoxOptions(options.addArguments('--headless'))           .build();              await driver.get('https://www.selenium.dev/selenium/web/blank.html');         await driver.quit();       });            it('Should be able to add extension', async function () {              const xpiPath = path.resolve('./test/resources/extensions/selenium-example.xpi')         let driver = new Builder()           .forBrowser(Browser.FIREFOX)           .build()         let id = await driver.installAddon(xpiPath);         await driver.uninstallAddon(id);                   await driver.get('https://www.selenium.dev/selenium/web/blank.html');         const ele = await driver.findElements(By.id("webextensions-selenium-example"));         assert.equal(ele.length, 0);         await driver.quit();       });            it('Should be able to install unsigned addon', async function () {              const xpiPath = path.resolve('./test/resources/extensions/selenium-example')         let driver = new Builder()           .forBrowser(Browser.FIREFOX)           .build()         let id = await driver.installAddon(xpiPath, true);         await driver.uninstallAddon(id);                   await driver.get('https://www.selenium.dev/selenium/web/blank.html');         const ele = await driver.findElements(By.id("webextensions-selenium-example"));         assert.equal(ele.length, 0);         await driver.quit();       });     });

[Add Example](https://www.selenium.dev/documentation/about/contributing/#creating-examples)

#### Uninstallation

Uninstalling an addon requires knowing its id. The id can be obtained from the return value when installing the add-on.

  * Java   * Python   * CSharp   * Ruby   * JavaScript   * Kotlin

                  driver.uninstallExtension(id);

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk//examples/java/src/test/java/dev/selenium/browsers/FirefoxTest.java#L148)

##### /examples/java/src/test/java/dev/selenium/browsers/FirefoxTest.java

Copy  Close               package dev.selenium.browsers;          import dev.selenium.BaseTest;     import java.io.File;     import java.io.IOException;     import java.io.PrintStream;     import java.nio.file.Files;     import java.nio.file.Path;     import java.nio.file.Paths;     import org.junit.jupiter.api.AfterEach;     import org.junit.jupiter.api.Assertions;     import org.junit.jupiter.api.Test;     import org.junit.jupiter.api.condition.DisabledOnOs;     import org.junit.jupiter.api.condition.OS;     import org.openqa.selenium.By;     import org.openqa.selenium.OutputType;     import org.openqa.selenium.WebElement;     import org.openqa.selenium.firefox.*;     import org.openqa.selenium.remote.service.DriverFinder;                              public class FirefoxTest extends BaseTest {       private FirefoxDriver driver;            @AfterEach       public void clearProperties() {         System.clearProperty(GeckoDriverService.GECKO_DRIVER_LOG_PROPERTY);         System.clearProperty(GeckoDriverService.GECKO_DRIVER_LOG_LEVEL_PROPERTY);driver.quit();       }            @Test       public void basicOptions() {         FirefoxOptions options = new FirefoxOptions();         driver = new FirefoxDriver(options);       }            @Test       public void arguments() {         FirefoxOptions options = new FirefoxOptions();              options.addArguments("-headless");              driver = new FirefoxDriver(options);       }            @Test       @DisabledOnOs(OS.WINDOWS)       public void setBrowserLocation() {         FirefoxOptions options = new FirefoxOptions();              options.setBinary(getFirefoxLocation());              driver = new FirefoxDriver(options);       }            @Test       public void logsToFile() throws IOException {         File logLocation = getTempFile("logsToFile", ".log");         FirefoxDriverService service =             new GeckoDriverService.Builder().withLogFile(logLocation).build();              driver = new FirefoxDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         Assertions.assertTrue(fileContent.contains("geckodriver	INFO	Listening on"));       }            @Test       public void logsToConsole() throws IOException {         File logLocation = getTempFile("logsToConsole", ".log");         System.setOut(new PrintStream(logLocation));              FirefoxDriverService service =             new GeckoDriverService.Builder().withLogOutput(System.out).build();              driver = new FirefoxDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         Assertions.assertTrue(fileContent.contains("geckodriver	INFO	Listening on"));       }            @Test       public void logsWithLevel() throws IOException {         File logLocation = getTempFile("logsWithLevel", ".log");         System.setProperty(GeckoDriverService.GECKO_DRIVER_LOG_PROPERTY, logLocation.getAbsolutePath());              FirefoxDriverService service =             new GeckoDriverService.Builder().withLogLevel(FirefoxDriverLogLevel.DEBUG).build();              driver = new FirefoxDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         Assertions.assertTrue(fileContent.contains("Marionette\tDEBUG"));       }            @Test       public void stopsTruncatingLogs() throws IOException {         File logLocation = getTempFile("geckodriver-", "log");         System.setProperty(GeckoDriverService.GECKO_DRIVER_LOG_PROPERTY, logLocation.getAbsolutePath());         System.setProperty(             GeckoDriverService.GECKO_DRIVER_LOG_LEVEL_PROPERTY, FirefoxDriverLogLevel.DEBUG.toString());              FirefoxDriverService service =             new GeckoDriverService.Builder().withTruncatedLogs(false).build();              driver = new FirefoxDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         Assertions.assertFalse(fileContent.contains(" ... "));       }            @Test       public void setProfileLocation() {         File profileDirectory = getTempDirectory("profile-");         FirefoxDriverService service =             new GeckoDriverService.Builder().withProfileRoot(profileDirectory).build();              driver = new FirefoxDriver(service);              String location = (String) driver.getCapabilities().getCapability("moz:profile");         Assertions.assertTrue(location.contains(profileDirectory.getAbsolutePath()));       }                 @Test       public void installAddon() {         driver = startFirefoxDriver();         Path xpiPath = Paths.get("src/test/resources/extensions/selenium-example.xpi");              driver.installExtension(xpiPath);              driver.get("https://www.selenium.dev/selenium/web/blank.html");         WebElement injected = driver.findElement(By.id("webextensions-selenium-example"));         Assertions.assertEquals(             "Content injected by webextensions-selenium-example", injected.getText());       }                 @Test       public void uninstallAddon() {         driver = startFirefoxDriver();         Path xpiPath = Paths.get("src/test/resources/extensions/selenium-example.xpi");         String id = driver.installExtension(xpiPath);              driver.uninstallExtension(id);              driver.get("https://www.selenium.dev/selenium/web/blank.html");         Assertions.assertEquals(driver.findElements(By.id("webextensions-selenium-example")).size(), 0);       }                 @Test       public void installUnsignedAddonPath() {         driver = startFirefoxDriver();         Path path = Paths.get("src/test/resources/extensions/selenium-example");              driver.installExtension(path, true);              driver.get("https://www.selenium.dev/selenium/web/blank.html");         WebElement injected = getLocatedElement(driver, By.id("webextensions-selenium-example"));         Assertions.assertEquals(             "Content injected by webextensions-selenium-example", injected.getText());       }            private Path getFirefoxLocation() {         FirefoxOptions options = new FirefoxOptions();         options.setBrowserVersion("stable");         DriverFinder finder = new DriverFinder(GeckoDriverService.createDefaultService(), options);         return Path.of(finder.getBrowserPath());       }            @Test       public void fullPageScreenshot() throws Exception {         driver = startFirefoxDriver();              driver.get("https://www.selenium.dev");              File screenshot = driver.getFullPageScreenshotAs(OutputType.FILE);              File targetFile = new File("full_page_screenshot.png");         Files.move(screenshot.toPath(), targetFile.toPath());              // Verify the screenshot file exists         Assertions.assertTrue(targetFile.exists(), "The full page screenshot file should exist");         Files.deleteIfExists(targetFile.toPath());              driver.quit();       }            @Test       public void setContext() {         driver = startFirefoxDriver(new FirefoxOptions().addArguments("-remote-allow-system-access"));              ((HasContext) driver).setContext(FirefoxCommandContext.CHROME);         driver.executeScript("console.log('Inside Chrome context');");              // Verify the context is back to "content"         Assertions.assertEquals(                 FirefoxCommandContext.CHROME, ((HasContext) driver).getContext(),                 "The context should be 'chrome'"         );              driver.quit();       }            @Test       public void firefoxProfile() {         FirefoxProfile profile = new FirefoxProfile();         FirefoxOptions options = new FirefoxOptions();         profile.setPreference("javascript.enabled", "False");         options.setProfile(profile);              driver = new FirefoxDriver(options);              driver.quit();       }     }                        driver.uninstall_addon(id)

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk//examples/python/tests/browsers/test_firefox.py#L106)

##### /examples/python/tests/browsers/test\_firefox.py

Copy  Close               import os     import subprocess     import sys          import pytest     from selenium import webdriver               def test_basic_options():         options = webdriver.FirefoxOptions()         driver = webdriver.Firefox(options=options)              driver.quit()               def test_arguments():         options = webdriver.FirefoxOptions()              options.add_argument("-headless")              driver = webdriver.Firefox(options=options)         driver.quit()               def test_set_browser_location(firefox_bin):         options = webdriver.FirefoxOptions()              options.binary_location = firefox_bin              driver = webdriver.Firefox(options=options)              driver.quit()               def test_log_to_file(log_path):         service = webdriver.FirefoxService(log_output=log_path, service_args=['--log', 'debug'])              driver = webdriver.Firefox(service=service)         driver.get("https://www.selenium.dev")              with open(log_path, 'r') as fp:             assert "geckodriver	INFO	Listening on" in fp.readline()              driver.quit()               def test_log_to_stdout(capfd):         service = webdriver.FirefoxService(log_output=subprocess.STDOUT)              driver = webdriver.Firefox(service=service)              out, err = capfd.readouterr()         assert "geckodriver	INFO	Listening on" in out              driver.quit()               def test_log_level(log_path):         service = webdriver.FirefoxService(log_output=log_path, service_args=['--log', 'debug'])              driver = webdriver.Firefox(service=service)              with open(log_path, 'r') as f:             assert '\tDEBUG' in f.read()              driver.quit()               def test_log_truncation(log_path):         service = webdriver.FirefoxService(service_args=['--log-no-truncate', '--log', 'debug'], log_output=log_path)              driver = webdriver.Firefox(service=service)              with open(log_path, 'r') as f:             assert ' ... ' not in f.read()              driver.quit()               def test_profile_location(temp_dir):         service = webdriver.FirefoxService(service_args=['--profile-root', temp_dir])              driver = webdriver.Firefox(service=service)         profile_name = driver.capabilities.get('moz:profile').replace('\\', '/').split('/')[-1]              assert profile_name in os.listdir(temp_dir)              driver.quit()               def test_install_addon(firefox_driver, addon_path_xpi):         driver = firefox_driver              driver.install_addon(addon_path_xpi)              driver.get("https://www.selenium.dev/selenium/web/blank.html")         injected = driver.find_element(webdriver.common.by.By.ID, "webextensions-selenium-example")              assert injected.text == "Content injected by webextensions-selenium-example"               def test_uninstall_addon(firefox_driver, addon_path_xpi):         driver = firefox_driver              id = driver.install_addon(addon_path_xpi)         driver.uninstall_addon(id)              driver.get("https://www.selenium.dev/selenium/web/blank.html")         assert len(driver.find_elements(webdriver.common.by.By.ID, "webextensions-selenium-example")) == 0               def test_install_unsigned_addon_directory(firefox_driver, addon_path_dir):         driver = firefox_driver              driver.install_addon(addon_path_dir, temporary=True)              driver.get("https://www.selenium.dev/selenium/web/blank.html")         injected = driver.find_element(webdriver.common.by.By.ID, "webextensions-selenium-example")              assert injected.text == "Content injected by webextensions-selenium-example"               def test_install_unsigned_addon_directory_slash(firefox_driver, addon_path_dir_slash):         driver = firefox_driver              driver.install_addon(addon_path_dir_slash, temporary=True)              driver.get("https://www.selenium.dev/selenium/web/blank.html")         injected = driver.find_element(webdriver.common.by.By.ID, "webextensions-selenium-example")              assert injected.text == "Content injected by webextensions-selenium-example"               def test_full_page_screenshot(firefox_driver):         driver = firefox_driver              driver.get("https://www.selenium.dev")              driver.save_full_page_screenshot("full_page_screenshot.png")              assert os.path.exists("full_page_screenshot.png")              driver.quit()               def test_set_context():         options = webdriver.FirefoxOptions()         options.add_argument("-remote-allow-system-access")         driver = webdriver.Firefox(options=options)              with driver.context(driver.CONTEXT_CHROME):             driver.execute_script("console.log('Inside Chrome context');")              # Check if the context is back to content         assert driver.execute("GET_CONTEXT")["value"] == "content"         driver.quit()               def test_firefox_profile():         from selenium.webdriver.firefox.options import Options         from selenium.webdriver.firefox.firefox_profile import FirefoxProfile              options = Options()         firefox_profile = FirefoxProfile()         firefox_profile.set_preference("javascript.enabled", False)         options.profile = firefox_profile              driver = webdriver.Firefox(options=options)              driver.quit()     

[Selenium v4.5](https://github.com/SeleniumHQ/selenium/releases/tag/selenium-4.5.0)                           driver.UninstallAddOn(extensionId);

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk//examples/dotnet/SeleniumDocs/Browsers/FirefoxTest.cs#L152)

##### /examples/dotnet/SeleniumDocs/Browsers/FirefoxTest.cs

Copy  Close               using System;     using System.IO;     using System.Linq;     using Microsoft.VisualStudio.TestTools.UnitTesting;     using OpenQA.Selenium;     using OpenQA.Selenium.Firefox;          namespace SeleniumDocs.Browsers     {         [TestClass]         public class FirefoxTest         {             private FirefoxDriver driver;             private string _logLocation;             private string _tempPath;                  [TestCleanup]             public void Cleanup()             {                 if (_logLocation != null && File.Exists(_logLocation))                 {                     File.Delete(_logLocation);                 }                 if (_tempPath != null && File.Exists(_tempPath))                 {                     File.Delete(_tempPath);                 }                 driver.Quit();             }                  [TestMethod]             public void BasicOptions()             {                 var options = new FirefoxOptions();                 driver = new FirefoxDriver(options);             }                  [TestMethod]             public void Arguments()             {                 var options = new FirefoxOptions();                      options.AddArgument("-headless");                      driver = new FirefoxDriver(options);             }                  [TestMethod]             public void SetBinary()             {                 var options = new FirefoxOptions();                      options.BinaryLocation = GetFirefoxLocation();                      driver = new FirefoxDriver(options);             }                  [TestMethod]             [Ignore("Not implemented")]             public void LogsToFile()             {                 var service = FirefoxDriverService.CreateDefaultService();                 //service.LogFile = _logLocation                      driver = new FirefoxDriver(service);                 var lines = File.ReadLines(GetLogLocation());                 Assert.IsNotNull(lines.FirstOrDefault(line => line.Contains("geckodriver	INFO	Listening on")));             }                  [TestMethod]             [Ignore("Not implemented")]             public void LogsToConsole()             {                 var stringWriter = new StringWriter();                 var originalOutput = Console.Out;                 Console.SetOut(stringWriter);                      var service = FirefoxDriverService.CreateDefaultService();                 //service.LogToConsole = true;                      driver = new FirefoxDriver(service);                 Assert.IsTrue(stringWriter.ToString().Contains("geckodriver	INFO	Listening on"));                 Console.SetOut(originalOutput);                 stringWriter.Dispose();             }                  [TestMethod]             [Ignore("You can set it, just can't see it")]             public void LogsLevel()             {                 var service = FirefoxDriverService.CreateDefaultService();                 //service.LogFile = _logLocation                      service.LogLevel = FirefoxDriverLogLevel.Debug;                      driver = new FirefoxDriver(service);                 var lines = File.ReadLines(GetLogLocation());                 Assert.IsNotNull(lines.FirstOrDefault(line => line.Contains("Marionette\tDEBUG")));             }                  [TestMethod]             [Ignore("Not implemented")]             public void StopsTruncatingLogs()             {                 var service = FirefoxDriverService.CreateDefaultService();                 //service.TruncateLogs = false;                      service.LogLevel = FirefoxDriverLogLevel.Debug;                      driver = new FirefoxDriver(service);                 var lines = File.ReadLines(GetLogLocation());                 Assert.IsNull(lines.FirstOrDefault(line => line.Contains(" ... ")));             }                  [TestMethod]             [Ignore("Not implemented")]             public void SetProfileLocation()             {                 var service = FirefoxDriverService.CreateDefaultService();                 // service.ProfileRoot = GetTempDirectory();                      driver = new FirefoxDriver(service);                      string profile = (string)driver.Capabilities.GetCapability("moz:profile");                 string[] directories = profile.Split("/");                 var dirName = directories.Last();                 Assert.AreEqual(GetTempDirectory() + "/" + dirName, profile);             }                  [TestMethod]             public void InstallAddon()             {                 SetWaitingDriver();                 string baseDir = AppDomain.CurrentDomain.BaseDirectory;                 string extensionFilePath = Path.Combine(baseDir, "../../../Extensions/webextensions-selenium-example.xpi");                      driver.InstallAddOnFromFile(Path.GetFullPath(extensionFilePath));                      driver.Url = "https://www.selenium.dev/selenium/web/blank.html";                 IWebElement injected = driver.FindElement(By.Id("webextensions-selenium-example"));                 Assert.AreEqual("Content injected by webextensions-selenium-example", injected.Text);             }                  [TestMethod]             public void UnInstallAddon()             {                 driver = new FirefoxDriver();                 string baseDir = AppDomain.CurrentDomain.BaseDirectory;                 string extensionFilePath = Path.Combine(baseDir, "../../../Extensions/webextensions-selenium-example.xpi");                 string extensionId = driver.InstallAddOnFromFile(Path.GetFullPath(extensionFilePath));                      driver.UninstallAddOn(extensionId);                      driver.Url = "https://www.selenium.dev/selenium/web/blank.html";                 Assert.AreEqual(driver.FindElements(By.Id("webextensions-selenium-example")).Count, 0);             }                  [TestMethod]             public void InstallUnsignedAddon()             {                 SetWaitingDriver();                 string baseDir = AppDomain.CurrentDomain.BaseDirectory;                 string extensionDirPath = Path.Combine(baseDir, "../../../Extensions/webextensions-selenium-example/");                      driver.InstallAddOnFromDirectory(Path.GetFullPath(extensionDirPath), true);                      driver.Url = "https://www.selenium.dev/selenium/web/blank.html";                 IWebElement injected = driver.FindElement(By.Id("webextensions-selenium-example"));                 Assert.AreEqual("Content injected by webextensions-selenium-example", injected.Text);             }                          private string GetLogLocation()             {                 if (_logLocation != null && !File.Exists(_logLocation))                 {                     _logLocation = Path.GetTempFileName();                 }                      return _logLocation;             }                  private string GetTempDirectory()             {                 if (_tempPath != null && !File.Exists(_tempPath))                 {                     _tempPath = Path.GetTempPath();                 }                      return _tempPath;             }                  private void SetWaitingDriver()             {                 driver = new FirefoxDriver();                 driver.Manage().Timeouts().ImplicitWait = TimeSpan.FromSeconds(2);             }                  private static string GetFirefoxLocation()             {                 var options = new FirefoxOptions()                 {                     BrowserVersion = "stable"                 };                 return new DriverFinder(options).GetBrowserPath();             }         }     }                     driver.uninstall_addon(extension_id)

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk//examples/ruby/spec/browsers/firefox_spec.rb#L106)

##### /examples/ruby/spec/browsers/firefox\_spec.rb

Copy  Close               # frozen_string_literal: true          require 'spec_helper'          RSpec.describe 'Firefox' do       describe 'Options' do         let(:firefox_location) { driver_finder && ENV.fetch('FIREFOX_BIN', nil) }              it 'basic options' do           options = Selenium::WebDriver::Options.firefox           @driver = Selenium::WebDriver.for :firefox, options: options         end              it 'add arguments' do           options = Selenium::WebDriver::Options.firefox                options.args << '-headless'                @driver = Selenium::WebDriver.for :firefox, options: options         end              it 'sets location of binary' do           options = Selenium::WebDriver::Options.firefox                options.binary = firefox_location                @driver = Selenium::WebDriver.for :firefox, options: options         end       end            describe 'Service' do         let(:file_name) { Tempfile.new('geckodriver').path }         let(:root_directory) { Dir.mktmpdir }              after do           FileUtils.rm_f(file_name)           FileUtils.rm_rf(root_directory)         end              it 'logs to file' do           service = Selenium::WebDriver::Service.firefox                service.log = file_name                @driver = Selenium::WebDriver.for :firefox, service: service           expect(File.readlines(file_name).first).to include("geckodriver\tINFO\tListening on")         end              it 'logs to console' do           service = Selenium::WebDriver::Service.firefox                service.log = $stdout                expect {             @driver = Selenium::WebDriver.for :firefox, service: service           }.to output(/geckodriver	INFO	Listening on/).to_stdout_from_any_process         end              it 'sets log level' do           service = Selenium::WebDriver::Service.firefox           service.log = file_name                service.args += %w[--log debug]                @driver = Selenium::WebDriver.for :firefox, service: service           expect(File.readlines(file_name).grep(/Marionette	DEBUG/).any?).to eq true         end              it 'stops truncating log lines' do           service = Selenium::WebDriver::Service.firefox(log: file_name, args: %w[--log debug])                service.args << '--log-no-truncate'                @driver = Selenium::WebDriver.for :firefox, service: service           expect(File.readlines(file_name).grep(/ \.\.\. /).any?).to eq false         end              it 'sets default profile location' do           service = Selenium::WebDriver::Service.firefox                service.args += ['--profile-root', root_directory]                @driver = Selenium::WebDriver.for :firefox, service: service           profile_location = Dir.new(@driver.capabilities['moz:profile'])           expect(profile_location.path.gsub('\\', '/')).to include(root_directory)         end       end            describe 'Features' do         let(:driver) { start_firefox }              it 'installs addon' do           extension_file_path = File.expand_path('../spec_support/extensions/webextensions-selenium-example.xpi', __dir__)                driver.install_addon(extension_file_path)                driver.get 'https://www.selenium.dev/selenium/web/blank.html'           injected = driver.find_element(id: 'webextensions-selenium-example')           expect(injected.text).to eq 'Content injected by webextensions-selenium-example'         end              it 'uninstalls addon' do           extension_file_path = File.expand_path('../spec_support/extensions/webextensions-selenium-example.xpi', __dir__)           extension_id = driver.install_addon(extension_file_path)                driver.uninstall_addon(extension_id)                driver.get 'https://www.selenium.dev/selenium/web/blank.html'           expect(driver.find_elements(id: 'webextensions-selenium-example')).to be_empty         end              it 'installs unsigned addon' do           extension_dir_path = File.expand_path('../spec_support/extensions/webextensions-selenium-example/', __dir__)                driver.install_addon(extension_dir_path, true)                driver.navigate.to 'https://www.selenium.dev/selenium/web/blank.html'           injected = driver.find_element(id: 'webextensions-selenium-example')           expect(injected.text).to eq 'Content injected by webextensions-selenium-example'         end              it 'takes full page screenshot' do           driver.navigate.to 'https://www.selenium.dev/selenium/web/blank.html'           Dir.mktmpdir('screenshot_test') do |dir|             screenshot = driver.save_full_page_screenshot(File.join(dir, 'screenshot.png'))                  expect(screenshot).to be_a File           end         end              it 'sets the context' do           driver.context = 'content'           expect(driver.context).to eq 'content'         end       end            describe 'Profile' do         it 'creates a new profile' do           profile = Selenium::WebDriver::Firefox::Profile.new           profile['browser.download.dir'] = '/tmp/webdriver-downloads'           options = Selenium::WebDriver::Firefox::Options.new(profile: profile)           expect(options.profile).to eq(profile)         end       end            def driver_finder         options = Selenium::WebDriver::Options.firefox(browser_version: 'stable')         service = Selenium::WebDriver::Service.firefox         finder = Selenium::WebDriver::DriverFinder.new(options, service)         ENV['GECKODRIVER_BIN'] = finder.driver_path         ENV['FIREFOX_BIN'] = finder.browser_path       end     end                        await driver.uninstallAddon(id);

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk//examples/javascript/test/browser/firefoxSpecificFunctionalities.spec.js#L26)

##### /examples/javascript/test/browser/firefoxSpecificFunctionalities.spec.js

Copy  Close               const {Browser, By, Builder} = require('selenium-webdriver');     const Firefox = require('selenium-webdriver/firefox');     const options = new Firefox.Options();     const path = require('path');     const assert = require("assert");               describe('Should be able to Test Command line arguments', function () {       it('headless', async function () {         let driver = new Builder()           .forBrowser(Browser.FIREFOX)           .setFirefoxOptions(options.addArguments('--headless'))           .build();              await driver.get('https://www.selenium.dev/selenium/web/blank.html');         await driver.quit();       });            it('Should be able to add extension', async function () {              const xpiPath = path.resolve('./test/resources/extensions/selenium-example.xpi')         let driver = new Builder()           .forBrowser(Browser.FIREFOX)           .build()         let id = await driver.installAddon(xpiPath);         await driver.uninstallAddon(id);                   await driver.get('https://www.selenium.dev/selenium/web/blank.html');         const ele = await driver.findElements(By.id("webextensions-selenium-example"));         assert.equal(ele.length, 0);         await driver.quit();       });            it('Should be able to install unsigned addon', async function () {              const xpiPath = path.resolve('./test/resources/extensions/selenium-example')         let driver = new Builder()           .forBrowser(Browser.FIREFOX)           .build()         let id = await driver.installAddon(xpiPath, true);         await driver.uninstallAddon(id);                   await driver.get('https://www.selenium.dev/selenium/web/blank.html');         const ele = await driver.findElements(By.id("webextensions-selenium-example"));         assert.equal(ele.length, 0);         await driver.quit();       });     });

[Add Example](https://www.selenium.dev/documentation/about/contributing/#creating-examples)

#### Unsigned installation

When working with an unfinished or unpublished extension, it will likely not be signed. As such, it can only be installed as “temporary.” This can be done by passing in either a zip file or a directory, here’s an example with a directory:

  * Java   * Python   * CSharp   * Ruby   * JavaScript   * Kotlin

                  driver.installExtension(path, true);

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk//examples/java/src/test/java/dev/selenium/browsers/FirefoxTest.java#L160)

##### /examples/java/src/test/java/dev/selenium/browsers/FirefoxTest.java

Copy  Close               package dev.selenium.browsers;          import dev.selenium.BaseTest;     import java.io.File;     import java.io.IOException;     import java.io.PrintStream;     import java.nio.file.Files;     import java.nio.file.Path;     import java.nio.file.Paths;     import org.junit.jupiter.api.AfterEach;     import org.junit.jupiter.api.Assertions;     import org.junit.jupiter.api.Test;     import org.junit.jupiter.api.condition.DisabledOnOs;     import org.junit.jupiter.api.condition.OS;     import org.openqa.selenium.By;     import org.openqa.selenium.OutputType;     import org.openqa.selenium.WebElement;     import org.openqa.selenium.firefox.*;     import org.openqa.selenium.remote.service.DriverFinder;                              public class FirefoxTest extends BaseTest {       private FirefoxDriver driver;            @AfterEach       public void clearProperties() {         System.clearProperty(GeckoDriverService.GECKO_DRIVER_LOG_PROPERTY);         System.clearProperty(GeckoDriverService.GECKO_DRIVER_LOG_LEVEL_PROPERTY);driver.quit();       }            @Test       public void basicOptions() {         FirefoxOptions options = new FirefoxOptions();         driver = new FirefoxDriver(options);       }            @Test       public void arguments() {         FirefoxOptions options = new FirefoxOptions();              options.addArguments("-headless");              driver = new FirefoxDriver(options);       }            @Test       @DisabledOnOs(OS.WINDOWS)       public void setBrowserLocation() {         FirefoxOptions options = new FirefoxOptions();              options.setBinary(getFirefoxLocation());              driver = new FirefoxDriver(options);       }            @Test       public void logsToFile() throws IOException {         File logLocation = getTempFile("logsToFile", ".log");         FirefoxDriverService service =             new GeckoDriverService.Builder().withLogFile(logLocation).build();              driver = new FirefoxDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         Assertions.assertTrue(fileContent.contains("geckodriver	INFO	Listening on"));       }            @Test       public void logsToConsole() throws IOException {         File logLocation = getTempFile("logsToConsole", ".log");         System.setOut(new PrintStream(logLocation));              FirefoxDriverService service =             new GeckoDriverService.Builder().withLogOutput(System.out).build();              driver = new FirefoxDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         Assertions.assertTrue(fileContent.contains("geckodriver	INFO	Listening on"));       }            @Test       public void logsWithLevel() throws IOException {         File logLocation = getTempFile("logsWithLevel", ".log");         System.setProperty(GeckoDriverService.GECKO_DRIVER_LOG_PROPERTY, logLocation.getAbsolutePath());              FirefoxDriverService service =             new GeckoDriverService.Builder().withLogLevel(FirefoxDriverLogLevel.DEBUG).build();              driver = new FirefoxDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         Assertions.assertTrue(fileContent.contains("Marionette\tDEBUG"));       }            @Test       public void stopsTruncatingLogs() throws IOException {         File logLocation = getTempFile("geckodriver-", "log");         System.setProperty(GeckoDriverService.GECKO_DRIVER_LOG_PROPERTY, logLocation.getAbsolutePath());         System.setProperty(             GeckoDriverService.GECKO_DRIVER_LOG_LEVEL_PROPERTY, FirefoxDriverLogLevel.DEBUG.toString());              FirefoxDriverService service =             new GeckoDriverService.Builder().withTruncatedLogs(false).build();              driver = new FirefoxDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         Assertions.assertFalse(fileContent.contains(" ... "));       }            @Test       public void setProfileLocation() {         File profileDirectory = getTempDirectory("profile-");         FirefoxDriverService service =             new GeckoDriverService.Builder().withProfileRoot(profileDirectory).build();              driver = new FirefoxDriver(service);              String location = (String) driver.getCapabilities().getCapability("moz:profile");         Assertions.assertTrue(location.contains(profileDirectory.getAbsolutePath()));       }                 @Test       public void installAddon() {         driver = startFirefoxDriver();         Path xpiPath = Paths.get("src/test/resources/extensions/selenium-example.xpi");              driver.installExtension(xpiPath);              driver.get("https://www.selenium.dev/selenium/web/blank.html");         WebElement injected = driver.findElement(By.id("webextensions-selenium-example"));         Assertions.assertEquals(             "Content injected by webextensions-selenium-example", injected.getText());       }                 @Test       public void uninstallAddon() {         driver = startFirefoxDriver();         Path xpiPath = Paths.get("src/test/resources/extensions/selenium-example.xpi");         String id = driver.installExtension(xpiPath);              driver.uninstallExtension(id);              driver.get("https://www.selenium.dev/selenium/web/blank.html");         Assertions.assertEquals(driver.findElements(By.id("webextensions-selenium-example")).size(), 0);       }                 @Test       public void installUnsignedAddonPath() {         driver = startFirefoxDriver();         Path path = Paths.get("src/test/resources/extensions/selenium-example");              driver.installExtension(path, true);              driver.get("https://www.selenium.dev/selenium/web/blank.html");         WebElement injected = getLocatedElement(driver, By.id("webextensions-selenium-example"));         Assertions.assertEquals(             "Content injected by webextensions-selenium-example", injected.getText());       }            private Path getFirefoxLocation() {         FirefoxOptions options = new FirefoxOptions();         options.setBrowserVersion("stable");         DriverFinder finder = new DriverFinder(GeckoDriverService.createDefaultService(), options);         return Path.of(finder.getBrowserPath());       }            @Test       public void fullPageScreenshot() throws Exception {         driver = startFirefoxDriver();              driver.get("https://www.selenium.dev");              File screenshot = driver.getFullPageScreenshotAs(OutputType.FILE);              File targetFile = new File("full_page_screenshot.png");         Files.move(screenshot.toPath(), targetFile.toPath());              // Verify the screenshot file exists         Assertions.assertTrue(targetFile.exists(), "The full page screenshot file should exist");         Files.deleteIfExists(targetFile.toPath());              driver.quit();       }            @Test       public void setContext() {         driver = startFirefoxDriver(new FirefoxOptions().addArguments("-remote-allow-system-access"));              ((HasContext) driver).setContext(FirefoxCommandContext.CHROME);         driver.executeScript("console.log('Inside Chrome context');");              // Verify the context is back to "content"         Assertions.assertEquals(                 FirefoxCommandContext.CHROME, ((HasContext) driver).getContext(),                 "The context should be 'chrome'"         );              driver.quit();       }            @Test       public void firefoxProfile() {         FirefoxProfile profile = new FirefoxProfile();         FirefoxOptions options = new FirefoxOptions();         profile.setPreference("javascript.enabled", "False");         options.setProfile(profile);              driver = new FirefoxDriver(options);              driver.quit();       }     }                        driver.install_addon(addon_path_dir, temporary=True)

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk//examples/python/tests/browsers/test_firefox.py#L115)

##### /examples/python/tests/browsers/test\_firefox.py

Copy  Close               import os     import subprocess     import sys          import pytest     from selenium import webdriver               def test_basic_options():         options = webdriver.FirefoxOptions()         driver = webdriver.Firefox(options=options)              driver.quit()               def test_arguments():         options = webdriver.FirefoxOptions()              options.add_argument("-headless")              driver = webdriver.Firefox(options=options)         driver.quit()               def test_set_browser_location(firefox_bin):         options = webdriver.FirefoxOptions()              options.binary_location = firefox_bin              driver = webdriver.Firefox(options=options)              driver.quit()               def test_log_to_file(log_path):         service = webdriver.FirefoxService(log_output=log_path, service_args=['--log', 'debug'])              driver = webdriver.Firefox(service=service)         driver.get("https://www.selenium.dev")              with open(log_path, 'r') as fp:             assert "geckodriver	INFO	Listening on" in fp.readline()              driver.quit()               def test_log_to_stdout(capfd):         service = webdriver.FirefoxService(log_output=subprocess.STDOUT)              driver = webdriver.Firefox(service=service)              out, err = capfd.readouterr()         assert "geckodriver	INFO	Listening on" in out              driver.quit()               def test_log_level(log_path):         service = webdriver.FirefoxService(log_output=log_path, service_args=['--log', 'debug'])              driver = webdriver.Firefox(service=service)              with open(log_path, 'r') as f:             assert '\tDEBUG' in f.read()              driver.quit()               def test_log_truncation(log_path):         service = webdriver.FirefoxService(service_args=['--log-no-truncate', '--log', 'debug'], log_output=log_path)              driver = webdriver.Firefox(service=service)              with open(log_path, 'r') as f:             assert ' ... ' not in f.read()              driver.quit()               def test_profile_location(temp_dir):         service = webdriver.FirefoxService(service_args=['--profile-root', temp_dir])              driver = webdriver.Firefox(service=service)         profile_name = driver.capabilities.get('moz:profile').replace('\\', '/').split('/')[-1]              assert profile_name in os.listdir(temp_dir)              driver.quit()               def test_install_addon(firefox_driver, addon_path_xpi):         driver = firefox_driver              driver.install_addon(addon_path_xpi)              driver.get("https://www.selenium.dev/selenium/web/blank.html")         injected = driver.find_element(webdriver.common.by.By.ID, "webextensions-selenium-example")              assert injected.text == "Content injected by webextensions-selenium-example"               def test_uninstall_addon(firefox_driver, addon_path_xpi):         driver = firefox_driver              id = driver.install_addon(addon_path_xpi)         driver.uninstall_addon(id)              driver.get("https://www.selenium.dev/selenium/web/blank.html")         assert len(driver.find_elements(webdriver.common.by.By.ID, "webextensions-selenium-example")) == 0               def test_install_unsigned_addon_directory(firefox_driver, addon_path_dir):         driver = firefox_driver              driver.install_addon(addon_path_dir, temporary=True)              driver.get("https://www.selenium.dev/selenium/web/blank.html")         injected = driver.find_element(webdriver.common.by.By.ID, "webextensions-selenium-example")              assert injected.text == "Content injected by webextensions-selenium-example"               def test_install_unsigned_addon_directory_slash(firefox_driver, addon_path_dir_slash):         driver = firefox_driver              driver.install_addon(addon_path_dir_slash, temporary=True)              driver.get("https://www.selenium.dev/selenium/web/blank.html")         injected = driver.find_element(webdriver.common.by.By.ID, "webextensions-selenium-example")              assert injected.text == "Content injected by webextensions-selenium-example"               def test_full_page_screenshot(firefox_driver):         driver = firefox_driver              driver.get("https://www.selenium.dev")              driver.save_full_page_screenshot("full_page_screenshot.png")              assert os.path.exists("full_page_screenshot.png")              driver.quit()               def test_set_context():         options = webdriver.FirefoxOptions()         options.add_argument("-remote-allow-system-access")         driver = webdriver.Firefox(options=options)              with driver.context(driver.CONTEXT_CHROME):             driver.execute_script("console.log('Inside Chrome context');")              # Check if the context is back to content         assert driver.execute("GET_CONTEXT")["value"] == "content"         driver.quit()               def test_firefox_profile():         from selenium.webdriver.firefox.options import Options         from selenium.webdriver.firefox.firefox_profile import FirefoxProfile              options = Options()         firefox_profile = FirefoxProfile()         firefox_profile.set_preference("javascript.enabled", False)         options.profile = firefox_profile              driver = webdriver.Firefox(options=options)              driver.quit()     

[Selenium v4.5](https://github.com/SeleniumHQ/selenium/releases/tag/selenium-4.5.0)                           driver.InstallAddOnFromDirectory(Path.GetFullPath(extensionDirPath), true);

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk//examples/dotnet/SeleniumDocs/Browsers/FirefoxTest.cs#L165)

##### /examples/dotnet/SeleniumDocs/Browsers/FirefoxTest.cs

Copy  Close               using System;     using System.IO;     using System.Linq;     using Microsoft.VisualStudio.TestTools.UnitTesting;     using OpenQA.Selenium;     using OpenQA.Selenium.Firefox;          namespace SeleniumDocs.Browsers     {         [TestClass]         public class FirefoxTest         {             private FirefoxDriver driver;             private string _logLocation;             private string _tempPath;                  [TestCleanup]             public void Cleanup()             {                 if (_logLocation != null && File.Exists(_logLocation))                 {                     File.Delete(_logLocation);                 }                 if (_tempPath != null && File.Exists(_tempPath))                 {                     File.Delete(_tempPath);                 }                 driver.Quit();             }                  [TestMethod]             public void BasicOptions()             {                 var options = new FirefoxOptions();                 driver = new FirefoxDriver(options);             }                  [TestMethod]             public void Arguments()             {                 var options = new FirefoxOptions();                      options.AddArgument("-headless");                      driver = new FirefoxDriver(options);             }                  [TestMethod]             public void SetBinary()             {                 var options = new FirefoxOptions();                      options.BinaryLocation = GetFirefoxLocation();                      driver = new FirefoxDriver(options);             }                  [TestMethod]             [Ignore("Not implemented")]             public void LogsToFile()             {                 var service = FirefoxDriverService.CreateDefaultService();                 //service.LogFile = _logLocation                      driver = new FirefoxDriver(service);                 var lines = File.ReadLines(GetLogLocation());                 Assert.IsNotNull(lines.FirstOrDefault(line => line.Contains("geckodriver	INFO	Listening on")));             }                  [TestMethod]             [Ignore("Not implemented")]             public void LogsToConsole()             {                 var stringWriter = new StringWriter();                 var originalOutput = Console.Out;                 Console.SetOut(stringWriter);                      var service = FirefoxDriverService.CreateDefaultService();                 //service.LogToConsole = true;                      driver = new FirefoxDriver(service);                 Assert.IsTrue(stringWriter.ToString().Contains("geckodriver	INFO	Listening on"));                 Console.SetOut(originalOutput);                 stringWriter.Dispose();             }                  [TestMethod]             [Ignore("You can set it, just can't see it")]             public void LogsLevel()             {                 var service = FirefoxDriverService.CreateDefaultService();                 //service.LogFile = _logLocation                      service.LogLevel = FirefoxDriverLogLevel.Debug;                      driver = new FirefoxDriver(service);                 var lines = File.ReadLines(GetLogLocation());                 Assert.IsNotNull(lines.FirstOrDefault(line => line.Contains("Marionette\tDEBUG")));             }                  [TestMethod]             [Ignore("Not implemented")]             public void StopsTruncatingLogs()             {                 var service = FirefoxDriverService.CreateDefaultService();                 //service.TruncateLogs = false;                      service.LogLevel = FirefoxDriverLogLevel.Debug;                      driver = new FirefoxDriver(service);                 var lines = File.ReadLines(GetLogLocation());                 Assert.IsNull(lines.FirstOrDefault(line => line.Contains(" ... ")));             }                  [TestMethod]             [Ignore("Not implemented")]             public void SetProfileLocation()             {                 var service = FirefoxDriverService.CreateDefaultService();                 // service.ProfileRoot = GetTempDirectory();                      driver = new FirefoxDriver(service);                      string profile = (string)driver.Capabilities.GetCapability("moz:profile");                 string[] directories = profile.Split("/");                 var dirName = directories.Last();                 Assert.AreEqual(GetTempDirectory() + "/" + dirName, profile);             }                  [TestMethod]             public void InstallAddon()             {                 SetWaitingDriver();                 string baseDir = AppDomain.CurrentDomain.BaseDirectory;                 string extensionFilePath = Path.Combine(baseDir, "../../../Extensions/webextensions-selenium-example.xpi");                      driver.InstallAddOnFromFile(Path.GetFullPath(extensionFilePath));                      driver.Url = "https://www.selenium.dev/selenium/web/blank.html";                 IWebElement injected = driver.FindElement(By.Id("webextensions-selenium-example"));                 Assert.AreEqual("Content injected by webextensions-selenium-example", injected.Text);             }                  [TestMethod]             public void UnInstallAddon()             {                 driver = new FirefoxDriver();                 string baseDir = AppDomain.CurrentDomain.BaseDirectory;                 string extensionFilePath = Path.Combine(baseDir, "../../../Extensions/webextensions-selenium-example.xpi");                 string extensionId = driver.InstallAddOnFromFile(Path.GetFullPath(extensionFilePath));                      driver.UninstallAddOn(extensionId);                      driver.Url = "https://www.selenium.dev/selenium/web/blank.html";                 Assert.AreEqual(driver.FindElements(By.Id("webextensions-selenium-example")).Count, 0);             }                  [TestMethod]             public void InstallUnsignedAddon()             {                 SetWaitingDriver();                 string baseDir = AppDomain.CurrentDomain.BaseDirectory;                 string extensionDirPath = Path.Combine(baseDir, "../../../Extensions/webextensions-selenium-example/");                      driver.InstallAddOnFromDirectory(Path.GetFullPath(extensionDirPath), true);                      driver.Url = "https://www.selenium.dev/selenium/web/blank.html";                 IWebElement injected = driver.FindElement(By.Id("webextensions-selenium-example"));                 Assert.AreEqual("Content injected by webextensions-selenium-example", injected.Text);             }                          private string GetLogLocation()             {                 if (_logLocation != null && !File.Exists(_logLocation))                 {                     _logLocation = Path.GetTempFileName();                 }                      return _logLocation;             }                  private string GetTempDirectory()             {                 if (_tempPath != null && !File.Exists(_tempPath))                 {                     _tempPath = Path.GetTempPath();                 }                      return _tempPath;             }                  private void SetWaitingDriver()             {                 driver = new FirefoxDriver();                 driver.Manage().Timeouts().ImplicitWait = TimeSpan.FromSeconds(2);             }                  private static string GetFirefoxLocation()             {                 var options = new FirefoxOptions()                 {                     BrowserVersion = "stable"                 };                 return new DriverFinder(options).GetBrowserPath();             }         }     }

[Selenium v4.5](https://github.com/SeleniumHQ/selenium/releases/tag/selenium-4.5.0)                     driver.install_addon(extension_dir_path, true)

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk//examples/ruby/spec/browsers/firefox_spec.rb#L115)

##### /examples/ruby/spec/browsers/firefox\_spec.rb

Copy  Close               # frozen_string_literal: true          require 'spec_helper'          RSpec.describe 'Firefox' do       describe 'Options' do         let(:firefox_location) { driver_finder && ENV.fetch('FIREFOX_BIN', nil) }              it 'basic options' do           options = Selenium::WebDriver::Options.firefox           @driver = Selenium::WebDriver.for :firefox, options: options         end              it 'add arguments' do           options = Selenium::WebDriver::Options.firefox                options.args << '-headless'                @driver = Selenium::WebDriver.for :firefox, options: options         end              it 'sets location of binary' do           options = Selenium::WebDriver::Options.firefox                options.binary = firefox_location                @driver = Selenium::WebDriver.for :firefox, options: options         end       end            describe 'Service' do         let(:file_name) { Tempfile.new('geckodriver').path }         let(:root_directory) { Dir.mktmpdir }              after do           FileUtils.rm_f(file_name)           FileUtils.rm_rf(root_directory)         end              it 'logs to file' do           service = Selenium::WebDriver::Service.firefox                service.log = file_name                @driver = Selenium::WebDriver.for :firefox, service: service           expect(File.readlines(file_name).first).to include("geckodriver\tINFO\tListening on")         end              it 'logs to console' do           service = Selenium::WebDriver::Service.firefox                service.log = $stdout                expect {             @driver = Selenium::WebDriver.for :firefox, service: service           }.to output(/geckodriver	INFO	Listening on/).to_stdout_from_any_process         end              it 'sets log level' do           service = Selenium::WebDriver::Service.firefox           service.log = file_name                service.args += %w[--log debug]                @driver = Selenium::WebDriver.for :firefox, service: service           expect(File.readlines(file_name).grep(/Marionette	DEBUG/).any?).to eq true         end              it 'stops truncating log lines' do           service = Selenium::WebDriver::Service.firefox(log: file_name, args: %w[--log debug])                service.args << '--log-no-truncate'                @driver = Selenium::WebDriver.for :firefox, service: service           expect(File.readlines(file_name).grep(/ \.\.\. /).any?).to eq false         end              it 'sets default profile location' do           service = Selenium::WebDriver::Service.firefox                service.args += ['--profile-root', root_directory]                @driver = Selenium::WebDriver.for :firefox, service: service           profile_location = Dir.new(@driver.capabilities['moz:profile'])           expect(profile_location.path.gsub('\\', '/')).to include(root_directory)         end       end            describe 'Features' do         let(:driver) { start_firefox }              it 'installs addon' do           extension_file_path = File.expand_path('../spec_support/extensions/webextensions-selenium-example.xpi', __dir__)                driver.install_addon(extension_file_path)                driver.get 'https://www.selenium.dev/selenium/web/blank.html'           injected = driver.find_element(id: 'webextensions-selenium-example')           expect(injected.text).to eq 'Content injected by webextensions-selenium-example'         end              it 'uninstalls addon' do           extension_file_path = File.expand_path('../spec_support/extensions/webextensions-selenium-example.xpi', __dir__)           extension_id = driver.install_addon(extension_file_path)                driver.uninstall_addon(extension_id)                driver.get 'https://www.selenium.dev/selenium/web/blank.html'           expect(driver.find_elements(id: 'webextensions-selenium-example')).to be_empty         end              it 'installs unsigned addon' do           extension_dir_path = File.expand_path('../spec_support/extensions/webextensions-selenium-example/', __dir__)                driver.install_addon(extension_dir_path, true)                driver.navigate.to 'https://www.selenium.dev/selenium/web/blank.html'           injected = driver.find_element(id: 'webextensions-selenium-example')           expect(injected.text).to eq 'Content injected by webextensions-selenium-example'         end              it 'takes full page screenshot' do           driver.navigate.to 'https://www.selenium.dev/selenium/web/blank.html'           Dir.mktmpdir('screenshot_test') do |dir|             screenshot = driver.save_full_page_screenshot(File.join(dir, 'screenshot.png'))                  expect(screenshot).to be_a File           end         end              it 'sets the context' do           driver.context = 'content'           expect(driver.context).to eq 'content'         end       end            describe 'Profile' do         it 'creates a new profile' do           profile = Selenium::WebDriver::Firefox::Profile.new           profile['browser.download.dir'] = '/tmp/webdriver-downloads'           options = Selenium::WebDriver::Firefox::Options.new(profile: profile)           expect(options.profile).to eq(profile)         end       end            def driver_finder         options = Selenium::WebDriver::Options.firefox(browser_version: 'stable')         service = Selenium::WebDriver::Service.firefox         finder = Selenium::WebDriver::DriverFinder.new(options, service)         ENV['GECKODRIVER_BIN'] = finder.driver_path         ENV['FIREFOX_BIN'] = finder.browser_path       end     end                        let id = await driver.installAddon(xpiPath, true);

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk//examples/javascript/test/browser/firefoxSpecificFunctionalities.spec.js#L41)

##### /examples/javascript/test/browser/firefoxSpecificFunctionalities.spec.js

Copy  Close               const {Browser, By, Builder} = require('selenium-webdriver');     const Firefox = require('selenium-webdriver/firefox');     const options = new Firefox.Options();     const path = require('path');     const assert = require("assert");               describe('Should be able to Test Command line arguments', function () {       it('headless', async function () {         let driver = new Builder()           .forBrowser(Browser.FIREFOX)           .setFirefoxOptions(options.addArguments('--headless'))           .build();              await driver.get('https://www.selenium.dev/selenium/web/blank.html');         await driver.quit();       });            it('Should be able to add extension', async function () {              const xpiPath = path.resolve('./test/resources/extensions/selenium-example.xpi')         let driver = new Builder()           .forBrowser(Browser.FIREFOX)           .build()         let id = await driver.installAddon(xpiPath);         await driver.uninstallAddon(id);                   await driver.get('https://www.selenium.dev/selenium/web/blank.html');         const ele = await driver.findElements(By.id("webextensions-selenium-example"));         assert.equal(ele.length, 0);         await driver.quit();       });            it('Should be able to install unsigned addon', async function () {              const xpiPath = path.resolve('./test/resources/extensions/selenium-example')         let driver = new Builder()           .forBrowser(Browser.FIREFOX)           .build()         let id = await driver.installAddon(xpiPath, true);         await driver.uninstallAddon(id);                   await driver.get('https://www.selenium.dev/selenium/web/blank.html');         const ele = await driver.findElements(By.id("webextensions-selenium-example"));         assert.equal(ele.length, 0);         await driver.quit();       });     });

[Add Example](https://www.selenium.dev/documentation/about/contributing/#creating-examples)

### Full page screenshots

The following examples are for local webdrivers. For remote webdrivers, please refer to the [Remote WebDriver](https://www.selenium.dev/documentation/webdriver/drivers/remote_webdriver/) page.

  * Java   * Python   * CSharp   * Ruby   * JavaScript   * Kotlin

                  File screenshot = driver.getFullPageScreenshotAs(OutputType.FILE);

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk//examples/java/src/test/java/dev/selenium/browsers/FirefoxTest.java#L181)

##### /examples/java/src/test/java/dev/selenium/browsers/FirefoxTest.java

Copy  Close               package dev.selenium.browsers;          import dev.selenium.BaseTest;     import java.io.File;     import java.io.IOException;     import java.io.PrintStream;     import java.nio.file.Files;     import java.nio.file.Path;     import java.nio.file.Paths;     import org.junit.jupiter.api.AfterEach;     import org.junit.jupiter.api.Assertions;     import org.junit.jupiter.api.Test;     import org.junit.jupiter.api.condition.DisabledOnOs;     import org.junit.jupiter.api.condition.OS;     import org.openqa.selenium.By;     import org.openqa.selenium.OutputType;     import org.openqa.selenium.WebElement;     import org.openqa.selenium.firefox.*;     import org.openqa.selenium.remote.service.DriverFinder;                              public class FirefoxTest extends BaseTest {       private FirefoxDriver driver;            @AfterEach       public void clearProperties() {         System.clearProperty(GeckoDriverService.GECKO_DRIVER_LOG_PROPERTY);         System.clearProperty(GeckoDriverService.GECKO_DRIVER_LOG_LEVEL_PROPERTY);driver.quit();       }            @Test       public void basicOptions() {         FirefoxOptions options = new FirefoxOptions();         driver = new FirefoxDriver(options);       }            @Test       public void arguments() {         FirefoxOptions options = new FirefoxOptions();              options.addArguments("-headless");              driver = new FirefoxDriver(options);       }            @Test       @DisabledOnOs(OS.WINDOWS)       public void setBrowserLocation() {         FirefoxOptions options = new FirefoxOptions();              options.setBinary(getFirefoxLocation());              driver = new FirefoxDriver(options);       }            @Test       public void logsToFile() throws IOException {         File logLocation = getTempFile("logsToFile", ".log");         FirefoxDriverService service =             new GeckoDriverService.Builder().withLogFile(logLocation).build();              driver = new FirefoxDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         Assertions.assertTrue(fileContent.contains("geckodriver	INFO	Listening on"));       }            @Test       public void logsToConsole() throws IOException {         File logLocation = getTempFile("logsToConsole", ".log");         System.setOut(new PrintStream(logLocation));              FirefoxDriverService service =             new GeckoDriverService.Builder().withLogOutput(System.out).build();              driver = new FirefoxDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         Assertions.assertTrue(fileContent.contains("geckodriver	INFO	Listening on"));       }            @Test       public void logsWithLevel() throws IOException {         File logLocation = getTempFile("logsWithLevel", ".log");         System.setProperty(GeckoDriverService.GECKO_DRIVER_LOG_PROPERTY, logLocation.getAbsolutePath());              FirefoxDriverService service =             new GeckoDriverService.Builder().withLogLevel(FirefoxDriverLogLevel.DEBUG).build();              driver = new FirefoxDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         Assertions.assertTrue(fileContent.contains("Marionette\tDEBUG"));       }            @Test       public void stopsTruncatingLogs() throws IOException {         File logLocation = getTempFile("geckodriver-", "log");         System.setProperty(GeckoDriverService.GECKO_DRIVER_LOG_PROPERTY, logLocation.getAbsolutePath());         System.setProperty(             GeckoDriverService.GECKO_DRIVER_LOG_LEVEL_PROPERTY, FirefoxDriverLogLevel.DEBUG.toString());              FirefoxDriverService service =             new GeckoDriverService.Builder().withTruncatedLogs(false).build();              driver = new FirefoxDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         Assertions.assertFalse(fileContent.contains(" ... "));       }            @Test       public void setProfileLocation() {         File profileDirectory = getTempDirectory("profile-");         FirefoxDriverService service =             new GeckoDriverService.Builder().withProfileRoot(profileDirectory).build();              driver = new FirefoxDriver(service);              String location = (String) driver.getCapabilities().getCapability("moz:profile");         Assertions.assertTrue(location.contains(profileDirectory.getAbsolutePath()));       }                 @Test       public void installAddon() {         driver = startFirefoxDriver();         Path xpiPath = Paths.get("src/test/resources/extensions/selenium-example.xpi");              driver.installExtension(xpiPath);              driver.get("https://www.selenium.dev/selenium/web/blank.html");         WebElement injected = driver.findElement(By.id("webextensions-selenium-example"));         Assertions.assertEquals(             "Content injected by webextensions-selenium-example", injected.getText());       }                 @Test       public void uninstallAddon() {         driver = startFirefoxDriver();         Path xpiPath = Paths.get("src/test/resources/extensions/selenium-example.xpi");         String id = driver.installExtension(xpiPath);              driver.uninstallExtension(id);              driver.get("https://www.selenium.dev/selenium/web/blank.html");         Assertions.assertEquals(driver.findElements(By.id("webextensions-selenium-example")).size(), 0);       }                 @Test       public void installUnsignedAddonPath() {         driver = startFirefoxDriver();         Path path = Paths.get("src/test/resources/extensions/selenium-example");              driver.installExtension(path, true);              driver.get("https://www.selenium.dev/selenium/web/blank.html");         WebElement injected = getLocatedElement(driver, By.id("webextensions-selenium-example"));         Assertions.assertEquals(             "Content injected by webextensions-selenium-example", injected.getText());       }            private Path getFirefoxLocation() {         FirefoxOptions options = new FirefoxOptions();         options.setBrowserVersion("stable");         DriverFinder finder = new DriverFinder(GeckoDriverService.createDefaultService(), options);         return Path.of(finder.getBrowserPath());       }            @Test       public void fullPageScreenshot() throws Exception {         driver = startFirefoxDriver();              driver.get("https://www.selenium.dev");              File screenshot = driver.getFullPageScreenshotAs(OutputType.FILE);              File targetFile = new File("full_page_screenshot.png");         Files.move(screenshot.toPath(), targetFile.toPath());              // Verify the screenshot file exists         Assertions.assertTrue(targetFile.exists(), "The full page screenshot file should exist");         Files.deleteIfExists(targetFile.toPath());              driver.quit();       }            @Test       public void setContext() {         driver = startFirefoxDriver(new FirefoxOptions().addArguments("-remote-allow-system-access"));              ((HasContext) driver).setContext(FirefoxCommandContext.CHROME);         driver.executeScript("console.log('Inside Chrome context');");              // Verify the context is back to "content"         Assertions.assertEquals(                 FirefoxCommandContext.CHROME, ((HasContext) driver).getContext(),                 "The context should be 'chrome'"         );              driver.quit();       }            @Test       public void firefoxProfile() {         FirefoxProfile profile = new FirefoxProfile();         FirefoxOptions options = new FirefoxOptions();         profile.setPreference("javascript.enabled", "False");         options.setProfile(profile);              driver = new FirefoxDriver(options);              driver.quit();       }     }                        driver.save_full_page_screenshot("full_page_screenshot.png")

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk//examples/python/tests/browsers/test_firefox.py#L139)

##### /examples/python/tests/browsers/test\_firefox.py

Copy  Close               import os     import subprocess     import sys          import pytest     from selenium import webdriver               def test_basic_options():         options = webdriver.FirefoxOptions()         driver = webdriver.Firefox(options=options)              driver.quit()               def test_arguments():         options = webdriver.FirefoxOptions()              options.add_argument("-headless")              driver = webdriver.Firefox(options=options)         driver.quit()               def test_set_browser_location(firefox_bin):         options = webdriver.FirefoxOptions()              options.binary_location = firefox_bin              driver = webdriver.Firefox(options=options)              driver.quit()               def test_log_to_file(log_path):         service = webdriver.FirefoxService(log_output=log_path, service_args=['--log', 'debug'])              driver = webdriver.Firefox(service=service)         driver.get("https://www.selenium.dev")              with open(log_path, 'r') as fp:             assert "geckodriver	INFO	Listening on" in fp.readline()              driver.quit()               def test_log_to_stdout(capfd):         service = webdriver.FirefoxService(log_output=subprocess.STDOUT)              driver = webdriver.Firefox(service=service)              out, err = capfd.readouterr()         assert "geckodriver	INFO	Listening on" in out              driver.quit()               def test_log_level(log_path):         service = webdriver.FirefoxService(log_output=log_path, service_args=['--log', 'debug'])              driver = webdriver.Firefox(service=service)              with open(log_path, 'r') as f:             assert '\tDEBUG' in f.read()              driver.quit()               def test_log_truncation(log_path):         service = webdriver.FirefoxService(service_args=['--log-no-truncate', '--log', 'debug'], log_output=log_path)              driver = webdriver.Firefox(service=service)              with open(log_path, 'r') as f:             assert ' ... ' not in f.read()              driver.quit()               def test_profile_location(temp_dir):         service = webdriver.FirefoxService(service_args=['--profile-root', temp_dir])              driver = webdriver.Firefox(service=service)         profile_name = driver.capabilities.get('moz:profile').replace('\\', '/').split('/')[-1]              assert profile_name in os.listdir(temp_dir)              driver.quit()               def test_install_addon(firefox_driver, addon_path_xpi):         driver = firefox_driver              driver.install_addon(addon_path_xpi)              driver.get("https://www.selenium.dev/selenium/web/blank.html")         injected = driver.find_element(webdriver.common.by.By.ID, "webextensions-selenium-example")              assert injected.text == "Content injected by webextensions-selenium-example"               def test_uninstall_addon(firefox_driver, addon_path_xpi):         driver = firefox_driver              id = driver.install_addon(addon_path_xpi)         driver.uninstall_addon(id)              driver.get("https://www.selenium.dev/selenium/web/blank.html")         assert len(driver.find_elements(webdriver.common.by.By.ID, "webextensions-selenium-example")) == 0               def test_install_unsigned_addon_directory(firefox_driver, addon_path_dir):         driver = firefox_driver              driver.install_addon(addon_path_dir, temporary=True)              driver.get("https://www.selenium.dev/selenium/web/blank.html")         injected = driver.find_element(webdriver.common.by.By.ID, "webextensions-selenium-example")              assert injected.text == "Content injected by webextensions-selenium-example"               def test_install_unsigned_addon_directory_slash(firefox_driver, addon_path_dir_slash):         driver = firefox_driver              driver.install_addon(addon_path_dir_slash, temporary=True)              driver.get("https://www.selenium.dev/selenium/web/blank.html")         injected = driver.find_element(webdriver.common.by.By.ID, "webextensions-selenium-example")              assert injected.text == "Content injected by webextensions-selenium-example"               def test_full_page_screenshot(firefox_driver):         driver = firefox_driver              driver.get("https://www.selenium.dev")              driver.save_full_page_screenshot("full_page_screenshot.png")              assert os.path.exists("full_page_screenshot.png")              driver.quit()               def test_set_context():         options = webdriver.FirefoxOptions()         options.add_argument("-remote-allow-system-access")         driver = webdriver.Firefox(options=options)              with driver.context(driver.CONTEXT_CHROME):             driver.execute_script("console.log('Inside Chrome context');")              # Check if the context is back to content         assert driver.execute("GET_CONTEXT")["value"] == "content"         driver.quit()               def test_firefox_profile():         from selenium.webdriver.firefox.options import Options         from selenium.webdriver.firefox.firefox_profile import FirefoxProfile              options = Options()         firefox_profile = FirefoxProfile()         firefox_profile.set_preference("javascript.enabled", False)         options.profile = firefox_profile              driver = webdriver.Firefox(options=options)              driver.quit()     

[Add Example](https://www.selenium.dev/documentation/about/contributing/#creating-examples)                       screenshot = driver.save_full_page_screenshot(File.join(dir, 'screenshot.png'))

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk//examples/ruby/spec/browsers/firefox_spec.rb#L125)

##### /examples/ruby/spec/browsers/firefox\_spec.rb

Copy  Close               # frozen_string_literal: true          require 'spec_helper'          RSpec.describe 'Firefox' do       describe 'Options' do         let(:firefox_location) { driver_finder && ENV.fetch('FIREFOX_BIN', nil) }              it 'basic options' do           options = Selenium::WebDriver::Options.firefox           @driver = Selenium::WebDriver.for :firefox, options: options         end              it 'add arguments' do           options = Selenium::WebDriver::Options.firefox                options.args << '-headless'                @driver = Selenium::WebDriver.for :firefox, options: options         end              it 'sets location of binary' do           options = Selenium::WebDriver::Options.firefox                options.binary = firefox_location                @driver = Selenium::WebDriver.for :firefox, options: options         end       end            describe 'Service' do         let(:file_name) { Tempfile.new('geckodriver').path }         let(:root_directory) { Dir.mktmpdir }              after do           FileUtils.rm_f(file_name)           FileUtils.rm_rf(root_directory)         end              it 'logs to file' do           service = Selenium::WebDriver::Service.firefox                service.log = file_name                @driver = Selenium::WebDriver.for :firefox, service: service           expect(File.readlines(file_name).first).to include("geckodriver\tINFO\tListening on")         end              it 'logs to console' do           service = Selenium::WebDriver::Service.firefox                service.log = $stdout                expect {             @driver = Selenium::WebDriver.for :firefox, service: service           }.to output(/geckodriver	INFO	Listening on/).to_stdout_from_any_process         end              it 'sets log level' do           service = Selenium::WebDriver::Service.firefox           service.log = file_name                service.args += %w[--log debug]                @driver = Selenium::WebDriver.for :firefox, service: service           expect(File.readlines(file_name).grep(/Marionette	DEBUG/).any?).to eq true         end              it 'stops truncating log lines' do           service = Selenium::WebDriver::Service.firefox(log: file_name, args: %w[--log debug])                service.args << '--log-no-truncate'                @driver = Selenium::WebDriver.for :firefox, service: service           expect(File.readlines(file_name).grep(/ \.\.\. /).any?).to eq false         end              it 'sets default profile location' do           service = Selenium::WebDriver::Service.firefox                service.args += ['--profile-root', root_directory]                @driver = Selenium::WebDriver.for :firefox, service: service           profile_location = Dir.new(@driver.capabilities['moz:profile'])           expect(profile_location.path.gsub('\\', '/')).to include(root_directory)         end       end            describe 'Features' do         let(:driver) { start_firefox }              it 'installs addon' do           extension_file_path = File.expand_path('../spec_support/extensions/webextensions-selenium-example.xpi', __dir__)                driver.install_addon(extension_file_path)                driver.get 'https://www.selenium.dev/selenium/web/blank.html'           injected = driver.find_element(id: 'webextensions-selenium-example')           expect(injected.text).to eq 'Content injected by webextensions-selenium-example'         end              it 'uninstalls addon' do           extension_file_path = File.expand_path('../spec_support/extensions/webextensions-selenium-example.xpi', __dir__)           extension_id = driver.install_addon(extension_file_path)                driver.uninstall_addon(extension_id)                driver.get 'https://www.selenium.dev/selenium/web/blank.html'           expect(driver.find_elements(id: 'webextensions-selenium-example')).to be_empty         end              it 'installs unsigned addon' do           extension_dir_path = File.expand_path('../spec_support/extensions/webextensions-selenium-example/', __dir__)                driver.install_addon(extension_dir_path, true)                driver.navigate.to 'https://www.selenium.dev/selenium/web/blank.html'           injected = driver.find_element(id: 'webextensions-selenium-example')           expect(injected.text).to eq 'Content injected by webextensions-selenium-example'         end              it 'takes full page screenshot' do           driver.navigate.to 'https://www.selenium.dev/selenium/web/blank.html'           Dir.mktmpdir('screenshot_test') do |dir|             screenshot = driver.save_full_page_screenshot(File.join(dir, 'screenshot.png'))                  expect(screenshot).to be_a File           end         end              it 'sets the context' do           driver.context = 'content'           expect(driver.context).to eq 'content'         end       end            describe 'Profile' do         it 'creates a new profile' do           profile = Selenium::WebDriver::Firefox::Profile.new           profile['browser.download.dir'] = '/tmp/webdriver-downloads'           options = Selenium::WebDriver::Firefox::Options.new(profile: profile)           expect(options.profile).to eq(profile)         end       end            def driver_finder         options = Selenium::WebDriver::Options.firefox(browser_version: 'stable')         service = Selenium::WebDriver::Service.firefox         finder = Selenium::WebDriver::DriverFinder.new(options, service)         ENV['GECKODRIVER_BIN'] = finder.driver_path         ENV['FIREFOX_BIN'] = finder.browser_path       end     end     

[Add Example](https://www.selenium.dev/documentation/about/contributing/#creating-examples)

[Add Example](https://www.selenium.dev/documentation/about/contributing/#creating-examples)

### Context

The following examples are for local webdrivers. For remote webdrivers, please refer to the [Remote WebDriver](https://www.selenium.dev/documentation/webdriver/drivers/remote_webdriver/) page.

  * Java   * Python   * CSharp   * Ruby   * JavaScript   * Kotlin

                  ((HasContext) driver).setContext(FirefoxCommandContext.CHROME);         driver.executeScript("console.log('Inside Chrome context');");

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk//examples/java/src/test/java/dev/selenium/browsers/FirefoxTest.java#L197-L198)

##### /examples/java/src/test/java/dev/selenium/browsers/FirefoxTest.java

Copy  Close               package dev.selenium.browsers;          import dev.selenium.BaseTest;     import java.io.File;     import java.io.IOException;     import java.io.PrintStream;     import java.nio.file.Files;     import java.nio.file.Path;     import java.nio.file.Paths;     import org.junit.jupiter.api.AfterEach;     import org.junit.jupiter.api.Assertions;     import org.junit.jupiter.api.Test;     import org.junit.jupiter.api.condition.DisabledOnOs;     import org.junit.jupiter.api.condition.OS;     import org.openqa.selenium.By;     import org.openqa.selenium.OutputType;     import org.openqa.selenium.WebElement;     import org.openqa.selenium.firefox.*;     import org.openqa.selenium.remote.service.DriverFinder;                              public class FirefoxTest extends BaseTest {       private FirefoxDriver driver;            @AfterEach       public void clearProperties() {         System.clearProperty(GeckoDriverService.GECKO_DRIVER_LOG_PROPERTY);         System.clearProperty(GeckoDriverService.GECKO_DRIVER_LOG_LEVEL_PROPERTY);driver.quit();       }            @Test       public void basicOptions() {         FirefoxOptions options = new FirefoxOptions();         driver = new FirefoxDriver(options);       }            @Test       public void arguments() {         FirefoxOptions options = new FirefoxOptions();              options.addArguments("-headless");              driver = new FirefoxDriver(options);       }            @Test       @DisabledOnOs(OS.WINDOWS)       public void setBrowserLocation() {         FirefoxOptions options = new FirefoxOptions();              options.setBinary(getFirefoxLocation());              driver = new FirefoxDriver(options);       }            @Test       public void logsToFile() throws IOException {         File logLocation = getTempFile("logsToFile", ".log");         FirefoxDriverService service =             new GeckoDriverService.Builder().withLogFile(logLocation).build();              driver = new FirefoxDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         Assertions.assertTrue(fileContent.contains("geckodriver	INFO	Listening on"));       }            @Test       public void logsToConsole() throws IOException {         File logLocation = getTempFile("logsToConsole", ".log");         System.setOut(new PrintStream(logLocation));              FirefoxDriverService service =             new GeckoDriverService.Builder().withLogOutput(System.out).build();              driver = new FirefoxDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         Assertions.assertTrue(fileContent.contains("geckodriver	INFO	Listening on"));       }            @Test       public void logsWithLevel() throws IOException {         File logLocation = getTempFile("logsWithLevel", ".log");         System.setProperty(GeckoDriverService.GECKO_DRIVER_LOG_PROPERTY, logLocation.getAbsolutePath());              FirefoxDriverService service =             new GeckoDriverService.Builder().withLogLevel(FirefoxDriverLogLevel.DEBUG).build();              driver = new FirefoxDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         Assertions.assertTrue(fileContent.contains("Marionette\tDEBUG"));       }            @Test       public void stopsTruncatingLogs() throws IOException {         File logLocation = getTempFile("geckodriver-", "log");         System.setProperty(GeckoDriverService.GECKO_DRIVER_LOG_PROPERTY, logLocation.getAbsolutePath());         System.setProperty(             GeckoDriverService.GECKO_DRIVER_LOG_LEVEL_PROPERTY, FirefoxDriverLogLevel.DEBUG.toString());              FirefoxDriverService service =             new GeckoDriverService.Builder().withTruncatedLogs(false).build();              driver = new FirefoxDriver(service);              String fileContent = new String(Files.readAllBytes(logLocation.toPath()));         Assertions.assertFalse(fileContent.contains(" ... "));       }            @Test       public void setProfileLocation() {         File profileDirectory = getTempDirectory("profile-");         FirefoxDriverService service =             new GeckoDriverService.Builder().withProfileRoot(profileDirectory).build();              driver = new FirefoxDriver(service);              String location = (String) driver.getCapabilities().getCapability("moz:profile");         Assertions.assertTrue(location.contains(profileDirectory.getAbsolutePath()));       }                 @Test       public void installAddon() {         driver = startFirefoxDriver();         Path xpiPath = Paths.get("src/test/resources/extensions/selenium-example.xpi");              driver.installExtension(xpiPath);              driver.get("https://www.selenium.dev/selenium/web/blank.html");         WebElement injected = driver.findElement(By.id("webextensions-selenium-example"));         Assertions.assertEquals(             "Content injected by webextensions-selenium-example", injected.getText());       }                 @Test       public void uninstallAddon() {         driver = startFirefoxDriver();         Path xpiPath = Paths.get("src/test/resources/extensions/selenium-example.xpi");         String id = driver.installExtension(xpiPath);              driver.uninstallExtension(id);              driver.get("https://www.selenium.dev/selenium/web/blank.html");         Assertions.assertEquals(driver.findElements(By.id("webextensions-selenium-example")).size(), 0);       }                 @Test       public void installUnsignedAddonPath() {         driver = startFirefoxDriver();         Path path = Paths.get("src/test/resources/extensions/selenium-example");              driver.installExtension(path, true);              driver.get("https://www.selenium.dev/selenium/web/blank.html");         WebElement injected = getLocatedElement(driver, By.id("webextensions-selenium-example"));         Assertions.assertEquals(             "Content injected by webextensions-selenium-example", injected.getText());       }            private Path getFirefoxLocation() {         FirefoxOptions options = new FirefoxOptions();         options.setBrowserVersion("stable");         DriverFinder finder = new DriverFinder(GeckoDriverService.createDefaultService(), options);         return Path.of(finder.getBrowserPath());       }            @Test       public void fullPageScreenshot() throws Exception {         driver = startFirefoxDriver();              driver.get("https://www.selenium.dev");              File screenshot = driver.getFullPageScreenshotAs(OutputType.FILE);              File targetFile = new File("full_page_screenshot.png");         Files.move(screenshot.toPath(), targetFile.toPath());              // Verify the screenshot file exists         Assertions.assertTrue(targetFile.exists(), "The full page screenshot file should exist");         Files.deleteIfExists(targetFile.toPath());              driver.quit();       }            @Test       public void setContext() {         driver = startFirefoxDriver(new FirefoxOptions().addArguments("-remote-allow-system-access"));              ((HasContext) driver).setContext(FirefoxCommandContext.CHROME);         driver.executeScript("console.log('Inside Chrome context');");              // Verify the context is back to "content"         Assertions.assertEquals(                 FirefoxCommandContext.CHROME, ((HasContext) driver).getContext(),                 "The context should be 'chrome'"         );              driver.quit();       }            @Test       public void firefoxProfile() {         FirefoxProfile profile = new FirefoxProfile();         FirefoxOptions options = new FirefoxOptions();         profile.setPreference("javascript.enabled", "False");         options.setProfile(profile);              driver = new FirefoxDriver(options);              driver.quit();       }     }                        with driver.context(driver.CONTEXT_CHROME):             driver.execute_script("console.log('Inside Chrome context');")

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk//examples/python/tests/browsers/test_firefox.py#L151-L152)

##### /examples/python/tests/browsers/test\_firefox.py

Copy  Close               import os     import subprocess     import sys          import pytest     from selenium import webdriver               def test_basic_options():         options = webdriver.FirefoxOptions()         driver = webdriver.Firefox(options=options)              driver.quit()               def test_arguments():         options = webdriver.FirefoxOptions()              options.add_argument("-headless")              driver = webdriver.Firefox(options=options)         driver.quit()               def test_set_browser_location(firefox_bin):         options = webdriver.FirefoxOptions()              options.binary_location = firefox_bin              driver = webdriver.Firefox(options=options)              driver.quit()               def test_log_to_file(log_path):         service = webdriver.FirefoxService(log_output=log_path, service_args=['--log', 'debug'])              driver = webdriver.Firefox(service=service)         driver.get("https://www.selenium.dev")              with open(log_path, 'r') as fp:             assert "geckodriver	INFO	Listening on" in fp.readline()              driver.quit()               def test_log_to_stdout(capfd):         service = webdriver.FirefoxService(log_output=subprocess.STDOUT)              driver = webdriver.Firefox(service=service)              out, err = capfd.readouterr()         assert "geckodriver	INFO	Listening on" in out              driver.quit()               def test_log_level(log_path):         service = webdriver.FirefoxService(log_output=log_path, service_args=['--log', 'debug'])              driver = webdriver.Firefox(service=service)              with open(log_path, 'r') as f:             assert '\tDEBUG' in f.read()              driver.quit()               def test_log_truncation(log_path):         service = webdriver.FirefoxService(service_args=['--log-no-truncate', '--log', 'debug'], log_output=log_path)              driver = webdriver.Firefox(service=service)              with open(log_path, 'r') as f:             assert ' ... ' not in f.read()              driver.quit()               def test_profile_location(temp_dir):         service = webdriver.FirefoxService(service_args=['--profile-root', temp_dir])              driver = webdriver.Firefox(service=service)         profile_name = driver.capabilities.get('moz:profile').replace('\\', '/').split('/')[-1]              assert profile_name in os.listdir(temp_dir)              driver.quit()               def test_install_addon(firefox_driver, addon_path_xpi):         driver = firefox_driver              driver.install_addon(addon_path_xpi)              driver.get("https://www.selenium.dev/selenium/web/blank.html")         injected = driver.find_element(webdriver.common.by.By.ID, "webextensions-selenium-example")              assert injected.text == "Content injected by webextensions-selenium-example"               def test_uninstall_addon(firefox_driver, addon_path_xpi):         driver = firefox_driver              id = driver.install_addon(addon_path_xpi)         driver.uninstall_addon(id)              driver.get("https://www.selenium.dev/selenium/web/blank.html")         assert len(driver.find_elements(webdriver.common.by.By.ID, "webextensions-selenium-example")) == 0               def test_install_unsigned_addon_directory(firefox_driver, addon_path_dir):         driver = firefox_driver              driver.install_addon(addon_path_dir, temporary=True)              driver.get("https://www.selenium.dev/selenium/web/blank.html")         injected = driver.find_element(webdriver.common.by.By.ID, "webextensions-selenium-example")              assert injected.text == "Content injected by webextensions-selenium-example"               def test_install_unsigned_addon_directory_slash(firefox_driver, addon_path_dir_slash):         driver = firefox_driver              driver.install_addon(addon_path_dir_slash, temporary=True)              driver.get("https://www.selenium.dev/selenium/web/blank.html")         injected = driver.find_element(webdriver.common.by.By.ID, "webextensions-selenium-example")              assert injected.text == "Content injected by webextensions-selenium-example"               def test_full_page_screenshot(firefox_driver):         driver = firefox_driver              driver.get("https://www.selenium.dev")              driver.save_full_page_screenshot("full_page_screenshot.png")              assert os.path.exists("full_page_screenshot.png")              driver.quit()               def test_set_context():         options = webdriver.FirefoxOptions()         options.add_argument("-remote-allow-system-access")         driver = webdriver.Firefox(options=options)              with driver.context(driver.CONTEXT_CHROME):             driver.execute_script("console.log('Inside Chrome context');")              # Check if the context is back to content         assert driver.execute("GET_CONTEXT")["value"] == "content"         driver.quit()               def test_firefox_profile():         from selenium.webdriver.firefox.options import Options         from selenium.webdriver.firefox.firefox_profile import FirefoxProfile              options = Options()         firefox_profile = FirefoxProfile()         firefox_profile.set_preference("javascript.enabled", False)         options.profile = firefox_profile              driver = webdriver.Firefox(options=options)              driver.quit()     

[Add Example](https://www.selenium.dev/documentation/about/contributing/#creating-examples)                     driver.context = 'content'

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk//examples/ruby/spec/browsers/firefox_spec.rb#L132)

##### /examples/ruby/spec/browsers/firefox\_spec.rb

Copy  Close               # frozen_string_literal: true          require 'spec_helper'          RSpec.describe 'Firefox' do       describe 'Options' do         let(:firefox_location) { driver_finder && ENV.fetch('FIREFOX_BIN', nil) }              it 'basic options' do           options = Selenium::WebDriver::Options.firefox           @driver = Selenium::WebDriver.for :firefox, options: options         end              it 'add arguments' do           options = Selenium::WebDriver::Options.firefox                options.args << '-headless'                @driver = Selenium::WebDriver.for :firefox, options: options         end              it 'sets location of binary' do           options = Selenium::WebDriver::Options.firefox                options.binary = firefox_location                @driver = Selenium::WebDriver.for :firefox, options: options         end       end            describe 'Service' do         let(:file_name) { Tempfile.new('geckodriver').path }         let(:root_directory) { Dir.mktmpdir }              after do           FileUtils.rm_f(file_name)           FileUtils.rm_rf(root_directory)         end              it 'logs to file' do           service = Selenium::WebDriver::Service.firefox                service.log = file_name                @driver = Selenium::WebDriver.for :firefox, service: service           expect(File.readlines(file_name).first).to include("geckodriver\tINFO\tListening on")         end              it 'logs to console' do           service = Selenium::WebDriver::Service.firefox                service.log = $stdout                expect {             @driver = Selenium::WebDriver.for :firefox, service: service           }.to output(/geckodriver	INFO	Listening on/).to_stdout_from_any_process         end              it 'sets log level' do           service = Selenium::WebDriver::Service.firefox           service.log = file_name                service.args += %w[--log debug]                @driver = Selenium::WebDriver.for :firefox, service: service           expect(File.readlines(file_name).grep(/Marionette	DEBUG/).any?).to eq true         end              it 'stops truncating log lines' do           service = Selenium::WebDriver::Service.firefox(log: file_name, args: %w[--log debug])                service.args << '--log-no-truncate'                @driver = Selenium::WebDriver.for :firefox, service: service           expect(File.readlines(file_name).grep(/ \.\.\. /).any?).to eq false         end              it 'sets default profile location' do           service = Selenium::WebDriver::Service.firefox                service.args += ['--profile-root', root_directory]                @driver = Selenium::WebDriver.for :firefox, service: service           profile_location = Dir.new(@driver.capabilities['moz:profile'])           expect(profile_location.path.gsub('\\', '/')).to include(root_directory)         end       end            describe 'Features' do         let(:driver) { start_firefox }              it 'installs addon' do           extension_file_path = File.expand_path('../spec_support/extensions/webextensions-selenium-example.xpi', __dir__)                driver.install_addon(extension_file_path)                driver.get 'https://www.selenium.dev/selenium/web/blank.html'           injected = driver.find_element(id: 'webextensions-selenium-example')           expect(injected.text).to eq 'Content injected by webextensions-selenium-example'         end              it 'uninstalls addon' do           extension_file_path = File.expand_path('../spec_support/extensions/webextensions-selenium-example.xpi', __dir__)           extension_id = driver.install_addon(extension_file_path)                driver.uninstall_addon(extension_id)                driver.get 'https://www.selenium.dev/selenium/web/blank.html'           expect(driver.find_elements(id: 'webextensions-selenium-example')).to be_empty         end              it 'installs unsigned addon' do           extension_dir_path = File.expand_path('../spec_support/extensions/webextensions-selenium-example/', __dir__)                driver.install_addon(extension_dir_path, true)                driver.navigate.to 'https://www.selenium.dev/selenium/web/blank.html'           injected = driver.find_element(id: 'webextensions-selenium-example')           expect(injected.text).to eq 'Content injected by webextensions-selenium-example'         end              it 'takes full page screenshot' do           driver.navigate.to 'https://www.selenium.dev/selenium/web/blank.html'           Dir.mktmpdir('screenshot_test') do |dir|             screenshot = driver.save_full_page_screenshot(File.join(dir, 'screenshot.png'))                  expect(screenshot).to be_a File           end         end              it 'sets the context' do           driver.context = 'content'           expect(driver.context).to eq 'content'         end       end            describe 'Profile' do         it 'creates a new profile' do           profile = Selenium::WebDriver::Firefox::Profile.new           profile['browser.download.dir'] = '/tmp/webdriver-downloads'           options = Selenium::WebDriver::Firefox::Options.new(profile: profile)           expect(options.profile).to eq(profile)         end       end            def driver_finder         options = Selenium::WebDriver::Options.firefox(browser_version: 'stable')         service = Selenium::WebDriver::Service.firefox         finder = Selenium::WebDriver::DriverFinder.new(options, service)         ENV['GECKODRIVER_BIN'] = finder.driver_path         ENV['FIREFOX_BIN'] = finder.browser_path       end     end     

[Add Example](https://www.selenium.dev/documentation/about/contributing/#creating-examples)

[Add Example](https://www.selenium.dev/documentation/about/contributing/#creating-examples)

**Note** : As of Firefox 138, geckodriver needs to be started with the argument `--allow-system-access` to switch the context to `CHROME`.

# 4 - IE specific functionality

These are capabilities and features specific to Microsoft Internet Explorer browsers.

As of June 2022, Selenium officially no longer supports standalone Internet Explorer. The Internet Explorer driver still supports running Microsoft Edge in “IE Compatibility Mode.”

## Special considerations

The IE Driver is the only driver maintained by the Selenium Project directly. While binaries for both the 32-bit and 64-bit versions of Internet Explorer are available, there are some [known limitations](https://jimevansmusic.blogspot.co.uk/2014/09/screenshots-sendkeys-and-sixty-four.html) with the 64-bit driver. As such it is recommended to use the 32-bit driver.

Additional information about using Internet Explorer can be found on the [IE Driver Server page](https://www.selenium.dev/documentation/ie_driver_server/)

## Options

Starting a Microsoft Edge browser in Internet Explorer Compatibility mode with basic defined options looks like this:

  * Java   * Python   * CSharp   * Ruby   * JavaScript   * Kotlin

                      InternetExplorerOptions options = new InternetExplorerOptions();             options.attachToEdgeChrome();             options.withEdgeExecutablePath(getEdgeLocation());             driver = new InternetExplorerDriver(options);

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk//examples/java/src/test/java/dev/selenium/browsers/InternetExplorerTest.java#38-L41)

##### /examples/java/src/test/java/dev/selenium/browsers/InternetExplorerTest.java

Copy  Close               package dev.selenium.browsers;          import org.junit.jupiter.api.AfterEach;     import org.junit.jupiter.api.Assertions;     import org.junit.jupiter.api.Test;     import org.junit.jupiter.api.condition.EnabledOnOs;     import org.junit.jupiter.api.condition.OS;     import org.openqa.selenium.ie.InternetExplorerDriver;     import org.openqa.selenium.ie.InternetExplorerDriverLogLevel;     import org.openqa.selenium.ie.InternetExplorerDriverService;     import org.openqa.selenium.ie.InternetExplorerOptions;          import java.io.File;     import java.io.IOException;     import java.io.PrintStream;     import java.nio.file.Files;          @EnabledOnOs(OS.WINDOWS)     public class InternetExplorerTest {         public InternetExplorerDriver driver;         private File logLocation;         private File tempDirectory;              @AfterEach         public void quit() {             if (logLocation != null && logLocation.exists()) {                 logLocation.delete();             }             if (tempDirectory  != null && tempDirectory.exists()) {                 tempDirectory.delete();             }                  driver.quit();         }              @Test         public void basicOptionsWin10() {             InternetExplorerOptions options = new InternetExplorerOptions();             options.attachToEdgeChrome();             options.withEdgeExecutablePath(getEdgeLocation());             driver = new InternetExplorerDriver(options);         }              @Test         public void basicOptionsWin11() {             InternetExplorerOptions options = new InternetExplorerOptions();             driver = new InternetExplorerDriver(options);         }              @Test         public void logsToFile() throws IOException {             InternetExplorerDriverService service = new InternetExplorerDriverService.Builder()                     .withLogFile(getLogLocation())                     .build();                  driver = new InternetExplorerDriver(service);                  String fileContent = new String(Files.readAllBytes(getLogLocation().toPath()));             Assertions.assertTrue(fileContent.contains("Started InternetExplorerDriver server"));         }              @Test         public void logsToConsole() throws IOException {             System.setOut(new PrintStream(getLogLocation()));                  InternetExplorerDriverService service = new InternetExplorerDriverService.Builder()                     .withLogOutput(System.out)                     .build();                  driver = new InternetExplorerDriver(service);                  String fileContent = new String(Files.readAllBytes(getLogLocation().toPath()));             Assertions.assertTrue(fileContent.contains("Started InternetExplorerDriver server"));         }              @Test         public void logsWithLevel() throws IOException {             System.setProperty(InternetExplorerDriverService.IE_DRIVER_LOGFILE_PROPERTY,                     getLogLocation().getAbsolutePath());                  InternetExplorerDriverService service = new InternetExplorerDriverService.Builder()                     .withLogLevel(InternetExplorerDriverLogLevel.WARN)                     .build();                  driver = new InternetExplorerDriver(service);                  String fileContent = new String(Files.readAllBytes(getLogLocation().toPath()));             Assertions.assertTrue(fileContent.contains("Invalid capability setting: timeouts is type null"));         }              @Test         public void supportingFilesLocation() throws IOException {             InternetExplorerDriverService service = new InternetExplorerDriverService.Builder()                     .withExtractPath(getTempDirectory())                     .build();                  driver = new InternetExplorerDriver(service);             Assertions.assertTrue(new File(getTempDirectory() + "/IEDriver.tmp").exists());         }              private File getLogLocation() throws IOException {             if (logLocation == null || !logLocation.exists()) {                 logLocation = File.createTempFile("iedriver-", ".log");             }                  return logLocation;         }              private File getTempDirectory() throws IOException {             if (tempDirectory == null || !tempDirectory.exists()) {                 tempDirectory = Files.createTempDirectory("supporting-").toFile();             }                  return tempDirectory;         }              private String getEdgeLocation() {             return System.getenv("EDGE_BIN");         }     }                        options = webdriver.IeOptions()         options.attach_to_edge_chrome = True         options.edge_executable_path = edge_bin         driver = webdriver.Ie(options=options)

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk//examples/python/tests/browsers/test_internet_explorer.py#L11-L14)

##### /examples/python/tests/browsers/test\_internet\_explorer.py

Copy  Close               import os     import subprocess     import sys          import pytest     from selenium import webdriver               @pytest.mark.skipif(sys.platform != "win32", reason="requires Windows")     def test_basic_options_win10(edge_bin):         options = webdriver.IeOptions()         options.attach_to_edge_chrome = True         options.edge_executable_path = edge_bin         driver = webdriver.Ie(options=options)              driver.quit()               @pytest.mark.skipif(sys.platform != "win32", reason="requires Windows")     def test_basic_options_win11():         options = webdriver.IeOptions()         driver = webdriver.Ie(options=options)              driver.quit()          @pytest.mark.skipif(sys.platform != "win32", reason="requires Windows")     def test_file_upload_timeout():         options = webdriver.IeOptions()         options.file_upload_timeout = 2000              driver = webdriver.Ie(options=options)              driver.quit()               @pytest.mark.skipif(sys.platform != "win32", reason="requires Windows")     def test_ensure_clean_session():         options = webdriver.IeOptions()         options.ensure_clean_session = True              driver = webdriver.Ie(options=options)              driver.quit()               @pytest.mark.skipif(sys.platform != "win32", reason="requires Windows")     def test_ignore_zoom_level():         options = webdriver.IeOptions()         options.ignore_zoom_level = True              driver = webdriver.Ie(options=options)              driver.quit()               @pytest.mark.skipif(sys.platform != "win32", reason="requires Windows")     def test_ignore_protected_mode_settings():         options = webdriver.IeOptions()         options.ignore_protected_mode_settings = True              driver = webdriver.Ie(options=options)              driver.quit()               @pytest.mark.skipif(sys.platform != "win32", reason="requires Windows")     def test_silent():         service = webdriver.IeService(service_args=["--silent"])         driver = webdriver.Ie(service=service)              driver.quit()               @pytest.mark.skipif(sys.platform != "win32", reason="requires Windows")     def test_cmd_options():         options = webdriver.IeOptions()         options.add_argument("-private")              driver = webdriver.Ie(options=options)              driver.quit()          # Skipping this as it fails on Windows because the value of registry setting in      # HKEY_CURRENT_USER\Software\Microsoft\Internet Explorer\Main\TabProcGrowth must be '0'      @pytest.mark.skip     def test_force_create_process_api():         options = webdriver.IeOptions()         options.force_create_process_api = True              driver = webdriver.Ie(options=options)              driver.quit()               @pytest.mark.skipif(sys.platform != "win32", reason="requires Windows")     def test_log_to_file(log_path):         service = webdriver.IeService(log_output=log_path, log_level="INFO")              driver = webdriver.Ie(service=service)              with open(log_path, "r") as fp:             assert "Starting WebDriver server" in fp.readline()              driver.quit()               @pytest.mark.skipif(sys.platform != "win32", reason="requires Windows")     def test_log_to_stdout(capfd):         service = webdriver.IeService(log_output=subprocess.STDOUT)              driver = webdriver.Ie(service=service)              out, err = capfd.readouterr()         assert "Started InternetExplorerDriver server" in out              driver.quit()               @pytest.mark.skipif(sys.platform != "win32", reason="requires Windows")     def test_log_level(log_path):         service = webdriver.IeService(log_output=log_path, log_level="WARN")              driver = webdriver.Ie(service=service)              with open(log_path, "r") as fp:             assert "Started InternetExplorerDriver server (32-bit)" in fp.readline()              driver.quit()               @pytest.mark.skipif(sys.platform != "win32", reason="requires Windows")     def test_supporting_files(temp_dir):         service = webdriver.IeService(service_args=["–extract-path=" + temp_dir])              driver = webdriver.Ie(service=service)              driver.quit()                                var options = new InternetExplorerOptions();                 options.AttachToEdgeChrome = true;                 options.EdgeExecutablePath = GetEdgeLocation();                 _driver = new InternetExplorerDriver(options);

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk//examples/dotnet/SeleniumDocs/Browsers/InternetExplorerTest.cs#L35-L38)

##### /examples/dotnet/SeleniumDocs/Browsers/InternetExplorerTest.cs

Copy  Close               using System;     using System.IO;     using System.Linq;     using Microsoft.VisualStudio.TestTools.UnitTesting;     using OpenQA.Selenium.IE;     using SeleniumDocs.TestSupport;          namespace SeleniumDocs.Browsers     {         [TestClassCustom]         [EnabledOnOs("WINDOWS")]         public class InternetExplorerTest         {             private InternetExplorerDriver _driver;             private string _logLocation;             private string _tempPath;                  [TestCleanup]             public void Cleanup()             {                 if (_logLocation != null && File.Exists(_logLocation))                 {                     File.Delete(_logLocation);                 }                 if (_tempPath != null && File.Exists(_tempPath))                 {                     File.Delete(_tempPath);                 }                 _driver.Quit();             }                  [TestMethod]             public void BasicOptionsWin10()             {                 var options = new InternetExplorerOptions();                 options.AttachToEdgeChrome = true;                 options.EdgeExecutablePath = GetEdgeLocation();                 _driver = new InternetExplorerDriver(options);             }                  [TestMethod]             public void BasicOptionsWin11()             {                 var options = new InternetExplorerOptions();                 _driver = new InternetExplorerDriver(options);             }                  [TestMethod]             [Ignore("Not implemented")]             public void LogsToFile()             {                 var service = InternetExplorerDriverService.CreateDefaultService();                 service.LogFile = GetLogLocation();                      _driver = new InternetExplorerDriver(service);                 _driver.Quit(); // Close the Service log file before reading                 var lines = File.ReadLines(GetLogLocation());                 Console.WriteLine("Lines: {0}", lines);                 Assert.IsTrue(lines.Contains("Started InternetExplorerDriver server"));             }                  [TestMethod]             [Ignore("Not implemented")]             public void LogsToConsole()             {                 var stringWriter = new StringWriter();                 var originalOutput = Console.Out;                 Console.SetOut(stringWriter);                      var service = InternetExplorerDriverService.CreateDefaultService();                      //service.LogToConsole = true;                      _driver = new InternetExplorerDriver(service);                 Assert.IsTrue(stringWriter.ToString().Contains("geckodriver	INFO	Listening on"));                 Console.SetOut(originalOutput);                 stringWriter.Dispose();             }                  [TestMethod]             public void LogsLevel()             {                 var service = InternetExplorerDriverService.CreateDefaultService();                 service.LogFile = GetLogLocation();                      service.LoggingLevel = InternetExplorerDriverLogLevel.Warn;                      _driver = new InternetExplorerDriver(service);                 _driver.Quit(); // Close the Service log file before reading                 var lines = File.ReadLines(GetLogLocation());                 Assert.IsNotNull(lines.FirstOrDefault(line => line.Contains("Invalid capability setting: timeouts is type null")));             }                  [TestMethod]             public void SupportingFilesLocation()             {                 var service = InternetExplorerDriverService.CreateDefaultService();                      service.LibraryExtractionPath = GetTempDirectory();                      _driver = new InternetExplorerDriver(service);                 Assert.IsTrue(File.Exists(GetTempDirectory() + "/IEDriver.tmp"));             }                  private string GetLogLocation()             {                 if (_logLocation == null || !File.Exists(_logLocation))                 {                     _logLocation = Path.GetTempFileName();                 }                      return _logLocation;             }                  private string GetTempDirectory()             {                 if (_tempPath == null || !File.Exists(_tempPath))                 {                     _tempPath = Path.GetTempPath();                 }                      return _tempPath;             }                  private string GetEdgeLocation()             {                 return Environment.GetEnvironmentVariable("EDGE_BIN");             }         }     }                     options = Selenium::WebDriver::IE::Options.new           options.attach_to_edge_chrome = true           options.edge_executable_path = edge_location           @driver = Selenium::WebDriver.for :ie, options: options

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk//examples/ruby/spec/browsers/internet_explorer_spec.rb#L17-L20)

##### /examples/ruby/spec/browsers/internet\_explorer\_spec.rb

Copy  Close               # frozen_string_literal: true          require 'spec_helper'          RSpec.describe 'Internet Explorer', exclusive: {platform: :windows} do       describe 'Options' do         let(:edge_location) { ENV.fetch('EDGE_BIN', nil) }         let(:url) { 'https://www.selenium.dev/selenium/web/' }              before do           @options = Selenium::WebDriver::IE::Options.new           @options.attach_to_edge_chrome = true           @options.edge_executable_path = edge_location         end              it 'basic options Win10' do           options = Selenium::WebDriver::IE::Options.new           options.attach_to_edge_chrome = true           options.edge_executable_path = edge_location           @driver = Selenium::WebDriver.for :ie, options: options         end              it 'basic options Win11' do           options = Selenium::WebDriver::Options.ie           @driver = Selenium::WebDriver.for :ie, options: options         end              it 'sets the file upload dialog timeout' do           @options.file_upload_dialog_timeout = 2000           driver = Selenium::WebDriver.for(:ie, options: @options)           driver.quit         end              it 'ensures a clean session' do           @options.ensure_clean_session = true           driver = Selenium::WebDriver.for(:ie, options: @options)           driver.quit         end              it 'ignores the zoom setting' do           @options.ignore_zoom_level = true           driver = Selenium::WebDriver.for(:ie, options: @options)           driver.quit         end              it 'ignores the protected mode settings' do           @options.ignore_protected_mode_settings = true           driver = Selenium::WebDriver.for(:ie, options: @options)           driver.quit         end              it 'adds the silent option', skip: 'This capability will be added on the release 4.22.0' do           @options.silent = true           expect(@options.silent).to be_truthy         end              it 'sets the command line options' do           @options.add_argument('-k')           Selenium::WebDriver.for(:ie, options: @options)         end              it 'launches ie with the create process api', skip: 'When using with IE 8 or higher, it needs a registry value' do           @options.force_create_process_api = true           Selenium::WebDriver.for(:ie, options: @options)           expect(@options.instance_variable_get(:@options)['force_create_process_api'])             .to eq({force_create_process_api: true})         end       end            describe 'Service' do         let(:file_name) { Tempfile.new('iedriver').path }         let(:root_directory) { Dir.mktmpdir }              after do           FileUtils.rm_f(file_name)           FileUtils.remove_entry root_directory         end              it 'logs to file' do           service = Selenium::WebDriver::Service.ie                service.log = file_name                @driver = Selenium::WebDriver.for :ie, service: service           expect(File.readlines(file_name).first).to include('Started InternetExplorerDriver server')         end              it 'logs to console' do           service = Selenium::WebDriver::Service.ie                service.log = $stdout                expect {             @driver = Selenium::WebDriver.for :ie, service: service           }.to output(/Started InternetExplorerDriver server/).to_stdout_from_any_process         end              it 'sets log level' do           service = Selenium::WebDriver::Service.ie           service.log = $stdout                service.args << '-log-level=WARN'                expect {             @driver = Selenium::WebDriver.for :ie, service: service           }.to output(/Invalid capability setting: timeouts is type null/).to_stdout_from_any_process         end              it 'sets location for supporting files' do           service = Selenium::WebDriver::Service.ie                service.args << "–extract-path=#{root_directory}"                @driver = Selenium::WebDriver.for :ie, service: service         end       end     end     

[Add Example](https://www.selenium.dev/documentation/about/contributing/#creating-examples)

[Add Example](https://www.selenium.dev/documentation/about/contributing/#creating-examples)

As of Internet Explorer Driver v4.5.0:

  * If IE is not present on the system \(default in Windows 11\), you do not need to use the two parameters above. IE Driver will use Edge and will automatically locate it.   * If IE and Edge are both present on the system, you only need to set attaching to Edge, IE Driver will automatically locate Edge on your system.

So, if IE is not on the system, you only need:

[Move Code](https://www.selenium.dev/documentation/about/contributing/#moving-examples)

  * Java   * Python   * CSharp   * Ruby   * JavaScript   * Kotlin

                      InternetExplorerOptions options = new InternetExplorerOptions();             driver = new InternetExplorerDriver(options);

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk//examples/java/src/test/java/dev/selenium/browsers/InternetExplorerTest.java#46-L47)

##### /examples/java/src/test/java/dev/selenium/browsers/InternetExplorerTest.java

Copy  Close               package dev.selenium.browsers;          import org.junit.jupiter.api.AfterEach;     import org.junit.jupiter.api.Assertions;     import org.junit.jupiter.api.Test;     import org.junit.jupiter.api.condition.EnabledOnOs;     import org.junit.jupiter.api.condition.OS;     import org.openqa.selenium.ie.InternetExplorerDriver;     import org.openqa.selenium.ie.InternetExplorerDriverLogLevel;     import org.openqa.selenium.ie.InternetExplorerDriverService;     import org.openqa.selenium.ie.InternetExplorerOptions;          import java.io.File;     import java.io.IOException;     import java.io.PrintStream;     import java.nio.file.Files;          @EnabledOnOs(OS.WINDOWS)     public class InternetExplorerTest {         public InternetExplorerDriver driver;         private File logLocation;         private File tempDirectory;              @AfterEach         public void quit() {             if (logLocation != null && logLocation.exists()) {                 logLocation.delete();             }             if (tempDirectory  != null && tempDirectory.exists()) {                 tempDirectory.delete();             }                  driver.quit();         }              @Test         public void basicOptionsWin10() {             InternetExplorerOptions options = new InternetExplorerOptions();             options.attachToEdgeChrome();             options.withEdgeExecutablePath(getEdgeLocation());             driver = new InternetExplorerDriver(options);         }              @Test         public void basicOptionsWin11() {             InternetExplorerOptions options = new InternetExplorerOptions();             driver = new InternetExplorerDriver(options);         }              @Test         public void logsToFile() throws IOException {             InternetExplorerDriverService service = new InternetExplorerDriverService.Builder()                     .withLogFile(getLogLocation())                     .build();                  driver = new InternetExplorerDriver(service);                  String fileContent = new String(Files.readAllBytes(getLogLocation().toPath()));             Assertions.assertTrue(fileContent.contains("Started InternetExplorerDriver server"));         }              @Test         public void logsToConsole() throws IOException {             System.setOut(new PrintStream(getLogLocation()));                  InternetExplorerDriverService service = new InternetExplorerDriverService.Builder()                     .withLogOutput(System.out)                     .build();                  driver = new InternetExplorerDriver(service);                  String fileContent = new String(Files.readAllBytes(getLogLocation().toPath()));             Assertions.assertTrue(fileContent.contains("Started InternetExplorerDriver server"));         }              @Test         public void logsWithLevel() throws IOException {             System.setProperty(InternetExplorerDriverService.IE_DRIVER_LOGFILE_PROPERTY,                     getLogLocation().getAbsolutePath());                  InternetExplorerDriverService service = new InternetExplorerDriverService.Builder()                     .withLogLevel(InternetExplorerDriverLogLevel.WARN)                     .build();                  driver = new InternetExplorerDriver(service);                  String fileContent = new String(Files.readAllBytes(getLogLocation().toPath()));             Assertions.assertTrue(fileContent.contains("Invalid capability setting: timeouts is type null"));         }              @Test         public void supportingFilesLocation() throws IOException {             InternetExplorerDriverService service = new InternetExplorerDriverService.Builder()                     .withExtractPath(getTempDirectory())                     .build();                  driver = new InternetExplorerDriver(service);             Assertions.assertTrue(new File(getTempDirectory() + "/IEDriver.tmp").exists());         }              private File getLogLocation() throws IOException {             if (logLocation == null || !logLocation.exists()) {                 logLocation = File.createTempFile("iedriver-", ".log");             }                  return logLocation;         }              private File getTempDirectory() throws IOException {             if (tempDirectory == null || !tempDirectory.exists()) {                 tempDirectory = Files.createTempDirectory("supporting-").toFile();             }                  return tempDirectory;         }              private String getEdgeLocation() {             return System.getenv("EDGE_BIN");         }     }                        options = webdriver.IeOptions()         driver = webdriver.Ie(options=options)

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk//examples/python/tests/browsers/test_internet_explorer.py#L21-L22)

##### /examples/python/tests/browsers/test\_internet\_explorer.py

Copy  Close               import os     import subprocess     import sys          import pytest     from selenium import webdriver               @pytest.mark.skipif(sys.platform != "win32", reason="requires Windows")     def test_basic_options_win10(edge_bin):         options = webdriver.IeOptions()         options.attach_to_edge_chrome = True         options.edge_executable_path = edge_bin         driver = webdriver.Ie(options=options)              driver.quit()               @pytest.mark.skipif(sys.platform != "win32", reason="requires Windows")     def test_basic_options_win11():         options = webdriver.IeOptions()         driver = webdriver.Ie(options=options)              driver.quit()          @pytest.mark.skipif(sys.platform != "win32", reason="requires Windows")     def test_file_upload_timeout():         options = webdriver.IeOptions()         options.file_upload_timeout = 2000              driver = webdriver.Ie(options=options)              driver.quit()               @pytest.mark.skipif(sys.platform != "win32", reason="requires Windows")     def test_ensure_clean_session():         options = webdriver.IeOptions()         options.ensure_clean_session = True              driver = webdriver.Ie(options=options)              driver.quit()               @pytest.mark.skipif(sys.platform != "win32", reason="requires Windows")     def test_ignore_zoom_level():         options = webdriver.IeOptions()         options.ignore_zoom_level = True              driver = webdriver.Ie(options=options)              driver.quit()               @pytest.mark.skipif(sys.platform != "win32", reason="requires Windows")     def test_ignore_protected_mode_settings():         options = webdriver.IeOptions()         options.ignore_protected_mode_settings = True              driver = webdriver.Ie(options=options)              driver.quit()               @pytest.mark.skipif(sys.platform != "win32", reason="requires Windows")     def test_silent():         service = webdriver.IeService(service_args=["--silent"])         driver = webdriver.Ie(service=service)              driver.quit()               @pytest.mark.skipif(sys.platform != "win32", reason="requires Windows")     def test_cmd_options():         options = webdriver.IeOptions()         options.add_argument("-private")              driver = webdriver.Ie(options=options)              driver.quit()          # Skipping this as it fails on Windows because the value of registry setting in      # HKEY_CURRENT_USER\Software\Microsoft\Internet Explorer\Main\TabProcGrowth must be '0'      @pytest.mark.skip     def test_force_create_process_api():         options = webdriver.IeOptions()         options.force_create_process_api = True              driver = webdriver.Ie(options=options)              driver.quit()               @pytest.mark.skipif(sys.platform != "win32", reason="requires Windows")     def test_log_to_file(log_path):         service = webdriver.IeService(log_output=log_path, log_level="INFO")              driver = webdriver.Ie(service=service)              with open(log_path, "r") as fp:             assert "Starting WebDriver server" in fp.readline()              driver.quit()               @pytest.mark.skipif(sys.platform != "win32", reason="requires Windows")     def test_log_to_stdout(capfd):         service = webdriver.IeService(log_output=subprocess.STDOUT)              driver = webdriver.Ie(service=service)              out, err = capfd.readouterr()         assert "Started InternetExplorerDriver server" in out              driver.quit()               @pytest.mark.skipif(sys.platform != "win32", reason="requires Windows")     def test_log_level(log_path):         service = webdriver.IeService(log_output=log_path, log_level="WARN")              driver = webdriver.Ie(service=service)              with open(log_path, "r") as fp:             assert "Started InternetExplorerDriver server (32-bit)" in fp.readline()              driver.quit()               @pytest.mark.skipif(sys.platform != "win32", reason="requires Windows")     def test_supporting_files(temp_dir):         service = webdriver.IeService(service_args=["–extract-path=" + temp_dir])              driver = webdriver.Ie(service=service)              driver.quit()                                var options = new InternetExplorerOptions();                 _driver = new InternetExplorerDriver(options);

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk//examples/dotnet/SeleniumDocs/Browsers/InternetExplorerTest.cs#L44-L45)

##### /examples/dotnet/SeleniumDocs/Browsers/InternetExplorerTest.cs

Copy  Close               using System;     using System.IO;     using System.Linq;     using Microsoft.VisualStudio.TestTools.UnitTesting;     using OpenQA.Selenium.IE;     using SeleniumDocs.TestSupport;          namespace SeleniumDocs.Browsers     {         [TestClassCustom]         [EnabledOnOs("WINDOWS")]         public class InternetExplorerTest         {             private InternetExplorerDriver _driver;             private string _logLocation;             private string _tempPath;                  [TestCleanup]             public void Cleanup()             {                 if (_logLocation != null && File.Exists(_logLocation))                 {                     File.Delete(_logLocation);                 }                 if (_tempPath != null && File.Exists(_tempPath))                 {                     File.Delete(_tempPath);                 }                 _driver.Quit();             }                  [TestMethod]             public void BasicOptionsWin10()             {                 var options = new InternetExplorerOptions();                 options.AttachToEdgeChrome = true;                 options.EdgeExecutablePath = GetEdgeLocation();                 _driver = new InternetExplorerDriver(options);             }                  [TestMethod]             public void BasicOptionsWin11()             {                 var options = new InternetExplorerOptions();                 _driver = new InternetExplorerDriver(options);             }                  [TestMethod]             [Ignore("Not implemented")]             public void LogsToFile()             {                 var service = InternetExplorerDriverService.CreateDefaultService();                 service.LogFile = GetLogLocation();                      _driver = new InternetExplorerDriver(service);                 _driver.Quit(); // Close the Service log file before reading                 var lines = File.ReadLines(GetLogLocation());                 Console.WriteLine("Lines: {0}", lines);                 Assert.IsTrue(lines.Contains("Started InternetExplorerDriver server"));             }                  [TestMethod]             [Ignore("Not implemented")]             public void LogsToConsole()             {                 var stringWriter = new StringWriter();                 var originalOutput = Console.Out;                 Console.SetOut(stringWriter);                      var service = InternetExplorerDriverService.CreateDefaultService();                      //service.LogToConsole = true;                      _driver = new InternetExplorerDriver(service);                 Assert.IsTrue(stringWriter.ToString().Contains("geckodriver	INFO	Listening on"));                 Console.SetOut(originalOutput);                 stringWriter.Dispose();             }                  [TestMethod]             public void LogsLevel()             {                 var service = InternetExplorerDriverService.CreateDefaultService();                 service.LogFile = GetLogLocation();                      service.LoggingLevel = InternetExplorerDriverLogLevel.Warn;                      _driver = new InternetExplorerDriver(service);                 _driver.Quit(); // Close the Service log file before reading                 var lines = File.ReadLines(GetLogLocation());                 Assert.IsNotNull(lines.FirstOrDefault(line => line.Contains("Invalid capability setting: timeouts is type null")));             }                  [TestMethod]             public void SupportingFilesLocation()             {                 var service = InternetExplorerDriverService.CreateDefaultService();                      service.LibraryExtractionPath = GetTempDirectory();                      _driver = new InternetExplorerDriver(service);                 Assert.IsTrue(File.Exists(GetTempDirectory() + "/IEDriver.tmp"));             }                  private string GetLogLocation()             {                 if (_logLocation == null || !File.Exists(_logLocation))                 {                     _logLocation = Path.GetTempFileName();                 }                      return _logLocation;             }                  private string GetTempDirectory()             {                 if (_tempPath == null || !File.Exists(_tempPath))                 {                     _tempPath = Path.GetTempPath();                 }                      return _tempPath;             }                  private string GetEdgeLocation()             {                 return Environment.GetEnvironmentVariable("EDGE_BIN");             }         }     }                     options = Selenium::WebDriver::Options.ie           @driver = Selenium::WebDriver.for :ie, options: options

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk//examples/ruby/spec/browsers/internet_explorer_spec.rb#L24-L25)

##### /examples/ruby/spec/browsers/internet\_explorer\_spec.rb

Copy  Close               # frozen_string_literal: true          require 'spec_helper'          RSpec.describe 'Internet Explorer', exclusive: {platform: :windows} do       describe 'Options' do         let(:edge_location) { ENV.fetch('EDGE_BIN', nil) }         let(:url) { 'https://www.selenium.dev/selenium/web/' }              before do           @options = Selenium::WebDriver::IE::Options.new           @options.attach_to_edge_chrome = true           @options.edge_executable_path = edge_location         end              it 'basic options Win10' do           options = Selenium::WebDriver::IE::Options.new           options.attach_to_edge_chrome = true           options.edge_executable_path = edge_location           @driver = Selenium::WebDriver.for :ie, options: options         end              it 'basic options Win11' do           options = Selenium::WebDriver::Options.ie           @driver = Selenium::WebDriver.for :ie, options: options         end              it 'sets the file upload dialog timeout' do           @options.file_upload_dialog_timeout = 2000           driver = Selenium::WebDriver.for(:ie, options: @options)           driver.quit         end              it 'ensures a clean session' do           @options.ensure_clean_session = true           driver = Selenium::WebDriver.for(:ie, options: @options)           driver.quit         end              it 'ignores the zoom setting' do           @options.ignore_zoom_level = true           driver = Selenium::WebDriver.for(:ie, options: @options)           driver.quit         end              it 'ignores the protected mode settings' do           @options.ignore_protected_mode_settings = true           driver = Selenium::WebDriver.for(:ie, options: @options)           driver.quit         end              it 'adds the silent option', skip: 'This capability will be added on the release 4.22.0' do           @options.silent = true           expect(@options.silent).to be_truthy         end              it 'sets the command line options' do           @options.add_argument('-k')           Selenium::WebDriver.for(:ie, options: @options)         end              it 'launches ie with the create process api', skip: 'When using with IE 8 or higher, it needs a registry value' do           @options.force_create_process_api = true           Selenium::WebDriver.for(:ie, options: @options)           expect(@options.instance_variable_get(:@options)['force_create_process_api'])             .to eq({force_create_process_api: true})         end       end            describe 'Service' do         let(:file_name) { Tempfile.new('iedriver').path }         let(:root_directory) { Dir.mktmpdir }              after do           FileUtils.rm_f(file_name)           FileUtils.remove_entry root_directory         end              it 'logs to file' do           service = Selenium::WebDriver::Service.ie                service.log = file_name                @driver = Selenium::WebDriver.for :ie, service: service           expect(File.readlines(file_name).first).to include('Started InternetExplorerDriver server')         end              it 'logs to console' do           service = Selenium::WebDriver::Service.ie                service.log = $stdout                expect {             @driver = Selenium::WebDriver.for :ie, service: service           }.to output(/Started InternetExplorerDriver server/).to_stdout_from_any_process         end              it 'sets log level' do           service = Selenium::WebDriver::Service.ie           service.log = $stdout                service.args << '-log-level=WARN'                expect {             @driver = Selenium::WebDriver.for :ie, service: service           }.to output(/Invalid capability setting: timeouts is type null/).to_stdout_from_any_process         end              it 'sets location for supporting files' do           service = Selenium::WebDriver::Service.ie                service.args << "–extract-path=#{root_directory}"                @driver = Selenium::WebDriver.for :ie, service: service         end       end     end                    let driver = await new Builder()     .forBrowser('internet explorer')     .setIEOptions(options)     .build();               val options = InternetExplorerOptions()     val driver = InternetExplorerDriver(options)

Here are a few common use cases with different capabilities:

### fileUploadDialogTimeout

In some environments, Internet Explorer may timeout when opening the File Upload dialog. IEDriver has a default timeout of 1000ms, but you can increase the timeout using the fileUploadDialogTimeout capability.

[Move Code](https://www.selenium.dev/documentation/about/contributing/#moving-examples)

  * Java   * Python   * CSharp   * Ruby   * JavaScript   * Kotlin

              InternetExplorerOptions options = new InternetExplorerOptions();     options.waitForUploadDialogUpTo(Duration.ofSeconds(2));     WebDriver driver = new RemoteWebDriver(options);                          options = webdriver.IeOptions()         options.file_upload_timeout = 2000

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk//examples/python/tests/browsers/test_internet_explorer.py#L28-L29)

##### /examples/python/tests/browsers/test\_internet\_explorer.py

Copy  Close               import os     import subprocess     import sys          import pytest     from selenium import webdriver               @pytest.mark.skipif(sys.platform != "win32", reason="requires Windows")     def test_basic_options_win10(edge_bin):         options = webdriver.IeOptions()         options.attach_to_edge_chrome = True         options.edge_executable_path = edge_bin         driver = webdriver.Ie(options=options)              driver.quit()               @pytest.mark.skipif(sys.platform != "win32", reason="requires Windows")     def test_basic_options_win11():         options = webdriver.IeOptions()         driver = webdriver.Ie(options=options)              driver.quit()          @pytest.mark.skipif(sys.platform != "win32", reason="requires Windows")     def test_file_upload_timeout():         options = webdriver.IeOptions()         options.file_upload_timeout = 2000              driver = webdriver.Ie(options=options)              driver.quit()               @pytest.mark.skipif(sys.platform != "win32", reason="requires Windows")     def test_ensure_clean_session():         options = webdriver.IeOptions()         options.ensure_clean_session = True              driver = webdriver.Ie(options=options)              driver.quit()               @pytest.mark.skipif(sys.platform != "win32", reason="requires Windows")     def test_ignore_zoom_level():         options = webdriver.IeOptions()         options.ignore_zoom_level = True              driver = webdriver.Ie(options=options)              driver.quit()               @pytest.mark.skipif(sys.platform != "win32", reason="requires Windows")     def test_ignore_protected_mode_settings():         options = webdriver.IeOptions()         options.ignore_protected_mode_settings = True              driver = webdriver.Ie(options=options)              driver.quit()               @pytest.mark.skipif(sys.platform != "win32", reason="requires Windows")     def test_silent():         service = webdriver.IeService(service_args=["--silent"])         driver = webdriver.Ie(service=service)              driver.quit()               @pytest.mark.skipif(sys.platform != "win32", reason="requires Windows")     def test_cmd_options():         options = webdriver.IeOptions()         options.add_argument("-private")              driver = webdriver.Ie(options=options)              driver.quit()          # Skipping this as it fails on Windows because the value of registry setting in      # HKEY_CURRENT_USER\Software\Microsoft\Internet Explorer\Main\TabProcGrowth must be '0'      @pytest.mark.skip     def test_force_create_process_api():         options = webdriver.IeOptions()         options.force_create_process_api = True              driver = webdriver.Ie(options=options)              driver.quit()               @pytest.mark.skipif(sys.platform != "win32", reason="requires Windows")     def test_log_to_file(log_path):         service = webdriver.IeService(log_output=log_path, log_level="INFO")              driver = webdriver.Ie(service=service)              with open(log_path, "r") as fp:             assert "Starting WebDriver server" in fp.readline()              driver.quit()               @pytest.mark.skipif(sys.platform != "win32", reason="requires Windows")     def test_log_to_stdout(capfd):         service = webdriver.IeService(log_output=subprocess.STDOUT)              driver = webdriver.Ie(service=service)              out, err = capfd.readouterr()         assert "Started InternetExplorerDriver server" in out              driver.quit()               @pytest.mark.skipif(sys.platform != "win32", reason="requires Windows")     def test_log_level(log_path):         service = webdriver.IeService(log_output=log_path, log_level="WARN")              driver = webdriver.Ie(service=service)              with open(log_path, "r") as fp:             assert "Started InternetExplorerDriver server (32-bit)" in fp.readline()              driver.quit()               @pytest.mark.skipif(sys.platform != "win32", reason="requires Windows")     def test_supporting_files(temp_dir):         service = webdriver.IeService(service_args=["–extract-path=" + temp_dir])              driver = webdriver.Ie(service=service)              driver.quit()                    var options = new InternetExplorerOptions();     options.FileUploadDialogTimeout = TimeSpan.FromMilliseconds(2000);     var driver = new RemoteWebDriver(options);                            @options.file_upload_dialog_timeout = 2000

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk//examples/ruby/spec/browsers/internet_explorer_spec.rb#L29)

##### /examples/ruby/spec/browsers/internet\_explorer\_spec.rb

Copy  Close               # frozen_string_literal: true          require 'spec_helper'          RSpec.describe 'Internet Explorer', exclusive: {platform: :windows} do       describe 'Options' do         let(:edge_location) { ENV.fetch('EDGE_BIN', nil) }         let(:url) { 'https://www.selenium.dev/selenium/web/' }              before do           @options = Selenium::WebDriver::IE::Options.new           @options.attach_to_edge_chrome = true           @options.edge_executable_path = edge_location         end              it 'basic options Win10' do           options = Selenium::WebDriver::IE::Options.new           options.attach_to_edge_chrome = true           options.edge_executable_path = edge_location           @driver = Selenium::WebDriver.for :ie, options: options         end              it 'basic options Win11' do           options = Selenium::WebDriver::Options.ie           @driver = Selenium::WebDriver.for :ie, options: options         end              it 'sets the file upload dialog timeout' do           @options.file_upload_dialog_timeout = 2000           driver = Selenium::WebDriver.for(:ie, options: @options)           driver.quit         end              it 'ensures a clean session' do           @options.ensure_clean_session = true           driver = Selenium::WebDriver.for(:ie, options: @options)           driver.quit         end              it 'ignores the zoom setting' do           @options.ignore_zoom_level = true           driver = Selenium::WebDriver.for(:ie, options: @options)           driver.quit         end              it 'ignores the protected mode settings' do           @options.ignore_protected_mode_settings = true           driver = Selenium::WebDriver.for(:ie, options: @options)           driver.quit         end              it 'adds the silent option', skip: 'This capability will be added on the release 4.22.0' do           @options.silent = true           expect(@options.silent).to be_truthy         end              it 'sets the command line options' do           @options.add_argument('-k')           Selenium::WebDriver.for(:ie, options: @options)         end              it 'launches ie with the create process api', skip: 'When using with IE 8 or higher, it needs a registry value' do           @options.force_create_process_api = true           Selenium::WebDriver.for(:ie, options: @options)           expect(@options.instance_variable_get(:@options)['force_create_process_api'])             .to eq({force_create_process_api: true})         end       end            describe 'Service' do         let(:file_name) { Tempfile.new('iedriver').path }         let(:root_directory) { Dir.mktmpdir }              after do           FileUtils.rm_f(file_name)           FileUtils.remove_entry root_directory         end              it 'logs to file' do           service = Selenium::WebDriver::Service.ie                service.log = file_name                @driver = Selenium::WebDriver.for :ie, service: service           expect(File.readlines(file_name).first).to include('Started InternetExplorerDriver server')         end              it 'logs to console' do           service = Selenium::WebDriver::Service.ie                service.log = $stdout                expect {             @driver = Selenium::WebDriver.for :ie, service: service           }.to output(/Started InternetExplorerDriver server/).to_stdout_from_any_process         end              it 'sets log level' do           service = Selenium::WebDriver::Service.ie           service.log = $stdout                service.args << '-log-level=WARN'                expect {             @driver = Selenium::WebDriver.for :ie, service: service           }.to output(/Invalid capability setting: timeouts is type null/).to_stdout_from_any_process         end              it 'sets location for supporting files' do           service = Selenium::WebDriver::Service.ie                service.args << "–extract-path=#{root_directory}"                @driver = Selenium::WebDriver.for :ie, service: service         end       end     end                    const ie = require('selenium-webdriver/ie');     let options = new ie.Options().fileUploadDialogTimeout(2000);     let driver = await Builder()               .setIeOptions(options)               .build();                            val options = InternetExplorerOptions()     options.waitForUploadDialogUpTo(Duration.ofSeconds(2))     val driver = RemoteWebDriver(options)       

### ensureCleanSession

When set to `true`, this capability clears the _Cache, Browser History and Cookies_ for all running instances of InternetExplorer including those started manually or by the driver. By default, it is set to `false`.

Using this capability will cause performance drop while launching the browser, as the driver will wait until the cache gets cleared before launching the IE browser.

This capability accepts a Boolean value as parameter.

[Move Code](https://www.selenium.dev/documentation/about/contributing/#moving-examples)

  * Java   * Python   * CSharp   * Ruby   * JavaScript   * Kotlin

              InternetExplorerOptions options = new InternetExplorerOptions();     options.destructivelyEnsureCleanSession();     WebDriver driver = new RemoteWebDriver(options);                          options = webdriver.IeOptions()         options.ensure_clean_session = True

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk//examples/python/tests/browsers/test_internet_explorer.py#L38-L39)

##### /examples/python/tests/browsers/test\_internet\_explorer.py

Copy  Close               import os     import subprocess     import sys          import pytest     from selenium import webdriver               @pytest.mark.skipif(sys.platform != "win32", reason="requires Windows")     def test_basic_options_win10(edge_bin):         options = webdriver.IeOptions()         options.attach_to_edge_chrome = True         options.edge_executable_path = edge_bin         driver = webdriver.Ie(options=options)              driver.quit()               @pytest.mark.skipif(sys.platform != "win32", reason="requires Windows")     def test_basic_options_win11():         options = webdriver.IeOptions()         driver = webdriver.Ie(options=options)              driver.quit()          @pytest.mark.skipif(sys.platform != "win32", reason="requires Windows")     def test_file_upload_timeout():         options = webdriver.IeOptions()         options.file_upload_timeout = 2000              driver = webdriver.Ie(options=options)              driver.quit()               @pytest.mark.skipif(sys.platform != "win32", reason="requires Windows")     def test_ensure_clean_session():         options = webdriver.IeOptions()         options.ensure_clean_session = True              driver = webdriver.Ie(options=options)              driver.quit()               @pytest.mark.skipif(sys.platform != "win32", reason="requires Windows")     def test_ignore_zoom_level():         options = webdriver.IeOptions()         options.ignore_zoom_level = True              driver = webdriver.Ie(options=options)              driver.quit()               @pytest.mark.skipif(sys.platform != "win32", reason="requires Windows")     def test_ignore_protected_mode_settings():         options = webdriver.IeOptions()         options.ignore_protected_mode_settings = True              driver = webdriver.Ie(options=options)              driver.quit()               @pytest.mark.skipif(sys.platform != "win32", reason="requires Windows")     def test_silent():         service = webdriver.IeService(service_args=["--silent"])         driver = webdriver.Ie(service=service)              driver.quit()               @pytest.mark.skipif(sys.platform != "win32", reason="requires Windows")     def test_cmd_options():         options = webdriver.IeOptions()         options.add_argument("-private")              driver = webdriver.Ie(options=options)              driver.quit()          # Skipping this as it fails on Windows because the value of registry setting in      # HKEY_CURRENT_USER\Software\Microsoft\Internet Explorer\Main\TabProcGrowth must be '0'      @pytest.mark.skip     def test_force_create_process_api():         options = webdriver.IeOptions()         options.force_create_process_api = True              driver = webdriver.Ie(options=options)              driver.quit()               @pytest.mark.skipif(sys.platform != "win32", reason="requires Windows")     def test_log_to_file(log_path):         service = webdriver.IeService(log_output=log_path, log_level="INFO")              driver = webdriver.Ie(service=service)              with open(log_path, "r") as fp:             assert "Starting WebDriver server" in fp.readline()              driver.quit()               @pytest.mark.skipif(sys.platform != "win32", reason="requires Windows")     def test_log_to_stdout(capfd):         service = webdriver.IeService(log_output=subprocess.STDOUT)              driver = webdriver.Ie(service=service)              out, err = capfd.readouterr()         assert "Started InternetExplorerDriver server" in out              driver.quit()               @pytest.mark.skipif(sys.platform != "win32", reason="requires Windows")     def test_log_level(log_path):         service = webdriver.IeService(log_output=log_path, log_level="WARN")              driver = webdriver.Ie(service=service)              with open(log_path, "r") as fp:             assert "Started InternetExplorerDriver server (32-bit)" in fp.readline()              driver.quit()               @pytest.mark.skipif(sys.platform != "win32", reason="requires Windows")     def test_supporting_files(temp_dir):         service = webdriver.IeService(service_args=["–extract-path=" + temp_dir])              driver = webdriver.Ie(service=service)              driver.quit()                    var options = new InternetExplorerOptions();     options.EnsureCleanSession = true;     var driver = new RemoteWebDriver(options);                            @options.ensure_clean_session = true

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk//examples/ruby/spec/browsers/internet_explorer_spec.rb#L35)

##### /examples/ruby/spec/browsers/internet\_explorer\_spec.rb

Copy  Close               # frozen_string_literal: true                  require 'spec_helper'                  RSpec.describe 'Internet Explorer', exclusive: {platform: :windows} do           describe 'Options' do             let(:edge_location) { ENV.fetch('EDGE_BIN', nil) }             let(:url) { 'https://www.selenium.dev/selenium/web/' }                      before do               @options = Selenium::WebDriver::IE::Options.new               @options.attach_to_edge_chrome = true               @options.edge_executable_path = edge_location             end                      it 'basic options Win10' do               options = Selenium::WebDriver::IE::Options.new               options.attach_to_edge_chrome = true               options.edge_executable_path = edge_location               @driver = Selenium::WebDriver.for :ie, options: options             end                      it 'basic options Win11' do               options = Selenium::WebDriver::Options.ie               @driver = Selenium::WebDriver.for :ie, options: options             end                      it 'sets the file upload dialog timeout' do               @options.file_upload_dialog_timeout = 2000               driver = Selenium::WebDriver.for(:ie, options: @options)               driver.quit             end                      it 'ensures a clean session' do               @options.ensure_clean_session = true               driver = Selenium::WebDriver.for(:ie, options: @options)               driver.quit             end                      it 'ignores the zoom setting' do               @options.ignore_zoom_level = true               driver = Selenium::WebDriver.for(:ie, options: @options)               driver.quit             end                      it 'ignores the protected mode settings' do               @options.ignore_protected_mode_settings = true               driver = Selenium::WebDriver.for(:ie, options: @options)               driver.quit             end                      it 'adds the silent option', skip: 'This capability will be added on the release 4.22.0' do               @options.silent = true               expect(@options.silent).to be_truthy             end                      it 'sets the command line options' do               @options.add_argument('-k')               Selenium::WebDriver.for(:ie, options: @options)             end                      it 'launches ie with the create process api', skip: 'When using with IE 8 or higher, it needs a registry value' do               @options.force_create_process_api = true               Selenium::WebDriver.for(:ie, options: @options)               expect(@options.instance_variable_get(:@options)['force_create_process_api'])                 .to eq({force_create_process_api: true})             end           end                    describe 'Service' do             let(:file_name) { Tempfile.new('iedriver').path }             let(:root_directory) { Dir.mktmpdir }                      after do               FileUtils.rm_f(file_name)               FileUtils.remove_entry root_directory             end                      it 'logs to file' do               service = Selenium::WebDriver::Service.ie                        service.log = file_name                        @driver = Selenium::WebDriver.for :ie, service: service               expect(File.readlines(file_name).first).to include('Started InternetExplorerDriver server')             end                      it 'logs to console' do               service = Selenium::WebDriver::Service.ie                        service.log = $stdout                        expect {                 @driver = Selenium::WebDriver.for :ie, service: service               }.to output(/Started InternetExplorerDriver server/).to_stdout_from_any_process             end                      it 'sets log level' do               service = Selenium::WebDriver::Service.ie               service.log = $stdout                        service.args << '-log-level=WARN'                        expect {                 @driver = Selenium::WebDriver.for :ie, service: service               }.to output(/Invalid capability setting: timeouts is type null/).to_stdout_from_any_process             end                      it 'sets location for supporting files' do               service = Selenium::WebDriver::Service.ie                        service.args << "–extract-path=#{root_directory}"                        @driver = Selenium::WebDriver.for :ie, service: service             end           end         end                        const ie = require('selenium-webdriver/ie');     let options = new ie.Options().ensureCleanSession(true);     let driver = await Builder()               .setIeOptions(options)               .build();                            val options = InternetExplorerOptions()     options.destructivelyEnsureCleanSession()     val driver = RemoteWebDriver(options)       

### ignoreZoomSetting

InternetExplorer driver expects the browser zoom level to be 100%, else the driver will throw an exception. This default behaviour can be disabled by setting the _ignoreZoomSetting_ to _true_.

This capability accepts a Boolean value as parameter.

[Move Code](https://www.selenium.dev/documentation/about/contributing/#moving-examples)

  * Java   * Python   * CSharp   * Ruby   * JavaScript   * Kotlin

              InternetExplorerOptions options = new InternetExplorerOptions();     options.ignoreZoomSettings();     WebDriver driver = new RemoteWebDriver(options);                          options = webdriver.IeOptions()         options.ignore_zoom_level = True

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk//examples/python/tests/browsers/test_internet_explorer.py#L48-L49)

##### /examples/python/tests/browsers/test\_internet\_explorer.py

Copy  Close               import os     import subprocess     import sys          import pytest     from selenium import webdriver               @pytest.mark.skipif(sys.platform != "win32", reason="requires Windows")     def test_basic_options_win10(edge_bin):         options = webdriver.IeOptions()         options.attach_to_edge_chrome = True         options.edge_executable_path = edge_bin         driver = webdriver.Ie(options=options)              driver.quit()               @pytest.mark.skipif(sys.platform != "win32", reason="requires Windows")     def test_basic_options_win11():         options = webdriver.IeOptions()         driver = webdriver.Ie(options=options)              driver.quit()          @pytest.mark.skipif(sys.platform != "win32", reason="requires Windows")     def test_file_upload_timeout():         options = webdriver.IeOptions()         options.file_upload_timeout = 2000              driver = webdriver.Ie(options=options)              driver.quit()               @pytest.mark.skipif(sys.platform != "win32", reason="requires Windows")     def test_ensure_clean_session():         options = webdriver.IeOptions()         options.ensure_clean_session = True              driver = webdriver.Ie(options=options)              driver.quit()               @pytest.mark.skipif(sys.platform != "win32", reason="requires Windows")     def test_ignore_zoom_level():         options = webdriver.IeOptions()         options.ignore_zoom_level = True              driver = webdriver.Ie(options=options)              driver.quit()               @pytest.mark.skipif(sys.platform != "win32", reason="requires Windows")     def test_ignore_protected_mode_settings():         options = webdriver.IeOptions()         options.ignore_protected_mode_settings = True              driver = webdriver.Ie(options=options)              driver.quit()               @pytest.mark.skipif(sys.platform != "win32", reason="requires Windows")     def test_silent():         service = webdriver.IeService(service_args=["--silent"])         driver = webdriver.Ie(service=service)              driver.quit()               @pytest.mark.skipif(sys.platform != "win32", reason="requires Windows")     def test_cmd_options():         options = webdriver.IeOptions()         options.add_argument("-private")              driver = webdriver.Ie(options=options)              driver.quit()          # Skipping this as it fails on Windows because the value of registry setting in      # HKEY_CURRENT_USER\Software\Microsoft\Internet Explorer\Main\TabProcGrowth must be '0'      @pytest.mark.skip     def test_force_create_process_api():         options = webdriver.IeOptions()         options.force_create_process_api = True              driver = webdriver.Ie(options=options)              driver.quit()               @pytest.mark.skipif(sys.platform != "win32", reason="requires Windows")     def test_log_to_file(log_path):         service = webdriver.IeService(log_output=log_path, log_level="INFO")              driver = webdriver.Ie(service=service)              with open(log_path, "r") as fp:             assert "Starting WebDriver server" in fp.readline()              driver.quit()               @pytest.mark.skipif(sys.platform != "win32", reason="requires Windows")     def test_log_to_stdout(capfd):         service = webdriver.IeService(log_output=subprocess.STDOUT)              driver = webdriver.Ie(service=service)              out, err = capfd.readouterr()         assert "Started InternetExplorerDriver server" in out              driver.quit()               @pytest.mark.skipif(sys.platform != "win32", reason="requires Windows")     def test_log_level(log_path):         service = webdriver.IeService(log_output=log_path, log_level="WARN")              driver = webdriver.Ie(service=service)              with open(log_path, "r") as fp:             assert "Started InternetExplorerDriver server (32-bit)" in fp.readline()              driver.quit()               @pytest.mark.skipif(sys.platform != "win32", reason="requires Windows")     def test_supporting_files(temp_dir):         service = webdriver.IeService(service_args=["–extract-path=" + temp_dir])              driver = webdriver.Ie(service=service)              driver.quit()                    var options = new InternetExplorerOptions();     options.IgnoreZoomLevel = true;     var driver = new RemoteWebDriver(options);                            @options.ignore_zoom_level = true

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk//examples/ruby/spec/browsers/internet_explorer_spec.rb#L41)

##### /examples/ruby/spec/browsers/internet\_explorer\_spec.rb

Copy  Close               # frozen_string_literal: true                  require 'spec_helper'                  RSpec.describe 'Internet Explorer', exclusive: {platform: :windows} do           describe 'Options' do             let(:edge_location) { ENV.fetch('EDGE_BIN', nil) }             let(:url) { 'https://www.selenium.dev/selenium/web/' }                      before do               @options = Selenium::WebDriver::IE::Options.new               @options.attach_to_edge_chrome = true               @options.edge_executable_path = edge_location             end                      it 'basic options Win10' do               options = Selenium::WebDriver::IE::Options.new               options.attach_to_edge_chrome = true               options.edge_executable_path = edge_location               @driver = Selenium::WebDriver.for :ie, options: options             end                      it 'basic options Win11' do               options = Selenium::WebDriver::Options.ie               @driver = Selenium::WebDriver.for :ie, options: options             end                      it 'sets the file upload dialog timeout' do               @options.file_upload_dialog_timeout = 2000               driver = Selenium::WebDriver.for(:ie, options: @options)               driver.quit             end                      it 'ensures a clean session' do               @options.ensure_clean_session = true               driver = Selenium::WebDriver.for(:ie, options: @options)               driver.quit             end                      it 'ignores the zoom setting' do               @options.ignore_zoom_level = true               driver = Selenium::WebDriver.for(:ie, options: @options)               driver.quit             end                      it 'ignores the protected mode settings' do               @options.ignore_protected_mode_settings = true               driver = Selenium::WebDriver.for(:ie, options: @options)               driver.quit             end                      it 'adds the silent option', skip: 'This capability will be added on the release 4.22.0' do               @options.silent = true               expect(@options.silent).to be_truthy             end                      it 'sets the command line options' do               @options.add_argument('-k')               Selenium::WebDriver.for(:ie, options: @options)             end                      it 'launches ie with the create process api', skip: 'When using with IE 8 or higher, it needs a registry value' do               @options.force_create_process_api = true               Selenium::WebDriver.for(:ie, options: @options)               expect(@options.instance_variable_get(:@options)['force_create_process_api'])                 .to eq({force_create_process_api: true})             end           end                    describe 'Service' do             let(:file_name) { Tempfile.new('iedriver').path }             let(:root_directory) { Dir.mktmpdir }                      after do               FileUtils.rm_f(file_name)               FileUtils.remove_entry root_directory             end                      it 'logs to file' do               service = Selenium::WebDriver::Service.ie                        service.log = file_name                        @driver = Selenium::WebDriver.for :ie, service: service               expect(File.readlines(file_name).first).to include('Started InternetExplorerDriver server')             end                      it 'logs to console' do               service = Selenium::WebDriver::Service.ie                        service.log = $stdout                        expect {                 @driver = Selenium::WebDriver.for :ie, service: service               }.to output(/Started InternetExplorerDriver server/).to_stdout_from_any_process             end                      it 'sets log level' do               service = Selenium::WebDriver::Service.ie               service.log = $stdout                        service.args << '-log-level=WARN'                        expect {                 @driver = Selenium::WebDriver.for :ie, service: service               }.to output(/Invalid capability setting: timeouts is type null/).to_stdout_from_any_process             end                      it 'sets location for supporting files' do               service = Selenium::WebDriver::Service.ie                        service.args << "–extract-path=#{root_directory}"                        @driver = Selenium::WebDriver.for :ie, service: service             end           end         end                        const ie = require('selenium-webdriver/ie');     let options = new ie.Options().ignoreZoomSetting(true);     let driver = await Builder()               .setIeOptions(options)               .build();                            val options = InternetExplorerOptions()     options.ignoreZoomSettings()     val driver = RemoteWebDriver(options)       

### ignoreProtectedModeSettings

Whether to skip the _Protected Mode_ check while launching a new IE session.

If not set and _Protected Mode_ settings are not same for all zones, an exception will be thrown by the driver.

If capability is set to `true`, tests may become flaky, unresponsive, or browsers may hang. However, this is still by far a second-best choice, and the first choice should _always_ be to actually set the Protected Mode settings of each zone manually. If a user is using this property, only a “best effort” at support will be given.

This capability accepts a Boolean value as parameter.

[Move Code](https://www.selenium.dev/documentation/about/contributing/#moving-examples)

  * Java   * Python   * CSharp   * Ruby   * JavaScript   * Kotlin

              InternetExplorerOptions options = new InternetExplorerOptions();     options.introduceFlakinessByIgnoringSecurityDomains();     WebDriver driver = new RemoteWebDriver(options);                          options = webdriver.IeOptions()         options.ignore_protected_mode_settings = True

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk//examples/python/tests/browsers/test_internet_explorer.py#L58-L59)

##### /examples/python/tests/browsers/test\_internet\_explorer.py

Copy  Close               import os     import subprocess     import sys          import pytest     from selenium import webdriver               @pytest.mark.skipif(sys.platform != "win32", reason="requires Windows")     def test_basic_options_win10(edge_bin):         options = webdriver.IeOptions()         options.attach_to_edge_chrome = True         options.edge_executable_path = edge_bin         driver = webdriver.Ie(options=options)              driver.quit()               @pytest.mark.skipif(sys.platform != "win32", reason="requires Windows")     def test_basic_options_win11():         options = webdriver.IeOptions()         driver = webdriver.Ie(options=options)              driver.quit()          @pytest.mark.skipif(sys.platform != "win32", reason="requires Windows")     def test_file_upload_timeout():         options = webdriver.IeOptions()         options.file_upload_timeout = 2000              driver = webdriver.Ie(options=options)              driver.quit()               @pytest.mark.skipif(sys.platform != "win32", reason="requires Windows")     def test_ensure_clean_session():         options = webdriver.IeOptions()         options.ensure_clean_session = True              driver = webdriver.Ie(options=options)              driver.quit()               @pytest.mark.skipif(sys.platform != "win32", reason="requires Windows")     def test_ignore_zoom_level():         options = webdriver.IeOptions()         options.ignore_zoom_level = True              driver = webdriver.Ie(options=options)              driver.quit()               @pytest.mark.skipif(sys.platform != "win32", reason="requires Windows")     def test_ignore_protected_mode_settings():         options = webdriver.IeOptions()         options.ignore_protected_mode_settings = True              driver = webdriver.Ie(options=options)              driver.quit()               @pytest.mark.skipif(sys.platform != "win32", reason="requires Windows")     def test_silent():         service = webdriver.IeService(service_args=["--silent"])         driver = webdriver.Ie(service=service)              driver.quit()               @pytest.mark.skipif(sys.platform != "win32", reason="requires Windows")     def test_cmd_options():         options = webdriver.IeOptions()         options.add_argument("-private")              driver = webdriver.Ie(options=options)              driver.quit()          # Skipping this as it fails on Windows because the value of registry setting in      # HKEY_CURRENT_USER\Software\Microsoft\Internet Explorer\Main\TabProcGrowth must be '0'      @pytest.mark.skip     def test_force_create_process_api():         options = webdriver.IeOptions()         options.force_create_process_api = True              driver = webdriver.Ie(options=options)              driver.quit()               @pytest.mark.skipif(sys.platform != "win32", reason="requires Windows")     def test_log_to_file(log_path):         service = webdriver.IeService(log_output=log_path, log_level="INFO")              driver = webdriver.Ie(service=service)              with open(log_path, "r") as fp:             assert "Starting WebDriver server" in fp.readline()              driver.quit()               @pytest.mark.skipif(sys.platform != "win32", reason="requires Windows")     def test_log_to_stdout(capfd):         service = webdriver.IeService(log_output=subprocess.STDOUT)              driver = webdriver.Ie(service=service)              out, err = capfd.readouterr()         assert "Started InternetExplorerDriver server" in out              driver.quit()               @pytest.mark.skipif(sys.platform != "win32", reason="requires Windows")     def test_log_level(log_path):         service = webdriver.IeService(log_output=log_path, log_level="WARN")              driver = webdriver.Ie(service=service)              with open(log_path, "r") as fp:             assert "Started InternetExplorerDriver server (32-bit)" in fp.readline()              driver.quit()               @pytest.mark.skipif(sys.platform != "win32", reason="requires Windows")     def test_supporting_files(temp_dir):         service = webdriver.IeService(service_args=["–extract-path=" + temp_dir])              driver = webdriver.Ie(service=service)              driver.quit()                    var options = new InternetExplorerOptions();     options.IntroduceInstabilityByIgnoringProtectedModeSettings = true;     var driver = new RemoteWebDriver(options);                            @options.ignore_protected_mode_settings = true

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk//examples/ruby/spec/browsers/internet_explorer_spec.rb#L47)

##### /examples/ruby/spec/browsers/internet\_explorer\_spec.rb

Copy  Close               # frozen_string_literal: true                  require 'spec_helper'                  RSpec.describe 'Internet Explorer', exclusive: {platform: :windows} do           describe 'Options' do             let(:edge_location) { ENV.fetch('EDGE_BIN', nil) }             let(:url) { 'https://www.selenium.dev/selenium/web/' }                      before do               @options = Selenium::WebDriver::IE::Options.new               @options.attach_to_edge_chrome = true               @options.edge_executable_path = edge_location             end                      it 'basic options Win10' do               options = Selenium::WebDriver::IE::Options.new               options.attach_to_edge_chrome = true               options.edge_executable_path = edge_location               @driver = Selenium::WebDriver.for :ie, options: options             end                      it 'basic options Win11' do               options = Selenium::WebDriver::Options.ie               @driver = Selenium::WebDriver.for :ie, options: options             end                      it 'sets the file upload dialog timeout' do               @options.file_upload_dialog_timeout = 2000               driver = Selenium::WebDriver.for(:ie, options: @options)               driver.quit             end                      it 'ensures a clean session' do               @options.ensure_clean_session = true               driver = Selenium::WebDriver.for(:ie, options: @options)               driver.quit             end                      it 'ignores the zoom setting' do               @options.ignore_zoom_level = true               driver = Selenium::WebDriver.for(:ie, options: @options)               driver.quit             end                      it 'ignores the protected mode settings' do               @options.ignore_protected_mode_settings = true               driver = Selenium::WebDriver.for(:ie, options: @options)               driver.quit             end                      it 'adds the silent option', skip: 'This capability will be added on the release 4.22.0' do               @options.silent = true               expect(@options.silent).to be_truthy             end                      it 'sets the command line options' do               @options.add_argument('-k')               Selenium::WebDriver.for(:ie, options: @options)             end                      it 'launches ie with the create process api', skip: 'When using with IE 8 or higher, it needs a registry value' do               @options.force_create_process_api = true               Selenium::WebDriver.for(:ie, options: @options)               expect(@options.instance_variable_get(:@options)['force_create_process_api'])                 .to eq({force_create_process_api: true})             end           end                    describe 'Service' do             let(:file_name) { Tempfile.new('iedriver').path }             let(:root_directory) { Dir.mktmpdir }                      after do               FileUtils.rm_f(file_name)               FileUtils.remove_entry root_directory             end                      it 'logs to file' do               service = Selenium::WebDriver::Service.ie                        service.log = file_name                        @driver = Selenium::WebDriver.for :ie, service: service               expect(File.readlines(file_name).first).to include('Started InternetExplorerDriver server')             end                      it 'logs to console' do               service = Selenium::WebDriver::Service.ie                        service.log = $stdout                        expect {                 @driver = Selenium::WebDriver.for :ie, service: service               }.to output(/Started InternetExplorerDriver server/).to_stdout_from_any_process             end                      it 'sets log level' do               service = Selenium::WebDriver::Service.ie               service.log = $stdout                        service.args << '-log-level=WARN'                        expect {                 @driver = Selenium::WebDriver.for :ie, service: service               }.to output(/Invalid capability setting: timeouts is type null/).to_stdout_from_any_process             end                      it 'sets location for supporting files' do               service = Selenium::WebDriver::Service.ie                        service.args << "–extract-path=#{root_directory}"                        @driver = Selenium::WebDriver.for :ie, service: service             end           end         end                        const ie = require('selenium-webdriver/ie');     let options = new ie.Options().introduceFlakinessByIgnoringProtectedModeSettings(true);     let driver = await Builder()               .setIeOptions(options)               .build();                            val options = InternetExplorerOptions()     options.introduceFlakinessByIgnoringSecurityDomains()     val driver = RemoteWebDriver(options)       

### silent

When set to `true`, this capability suppresses the diagnostic output of the IEDriverServer.

This capability accepts a Boolean value as parameter.

[Move Code](https://www.selenium.dev/documentation/about/contributing/#moving-examples)

  * Java   * Python   * CSharp   * Ruby   * JavaScript   * Kotlin

              InternetExplorerOptions options = new InternetExplorerOptions();     options.setCapability("silent", true);     WebDriver driver = new InternetExplorerDriver(options);                          service = webdriver.IeService(service_args=["--silent"])         driver = webdriver.Ie(service=service)

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk//examples/python/tests/browsers/test_internet_explorer.py#L68-L69)

##### /examples/python/tests/browsers/test\_internet\_explorer.py

Copy  Close               import os     import subprocess     import sys          import pytest     from selenium import webdriver               @pytest.mark.skipif(sys.platform != "win32", reason="requires Windows")     def test_basic_options_win10(edge_bin):         options = webdriver.IeOptions()         options.attach_to_edge_chrome = True         options.edge_executable_path = edge_bin         driver = webdriver.Ie(options=options)              driver.quit()               @pytest.mark.skipif(sys.platform != "win32", reason="requires Windows")     def test_basic_options_win11():         options = webdriver.IeOptions()         driver = webdriver.Ie(options=options)              driver.quit()          @pytest.mark.skipif(sys.platform != "win32", reason="requires Windows")     def test_file_upload_timeout():         options = webdriver.IeOptions()         options.file_upload_timeout = 2000              driver = webdriver.Ie(options=options)              driver.quit()               @pytest.mark.skipif(sys.platform != "win32", reason="requires Windows")     def test_ensure_clean_session():         options = webdriver.IeOptions()         options.ensure_clean_session = True              driver = webdriver.Ie(options=options)              driver.quit()               @pytest.mark.skipif(sys.platform != "win32", reason="requires Windows")     def test_ignore_zoom_level():         options = webdriver.IeOptions()         options.ignore_zoom_level = True              driver = webdriver.Ie(options=options)              driver.quit()               @pytest.mark.skipif(sys.platform != "win32", reason="requires Windows")     def test_ignore_protected_mode_settings():         options = webdriver.IeOptions()         options.ignore_protected_mode_settings = True              driver = webdriver.Ie(options=options)              driver.quit()               @pytest.mark.skipif(sys.platform != "win32", reason="requires Windows")     def test_silent():         service = webdriver.IeService(service_args=["--silent"])         driver = webdriver.Ie(service=service)              driver.quit()               @pytest.mark.skipif(sys.platform != "win32", reason="requires Windows")     def test_cmd_options():         options = webdriver.IeOptions()         options.add_argument("-private")              driver = webdriver.Ie(options=options)              driver.quit()          # Skipping this as it fails on Windows because the value of registry setting in      # HKEY_CURRENT_USER\Software\Microsoft\Internet Explorer\Main\TabProcGrowth must be '0'      @pytest.mark.skip     def test_force_create_process_api():         options = webdriver.IeOptions()         options.force_create_process_api = True              driver = webdriver.Ie(options=options)              driver.quit()               @pytest.mark.skipif(sys.platform != "win32", reason="requires Windows")     def test_log_to_file(log_path):         service = webdriver.IeService(log_output=log_path, log_level="INFO")              driver = webdriver.Ie(service=service)              with open(log_path, "r") as fp:             assert "Starting WebDriver server" in fp.readline()              driver.quit()               @pytest.mark.skipif(sys.platform != "win32", reason="requires Windows")     def test_log_to_stdout(capfd):         service = webdriver.IeService(log_output=subprocess.STDOUT)              driver = webdriver.Ie(service=service)              out, err = capfd.readouterr()         assert "Started InternetExplorerDriver server" in out              driver.quit()               @pytest.mark.skipif(sys.platform != "win32", reason="requires Windows")     def test_log_level(log_path):         service = webdriver.IeService(log_output=log_path, log_level="WARN")              driver = webdriver.Ie(service=service)              with open(log_path, "r") as fp:             assert "Started InternetExplorerDriver server (32-bit)" in fp.readline()              driver.quit()               @pytest.mark.skipif(sys.platform != "win32", reason="requires Windows")     def test_supporting_files(temp_dir):         service = webdriver.IeService(service_args=["–extract-path=" + temp_dir])              driver = webdriver.Ie(service=service)              driver.quit()                    InternetExplorerOptions options = new InternetExplorerOptions();     options.AddAdditionalInternetExplorerOption("silent", true);     IWebDriver driver = new InternetExplorerDriver(options);                            @options.silent = true

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk//examples/ruby/spec/browsers/internet_explorer_spec.rb#L53)

##### /examples/ruby/spec/browsers/internet\_explorer\_spec.rb

Copy  Close               # frozen_string_literal: true                  require 'spec_helper'                  RSpec.describe 'Internet Explorer', exclusive: {platform: :windows} do           describe 'Options' do             let(:edge_location) { ENV.fetch('EDGE_BIN', nil) }             let(:url) { 'https://www.selenium.dev/selenium/web/' }                      before do               @options = Selenium::WebDriver::IE::Options.new               @options.attach_to_edge_chrome = true               @options.edge_executable_path = edge_location             end                      it 'basic options Win10' do               options = Selenium::WebDriver::IE::Options.new               options.attach_to_edge_chrome = true               options.edge_executable_path = edge_location               @driver = Selenium::WebDriver.for :ie, options: options             end                      it 'basic options Win11' do               options = Selenium::WebDriver::Options.ie               @driver = Selenium::WebDriver.for :ie, options: options             end                      it 'sets the file upload dialog timeout' do               @options.file_upload_dialog_timeout = 2000               driver = Selenium::WebDriver.for(:ie, options: @options)               driver.quit             end                      it 'ensures a clean session' do               @options.ensure_clean_session = true               driver = Selenium::WebDriver.for(:ie, options: @options)               driver.quit             end                      it 'ignores the zoom setting' do               @options.ignore_zoom_level = true               driver = Selenium::WebDriver.for(:ie, options: @options)               driver.quit             end                      it 'ignores the protected mode settings' do               @options.ignore_protected_mode_settings = true               driver = Selenium::WebDriver.for(:ie, options: @options)               driver.quit             end                      it 'adds the silent option', skip: 'This capability will be added on the release 4.22.0' do               @options.silent = true               expect(@options.silent).to be_truthy             end                      it 'sets the command line options' do               @options.add_argument('-k')               Selenium::WebDriver.for(:ie, options: @options)             end                      it 'launches ie with the create process api', skip: 'When using with IE 8 or higher, it needs a registry value' do               @options.force_create_process_api = true               Selenium::WebDriver.for(:ie, options: @options)               expect(@options.instance_variable_get(:@options)['force_create_process_api'])                 .to eq({force_create_process_api: true})             end           end                    describe 'Service' do             let(:file_name) { Tempfile.new('iedriver').path }             let(:root_directory) { Dir.mktmpdir }                      after do               FileUtils.rm_f(file_name)               FileUtils.remove_entry root_directory             end                      it 'logs to file' do               service = Selenium::WebDriver::Service.ie                        service.log = file_name                        @driver = Selenium::WebDriver.for :ie, service: service               expect(File.readlines(file_name).first).to include('Started InternetExplorerDriver server')             end                      it 'logs to console' do               service = Selenium::WebDriver::Service.ie                        service.log = $stdout                        expect {                 @driver = Selenium::WebDriver.for :ie, service: service               }.to output(/Started InternetExplorerDriver server/).to_stdout_from_any_process             end                      it 'sets log level' do               service = Selenium::WebDriver::Service.ie               service.log = $stdout                        service.args << '-log-level=WARN'                        expect {                 @driver = Selenium::WebDriver.for :ie, service: service               }.to output(/Invalid capability setting: timeouts is type null/).to_stdout_from_any_process             end                      it 'sets location for supporting files' do               service = Selenium::WebDriver::Service.ie                        service.args << "–extract-path=#{root_directory}"                        @driver = Selenium::WebDriver.for :ie, service: service             end           end         end                        const {Builder,By, Capabilities} = require('selenium-webdriver');     let caps = Capabilities.ie();     caps.set('silent', true);          (async function example() {         let driver = await new Builder()             .forBrowser('internet explorer')             .withCapabilities(caps)             .build();         try {             await driver.get('http://www.google.com/ncr');         }         finally {             await driver.quit();         }     })();                           import org.openqa.selenium.Capabilities     import org.openqa.selenium.ie.InternetExplorerDriver     import org.openqa.selenium.ie.InternetExplorerOptions          fun main() {         val options = InternetExplorerOptions()         options.setCapability("silent", true)         val driver = InternetExplorerDriver(options)         try {             driver.get("https://google.com/ncr")             val caps = driver.getCapabilities()             println(caps)         } finally {             driver.quit()         }     }       

### Command-Line Options

Internet Explorer includes several command-line options that enable you to troubleshoot and configure the browser.

The following describes few supported command-line options

  *  _-private_ : Used to start IE in private browsing mode. This works for IE 8 and later versions.

  * _-k_ : Starts Internet Explorer in kiosk mode. The browser opens in a maximized window that does not display the address bar, the navigation buttons, or the status bar.

  * _-extoff_ : Starts IE in no add-on mode. This option specifically used to troubleshoot problems with browser add-ons. Works in IE 7 and later versions.

Note: **forceCreateProcessApi** should to enabled in-order for command line arguments to work.

[Move Code](https://www.selenium.dev/documentation/about/contributing/#moving-examples)

  * Java   * Python   * CSharp   * Ruby   * JavaScript   * Kotlin

              import org.openqa.selenium.Capabilities;     import org.openqa.selenium.ie.InternetExplorerDriver;     import org.openqa.selenium.ie.InternetExplorerOptions;          public class ieTest {         public static void main(String[] args) {             InternetExplorerOptions options = new InternetExplorerOptions();             options.useCreateProcessApiToLaunchIe();             options.addCommandSwitches("-k");             InternetExplorerDriver driver = new InternetExplorerDriver(options);             try {                 driver.get("https://google.com/ncr");                 Capabilities caps = driver.getCapabilities();                 System.out.println(caps);             } finally {                 driver.quit();             }         }     }                          options = webdriver.IeOptions()         options.add_argument("-private")              driver = webdriver.Ie(options=options)

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk//examples/python/tests/browsers/test_internet_explorer.py#L76-L79)

##### /examples/python/tests/browsers/test\_internet\_explorer.py

Copy  Close               import os     import subprocess     import sys          import pytest     from selenium import webdriver               @pytest.mark.skipif(sys.platform != "win32", reason="requires Windows")     def test_basic_options_win10(edge_bin):         options = webdriver.IeOptions()         options.attach_to_edge_chrome = True         options.edge_executable_path = edge_bin         driver = webdriver.Ie(options=options)              driver.quit()               @pytest.mark.skipif(sys.platform != "win32", reason="requires Windows")     def test_basic_options_win11():         options = webdriver.IeOptions()         driver = webdriver.Ie(options=options)              driver.quit()          @pytest.mark.skipif(sys.platform != "win32", reason="requires Windows")     def test_file_upload_timeout():         options = webdriver.IeOptions()         options.file_upload_timeout = 2000              driver = webdriver.Ie(options=options)              driver.quit()               @pytest.mark.skipif(sys.platform != "win32", reason="requires Windows")     def test_ensure_clean_session():         options = webdriver.IeOptions()         options.ensure_clean_session = True              driver = webdriver.Ie(options=options)              driver.quit()               @pytest.mark.skipif(sys.platform != "win32", reason="requires Windows")     def test_ignore_zoom_level():         options = webdriver.IeOptions()         options.ignore_zoom_level = True              driver = webdriver.Ie(options=options)              driver.quit()               @pytest.mark.skipif(sys.platform != "win32", reason="requires Windows")     def test_ignore_protected_mode_settings():         options = webdriver.IeOptions()         options.ignore_protected_mode_settings = True              driver = webdriver.Ie(options=options)              driver.quit()               @pytest.mark.skipif(sys.platform != "win32", reason="requires Windows")     def test_silent():         service = webdriver.IeService(service_args=["--silent"])         driver = webdriver.Ie(service=service)              driver.quit()               @pytest.mark.skipif(sys.platform != "win32", reason="requires Windows")     def test_cmd_options():         options = webdriver.IeOptions()         options.add_argument("-private")              driver = webdriver.Ie(options=options)              driver.quit()          # Skipping this as it fails on Windows because the value of registry setting in      # HKEY_CURRENT_USER\Software\Microsoft\Internet Explorer\Main\TabProcGrowth must be '0'      @pytest.mark.skip     def test_force_create_process_api():         options = webdriver.IeOptions()         options.force_create_process_api = True              driver = webdriver.Ie(options=options)              driver.quit()               @pytest.mark.skipif(sys.platform != "win32", reason="requires Windows")     def test_log_to_file(log_path):         service = webdriver.IeService(log_output=log_path, log_level="INFO")              driver = webdriver.Ie(service=service)              with open(log_path, "r") as fp:             assert "Starting WebDriver server" in fp.readline()              driver.quit()               @pytest.mark.skipif(sys.platform != "win32", reason="requires Windows")     def test_log_to_stdout(capfd):         service = webdriver.IeService(log_output=subprocess.STDOUT)              driver = webdriver.Ie(service=service)              out, err = capfd.readouterr()         assert "Started InternetExplorerDriver server" in out              driver.quit()               @pytest.mark.skipif(sys.platform != "win32", reason="requires Windows")     def test_log_level(log_path):         service = webdriver.IeService(log_output=log_path, log_level="WARN")              driver = webdriver.Ie(service=service)              with open(log_path, "r") as fp:             assert "Started InternetExplorerDriver server (32-bit)" in fp.readline()              driver.quit()               @pytest.mark.skipif(sys.platform != "win32", reason="requires Windows")     def test_supporting_files(temp_dir):         service = webdriver.IeService(service_args=["–extract-path=" + temp_dir])              driver = webdriver.Ie(service=service)              driver.quit()                    using System;     using OpenQA.Selenium;     using OpenQA.Selenium.IE;          namespace ieTest {      class Program {       static void Main(string[] args) {        InternetExplorerOptions options = new InternetExplorerOptions();        options.ForceCreateProcessApi = true;        options.BrowserCommandLineArguments = "-k";        IWebDriver driver = new InternetExplorerDriver(options);        driver.Url = "https://google.com/ncr";       }      }     }                            @options.add_argument('-k')

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk//examples/ruby/spec/browsers/internet_explorer_spec.rb#L58)

##### /examples/ruby/spec/browsers/internet\_explorer\_spec.rb

Copy  Close               # frozen_string_literal: true                  require 'spec_helper'                  RSpec.describe 'Internet Explorer', exclusive: {platform: :windows} do           describe 'Options' do             let(:edge_location) { ENV.fetch('EDGE_BIN', nil) }             let(:url) { 'https://www.selenium.dev/selenium/web/' }                      before do               @options = Selenium::WebDriver::IE::Options.new               @options.attach_to_edge_chrome = true               @options.edge_executable_path = edge_location             end                      it 'basic options Win10' do               options = Selenium::WebDriver::IE::Options.new               options.attach_to_edge_chrome = true               options.edge_executable_path = edge_location               @driver = Selenium::WebDriver.for :ie, options: options             end                      it 'basic options Win11' do               options = Selenium::WebDriver::Options.ie               @driver = Selenium::WebDriver.for :ie, options: options             end                      it 'sets the file upload dialog timeout' do               @options.file_upload_dialog_timeout = 2000               driver = Selenium::WebDriver.for(:ie, options: @options)               driver.quit             end                      it 'ensures a clean session' do               @options.ensure_clean_session = true               driver = Selenium::WebDriver.for(:ie, options: @options)               driver.quit             end                      it 'ignores the zoom setting' do               @options.ignore_zoom_level = true               driver = Selenium::WebDriver.for(:ie, options: @options)               driver.quit             end                      it 'ignores the protected mode settings' do               @options.ignore_protected_mode_settings = true               driver = Selenium::WebDriver.for(:ie, options: @options)               driver.quit             end                      it 'adds the silent option', skip: 'This capability will be added on the release 4.22.0' do               @options.silent = true               expect(@options.silent).to be_truthy             end                      it 'sets the command line options' do               @options.add_argument('-k')               Selenium::WebDriver.for(:ie, options: @options)             end                      it 'launches ie with the create process api', skip: 'When using with IE 8 or higher, it needs a registry value' do               @options.force_create_process_api = true               Selenium::WebDriver.for(:ie, options: @options)               expect(@options.instance_variable_get(:@options)['force_create_process_api'])                 .to eq({force_create_process_api: true})             end           end                    describe 'Service' do             let(:file_name) { Tempfile.new('iedriver').path }             let(:root_directory) { Dir.mktmpdir }                      after do               FileUtils.rm_f(file_name)               FileUtils.remove_entry root_directory             end                      it 'logs to file' do               service = Selenium::WebDriver::Service.ie                        service.log = file_name                        @driver = Selenium::WebDriver.for :ie, service: service               expect(File.readlines(file_name).first).to include('Started InternetExplorerDriver server')             end                      it 'logs to console' do               service = Selenium::WebDriver::Service.ie                        service.log = $stdout                        expect {                 @driver = Selenium::WebDriver.for :ie, service: service               }.to output(/Started InternetExplorerDriver server/).to_stdout_from_any_process             end                      it 'sets log level' do               service = Selenium::WebDriver::Service.ie               service.log = $stdout                        service.args << '-log-level=WARN'                        expect {                 @driver = Selenium::WebDriver.for :ie, service: service               }.to output(/Invalid capability setting: timeouts is type null/).to_stdout_from_any_process             end                      it 'sets location for supporting files' do               service = Selenium::WebDriver::Service.ie                        service.args << "–extract-path=#{root_directory}"                        @driver = Selenium::WebDriver.for :ie, service: service             end           end         end                        const ie = require('selenium-webdriver/ie');     let options = new ie.Options();     options.addBrowserCommandSwitches('-k');     options.addBrowserCommandSwitches('-private');     options.forceCreateProcessApi(true);          driver = await env.builder()               .setIeOptions(options)               .build();                           import org.openqa.selenium.Capabilities     import org.openqa.selenium.ie.InternetExplorerDriver     import org.openqa.selenium.ie.InternetExplorerOptions          fun main() {         val options = InternetExplorerOptions()         options.useCreateProcessApiToLaunchIe()         options.addCommandSwitches("-k")         val driver = InternetExplorerDriver(options)         try {             driver.get("https://google.com/ncr")             val caps = driver.getCapabilities()             println(caps)         } finally {             driver.quit()         }     }       

### forceCreateProcessApi

Forces launching Internet Explorer using the CreateProcess API. The default value is false.

For IE 8 and above, this option requires the “TabProcGrowth” registry value to be set to 0.

[Move Code](https://www.selenium.dev/documentation/about/contributing/#moving-examples)

  * Java   * Python   * CSharp   * Ruby   * JavaScript   * Kotlin

              import org.openqa.selenium.Capabilities;     import org.openqa.selenium.ie.InternetExplorerDriver;     import org.openqa.selenium.ie.InternetExplorerOptions;          public class ieTest {         public static void main(String[] args) {             InternetExplorerOptions options = new InternetExplorerOptions();             options.useCreateProcessApiToLaunchIe();             InternetExplorerDriver driver = new InternetExplorerDriver(options);             try {                 driver.get("https://google.com/ncr");                 Capabilities caps = driver.getCapabilities();                 System.out.println(caps);             } finally {                 driver.quit();             }         }     }                          options = webdriver.IeOptions()         options.force_create_process_api = True              driver = webdriver.Ie(options=options)

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk//examples/python/tests/browsers/test_internet_explorer.py#L87-L90)

##### /examples/python/tests/browsers/test\_internet\_explorer.py

Copy  Close               import os     import subprocess     import sys          import pytest     from selenium import webdriver               @pytest.mark.skipif(sys.platform != "win32", reason="requires Windows")     def test_basic_options_win10(edge_bin):         options = webdriver.IeOptions()         options.attach_to_edge_chrome = True         options.edge_executable_path = edge_bin         driver = webdriver.Ie(options=options)              driver.quit()               @pytest.mark.skipif(sys.platform != "win32", reason="requires Windows")     def test_basic_options_win11():         options = webdriver.IeOptions()         driver = webdriver.Ie(options=options)              driver.quit()          @pytest.mark.skipif(sys.platform != "win32", reason="requires Windows")     def test_file_upload_timeout():         options = webdriver.IeOptions()         options.file_upload_timeout = 2000              driver = webdriver.Ie(options=options)              driver.quit()               @pytest.mark.skipif(sys.platform != "win32", reason="requires Windows")     def test_ensure_clean_session():         options = webdriver.IeOptions()         options.ensure_clean_session = True              driver = webdriver.Ie(options=options)              driver.quit()               @pytest.mark.skipif(sys.platform != "win32", reason="requires Windows")     def test_ignore_zoom_level():         options = webdriver.IeOptions()         options.ignore_zoom_level = True              driver = webdriver.Ie(options=options)              driver.quit()               @pytest.mark.skipif(sys.platform != "win32", reason="requires Windows")     def test_ignore_protected_mode_settings():         options = webdriver.IeOptions()         options.ignore_protected_mode_settings = True              driver = webdriver.Ie(options=options)              driver.quit()               @pytest.mark.skipif(sys.platform != "win32", reason="requires Windows")     def test_silent():         service = webdriver.IeService(service_args=["--silent"])         driver = webdriver.Ie(service=service)              driver.quit()               @pytest.mark.skipif(sys.platform != "win32", reason="requires Windows")     def test_cmd_options():         options = webdriver.IeOptions()         options.add_argument("-private")              driver = webdriver.Ie(options=options)              driver.quit()          # Skipping this as it fails on Windows because the value of registry setting in      # HKEY_CURRENT_USER\Software\Microsoft\Internet Explorer\Main\TabProcGrowth must be '0'      @pytest.mark.skip     def test_force_create_process_api():         options = webdriver.IeOptions()         options.force_create_process_api = True              driver = webdriver.Ie(options=options)              driver.quit()               @pytest.mark.skipif(sys.platform != "win32", reason="requires Windows")     def test_log_to_file(log_path):         service = webdriver.IeService(log_output=log_path, log_level="INFO")              driver = webdriver.Ie(service=service)              with open(log_path, "r") as fp:             assert "Starting WebDriver server" in fp.readline()              driver.quit()               @pytest.mark.skipif(sys.platform != "win32", reason="requires Windows")     def test_log_to_stdout(capfd):         service = webdriver.IeService(log_output=subprocess.STDOUT)              driver = webdriver.Ie(service=service)              out, err = capfd.readouterr()         assert "Started InternetExplorerDriver server" in out              driver.quit()               @pytest.mark.skipif(sys.platform != "win32", reason="requires Windows")     def test_log_level(log_path):         service = webdriver.IeService(log_output=log_path, log_level="WARN")              driver = webdriver.Ie(service=service)              with open(log_path, "r") as fp:             assert "Started InternetExplorerDriver server (32-bit)" in fp.readline()              driver.quit()               @pytest.mark.skipif(sys.platform != "win32", reason="requires Windows")     def test_supporting_files(temp_dir):         service = webdriver.IeService(service_args=["–extract-path=" + temp_dir])              driver = webdriver.Ie(service=service)              driver.quit()                    using System;     using OpenQA.Selenium;     using OpenQA.Selenium.IE;          namespace ieTest {      class Program {       static void Main(string[] args) {        InternetExplorerOptions options = new InternetExplorerOptions();        options.ForceCreateProcessApi = true;        IWebDriver driver = new InternetExplorerDriver(options);        driver.Url = "https://google.com/ncr";       }      }     }                            @options.force_create_process_api = true

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk//examples/ruby/spec/browsers/internet_explorer_spec.rb#L63)

##### /examples/ruby/spec/browsers/internet\_explorer\_spec.rb

Copy  Close               # frozen_string_literal: true                  require 'spec_helper'                  RSpec.describe 'Internet Explorer', exclusive: {platform: :windows} do           describe 'Options' do             let(:edge_location) { ENV.fetch('EDGE_BIN', nil) }             let(:url) { 'https://www.selenium.dev/selenium/web/' }                      before do               @options = Selenium::WebDriver::IE::Options.new               @options.attach_to_edge_chrome = true               @options.edge_executable_path = edge_location             end                      it 'basic options Win10' do               options = Selenium::WebDriver::IE::Options.new               options.attach_to_edge_chrome = true               options.edge_executable_path = edge_location               @driver = Selenium::WebDriver.for :ie, options: options             end                      it 'basic options Win11' do               options = Selenium::WebDriver::Options.ie               @driver = Selenium::WebDriver.for :ie, options: options             end                      it 'sets the file upload dialog timeout' do               @options.file_upload_dialog_timeout = 2000               driver = Selenium::WebDriver.for(:ie, options: @options)               driver.quit             end                      it 'ensures a clean session' do               @options.ensure_clean_session = true               driver = Selenium::WebDriver.for(:ie, options: @options)               driver.quit             end                      it 'ignores the zoom setting' do               @options.ignore_zoom_level = true               driver = Selenium::WebDriver.for(:ie, options: @options)               driver.quit             end                      it 'ignores the protected mode settings' do               @options.ignore_protected_mode_settings = true               driver = Selenium::WebDriver.for(:ie, options: @options)               driver.quit             end                      it 'adds the silent option', skip: 'This capability will be added on the release 4.22.0' do               @options.silent = true               expect(@options.silent).to be_truthy             end                      it 'sets the command line options' do               @options.add_argument('-k')               Selenium::WebDriver.for(:ie, options: @options)             end                      it 'launches ie with the create process api', skip: 'When using with IE 8 or higher, it needs a registry value' do               @options.force_create_process_api = true               Selenium::WebDriver.for(:ie, options: @options)               expect(@options.instance_variable_get(:@options)['force_create_process_api'])                 .to eq({force_create_process_api: true})             end           end                    describe 'Service' do             let(:file_name) { Tempfile.new('iedriver').path }             let(:root_directory) { Dir.mktmpdir }                      after do               FileUtils.rm_f(file_name)               FileUtils.remove_entry root_directory             end                      it 'logs to file' do               service = Selenium::WebDriver::Service.ie                        service.log = file_name                        @driver = Selenium::WebDriver.for :ie, service: service               expect(File.readlines(file_name).first).to include('Started InternetExplorerDriver server')             end                      it 'logs to console' do               service = Selenium::WebDriver::Service.ie                        service.log = $stdout                        expect {                 @driver = Selenium::WebDriver.for :ie, service: service               }.to output(/Started InternetExplorerDriver server/).to_stdout_from_any_process             end                      it 'sets log level' do               service = Selenium::WebDriver::Service.ie               service.log = $stdout                        service.args << '-log-level=WARN'                        expect {                 @driver = Selenium::WebDriver.for :ie, service: service               }.to output(/Invalid capability setting: timeouts is type null/).to_stdout_from_any_process             end                      it 'sets location for supporting files' do               service = Selenium::WebDriver::Service.ie                        service.args << "–extract-path=#{root_directory}"                        @driver = Selenium::WebDriver.for :ie, service: service             end           end         end                        const ie = require('selenium-webdriver/ie');     let options = new ie.Options();     options.forceCreateProcessApi(true);          driver = await env.builder()               .setIeOptions(options)               .build();                           import org.openqa.selenium.Capabilities     import org.openqa.selenium.ie.InternetExplorerDriver     import org.openqa.selenium.ie.InternetExplorerOptions          fun main() {         val options = InternetExplorerOptions()         options.useCreateProcessApiToLaunchIe()         val driver = InternetExplorerDriver(options)         try {             driver.get("https://google.com/ncr")             val caps = driver.getCapabilities()             println(caps)         } finally {             driver.quit()         }     }       

## Service

Service settings common to all browsers are described on the [Service page](https://www.selenium.dev/documentation/webdriver/drivers/service/).

### Log output

Getting driver logs can be helpful for debugging various issues. The Service class lets you direct where the logs will go. Logging output is ignored unless the user directs it somewhere.

#### File output

To change the logging output to save to a specific file:

  * Java   * Python   * CSharp   * Ruby   * JavaScript   * Kotlin

[Selenium v4.10](https://github.com/SeleniumHQ/selenium/releases/tag/selenium-4.10.0)                               .withLogFile(getLogLocation())

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/java/src/test/java/dev/selenium/browsers/InternetExplorerTest.java#L53)

##### examples/java/src/test/java/dev/selenium/browsers/InternetExplorerTest.java

Copy  Close               package dev.selenium.browsers;          import org.junit.jupiter.api.AfterEach;     import org.junit.jupiter.api.Assertions;     import org.junit.jupiter.api.Test;     import org.junit.jupiter.api.condition.EnabledOnOs;     import org.junit.jupiter.api.condition.OS;     import org.openqa.selenium.ie.InternetExplorerDriver;     import org.openqa.selenium.ie.InternetExplorerDriverLogLevel;     import org.openqa.selenium.ie.InternetExplorerDriverService;     import org.openqa.selenium.ie.InternetExplorerOptions;          import java.io.File;     import java.io.IOException;     import java.io.PrintStream;     import java.nio.file.Files;          @EnabledOnOs(OS.WINDOWS)     public class InternetExplorerTest {         public InternetExplorerDriver driver;         private File logLocation;         private File tempDirectory;              @AfterEach         public void quit() {             if (logLocation != null && logLocation.exists()) {                 logLocation.delete();             }             if (tempDirectory  != null && tempDirectory.exists()) {                 tempDirectory.delete();             }                  driver.quit();         }              @Test         public void basicOptionsWin10() {             InternetExplorerOptions options = new InternetExplorerOptions();             options.attachToEdgeChrome();             options.withEdgeExecutablePath(getEdgeLocation());             driver = new InternetExplorerDriver(options);         }              @Test         public void basicOptionsWin11() {             InternetExplorerOptions options = new InternetExplorerOptions();             driver = new InternetExplorerDriver(options);         }              @Test         public void logsToFile() throws IOException {             InternetExplorerDriverService service = new InternetExplorerDriverService.Builder()                     .withLogFile(getLogLocation())                     .build();                  driver = new InternetExplorerDriver(service);                  String fileContent = new String(Files.readAllBytes(getLogLocation().toPath()));             Assertions.assertTrue(fileContent.contains("Started InternetExplorerDriver server"));         }              @Test         public void logsToConsole() throws IOException {             System.setOut(new PrintStream(getLogLocation()));                  InternetExplorerDriverService service = new InternetExplorerDriverService.Builder()                     .withLogOutput(System.out)                     .build();                  driver = new InternetExplorerDriver(service);                  String fileContent = new String(Files.readAllBytes(getLogLocation().toPath()));             Assertions.assertTrue(fileContent.contains("Started InternetExplorerDriver server"));         }              @Test         public void logsWithLevel() throws IOException {             System.setProperty(InternetExplorerDriverService.IE_DRIVER_LOGFILE_PROPERTY,                     getLogLocation().getAbsolutePath());                  InternetExplorerDriverService service = new InternetExplorerDriverService.Builder()                     .withLogLevel(InternetExplorerDriverLogLevel.WARN)                     .build();                  driver = new InternetExplorerDriver(service);                  String fileContent = new String(Files.readAllBytes(getLogLocation().toPath()));             Assertions.assertTrue(fileContent.contains("Invalid capability setting: timeouts is type null"));         }              @Test         public void supportingFilesLocation() throws IOException {             InternetExplorerDriverService service = new InternetExplorerDriverService.Builder()                     .withExtractPath(getTempDirectory())                     .build();                  driver = new InternetExplorerDriver(service);             Assertions.assertTrue(new File(getTempDirectory() + "/IEDriver.tmp").exists());         }              private File getLogLocation() throws IOException {             if (logLocation == null || !logLocation.exists()) {                 logLocation = File.createTempFile("iedriver-", ".log");             }                  return logLocation;         }              private File getTempDirectory() throws IOException {             if (tempDirectory == null || !tempDirectory.exists()) {                 tempDirectory = Files.createTempDirectory("supporting-").toFile();             }                  return tempDirectory;         }              private String getEdgeLocation() {             return System.getenv("EDGE_BIN");         }     }     

**Note** : Java also allows setting file output by System Property:   Property key: `InternetExplorerDriverService.IE_DRIVER_LOGFILE_PROPERTY`   Property value: String representing path to log file                   service = webdriver.IeService(log_output=log_path, log_level="INFO")              driver = webdriver.Ie(service=service)

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/python/tests/browsers/test_internet_explorer.py#L97-L99)

##### examples/python/tests/browsers/test\_internet\_explorer.py

Copy  Close               import os     import subprocess     import sys          import pytest     from selenium import webdriver               @pytest.mark.skipif(sys.platform != "win32", reason="requires Windows")     def test_basic_options_win10(edge_bin):         options = webdriver.IeOptions()         options.attach_to_edge_chrome = True         options.edge_executable_path = edge_bin         driver = webdriver.Ie(options=options)              driver.quit()               @pytest.mark.skipif(sys.platform != "win32", reason="requires Windows")     def test_basic_options_win11():         options = webdriver.IeOptions()         driver = webdriver.Ie(options=options)              driver.quit()          @pytest.mark.skipif(sys.platform != "win32", reason="requires Windows")     def test_file_upload_timeout():         options = webdriver.IeOptions()         options.file_upload_timeout = 2000              driver = webdriver.Ie(options=options)              driver.quit()               @pytest.mark.skipif(sys.platform != "win32", reason="requires Windows")     def test_ensure_clean_session():         options = webdriver.IeOptions()         options.ensure_clean_session = True              driver = webdriver.Ie(options=options)              driver.quit()               @pytest.mark.skipif(sys.platform != "win32", reason="requires Windows")     def test_ignore_zoom_level():         options = webdriver.IeOptions()         options.ignore_zoom_level = True              driver = webdriver.Ie(options=options)              driver.quit()               @pytest.mark.skipif(sys.platform != "win32", reason="requires Windows")     def test_ignore_protected_mode_settings():         options = webdriver.IeOptions()         options.ignore_protected_mode_settings = True              driver = webdriver.Ie(options=options)              driver.quit()               @pytest.mark.skipif(sys.platform != "win32", reason="requires Windows")     def test_silent():         service = webdriver.IeService(service_args=["--silent"])         driver = webdriver.Ie(service=service)              driver.quit()               @pytest.mark.skipif(sys.platform != "win32", reason="requires Windows")     def test_cmd_options():         options = webdriver.IeOptions()         options.add_argument("-private")              driver = webdriver.Ie(options=options)              driver.quit()          # Skipping this as it fails on Windows because the value of registry setting in      # HKEY_CURRENT_USER\Software\Microsoft\Internet Explorer\Main\TabProcGrowth must be '0'      @pytest.mark.skip     def test_force_create_process_api():         options = webdriver.IeOptions()         options.force_create_process_api = True              driver = webdriver.Ie(options=options)              driver.quit()               @pytest.mark.skipif(sys.platform != "win32", reason="requires Windows")     def test_log_to_file(log_path):         service = webdriver.IeService(log_output=log_path, log_level="INFO")              driver = webdriver.Ie(service=service)              with open(log_path, "r") as fp:             assert "Starting WebDriver server" in fp.readline()              driver.quit()               @pytest.mark.skipif(sys.platform != "win32", reason="requires Windows")     def test_log_to_stdout(capfd):         service = webdriver.IeService(log_output=subprocess.STDOUT)              driver = webdriver.Ie(service=service)              out, err = capfd.readouterr()         assert "Started InternetExplorerDriver server" in out              driver.quit()               @pytest.mark.skipif(sys.platform != "win32", reason="requires Windows")     def test_log_level(log_path):         service = webdriver.IeService(log_output=log_path, log_level="WARN")              driver = webdriver.Ie(service=service)              with open(log_path, "r") as fp:             assert "Started InternetExplorerDriver server (32-bit)" in fp.readline()              driver.quit()               @pytest.mark.skipif(sys.platform != "win32", reason="requires Windows")     def test_supporting_files(temp_dir):         service = webdriver.IeService(service_args=["–extract-path=" + temp_dir])              driver = webdriver.Ie(service=service)              driver.quit()     

[Implementation Missing](https://github.com/SeleniumHQ/selenium)

[Selenium v4.10](https://github.com/SeleniumHQ/selenium/releases/tag/selenium-4.10.0)                     service.log = file_name

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/ruby/spec/browsers/internet_explorer_spec.rb#L82)

##### examples/ruby/spec/browsers/internet\_explorer\_spec.rb

Copy  Close               # frozen_string_literal: true          require 'spec_helper'          RSpec.describe 'Internet Explorer', exclusive: {platform: :windows} do       describe 'Options' do         let(:edge_location) { ENV.fetch('EDGE_BIN', nil) }         let(:url) { 'https://www.selenium.dev/selenium/web/' }              before do           @options = Selenium::WebDriver::IE::Options.new           @options.attach_to_edge_chrome = true           @options.edge_executable_path = edge_location         end              it 'basic options Win10' do           options = Selenium::WebDriver::IE::Options.new           options.attach_to_edge_chrome = true           options.edge_executable_path = edge_location           @driver = Selenium::WebDriver.for :ie, options: options         end              it 'basic options Win11' do           options = Selenium::WebDriver::Options.ie           @driver = Selenium::WebDriver.for :ie, options: options         end              it 'sets the file upload dialog timeout' do           @options.file_upload_dialog_timeout = 2000           driver = Selenium::WebDriver.for(:ie, options: @options)           driver.quit         end              it 'ensures a clean session' do           @options.ensure_clean_session = true           driver = Selenium::WebDriver.for(:ie, options: @options)           driver.quit         end              it 'ignores the zoom setting' do           @options.ignore_zoom_level = true           driver = Selenium::WebDriver.for(:ie, options: @options)           driver.quit         end              it 'ignores the protected mode settings' do           @options.ignore_protected_mode_settings = true           driver = Selenium::WebDriver.for(:ie, options: @options)           driver.quit         end              it 'adds the silent option', skip: 'This capability will be added on the release 4.22.0' do           @options.silent = true           expect(@options.silent).to be_truthy         end              it 'sets the command line options' do           @options.add_argument('-k')           Selenium::WebDriver.for(:ie, options: @options)         end              it 'launches ie with the create process api', skip: 'When using with IE 8 or higher, it needs a registry value' do           @options.force_create_process_api = true           Selenium::WebDriver.for(:ie, options: @options)           expect(@options.instance_variable_get(:@options)['force_create_process_api'])             .to eq({force_create_process_api: true})         end       end            describe 'Service' do         let(:file_name) { Tempfile.new('iedriver').path }         let(:root_directory) { Dir.mktmpdir }              after do           FileUtils.rm_f(file_name)           FileUtils.remove_entry root_directory         end              it 'logs to file' do           service = Selenium::WebDriver::Service.ie                service.log = file_name                @driver = Selenium::WebDriver.for :ie, service: service           expect(File.readlines(file_name).first).to include('Started InternetExplorerDriver server')         end              it 'logs to console' do           service = Selenium::WebDriver::Service.ie                service.log = $stdout                expect {             @driver = Selenium::WebDriver.for :ie, service: service           }.to output(/Started InternetExplorerDriver server/).to_stdout_from_any_process         end              it 'sets log level' do           service = Selenium::WebDriver::Service.ie           service.log = $stdout                service.args << '-log-level=WARN'                expect {             @driver = Selenium::WebDriver.for :ie, service: service           }.to output(/Invalid capability setting: timeouts is type null/).to_stdout_from_any_process         end              it 'sets location for supporting files' do           service = Selenium::WebDriver::Service.ie                service.args << "–extract-path=#{root_directory}"                @driver = Selenium::WebDriver.for :ie, service: service         end       end     end     

[Add Example](https://www.selenium.dev/documentation/about/contributing/#creating-examples)

[Add Example](https://www.selenium.dev/documentation/about/contributing/#creating-examples)

#### Console output

To change the logging output to display in the console as STDOUT:

  * Java   * Python   * CSharp   * Ruby   * JavaScript   * Kotlin

[Selenium v4.10](https://github.com/SeleniumHQ/selenium/releases/tag/selenium-4.10.0)                               .withLogOutput(System.out)

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/java/src/test/java/dev/selenium/browsers/InternetExplorerTest.java#L67)

##### examples/java/src/test/java/dev/selenium/browsers/InternetExplorerTest.java

Copy  Close               package dev.selenium.browsers;          import org.junit.jupiter.api.AfterEach;     import org.junit.jupiter.api.Assertions;     import org.junit.jupiter.api.Test;     import org.junit.jupiter.api.condition.EnabledOnOs;     import org.junit.jupiter.api.condition.OS;     import org.openqa.selenium.ie.InternetExplorerDriver;     import org.openqa.selenium.ie.InternetExplorerDriverLogLevel;     import org.openqa.selenium.ie.InternetExplorerDriverService;     import org.openqa.selenium.ie.InternetExplorerOptions;          import java.io.File;     import java.io.IOException;     import java.io.PrintStream;     import java.nio.file.Files;          @EnabledOnOs(OS.WINDOWS)     public class InternetExplorerTest {         public InternetExplorerDriver driver;         private File logLocation;         private File tempDirectory;              @AfterEach         public void quit() {             if (logLocation != null && logLocation.exists()) {                 logLocation.delete();             }             if (tempDirectory  != null && tempDirectory.exists()) {                 tempDirectory.delete();             }                  driver.quit();         }              @Test         public void basicOptionsWin10() {             InternetExplorerOptions options = new InternetExplorerOptions();             options.attachToEdgeChrome();             options.withEdgeExecutablePath(getEdgeLocation());             driver = new InternetExplorerDriver(options);         }              @Test         public void basicOptionsWin11() {             InternetExplorerOptions options = new InternetExplorerOptions();             driver = new InternetExplorerDriver(options);         }              @Test         public void logsToFile() throws IOException {             InternetExplorerDriverService service = new InternetExplorerDriverService.Builder()                     .withLogFile(getLogLocation())                     .build();                  driver = new InternetExplorerDriver(service);                  String fileContent = new String(Files.readAllBytes(getLogLocation().toPath()));             Assertions.assertTrue(fileContent.contains("Started InternetExplorerDriver server"));         }              @Test         public void logsToConsole() throws IOException {             System.setOut(new PrintStream(getLogLocation()));                  InternetExplorerDriverService service = new InternetExplorerDriverService.Builder()                     .withLogOutput(System.out)                     .build();                  driver = new InternetExplorerDriver(service);                  String fileContent = new String(Files.readAllBytes(getLogLocation().toPath()));             Assertions.assertTrue(fileContent.contains("Started InternetExplorerDriver server"));         }              @Test         public void logsWithLevel() throws IOException {             System.setProperty(InternetExplorerDriverService.IE_DRIVER_LOGFILE_PROPERTY,                     getLogLocation().getAbsolutePath());                  InternetExplorerDriverService service = new InternetExplorerDriverService.Builder()                     .withLogLevel(InternetExplorerDriverLogLevel.WARN)                     .build();                  driver = new InternetExplorerDriver(service);                  String fileContent = new String(Files.readAllBytes(getLogLocation().toPath()));             Assertions.assertTrue(fileContent.contains("Invalid capability setting: timeouts is type null"));         }              @Test         public void supportingFilesLocation() throws IOException {             InternetExplorerDriverService service = new InternetExplorerDriverService.Builder()                     .withExtractPath(getTempDirectory())                     .build();                  driver = new InternetExplorerDriver(service);             Assertions.assertTrue(new File(getTempDirectory() + "/IEDriver.tmp").exists());         }              private File getLogLocation() throws IOException {             if (logLocation == null || !logLocation.exists()) {                 logLocation = File.createTempFile("iedriver-", ".log");             }                  return logLocation;         }              private File getTempDirectory() throws IOException {             if (tempDirectory == null || !tempDirectory.exists()) {                 tempDirectory = Files.createTempDirectory("supporting-").toFile();             }                  return tempDirectory;         }              private String getEdgeLocation() {             return System.getenv("EDGE_BIN");         }     }     

**Note** : Java also allows setting console output by System Property;   Property key: `InternetExplorerDriverService.IE_DRIVER_LOGFILE_PROPERTY`   Property value: `DriverService.LOG_STDOUT` or `DriverService.LOG_STDERR`

[Selenium v4.11](https://github.com/SeleniumHQ/selenium/releases/tag/selenium-4.11.0)                   service = webdriver.IeService(log_output=subprocess.STDOUT)              driver = webdriver.Ie(service=service)

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/python/tests/browsers/test_internet_explorer.py#L109-L111)

##### examples/python/tests/browsers/test\_internet\_explorer.py

Copy  Close               import os     import subprocess     import sys          import pytest     from selenium import webdriver               @pytest.mark.skipif(sys.platform != "win32", reason="requires Windows")     def test_basic_options_win10(edge_bin):         options = webdriver.IeOptions()         options.attach_to_edge_chrome = True         options.edge_executable_path = edge_bin         driver = webdriver.Ie(options=options)              driver.quit()               @pytest.mark.skipif(sys.platform != "win32", reason="requires Windows")     def test_basic_options_win11():         options = webdriver.IeOptions()         driver = webdriver.Ie(options=options)              driver.quit()          @pytest.mark.skipif(sys.platform != "win32", reason="requires Windows")     def test_file_upload_timeout():         options = webdriver.IeOptions()         options.file_upload_timeout = 2000              driver = webdriver.Ie(options=options)              driver.quit()               @pytest.mark.skipif(sys.platform != "win32", reason="requires Windows")     def test_ensure_clean_session():         options = webdriver.IeOptions()         options.ensure_clean_session = True              driver = webdriver.Ie(options=options)              driver.quit()               @pytest.mark.skipif(sys.platform != "win32", reason="requires Windows")     def test_ignore_zoom_level():         options = webdriver.IeOptions()         options.ignore_zoom_level = True              driver = webdriver.Ie(options=options)              driver.quit()               @pytest.mark.skipif(sys.platform != "win32", reason="requires Windows")     def test_ignore_protected_mode_settings():         options = webdriver.IeOptions()         options.ignore_protected_mode_settings = True              driver = webdriver.Ie(options=options)              driver.quit()               @pytest.mark.skipif(sys.platform != "win32", reason="requires Windows")     def test_silent():         service = webdriver.IeService(service_args=["--silent"])         driver = webdriver.Ie(service=service)              driver.quit()               @pytest.mark.skipif(sys.platform != "win32", reason="requires Windows")     def test_cmd_options():         options = webdriver.IeOptions()         options.add_argument("-private")              driver = webdriver.Ie(options=options)              driver.quit()          # Skipping this as it fails on Windows because the value of registry setting in      # HKEY_CURRENT_USER\Software\Microsoft\Internet Explorer\Main\TabProcGrowth must be '0'      @pytest.mark.skip     def test_force_create_process_api():         options = webdriver.IeOptions()         options.force_create_process_api = True              driver = webdriver.Ie(options=options)              driver.quit()               @pytest.mark.skipif(sys.platform != "win32", reason="requires Windows")     def test_log_to_file(log_path):         service = webdriver.IeService(log_output=log_path, log_level="INFO")              driver = webdriver.Ie(service=service)              with open(log_path, "r") as fp:             assert "Starting WebDriver server" in fp.readline()              driver.quit()               @pytest.mark.skipif(sys.platform != "win32", reason="requires Windows")     def test_log_to_stdout(capfd):         service = webdriver.IeService(log_output=subprocess.STDOUT)              driver = webdriver.Ie(service=service)              out, err = capfd.readouterr()         assert "Started InternetExplorerDriver server" in out              driver.quit()               @pytest.mark.skipif(sys.platform != "win32", reason="requires Windows")     def test_log_level(log_path):         service = webdriver.IeService(log_output=log_path, log_level="WARN")              driver = webdriver.Ie(service=service)              with open(log_path, "r") as fp:             assert "Started InternetExplorerDriver server (32-bit)" in fp.readline()              driver.quit()               @pytest.mark.skipif(sys.platform != "win32", reason="requires Windows")     def test_supporting_files(temp_dir):         service = webdriver.IeService(service_args=["–extract-path=" + temp_dir])              driver = webdriver.Ie(service=service)              driver.quit()     

[Implementation Missing](https://github.com/SeleniumHQ/selenium)

[Selenium v4.10](https://github.com/SeleniumHQ/selenium/releases/tag/selenium-4.10.0)                     service.log = $stdout

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/ruby/spec/browsers/internet_explorer_spec.rb#L91)

##### examples/ruby/spec/browsers/internet\_explorer\_spec.rb

Copy  Close               # frozen_string_literal: true          require 'spec_helper'          RSpec.describe 'Internet Explorer', exclusive: {platform: :windows} do       describe 'Options' do         let(:edge_location) { ENV.fetch('EDGE_BIN', nil) }         let(:url) { 'https://www.selenium.dev/selenium/web/' }              before do           @options = Selenium::WebDriver::IE::Options.new           @options.attach_to_edge_chrome = true           @options.edge_executable_path = edge_location         end              it 'basic options Win10' do           options = Selenium::WebDriver::IE::Options.new           options.attach_to_edge_chrome = true           options.edge_executable_path = edge_location           @driver = Selenium::WebDriver.for :ie, options: options         end              it 'basic options Win11' do           options = Selenium::WebDriver::Options.ie           @driver = Selenium::WebDriver.for :ie, options: options         end              it 'sets the file upload dialog timeout' do           @options.file_upload_dialog_timeout = 2000           driver = Selenium::WebDriver.for(:ie, options: @options)           driver.quit         end              it 'ensures a clean session' do           @options.ensure_clean_session = true           driver = Selenium::WebDriver.for(:ie, options: @options)           driver.quit         end              it 'ignores the zoom setting' do           @options.ignore_zoom_level = true           driver = Selenium::WebDriver.for(:ie, options: @options)           driver.quit         end              it 'ignores the protected mode settings' do           @options.ignore_protected_mode_settings = true           driver = Selenium::WebDriver.for(:ie, options: @options)           driver.quit         end              it 'adds the silent option', skip: 'This capability will be added on the release 4.22.0' do           @options.silent = true           expect(@options.silent).to be_truthy         end              it 'sets the command line options' do           @options.add_argument('-k')           Selenium::WebDriver.for(:ie, options: @options)         end              it 'launches ie with the create process api', skip: 'When using with IE 8 or higher, it needs a registry value' do           @options.force_create_process_api = true           Selenium::WebDriver.for(:ie, options: @options)           expect(@options.instance_variable_get(:@options)['force_create_process_api'])             .to eq({force_create_process_api: true})         end       end            describe 'Service' do         let(:file_name) { Tempfile.new('iedriver').path }         let(:root_directory) { Dir.mktmpdir }              after do           FileUtils.rm_f(file_name)           FileUtils.remove_entry root_directory         end              it 'logs to file' do           service = Selenium::WebDriver::Service.ie                service.log = file_name                @driver = Selenium::WebDriver.for :ie, service: service           expect(File.readlines(file_name).first).to include('Started InternetExplorerDriver server')         end              it 'logs to console' do           service = Selenium::WebDriver::Service.ie                service.log = $stdout                expect {             @driver = Selenium::WebDriver.for :ie, service: service           }.to output(/Started InternetExplorerDriver server/).to_stdout_from_any_process         end              it 'sets log level' do           service = Selenium::WebDriver::Service.ie           service.log = $stdout                service.args << '-log-level=WARN'                expect {             @driver = Selenium::WebDriver.for :ie, service: service           }.to output(/Invalid capability setting: timeouts is type null/).to_stdout_from_any_process         end              it 'sets location for supporting files' do           service = Selenium::WebDriver::Service.ie                service.args << "–extract-path=#{root_directory}"                @driver = Selenium::WebDriver.for :ie, service: service         end       end     end     

[Add Example](https://www.selenium.dev/documentation/about/contributing/#creating-examples)

[Add Example](https://www.selenium.dev/documentation/about/contributing/#creating-examples)

### Log Level

There are 6 available log levels: `FATAL`, `ERROR`, `WARN`, `INFO`, `DEBUG`, and `TRACE` If logging output is specified, the default level is `FATAL`

  * Java   * Python   * CSharp   * Ruby   * JavaScript   * Kotlin

                              .withLogLevel(InternetExplorerDriverLogLevel.WARN)

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/java/src/test/java/dev/selenium/browsers/InternetExplorerTest.java#L82)

##### examples/java/src/test/java/dev/selenium/browsers/InternetExplorerTest.java

Copy  Close               package dev.selenium.browsers;          import org.junit.jupiter.api.AfterEach;     import org.junit.jupiter.api.Assertions;     import org.junit.jupiter.api.Test;     import org.junit.jupiter.api.condition.EnabledOnOs;     import org.junit.jupiter.api.condition.OS;     import org.openqa.selenium.ie.InternetExplorerDriver;     import org.openqa.selenium.ie.InternetExplorerDriverLogLevel;     import org.openqa.selenium.ie.InternetExplorerDriverService;     import org.openqa.selenium.ie.InternetExplorerOptions;          import java.io.File;     import java.io.IOException;     import java.io.PrintStream;     import java.nio.file.Files;          @EnabledOnOs(OS.WINDOWS)     public class InternetExplorerTest {         public InternetExplorerDriver driver;         private File logLocation;         private File tempDirectory;              @AfterEach         public void quit() {             if (logLocation != null && logLocation.exists()) {                 logLocation.delete();             }             if (tempDirectory  != null && tempDirectory.exists()) {                 tempDirectory.delete();             }                  driver.quit();         }              @Test         public void basicOptionsWin10() {             InternetExplorerOptions options = new InternetExplorerOptions();             options.attachToEdgeChrome();             options.withEdgeExecutablePath(getEdgeLocation());             driver = new InternetExplorerDriver(options);         }              @Test         public void basicOptionsWin11() {             InternetExplorerOptions options = new InternetExplorerOptions();             driver = new InternetExplorerDriver(options);         }              @Test         public void logsToFile() throws IOException {             InternetExplorerDriverService service = new InternetExplorerDriverService.Builder()                     .withLogFile(getLogLocation())                     .build();                  driver = new InternetExplorerDriver(service);                  String fileContent = new String(Files.readAllBytes(getLogLocation().toPath()));             Assertions.assertTrue(fileContent.contains("Started InternetExplorerDriver server"));         }              @Test         public void logsToConsole() throws IOException {             System.setOut(new PrintStream(getLogLocation()));                  InternetExplorerDriverService service = new InternetExplorerDriverService.Builder()                     .withLogOutput(System.out)                     .build();                  driver = new InternetExplorerDriver(service);                  String fileContent = new String(Files.readAllBytes(getLogLocation().toPath()));             Assertions.assertTrue(fileContent.contains("Started InternetExplorerDriver server"));         }              @Test         public void logsWithLevel() throws IOException {             System.setProperty(InternetExplorerDriverService.IE_DRIVER_LOGFILE_PROPERTY,                     getLogLocation().getAbsolutePath());                  InternetExplorerDriverService service = new InternetExplorerDriverService.Builder()                     .withLogLevel(InternetExplorerDriverLogLevel.WARN)                     .build();                  driver = new InternetExplorerDriver(service);                  String fileContent = new String(Files.readAllBytes(getLogLocation().toPath()));             Assertions.assertTrue(fileContent.contains("Invalid capability setting: timeouts is type null"));         }              @Test         public void supportingFilesLocation() throws IOException {             InternetExplorerDriverService service = new InternetExplorerDriverService.Builder()                     .withExtractPath(getTempDirectory())                     .build();                  driver = new InternetExplorerDriver(service);             Assertions.assertTrue(new File(getTempDirectory() + "/IEDriver.tmp").exists());         }              private File getLogLocation() throws IOException {             if (logLocation == null || !logLocation.exists()) {                 logLocation = File.createTempFile("iedriver-", ".log");             }                  return logLocation;         }              private File getTempDirectory() throws IOException {             if (tempDirectory == null || !tempDirectory.exists()) {                 tempDirectory = Files.createTempDirectory("supporting-").toFile();             }                  return tempDirectory;         }              private String getEdgeLocation() {             return System.getenv("EDGE_BIN");         }     }     

**Note** : Java also allows setting log level by System Property:   Property key: `InternetExplorerDriverService.IE_DRIVER_LOGLEVEL_PROPERTY`   Property value: String representation of `InternetExplorerDriverLogLevel.DEBUG.toString()` enum                   service = webdriver.IeService(log_output=log_path, log_level="WARN")              driver = webdriver.Ie(service=service)

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/python/tests/browsers/test_internet_explorer.py#L121-L123)

##### examples/python/tests/browsers/test\_internet\_explorer.py

Copy  Close               import os     import subprocess     import sys          import pytest     from selenium import webdriver               @pytest.mark.skipif(sys.platform != "win32", reason="requires Windows")     def test_basic_options_win10(edge_bin):         options = webdriver.IeOptions()         options.attach_to_edge_chrome = True         options.edge_executable_path = edge_bin         driver = webdriver.Ie(options=options)              driver.quit()               @pytest.mark.skipif(sys.platform != "win32", reason="requires Windows")     def test_basic_options_win11():         options = webdriver.IeOptions()         driver = webdriver.Ie(options=options)              driver.quit()          @pytest.mark.skipif(sys.platform != "win32", reason="requires Windows")     def test_file_upload_timeout():         options = webdriver.IeOptions()         options.file_upload_timeout = 2000              driver = webdriver.Ie(options=options)              driver.quit()               @pytest.mark.skipif(sys.platform != "win32", reason="requires Windows")     def test_ensure_clean_session():         options = webdriver.IeOptions()         options.ensure_clean_session = True              driver = webdriver.Ie(options=options)              driver.quit()               @pytest.mark.skipif(sys.platform != "win32", reason="requires Windows")     def test_ignore_zoom_level():         options = webdriver.IeOptions()         options.ignore_zoom_level = True              driver = webdriver.Ie(options=options)              driver.quit()               @pytest.mark.skipif(sys.platform != "win32", reason="requires Windows")     def test_ignore_protected_mode_settings():         options = webdriver.IeOptions()         options.ignore_protected_mode_settings = True              driver = webdriver.Ie(options=options)              driver.quit()               @pytest.mark.skipif(sys.platform != "win32", reason="requires Windows")     def test_silent():         service = webdriver.IeService(service_args=["--silent"])         driver = webdriver.Ie(service=service)              driver.quit()               @pytest.mark.skipif(sys.platform != "win32", reason="requires Windows")     def test_cmd_options():         options = webdriver.IeOptions()         options.add_argument("-private")              driver = webdriver.Ie(options=options)              driver.quit()          # Skipping this as it fails on Windows because the value of registry setting in      # HKEY_CURRENT_USER\Software\Microsoft\Internet Explorer\Main\TabProcGrowth must be '0'      @pytest.mark.skip     def test_force_create_process_api():         options = webdriver.IeOptions()         options.force_create_process_api = True              driver = webdriver.Ie(options=options)              driver.quit()               @pytest.mark.skipif(sys.platform != "win32", reason="requires Windows")     def test_log_to_file(log_path):         service = webdriver.IeService(log_output=log_path, log_level="INFO")              driver = webdriver.Ie(service=service)              with open(log_path, "r") as fp:             assert "Starting WebDriver server" in fp.readline()              driver.quit()               @pytest.mark.skipif(sys.platform != "win32", reason="requires Windows")     def test_log_to_stdout(capfd):         service = webdriver.IeService(log_output=subprocess.STDOUT)              driver = webdriver.Ie(service=service)              out, err = capfd.readouterr()         assert "Started InternetExplorerDriver server" in out              driver.quit()               @pytest.mark.skipif(sys.platform != "win32", reason="requires Windows")     def test_log_level(log_path):         service = webdriver.IeService(log_output=log_path, log_level="WARN")              driver = webdriver.Ie(service=service)              with open(log_path, "r") as fp:             assert "Started InternetExplorerDriver server (32-bit)" in fp.readline()              driver.quit()               @pytest.mark.skipif(sys.platform != "win32", reason="requires Windows")     def test_supporting_files(temp_dir):         service = webdriver.IeService(service_args=["–extract-path=" + temp_dir])              driver = webdriver.Ie(service=service)              driver.quit()     

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/dotnet/SeleniumDocs/Browsers/InternetExplorerTest.cs#L85)

##### examples/dotnet/SeleniumDocs/Browsers/InternetExplorerTest.cs

Copy  Close               using System;     using System.IO;     using System.Linq;     using Microsoft.VisualStudio.TestTools.UnitTesting;     using OpenQA.Selenium.IE;     using SeleniumDocs.TestSupport;          namespace SeleniumDocs.Browsers     {         [TestClassCustom]         [EnabledOnOs("WINDOWS")]         public class InternetExplorerTest         {             private InternetExplorerDriver _driver;             private string _logLocation;             private string _tempPath;                  [TestCleanup]             public void Cleanup()             {                 if (_logLocation != null && File.Exists(_logLocation))                 {                     File.Delete(_logLocation);                 }                 if (_tempPath != null && File.Exists(_tempPath))                 {                     File.Delete(_tempPath);                 }                 _driver.Quit();             }                  [TestMethod]             public void BasicOptionsWin10()             {                 var options = new InternetExplorerOptions();                 options.AttachToEdgeChrome = true;                 options.EdgeExecutablePath = GetEdgeLocation();                 _driver = new InternetExplorerDriver(options);             }                  [TestMethod]             public void BasicOptionsWin11()             {                 var options = new InternetExplorerOptions();                 _driver = new InternetExplorerDriver(options);             }                  [TestMethod]             [Ignore("Not implemented")]             public void LogsToFile()             {                 var service = InternetExplorerDriverService.CreateDefaultService();                 service.LogFile = GetLogLocation();                      _driver = new InternetExplorerDriver(service);                 _driver.Quit(); // Close the Service log file before reading                 var lines = File.ReadLines(GetLogLocation());                 Console.WriteLine("Lines: {0}", lines);                 Assert.IsTrue(lines.Contains("Started InternetExplorerDriver server"));             }                  [TestMethod]             [Ignore("Not implemented")]             public void LogsToConsole()             {                 var stringWriter = new StringWriter();                 var originalOutput = Console.Out;                 Console.SetOut(stringWriter);                      var service = InternetExplorerDriverService.CreateDefaultService();                      //service.LogToConsole = true;                      _driver = new InternetExplorerDriver(service);                 Assert.IsTrue(stringWriter.ToString().Contains("geckodriver	INFO	Listening on"));                 Console.SetOut(originalOutput);                 stringWriter.Dispose();             }                  [TestMethod]             public void LogsLevel()             {                 var service = InternetExplorerDriverService.CreateDefaultService();                 service.LogFile = GetLogLocation();                      service.LoggingLevel = InternetExplorerDriverLogLevel.Warn;                      _driver = new InternetExplorerDriver(service);                 _driver.Quit(); // Close the Service log file before reading                 var lines = File.ReadLines(GetLogLocation());                 Assert.IsNotNull(lines.FirstOrDefault(line => line.Contains("Invalid capability setting: timeouts is type null")));             }                  [TestMethod]             public void SupportingFilesLocation()             {                 var service = InternetExplorerDriverService.CreateDefaultService();                      service.LibraryExtractionPath = GetTempDirectory();                      _driver = new InternetExplorerDriver(service);                 Assert.IsTrue(File.Exists(GetTempDirectory() + "/IEDriver.tmp"));             }                  private string GetLogLocation()             {                 if (_logLocation == null || !File.Exists(_logLocation))                 {                     _logLocation = Path.GetTempFileName();                 }                      return _logLocation;             }                  private string GetTempDirectory()             {                 if (_tempPath == null || !File.Exists(_tempPath))                 {                     _tempPath = Path.GetTempPath();                 }                      return _tempPath;             }                  private string GetEdgeLocation()             {                 return Environment.GetEnvironmentVariable("EDGE_BIN");             }         }     }

[Selenium v4.10](https://github.com/SeleniumHQ/selenium/releases/tag/selenium-4.10.0)                     service.args << '-log-level=WARN'

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/ruby/spec/browsers/internet_explorer_spec.rb#L102)

##### examples/ruby/spec/browsers/internet\_explorer\_spec.rb

Copy  Close               # frozen_string_literal: true          require 'spec_helper'          RSpec.describe 'Internet Explorer', exclusive: {platform: :windows} do       describe 'Options' do         let(:edge_location) { ENV.fetch('EDGE_BIN', nil) }         let(:url) { 'https://www.selenium.dev/selenium/web/' }              before do           @options = Selenium::WebDriver::IE::Options.new           @options.attach_to_edge_chrome = true           @options.edge_executable_path = edge_location         end              it 'basic options Win10' do           options = Selenium::WebDriver::IE::Options.new           options.attach_to_edge_chrome = true           options.edge_executable_path = edge_location           @driver = Selenium::WebDriver.for :ie, options: options         end              it 'basic options Win11' do           options = Selenium::WebDriver::Options.ie           @driver = Selenium::WebDriver.for :ie, options: options         end              it 'sets the file upload dialog timeout' do           @options.file_upload_dialog_timeout = 2000           driver = Selenium::WebDriver.for(:ie, options: @options)           driver.quit         end              it 'ensures a clean session' do           @options.ensure_clean_session = true           driver = Selenium::WebDriver.for(:ie, options: @options)           driver.quit         end              it 'ignores the zoom setting' do           @options.ignore_zoom_level = true           driver = Selenium::WebDriver.for(:ie, options: @options)           driver.quit         end              it 'ignores the protected mode settings' do           @options.ignore_protected_mode_settings = true           driver = Selenium::WebDriver.for(:ie, options: @options)           driver.quit         end              it 'adds the silent option', skip: 'This capability will be added on the release 4.22.0' do           @options.silent = true           expect(@options.silent).to be_truthy         end              it 'sets the command line options' do           @options.add_argument('-k')           Selenium::WebDriver.for(:ie, options: @options)         end              it 'launches ie with the create process api', skip: 'When using with IE 8 or higher, it needs a registry value' do           @options.force_create_process_api = true           Selenium::WebDriver.for(:ie, options: @options)           expect(@options.instance_variable_get(:@options)['force_create_process_api'])             .to eq({force_create_process_api: true})         end       end            describe 'Service' do         let(:file_name) { Tempfile.new('iedriver').path }         let(:root_directory) { Dir.mktmpdir }              after do           FileUtils.rm_f(file_name)           FileUtils.remove_entry root_directory         end              it 'logs to file' do           service = Selenium::WebDriver::Service.ie                service.log = file_name                @driver = Selenium::WebDriver.for :ie, service: service           expect(File.readlines(file_name).first).to include('Started InternetExplorerDriver server')         end              it 'logs to console' do           service = Selenium::WebDriver::Service.ie                service.log = $stdout                expect {             @driver = Selenium::WebDriver.for :ie, service: service           }.to output(/Started InternetExplorerDriver server/).to_stdout_from_any_process         end              it 'sets log level' do           service = Selenium::WebDriver::Service.ie           service.log = $stdout                service.args << '-log-level=WARN'                expect {             @driver = Selenium::WebDriver.for :ie, service: service           }.to output(/Invalid capability setting: timeouts is type null/).to_stdout_from_any_process         end              it 'sets location for supporting files' do           service = Selenium::WebDriver::Service.ie                service.args << "–extract-path=#{root_directory}"                @driver = Selenium::WebDriver.for :ie, service: service         end       end     end     

[Add Example](https://www.selenium.dev/documentation/about/contributing/#creating-examples)

[Add Example](https://www.selenium.dev/documentation/about/contributing/#creating-examples)

### Supporting Files Path

  * Java   * Python   * CSharp   * Ruby   * JavaScript   * Kotlin

                              .withExtractPath(getTempDirectory())

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/java/src/test/java/dev/selenium/browsers/InternetExplorerTest.java#L94)

##### examples/java/src/test/java/dev/selenium/browsers/InternetExplorerTest.java

Copy  Close               package dev.selenium.browsers;          import org.junit.jupiter.api.AfterEach;     import org.junit.jupiter.api.Assertions;     import org.junit.jupiter.api.Test;     import org.junit.jupiter.api.condition.EnabledOnOs;     import org.junit.jupiter.api.condition.OS;     import org.openqa.selenium.ie.InternetExplorerDriver;     import org.openqa.selenium.ie.InternetExplorerDriverLogLevel;     import org.openqa.selenium.ie.InternetExplorerDriverService;     import org.openqa.selenium.ie.InternetExplorerOptions;          import java.io.File;     import java.io.IOException;     import java.io.PrintStream;     import java.nio.file.Files;          @EnabledOnOs(OS.WINDOWS)     public class InternetExplorerTest {         public InternetExplorerDriver driver;         private File logLocation;         private File tempDirectory;              @AfterEach         public void quit() {             if (logLocation != null && logLocation.exists()) {                 logLocation.delete();             }             if (tempDirectory  != null && tempDirectory.exists()) {                 tempDirectory.delete();             }                  driver.quit();         }              @Test         public void basicOptionsWin10() {             InternetExplorerOptions options = new InternetExplorerOptions();             options.attachToEdgeChrome();             options.withEdgeExecutablePath(getEdgeLocation());             driver = new InternetExplorerDriver(options);         }              @Test         public void basicOptionsWin11() {             InternetExplorerOptions options = new InternetExplorerOptions();             driver = new InternetExplorerDriver(options);         }              @Test         public void logsToFile() throws IOException {             InternetExplorerDriverService service = new InternetExplorerDriverService.Builder()                     .withLogFile(getLogLocation())                     .build();                  driver = new InternetExplorerDriver(service);                  String fileContent = new String(Files.readAllBytes(getLogLocation().toPath()));             Assertions.assertTrue(fileContent.contains("Started InternetExplorerDriver server"));         }              @Test         public void logsToConsole() throws IOException {             System.setOut(new PrintStream(getLogLocation()));                  InternetExplorerDriverService service = new InternetExplorerDriverService.Builder()                     .withLogOutput(System.out)                     .build();                  driver = new InternetExplorerDriver(service);                  String fileContent = new String(Files.readAllBytes(getLogLocation().toPath()));             Assertions.assertTrue(fileContent.contains("Started InternetExplorerDriver server"));         }              @Test         public void logsWithLevel() throws IOException {             System.setProperty(InternetExplorerDriverService.IE_DRIVER_LOGFILE_PROPERTY,                     getLogLocation().getAbsolutePath());                  InternetExplorerDriverService service = new InternetExplorerDriverService.Builder()                     .withLogLevel(InternetExplorerDriverLogLevel.WARN)                     .build();                  driver = new InternetExplorerDriver(service);                  String fileContent = new String(Files.readAllBytes(getLogLocation().toPath()));             Assertions.assertTrue(fileContent.contains("Invalid capability setting: timeouts is type null"));         }              @Test         public void supportingFilesLocation() throws IOException {             InternetExplorerDriverService service = new InternetExplorerDriverService.Builder()                     .withExtractPath(getTempDirectory())                     .build();                  driver = new InternetExplorerDriver(service);             Assertions.assertTrue(new File(getTempDirectory() + "/IEDriver.tmp").exists());         }              private File getLogLocation() throws IOException {             if (logLocation == null || !logLocation.exists()) {                 logLocation = File.createTempFile("iedriver-", ".log");             }                  return logLocation;         }              private File getTempDirectory() throws IOException {             if (tempDirectory == null || !tempDirectory.exists()) {                 tempDirectory = Files.createTempDirectory("supporting-").toFile();             }                  return tempDirectory;         }              private String getEdgeLocation() {             return System.getenv("EDGE_BIN");         }     }     

\*\*Note\*\*: Java also allows setting log level by System Property:\ Property key: \`InternetExplorerDriverService.IE\_DRIVER\_EXTRACT\_PATH\_PROPERTY\`\ Property value: String representing path to supporting files directory

[Selenium v4.11](https://github.com/SeleniumHQ/selenium/releases/tag/selenium-4.11.0)                   service = webdriver.IeService(service_args=["–extract-path=" + temp_dir])              driver = webdriver.Ie(service=service)

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/python/tests/browsers/test_internet_explorer.py#L133-L135)

##### examples/python/tests/browsers/test\_internet\_explorer.py

Copy  Close               import os     import subprocess     import sys          import pytest     from selenium import webdriver               @pytest.mark.skipif(sys.platform != "win32", reason="requires Windows")     def test_basic_options_win10(edge_bin):         options = webdriver.IeOptions()         options.attach_to_edge_chrome = True         options.edge_executable_path = edge_bin         driver = webdriver.Ie(options=options)              driver.quit()               @pytest.mark.skipif(sys.platform != "win32", reason="requires Windows")     def test_basic_options_win11():         options = webdriver.IeOptions()         driver = webdriver.Ie(options=options)              driver.quit()          @pytest.mark.skipif(sys.platform != "win32", reason="requires Windows")     def test_file_upload_timeout():         options = webdriver.IeOptions()         options.file_upload_timeout = 2000              driver = webdriver.Ie(options=options)              driver.quit()               @pytest.mark.skipif(sys.platform != "win32", reason="requires Windows")     def test_ensure_clean_session():         options = webdriver.IeOptions()         options.ensure_clean_session = True              driver = webdriver.Ie(options=options)              driver.quit()               @pytest.mark.skipif(sys.platform != "win32", reason="requires Windows")     def test_ignore_zoom_level():         options = webdriver.IeOptions()         options.ignore_zoom_level = True              driver = webdriver.Ie(options=options)              driver.quit()               @pytest.mark.skipif(sys.platform != "win32", reason="requires Windows")     def test_ignore_protected_mode_settings():         options = webdriver.IeOptions()         options.ignore_protected_mode_settings = True              driver = webdriver.Ie(options=options)              driver.quit()               @pytest.mark.skipif(sys.platform != "win32", reason="requires Windows")     def test_silent():         service = webdriver.IeService(service_args=["--silent"])         driver = webdriver.Ie(service=service)              driver.quit()               @pytest.mark.skipif(sys.platform != "win32", reason="requires Windows")     def test_cmd_options():         options = webdriver.IeOptions()         options.add_argument("-private")              driver = webdriver.Ie(options=options)              driver.quit()          # Skipping this as it fails on Windows because the value of registry setting in      # HKEY_CURRENT_USER\Software\Microsoft\Internet Explorer\Main\TabProcGrowth must be '0'      @pytest.mark.skip     def test_force_create_process_api():         options = webdriver.IeOptions()         options.force_create_process_api = True              driver = webdriver.Ie(options=options)              driver.quit()               @pytest.mark.skipif(sys.platform != "win32", reason="requires Windows")     def test_log_to_file(log_path):         service = webdriver.IeService(log_output=log_path, log_level="INFO")              driver = webdriver.Ie(service=service)              with open(log_path, "r") as fp:             assert "Starting WebDriver server" in fp.readline()              driver.quit()               @pytest.mark.skipif(sys.platform != "win32", reason="requires Windows")     def test_log_to_stdout(capfd):         service = webdriver.IeService(log_output=subprocess.STDOUT)              driver = webdriver.Ie(service=service)              out, err = capfd.readouterr()         assert "Started InternetExplorerDriver server" in out              driver.quit()               @pytest.mark.skipif(sys.platform != "win32", reason="requires Windows")     def test_log_level(log_path):         service = webdriver.IeService(log_output=log_path, log_level="WARN")              driver = webdriver.Ie(service=service)              with open(log_path, "r") as fp:             assert "Started InternetExplorerDriver server (32-bit)" in fp.readline()              driver.quit()               @pytest.mark.skipif(sys.platform != "win32", reason="requires Windows")     def test_supporting_files(temp_dir):         service = webdriver.IeService(service_args=["–extract-path=" + temp_dir])              driver = webdriver.Ie(service=service)              driver.quit()     

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/dotnet/SeleniumDocs/Browsers/InternetExplorerTest.cs#L98)

##### examples/dotnet/SeleniumDocs/Browsers/InternetExplorerTest.cs

Copy  Close               using System;     using System.IO;     using System.Linq;     using Microsoft.VisualStudio.TestTools.UnitTesting;     using OpenQA.Selenium.IE;     using SeleniumDocs.TestSupport;          namespace SeleniumDocs.Browsers     {         [TestClassCustom]         [EnabledOnOs("WINDOWS")]         public class InternetExplorerTest         {             private InternetExplorerDriver _driver;             private string _logLocation;             private string _tempPath;                  [TestCleanup]             public void Cleanup()             {                 if (_logLocation != null && File.Exists(_logLocation))                 {                     File.Delete(_logLocation);                 }                 if (_tempPath != null && File.Exists(_tempPath))                 {                     File.Delete(_tempPath);                 }                 _driver.Quit();             }                  [TestMethod]             public void BasicOptionsWin10()             {                 var options = new InternetExplorerOptions();                 options.AttachToEdgeChrome = true;                 options.EdgeExecutablePath = GetEdgeLocation();                 _driver = new InternetExplorerDriver(options);             }                  [TestMethod]             public void BasicOptionsWin11()             {                 var options = new InternetExplorerOptions();                 _driver = new InternetExplorerDriver(options);             }                  [TestMethod]             [Ignore("Not implemented")]             public void LogsToFile()             {                 var service = InternetExplorerDriverService.CreateDefaultService();                 service.LogFile = GetLogLocation();                      _driver = new InternetExplorerDriver(service);                 _driver.Quit(); // Close the Service log file before reading                 var lines = File.ReadLines(GetLogLocation());                 Console.WriteLine("Lines: {0}", lines);                 Assert.IsTrue(lines.Contains("Started InternetExplorerDriver server"));             }                  [TestMethod]             [Ignore("Not implemented")]             public void LogsToConsole()             {                 var stringWriter = new StringWriter();                 var originalOutput = Console.Out;                 Console.SetOut(stringWriter);                      var service = InternetExplorerDriverService.CreateDefaultService();                      //service.LogToConsole = true;                      _driver = new InternetExplorerDriver(service);                 Assert.IsTrue(stringWriter.ToString().Contains("geckodriver	INFO	Listening on"));                 Console.SetOut(originalOutput);                 stringWriter.Dispose();             }                  [TestMethod]             public void LogsLevel()             {                 var service = InternetExplorerDriverService.CreateDefaultService();                 service.LogFile = GetLogLocation();                      service.LoggingLevel = InternetExplorerDriverLogLevel.Warn;                      _driver = new InternetExplorerDriver(service);                 _driver.Quit(); // Close the Service log file before reading                 var lines = File.ReadLines(GetLogLocation());                 Assert.IsNotNull(lines.FirstOrDefault(line => line.Contains("Invalid capability setting: timeouts is type null")));             }                  [TestMethod]             public void SupportingFilesLocation()             {                 var service = InternetExplorerDriverService.CreateDefaultService();                      service.LibraryExtractionPath = GetTempDirectory();                      _driver = new InternetExplorerDriver(service);                 Assert.IsTrue(File.Exists(GetTempDirectory() + "/IEDriver.tmp"));             }                  private string GetLogLocation()             {                 if (_logLocation == null || !File.Exists(_logLocation))                 {                     _logLocation = Path.GetTempFileName();                 }                      return _logLocation;             }                  private string GetTempDirectory()             {                 if (_tempPath == null || !File.Exists(_tempPath))                 {                     _tempPath = Path.GetTempPath();                 }                      return _tempPath;             }                  private string GetEdgeLocation()             {                 return Environment.GetEnvironmentVariable("EDGE_BIN");             }         }     }

[Selenium v4.8](https://github.com/SeleniumHQ/selenium/releases/tag/selenium-4.8.0)                     service.args << "–extract-path=#{root_directory}"

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/ruby/spec/browsers/internet_explorer_spec.rb#L112)

##### examples/ruby/spec/browsers/internet\_explorer\_spec.rb

Copy  Close               # frozen_string_literal: true          require 'spec_helper'          RSpec.describe 'Internet Explorer', exclusive: {platform: :windows} do       describe 'Options' do         let(:edge_location) { ENV.fetch('EDGE_BIN', nil) }         let(:url) { 'https://www.selenium.dev/selenium/web/' }              before do           @options = Selenium::WebDriver::IE::Options.new           @options.attach_to_edge_chrome = true           @options.edge_executable_path = edge_location         end              it 'basic options Win10' do           options = Selenium::WebDriver::IE::Options.new           options.attach_to_edge_chrome = true           options.edge_executable_path = edge_location           @driver = Selenium::WebDriver.for :ie, options: options         end              it 'basic options Win11' do           options = Selenium::WebDriver::Options.ie           @driver = Selenium::WebDriver.for :ie, options: options         end              it 'sets the file upload dialog timeout' do           @options.file_upload_dialog_timeout = 2000           driver = Selenium::WebDriver.for(:ie, options: @options)           driver.quit         end              it 'ensures a clean session' do           @options.ensure_clean_session = true           driver = Selenium::WebDriver.for(:ie, options: @options)           driver.quit         end              it 'ignores the zoom setting' do           @options.ignore_zoom_level = true           driver = Selenium::WebDriver.for(:ie, options: @options)           driver.quit         end              it 'ignores the protected mode settings' do           @options.ignore_protected_mode_settings = true           driver = Selenium::WebDriver.for(:ie, options: @options)           driver.quit         end              it 'adds the silent option', skip: 'This capability will be added on the release 4.22.0' do           @options.silent = true           expect(@options.silent).to be_truthy         end              it 'sets the command line options' do           @options.add_argument('-k')           Selenium::WebDriver.for(:ie, options: @options)         end              it 'launches ie with the create process api', skip: 'When using with IE 8 or higher, it needs a registry value' do           @options.force_create_process_api = true           Selenium::WebDriver.for(:ie, options: @options)           expect(@options.instance_variable_get(:@options)['force_create_process_api'])             .to eq({force_create_process_api: true})         end       end            describe 'Service' do         let(:file_name) { Tempfile.new('iedriver').path }         let(:root_directory) { Dir.mktmpdir }              after do           FileUtils.rm_f(file_name)           FileUtils.remove_entry root_directory         end              it 'logs to file' do           service = Selenium::WebDriver::Service.ie                service.log = file_name                @driver = Selenium::WebDriver.for :ie, service: service           expect(File.readlines(file_name).first).to include('Started InternetExplorerDriver server')         end              it 'logs to console' do           service = Selenium::WebDriver::Service.ie                service.log = $stdout                expect {             @driver = Selenium::WebDriver.for :ie, service: service           }.to output(/Started InternetExplorerDriver server/).to_stdout_from_any_process         end              it 'sets log level' do           service = Selenium::WebDriver::Service.ie           service.log = $stdout                service.args << '-log-level=WARN'                expect {             @driver = Selenium::WebDriver.for :ie, service: service           }.to output(/Invalid capability setting: timeouts is type null/).to_stdout_from_any_process         end              it 'sets location for supporting files' do           service = Selenium::WebDriver::Service.ie                service.args << "–extract-path=#{root_directory}"                @driver = Selenium::WebDriver.for :ie, service: service         end       end     end     

[Add Example](https://www.selenium.dev/documentation/about/contributing/#creating-examples)

[Add Example](https://www.selenium.dev/documentation/about/contributing/#creating-examples)

# 5 - Safari specific functionality

These are capabilities and features specific to Apple Safari browsers.

Unlike Chromium and Firefox drivers, the safaridriver is installed with the Operating System. To enable automation on Safari, run the following command from the terminal:               safaridriver --enable     

## Options

Capabilities common to all browsers are described on the [Options page](https://www.selenium.dev/documentation/webdriver/drivers/options/).

Capabilities unique to Safari can be found at Apple’s page [About WebDriver for Safari](https://developer.apple.com/documentation/webkit/about_webdriver_for_safari#2957227)

Starting a Safari session with basic defined options looks like this:

[Move Code](https://www.selenium.dev/documentation/about/contributing/#moving-examples)

  * Java   * Python   * CSharp   * Ruby   * JavaScript   * Kotlin

                      SafariOptions options = new SafariOptions();             driver = new SafariDriver(options);

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk//examples/java/src/test/java/dev/selenium/browsers/SafariTest.java#24-L25)

##### /examples/java/src/test/java/dev/selenium/browsers/SafariTest.java

Copy  Close               package dev.selenium.browsers;          import org.junit.jupiter.api.AfterEach;     import org.junit.jupiter.api.Test;     import org.junit.jupiter.api.condition.EnabledOnOs;     import org.junit.jupiter.api.condition.OS;     import org.openqa.selenium.safari.SafariDriver;     import org.openqa.selenium.safari.SafariDriverService;     import org.openqa.selenium.safari.SafariOptions;          @EnabledOnOs(OS.MAC)     public class SafariTest {         public SafariDriver driver;              @AfterEach         public void quit() {             if (driver != null) {                 driver.quit();             }         }              @Test         public void basicOptions() {             SafariOptions options = new SafariOptions();             driver = new SafariDriver(options);         }              @Test         public void enableLogs() {             SafariDriverService service = new SafariDriverService.Builder()                     .withLogging(true)                     .build();                  driver = new SafariDriver(service);         }                  public void safariTechnologyPreview() {             SafariOptions options = new SafariOptions();             options.setUseTechnologyPreview(true);             driver = new SafariDriver(options);         }     }                        options = webdriver.SafariOptions()         driver = webdriver.Safari(options=options)

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk//examples/python/tests/browsers/test_safari.py#L9-L10)

##### /examples/python/tests/browsers/test\_safari.py

Copy  Close               import sys          import pytest     from selenium import webdriver               @pytest.mark.skipif(sys.platform != "darwin", reason="requires Mac")     def test_basic_options():         options = webdriver.SafariOptions()         driver = webdriver.Safari(options=options)              driver.quit()               @pytest.mark.skipif(sys.platform != "darwin", reason="requires Mac")     def test_enable_logging():         service = webdriver.SafariService(enable_logging=True)              driver = webdriver.Safari(service=service)              driver.quit()          @pytest.mark.skip(reason="Not installed on Mac GitHub Actions Runner Image")     def test_technology_preview():         options = webdriver.SafariOptions()         options.use_technology_preview = True         service = webdriver.SafariService(             executable_path='/Applications/Safari Technology Preview.app/Contents/MacOS/safaridriver'         )         driver = webdriver.Safari(options=options, service=service)              driver.quit()                                     var options = new SafariOptions();                 driver = new SafariDriver(options);

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk//examples/dotnet/SeleniumDocs/Browsers/SafariTest.cs#L22-L23)

##### /examples/dotnet/SeleniumDocs/Browsers/SafariTest.cs

Copy  Close               using Microsoft.VisualStudio.TestTools.UnitTesting;     using OpenQA.Selenium.Safari;     using SeleniumDocs.TestSupport;          namespace SeleniumDocs.Browsers     {         [TestClassCustom]         [EnabledOnOs("OSX")]         public class SafariTest         {             private SafariDriver driver;                  [TestCleanup]             public void QuitDriver()             {                 driver.Quit();             }                  [TestMethod]             public void BasicOptions()             {                 var options = new SafariOptions();                 driver = new SafariDriver(options);             }                  [TestMethod]             [Ignore("Not implemented")]             public void EnableLogs()             {                 var service = SafariDriverService.CreateDefaultService();                      //service.EnableLogging = true;                      driver = new SafariDriver(service);             }         }     }                   it 'basic options' do           options = Selenium::WebDriver::Options.safari

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk//examples/ruby/spec/browsers/safari_spec.rb#L8-L9)

##### /examples/ruby/spec/browsers/safari\_spec.rb

Copy  Close               # frozen_string_literal: true          require 'spec_helper'          # rubocop:disable RSpec/MultipleDescribes     RSpec.describe 'Safari', exclusive: {platform: :macosx} do       describe 'Options' do         it 'basic options' do           options = Selenium::WebDriver::Options.safari           @driver = Selenium::WebDriver.for :safari, options: options         end       end            describe 'Service' do         let(:directory) { "#{Dir.home}/Library/Logs/com.apple.WebDriver/*" }              it 'enables logs' do           original_count = Dir[directory].length           service = Selenium::WebDriver::Service.safari                service.args << '--diagnose'                @driver = Selenium::WebDriver.for :safari, service: service           expect(Dir[directory].length - original_count).to eq 1         end              it 'does not set log output' do           service = Selenium::WebDriver::Service.safari                expect {             service.log = $stdout           }.to raise_error(Selenium::WebDriver::Error::WebDriverError, /Safari Service does not support setting log output/)         end       end     end          RSpec.describe 'Safari Technology Preview', skip: 'This test is being skipped as GitHub Actions ' \                                                       'have no support for Safari Technology Preview' do       it 'sets the technology preview' do         Selenium::WebDriver::Safari.technology_preview!         local_driver = Selenium::WebDriver.for :safari         expect(local_driver.capabilities.browser_name).to eq 'Safari Technology Preview'       end     end     # rubocop:enable RSpec/MultipleDescribes                        let driver = new Builder()           .forBrowser(Browser.SAFARI)           .setSafariOptions(options)           .build();

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk//examples/javascript/test/browser/safariSpecificCap.spec.js#L8-L11)

##### /examples/javascript/test/browser/safariSpecificCap.spec.js

Copy  Close               const safari = require('selenium-webdriver/safari');     const {Browser, Builder} = require("selenium-webdriver");     const options = new safari.Options();     const process  =  require('node:process');          describe('Should be able to Test Command line arguments', function () {       (process.platform === 'darwin' ? it : it.skip)('headless', async function () {         let driver = new Builder()           .forBrowser(Browser.SAFARI)           .setSafariOptions(options)           .build();              await driver.get('https://www.selenium.dev/selenium/web/blank.html');         await driver.quit();       });     });                 val options = SafariOptions()       val driver = SafariDriver(options)

### Mobile

Those looking to automate Safari on iOS should look to the [Appium project](https://www.selenium.dev/).

## Service

Service settings common to all browsers are described on the [Service page](https://www.selenium.dev/documentation/webdriver/drivers/service/).

### Logging

Unlike other browsers, Safari doesn’t let you choose where logs are output, or change levels. The one option available is to turn logs off or on. If logs are toggled on, they can be found at:`~/Library/Logs/com.apple.WebDriver/`.

  * Java   * Python   * CSharp   * Ruby   * JavaScript   * Kotlin

[Selenium v4.10](https://github.com/SeleniumHQ/selenium/releases/tag/selenium-4.10.0)                               .withLogging(true)

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/java/src/test/java/dev/selenium/browsers/SafariTest.java#L31)

##### examples/java/src/test/java/dev/selenium/browsers/SafariTest.java

Copy  Close               package dev.selenium.browsers;          import org.junit.jupiter.api.AfterEach;     import org.junit.jupiter.api.Test;     import org.junit.jupiter.api.condition.EnabledOnOs;     import org.junit.jupiter.api.condition.OS;     import org.openqa.selenium.safari.SafariDriver;     import org.openqa.selenium.safari.SafariDriverService;     import org.openqa.selenium.safari.SafariOptions;          @EnabledOnOs(OS.MAC)     public class SafariTest {         public SafariDriver driver;              @AfterEach         public void quit() {             if (driver != null) {                 driver.quit();             }         }              @Test         public void basicOptions() {             SafariOptions options = new SafariOptions();             driver = new SafariDriver(options);         }              @Test         public void enableLogs() {             SafariDriverService service = new SafariDriverService.Builder()                     .withLogging(true)                     .build();                  driver = new SafariDriver(service);         }                  public void safariTechnologyPreview() {             SafariOptions options = new SafariOptions();             options.setUseTechnologyPreview(true);             driver = new SafariDriver(options);         }     }     

**Note** : Java also allows setting console output by System Property;   Property key: `SafariDriverService.SAFARI_DRIVER_LOGGING`   Property value: `"true"` or `"false"`

[Selenium v4.26](https://github.com/SeleniumHQ/selenium/releases/tag/selenium-4.26.0)                   service = webdriver.SafariService(enable_logging=True)

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/python/tests/browsers/test_safari.py#L17)

##### examples/python/tests/browsers/test\_safari.py

Copy  Close               import sys          import pytest     from selenium import webdriver               @pytest.mark.skipif(sys.platform != "darwin", reason="requires Mac")     def test_basic_options():         options = webdriver.SafariOptions()         driver = webdriver.Safari(options=options)              driver.quit()               @pytest.mark.skipif(sys.platform != "darwin", reason="requires Mac")     def test_enable_logging():         service = webdriver.SafariService(enable_logging=True)              driver = webdriver.Safari(service=service)              driver.quit()          @pytest.mark.skip(reason="Not installed on Mac GitHub Actions Runner Image")     def test_technology_preview():         options = webdriver.SafariOptions()         options.use_technology_preview = True         service = webdriver.SafariService(             executable_path='/Applications/Safari Technology Preview.app/Contents/MacOS/safaridriver'         )         driver = webdriver.Safari(options=options, service=service)              driver.quit()          

[Implementation Missing](https://github.com/SeleniumHQ/selenium)

[Selenium v4.8](https://github.com/SeleniumHQ/selenium/releases/tag/selenium-4.8.0)

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/ruby/spec/browsers/safari_spec.rb#L20)

##### examples/ruby/spec/browsers/safari\_spec.rb

Copy  Close               # frozen_string_literal: true          require 'spec_helper'          # rubocop:disable RSpec/MultipleDescribes     RSpec.describe 'Safari', exclusive: {platform: :macosx} do       describe 'Options' do         it 'basic options' do           options = Selenium::WebDriver::Options.safari           @driver = Selenium::WebDriver.for :safari, options: options         end       end            describe 'Service' do         let(:directory) { "#{Dir.home}/Library/Logs/com.apple.WebDriver/*" }              it 'enables logs' do           original_count = Dir[directory].length           service = Selenium::WebDriver::Service.safari                service.args << '--diagnose'                @driver = Selenium::WebDriver.for :safari, service: service           expect(Dir[directory].length - original_count).to eq 1         end              it 'does not set log output' do           service = Selenium::WebDriver::Service.safari                expect {             service.log = $stdout           }.to raise_error(Selenium::WebDriver::Error::WebDriverError, /Safari Service does not support setting log output/)         end       end     end          RSpec.describe 'Safari Technology Preview', skip: 'This test is being skipped as GitHub Actions ' \                                                       'have no support for Safari Technology Preview' do       it 'sets the technology preview' do         Selenium::WebDriver::Safari.technology_preview!         local_driver = Selenium::WebDriver.for :safari         expect(local_driver.capabilities.browser_name).to eq 'Safari Technology Preview'       end     end     # rubocop:enable RSpec/MultipleDescribes     

[Add Example](https://www.selenium.dev/documentation/about/contributing/#creating-examples)

[Add Example](https://www.selenium.dev/documentation/about/contributing/#creating-examples)

## Safari Technology Preview

Apple provides a development version of their browser — [Safari Technology Preview](https://developer.apple.com/safari/technology-preview/)

  * Java   * Python   * CSharp   * Ruby   * JavaScript   * Kotlin

                      options.setUseTechnologyPreview(true);             driver = new SafariDriver(options);

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/java/src/test/java/dev/selenium/browsers/SafariTest.java#L39-L40)

##### examples/java/src/test/java/dev/selenium/browsers/SafariTest.java

Copy  Close               package dev.selenium.browsers;          import org.junit.jupiter.api.AfterEach;     import org.junit.jupiter.api.Test;     import org.junit.jupiter.api.condition.EnabledOnOs;     import org.junit.jupiter.api.condition.OS;     import org.openqa.selenium.safari.SafariDriver;     import org.openqa.selenium.safari.SafariDriverService;     import org.openqa.selenium.safari.SafariOptions;          @EnabledOnOs(OS.MAC)     public class SafariTest {         public SafariDriver driver;              @AfterEach         public void quit() {             if (driver != null) {                 driver.quit();             }         }              @Test         public void basicOptions() {             SafariOptions options = new SafariOptions();             driver = new SafariDriver(options);         }              @Test         public void enableLogs() {             SafariDriverService service = new SafariDriverService.Builder()                     .withLogging(true)                     .build();                  driver = new SafariDriver(service);         }                  public void safariTechnologyPreview() {             SafariOptions options = new SafariOptions();             options.setUseTechnologyPreview(true);             driver = new SafariDriver(options);         }     }                        options = webdriver.SafariOptions()         options.use_technology_preview = True         service = webdriver.SafariService(             executable_path='/Applications/Safari Technology Preview.app/Contents/MacOS/safaridriver'         )         driver = webdriver.Safari(options=options, service=service)

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/python/tests/browsers/test_safari.py#L25-L30)

##### examples/python/tests/browsers/test\_safari.py

Copy  Close               import sys          import pytest     from selenium import webdriver               @pytest.mark.skipif(sys.platform != "darwin", reason="requires Mac")     def test_basic_options():         options = webdriver.SafariOptions()         driver = webdriver.Safari(options=options)              driver.quit()               @pytest.mark.skipif(sys.platform != "darwin", reason="requires Mac")     def test_enable_logging():         service = webdriver.SafariService(enable_logging=True)              driver = webdriver.Safari(service=service)              driver.quit()          @pytest.mark.skip(reason="Not installed on Mac GitHub Actions Runner Image")     def test_technology_preview():         options = webdriver.SafariOptions()         options.use_technology_preview = True         service = webdriver.SafariService(             executable_path='/Applications/Safari Technology Preview.app/Contents/MacOS/safaridriver'         )         driver = webdriver.Safari(options=options, service=service)              driver.quit()          

[Add Example](https://www.selenium.dev/documentation/about/contributing/#creating-examples)                                                                 'have no support for Safari Technology Preview' do       it 'sets the technology preview' do

View Complete Code [__View on GitHub](https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/ruby/spec/browsers/safari_spec.rb#L38-L39)

##### examples/ruby/spec/browsers/safari\_spec.rb

Copy  Close               # frozen_string_literal: true          require 'spec_helper'          # rubocop:disable RSpec/MultipleDescribes     RSpec.describe 'Safari', exclusive: {platform: :macosx} do       describe 'Options' do         it 'basic options' do           options = Selenium::WebDriver::Options.safari           @driver = Selenium::WebDriver.for :safari, options: options         end       end            describe 'Service' do         let(:directory) { "#{Dir.home}/Library/Logs/com.apple.WebDriver/*" }              it 'enables logs' do           original_count = Dir[directory].length           service = Selenium::WebDriver::Service.safari                service.args << '--diagnose'                @driver = Selenium::WebDriver.for :safari, service: service           expect(Dir[directory].length - original_count).to eq 1         end              it 'does not set log output' do           service = Selenium::WebDriver::Service.safari                expect {             service.log = $stdout           }.to raise_error(Selenium::WebDriver::Error::WebDriverError, /Safari Service does not support setting log output/)         end       end     end          RSpec.describe 'Safari Technology Preview', skip: 'This test is being skipped as GitHub Actions ' \                                                       'have no support for Safari Technology Preview' do       it 'sets the technology preview' do         Selenium::WebDriver::Safari.technology_preview!         local_driver = Selenium::WebDriver.for :safari         expect(local_driver.capabilities.browser_name).to eq 'Safari Technology Preview'       end     end     # rubocop:enable RSpec/MultipleDescribes     

[Add Example](https://www.selenium.dev/documentation/about/contributing/#creating-examples)

[Add Example](https://www.selenium.dev/documentation/about/contributing/#creating-examples)