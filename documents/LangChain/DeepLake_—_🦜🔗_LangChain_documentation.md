# DeepLake ‚Äî ü¶úüîó LangChain  documentation

**URL:** https://python.langchain.com/api_reference/community/vectorstores/langchain_community.vectorstores.deeplake.DeepLake.html
**Word Count:** 4232
**Links Count:** 490
**Scraped:** 2025-07-21 08:08:35
**Status:** completed

---

# DeepLake\#

_class _langchain\_community.vectorstores.deeplake.DeepLake\(

    _dataset\_path : str = './deeplake/'_,     _token : str | None = None_,     _embedding : [Embeddings](https://python.langchain.com/api_reference/core/embeddings/langchain_core.embeddings.embeddings.Embeddings.html#langchain_core.embeddings.embeddings.Embeddings "langchain_core.embeddings.embeddings.Embeddings") | None = None_,     _embedding\_function : [Embeddings](https://python.langchain.com/api_reference/core/embeddings/langchain_core.embeddings.embeddings.Embeddings.html#langchain_core.embeddings.embeddings.Embeddings "langchain_core.embeddings.embeddings.Embeddings") | None = None_,     _read\_only : bool = False_,     _ingestion\_batch\_size : int = 1024_,     _num\_workers : int = 0_,     _verbose : bool = True_,     _exec\_option : str | None = None_,     _runtime : Dict | None = None_,     _index\_params : Dict\[str, int | str\] | None = None_,     _\*\* kwargs: Any_, \)[\[source\]](https://python.langchain.com/api_reference/_modules/langchain_community/vectorstores/deeplake.html#DeepLake)\#     

Deprecated since version 0.3.3: This class is deprecated and will be removed in a future version. You can swap to using the DeeplakeVectorStore implementation in langchain-deeplake. Please do not submit further PRs to this class.See <[activeloopai/langchain-deeplake](https://github.com/activeloopai/langchain-deeplake)> Use `:class:`~langchain_deeplake.DeeplakeVectorStore`` instead. It will not be removed until langchain-community==1.0.

Activeloop Deep Lake vector store.

We integrated deeplake‚Äôs similarity search and filtering for fast prototyping. Now, it supports Tensor Query Language \(TQL\) for production use cases over billion rows.

Why Deep Lake?

  * Not only stores embeddings, but also the original data with version control.

  * Serverless, doesn‚Äôt require another service and can be used with major     

cloud providers \(S3, GCS, etc.\)

  * More than just a multi-modal vector store. You can use the dataset     

to fine-tune your own LLM models.

To use, you should have the `deeplake` python package installed.

Example               from langchain_community.vectorstores import DeepLake     from langchain_community.embeddings.openai import OpenAIEmbeddings          embeddings = OpenAIEmbeddings()     vectorstore = DeepLake("langchain_store", embeddings.embed_query)     

Creates an empty DeepLakeVectorStore or loads an existing one.

The DeepLakeVectorStore is located at the specified `path`.

Examples               >>> # Create a vector store with default tensors     >>> deeplake_vectorstore = DeepLake(     ...        path = <path_for_storing_Data>,     ... )     >>>     >>> # Create a vector store in the Deep Lake Managed Tensor Database     >>> data = DeepLake(     ...        path = "hub://org_id/dataset_name",     ...        runtime = {"tensor_db": True},     ... )     

Parameters:     

  * **dataset\_path** \(_str_\) ‚Äì 

The full path for storing to the Deep Lake Vector Store. It can be: \- a Deep Lake cloud path of the form `hub://org_id/dataset_name`.

> Requires registration with Deep Lake.

    * an s3 path of the form `s3://bucketname/path/to/dataset`.     

Credentials are required in either the environment or passed to the creds argument.

    * a local file system path of the form `./path/to/dataset`     

or `~/path/to/dataset` or `path/to/dataset`.

    * a memory path of the form `mem://path/to/dataset` which doesn‚Äôt     

save the dataset but keeps it in memory instead. Should be used only for testing as it does not persist. Defaults to \_LANGCHAIN\_DEFAULT\_DEEPLAKE\_PATH.

  * **token** \(_str_ _,__optional_\) ‚Äì Activeloop token, for fetching credentials to the dataset at path if it is a Deep Lake dataset. Tokens are normally autogenerated. Optional.

  * **embedding** \([_Embeddings_](https://python.langchain.com/api_reference/core/embeddings/langchain_core.embeddings.embeddings.Embeddings.html#langchain_core.embeddings.embeddings.Embeddings "langchain_core.embeddings.embeddings.Embeddings") _,__optional_\) ‚Äì Function to convert either documents or query. Optional.

  * **embedding\_function** \([_Embeddings_](https://python.langchain.com/api_reference/core/embeddings/langchain_core.embeddings.embeddings.Embeddings.html#langchain_core.embeddings.embeddings.Embeddings "langchain_core.embeddings.embeddings.Embeddings") _,__optional_\) ‚Äì Function to convert either documents or query. Optional. Deprecated: keeping this parameter for backwards compatibility.

  * **read\_only** \(_bool_\) ‚Äì Open dataset in read-only mode. Default is False.

  * **ingestion\_batch\_size** \(_int_\) ‚Äì During data ingestion, data is divided into batches. Batch size is the size of each batch. Default is 1024.

  * **num\_workers** \(_int_\) ‚Äì Number of workers to use during data ingestion. Default is 0.

  * **verbose** \(_bool_\) ‚Äì Print dataset summary after each operation. Default is True.

  * **exec\_option** \(_str_ _,__optional_\) ‚Äì 

Default method for search execution. It could be either `"auto"`, `"python"`, `"compute_engine"` or `"tensor_db"`. Defaults to `"auto"`. If None, it‚Äôs set to ‚Äúauto‚Äù. \- `auto`\- Selects the best execution method based on the storage

> location of the Vector Store. It is the default option.

    * `python` \- Pure-python implementation that runs on the client and     

can be used for data stored anywhere. WARNING: using this option with big datasets is discouraged because it can lead to memory issues.

    * `compute_engine` \- Performant C++ implementation of the Deep Lake     

Compute Engine that runs on the client and can be used for any data stored in or connected to Deep Lake. It cannot be used with in-memory or local datasets.

    * `tensor_db` \- Performant and fully-hosted Managed Tensor Database     

that is responsible for storage and query execution. Only available for data stored in the Deep Lake Managed Database. Store datasets in this database by specifying runtime = \{‚Äútensor\_db‚Äù: True\} during dataset creation.

  * **runtime** \(_Dict_ _,__optional_\) ‚Äì Parameters for creating the Vector Store in Deep Lake‚Äôs Managed Tensor Database. Not applicable when loading an existing Vector Store. To create a Vector Store in the Managed Tensor Database, set runtime = \{‚Äútensor\_db‚Äù: True\}.

  * **index\_params** \(_Optional_ _\[__Dict_ _\[__str_ _,__Union_ _\[__int_ _,__str_ _\]__\]__\]__,__optional_\) ‚Äì 

Dictionary containing information about vector index that will be created. Defaults to None, which will utilize `DEFAULT_VECTORSTORE_INDEX_PARAMS` from `deeplake.constants`. The specified key-values override the default ones. \- threshold: The threshold for the dataset size above which an index

> will be created for the embedding tensor. When the threshold value is set to -1, index creation is turned off. Defaults to -1, which turns off the index.

    * distance\_metric: This key specifies the method of calculating the     

distance between vectors when creating the vector database \(VDB\) index. It can either be a string that corresponds to a member of the DistanceType enumeration, or the string value itself. \- If no value is provided, it defaults to ‚ÄúL2‚Äù. \- ‚ÄúL2‚Äù corresponds to DistanceType.L2\_NORM. \- ‚ÄúCOS‚Äù corresponds to DistanceType.COSINE\_SIMILARITY.

    * additional\_params: Additional parameters for fine-tuning the index.

  * **\*\*kwargs** ‚Äì Other optional keyword arguments.

Raises:     

**ValueError** ‚Äì If some condition is not met.

Attributes

`embeddings` | Access the query embedding object if available.   ---|---      Methods

`__init__`\(\[dataset\_path, token, embedding, ...\]\) | Creates an empty DeepLakeVectorStore or loads an existing one.   ---|---   `aadd_documents`\(documents, \*\*kwargs\) | Async run more documents through the embeddings and add to the vectorstore.   `aadd_texts`\(texts\[, metadatas, ids\]\) | Async run more texts through the embeddings and add to the vectorstore.   `add_documents`\(documents, \*\*kwargs\) | Add or update documents in the vectorstore.   `add_texts`\(texts\[, metadatas, ids\]\) | Run more texts through the embeddings and add to the vectorstore.   `adelete`\(\[ids\]\) | Async delete by vector ID or other criteria.   `afrom_documents`\(documents, embedding, \*\*kwargs\) | Async return VectorStore initialized from documents and embeddings.   `afrom_texts`\(texts, embedding\[, metadatas, ids\]\) | Async return VectorStore initialized from texts and embeddings.   `aget_by_ids`\(ids, /\) | Async get documents by their IDs.   `amax_marginal_relevance_search`\(query\[, k, ...\]\) | Async return docs selected using the maximal marginal relevance.   `amax_marginal_relevance_search_by_vector`\(...\) | Async return docs selected using the maximal marginal relevance.   `as_retriever`\(\*\*kwargs\) | Return VectorStoreRetriever initialized from this VectorStore.   `asearch`\(query, search\_type, \*\*kwargs\) | Async return docs most similar to query using a specified search type.   `asimilarity_search`\(query\[, k\]\) | Async return docs most similar to query.   `asimilarity_search_by_vector`\(embedding\[, k\]\) | Async return docs most similar to embedding vector.   `asimilarity_search_with_relevance_scores`\(query\) | Async return docs and relevance scores in the range \[0, 1\].   `asimilarity_search_with_score`\(\*args, \*\*kwargs\) | Async run similarity search with distance.   `delete`\(\[ids\]\) | Delete the entities in the dataset.   `delete_dataset`\(\) | Delete the collection.   `ds`\(\) |    `force_delete_by_path`\(path\) | Force delete dataset by path.   `from_documents`\(documents, embedding, \*\*kwargs\) | Return VectorStore initialized from documents and embeddings.   `from_texts`\(texts\[, embedding, metadatas, ...\]\) | Create a Deep Lake dataset from a raw documents.   `get_by_ids`\(ids, /\) | Get documents by their IDs.   `max_marginal_relevance_search`\(query\[, k, ...\]\) | Return docs selected using maximal marginal relevance.   `max_marginal_relevance_search_by_vector`\(...\) | Return docs selected using the maximal marginal relevance.   `search`\(query, search\_type, \*\*kwargs\) | Return docs most similar to query using a specified search type.   `similarity_search`\(query\[, k\]\) | Return docs most similar to query.   `similarity_search_by_vector`\(embedding\[, k\]\) | Return docs most similar to embedding vector.   `similarity_search_with_relevance_scores`\(query\) | Return docs and relevance scores in the range \[0, 1\].   `similarity_search_with_score`\(query\[, k\]\) | Run similarity search with Deep Lake with distance returned.      \_\_init\_\_\(

    _dataset\_path : str = './deeplake/'_,     _token : str | None = None_,     _embedding : [Embeddings](https://python.langchain.com/api_reference/core/embeddings/langchain_core.embeddings.embeddings.Embeddings.html#langchain_core.embeddings.embeddings.Embeddings "langchain_core.embeddings.embeddings.Embeddings") | None = None_,     _embedding\_function : [Embeddings](https://python.langchain.com/api_reference/core/embeddings/langchain_core.embeddings.embeddings.Embeddings.html#langchain_core.embeddings.embeddings.Embeddings "langchain_core.embeddings.embeddings.Embeddings") | None = None_,     _read\_only : bool = False_,     _ingestion\_batch\_size : int = 1024_,     _num\_workers : int = 0_,     _verbose : bool = True_,     _exec\_option : str | None = None_,     _runtime : Dict | None = None_,     _index\_params : Dict\[str, int | str\] | None = None_,     _\*\* kwargs: Any_, \) ‚Üí None[\[source\]](https://python.langchain.com/api_reference/_modules/langchain_community/vectorstores/deeplake.html#DeepLake.__init__)\#     

Creates an empty DeepLakeVectorStore or loads an existing one.

The DeepLakeVectorStore is located at the specified `path`.

Examples               >>> # Create a vector store with default tensors     >>> deeplake_vectorstore = DeepLake(     ...        path = <path_for_storing_Data>,     ... )     >>>     >>> # Create a vector store in the Deep Lake Managed Tensor Database     >>> data = DeepLake(     ...        path = "hub://org_id/dataset_name",     ...        runtime = {"tensor_db": True},     ... )     

Parameters:     

  * **dataset\_path** \(_str_\) ‚Äì 

The full path for storing to the Deep Lake Vector Store. It can be: \- a Deep Lake cloud path of the form `hub://org_id/dataset_name`.

> Requires registration with Deep Lake.

    * an s3 path of the form `s3://bucketname/path/to/dataset`.     

Credentials are required in either the environment or passed to the creds argument.

    * a local file system path of the form `./path/to/dataset`     

or `~/path/to/dataset` or `path/to/dataset`.

    * a memory path of the form `mem://path/to/dataset` which doesn‚Äôt     

save the dataset but keeps it in memory instead. Should be used only for testing as it does not persist. Defaults to \_LANGCHAIN\_DEFAULT\_DEEPLAKE\_PATH.

  * **token** \(_str_ _,__optional_\) ‚Äì Activeloop token, for fetching credentials to the dataset at path if it is a Deep Lake dataset. Tokens are normally autogenerated. Optional.

  * **embedding** \([_Embeddings_](https://python.langchain.com/api_reference/core/embeddings/langchain_core.embeddings.embeddings.Embeddings.html#langchain_core.embeddings.embeddings.Embeddings "langchain_core.embeddings.embeddings.Embeddings") _,__optional_\) ‚Äì Function to convert either documents or query. Optional.

  * **embedding\_function** \([_Embeddings_](https://python.langchain.com/api_reference/core/embeddings/langchain_core.embeddings.embeddings.Embeddings.html#langchain_core.embeddings.embeddings.Embeddings "langchain_core.embeddings.embeddings.Embeddings") _,__optional_\) ‚Äì Function to convert either documents or query. Optional. Deprecated: keeping this parameter for backwards compatibility.

  * **read\_only** \(_bool_\) ‚Äì Open dataset in read-only mode. Default is False.

  * **ingestion\_batch\_size** \(_int_\) ‚Äì During data ingestion, data is divided into batches. Batch size is the size of each batch. Default is 1024.

  * **num\_workers** \(_int_\) ‚Äì Number of workers to use during data ingestion. Default is 0.

  * **verbose** \(_bool_\) ‚Äì Print dataset summary after each operation. Default is True.

  * **exec\_option** \(_str_ _,__optional_\) ‚Äì 

Default method for search execution. It could be either `"auto"`, `"python"`, `"compute_engine"` or `"tensor_db"`. Defaults to `"auto"`. If None, it‚Äôs set to ‚Äúauto‚Äù. \- `auto`\- Selects the best execution method based on the storage

> location of the Vector Store. It is the default option.

    * `python` \- Pure-python implementation that runs on the client and     

can be used for data stored anywhere. WARNING: using this option with big datasets is discouraged because it can lead to memory issues.

    * `compute_engine` \- Performant C++ implementation of the Deep Lake     

Compute Engine that runs on the client and can be used for any data stored in or connected to Deep Lake. It cannot be used with in-memory or local datasets.

    * `tensor_db` \- Performant and fully-hosted Managed Tensor Database     

that is responsible for storage and query execution. Only available for data stored in the Deep Lake Managed Database. Store datasets in this database by specifying runtime = \{‚Äútensor\_db‚Äù: True\} during dataset creation.

  * **runtime** \(_Dict_ _,__optional_\) ‚Äì Parameters for creating the Vector Store in Deep Lake‚Äôs Managed Tensor Database. Not applicable when loading an existing Vector Store. To create a Vector Store in the Managed Tensor Database, set runtime = \{‚Äútensor\_db‚Äù: True\}.

  * **index\_params** \(_Optional_ _\[__Dict_ _\[__str_ _,__Union_ _\[__int_ _,__str_ _\]__\]__\]__,__optional_\) ‚Äì 

Dictionary containing information about vector index that will be created. Defaults to None, which will utilize `DEFAULT_VECTORSTORE_INDEX_PARAMS` from `deeplake.constants`. The specified key-values override the default ones. \- threshold: The threshold for the dataset size above which an index

> will be created for the embedding tensor. When the threshold value is set to -1, index creation is turned off. Defaults to -1, which turns off the index.

    * distance\_metric: This key specifies the method of calculating the     

distance between vectors when creating the vector database \(VDB\) index. It can either be a string that corresponds to a member of the DistanceType enumeration, or the string value itself. \- If no value is provided, it defaults to ‚ÄúL2‚Äù. \- ‚ÄúL2‚Äù corresponds to DistanceType.L2\_NORM. \- ‚ÄúCOS‚Äù corresponds to DistanceType.COSINE\_SIMILARITY.

    * additional\_params: Additional parameters for fine-tuning the index.

  * **\*\*kwargs** ‚Äì Other optional keyword arguments.

Raises:     

**ValueError** ‚Äì If some condition is not met.

Return type:     

None

_async _aadd\_documents\(

    _documents : list\[[Document](https://python.langchain.com/api_reference/core/documents/langchain_core.documents.base.Document.html#langchain_core.documents.base.Document "langchain_core.documents.base.Document")\]_,     _\*\* kwargs: Any_, \) ‚Üí list\[str\]\#     

Async run more documents through the embeddings and add to the vectorstore.

Parameters:     

  * **documents** \(_list_ _\[_[_Document_](https://python.langchain.com/api_reference/core/documents/langchain_core.documents.base.Document.html#langchain_core.documents.base.Document "langchain_core.documents.base.Document") _\]_\) ‚Äì Documents to add to the vectorstore.

  * **kwargs** \(_Any_\) ‚Äì Additional keyword arguments.

Returns:     

List of IDs of the added texts.

Raises:     

**ValueError** ‚Äì If the number of IDs does not match the number of documents.

Return type:     

list\[str\]

_async _aadd\_texts\(

    _texts : Iterable\[str\]_,     _metadatas : list\[dict\] | None = None_,     _\*_ ,     _ids : list\[str\] | None = None_,     _\*\* kwargs: Any_, \) ‚Üí list\[str\]\#     

Async run more texts through the embeddings and add to the vectorstore.

Parameters:     

  * **texts** \(_Iterable_ _\[__str_ _\]_\) ‚Äì Iterable of strings to add to the vectorstore.

  * **metadatas** \(_Optional_ _\[__list_ _\[__dict_ _\]__\]_\) ‚Äì Optional list of metadatas associated with the texts. Default is None.

  * **ids** \(_Optional_ _\[__list_ _\[__str_ _\]__\]_\) ‚Äì Optional list

  * **\*\*kwargs** \(_Any_\) ‚Äì vectorstore specific parameters.

Returns:     

List of ids from adding the texts into the vectorstore.

Raises:     

  * **ValueError** ‚Äì If the number of metadatas does not match the number of texts.

  * **ValueError** ‚Äì If the number of ids does not match the number of texts.

Return type:     

list\[str\]

add\_documents\(

    _documents : list\[[Document](https://python.langchain.com/api_reference/core/documents/langchain_core.documents.base.Document.html#langchain_core.documents.base.Document "langchain_core.documents.base.Document")\]_,     _\*\* kwargs: Any_, \) ‚Üí list\[str\]\#     

Add or update documents in the vectorstore.

Parameters:     

  * **documents** \(_list_ _\[_[_Document_](https://python.langchain.com/api_reference/core/documents/langchain_core.documents.base.Document.html#langchain_core.documents.base.Document "langchain_core.documents.base.Document") _\]_\) ‚Äì Documents to add to the vectorstore.

  * **kwargs** \(_Any_\) ‚Äì Additional keyword arguments. if kwargs contains ids and documents contain ids, the ids in the kwargs will receive precedence.

Returns:     

List of IDs of the added texts.

Raises:     

**ValueError** ‚Äì If the number of ids does not match the number of documents.

Return type:     

list\[str\]

add\_texts\(

    _texts : Iterable\[str\]_,     _metadatas : List\[dict\] | None = None_,     _ids : List\[str\] | None = None_,     _\*\* kwargs: Any_, \) ‚Üí List\[str\][\[source\]](https://python.langchain.com/api_reference/_modules/langchain_community/vectorstores/deeplake.html#DeepLake.add_texts)\#     

Run more texts through the embeddings and add to the vectorstore.

Examples               >>> ids = deeplake_vectorstore.add_texts(     ...     texts = <list_of_texts>,     ...     metadatas = <list_of_metadata_jsons>,     ...     ids = <list_of_ids>,     ... )     

Parameters:     

  * **texts** \(_Iterable_ _\[__str_ _\]_\) ‚Äì Texts to add to the vectorstore.

  * **metadatas** \(_Optional_ _\[__List_ _\[__dict_ _\]__\]__,__optional_\) ‚Äì Optional list of metadatas.

  * **ids** \(_Optional_ _\[__List_ _\[__str_ _\]__\]__,__optional_\) ‚Äì Optional list of IDs.

  * **embedding\_function** \(_Optional_ _\[_[_Embeddings_](https://python.langchain.com/api_reference/core/embeddings/langchain_core.embeddings.embeddings.Embeddings.html#langchain_core.embeddings.embeddings.Embeddings "langchain_core.embeddings.embeddings.Embeddings") _\]__,__optional_\) ‚Äì Embedding function to use to convert the text into embeddings.

  * **\*\*kwargs** \(_Any_\) ‚Äì Any additional keyword arguments passed is not supported by this method.

Returns:     

List of IDs of the added texts.

Return type:     

List\[str\]

_async _adelete\(

    _ids : list\[str\] | None = None_,     _\*\* kwargs: Any_, \) ‚Üí bool | None\#     

Async delete by vector ID or other criteria.

Parameters:     

  * **ids** \(_list_ _\[__str_ _\]__|__None_\) ‚Äì List of ids to delete. If None, delete all. Default is None.

  * **\*\*kwargs** \(_Any_\) ‚Äì Other keyword arguments that subclasses might use.

Returns:     

True if deletion is successful, False otherwise, None if not implemented.

Return type:     

Optional\[bool\]

_async classmethod _afrom\_documents\(

    _documents : list\[[Document](https://python.langchain.com/api_reference/core/documents/langchain_core.documents.base.Document.html#langchain_core.documents.base.Document "langchain_core.documents.base.Document")\]_,     _embedding : [Embeddings](https://python.langchain.com/api_reference/core/embeddings/langchain_core.embeddings.embeddings.Embeddings.html#langchain_core.embeddings.embeddings.Embeddings "langchain_core.embeddings.embeddings.Embeddings")_,     _\*\* kwargs: Any_, \) ‚Üí Self\#     

Async return VectorStore initialized from documents and embeddings.

Parameters:     

  * **documents** \(_list_ _\[_[_Document_](https://python.langchain.com/api_reference/core/documents/langchain_core.documents.base.Document.html#langchain_core.documents.base.Document "langchain_core.documents.base.Document") _\]_\) ‚Äì List of Documents to add to the vectorstore.

  * **embedding** \([_Embeddings_](https://python.langchain.com/api_reference/core/embeddings/langchain_core.embeddings.embeddings.Embeddings.html#langchain_core.embeddings.embeddings.Embeddings "langchain_core.embeddings.embeddings.Embeddings")\) ‚Äì Embedding function to use.

  * **kwargs** \(_Any_\) ‚Äì Additional keyword arguments.

Returns:     

VectorStore initialized from documents and embeddings.

Return type:     

[VectorStore](https://python.langchain.com/api_reference/core/vectorstores/langchain_core.vectorstores.base.VectorStore.html#langchain_core.vectorstores.base.VectorStore "langchain_core.vectorstores.base.VectorStore")

_async classmethod _afrom\_texts\(

    _texts : list\[str\]_,     _embedding : [Embeddings](https://python.langchain.com/api_reference/core/embeddings/langchain_core.embeddings.embeddings.Embeddings.html#langchain_core.embeddings.embeddings.Embeddings "langchain_core.embeddings.embeddings.Embeddings")_,     _metadatas : list\[dict\] | None = None_,     _\*_ ,     _ids : list\[str\] | None = None_,     _\*\* kwargs: Any_, \) ‚Üí Self\#     

Async return VectorStore initialized from texts and embeddings.

Parameters:     

  * **texts** \(_list_ _\[__str_ _\]_\) ‚Äì Texts to add to the vectorstore.

  * **embedding** \([_Embeddings_](https://python.langchain.com/api_reference/core/embeddings/langchain_core.embeddings.embeddings.Embeddings.html#langchain_core.embeddings.embeddings.Embeddings "langchain_core.embeddings.embeddings.Embeddings")\) ‚Äì Embedding function to use.

  * **metadatas** \(_list_ _\[__dict_ _\]__|__None_\) ‚Äì Optional list of metadatas associated with the texts. Default is None.

  * **ids** \(_list_ _\[__str_ _\]__|__None_\) ‚Äì Optional list of IDs associated with the texts.

  * **kwargs** \(_Any_\) ‚Äì Additional keyword arguments.

Returns:     

VectorStore initialized from texts and embeddings.

Return type:     

[VectorStore](https://python.langchain.com/api_reference/core/vectorstores/langchain_core.vectorstores.base.VectorStore.html#langchain_core.vectorstores.base.VectorStore "langchain_core.vectorstores.base.VectorStore")

_async _aget\_by\_ids\(

    _ids : Sequence\[str\]_,     _/_ , \) ‚Üí list\[[Document](https://python.langchain.com/api_reference/core/documents/langchain_core.documents.base.Document.html#langchain_core.documents.base.Document "langchain_core.documents.base.Document")\]\#     

Async get documents by their IDs.

The returned documents are expected to have the ID field set to the ID of the document in the vector store.

Fewer documents may be returned than requested if some IDs are not found or if there are duplicated IDs.

Users should not assume that the order of the returned documents matches the order of the input IDs. Instead, users should rely on the ID field of the returned documents.

This method should **NOT** raise exceptions if no documents are found for some IDs.

Parameters:     

**ids** \(_Sequence_ _\[__str_ _\]_\) ‚Äì List of ids to retrieve.

Returns:     

List of Documents.

Return type:     

list\[[Document](https://python.langchain.com/api_reference/core/documents/langchain_core.documents.base.Document.html#langchain_core.documents.base.Document "langchain_core.documents.base.Document")\]

Added in version 0.2.11.

_async _amax\_marginal\_relevance\_search\(

    _query : str_,     _k : int = 4_,     _fetch\_k : int = 20_,     _lambda\_mult : float = 0.5_,     _\*\* kwargs: Any_, \) ‚Üí list\[[Document](https://python.langchain.com/api_reference/core/documents/langchain_core.documents.base.Document.html#langchain_core.documents.base.Document "langchain_core.documents.base.Document")\]\#     

Async return docs selected using the maximal marginal relevance.

Maximal marginal relevance optimizes for similarity to query AND diversity among selected documents.

Parameters:     

  * **query** \(_str_\) ‚Äì Text to look up documents similar to.

  * **k** \(_int_\) ‚Äì Number of Documents to return. Defaults to 4.

  * **fetch\_k** \(_int_\) ‚Äì Number of Documents to fetch to pass to MMR algorithm. Default is 20.

  * **lambda\_mult** \(_float_\) ‚Äì Number between 0 and 1 that determines the degree of diversity among the results with 0 corresponding to maximum diversity and 1 to minimum diversity. Defaults to 0.5.

  * **\*\*kwargs** \(_Any_\) ‚Äì Arguments to pass to the search method.

Returns:     

List of Documents selected by maximal marginal relevance.

Return type:     

list\[[Document](https://python.langchain.com/api_reference/core/documents/langchain_core.documents.base.Document.html#langchain_core.documents.base.Document "langchain_core.documents.base.Document")\]

_async _amax\_marginal\_relevance\_search\_by\_vector\(

    _embedding : list\[float\]_,     _k : int = 4_,     _fetch\_k : int = 20_,     _lambda\_mult : float = 0.5_,     _\*\* kwargs: Any_, \) ‚Üí list\[[Document](https://python.langchain.com/api_reference/core/documents/langchain_core.documents.base.Document.html#langchain_core.documents.base.Document "langchain_core.documents.base.Document")\]\#     

Async return docs selected using the maximal marginal relevance.

Maximal marginal relevance optimizes for similarity to query AND diversity among selected documents.

Parameters:     

  * **embedding** \(_list_ _\[__float_ _\]_\) ‚Äì Embedding to look up documents similar to.

  * **k** \(_int_\) ‚Äì Number of Documents to return. Defaults to 4.

  * **fetch\_k** \(_int_\) ‚Äì Number of Documents to fetch to pass to MMR algorithm. Default is 20.

  * **lambda\_mult** \(_float_\) ‚Äì Number between 0 and 1 that determines the degree of diversity among the results with 0 corresponding to maximum diversity and 1 to minimum diversity. Defaults to 0.5.

  * **\*\*kwargs** \(_Any_\) ‚Äì Arguments to pass to the search method.

Returns:     

List of Documents selected by maximal marginal relevance.

Return type:     

list\[[Document](https://python.langchain.com/api_reference/core/documents/langchain_core.documents.base.Document.html#langchain_core.documents.base.Document "langchain_core.documents.base.Document")\]

as\_retriever\(

    _\*\* kwargs: Any_, \) ‚Üí [VectorStoreRetriever](https://python.langchain.com/api_reference/core/vectorstores/langchain_core.vectorstores.base.VectorStoreRetriever.html#langchain_core.vectorstores.base.VectorStoreRetriever "langchain_core.vectorstores.base.VectorStoreRetriever")\#     

Return VectorStoreRetriever initialized from this VectorStore.

Parameters:     

**\*\*kwargs** \(_Any_\) ‚Äì 

Keyword arguments to pass to the search function. Can include: search\_type \(Optional\[str\]\): Defines the type of search that

> the Retriever should perform. Can be ‚Äúsimilarity‚Äù \(default\), ‚Äúmmr‚Äù, or ‚Äúsimilarity\_score\_threshold‚Äù.

search\_kwargs \(Optional\[Dict\]\): Keyword arguments to pass to the     

search function. Can include things like:     

k: Amount of documents to return \(Default: 4\) score\_threshold: Minimum relevance threshold

> for similarity\_score\_threshold

fetch\_k: Amount of documents to pass to MMR algorithm     

\(Default: 20\)

lambda\_mult: Diversity of results returned by MMR;     

1 for minimum diversity and 0 for maximum. \(Default: 0.5\)

filter: Filter by document metadata

Returns:     

Retriever class for VectorStore.

Return type:     

[VectorStoreRetriever](https://python.langchain.com/api_reference/core/vectorstores/langchain_core.vectorstores.base.VectorStoreRetriever.html#langchain_core.vectorstores.base.VectorStoreRetriever "langchain_core.vectorstores.base.VectorStoreRetriever")

Examples:               # Retrieve more documents with higher diversity     # Useful if your dataset has many similar documents     docsearch.as_retriever(         search_type="mmr",         search_kwargs={'k': 6, 'lambda_mult': 0.25}     )          # Fetch more documents for the MMR algorithm to consider     # But only return the top 5     docsearch.as_retriever(         search_type="mmr",         search_kwargs={'k': 5, 'fetch_k': 50}     )          # Only retrieve documents that have a relevance score     # Above a certain threshold     docsearch.as_retriever(         search_type="similarity_score_threshold",         search_kwargs={'score_threshold': 0.8}     )          # Only get the single most similar document from the dataset     docsearch.as_retriever(search_kwargs={'k': 1})          # Use a filter to only retrieve documents from a specific paper     docsearch.as_retriever(         search_kwargs={'filter': {'paper_title':'GPT-4 Technical Report'}}     )     

_async _asearch\(

    _query : str_,     _search\_type : str_,     _\*\* kwargs: Any_, \) ‚Üí list\[[Document](https://python.langchain.com/api_reference/core/documents/langchain_core.documents.base.Document.html#langchain_core.documents.base.Document "langchain_core.documents.base.Document")\]\#     

Async return docs most similar to query using a specified search type.

Parameters:     

  * **query** \(_str_\) ‚Äì Input text.

  * **search\_type** \(_str_\) ‚Äì Type of search to perform. Can be ‚Äúsimilarity‚Äù, ‚Äúmmr‚Äù, or ‚Äúsimilarity\_score\_threshold‚Äù.

  * **\*\*kwargs** \(_Any_\) ‚Äì Arguments to pass to the search method.

Returns:     

List of Documents most similar to the query.

Raises:     

**ValueError** ‚Äì If search\_type is not one of ‚Äúsimilarity‚Äù, ‚Äúmmr‚Äù, or ‚Äúsimilarity\_score\_threshold‚Äù.

Return type:     

list\[[Document](https://python.langchain.com/api_reference/core/documents/langchain_core.documents.base.Document.html#langchain_core.documents.base.Document "langchain_core.documents.base.Document")\]

_async _asimilarity\_search\(

    _query : str_,     _k : int = 4_,     _\*\* kwargs: Any_, \) ‚Üí list\[[Document](https://python.langchain.com/api_reference/core/documents/langchain_core.documents.base.Document.html#langchain_core.documents.base.Document "langchain_core.documents.base.Document")\]\#     

Async return docs most similar to query.

Parameters:     

  * **query** \(_str_\) ‚Äì Input text.

  * **k** \(_int_\) ‚Äì Number of Documents to return. Defaults to 4.

  * **\*\*kwargs** \(_Any_\) ‚Äì Arguments to pass to the search method.

Returns:     

List of Documents most similar to the query.

Return type:     

list\[[Document](https://python.langchain.com/api_reference/core/documents/langchain_core.documents.base.Document.html#langchain_core.documents.base.Document "langchain_core.documents.base.Document")\]

_async _asimilarity\_search\_by\_vector\(

    _embedding : list\[float\]_,     _k : int = 4_,     _\*\* kwargs: Any_, \) ‚Üí list\[[Document](https://python.langchain.com/api_reference/core/documents/langchain_core.documents.base.Document.html#langchain_core.documents.base.Document "langchain_core.documents.base.Document")\]\#     

Async return docs most similar to embedding vector.

Parameters:     

  * **embedding** \(_list_ _\[__float_ _\]_\) ‚Äì Embedding to look up documents similar to.

  * **k** \(_int_\) ‚Äì Number of Documents to return. Defaults to 4.

  * **\*\*kwargs** \(_Any_\) ‚Äì Arguments to pass to the search method.

Returns:     

List of Documents most similar to the query vector.

Return type:     

list\[[Document](https://python.langchain.com/api_reference/core/documents/langchain_core.documents.base.Document.html#langchain_core.documents.base.Document "langchain_core.documents.base.Document")\]

_async _asimilarity\_search\_with\_relevance\_scores\(

    _query : str_,     _k : int = 4_,     _\*\* kwargs: Any_, \) ‚Üí list\[tuple\[[Document](https://python.langchain.com/api_reference/core/documents/langchain_core.documents.base.Document.html#langchain_core.documents.base.Document "langchain_core.documents.base.Document"), float\]\]\#     

Async return docs and relevance scores in the range \[0, 1\].

0 is dissimilar, 1 is most similar.

Parameters:     

  * **query** \(_str_\) ‚Äì Input text.

  * **k** \(_int_\) ‚Äì Number of Documents to return. Defaults to 4.

  * **\*\*kwargs** \(_Any_\) ‚Äì 

kwargs to be passed to similarity search. Should include: score\_threshold: Optional, a floating point value between 0 to 1 to

> filter the resulting set of retrieved docs

Returns:     

List of Tuples of \(doc, similarity\_score\)

Return type:     

list\[tuple\[[Document](https://python.langchain.com/api_reference/core/documents/langchain_core.documents.base.Document.html#langchain_core.documents.base.Document "langchain_core.documents.base.Document"), float\]\]

_async _asimilarity\_search\_with\_score\(

    _\* args: Any_,     _\*\* kwargs: Any_, \) ‚Üí list\[tuple\[[Document](https://python.langchain.com/api_reference/core/documents/langchain_core.documents.base.Document.html#langchain_core.documents.base.Document "langchain_core.documents.base.Document"), float\]\]\#     

Async run similarity search with distance.

Parameters:     

  * **\*args** \(_Any_\) ‚Äì Arguments to pass to the search method.

  * **\*\*kwargs** \(_Any_\) ‚Äì Arguments to pass to the search method.

Returns:     

List of Tuples of \(doc, similarity\_score\).

Return type:     

list\[tuple\[[Document](https://python.langchain.com/api_reference/core/documents/langchain_core.documents.base.Document.html#langchain_core.documents.base.Document "langchain_core.documents.base.Document"), float\]\]

delete\(

    _ids : List\[str\] | None = None_,     _\*\* kwargs: Any_, \) ‚Üí bool[\[source\]](https://python.langchain.com/api_reference/_modules/langchain_community/vectorstores/deeplake.html#DeepLake.delete)\#     

Delete the entities in the dataset.

Parameters:     

  * **ids** \(_Optional_ _\[__List_ _\[__str_ _\]__\]__,__optional_\) ‚Äì The document\_ids to delete. Defaults to None.

  * **\*\*kwargs** ‚Äì Other keyword arguments that subclasses might use. \- filter \(Optional\[Dict\[str, str\]\], optional\): The filter to delete by. \- delete\_all \(Optional\[bool\], optional\): Whether to drop the dataset.

Returns:     

Whether the delete operation was successful.

Return type:     

bool

delete\_dataset\(\) ‚Üí None[\[source\]](https://python.langchain.com/api_reference/_modules/langchain_community/vectorstores/deeplake.html#DeepLake.delete_dataset)\#     

Delete the collection.

Return type:     

None

ds\(\) ‚Üí Any[\[source\]](https://python.langchain.com/api_reference/_modules/langchain_community/vectorstores/deeplake.html#DeepLake.ds)\#     

Return type:     

_Any_

_classmethod _force\_delete\_by\_path\(_path : str_\) ‚Üí None[\[source\]](https://python.langchain.com/api_reference/_modules/langchain_community/vectorstores/deeplake.html#DeepLake.force_delete_by_path)\#     

Force delete dataset by path.

Parameters:     

**path** \(_str_\) ‚Äì path of the dataset to delete.

Raises:     

**ValueError** ‚Äì if deeplake is not installed.

Return type:     

None

_classmethod _from\_documents\(

    _documents : list\[[Document](https://python.langchain.com/api_reference/core/documents/langchain_core.documents.base.Document.html#langchain_core.documents.base.Document "langchain_core.documents.base.Document")\]_,     _embedding : [Embeddings](https://python.langchain.com/api_reference/core/embeddings/langchain_core.embeddings.embeddings.Embeddings.html#langchain_core.embeddings.embeddings.Embeddings "langchain_core.embeddings.embeddings.Embeddings")_,     _\*\* kwargs: Any_, \) ‚Üí Self\#     

Return VectorStore initialized from documents and embeddings.

Parameters:     

  * **documents** \(_list_ _\[_[_Document_](https://python.langchain.com/api_reference/core/documents/langchain_core.documents.base.Document.html#langchain_core.documents.base.Document "langchain_core.documents.base.Document") _\]_\) ‚Äì List of Documents to add to the vectorstore.

  * **embedding** \([_Embeddings_](https://python.langchain.com/api_reference/core/embeddings/langchain_core.embeddings.embeddings.Embeddings.html#langchain_core.embeddings.embeddings.Embeddings "langchain_core.embeddings.embeddings.Embeddings")\) ‚Äì Embedding function to use.

  * **kwargs** \(_Any_\) ‚Äì Additional keyword arguments.

Returns:     

VectorStore initialized from documents and embeddings.

Return type:     

[VectorStore](https://python.langchain.com/api_reference/core/vectorstores/langchain_core.vectorstores.base.VectorStore.html#langchain_core.vectorstores.base.VectorStore "langchain_core.vectorstores.base.VectorStore")

_classmethod _from\_texts\(

    _texts : List\[str\]_,     _embedding : [Embeddings](https://python.langchain.com/api_reference/core/embeddings/langchain_core.embeddings.embeddings.Embeddings.html#langchain_core.embeddings.embeddings.Embeddings "langchain_core.embeddings.embeddings.Embeddings") | None = None_,     _metadatas : List\[dict\] | None = None_,     _ids : List\[str\] | None = None_,     _dataset\_path : str = './deeplake/'_,     _\*\* kwargs: Any_, \) ‚Üí DeepLake[\[source\]](https://python.langchain.com/api_reference/_modules/langchain_community/vectorstores/deeplake.html#DeepLake.from_texts)\#     

Create a Deep Lake dataset from a raw documents.

If a dataset\_path is specified, the dataset will be persisted in that location, otherwise by default at ./deeplake

Examples: >>> \# Search using an embedding >>> vector\_store = DeepLake.from\_texts\( ‚Ä¶ texts = <the\_texts\_that\_you\_want\_to\_embed>, ‚Ä¶ embedding\_function = <embedding\_function\_for\_query>, ‚Ä¶ k = <number\_of\_items\_to\_return>, ‚Ä¶ exec\_option = <preferred\_exec\_option>, ‚Ä¶ \)

Parameters:     

  * **dataset\_path** \(_str_\) ‚Äì      * The full path to the dataset. Can be:

    * Deep Lake cloud path of the form `hub://username/dataset_name`.     

To write to Deep Lake cloud datasets, ensure that you are logged in to Deep Lake \(use ‚Äòactiveloop login‚Äô from command line\)

    * AWS S3 path of the form `s3://bucketname/path/to/dataset`.     

Credentials are required in either the environment

    * Google Cloud Storage path of the form     

`gcs://bucketname/path/to/dataset` Credentials are required in either the environment

    * Local file system path of the form `./path/to/dataset` or     

`~/path/to/dataset` or `path/to/dataset`.

    * In-memory path of the form `mem://path/to/dataset` which doesn‚Äôt     

save the dataset, but keeps it in memory instead. Should be used only for testing as it does not persist.

  * **texts** \(_List_ _\[_[_Document_](https://python.langchain.com/api_reference/core/documents/langchain_core.documents.base.Document.html#langchain_core.documents.base.Document "langchain_core.documents.base.Document") _\]_\) ‚Äì List of documents to add.

  * **embedding** \(_Optional_ _\[_[_Embeddings_](https://python.langchain.com/api_reference/core/embeddings/langchain_core.embeddings.embeddings.Embeddings.html#langchain_core.embeddings.embeddings.Embeddings "langchain_core.embeddings.embeddings.Embeddings") _\]_\) ‚Äì Embedding function. Defaults to None. Note, in other places, it is called embedding\_function.

  * **metadatas** \(_Optional_ _\[__List_ _\[__dict_ _\]__\]_\) ‚Äì List of metadatas. Defaults to None.

  * **ids** \(_Optional_ _\[__List_ _\[__str_ _\]__\]_\) ‚Äì List of document IDs. Defaults to None.

  * **kwargs** \(_Any_\) ‚Äì Additional keyword arguments.

Returns:     

Deep Lake dataset.

Return type:     

DeepLake

get\_by\_ids\(_ids : Sequence\[str\]_, _/_\) ‚Üí list\[[Document](https://python.langchain.com/api_reference/core/documents/langchain_core.documents.base.Document.html#langchain_core.documents.base.Document "langchain_core.documents.base.Document")\]\#     

Get documents by their IDs.

The returned documents are expected to have the ID field set to the ID of the document in the vector store.

Fewer documents may be returned than requested if some IDs are not found or if there are duplicated IDs.

Users should not assume that the order of the returned documents matches the order of the input IDs. Instead, users should rely on the ID field of the returned documents.

This method should **NOT** raise exceptions if no documents are found for some IDs.

Parameters:     

**ids** \(_Sequence_ _\[__str_ _\]_\) ‚Äì List of ids to retrieve.

Returns:     

List of Documents.

Return type:     

list\[[Document](https://python.langchain.com/api_reference/core/documents/langchain_core.documents.base.Document.html#langchain_core.documents.base.Document "langchain_core.documents.base.Document")\]

Added in version 0.2.11.

max\_marginal\_relevance\_search\(

    _query : str_,     _k : int = 4_,     _fetch\_k : int = 20_,     _lambda\_mult : float = 0.5_,     _exec\_option : str | None = None_,     _\*\* kwargs: Any_, \) ‚Üí List\[[Document](https://python.langchain.com/api_reference/core/documents/langchain_core.documents.base.Document.html#langchain_core.documents.base.Document "langchain_core.documents.base.Document")\][\[source\]](https://python.langchain.com/api_reference/_modules/langchain_community/vectorstores/deeplake.html#DeepLake.max_marginal_relevance_search)\#     

Return docs selected using maximal marginal relevance.

Maximal marginal relevance optimizes for similarity to query AND diversity among selected documents.

Examples: >>> \# Search using an embedding >>> data = vector\_store.max\_marginal\_relevance\_search\( ‚Ä¶ query = <query\_to\_search>, ‚Ä¶ embedding\_function = <embedding\_function\_for\_query>, ‚Ä¶ k = <number\_of\_items\_to\_return>, ‚Ä¶ exec\_option = <preferred\_exec\_option>, ‚Ä¶ \)

Parameters:     

  * **query** \(_str_\) ‚Äì Text to look up documents similar to.

  * **k** \(_int_\) ‚Äì Number of Documents to return. Defaults to 4.

  * **fetch\_k** \(_int_\) ‚Äì Number of Documents for MMR algorithm.

  * **lambda\_mult** \(_float_\) ‚Äì Value between 0 and 1. 0 corresponds to maximum diversity and 1 to minimum. Defaults to 0.5.

  * **exec\_option** \(_str_\) ‚Äì 

Supports 3 ways to perform searching. \- ‚Äúpython‚Äù - Pure-python implementation running on the client.

> > Can be used for data stored anywhere. WARNING: using this option with big datasets is discouraged due to potential memory issues. >  >     * ‚Äùcompute\_engine‚Äù - Performant C++ implementation of the Deep >      >  > Lake Compute Engine. Runs on the client and can be used for any data stored in or connected to Deep Lake. It cannot be used with in-memory or local datasets. >  >     * ‚Äùtensor\_db‚Äù - Performant, fully-hosted Managed Tensor Database. >      >  > Responsible for storage and query execution. Only available for data stored in the Deep Lake Managed Database. To store datasets in this database, specify runtime = \{‚Äúdb\_engine‚Äù: True\} during dataset creation.

  * **deep\_memory** \(_bool_\) ‚Äì Whether to use the Deep Memory model for improving search results. Defaults to False if deep\_memory is not specified in the Vector Store initialization. If True, the distance metric is set to ‚Äúdeepmemory\_distance‚Äù, which represents the metric with which the model was trained. The search is performed using the Deep Memory model. If False, the distance metric is set to ‚ÄúCOS‚Äù or whatever distance metric user specifies.

  * **kwargs** \(_Any_\) ‚Äì Additional keyword arguments

Returns:     

List of Documents selected by maximal marginal relevance.

Raises:     

**ValueError** ‚Äì when MRR search is on but embedding function is not specified.

Return type:     

_List_\[[_Document_](https://python.langchain.com/api_reference/core/documents/langchain_core.documents.base.Document.html#langchain_core.documents.base.Document "langchain_core.documents.base.Document")\]

max\_marginal\_relevance\_search\_by\_vector\(

    _embedding : List\[float\]_,     _k : int = 4_,     _fetch\_k : int = 20_,     _lambda\_mult : float = 0.5_,     _exec\_option : str | None = None_,     _\*\* kwargs: Any_, \) ‚Üí List\[[Document](https://python.langchain.com/api_reference/core/documents/langchain_core.documents.base.Document.html#langchain_core.documents.base.Document "langchain_core.documents.base.Document")\][\[source\]](https://python.langchain.com/api_reference/_modules/langchain_community/vectorstores/deeplake.html#DeepLake.max_marginal_relevance_search_by_vector)\#     

Return docs selected using the maximal marginal relevance. Maximal marginal relevance optimizes for similarity to query AND diversity among selected docs.

Examples: >>> data = vector\_store.max\_marginal\_relevance\_search\_by\_vector\( ‚Ä¶ embedding=<your\_embedding>, ‚Ä¶ fetch\_k=<elements\_to\_fetch\_before\_mmr\_search>, ‚Ä¶ k=<number\_of\_items\_to\_return>, ‚Ä¶ exec\_option=<preferred\_exec\_option>, ‚Ä¶ \)

Parameters:     

  * **embedding** \(_List_ _\[__float_ _\]_\) ‚Äì Embedding to look up documents similar to.

  * **k** \(_int_\) ‚Äì Number of Documents to return. Defaults to 4.

  * **fetch\_k** \(_int_\) ‚Äì Number of Documents to fetch for MMR algorithm.

  * **lambda\_mult** \(_float_\) ‚Äì Number between 0 and 1 determining the degree of diversity. 0 corresponds to max diversity and 1 to min diversity. Defaults to 0.5.

  * **exec\_option** \(_str_\) ‚Äì 

DeepLakeVectorStore supports 3 ways for searching. Could be ‚Äúpython‚Äù, ‚Äúcompute\_engine‚Äù or ‚Äútensor\_db‚Äù. Defaults to ‚Äúpython‚Äù. \- ‚Äúpython‚Äù - Pure-python implementation running on the client.

> Can be used for data stored anywhere. WARNING: using this option with big datasets is discouraged due to potential memory issues.

    * ‚Äùcompute\_engine‚Äù - Performant C++ implementation of the Deep     

Lake Compute Engine. Runs on the client and can be used for any data stored in or connected to Deep Lake. It cannot be used with in-memory or local datasets.

    * ‚Äùtensor\_db‚Äù - Performant, fully-hosted Managed Tensor Database.     

Responsible for storage and query execution. Only available for data stored in the Deep Lake Managed Database. To store datasets in this database, specify runtime = \{‚Äúdb\_engine‚Äù: True\} during dataset creation.

  * **deep\_memory** \(_bool_\) ‚Äì Whether to use the Deep Memory model for improving search results. Defaults to False if deep\_memory is not specified in the Vector Store initialization. If True, the distance metric is set to ‚Äúdeepmemory\_distance‚Äù, which represents the metric with which the model was trained. The search is performed using the Deep Memory model. If False, the distance metric is set to ‚ÄúCOS‚Äù or whatever distance metric user specifies.

  * **kwargs** \(_Any_\) ‚Äì Additional keyword arguments.

Returns:     

List\[Documents\] - A list of documents.

Return type:     

_List_\[[_Document_](https://python.langchain.com/api_reference/core/documents/langchain_core.documents.base.Document.html#langchain_core.documents.base.Document "langchain_core.documents.base.Document")\]

search\(

    _query : str_,     _search\_type : str_,     _\*\* kwargs: Any_, \) ‚Üí list\[[Document](https://python.langchain.com/api_reference/core/documents/langchain_core.documents.base.Document.html#langchain_core.documents.base.Document "langchain_core.documents.base.Document")\]\#     

Return docs most similar to query using a specified search type.

Parameters:     

  * **query** \(_str_\) ‚Äì Input text

  * **search\_type** \(_str_\) ‚Äì Type of search to perform. Can be ‚Äúsimilarity‚Äù, ‚Äúmmr‚Äù, or ‚Äúsimilarity\_score\_threshold‚Äù.

  * **\*\*kwargs** \(_Any_\) ‚Äì Arguments to pass to the search method.

Returns:     

List of Documents most similar to the query.

Raises:     

**ValueError** ‚Äì If search\_type is not one of ‚Äúsimilarity‚Äù, ‚Äúmmr‚Äù, or ‚Äúsimilarity\_score\_threshold‚Äù.

Return type:     

list\[[Document](https://python.langchain.com/api_reference/core/documents/langchain_core.documents.base.Document.html#langchain_core.documents.base.Document "langchain_core.documents.base.Document")\]

similarity\_search\(

    _query : str_,     _k : int = 4_,     _\*\* kwargs: Any_, \) ‚Üí List\[[Document](https://python.langchain.com/api_reference/core/documents/langchain_core.documents.base.Document.html#langchain_core.documents.base.Document "langchain_core.documents.base.Document")\][\[source\]](https://python.langchain.com/api_reference/_modules/langchain_community/vectorstores/deeplake.html#DeepLake.similarity_search)\#     

Return docs most similar to query.

Examples               >>> # Search using an embedding     >>> data = vector_store.similarity_search(     ...     query=<your_query>,     ...     k=<num_items>,     ...     exec_option=<preferred_exec_option>,     ... )     >>> # Run tql search:     >>> data = vector_store.similarity_search(     ...     query=None,     ...     tql="SELECT * WHERE id == <id>",     ...     exec_option="compute_engine",     ... )     

Parameters:     

  * **k** \(_int_\) ‚Äì Number of Documents to return. Defaults to 4.

  * **query** \(_str_\) ‚Äì Text to look up similar documents.

  * **kwargs** \(_Any_\) ‚Äì 

Additional keyword arguments include: embedding \(Callable\): Embedding function to use. Defaults to None. distance\_metric \(str\): ‚ÄòL2‚Äô for Euclidean, ‚ÄòL1‚Äô for Nuclear, ‚Äòmax‚Äô

> for L-infinity, ‚Äòcos‚Äô for cosine, ‚Äòdot‚Äô for dot product. Defaults to ‚ÄòL2‚Äô.

filter \(Union\[Dict, Callable\], optional\): Additional filter     

before embedding search. \- Dict: Key-value search on tensors of htype json,

> \(sample must satisfy all key-value filters\) Dict = \{‚Äútensor\_1‚Äù: \{‚Äúkey‚Äù: value\}, ‚Äútensor\_2‚Äù: \{‚Äúkey‚Äù: value\}\}

    * Function: Compatible with deeplake.filter.

Defaults to None.

exec\_option \(str\): Supports 3 ways to perform searching.     

‚Äôpython‚Äô, ‚Äòcompute\_engine‚Äô, or ‚Äòtensor\_db‚Äô. Defaults to ‚Äòpython‚Äô. \- ‚Äòpython‚Äô: Pure-python implementation for the client.

> WARNING: not recommended for big datasets.

    * ‚Äôcompute\_engine‚Äô: C++ implementation of the Compute Engine for     

the client. Not for in-memory or local datasets.

    * ‚Äôtensor\_db‚Äô: Managed Tensor Database for storage and query.     

Only for data in Deep Lake Managed Database. Use runtime = \{‚Äúdb\_engine‚Äù: True\} during dataset creation.

deep\_memory \(bool\): Whether to use the Deep Memory model for improving     

search results. Defaults to False if deep\_memory is not specified in the Vector Store initialization. If True, the distance metric is set to ‚Äúdeepmemory\_distance‚Äù, which represents the metric with which the model was trained. The search is performed using the Deep Memory model. If False, the distance metric is set to ‚ÄúCOS‚Äù or whatever distance metric user specifies.

Returns:     

List of Documents most similar to the query vector.

Return type:     

List\[[Document](https://python.langchain.com/api_reference/core/documents/langchain_core.documents.base.Document.html#langchain_core.documents.base.Document "langchain_core.documents.base.Document")\]

similarity\_search\_by\_vector\(

    _embedding : List\[float\] | ndarray_,     _k : int = 4_,     _\*\* kwargs: Any_, \) ‚Üí List\[[Document](https://python.langchain.com/api_reference/core/documents/langchain_core.documents.base.Document.html#langchain_core.documents.base.Document "langchain_core.documents.base.Document")\][\[source\]](https://python.langchain.com/api_reference/_modules/langchain_community/vectorstores/deeplake.html#DeepLake.similarity_search_by_vector)\#     

Return docs most similar to embedding vector.

Examples               >>> # Search using an embedding     >>> data = vector_store.similarity_search_by_vector(     ...    embedding=<your_embedding>,     ...    k=<num_items_to_return>,     ...    exec_option=<preferred_exec_option>,     ... )     

Parameters:     

  * **embedding** \(_Union_ _\[__List_ _\[__float_ _\]__,__np.ndarray_ _\]_\) ‚Äì Embedding to find similar docs.

  * **k** \(_int_\) ‚Äì Number of Documents to return. Defaults to 4.

  * **kwargs** \(_Any_\) ‚Äì 

Additional keyword arguments including: filter \(Union\[Dict, Callable\], optional\):

> Additional filter before embedding search. \- `Dict` \- Key-value search on tensors of htype json. True >
>> if all key-value filters are satisfied. Dict = \{‚Äútensor\_name\_1‚Äù: \{‚Äúkey‚Äù: value\}, >> >>> ‚Äùtensor\_name\_2‚Äù: \{‚Äúkey‚Äù: value\}\} >  >     * `Function` \- Any function compatible with >      >  > deeplake.filter. >  > Defaults to None.

exec\_option \(str\): Options for search execution include     

‚Äùpython‚Äù, ‚Äúcompute\_engine‚Äù, or ‚Äútensor\_db‚Äù. Defaults to ‚Äúpython‚Äù. \- ‚Äúpython‚Äù - Pure-python implementation running on the client.

> Can be used for data stored anywhere. WARNING: using this option with big datasets is discouraged due to potential memory issues.

    * ‚Äùcompute\_engine‚Äù - Performant C++ implementation of the Deep     

Lake Compute Engine. Runs on the client and can be used for any data stored in or connected to Deep Lake. It cannot be used with in-memory or local datasets.

    * ‚Äùtensor\_db‚Äù - Performant, fully-hosted Managed Tensor Database.     

Responsible for storage and query execution. Only available for data stored in the Deep Lake Managed Database. To store datasets in this database, specify runtime = \{‚Äúdb\_engine‚Äù: True\} during dataset creation.

distance\_metric \(str\): L2 for Euclidean, L1 for Nuclear,     

max for L-infinity distance, cos for cosine similarity, ‚Äòdot‚Äô for dot product. Defaults to L2.

deep\_memory \(bool\): Whether to use the Deep Memory model for improving     

search results. Defaults to False if deep\_memory is not specified in the Vector Store initialization. If True, the distance metric is set to ‚Äúdeepmemory\_distance‚Äù, which represents the metric with which the model was trained. The search is performed using the Deep Memory model. If False, the distance metric is set to ‚ÄúCOS‚Äù or whatever distance metric user specifies.

Returns:     

List of Documents most similar to the query vector.

Return type:     

List\[[Document](https://python.langchain.com/api_reference/core/documents/langchain_core.documents.base.Document.html#langchain_core.documents.base.Document "langchain_core.documents.base.Document")\]

similarity\_search\_with\_relevance\_scores\(

    _query : str_,     _k : int = 4_,     _\*\* kwargs: Any_, \) ‚Üí list\[tuple\[[Document](https://python.langchain.com/api_reference/core/documents/langchain_core.documents.base.Document.html#langchain_core.documents.base.Document "langchain_core.documents.base.Document"), float\]\]\#     

Return docs and relevance scores in the range \[0, 1\].

0 is dissimilar, 1 is most similar.

Parameters:     

  * **query** \(_str_\) ‚Äì Input text.

  * **k** \(_int_\) ‚Äì Number of Documents to return. Defaults to 4.

  * **\*\*kwargs** \(_Any_\) ‚Äì 

kwargs to be passed to similarity search. Should include: score\_threshold: Optional, a floating point value between 0 to 1 to

> filter the resulting set of retrieved docs.

Returns:     

List of Tuples of \(doc, similarity\_score\).

Return type:     

list\[tuple\[[Document](https://python.langchain.com/api_reference/core/documents/langchain_core.documents.base.Document.html#langchain_core.documents.base.Document "langchain_core.documents.base.Document"), float\]\]

similarity\_search\_with\_score\(

    _query : str_,     _k : int = 4_,     _\*\* kwargs: Any_, \) ‚Üí List\[Tuple\[[Document](https://python.langchain.com/api_reference/core/documents/langchain_core.documents.base.Document.html#langchain_core.documents.base.Document "langchain_core.documents.base.Document"), float\]\][\[source\]](https://python.langchain.com/api_reference/_modules/langchain_community/vectorstores/deeplake.html#DeepLake.similarity_search_with_score)\#     

Run similarity search with Deep Lake with distance returned.

Examples: >>> data = vector\_store.similarity\_search\_with\_score\( ‚Ä¶ query=<your\_query>, ‚Ä¶ embedding=<your\_embedding\_function> ‚Ä¶ k=<number\_of\_items\_to\_return>, ‚Ä¶ exec\_option=<preferred\_exec\_option>, ‚Ä¶ \)

Parameters:     

  * **query** \(_str_\) ‚Äì Query text to search for.

  * **k** \(_int_\) ‚Äì Number of results to return. Defaults to 4.

  * **kwargs** \(_Any_\) ‚Äì 

Additional keyword arguments. Some of these arguments are: distance\_metric: L2 for Euclidean, L1 for Nuclear, max L-infinity

> distance, cos for cosine similarity, ‚Äòdot‚Äô for dot product. Defaults to L2.

filter \(Optional\[Dict\[str, str\]\]\): Filter by metadata. Defaults to None.     

embedding\_function \(Callable\): Embedding function to use. Defaults to None.

exec\_option \(str\): DeepLakeVectorStore supports 3 ways to perform     

searching. It could be either ‚Äúpython‚Äù, ‚Äúcompute\_engine‚Äù or ‚Äútensor\_db‚Äù. Defaults to ‚Äúpython‚Äù. \- ‚Äúpython‚Äù - Pure-python implementation running on the client.

> Can be used for data stored anywhere. WARNING: using this option with big datasets is discouraged due to potential memory issues.

    * ‚Äùcompute\_engine‚Äù - Performant C++ implementation of the Deep     

Lake Compute Engine. Runs on the client and can be used for any data stored in or connected to Deep Lake. It cannot be used with in-memory or local datasets.

    * ‚Äùtensor\_db‚Äù - Performant, fully-hosted Managed Tensor Database.     

Responsible for storage and query execution. Only available for data stored in the Deep Lake Managed Database. To store datasets in this database, specify runtime = \{‚Äúdb\_engine‚Äù: True\} during dataset creation.

deep\_memory \(bool\): Whether to use the Deep Memory model for improving     

search results. Defaults to False if deep\_memory is not specified in the Vector Store initialization. If True, the distance metric is set to ‚Äúdeepmemory\_distance‚Äù, which represents the metric with which the model was trained. The search is performed using the Deep Memory model. If False, the distance metric is set to ‚ÄúCOS‚Äù or whatever distance metric user specifies.

Returns:     

List of documents most similar to the query     

text with distance in float.

Return type:     

List\[Tuple\[[Document](https://python.langchain.com/api_reference/core/documents/langchain_core.documents.base.Document.html#langchain_core.documents.base.Document "langchain_core.documents.base.Document"), float\]\]

Examples using DeepLake

  * [Activeloop Deep Lake](https://python.langchain.com/docs/integrations/vectorstores/activeloop_deeplake/)

  * [Activeloop Deep Memory](https://python.langchain.com/docs/integrations/retrievers/activeloop/)

  * [Deep Lake](https://python.langchain.com/docs/integrations/retrievers/self_query/activeloop_deeplake_self_query/)

__On this page   *[\*]: Keyword-only parameters separator (PEP 3102)   *[/]: Positional-only parameter separator (PEP 570)