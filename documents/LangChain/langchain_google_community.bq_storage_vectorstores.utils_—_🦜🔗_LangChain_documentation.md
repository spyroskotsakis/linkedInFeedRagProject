# langchain_google_community.bq_storage_vectorstores.utils â€” ðŸ¦œðŸ”— LangChain  documentation

**URL:** https://python.langchain.com/api_reference/_modules/langchain_google_community/bq_storage_vectorstores/utils.html
**Word Count:** 94
**Links Count:** 16
**Scraped:** 2025-07-21 08:58:43
**Status:** completed

---

# Source code for langchain\_google\_community.bq\_storage\_vectorstores.utils               from typing import Any, Dict          from google.cloud.exceptions import NotFound                              [[docs]](https://python.langchain.com/api_reference/google_community/bq_storage_vectorstores/langchain_google_community.bq_storage_vectorstores.utils.validate_column_in_bq_schema.html#langchain_google_community.bq_storage_vectorstores.utils.validate_column_in_bq_schema)     def validate_column_in_bq_schema(         columns: dict, column_name: str, expected_types: list, expected_modes: list     ) -> None:         """Validates a column within a BigQuery schema.              Args:             columns: A dictionary of BigQuery SchemaField objects representing             the table schema.             column_name: The name of the column to validate.             expected_types: A list of acceptable data types for the column.             expected_modes: A list of acceptable modes for the column.              Raises:             ValueError: If the column doesn't exist, has an unacceptable type,             or has an unacceptable mode.         """              if column_name not in columns:             raise ValueError(f"Column {column_name} is missing from the schema.")              column = columns[column_name]              if column.field_type not in expected_types:             raise ValueError(                 f"Column {column_name} must be one of the following types: {expected_types}"             )              if column.mode not in expected_modes:             raise ValueError(                 f"Column {column_name} must be one of the following modes: {expected_modes}"             )                                             [[docs]](https://python.langchain.com/api_reference/google_community/bq_storage_vectorstores/langchain_google_community.bq_storage_vectorstores.utils.doc_match_filter.html#langchain_google_community.bq_storage_vectorstores.utils.doc_match_filter)     def doc_match_filter(document: Dict[str, Any], filter: Dict[str, Any]) -> bool:         for column, value in filter.items():             # ignore fields that are not part of the document             if document.get(column, value) != value:                 return False         return True                                             [[docs]](https://python.langchain.com/api_reference/google_community/bq_storage_vectorstores/langchain_google_community.bq_storage_vectorstores.utils.cast_proto_type.html#langchain_google_community.bq_storage_vectorstores.utils.cast_proto_type)     def cast_proto_type(column: str, value: Any) -> Any:         if column.startswith("int"):             return int(value)         elif column.startswith("double"):             return float(value)         elif column.startswith("bool"):             return bool(value)         return value                                             [[docs]](https://python.langchain.com/api_reference/google_community/bq_storage_vectorstores/langchain_google_community.bq_storage_vectorstores.utils.check_bq_dataset_exists.html#langchain_google_community.bq_storage_vectorstores.utils.check_bq_dataset_exists)     def check_bq_dataset_exists(client: Any, dataset_id: str) -> bool:         from google.cloud import bigquery  # type: ignore[attr-defined]              if not isinstance(client, bigquery.Client):             raise TypeError("client must be an instance of bigquery.Client")              try:             client.get_dataset(dataset_id)  # Make an API request.             return True         except NotFound:             return False