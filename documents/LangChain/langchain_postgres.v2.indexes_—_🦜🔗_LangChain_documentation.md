# langchain_postgres.v2.indexes â€” ðŸ¦œðŸ”— LangChain  documentation

**URL:** https://python.langchain.com/api_reference/_modules/langchain_postgres/v2/indexes.html
**Word Count:** 208
**Links Count:** 32
**Scraped:** 2025-07-21 09:19:50
**Status:** completed

---

# Source code for langchain\_postgres.v2.indexes               """Index class to add vector indexes on the PGVectorStore.          Learn more about vector indexes at https://github.com/pgvector/pgvector?tab=readme-ov-file#indexing     """          import enum     import re     import warnings     from abc import ABC, abstractmethod     from dataclasses import dataclass, field     from typing import Optional                              [[docs]](https://python.langchain.com/api_reference/postgres/v2/langchain_postgres.v2.indexes.StrategyMixin.html#langchain_postgres.v2.indexes.StrategyMixin)     @dataclass     class StrategyMixin:         operator: str         search_function: str         index_function: str                                             [[docs]](https://python.langchain.com/api_reference/postgres/v2/langchain_postgres.v2.indexes.DistanceStrategy.html#langchain_postgres.v2.indexes.DistanceStrategy)     class DistanceStrategy(StrategyMixin, enum.Enum):         """Enumerator of the Distance strategies."""              EUCLIDEAN = "<->", "l2_distance", "vector_l2_ops"         COSINE_DISTANCE = "<=>", "cosine_distance", "vector_cosine_ops"         INNER_PRODUCT = "<#>", "inner_product", "vector_ip_ops"                              DEFAULT_DISTANCE_STRATEGY: DistanceStrategy = DistanceStrategy.COSINE_DISTANCE     DEFAULT_INDEX_NAME_SUFFIX: str = "langchainvectorindex"                              [[docs]](https://python.langchain.com/api_reference/postgres/v2/langchain_postgres.v2.indexes.validate_identifier.html#langchain_postgres.v2.indexes.validate_identifier)     def validate_identifier(identifier: str) -> None:         if re.match(r"^[a-zA-Z_][a-zA-Z0-9_]*$", identifier) is None:             raise ValueError(                 f"Invalid identifier: {identifier}. Identifiers must start with a letter or underscore, and subsequent characters can be letters, digits, or underscores."             )                                             [[docs]](https://python.langchain.com/api_reference/postgres/v2/langchain_postgres.v2.indexes.BaseIndex.html#langchain_postgres.v2.indexes.BaseIndex)     @dataclass     class BaseIndex(ABC):         """         Abstract base class for defining vector indexes.              Attributes:             name (Optional[str]): A human-readable name for the index. Defaults to None.             index_type (str): A string identifying the type of index. Defaults to "base".             distance_strategy (DistanceStrategy): The strategy used to calculate distances                 between vectors in the index. Defaults to DistanceStrategy.COSINE_DISTANCE.             partial_indexes (Optional[list[str]]): A list of names of partial indexes. Defaults to None.             extension_name (Optional[str]): The name of the extension to be created for the index, if any. Defaults to None.         """              name: Optional[str] = None         index_type: str = "base"         distance_strategy: DistanceStrategy = field(             default_factory=lambda: DistanceStrategy.COSINE_DISTANCE         )         partial_indexes: Optional[list[str]] = None         extension_name: Optional[str] = None                         [[docs]](https://python.langchain.com/api_reference/postgres/v2/langchain_postgres.v2.indexes.BaseIndex.html#langchain_postgres.v2.indexes.BaseIndex.index_options)         @abstractmethod         def index_options(self) -> str:             """Set index query options for vector store initialization."""             raise NotImplementedError(                 "index_options method must be implemented by subclass"             )                                        [[docs]](https://python.langchain.com/api_reference/postgres/v2/langchain_postgres.v2.indexes.BaseIndex.html#langchain_postgres.v2.indexes.BaseIndex.get_index_function)         def get_index_function(self) -> str:             return self.distance_strategy.index_function                             def __post_init__(self) -> None:             """Check if initialization parameters are valid.                  Raises:                 ValueError: extension_name is a valid postgreSQL identifier             """                  if self.extension_name:                 validate_identifier(self.extension_name)             if self.index_type:                 validate_identifier(self.index_type)                                             [[docs]](https://python.langchain.com/api_reference/postgres/v2/langchain_postgres.v2.indexes.ExactNearestNeighbor.html#langchain_postgres.v2.indexes.ExactNearestNeighbor)     @dataclass     class ExactNearestNeighbor(BaseIndex):         index_type: str = "exactnearestneighbor"                                             [[docs]](https://python.langchain.com/api_reference/postgres/v2/langchain_postgres.v2.indexes.QueryOptions.html#langchain_postgres.v2.indexes.QueryOptions)     @dataclass     class QueryOptions(ABC):                    [[docs]](https://python.langchain.com/api_reference/postgres/v2/langchain_postgres.v2.indexes.QueryOptions.html#langchain_postgres.v2.indexes.QueryOptions.to_parameter)         @abstractmethod         def to_parameter(self) -> list[str]:             """Convert index attributes to list of configurations."""             raise NotImplementedError("to_parameter method must be implemented by subclass")                                        [[docs]](https://python.langchain.com/api_reference/postgres/v2/langchain_postgres.v2.indexes.QueryOptions.html#langchain_postgres.v2.indexes.QueryOptions.to_string)         @abstractmethod         def to_string(self) -> str:             """Convert index attributes to string."""             raise NotImplementedError("to_string method must be implemented by subclass")                                                            [[docs]](https://python.langchain.com/api_reference/postgres/v2/langchain_postgres.v2.indexes.HNSWIndex.html#langchain_postgres.v2.indexes.HNSWIndex)     @dataclass     class HNSWIndex(BaseIndex):         index_type: str = "hnsw"         m: int = 16         ef_construction: int = 64                         [[docs]](https://python.langchain.com/api_reference/postgres/v2/langchain_postgres.v2.indexes.HNSWIndex.html#langchain_postgres.v2.indexes.HNSWIndex.index_options)         def index_options(self) -> str:             """Set index query options for vector store initialization."""             return f"(m = {self.m}, ef_construction = {self.ef_construction})"                                                            [[docs]](https://python.langchain.com/api_reference/postgres/v2/langchain_postgres.v2.indexes.HNSWQueryOptions.html#langchain_postgres.v2.indexes.HNSWQueryOptions)     @dataclass     class HNSWQueryOptions(QueryOptions):         ef_search: int = 40                         [[docs]](https://python.langchain.com/api_reference/postgres/v2/langchain_postgres.v2.indexes.HNSWQueryOptions.html#langchain_postgres.v2.indexes.HNSWQueryOptions.to_parameter)         def to_parameter(self) -> list[str]:             """Convert index attributes to list of configurations."""             return [f"hnsw.ef_search = {self.ef_search}"]                                        [[docs]](https://python.langchain.com/api_reference/postgres/v2/langchain_postgres.v2.indexes.HNSWQueryOptions.html#langchain_postgres.v2.indexes.HNSWQueryOptions.to_string)         def to_string(self) -> str:             """Convert index attributes to string."""             warnings.warn(                 "to_string is deprecated, use to_parameter instead.",                 DeprecationWarning,             )             return f"hnsw.ef_search = {self.ef_search}"                                                            [[docs]](https://python.langchain.com/api_reference/postgres/v2/langchain_postgres.v2.indexes.IVFFlatIndex.html#langchain_postgres.v2.indexes.IVFFlatIndex)     @dataclass     class IVFFlatIndex(BaseIndex):         index_type: str = "ivfflat"         lists: int = 100                         [[docs]](https://python.langchain.com/api_reference/postgres/v2/langchain_postgres.v2.indexes.IVFFlatIndex.html#langchain_postgres.v2.indexes.IVFFlatIndex.index_options)         def index_options(self) -> str:             """Set index query options for vector store initialization."""             return f"(lists = {self.lists})"                                                            [[docs]](https://python.langchain.com/api_reference/postgres/v2/langchain_postgres.v2.indexes.IVFFlatQueryOptions.html#langchain_postgres.v2.indexes.IVFFlatQueryOptions)     @dataclass     class IVFFlatQueryOptions(QueryOptions):         probes: int = 1                         [[docs]](https://python.langchain.com/api_reference/postgres/v2/langchain_postgres.v2.indexes.IVFFlatQueryOptions.html#langchain_postgres.v2.indexes.IVFFlatQueryOptions.to_parameter)         def to_parameter(self) -> list[str]:             """Convert index attributes to list of configurations."""             return [f"ivfflat.probes = {self.probes}"]                                        [[docs]](https://python.langchain.com/api_reference/postgres/v2/langchain_postgres.v2.indexes.IVFFlatQueryOptions.html#langchain_postgres.v2.indexes.IVFFlatQueryOptions.to_string)         def to_string(self) -> str:             """Convert index attributes to string."""             warnings.warn(                 "to_string is deprecated, use to_parameter instead.",                 DeprecationWarning,             )             return f"ivfflat.probes = {self.probes}"